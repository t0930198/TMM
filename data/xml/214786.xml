<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214786</bug_id>
          
          <creation_ts>2008-01-09 13:29:00 -0500</creation_ts>
          <short_desc>[regression][archive]rename a virtual directory does not work properly</short_desc>
          <delta_ts>2010-11-26 11:22:14 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>4</classification_id>
          <classification>Tools</classification>
          <product>Target Management</product>
          <component>RSE</component>
          <version>3.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.0 M5</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Xuan Chen">xuanchen</reporter>
          <assigned_to name="Xuan Chen">xuanchen</assigned_to>
          
          <qa_contact name="Martin Oberhuber">martin.oberhuber</qa_contact>
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1128321</commentid>
    <comment_count>0</comment_count>
    <who name="Xuan Chen">xuanchen</who>
    <bug_when>2008-01-09 13:29:35 -0500</bug_when>
    <thetext>If you have a virtual folder called folder1a.  And you rename it to folder1.  And then try to rename it back, you could not.  Message &quot;Name already exist&quot; shown on the rename dialog.

This is caused by fixing of bug 214251.  We update the Virtual File System node, instead of replacing the nodes after reame now.  But the logic in the code is not quite correct.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1129409</commentid>
    <comment_count>1</comment_count>
      <attachid>86636</attachid>
    <who name="Xuan Chen">xuanchen</who>
    <bug_when>2008-01-10 21:31:10 -0500</bug_when>
    <thetext>Created attachment 86636
fix for this problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1129410</commentid>
    <comment_count>2</comment_count>
    <who name="Xuan Chen">xuanchen</who>
    <bug_when>2008-01-10 21:32:16 -0500</bug_when>
    <thetext>I&apos;ve committed the changes to cvs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1848736</commentid>
    <comment_count>3</comment_count>
    <who name="Xuan Chen">xuanchen</who>
    <bug_when>2010-11-26 11:22:14 -0500</bug_when>
    <thetext>Close it.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>86636</attachid>
            <date>2008-01-10 21:31:00 -0500</date>
            <delta_ts>2008-01-10 21:31:10 -0500</delta_ts>
            <desc>fix for this problem.</desc>
            <filename>patch_214786.txt</filename>
            <type>text/plain</type>
            <size>10094</size>
            <attacher name="Xuan Chen">xuanchen</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UucnNlLnNlcnZp
Y2VzDQpJbmRleDogY2xpZW50c2VydmVyL29yZy9lY2xpcHNlL3JzZS9zZXJ2aWNlcy9jbGllbnRz
ZXJ2ZXIvYXJjaGl2ZXV0aWxzL1N5c3RlbVppcEhhbmRsZXIuamF2YQ0KPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNT
IGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UudG0ucnNlL3BsdWdpbnMvb3JnLmVjbGlw
c2UucnNlLnNlcnZpY2VzL2NsaWVudHNlcnZlci9vcmcvZWNsaXBzZS9yc2Uvc2VydmljZXMvY2xp
ZW50c2VydmVyL2FyY2hpdmV1dGlscy9TeXN0ZW1aaXBIYW5kbGVyLmphdmEsdg0KcmV0cmlldmlu
ZyByZXZpc2lvbiAxLjE1DQpkaWZmIC11IC1yMS4xNSBTeXN0ZW1aaXBIYW5kbGVyLmphdmENCi0t
LSBjbGllbnRzZXJ2ZXIvb3JnL2VjbGlwc2UvcnNlL3NlcnZpY2VzL2NsaWVudHNlcnZlci9hcmNo
aXZldXRpbHMvU3lzdGVtWmlwSGFuZGxlci5qYXZhCTQgSmFuIDIwMDggMjE6MzY6NDAgLTAwMDAJ
MS4xNQ0KKysrIGNsaWVudHNlcnZlci9vcmcvZWNsaXBzZS9yc2Uvc2VydmljZXMvY2xpZW50c2Vy
dmVyL2FyY2hpdmV1dGlscy9TeXN0ZW1aaXBIYW5kbGVyLmphdmEJMTEgSmFuIDIwMDggMDI6MzA6
MTEgLTAwMDANCkBAIC0yMCw2ICsyMCw3IEBADQogICogWHVhbiBDaGVuICAgICAgICAoSUJNKSAg
ICAgICAgLSBbMjA5ODI4XSBOZWVkIHRvIG1vdmUgdGhlIENyZWF0ZSBvcGVyYXRpb24gdG8gYSBq
b2IuDQogICogWHVhbiBDaGVuICAgICAgICAoSUJNKSAgICAgICAgLSBbMTkxMzcwXSBbZHN0b3Jl
XSBTdXBlcnRyYW5zZmVyIHppcCBub3QgZGVsZXRlZCB3aGVuIGNhbmNlbGxpbmcgY29weQ0KICAq
IFh1YW4gQ2hlbiAgICAgICAgKElCTSkgICAgICAgIC0gWzIxNDI1MV0gW2FyY2hpdmVdICJMYXN0
IE1vZGlmaWVkIFRpbWUiIGNoYW5nZWQgZm9yIGFsbCB2aXJ0dWFsIGZpbGVzL2ZvbGRlcnMgaWYg
cmVuYW1lL3Bhc3RlL2RlbGV0ZSBvZiBvbmUgdmlydHVhbCBmaWxlLg0KKyAqIFh1YW4gQ2hlbiAg
ICAgICAgKElCTSkgICAgICAgIC0gWzIxNDc4Nl0gW3JlZ3Jlc3Npb25dW2FyY2hpdmVdcmVuYW1l
IGEgdmlydHVhbCBkaXJlY3RvcnkgZG9lcyBub3Qgd29yayBwcm9wZXJseQ0KICAqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqLw0KIA0KIHBhY2thZ2Ugb3JnLmVjbGlwc2UucnNlLnNlcnZpY2VzLmNsaWVu
dHNlcnZlci5hcmNoaXZldXRpbHM7DQpAQCAtMTQ2LDcgKzE0Nyw3IEBADQogCSAqIFVwZGF0ZSB0
aGUgdmlydHVhbCBmaWxlIHN5c3RlbSB0cmVlIGFmdGVyIHJlbmFtZSBvcGVyYXRpb24NCiAJICoN
CiAJICovDQotCXByb3RlY3RlZCB2b2lkIHVwZGF0ZVRyZWVBZnRlclJlbmFtZShIYXNoTWFwIG5l
d09sZE5hbWUpDQorCXByb3RlY3RlZCB2b2lkIHVwZGF0ZVRyZWVBZnRlclJlbmFtZShIYXNoTWFw
IG5ld09sZE5hbWUsIFZpcnR1YWxDaGlsZFtdIHJlbmFtZUxpc3QpDQogCXsNCiAJCUVudW1lcmF0
aW9uIGVudHJpZXMgPSBfemlwZmlsZS5lbnRyaWVzKCk7DQogCQl3aGlsZSAoZW50cmllcy5oYXNN
b3JlRWxlbWVudHMoKSkNCkBAIC0xNTcsOCArMTU4LDI3IEBADQogCQkJew0KIAkJCQlvbGROYW1l
ID0gKFN0cmluZyluZXdPbGROYW1lLmdldChuZXh0LmdldE5hbWUoKSk7DQogCQkJfQ0KLQkJCWZp
bGxCcmFuY2gobmV4dCwgb2xkTmFtZSk7DQorCQkJZmlsbEJyYW5jaEFmdGVyUmVuYW1lKG5leHQs
IG9sZE5hbWUpOw0KIAkJfQ0KKwkJDQorCQkvL2Fsc28gbWFrZSBzdXJlIGFsbCB0aGUgZGlyZWN0
b3J5IGFmZmVjdGVkIGJ5IHJlbmFtZSwgd2UgbmVlZCB0byByZW1vdmUgdGhvc2UgaGFzaG1hcCBm
cm9tIHRoZQ0KKwkJLy92aXJ0dWFsIGZpbGUgc3lzdGVtLg0KKwkJaWYgKHJlbmFtZUxpc3QgPT0g
bnVsbCkNCisJCXsNCisJCQlyZXR1cm47DQorCQl9DQorCQlmb3IgKGludCBpID0gMDsgaSA8IHJl
bmFtZUxpc3QubGVuZ3RoOyBpKyspDQorCQl7DQorCQkJaWYgKHJlbmFtZUxpc3RbaV0uaXNEaXJl
Y3RvcnkpDQorCQkJew0KKwkJCQlTdHJpbmcgZnVsbE5hbWUgPSByZW5hbWVMaXN0W2ldLmZ1bGxO
YW1lOw0KKwkJCQlpZiAoX3ZpcnR1YWxGUy5jb250YWluc0tleShmdWxsTmFtZSkpDQorCQkJCXsN
CisJCQkJCV92aXJ0dWFsRlMucmVtb3ZlKGZ1bGxOYW1lKTsNCisJCQkJfQ0KKwkJCX0NCisJCX0N
CisJCQ0KIAl9DQogDQogCS8qKg0KQEAgLTE3MCw4ICsxOTAsNzMgQEANCiAJICovDQogCXByb3Rl
Y3RlZCB2b2lkIGZpbGxCcmFuY2goWmlwRW50cnkgbmV4dCkNCiAJew0KLQkJZmlsbEJyYW5jaChu
ZXh0LCBudWxsKTsNCisJCWlmIChuZXh0LmdldE5hbWUoKS5lcXVhbHMoIi8iKSkgcmV0dXJuOyAv
LyBkdW1teSBlbnRyeSAvLyROT04tTkxTLTEkDQorCQlWaXJ0dWFsQ2hpbGQgbmV4dENoaWxkID0g
bnVsbDsNCisJCQ0KKwkJLy9XZSBuZWVkIHRvIHNlYXJjaCB0aGlzIGVudHJ5IGluIHRoZSB2aXJ0
dWFsIGZpbGUgc3lzdGVtIHRyZWUuDQorCQkvL0lmIG9sZE5hbWUgaXMgcGFzc2VkIGluLCB3ZSB1
c2UgdGhlIG9sZCBuYW1lLg0KKwkJLy9vdGhlcndpc2UsIHdlIHVzZSB0aGUgZW50cnkgbmFtZS4N
CisJCVN0cmluZyBwYXRoTmFtZVRvU2VhcmNoSW5WRlMgPSBudWxsOw0KKwkJU3RyaW5nIG5hbWVU
b1NlYXJjaEluVkZTID0gbnVsbDsNCisJCQ0KKwkJU3lzdGVtVW5pdmVyc2FsWmlwRW50cnkgbmV4
dEVudHJ5ID0gbmV3IFN5c3RlbVVuaXZlcnNhbFppcEVudHJ5KG5leHQpOw0KKwkJDQorCQkNCisJ
CXBhdGhOYW1lVG9TZWFyY2hJblZGUyA9IG5leHRFbnRyeS5nZXRGdWxsUGF0aCgpOw0KKwkJbmFt
ZVRvU2VhcmNoSW5WRlMgPSBuZXh0RW50cnkuZ2V0TmFtZSgpOw0KKwkJDQorCQkvL3RyeSB0byBm
aW5kIHRoZSB2aXJ0dWFsIGNoaWxkIGZyb20gdGhlIG1lbW9yeSB0cmVlDQorCQlpZiAoX3ZpcnR1
YWxGUy5jb250YWluc0tleShwYXRoTmFtZVRvU2VhcmNoSW5WRlMpKQ0KKwkJew0KKwkJCUhhc2hN
YXAgaXRzRGlyZWN0b3J5ID0gKEhhc2hNYXApX3ZpcnR1YWxGUy5nZXQocGF0aE5hbWVUb1NlYXJj
aEluVkZTKTsNCisJCQlpZiAoaXRzRGlyZWN0b3J5LmNvbnRhaW5zS2V5KG5hbWVUb1NlYXJjaElu
VkZTKSkNCisJCQl7DQorCQkJCW5leHRDaGlsZCA9IChWaXJ0dWFsQ2hpbGQpaXRzRGlyZWN0b3J5
LmdldChuYW1lVG9TZWFyY2hJblZGUyk7DQorCQkJfQ0KKwkJfQ0KKwkJDQorCQlpZiAobnVsbCA9
PSBuZXh0Q2hpbGQpDQorCQl7DQorCQkJbmV4dENoaWxkID0gbmV3IFZpcnR1YWxDaGlsZCh0aGlz
LCBuZXh0RW50cnkuZ2V0RnVsbE5hbWUoKSk7DQorCQl9DQorCQllbHNlDQorCQl7DQorCQkJLy9X
ZSBmb3VuZCB0aGUgdmlydHVhbCBjaGlsZCwgYnV0IGl0cyBuYW1lIGNvdWxkIGFsc28gYmVlbiBj
aGFuZ2VkLiAgU28gbmVlZCB0byB1cGRhdGUgaXQgDQorCQkJbmV4dENoaWxkLnJlbmFtZVRvKG5l
eHRFbnRyeS5nZXRGdWxsTmFtZSgpKTsNCisJCX0NCisJCQ0KKwkJaWYgKG5leHQuaXNEaXJlY3Rv
cnkoKSkNCisJCXsNCisJCQluZXh0Q2hpbGQuaXNEaXJlY3RvcnkgPSB0cnVlOw0KKwkJCQkNCisJ
CQlpZiAoIV92aXJ0dWFsRlMuY29udGFpbnNLZXkobmV4dENoaWxkLmZ1bGxOYW1lKSkNCisJCQl7
DQorCQkJCV92aXJ0dWFsRlMucHV0KG5leHRDaGlsZC5mdWxsTmFtZSwgbmV3IEhhc2hNYXAoKSk7
DQorCQkJfQkNCisJCX0NCisJCS8vTm93LCB1cGRhdGUgb3RoZXIgcHJvcGVydGllcw0KKwkJbmV4
dENoaWxkLnNldENvbW1lbnQobmV4dC5nZXRDb21tZW50KCkpOw0KKwkJbmV4dENoaWxkLnNldENv
bXByZXNzZWRTaXplKG5leHQuZ2V0Q29tcHJlc3NlZFNpemUoKSk7DQorCQlJbnRlZ2VyIG1ldGhv
ZEludFZhbHVlID0gbmV3IEludGVnZXIobmV4dC5nZXRNZXRob2QoKSk7DQorCQluZXh0Q2hpbGQu
c2V0Q29tcHJlc3Npb25NZXRob2QobWV0aG9kSW50VmFsdWUudG9TdHJpbmcoKSk7DQorCQluZXh0
Q2hpbGQuc2V0U2l6ZShuZXh0LmdldFNpemUoKSk7DQorCQluZXh0Q2hpbGQuc2V0VGltZVN0YW1w
KG5leHQuZ2V0VGltZSgpKTsNCisJCQ0KKwkJLy8Ja2V5IGhhcyBub3QgYmVlbiBlbmNvdW50ZXJl
ZCBiZWZvcmUsIGNyZWF0ZSBhIG5ldyANCisJCS8vIGVsZW1lbnQgaW4gdGhlIHZpcnR1YWxGUy4N
CisJCWlmICghX3ZpcnR1YWxGUy5jb250YWluc0tleShuZXh0Q2hpbGQucGF0aCkpDQorCQl7DQor
CQkJLy9EbyB3ZSByZWFsbHkgbmVlZCB0byByZWN1cnNpdmVseSBjcmVhdGU/IHllcyBmb3IgdGhp
cyBjYXNlDQorCQkJcmVjdXJzaXZlUG9wdWxhdGUobmV4dENoaWxkLnBhdGgsIG5leHRDaGlsZCk7
DQorCQl9DQorCQllbHNlIC8vIGtleSBoYXMgYmVlbiBlbmNvdW50ZXJlZCBiZWZvcmUsIG5vIG5l
ZWQgdG8gcmVjdXJzaXZlbHkNCisJCQkgLy8gcG9wdWxhdGUgdGhlIHN1YmRpcmVjdG9yaWVzDQor
CQl7DQorCQkJSGFzaE1hcCBobSA9IChIYXNoTWFwKSBfdmlydHVhbEZTLmdldChuZXh0Q2hpbGQu
cGF0aCk7DQorCQkJaG0ucHV0KG5leHRDaGlsZC5uYW1lLCBuZXh0Q2hpbGQpOw0KKwkJfQkJDQog
CX0NCisJDQogCS8qKg0KIAkgKiBQb3B1bGF0ZXMgYW4gZW50aXJlIGJyYW5jaCBvZiB0aGUgdHJl
ZSB0aGF0IGNvbXByaXNlcyB0aGUNCiAJICogdmlydHVhbCBmaWxlIHN5c3RlbS4gVGhlIHBhcmFt
ZXRlciBpcyB0aGUgbGVhZiBub2RlLCBhbmQgZnJvbQ0KQEAgLTE3OSw3ICsyNjQsNyBAQA0KIAkg
KiBvZiB0aGUgbGVhdmVzIGFyZSwgYW5kIHBvcHVsYXRlIHRoZSB0cmVlIGZyb20gdGhlcmUuDQog
CSAqIEBwYXJhbSBuZXh0IFRoZSBaaXBFbnRyeSBmcm9tIHdoaWNoIHRoZSBicmFuY2ggd2lsbCBi
ZSBidWlsdC4NCiAJICovDQotCXByb3RlY3RlZCB2b2lkIGZpbGxCcmFuY2goWmlwRW50cnkgbmV4
dCwgU3RyaW5nIG9sZE5hbWUpDQorCXByb3RlY3RlZCB2b2lkIGZpbGxCcmFuY2hBZnRlclJlbmFt
ZShaaXBFbnRyeSBuZXh0LCBTdHJpbmcgb2xkTmFtZSkNCiAJew0KIAkJaWYgKG5leHQuZ2V0TmFt
ZSgpLmVxdWFscygiLyIpKSByZXR1cm47IC8vIGR1bW15IGVudHJ5IC8vJE5PTi1OTFMtMSQNCiAJ
CVZpcnR1YWxDaGlsZCBuZXh0Q2hpbGQgPSBudWxsOw0KQEAgLTE4OSw2ICsyNzQsNyBAQA0KIAkJ
Ly9vdGhlcndpc2UsIHdlIHVzZSB0aGUgZW50cnkgbmFtZS4NCiAJCVN0cmluZyBwYXRoTmFtZVRv
U2VhcmNoSW5WRlMgPSBudWxsOw0KIAkJU3RyaW5nIG5hbWVUb1NlYXJjaEluVkZTID0gbnVsbDsN
CisJCWJvb2xlYW4gcmVwbGFjZSA9IChvbGROYW1lICE9IG51bGwpOw0KIAkJDQogCQlTeXN0ZW1V
bml2ZXJzYWxaaXBFbnRyeSBuZXh0RW50cnkgPSBuZXcgU3lzdGVtVW5pdmVyc2FsWmlwRW50cnko
bmV4dCk7DQogCQkNCkBAIC0xOTcsOCArMjgzLDMyIEBADQogCQkJaW50IGVuZE9mUGF0aFBvc2l0
aW9uID0gb2xkTmFtZS5sYXN0SW5kZXhPZigiLyIpOyAvLyROT04tTkxTLTEkDQogCQkJaWYgKGVu
ZE9mUGF0aFBvc2l0aW9uICE9IC0xKSANCiAJCQl7DQotCQkJCXBhdGhOYW1lVG9TZWFyY2hJblZG
UyA9IG9sZE5hbWUuc3Vic3RyaW5nKDAsZW5kT2ZQYXRoUG9zaXRpb24pOw0KLQkJCQluYW1lVG9T
ZWFyY2hJblZGUyA9IG9sZE5hbWUuc3Vic3RyaW5nKGVuZE9mUGF0aFBvc2l0aW9uKzEpOw0KKwkJ
CQlpZiAoZW5kT2ZQYXRoUG9zaXRpb24gPT0gKG9sZE5hbWUubGVuZ3RoKCkgLSAxKSkNCisJCQkJ
ew0KKwkJCQkJLy9JdCBpcyBhIGRpcmVjdG9yeSwgdGhlbiB3ZSBuZWVkIHRvIHVzZSBpdHMgcGFy
ZW50IGZ1bGxuYW1lIGFzIHRoZSBpdHMgcGF0aC4NCisJCQkJCVN0cmluZyBuYW1lV2l0aG91dExh
c3RTbGFzaCA9IG9sZE5hbWUuc3Vic3RyaW5nKDAsIGVuZE9mUGF0aFBvc2l0aW9uKTsNCisJCQkJ
CWludCBlbmRPZlBhdGhQb3NOYW1lV2l0aG91dExhc3RTbGFzaCA9IG5hbWVXaXRob3V0TGFzdFNs
YXNoLmxhc3RJbmRleE9mKCIvIik7IC8vJE5PTi1OTFMtMSQNCisJCQkJCWlmIChlbmRPZlBhdGhQ
b3NOYW1lV2l0aG91dExhc3RTbGFzaCAhPSAtMSkNCisJCQkJCXsNCisJCQkJCQkvL2V4YW1wbGUg
Zm9yIHRoaXMgY2FzZSBpczogDQorCQkJCQkJLy9mdWxscGF0aCBmb2xkZXIxL2ZvbGRlcjEyLw0K
KwkJCQkJCS8vSW50IHRoaXMgY2FzZSwgcGF0aE5hbWVUb1NlYXJjaEluVkZTIHNob3VsZCBiZSAi
Zm9sZGVyMSIsIGFuZCBuYW1lVG9TZWFyY2hJblZGUyBzaG91bGQgYmUgImZvbGRlcjEyIg0KKwkJ
CQkJCXBhdGhOYW1lVG9TZWFyY2hJblZGUyA9IG9sZE5hbWUuc3Vic3RyaW5nKDAsIGVuZE9mUGF0
aFBvc05hbWVXaXRob3V0TGFzdFNsYXNoKTsNCisJCQkJCQluYW1lVG9TZWFyY2hJblZGUyA9IG9s
ZE5hbWUuc3Vic3RyaW5nKGVuZE9mUGF0aFBvc05hbWVXaXRob3V0TGFzdFNsYXNoICsgMSwgZW5k
T2ZQYXRoUG9zaXRpb24pOw0KKwkJCQkJfQ0KKwkJCQkJZWxzZQ0KKwkJCQkJew0KKwkJCQkJCS8v
SXQgaXMgdGhlIGNhc2Ugb2Ygc29tZXRoaW5nIHdoZXJlIGl0cyBmdWxsIHBhdGggaXMgImZvbGRl
cjEvIg0KKwkJCQkJCS8vSW4gdGhpcyBjYXNlLCBwYXRoTmFtZVRvU2VhcmNoSW5WRlMgc2hvdWxk
IGJlICIiLCBhbmQgbmFtZVRvU2VhcmNoSW5WRlMgc2hvdWxkIGJlICJmb2xkZXIiDQorCQkJCQkJ
cGF0aE5hbWVUb1NlYXJjaEluVkZTID0gIiI7ICAvLyROT04tTkxTLTEkDQorCQkJCQkJbmFtZVRv
U2VhcmNoSW5WRlMgPSBvbGROYW1lLnN1YnN0cmluZygwLCBlbmRPZlBhdGhQb3NpdGlvbik7DQor
CQkJCQl9DQorCQkJCX0NCisJCQkJZWxzZSANCisJCQkJew0KKwkJCQkJcGF0aE5hbWVUb1NlYXJj
aEluVkZTID0gb2xkTmFtZS5zdWJzdHJpbmcoMCxlbmRPZlBhdGhQb3NpdGlvbik7DQorCQkJCQlu
YW1lVG9TZWFyY2hJblZGUyA9IG9sZE5hbWUuc3Vic3RyaW5nKGVuZE9mUGF0aFBvc2l0aW9uKzEp
Ow0KKwkJCQl9DQogCQkJfQ0KIAkJCWVsc2UgDQogCQkJew0KQEAgLTIyMSw4ICszMzEsMTggQEAN
CiAJCQkJbmV4dENoaWxkID0gKFZpcnR1YWxDaGlsZClpdHNEaXJlY3RvcnkuZ2V0KG5hbWVUb1Nl
YXJjaEluVkZTKTsNCiAJCQkJLy9XZSBhbHNvIG5lZWQgdG8gcmVtb3ZlIHRoaXMgdmlydHVhbCBj
aGlsZCBmcm9tIFZGUyB0cmVlIGZpcnN0LCBzaW5jZSB3ZSBuZWVkIHRvIA0KIAkJCQkvL3B1dCBp
dCBiYWNrIGFueSB3YXkgbGF0ZXIuDQotCQkJCWl0c0RpcmVjdG9yeS5yZW1vdmUobmFtZVRvU2Vh
cmNoSW5WRlMpOw0KKwkJCQlpZiAocmVwbGFjZSkNCisJCQkJew0KKwkJCQkJaXRzRGlyZWN0b3J5
LnJlbW92ZShuYW1lVG9TZWFyY2hJblZGUyk7DQorCQkJCX0NCisJCQl9DQorCQkJLyoNCisJCQlp
ZiAobmFtZVRvU2VhcmNoSW5WRlMuZXF1YWxzKCIiKSkNCisJCQl7DQorCQkJCS8vSXQgaXMgdGhl
IGRpcmVjdG9yeSBpdHNlbGYsIHJlbW92ZSB0aGUgaGFzaG1hcC4NCisJCQkJX3ZpcnR1YWxGUy5y
ZW1vdmUocGF0aE5hbWVUb1NlYXJjaEluVkZTKTsNCiAJCQl9DQorCQkJKi8NCiAJCX0NCiAJCQ0K
IAkJaWYgKG51bGwgPT0gbmV4dENoaWxkKQ0KQEAgLTI1Niw3ICszNzYsOCBAQA0KIAkJLy8gZWxl
bWVudCBpbiB0aGUgdmlydHVhbEZTLg0KIAkJaWYgKCFfdmlydHVhbEZTLmNvbnRhaW5zS2V5KG5l
eHRDaGlsZC5wYXRoKSkNCiAJCXsNCi0JCQlyZWN1cnNpdmVQb3B1bGF0ZShuZXh0Q2hpbGQucGF0
aCwgbmV4dENoaWxkKTsNCisJCQkvL0RvIHdlIHJlYWxseSBuZWVkIHRvIHJlY3Vyc2l2ZWx5IGNy
ZWF0ZT8gbm8gaW4gdGhpcyBjYXNlDQorCQkJcG9wdWxhdGUobmV4dENoaWxkLnBhdGgsIG5leHRD
aGlsZCk7DQogCQl9DQogCQllbHNlIC8vIGtleSBoYXMgYmVlbiBlbmNvdW50ZXJlZCBiZWZvcmUs
IG5vIG5lZWQgdG8gcmVjdXJzaXZlbHkNCiAJCQkgLy8gcG9wdWxhdGUgdGhlIHN1YmRpcmVjdG9y
aWVzDQpAQCAtMjY2LDYgKzM4Nyw3IEBADQogCQl9CQkNCiAJfQ0KIA0KKw0KIAkvKioNCiAJICog
QWN0dWFsbHkgZG9lcyB0aGUgd29yayBmb3IgdGhlIGZpbGxCcmFuY2ggbWV0aG9kLiBSZWN1cnNp
dmVseQ0KIAkgKiBpbnNlcnRzIGtleS92YWx1ZSBwYWlycyBpbnRvIHRoZSB2aXJ0dWFsRlMsIHRo
ZW4gdXNlcyB0aGUga2V5DQpAQCAtMjg3LDYgKzQwOSw1MiBAQA0KIAkJbmV3VmFsdWUucHV0KHZh
bHVlLm5hbWUsIHZhbHVlKTsNCiAJCV92aXJ0dWFsRlMucHV0KGtleSwgbmV3VmFsdWUpOw0KIAkJ
DQorCQkNCisJCS8vIGJhc2UgY2FzZSAyDQorCQlpZiAoa2V5LmVxdWFscygiIikpIC8vJE5PTi1O
TFMtMSQNCisJCXsNCisJCQlyZXR1cm47DQorCQl9DQorCQllbHNlDQorCQl7DQorCQkJaW50IGkg
PSBrZXkubGFzdEluZGV4T2YoIi8iKTsgLy8kTk9OLU5MUy0xJA0KKwkJCWlmIChpID09IC0xKSAv
LyByZWN1cnNpdmUgbGFzdCBzdGVwDQorCQkJew0KKwkJCQlWaXJ0dWFsQ2hpbGQgbmV4dFZhbHVl
ID0gbmV3IFZpcnR1YWxDaGlsZCh0aGlzLCBrZXkpOw0KKwkJCQluZXh0VmFsdWUuaXNEaXJlY3Rv
cnkgPSB0cnVlOw0KKwkJCQlyZWN1cnNpdmVQb3B1bGF0ZSgiIiwgbmV4dFZhbHVlKTsgLy8kTk9O
LU5MUy0xJA0KKwkJCQlyZXR1cm47DQorCQkJfQ0KKwkJCWVsc2UgLy8gcmVjdXJzaXZlIHN0ZXAN
CisJCQl7DQorCQkJCVN0cmluZyBuZXdLZXkgPSBrZXkuc3Vic3RyaW5nKDAsIGkpOw0KKwkJCQlW
aXJ0dWFsQ2hpbGQgbmV4dFZhbHVlID0gbmV3IFZpcnR1YWxDaGlsZCh0aGlzLCBrZXkpOw0KKwkJ
CQluZXh0VmFsdWUuaXNEaXJlY3RvcnkgPSB0cnVlOw0KKwkJCQlyZWN1cnNpdmVQb3B1bGF0ZShu
ZXdLZXksIG5leHRWYWx1ZSk7DQorCQkJCXJldHVybjsNCisJCQl9DQorCQkJCQ0KKwkJfQ0KKwkJ
DQorCQkNCisJfQ0KKwkNCisJcHJvdGVjdGVkIHZvaWQgcG9wdWxhdGUoU3RyaW5nIGtleSwgVmly
dHVhbENoaWxkIHZhbHVlKQ0KKwl7DQorCQkvLyBiYXNlIGNhc2UgMToga2V5IGhhcyBiZWVuIGVu
Y291bnRlcmVkIGJlZm9yZSwgZmluaXNoIHJlY3Vyc2luZw0KKwkJaWYgKF92aXJ0dWFsRlMuY29u
dGFpbnNLZXkoa2V5KSkNCisJCXsNCisJCQlIYXNoTWFwIGhtID0gKEhhc2hNYXApIF92aXJ0dWFs
RlMuZ2V0KGtleSk7DQorCQkJaG0ucHV0KHZhbHVlLm5hbWUsIHZhbHVlKTsNCisJCQlyZXR1cm47
DQorCQl9DQorCQkNCisJCS8vIGVsc2UNCisJCUhhc2hNYXAgbmV3VmFsdWUgPSBuZXcgSGFzaE1h
cCgpOw0KKwkJbmV3VmFsdWUucHV0KHZhbHVlLm5hbWUsIHZhbHVlKTsNCisJCV92aXJ0dWFsRlMu
cHV0KGtleSwgbmV3VmFsdWUpOw0KKwkJDQorCQkNCiAJCS8vIGJhc2UgY2FzZSAyDQogCQlpZiAo
a2V5LmVxdWFscygiIikpIC8vJE5PTi1OTFMtMSQNCiAJCXsNCkBAIC0zMTMsNiArNDgxLDcgQEAN
CiAJCQkJDQogCQl9DQogCQkNCisJCQ0KIAl9DQogDQogCS8qIChub24tSmF2YWRvYykNCkBAIC0x
NzgxLDcgKzE5NTAsNyBAQA0KIAkJCQlkZXN0LnNldE1ldGhvZChaaXBPdXRwdXRTdHJlYW0uREVG
TEFURUQpOw0KIAkJCQkvLyBnZXQgYWxsIHRoZSBlbnRyaWVzIGluIHRoZSBvbGQgemlwCQkJCSAg
DQogCQkJCVZpcnR1YWxDaGlsZFtdIHZjTGlzdCA9IGdldFZpcnR1YWxDaGlsZHJlbkxpc3QoZmFs
c2UsIGFyY2hpdmVPcGVyYXRpb25Nb25pdG9yKTsNCi0JCQkJVmlydHVhbENoaWxkW10gcmVuYW1l
TGlzdDsNCisJCQkJVmlydHVhbENoaWxkW10gcmVuYW1lTGlzdCA9IG51bGw7DQogCQkJCUhhc2hN
YXAgb2xkTmV3TmFtZXMgPSBuZXcgSGFzaE1hcCgpOw0KIAkJCQlIYXNoTWFwIG5ld09sZE5hbWVz
ID0gbmV3IEhhc2hNYXAoKTsNCiAJCQkJLy8gaWYgdGhlIGVudHJ5IHRvIHJlbmFtZSBpcyBhIGRp
cmVjdG9yeSwgd2UgbXVzdCB0aGVuIHJlbmFtZQ0KQEAgLTE4MzcsNyArMjAwNiw3IEBADQogCQkJ
CXJlcGxhY2VPbGRaaXAob3V0cHV0VGVtcEZpbGUpOw0KIAkJCQkNCiAJCQkJLy8gTm93IHJlYnVp
bGQgdGhlIHRyZWUNCi0JCQkJdXBkYXRlVHJlZUFmdGVyUmVuYW1lKG5ld09sZE5hbWVzKTsNCisJ
CQkJdXBkYXRlVHJlZUFmdGVyUmVuYW1lKG5ld09sZE5hbWVzLCByZW5hbWVMaXN0KTsgDQogCQkJ
CWlmIChjbG9zZVppcEZpbGUpIGNsb3NlWmlwRmlsZSgpOw0KIAkJCQlyZXR1cm4gdHJ1ZTsNCiAJ
CQl9DQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>