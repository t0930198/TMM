<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214119</bug_id>
          
          <creation_ts>2008-01-02 10:36:00 -0500</creation_ts>
          <short_desc>[sec] Cleanup and finalize advanced UI</short_desc>
          <delta_ts>2008-04-24 12:39:06 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>12</classification_id>
          <classification>RT</classification>
          <product>Equinox</product>
          <component>Security</component>
          <version>3.4</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.4 M7</target_milestone>
          <dependson>225170</dependson>
          <blocked>227293</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Matt Flaherty">mwflaher</reporter>
          <assigned_to name="Matt Flaherty">mwflaher</assigned_to>
          <cc>albert_silliman</cc>
    
    <cc>eric_w_li</cc>
    
    <cc>Kevin_McGuire</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1124165</commentid>
    <comment_count>0</comment_count>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-01-02 10:36:02 -0500</bug_when>
    <thetext>Final issues in cleaning up the default &apos;advanced&apos; panel

1. Layout

There will be more following a UI review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1174304</commentid>
    <comment_count>1</comment_count>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-03-10 16:00:54 -0400</bug_when>
    <thetext>Moving to the security component</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1203888</commentid>
    <comment_count>2</comment_count>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-04-15 14:09:11 -0400</bug_when>
    <thetext>Retarget for M7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1213373</commentid>
    <comment_count>3</comment_count>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-04-24 10:15:18 -0400</bug_when>
    <thetext>After talking this over with Kevin, we&apos;re trying out this information as part of the configuration details page in the &apos;about&apos; dialog. Since the current incarnation is read-only and very technical (ie: scary), configuration details seems appropriate. Patch shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1213377</commentid>
    <comment_count>4</comment_count>
      <attachid>97461</attachid>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-04-24 10:18:27 -0400</bug_when>
    <thetext>Created attachment 97461
Draft patch (needs some cleanup)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1213437</commentid>
    <comment_count>5</comment_count>
      <attachid>97472</attachid>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-04-24 10:52:43 -0400</bug_when>
    <thetext>Created attachment 97472
Proposed patch

NON-NLS and consistent class name with other ISystemSummarySection implementations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1213566</commentid>
    <comment_count>6</comment_count>
    <who name="Matt Flaherty">mwflaher</who>
    <bug_when>2008-04-24 12:39:06 -0400</bug_when>
    <thetext>Patch committed to HEAD. Tested on Sun 1.4, 1.5 and 1.6 JREs.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>97461</attachid>
            <date>2008-04-24 10:18:00 -0400</date>
            <delta_ts>2008-04-24 10:52:43 -0400</delta_ts>
            <desc>Draft patch (needs some cleanup)</desc>
            <filename>patch_214119.txt</filename>
            <type>text/plain</type>
            <size>9760</size>
            <attacher name="Matt Flaherty">mwflaher</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZXF1aW5veC5z
ZWN1cml0eS51aQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9lcXVpbm94L2ludGVybmFsL3NlY3Vy
aXR5L3VpL3ByZWZlcmVuY2VzL1NlY3VyaXR5Q2F0ZWdvcnlQYWdlLmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNlLmVxdWlub3gvc2VjdXJpdHkv
YnVuZGxlcy9vcmcuZWNsaXBzZS5lcXVpbm94LnNlY3VyaXR5LnVpL3NyYy9vcmcvZWNsaXBzZS9l
cXVpbm94L2ludGVybmFsL3NlY3VyaXR5L3VpL3ByZWZlcmVuY2VzL1NlY3VyaXR5Q2F0ZWdvcnlQ
YWdlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMNCmRpZmYgLXUgLXIxLjMgU2VjdXJp
dHlDYXRlZ29yeVBhZ2UuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9lcXVpbm94L2ludGVybmFs
L3NlY3VyaXR5L3VpL3ByZWZlcmVuY2VzL1NlY3VyaXR5Q2F0ZWdvcnlQYWdlLmphdmEJMjMgQXBy
IDIwMDggMDU6MDk6MDUgLTAwMDAJMS4zDQorKysgc3JjL29yZy9lY2xpcHNlL2VxdWlub3gvaW50
ZXJuYWwvc2VjdXJpdHkvdWkvcHJlZmVyZW5jZXMvU2VjdXJpdHlDYXRlZ29yeVBhZ2UuamF2YQky
NCBBcHIgMjAwOCAxNDoxNzowMSAtMDAwMA0KQEAgLTQwLDkgKzQwLDYgQEANCiAJCVByZWZlcmVu
Y2VMaW5rQXJlYSBwb2xpY3lMaW5rQXJlYSA9IG5ldyBQcmVmZXJlbmNlTGlua0FyZWEocGFnZUFy
ZWEsIFNXVC5OT05FLCAib3JnLmVjbGlwc2UuZXF1aW5veC5zZWN1cml0eS51aS5wb2xpY3kiLCBT
ZWN1cml0eVVJTXNnLkNBVFBBR0VfTEFCRUxfUE9MSUNZLCAoSVdvcmtiZW5jaFByZWZlcmVuY2VD
b250YWluZXIpIGdldENvbnRhaW5lcigpLCBudWxsKTsgLy8kTk9OLU5MUy0xJA0KIAkJcG9saWN5
TGlua0FyZWEuZ2V0Q29udHJvbCgpLnNldExheW91dERhdGEobmV3IEdyaWREYXRhKEdyaWREYXRh
LkZJTExfSE9SSVpPTlRBTCB8IEdyaWREYXRhLkdSQUJfSE9SSVpPTlRBTCkpOw0KIA0KLQkJUHJl
ZmVyZW5jZUxpbmtBcmVhIGFkdmFuY2VkTGlua0FyZWEgPSBuZXcgUHJlZmVyZW5jZUxpbmtBcmVh
KHBhZ2VBcmVhLCBTV1QuTk9ORSwgIm9yZy5lY2xpcHNlLmVxdWlub3guc2VjdXJpdHkudWkuYWR2
YW5jZWQiLCBTZWN1cml0eVVJTXNnLkNBVFBBR0VfTEFCRUxfQURWQU5DRUQsIChJV29ya2JlbmNo
UHJlZmVyZW5jZUNvbnRhaW5lcikgZ2V0Q29udGFpbmVyKCksIG51bGwpOyAvLyROT04tTkxTLTEk
DQotCQlhZHZhbmNlZExpbmtBcmVhLmdldENvbnRyb2woKS5zZXRMYXlvdXREYXRhKG5ldyBHcmlk
RGF0YShHcmlkRGF0YS5GSUxMX0hPUklaT05UQUwgfCBHcmlkRGF0YS5HUkFCX0hPUklaT05UQUwp
KTsNCi0NCiAJCVByZWZlcmVuY2VMaW5rQXJlYSBzdG9yYWdlTGlua0FyZWEgPSBuZXcgUHJlZmVy
ZW5jZUxpbmtBcmVhKHBhZ2VBcmVhLCBTV1QuTk9ORSwgIm9yZy5lY2xpcHNlLmVxdWlub3guc2Vj
dXJpdHkudWkuc3RvcmFnZSIsIFNlY3VyaXR5VUlNc2cuQ0FUUEFHRV9MQUJFTF9TVE9SQUdFLCAo
SVdvcmtiZW5jaFByZWZlcmVuY2VDb250YWluZXIpIGdldENvbnRhaW5lcigpLCBudWxsKTsgLy8k
Tk9OLU5MUy0xJA0KIAkJc3RvcmFnZUxpbmtBcmVhLmdldENvbnRyb2woKS5zZXRMYXlvdXREYXRh
KG5ldyBHcmlkRGF0YShHcmlkRGF0YS5GSUxMX0hPUklaT05UQUwgfCBHcmlkRGF0YS5HUkFCX0hP
UklaT05UQUwpKTsNCiANCkluZGV4OiBwbHVnaW4ueG1sDQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTog
L2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5lcXVpbm94L3NlY3VyaXR5L2J1bmRsZXMvb3Jn
LmVjbGlwc2UuZXF1aW5veC5zZWN1cml0eS51aS9wbHVnaW4ueG1sLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS44DQpkaWZmIC11IC1yMS44IHBsdWdpbi54bWwNCi0tLSBwbHVnaW4ueG1sCTIzIEFw
ciAyMDA4IDA1OjA5OjA2IC0wMDAwCTEuOA0KKysrIHBsdWdpbi54bWwJMjQgQXByIDIwMDggMTQ6
MTc6MDEgLTAwMDANCkBAIC0zOSwxNCArMzksNiBAQA0KICAgICAgIDwvcGFnZT4NCiAgICA8L2V4
dGVuc2lvbj4NCiANCi0gICA8ZXh0ZW5zaW9uIHBvaW50PSJvcmcuZWNsaXBzZS51aS5wcmVmZXJl
bmNlUGFnZXMiPg0KLSAgICAgIDxwYWdlDQotICAgICAgICAgbmFtZT0iJWFkdmFuY2VkIg0KLSAg
ICAgICAgIGNsYXNzPSJvcmcuZWNsaXBzZS5lcXVpbm94LmludGVybmFsLnNlY3VyaXR5LnVpLnBy
ZWZlcmVuY2VzLkFkdmFuY2VkUGFnZSINCi0gICAgICAgICBpZD0ib3JnLmVjbGlwc2UuZXF1aW5v
eC5zZWN1cml0eS51aS5hZHZhbmNlZCINCi0gICAgICAgICBjYXRlZ29yeT0ib3JnLmVjbGlwc2Uu
ZXF1aW5veC5zZWN1cml0eS51aS5jYXRlZ29yeSI+DQotICAgICAgPC9wYWdlPg0KLSAgIDwvZXh0
ZW5zaW9uPg0KICAgIA0KIDwhLS0gICANCiAgICA8ZXh0ZW5zaW9uDQpAQCAtODEsNSArNzMsMTUg
QEANCiAgICAgICAgICAgICBjbGFzcz0ib3JnLmVjbGlwc2UuZXF1aW5veC5pbnRlcm5hbC5zZWN1
cml0eS51aS5zdG9yYWdlLlVJQ2FsbGJhY2tQcm92aWRlciI+DQogICAgICAgPC9wcm92aWRlcj4N
CiAgICA8L2V4dGVuc2lvbj4NCisgICA8ZXh0ZW5zaW9uDQorICAgICAgICAgaWQ9InNlY3VyaXR5
Ig0KKyAgICAgICAgIG5hbWU9IlNlY3VyaXR5Ig0KKyAgICAgICAgIHBvaW50PSJvcmcuZWNsaXBz
ZS51aS5zeXN0ZW1TdW1tYXJ5U2VjdGlvbnMiPg0KKyAgICAgIDxzZWN0aW9uDQorICAgICAgICAg
ICAgY2xhc3M9Im9yZy5lY2xpcHNlLmVxdWlub3guaW50ZXJuYWwuc2VjdXJpdHkudWkuU2VjdXJp
dHlTdW1tYXJ5Ig0KKyAgICAgICAgICAgIGlkPSJzZWN1cml0eVNlY3Rpb24iDQorICAgICAgICAg
ICAgc2VjdGlvblRpdGxlPSJTZWN1cml0eSI+DQorICAgICAgPC9zZWN0aW9uPg0KKyAgIDwvZXh0
ZW5zaW9uPg0KICAgIA0KIDwvcGx1Z2luPg0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9lcXVpbm94
L2ludGVybmFsL3NlY3VyaXR5L3VpL1NlY3VyaXR5U3VtbWFyeS5qYXZhDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2VxdWlub3gvaW50ZXJuYWwvc2VjdXJpdHkvdWkvU2Vj
dXJpdHlTdW1tYXJ5LmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNlL2VxdWlub3gvaW50ZXJu
YWwvc2VjdXJpdHkvdWkvU2VjdXJpdHlTdW1tYXJ5LmphdmENCi0tLSAvZGV2L251bGwJMSBKYW4g
MTk3MCAwMDowMDowMCAtMDAwMA0KKysrIHNyYy9vcmcvZWNsaXBzZS9lcXVpbm94L2ludGVybmFs
L3NlY3VyaXR5L3VpL1NlY3VyaXR5U3VtbWFyeS5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAw
MDANCkBAIC0wLDAgKzEsMTc2IEBADQorLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCisgKiBDb3B5
cmlnaHQgKGMpIDIwMDMsIDIwMDcgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuDQorICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscw0KKyAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlw
c2UgUHVibGljIExpY2Vuc2UgdjEuMA0KKyAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJp
YnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0DQorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9s
ZWdhbC9lcGwtdjEwLmh0bWwNCisgKg0KKyAqIENvbnRyaWJ1dG9yczoNCisgKiAgICAgSUJNIENv
cnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uDQorICoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKiovDQorcGFja2FnZSBvcmcuZWNsaXBzZS5lcXVpbm94LmludGVybmFsLnNlY3Vy
aXR5LnVpOw0KKw0KK2ltcG9ydCBqYXZhLmlvLlByaW50V3JpdGVyOw0KK2ltcG9ydCBqYXZhLnNl
Y3VyaXR5LlByb3ZpZGVyOw0KK2ltcG9ydCBqYXZhLnNlY3VyaXR5LlNlY3VyaXR5Ow0KK2ltcG9y
dCBqYXZhLnV0aWwuKjsNCitpbXBvcnQgb3JnLmVjbGlwc2UudWkuYWJvdXQuSVN5c3RlbVN1bW1h
cnlTZWN0aW9uOw0KKw0KK3B1YmxpYyBjbGFzcyBTZWN1cml0eVN1bW1hcnkgaW1wbGVtZW50cyBJ
U3lzdGVtU3VtbWFyeVNlY3Rpb24gew0KKw0KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg
QUxHX0FMSUFTID0gIkFsZy5BbGlhcy4iOyAvLyROT04tTkxTLTEkDQorCXByaXZhdGUgc3RhdGlj
IGZpbmFsIFN0cmluZyBQUk9WSURFUiA9ICJQcm92aWRlci4iOyAvLyROT04tTkxTLTEkDQorDQor
CXB1YmxpYyB2b2lkIHdyaXRlKFByaW50V3JpdGVyIHdyaXRlcikgew0KKw0KKwkJUHJvdmlkZXJb
XSBwcm92aWRlcnMgPSBTZWN1cml0eS5nZXRQcm92aWRlcnMoKTsNCisJCXdyaXRlci5wcmludGxu
KCJJbnN0YWxsZWQgcHJvdmlkZXJzICgiICsgcHJvdmlkZXJzLmxlbmd0aCArICIpOiAiKTsNCisJ
CXdyaXRlci5wcmludGxuKCk7DQorDQorCQlmb3IgKGludCBpID0gMDsgaSA8IHByb3ZpZGVycy5s
ZW5ndGg7IGkrKykgew0KKwkJCWFwcGVuZFByb3ZpZGVyKHdyaXRlciwgcHJvdmlkZXJzW2ldLCBp
KTsNCisJCX0NCisJfQ0KKw0KKwlwcml2YXRlIHZvaWQgYXBwZW5kUHJvdmlkZXIoUHJpbnRXcml0
ZXIgd3JpdGVyLCBQcm92aWRlciBwcm92aWRlciwgaW50IGluZGV4KSB7DQorCQl3cml0ZXIucHJp
bnRsbigiIFByb3ZpZGVyOiAiICsgcHJvdmlkZXIuZ2V0TmFtZSgpICsgIiwgVmVyc2lvbjogIiAr
IHByb3ZpZGVyLmdldFZlcnNpb24oKSArICIsIENsYXNzOiAiICsgcHJvdmlkZXIuZ2V0Q2xhc3Mo
KS5nZXROYW1lKCkpOw0KKwkJd3JpdGVyLnByaW50bG4oIiAgRGVzY3JpcHRpb246ICIgKyBwcm92
aWRlci5nZXRJbmZvKCkpOw0KKwkJUHJvdmlkZXJTZXJ2aWNlW10gc2VydmljZXMgPSBnZXRTZXJ2
aWNlcyhwcm92aWRlcik7DQorCQl3cml0ZXIucHJpbnRsbigiICBBdmFpbGFibGUgc2VydmljZXMg
KCIgKyBzZXJ2aWNlcy5sZW5ndGggKyAiKToiKTsNCisJCWZvciAoaW50IGkgPSAwOyBpIDwgc2Vy
dmljZXMubGVuZ3RoOyBpKyspIHsNCisJCQlhcHBlbmRTZXJ2aWNlKHdyaXRlciwgc2VydmljZXNb
aV0sIGkpOw0KKwkJfQ0KKwkJd3JpdGVyLnByaW50bG4oKTsNCisJfQ0KKw0KKwlwcml2YXRlIHZv
aWQgYXBwZW5kU2VydmljZShQcmludFdyaXRlciB3cml0ZXIsIFByb3ZpZGVyU2VydmljZSBzZXJ2
aWNlLCBpbnQgaW5kZXgpIHsNCisJCXdyaXRlci5wcmludGxuKCIgICBTZXJ2aWNlOiAiICsgc2Vy
dmljZS5nZXRUeXBlKCkgKyAiLCBBbGdvcml0aG06ICIgKyBzZXJ2aWNlLmdldEFsZ29yaXRobSgp
ICsgIiwgQ2xhc3M6ICIgKyBzZXJ2aWNlLmdldENsYXNzTmFtZSgpKTsNCisJCUxpc3QgYWxpYXNl
cyA9IHNlcnZpY2UuZ2V0QWxpYXNlcygpOw0KKwkJaWYgKG51bGwgIT0gYWxpYXNlcyAmJiAoMCA8
IGFsaWFzZXMuc2l6ZSgpKSkgew0KKwkJCXdyaXRlci5wcmludCgiICAgIEFsaWFzZXM6ICIpOw0K
KwkJCWZvciAoSXRlcmF0b3IgaXQgPSBhbGlhc2VzLml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTsp
IHsNCisJCQkJd3JpdGVyLnByaW50KChTdHJpbmcpIGl0Lm5leHQoKSk7DQorCQkJCWlmIChpdC5o
YXNOZXh0KCkpIHsNCisJCQkJCXdyaXRlci5wcmludCgiLCAiKTsNCisJCQkJfQ0KKwkJCX0NCisJ
CQl3cml0ZXIucHJpbnRsbigpOw0KKwkJfQ0KKwkJTWFwIGF0dHJpYnV0ZXMgPSBzZXJ2aWNlLmdl
dEF0dHJpYnV0ZXMoKTsNCisJCWlmICgobnVsbCAhPSBhdHRyaWJ1dGVzKSAmJiAoMCA8IGF0dHJp
YnV0ZXMuc2l6ZSgpKSkgew0KKwkJCXdyaXRlci5wcmludGxuKCIgICAgQXR0cmlidXRlczoiKTsN
CisJCQlTZXQga2V5cyA9IGF0dHJpYnV0ZXMua2V5U2V0KCk7DQorCQkJZm9yIChJdGVyYXRvciBp
dCA9IGtleXMuaXRlcmF0b3IoKTsgaXQuaGFzTmV4dCgpOykgew0KKwkJCQlTdHJpbmcga2V5ID0g
KFN0cmluZykgaXQubmV4dCgpOw0KKwkJCQl3cml0ZXIucHJpbnQoIiAgICAgICIgKyBrZXkgKyAi
OiAiKTsNCisJCQkJd3JpdGVyLnByaW50bG4oKFN0cmluZykgYXR0cmlidXRlcy5nZXQoa2V5KSk7
DQorCQkJfQ0KKwkJfQ0KKwl9DQorDQorCXByaXZhdGUgc3RhdGljIFByb3ZpZGVyU2VydmljZVtd
IGdldFNlcnZpY2VzKFByb3ZpZGVyIHByb3ZpZGVyKSB7DQorDQorCQlTZXQgcHJvdmlkZXJLZXlz
ID0gcHJvdmlkZXIua2V5U2V0KCk7DQorCQlIYXNodGFibGUgc2VydmljZUxpc3QgPSBuZXcgSGFz
aHRhYmxlKCk7DQorCQlIYXNodGFibGUgYXR0cmlidXRlTWFwID0gbmV3IEhhc2h0YWJsZSgpOyAv
LyAidHlwZSIgPT4gIkhhc2h0YWJsZSBvZiAoYXR0cmlidXRlLHZhbHVlKSBwYWlycyINCisJCUhh
c2h0YWJsZSBhbGlhc01hcCA9IG5ldyBIYXNodGFibGUoKTsgLy8gInR5cGUiID0+ICJBcnJheWxp
c3Qgb2YgYWxpYXNlcyINCisJCWZvciAoSXRlcmF0b3IgaXQgPSBwcm92aWRlcktleXMuaXRlcmF0
b3IoKTsgaXQuaGFzTmV4dCgpOykgew0KKwkJCVN0cmluZyBrZXkgPSAoU3RyaW5nKSBpdC5uZXh0
KCk7DQorDQorCQkJLy8gdGhpcyBpcyBwcm92aWRlciBpbmZvLCBhdmFpbGFibGUgb2ZmIHRoZSBQ
cm92aWRlciBBUEkNCisJCQlpZiAoa2V5LnN0YXJ0c1dpdGgoUFJPVklERVIpKSB7DQorCQkJCWNv
bnRpbnVlOw0KKwkJCX0NCisNCisJCQkvLyB0aGlzIGlzIGFuIGFsaWFzDQorCQkJaWYgKGtleS5z
dGFydHNXaXRoKEFMR19BTElBUykpIHsNCisJCQkJU3RyaW5nIHZhbHVlID0ga2V5LnN1YnN0cmlu
ZyhrZXkuaW5kZXhPZihBTEdfQUxJQVMpICsgQUxHX0FMSUFTLmxlbmd0aCgpLCBrZXkubGVuZ3Ro
KCkpOw0KKwkJCQlTdHJpbmcgdHlwZSA9IChTdHJpbmcpIHByb3ZpZGVyLmdldChrZXkpOw0KKwkJ
CQlTdHJpbmcgYWxnbyA9IHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5pbmRleE9mKCcuJykpOw0K
KwkJCQlTdHJpbmcgYWxpYXMgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZignLicpICsg
MSwgdmFsdWUubGVuZ3RoKCkpOw0KKwkJCQlBcnJheUxpc3QgYWxpYXNMaXN0ID0gKEFycmF5TGlz
dCkgYWxpYXNNYXAuZ2V0KHR5cGUgKyAnLicgKyBhbGdvKTsNCisJCQkJaWYgKGFsaWFzTGlzdCA9
PSBudWxsKSB7DQorCQkJCQlhbGlhc0xpc3QgPSBuZXcgQXJyYXlMaXN0KCk7DQorCQkJCQlhbGlh
c0xpc3QuYWRkKGFsaWFzKTsNCisJCQkJCWFsaWFzTWFwLnB1dCh0eXBlLCBhbGlhc0xpc3QpOw0K
KwkJCQl9IGVsc2Ugew0KKwkJCQkJYWxpYXNMaXN0LmFkZChhbGlhcyk7DQorCQkJCX0NCisJCQl9
DQorDQorCQkJLy8gdGhpcyBpcyBhbiBhdHRyaWJ1dGUNCisJCQllbHNlIGlmIChrZXkuaW5kZXhP
ZignICcpID4gLTEpIHsNCisJCQkJU3RyaW5nIHR5cGUgPSBrZXkuc3Vic3RyaW5nKDAsIGtleS5p
bmRleE9mKCcuJykpOw0KKwkJCQlTdHJpbmcgYWxnb3JpdGhtID0ga2V5LnN1YnN0cmluZyhrZXku
aW5kZXhPZignLicpICsgMSwga2V5LmluZGV4T2YoJyAnKSk7DQorCQkJCVN0cmluZyBhdHRyaWJ1
dGUgPSBrZXkuc3Vic3RyaW5nKGtleS5pbmRleE9mKCcgJykgKyAxLCBrZXkubGVuZ3RoKCkpOw0K
KwkJCQlTdHJpbmcgdmFsdWUgPSAoU3RyaW5nKSBwcm92aWRlci5nZXQoa2V5KTsNCisJCQkJSGFz
aHRhYmxlIGF0dHJpYnV0ZVRhYmxlID0gKEhhc2h0YWJsZSkgYXR0cmlidXRlTWFwLmdldCh0eXBl
ICsgJy4nICsgYWxnb3JpdGhtKTsNCisJCQkJaWYgKGF0dHJpYnV0ZVRhYmxlID09IG51bGwpIHsN
CisJCQkJCWF0dHJpYnV0ZVRhYmxlID0gbmV3IEhhc2h0YWJsZSgpOw0KKwkJCQkJYXR0cmlidXRl
VGFibGUucHV0KGF0dHJpYnV0ZSwgdmFsdWUpOw0KKwkJCQkJYXR0cmlidXRlTWFwLnB1dCh0eXBl
ICsgJy4nICsgYWxnb3JpdGhtLCBhdHRyaWJ1dGVUYWJsZSk7DQorCQkJCX0gZWxzZSB7DQorCQkJ
CQlhdHRyaWJ1dGVUYWJsZS5wdXQoYXR0cmlidXRlLCB2YWx1ZSk7DQorCQkJCX0NCisJCQl9DQor
DQorCQkJLy8gZWxzZSB0aGlzIGlzIGEgc2VydmljZQ0KKwkJCWVsc2Ugew0KKwkJCQlzZXJ2aWNl
TGlzdC5wdXQoa2V5LCBwcm92aWRlci5nZXQoa2V5KSk7DQorCQkJfQ0KKwkJfQ0KKw0KKwkJUHJv
dmlkZXJTZXJ2aWNlW10gc2VydmljZUFycmF5ID0gbmV3IFByb3ZpZGVyU2VydmljZVtzZXJ2aWNl
TGlzdC5zaXplKCldOw0KKwkJU2V0IHNlcnZpY2VLZXlzID0gc2VydmljZUxpc3Qua2V5U2V0KCk7
DQorCQlpbnQgc2VydmljZUNvdW50ID0gMDsNCisJCWZvciAoSXRlcmF0b3IgaXQgPSBzZXJ2aWNl
S2V5cy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7DQorCQkJU3RyaW5nIGtleSA9IChTdHJp
bmcpIGl0Lm5leHQoKTsNCisJCQlTdHJpbmcgdHlwZSA9IGtleS5zdWJzdHJpbmcoMCwga2V5Lmlu
ZGV4T2YoJy4nKSk7DQorCQkJU3RyaW5nIGFsZ28gPSBrZXkuc3Vic3RyaW5nKGtleS5pbmRleE9m
KCcuJykgKyAxLCBrZXkubGVuZ3RoKCkpOw0KKwkJCVN0cmluZyBjbGFzc05hbWUgPSAoU3RyaW5n
KSBzZXJ2aWNlTGlzdC5nZXQoa2V5KTsNCisJCQlMaXN0IGFsaWFzZXMgPSAoTGlzdCkgYWxpYXNN
YXAuZ2V0KGFsZ28pOw0KKwkJCU1hcCBhdHRyaWJ1dGVzID0gKE1hcCkgYXR0cmlidXRlTWFwLmdl
dChrZXkpOw0KKw0KKwkJCXNlcnZpY2VBcnJheVtzZXJ2aWNlQ291bnRdID0gbmV3IFByb3ZpZGVy
U2VydmljZSh0eXBlLCBhbGdvLCBjbGFzc05hbWUsIGFsaWFzZXMsIGF0dHJpYnV0ZXMpOw0KKwkJ
CXNlcnZpY2VDb3VudCsrOw0KKwkJfQ0KKwkJcmV0dXJuIHNlcnZpY2VBcnJheTsNCisJfQ0KKw0K
Kwlwcml2YXRlIHN0YXRpYyBjbGFzcyBQcm92aWRlclNlcnZpY2Ugew0KKw0KKwkJcHJpdmF0ZSBm
aW5hbCBTdHJpbmcgdHlwZTsNCisJCXByaXZhdGUgZmluYWwgU3RyaW5nIGFsZ29yaXRobTsNCisJ
CXByaXZhdGUgZmluYWwgU3RyaW5nIGNsYXNzTmFtZTsNCisJCXByaXZhdGUgZmluYWwgTGlzdCBh
bGlhc2VzOw0KKwkJcHJpdmF0ZSBmaW5hbCBNYXAgYXR0cmlidXRlczsNCisNCisJCXB1YmxpYyBQ
cm92aWRlclNlcnZpY2UoU3RyaW5nIHR5cGUsIFN0cmluZyBhbGdvcml0aG0sIFN0cmluZyBjbGFz
c05hbWUsIExpc3QgYWxpYXNlcywgTWFwIGF0dHJpYnV0ZXMpIHsNCisJCQl0aGlzLnR5cGUgPSB0
eXBlOw0KKwkJCXRoaXMuYWxnb3JpdGhtID0gYWxnb3JpdGhtOw0KKwkJCXRoaXMuY2xhc3NOYW1l
ID0gY2xhc3NOYW1lOw0KKwkJCXRoaXMuYWxpYXNlcyA9IGFsaWFzZXM7DQorCQkJdGhpcy5hdHRy
aWJ1dGVzID0gYXR0cmlidXRlczsNCisJCX0NCisNCisJCXB1YmxpYyBTdHJpbmcgZ2V0VHlwZSgp
IHsNCisJCQlyZXR1cm4gdHlwZTsNCisJCX0NCisNCisJCXB1YmxpYyBTdHJpbmcgZ2V0QWxnb3Jp
dGhtKCkgew0KKwkJCXJldHVybiBhbGdvcml0aG07DQorCQl9DQorDQorCQlwdWJsaWMgU3RyaW5n
IGdldENsYXNzTmFtZSgpIHsNCisJCQlyZXR1cm4gY2xhc3NOYW1lOw0KKwkJfQ0KKw0KKwkJcHVi
bGljIExpc3QgZ2V0QWxpYXNlcygpIHsNCisJCQlyZXR1cm4gYWxpYXNlczsNCisJCX0NCisNCisJ
CXB1YmxpYyBNYXAgZ2V0QXR0cmlidXRlcygpIHsNCisJCQlyZXR1cm4gYXR0cmlidXRlczsNCisJ
CX0NCisJfQ0KK30NCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>97472</attachid>
            <date>2008-04-24 10:52:00 -0400</date>
            <delta_ts>2008-04-24 10:52:43 -0400</delta_ts>
            <desc>Proposed patch</desc>
            <filename>patch_214119.txt</filename>
            <type>text/plain</type>
            <size>8784</size>
            <attacher name="Matt Flaherty">mwflaher</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZXF1aW5veC5z
ZWN1cml0eS51aQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9lcXVpbm94L2ludGVybmFsL3NlY3Vy
aXR5L3VpL3ByZWZlcmVuY2VzL1NlY3VyaXR5Q2F0ZWdvcnlQYWdlLmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNlLmVxdWlub3gvc2VjdXJpdHkv
YnVuZGxlcy9vcmcuZWNsaXBzZS5lcXVpbm94LnNlY3VyaXR5LnVpL3NyYy9vcmcvZWNsaXBzZS9l
cXVpbm94L2ludGVybmFsL3NlY3VyaXR5L3VpL3ByZWZlcmVuY2VzL1NlY3VyaXR5Q2F0ZWdvcnlQ
YWdlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMNCmRpZmYgLXUgLXIxLjMgU2VjdXJp
dHlDYXRlZ29yeVBhZ2UuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9lcXVpbm94L2ludGVybmFs
L3NlY3VyaXR5L3VpL3ByZWZlcmVuY2VzL1NlY3VyaXR5Q2F0ZWdvcnlQYWdlLmphdmEJMjMgQXBy
IDIwMDggMDU6MDk6MDUgLTAwMDAJMS4zDQorKysgc3JjL29yZy9lY2xpcHNlL2VxdWlub3gvaW50
ZXJuYWwvc2VjdXJpdHkvdWkvcHJlZmVyZW5jZXMvU2VjdXJpdHlDYXRlZ29yeVBhZ2UuamF2YQky
NCBBcHIgMjAwOCAxNDo1MToyMiAtMDAwMA0KQEAgLTQwLDkgKzQwLDYgQEANCiAJCVByZWZlcmVu
Y2VMaW5rQXJlYSBwb2xpY3lMaW5rQXJlYSA9IG5ldyBQcmVmZXJlbmNlTGlua0FyZWEocGFnZUFy
ZWEsIFNXVC5OT05FLCAib3JnLmVjbGlwc2UuZXF1aW5veC5zZWN1cml0eS51aS5wb2xpY3kiLCBT
ZWN1cml0eVVJTXNnLkNBVFBBR0VfTEFCRUxfUE9MSUNZLCAoSVdvcmtiZW5jaFByZWZlcmVuY2VD
b250YWluZXIpIGdldENvbnRhaW5lcigpLCBudWxsKTsgLy8kTk9OLU5MUy0xJA0KIAkJcG9saWN5
TGlua0FyZWEuZ2V0Q29udHJvbCgpLnNldExheW91dERhdGEobmV3IEdyaWREYXRhKEdyaWREYXRh
LkZJTExfSE9SSVpPTlRBTCB8IEdyaWREYXRhLkdSQUJfSE9SSVpPTlRBTCkpOw0KIA0KLQkJUHJl
ZmVyZW5jZUxpbmtBcmVhIGFkdmFuY2VkTGlua0FyZWEgPSBuZXcgUHJlZmVyZW5jZUxpbmtBcmVh
KHBhZ2VBcmVhLCBTV1QuTk9ORSwgIm9yZy5lY2xpcHNlLmVxdWlub3guc2VjdXJpdHkudWkuYWR2
YW5jZWQiLCBTZWN1cml0eVVJTXNnLkNBVFBBR0VfTEFCRUxfQURWQU5DRUQsIChJV29ya2JlbmNo
UHJlZmVyZW5jZUNvbnRhaW5lcikgZ2V0Q29udGFpbmVyKCksIG51bGwpOyAvLyROT04tTkxTLTEk
DQotCQlhZHZhbmNlZExpbmtBcmVhLmdldENvbnRyb2woKS5zZXRMYXlvdXREYXRhKG5ldyBHcmlk
RGF0YShHcmlkRGF0YS5GSUxMX0hPUklaT05UQUwgfCBHcmlkRGF0YS5HUkFCX0hPUklaT05UQUwp
KTsNCi0NCiAJCVByZWZlcmVuY2VMaW5rQXJlYSBzdG9yYWdlTGlua0FyZWEgPSBuZXcgUHJlZmVy
ZW5jZUxpbmtBcmVhKHBhZ2VBcmVhLCBTV1QuTk9ORSwgIm9yZy5lY2xpcHNlLmVxdWlub3guc2Vj
dXJpdHkudWkuc3RvcmFnZSIsIFNlY3VyaXR5VUlNc2cuQ0FUUEFHRV9MQUJFTF9TVE9SQUdFLCAo
SVdvcmtiZW5jaFByZWZlcmVuY2VDb250YWluZXIpIGdldENvbnRhaW5lcigpLCBudWxsKTsgLy8k
Tk9OLU5MUy0xJA0KIAkJc3RvcmFnZUxpbmtBcmVhLmdldENvbnRyb2woKS5zZXRMYXlvdXREYXRh
KG5ldyBHcmlkRGF0YShHcmlkRGF0YS5GSUxMX0hPUklaT05UQUwgfCBHcmlkRGF0YS5HUkFCX0hP
UklaT05UQUwpKTsNCiANCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZXF1aW5veC9pbnRlcm5hbC9z
ZWN1cml0eS91aS9TZWN1cml0eUNvbmZpZ3VyYXRpb25TZWN0aW9uLmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiBzcmMvb3JnL2VjbGlwc2UvZXF1aW5veC9pbnRlcm5hbC9zZWN1cml0eS91aS9T
ZWN1cml0eUNvbmZpZ3VyYXRpb25TZWN0aW9uLmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNl
L2VxdWlub3gvaW50ZXJuYWwvc2VjdXJpdHkvdWkvU2VjdXJpdHlDb25maWd1cmF0aW9uU2VjdGlv
bi5qYXZhDQotLS0gL2Rldi9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMv
b3JnL2VjbGlwc2UvZXF1aW5veC9pbnRlcm5hbC9zZWN1cml0eS91aS9TZWN1cml0eUNvbmZpZ3Vy
YXRpb25TZWN0aW9uLmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSwx
NzYgQEANCisvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwMywg
MjAwNyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVk
LiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBh
dmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRt
bA0KKyAqDQorICogQ29udHJpYnV0b3JzOg0KKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0
aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisgKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCitw
YWNrYWdlIG9yZy5lY2xpcHNlLmVxdWlub3guaW50ZXJuYWwuc2VjdXJpdHkudWk7DQorDQoraW1w
b3J0IGphdmEuaW8uUHJpbnRXcml0ZXI7DQoraW1wb3J0IGphdmEuc2VjdXJpdHkuUHJvdmlkZXI7
DQoraW1wb3J0IGphdmEuc2VjdXJpdHkuU2VjdXJpdHk7DQoraW1wb3J0IGphdmEudXRpbC4qOw0K
K2ltcG9ydCBvcmcuZWNsaXBzZS51aS5hYm91dC5JU3lzdGVtU3VtbWFyeVNlY3Rpb247DQorDQor
cHVibGljIGNsYXNzIFNlY3VyaXR5Q29uZmlndXJhdGlvblNlY3Rpb24gaW1wbGVtZW50cyBJU3lz
dGVtU3VtbWFyeVNlY3Rpb24gew0KKw0KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgQUxH
X0FMSUFTID0gIkFsZy5BbGlhcy4iOyAvLyROT04tTkxTLTEkDQorCXByaXZhdGUgc3RhdGljIGZp
bmFsIFN0cmluZyBQUk9WSURFUiA9ICJQcm92aWRlci4iOyAvLyROT04tTkxTLTEkDQorDQorCXB1
YmxpYyB2b2lkIHdyaXRlKFByaW50V3JpdGVyIHdyaXRlcikgew0KKw0KKwkJUHJvdmlkZXJbXSBw
cm92aWRlcnMgPSBTZWN1cml0eS5nZXRQcm92aWRlcnMoKTsNCisJCXdyaXRlci5wcmludGxuKCJJ
bnN0YWxsZWQgcHJvdmlkZXJzICgiICsgcHJvdmlkZXJzLmxlbmd0aCArICIpOiAiKTsvLyROT04t
TkxTLTEkIC8vJE5PTi1OTFMtMiQgDQorCQl3cml0ZXIucHJpbnRsbigpOw0KKw0KKwkJZm9yIChp
bnQgaSA9IDA7IGkgPCBwcm92aWRlcnMubGVuZ3RoOyBpKyspIHsNCisJCQlhcHBlbmRQcm92aWRl
cih3cml0ZXIsIHByb3ZpZGVyc1tpXSwgaSk7DQorCQl9DQorCX0NCisNCisJcHJpdmF0ZSB2b2lk
IGFwcGVuZFByb3ZpZGVyKFByaW50V3JpdGVyIHdyaXRlciwgUHJvdmlkZXIgcHJvdmlkZXIsIGlu
dCBpbmRleCkgew0KKwkJd3JpdGVyLnByaW50bG4oIiBQcm92aWRlcjogIiArIHByb3ZpZGVyLmdl
dE5hbWUoKSArICIsIFZlcnNpb246ICIgKyBwcm92aWRlci5nZXRWZXJzaW9uKCkgKyAiLCBDbGFz
czogIiArIHByb3ZpZGVyLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsgLy8kTk9OLU5MUy0xJCAvLyRO
T04tTkxTLTIkIC8vJE5PTi1OTFMtMyQNCisJCXdyaXRlci5wcmludGxuKCIgIERlc2NyaXB0aW9u
OiAiICsgcHJvdmlkZXIuZ2V0SW5mbygpKTsgLy8kTk9OLU5MUy0xJA0KKwkJUHJvdmlkZXJTZXJ2
aWNlW10gc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhwcm92aWRlcik7DQorCQl3cml0ZXIucHJpbnRs
bigiICBBdmFpbGFibGUgc2VydmljZXMgKCIgKyBzZXJ2aWNlcy5sZW5ndGggKyAiKToiKTsgLy8k
Tk9OLU5MUy0xJCAgLy8kTk9OLU5MUy0yJA0KKwkJZm9yIChpbnQgaSA9IDA7IGkgPCBzZXJ2aWNl
cy5sZW5ndGg7IGkrKykgew0KKwkJCWFwcGVuZFNlcnZpY2Uod3JpdGVyLCBzZXJ2aWNlc1tpXSwg
aSk7DQorCQl9DQorCQl3cml0ZXIucHJpbnRsbigpOw0KKwl9DQorDQorCXByaXZhdGUgdm9pZCBh
cHBlbmRTZXJ2aWNlKFByaW50V3JpdGVyIHdyaXRlciwgUHJvdmlkZXJTZXJ2aWNlIHNlcnZpY2Us
IGludCBpbmRleCkgew0KKwkJd3JpdGVyLnByaW50bG4oIiAgIFNlcnZpY2U6ICIgKyBzZXJ2aWNl
LmdldFR5cGUoKSArICIsIEFsZ29yaXRobTogIiArIHNlcnZpY2UuZ2V0QWxnb3JpdGhtKCkgKyAi
LCBDbGFzczogIiArIHNlcnZpY2UuZ2V0Q2xhc3NOYW1lKCkpOyAvLyROT04tTkxTLTEkIC8vJE5P
Ti1OTFMtMiQgLy8kTk9OLU5MUy0zJA0KKwkJTGlzdCBhbGlhc2VzID0gc2VydmljZS5nZXRBbGlh
c2VzKCk7DQorCQlpZiAobnVsbCAhPSBhbGlhc2VzICYmICgwIDwgYWxpYXNlcy5zaXplKCkpKSB7
DQorCQkJd3JpdGVyLnByaW50KCIgICAgQWxpYXNlczogIik7IC8vJE5PTi1OTFMtMSQNCisJCQlm
b3IgKEl0ZXJhdG9yIGl0ID0gYWxpYXNlcy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7DQor
CQkJCXdyaXRlci5wcmludCgoU3RyaW5nKSBpdC5uZXh0KCkpOw0KKwkJCQlpZiAoaXQuaGFzTmV4
dCgpKSB7DQorCQkJCQl3cml0ZXIucHJpbnQoIiwgIik7IC8vJE5PTi1OTFMtMSQNCisJCQkJfQ0K
KwkJCX0NCisJCQl3cml0ZXIucHJpbnRsbigpOw0KKwkJfQ0KKwkJTWFwIGF0dHJpYnV0ZXMgPSBz
ZXJ2aWNlLmdldEF0dHJpYnV0ZXMoKTsNCisJCWlmICgobnVsbCAhPSBhdHRyaWJ1dGVzKSAmJiAo
MCA8IGF0dHJpYnV0ZXMuc2l6ZSgpKSkgew0KKwkJCXdyaXRlci5wcmludGxuKCIgICAgQXR0cmli
dXRlczoiKTsgLy8kTk9OLU5MUy0xJA0KKwkJCVNldCBrZXlzID0gYXR0cmlidXRlcy5rZXlTZXQo
KTsNCisJCQlmb3IgKEl0ZXJhdG9yIGl0ID0ga2V5cy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7
KSB7DQorCQkJCVN0cmluZyBrZXkgPSAoU3RyaW5nKSBpdC5uZXh0KCk7DQorCQkJCXdyaXRlci5w
cmludCgiICAgICAgIiArIGtleSArICI6ICIpOyAvLyROT04tTkxTLTEkLy8kTk9OLU5MUy0yJA0K
KwkJCQl3cml0ZXIucHJpbnRsbigoU3RyaW5nKSBhdHRyaWJ1dGVzLmdldChrZXkpKTsNCisJCQl9
DQorCQl9DQorCX0NCisNCisJcHJpdmF0ZSBzdGF0aWMgUHJvdmlkZXJTZXJ2aWNlW10gZ2V0U2Vy
dmljZXMoUHJvdmlkZXIgcHJvdmlkZXIpIHsNCisNCisJCVNldCBwcm92aWRlcktleXMgPSBwcm92
aWRlci5rZXlTZXQoKTsNCisJCUhhc2h0YWJsZSBzZXJ2aWNlTGlzdCA9IG5ldyBIYXNodGFibGUo
KTsNCisJCUhhc2h0YWJsZSBhdHRyaWJ1dGVNYXAgPSBuZXcgSGFzaHRhYmxlKCk7IC8vICJ0eXBl
IiA9PiAiSGFzaHRhYmxlIG9mIChhdHRyaWJ1dGUsdmFsdWUpIHBhaXJzIg0KKwkJSGFzaHRhYmxl
IGFsaWFzTWFwID0gbmV3IEhhc2h0YWJsZSgpOyAvLyAidHlwZSIgPT4gIkFycmF5bGlzdCBvZiBh
bGlhc2VzIg0KKwkJZm9yIChJdGVyYXRvciBpdCA9IHByb3ZpZGVyS2V5cy5pdGVyYXRvcigpOyBp
dC5oYXNOZXh0KCk7KSB7DQorCQkJU3RyaW5nIGtleSA9IChTdHJpbmcpIGl0Lm5leHQoKTsNCisN
CisJCQkvLyB0aGlzIGlzIHByb3ZpZGVyIGluZm8sIGF2YWlsYWJsZSBvZmYgdGhlIFByb3ZpZGVy
IEFQSQ0KKwkJCWlmIChrZXkuc3RhcnRzV2l0aChQUk9WSURFUikpIHsNCisJCQkJY29udGludWU7
DQorCQkJfQ0KKw0KKwkJCS8vIHRoaXMgaXMgYW4gYWxpYXMNCisJCQlpZiAoa2V5LnN0YXJ0c1dp
dGgoQUxHX0FMSUFTKSkgew0KKwkJCQlTdHJpbmcgdmFsdWUgPSBrZXkuc3Vic3RyaW5nKGtleS5p
bmRleE9mKEFMR19BTElBUykgKyBBTEdfQUxJQVMubGVuZ3RoKCksIGtleS5sZW5ndGgoKSk7DQor
CQkJCVN0cmluZyB0eXBlID0gKFN0cmluZykgcHJvdmlkZXIuZ2V0KGtleSk7DQorCQkJCVN0cmlu
ZyBhbGdvID0gdmFsdWUuc3Vic3RyaW5nKDAsIHZhbHVlLmluZGV4T2YoJy4nKSk7DQorCQkJCVN0
cmluZyBhbGlhcyA9IHZhbHVlLnN1YnN0cmluZyh2YWx1ZS5pbmRleE9mKCcuJykgKyAxLCB2YWx1
ZS5sZW5ndGgoKSk7DQorCQkJCUFycmF5TGlzdCBhbGlhc0xpc3QgPSAoQXJyYXlMaXN0KSBhbGlh
c01hcC5nZXQodHlwZSArICcuJyArIGFsZ28pOw0KKwkJCQlpZiAoYWxpYXNMaXN0ID09IG51bGwp
IHsNCisJCQkJCWFsaWFzTGlzdCA9IG5ldyBBcnJheUxpc3QoKTsNCisJCQkJCWFsaWFzTGlzdC5h
ZGQoYWxpYXMpOw0KKwkJCQkJYWxpYXNNYXAucHV0KHR5cGUsIGFsaWFzTGlzdCk7DQorCQkJCX0g
ZWxzZSB7DQorCQkJCQlhbGlhc0xpc3QuYWRkKGFsaWFzKTsNCisJCQkJfQ0KKwkJCX0NCisNCisJ
CQkvLyB0aGlzIGlzIGFuIGF0dHJpYnV0ZQ0KKwkJCWVsc2UgaWYgKGtleS5pbmRleE9mKCcgJykg
PiAtMSkgew0KKwkJCQlTdHJpbmcgdHlwZSA9IGtleS5zdWJzdHJpbmcoMCwga2V5LmluZGV4T2Yo
Jy4nKSk7DQorCQkJCVN0cmluZyBhbGdvcml0aG0gPSBrZXkuc3Vic3RyaW5nKGtleS5pbmRleE9m
KCcuJykgKyAxLCBrZXkuaW5kZXhPZignICcpKTsNCisJCQkJU3RyaW5nIGF0dHJpYnV0ZSA9IGtl
eS5zdWJzdHJpbmcoa2V5LmluZGV4T2YoJyAnKSArIDEsIGtleS5sZW5ndGgoKSk7DQorCQkJCVN0
cmluZyB2YWx1ZSA9IChTdHJpbmcpIHByb3ZpZGVyLmdldChrZXkpOw0KKwkJCQlIYXNodGFibGUg
YXR0cmlidXRlVGFibGUgPSAoSGFzaHRhYmxlKSBhdHRyaWJ1dGVNYXAuZ2V0KHR5cGUgKyAnLicg
KyBhbGdvcml0aG0pOw0KKwkJCQlpZiAoYXR0cmlidXRlVGFibGUgPT0gbnVsbCkgew0KKwkJCQkJ
YXR0cmlidXRlVGFibGUgPSBuZXcgSGFzaHRhYmxlKCk7DQorCQkJCQlhdHRyaWJ1dGVUYWJsZS5w
dXQoYXR0cmlidXRlLCB2YWx1ZSk7DQorCQkJCQlhdHRyaWJ1dGVNYXAucHV0KHR5cGUgKyAnLicg
KyBhbGdvcml0aG0sIGF0dHJpYnV0ZVRhYmxlKTsNCisJCQkJfSBlbHNlIHsNCisJCQkJCWF0dHJp
YnV0ZVRhYmxlLnB1dChhdHRyaWJ1dGUsIHZhbHVlKTsNCisJCQkJfQ0KKwkJCX0NCisNCisJCQkv
LyBlbHNlIHRoaXMgaXMgYSBzZXJ2aWNlDQorCQkJZWxzZSB7DQorCQkJCXNlcnZpY2VMaXN0LnB1
dChrZXksIHByb3ZpZGVyLmdldChrZXkpKTsNCisJCQl9DQorCQl9DQorDQorCQlQcm92aWRlclNl
cnZpY2VbXSBzZXJ2aWNlQXJyYXkgPSBuZXcgUHJvdmlkZXJTZXJ2aWNlW3NlcnZpY2VMaXN0LnNp
emUoKV07DQorCQlTZXQgc2VydmljZUtleXMgPSBzZXJ2aWNlTGlzdC5rZXlTZXQoKTsNCisJCWlu
dCBzZXJ2aWNlQ291bnQgPSAwOw0KKwkJZm9yIChJdGVyYXRvciBpdCA9IHNlcnZpY2VLZXlzLml0
ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTspIHsNCisJCQlTdHJpbmcga2V5ID0gKFN0cmluZykgaXQu
bmV4dCgpOw0KKwkJCVN0cmluZyB0eXBlID0ga2V5LnN1YnN0cmluZygwLCBrZXkuaW5kZXhPZign
LicpKTsNCisJCQlTdHJpbmcgYWxnbyA9IGtleS5zdWJzdHJpbmcoa2V5LmluZGV4T2YoJy4nKSAr
IDEsIGtleS5sZW5ndGgoKSk7DQorCQkJU3RyaW5nIGNsYXNzTmFtZSA9IChTdHJpbmcpIHNlcnZp
Y2VMaXN0LmdldChrZXkpOw0KKwkJCUxpc3QgYWxpYXNlcyA9IChMaXN0KSBhbGlhc01hcC5nZXQo
YWxnbyk7DQorCQkJTWFwIGF0dHJpYnV0ZXMgPSAoTWFwKSBhdHRyaWJ1dGVNYXAuZ2V0KGtleSk7
DQorDQorCQkJc2VydmljZUFycmF5W3NlcnZpY2VDb3VudF0gPSBuZXcgUHJvdmlkZXJTZXJ2aWNl
KHR5cGUsIGFsZ28sIGNsYXNzTmFtZSwgYWxpYXNlcywgYXR0cmlidXRlcyk7DQorCQkJc2Vydmlj
ZUNvdW50Kys7DQorCQl9DQorCQlyZXR1cm4gc2VydmljZUFycmF5Ow0KKwl9DQorDQorCXByaXZh
dGUgc3RhdGljIGNsYXNzIFByb3ZpZGVyU2VydmljZSB7DQorDQorCQlwcml2YXRlIGZpbmFsIFN0
cmluZyB0eXBlOw0KKwkJcHJpdmF0ZSBmaW5hbCBTdHJpbmcgYWxnb3JpdGhtOw0KKwkJcHJpdmF0
ZSBmaW5hbCBTdHJpbmcgY2xhc3NOYW1lOw0KKwkJcHJpdmF0ZSBmaW5hbCBMaXN0IGFsaWFzZXM7
DQorCQlwcml2YXRlIGZpbmFsIE1hcCBhdHRyaWJ1dGVzOw0KKw0KKwkJcHVibGljIFByb3ZpZGVy
U2VydmljZShTdHJpbmcgdHlwZSwgU3RyaW5nIGFsZ29yaXRobSwgU3RyaW5nIGNsYXNzTmFtZSwg
TGlzdCBhbGlhc2VzLCBNYXAgYXR0cmlidXRlcykgew0KKwkJCXRoaXMudHlwZSA9IHR5cGU7DQor
CQkJdGhpcy5hbGdvcml0aG0gPSBhbGdvcml0aG07DQorCQkJdGhpcy5jbGFzc05hbWUgPSBjbGFz
c05hbWU7DQorCQkJdGhpcy5hbGlhc2VzID0gYWxpYXNlczsNCisJCQl0aGlzLmF0dHJpYnV0ZXMg
PSBhdHRyaWJ1dGVzOw0KKwkJfQ0KKw0KKwkJcHVibGljIFN0cmluZyBnZXRUeXBlKCkgew0KKwkJ
CXJldHVybiB0eXBlOw0KKwkJfQ0KKw0KKwkJcHVibGljIFN0cmluZyBnZXRBbGdvcml0aG0oKSB7
DQorCQkJcmV0dXJuIGFsZ29yaXRobTsNCisJCX0NCisNCisJCXB1YmxpYyBTdHJpbmcgZ2V0Q2xh
c3NOYW1lKCkgew0KKwkJCXJldHVybiBjbGFzc05hbWU7DQorCQl9DQorDQorCQlwdWJsaWMgTGlz
dCBnZXRBbGlhc2VzKCkgew0KKwkJCXJldHVybiBhbGlhc2VzOw0KKwkJfQ0KKw0KKwkJcHVibGlj
IE1hcCBnZXRBdHRyaWJ1dGVzKCkgew0KKwkJCXJldHVybiBhdHRyaWJ1dGVzOw0KKwkJfQ0KKwl9
DQorfQ0K
</data>

          </attachment>
      

    </bug>

</bugzilla>