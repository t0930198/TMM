<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214682</bug_id>
          
          <creation_ts>2008-01-08 17:08:00 -0500</creation_ts>
          <short_desc>[Browser] download crashes wih xulrunner 1.9</short_desc>
          <delta_ts>2008-01-29 15:20:42 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>Platform</product>
          <component>SWT</component>
          <version>3.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.4 M5</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Grant Gayed">grant_gayed</reporter>
          <assigned_to name="Grant Gayed">grant_gayed</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1127763</commentid>
    <comment_count>0</comment_count>
      <attachid>86432</attachid>
    <who name="Grant Gayed">grant_gayed</who>
    <bug_when>2008-01-08 17:08:40 -0500</bug_when>
    <thetext>Created attachment 86432
patch

This patch contains the fix for this problem and for bug 213194.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1144707</commentid>
    <comment_count>1</comment_count>
    <who name="Grant Gayed">grant_gayed</who>
    <bug_when>2008-01-29 15:20:42 -0500</bug_when>
    <thetext>fix released &gt; 0129
</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>86432</attachid>
            <date>2008-01-08 17:08:00 -0500</date>
            <delta_ts>2008-01-08 17:08:40 -0500</delta_ts>
            <desc>patch</desc>
            <filename>patch</filename>
            <type>text/plain</type>
            <size>30313</size>
            <attacher name="Grant Gayed">grant_gayed</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2Uuc3d0DQpJbmRl
eDogRWNsaXBzZSBTV1QgTW96aWxsYS9jb21tb24vb3JnL2VjbGlwc2Uvc3d0L2Jyb3dzZXIvTW96
aWxsYS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNs
aXBzZS5zd3QvRWNsaXBzZSBTV1QgTW96aWxsYS9jb21tb24vb3JnL2VjbGlwc2Uvc3d0L2Jyb3dz
ZXIvTW96aWxsYS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS43NA0KZGlmZiAtdSAtcjEu
NzQgTW96aWxsYS5qYXZhDQotLS0gRWNsaXBzZSBTV1QgTW96aWxsYS9jb21tb24vb3JnL2VjbGlw
c2Uvc3d0L2Jyb3dzZXIvTW96aWxsYS5qYXZhCTMgSmFuIDIwMDggMTg6MTY6NDIgLTAwMDAJMS43
NA0KKysrIEVjbGlwc2UgU1dUIE1vemlsbGEvY29tbW9uL29yZy9lY2xpcHNlL3N3dC9icm93c2Vy
L01vemlsbGEuamF2YQk4IEphbiAyMDA4IDIyOjA2OjA2IC0wMDAwDQpAQCAtNTIsNyArNTIsNyBA
QA0KIAlzdGF0aWMgQXBwRmlsZUxvY1Byb3ZpZGVyIExvY2F0aW9uUHJvdmlkZXI7DQogCXN0YXRp
YyBXaW5kb3dDcmVhdG9yMiBXaW5kb3dDcmVhdG9yOw0KIAlzdGF0aWMgaW50IEJyb3dzZXJDb3Vu
dDsNCi0Jc3RhdGljIGJvb2xlYW4gSW5pdGlhbGl6ZWQsIElzWFVMUnVubmVyLCBJc18xXzg7DQor
CXN0YXRpYyBib29sZWFuIEluaXRpYWxpemVkLCBJc1ByZV8xXzgsIFBlcmZvcm1lZFZlcnNpb25D
aGVjazsNCiANCiAJLyogWFVMUnVubmVyIGRldGVjdCBjb25zdGFudHMgKi8NCiAJc3RhdGljIGZp
bmFsIFN0cmluZyBHUkVSQU5HRV9MT1dFUiA9ICIxLjguMS4yIjsgLy8kTk9OLU5MUy0xJA0KQEAg
LTI4MSwxMSArMjgxLDExIEBADQogcHVibGljIHZvaWQgY3JlYXRlIChDb21wb3NpdGUgcGFyZW50
LCBpbnQgc3R5bGUpIHsNCiAJZGVsZWdhdGUgPSBuZXcgTW96aWxsYURlbGVnYXRlIChicm93c2Vy
KTsNCiAJRGlzcGxheSBkaXNwbGF5ID0gcGFyZW50LmdldERpc3BsYXkgKCk7DQorCWJvb2xlYW4g
SXNYVUxSdW5uZXIgPSBmYWxzZTsNCiANCiAJaW50IC8qbG9uZyovW10gcmVzdWx0ID0gbmV3IGlu
dCAvKmxvbmcqL1sxXTsNCiAJaWYgKCFJbml0aWFsaXplZCkgew0KIAkJYm9vbGVhbiBpbml0TG9h
ZGVkID0gZmFsc2U7DQotCQlJc1hVTFJ1bm5lciA9IGZhbHNlOw0KIAkJU3RyaW5nIG1vemlsbGFQ
YXRoID0gU3lzdGVtLmdldFByb3BlcnR5IChYVUxSVU5ORVJfUEFUSCk7DQogCQlpZiAobW96aWxs
YVBhdGggPT0gbnVsbCkgew0KIAkJCXRyeSB7DQpAQCAtMTAxMCw2ICsxMDEwLDEzIEBADQogCQl9
DQogCQlkaWFsb2dGYWN0b3J5LlJlbGVhc2UgKCk7DQogDQorCQkvKg0KKwkJKiBUaGlzIERvd25s
b2FkIGZhY3Rvcnkgd2lsbCBiZSB1c2VkIGlmIHRoZSBHUkUgdmVyc2lvbiBpcyA8IDEuOC4NCisJ
CSogSWYgdGhlIEdSRSB2ZXJzaW9uIGlzIDEuOC54IHRoZW4gdGhlIERvd25sb2FkIGZhY3Rvcnkg
dGhhdCBpcyByZWdpc3RlcmVkIGxhdGVyIGZvcg0KKwkJKiAgIGNvbnRyYWN0ICJUcmFuc2ZlciIg
d2lsbCBiZSB1c2VkLg0KKwkJKiBJZiB0aGUgR1JFIHZlcnNpb24gaXMgPj0gMS45IHRoZW4gbm8g
RG93bmxvYWQgZmFjdG9yeSBpcyByZWdpc3RlcmVkIGJlY2F1c2UgdGhpcw0KKwkJKiAgIGZ1bmN0
aW9uYWxpdHkgaXMgcHJvdmlkZWQgYnkgdGhlIEdSRS4NCisJCSovDQogCQlEb3dubG9hZEZhY3Rv
cnkgZG93bmxvYWRGYWN0b3J5ID0gbmV3IERvd25sb2FkRmFjdG9yeSAoKTsNCiAJCWRvd25sb2Fk
RmFjdG9yeS5BZGRSZWYgKCk7DQogCQlhQ29udHJhY3RJRCA9IE1vemlsbGFEZWxlZ2F0ZS53Y3NU
b01iY3MgKG51bGwsIFhQQ09NLk5TX0RPV05MT0FEX0NPTlRSQUNUSUQsIHRydWUpOw0KQEAgLTEw
MjEsMTcgKzEwMjgsNiBAQA0KIAkJfQ0KIAkJZG93bmxvYWRGYWN0b3J5LlJlbGVhc2UgKCk7DQog
DQotCQlEb3dubG9hZEZhY3RvcnlfMV84IGRvd25sb2FkRmFjdG9yeV8xXzggPSBuZXcgRG93bmxv
YWRGYWN0b3J5XzFfOCAoKTsNCi0JCWRvd25sb2FkRmFjdG9yeV8xXzguQWRkUmVmICgpOw0KLQkJ
YUNvbnRyYWN0SUQgPSBNb3ppbGxhRGVsZWdhdGUud2NzVG9NYmNzIChudWxsLCBYUENPTS5OU19U
UkFOU0ZFUl9DT05UUkFDVElELCB0cnVlKTsNCi0JCWFDbGFzc05hbWUgPSBNb3ppbGxhRGVsZWdh
dGUud2NzVG9NYmNzIChudWxsLCAiVHJhbnNmZXIiLCB0cnVlKTsgLy8kTk9OLU5MUy0xJA0KLQkJ
cmMgPSBjb21wb25lbnRSZWdpc3RyYXIuUmVnaXN0ZXJGYWN0b3J5IChYUENPTS5OU19ET1dOTE9B
RF9DSUQsIGFDbGFzc05hbWUsIGFDb250cmFjdElELCBkb3dubG9hZEZhY3RvcnlfMV84LmdldEFk
ZHJlc3MgKCkpOw0KLQkJaWYgKHJjICE9IFhQQ09NLk5TX09LKSB7DQotCQkJYnJvd3Nlci5kaXNw
b3NlICgpOw0KLQkJCWVycm9yIChyYyk7DQotCQl9DQotCQlkb3dubG9hZEZhY3RvcnlfMV84LlJl
bGVhc2UgKCk7DQotDQogCQlGaWxlUGlja2VyRmFjdG9yeSBwaWNrZXJGYWN0b3J5ID0gSXNYVUxS
dW5uZXIgPyBuZXcgRmlsZVBpY2tlckZhY3RvcnlfMV84ICgpIDogbmV3IEZpbGVQaWNrZXJGYWN0
b3J5ICgpOw0KIAkJcGlja2VyRmFjdG9yeS5BZGRSZWYgKCk7DQogCQlhQ29udHJhY3RJRCA9IE1v
emlsbGFEZWxlZ2F0ZS53Y3NUb01iY3MgKG51bGwsIFhQQ09NLk5TX0ZJTEVQSUNLRVJfQ09OVFJB
Q1RJRCwgdHJ1ZSk7DQpAQCAtMTA0Niw3ICsxMDQyLDYgQEANCiAJCWNvbXBvbmVudFJlZ2lzdHJh
ci5SZWxlYXNlICgpOw0KIAkJY29tcG9uZW50TWFuYWdlci5SZWxlYXNlICgpOw0KIA0KLQkJSXNf
MV84ID0gSXNYVUxSdW5uZXI7DQogCQlJbml0aWFsaXplZCA9IHRydWU7DQogCX0NCiANCkBAIC0x
MDczLDcgKzEwNjgsNiBAQA0KIAkJYnJvd3Nlci5kaXNwb3NlICgpOw0KIAkJZXJyb3IgKFhQQ09N
Lk5TX05PSU5URVJGQUNFKTsJDQogCX0NCi0JY29tcG9uZW50TWFuYWdlci5SZWxlYXNlICgpOw0K
IAkNCiAJd2ViQnJvd3NlciA9IG5ldyBuc0lXZWJCcm93c2VyIChyZXN1bHRbMF0pOw0KIAlyZXN1
bHRbMF0gPSAwOw0KQEAgLTExMjQsMjUgKzExMTgsNzQgQEANCiAJfQ0KIAliYXNlV2luZG93LlJl
bGVhc2UgKCk7DQogDQotCWlmICghSXNfMV84KSB7DQorCWlmICghUGVyZm9ybWVkVmVyc2lvbkNo
ZWNrKSB7DQorCQlQZXJmb3JtZWRWZXJzaW9uQ2hlY2sgPSB0cnVlOw0KKw0KIAkJLyoNCi0JCSog
Q2hlY2sgZm9yIHRoZSBhdmFpbGFiaWxpdHkgb2YgdGhlIDEuOCBpbXBsZW1lbnRhdGlvbiBvZiBu
c0lEb2NTaGVsbCB0byBkZXRlcm1pbmUNCi0JCSogaWYgdGhlIEdSRSdzIHZlcnNpb24gaXMgPj0g
MS44LiANCisJCSogQ2hlY2sgZm9yIHRoZSBhdmFpbGFiaWxpdHkgb2YgdGhlIHByZS0xLjggaW1w
bGVtZW50YXRpb24gb2YgbnNJRG9jU2hlbGwNCisJCSogdG8gZGV0ZXJtaW5lIGlmIHRoZSBHUkUn
cyB2ZXJzaW9uIGlzIDwgMS44Lg0KIAkJKi8NCiAJCXJjID0gd2ViQnJvd3Nlci5RdWVyeUludGVy
ZmFjZSAobnNJSW50ZXJmYWNlUmVxdWVzdG9yLk5TX0lJTlRFUkZBQ0VSRVFVRVNUT1JfSUlELCBy
ZXN1bHQpOw0KLQkJaWYgKHJjICE9IFhQQ09NLk5TX09LKSBlcnJvciAocmMpOw0KLQkJaWYgKHJl
c3VsdFswXSA9PSAwKSBlcnJvciAoWFBDT00uTlNfRVJST1JfTk9fSU5URVJGQUNFKTsNCisJCWlm
IChyYyAhPSBYUENPTS5OU19PSykgew0KKwkJCWJyb3dzZXIuZGlzcG9zZSAoKTsNCisJCQllcnJv
ciAoWFBDT00uTlNfRVJST1JfRkFJTFVSRSk7DQorCQl9DQorCQlpZiAocmVzdWx0WzBdID09IDAp
IHsNCisJCQlicm93c2VyLmRpc3Bvc2UgKCk7DQorCQkJZXJyb3IgKFhQQ09NLk5TX0VSUk9SX05P
X0lOVEVSRkFDRSk7DQorCQl9DQogCQluc0lJbnRlcmZhY2VSZXF1ZXN0b3IgaW50ZXJmYWNlUmVx
dWVzdG9yID0gbmV3IG5zSUludGVyZmFjZVJlcXVlc3RvciAocmVzdWx0WzBdKTsNCiAJCXJlc3Vs
dFswXSA9IDA7DQogDQotCQlyYyA9IGludGVyZmFjZVJlcXVlc3Rvci5HZXRJbnRlcmZhY2UgKG5z
SURvY1NoZWxsXzFfOC5OU19JRE9DU0hFTExfSUlELCByZXN1bHQpOw0KKwkJcmMgPSBpbnRlcmZh
Y2VSZXF1ZXN0b3IuR2V0SW50ZXJmYWNlIChuc0lEb2NTaGVsbC5OU19JRE9DU0hFTExfSUlELCBy
ZXN1bHQpOw0KIAkJaWYgKHJjID09IFhQQ09NLk5TX09LICYmIHJlc3VsdFswXSAhPSAwKSB7DQot
CQkJSXNfMV84ID0gdHJ1ZTsNCisJCQlJc1ByZV8xXzggPSB0cnVlOw0KIAkJCW5ldyBuc0lTdXBw
b3J0cyAocmVzdWx0WzBdKS5SZWxlYXNlICgpOw0KIAkJfQ0KIAkJcmVzdWx0WzBdID0gMDsNCisN
CisJCS8qDQorCQkqIEEgRG93bmxvYWQgZmFjdG9yeSBmb3IgY29udHJhY3QgIlRyYW5zZmVyIiBt
dXN0IGJlIHJlZ2lzdGVyZWQgaWZmIHRoZSBHUkUncyB2ZXJzaW9uIGlzIDEuOC54Lg0KKwkJKiAg
IENoZWNrIGZvciB0aGUgYXZhaWxhYmlsaXR5IG9mIHRoZSAxLjggaW1wbGVtZW50YXRpb24gb2Yg
bnNJRG9jU2hlbGwgdG8gZGV0ZXJtaW5lIGlmIHRoZQ0KKwkJKiAgIEdSRSdzIHZlcnNpb24gaXMg
MS44LnguDQorCQkqIElmIHRoZSBHUkUgdmVyc2lvbiBpcyA8IDEuOCB0aGVuIHRoZSBwcmV2aW91
c2x5LXJlZ2lzdGVyZWQgRG93bmxvYWQgZmFjdG9yeSBmb3IgY29udHJhY3QNCisJCSogICAiRG93
bmxvYWQiIHdpbGwgYmUgdXNlZC4NCisJCSogSWYgdGhlIEdSRSB2ZXJzaW9uIGlzID49IDEuOSB0
aGVuIG5vIERvd25sb2FkIGZhY3RvcnkgaXMgcmVnaXN0ZXJlZCBiZWNhdXNlIHRoaXMNCisJCSog
ICBmdW5jdGlvbmFsaXR5IGlzIHByb3ZpZGVkIGJ5IHRoZSBHUkUuDQorCQkqLw0KKwkJaWYgKCFJ
c1ByZV8xXzgpIHsNCisJCQlyYyA9IGludGVyZmFjZVJlcXVlc3Rvci5HZXRJbnRlcmZhY2UgKG5z
SURvY1NoZWxsXzFfOC5OU19JRE9DU0hFTExfSUlELCByZXN1bHQpOw0KKwkJCWlmIChyYyA9PSBY
UENPTS5OU19PSyAmJiByZXN1bHRbMF0gIT0gMCkgeyAvKiAxLjggKi8NCisJCQkJbmV3IG5zSVN1
cHBvcnRzIChyZXN1bHRbMF0pLlJlbGVhc2UgKCk7DQorCQkJCXJlc3VsdFswXSA9IDA7DQorCQkJ
CXJjID0gY29tcG9uZW50TWFuYWdlci5RdWVyeUludGVyZmFjZSAobnNJQ29tcG9uZW50UmVnaXN0
cmFyLk5TX0lDT01QT05FTlRSRUdJU1RSQVJfSUlELCByZXN1bHQpOw0KKwkJCQlpZiAocmMgIT0g
WFBDT00uTlNfT0spIHsNCisJCQkJCWJyb3dzZXIuZGlzcG9zZSAoKTsNCisJCQkJCWVycm9yIChy
Yyk7DQorCQkJCX0NCisJCQkJaWYgKHJlc3VsdFswXSA9PSAwKSB7DQorCQkJCQlicm93c2VyLmRp
c3Bvc2UgKCk7DQorCQkJCQllcnJvciAoWFBDT00uTlNfTk9JTlRFUkZBQ0UpOw0KKwkJCQl9DQor
DQorCQkJCW5zSUNvbXBvbmVudFJlZ2lzdHJhciBjb21wb25lbnRSZWdpc3RyYXIgPSBuZXcgbnNJ
Q29tcG9uZW50UmVnaXN0cmFyIChyZXN1bHRbMF0pOw0KKwkJCQlEb3dubG9hZEZhY3RvcnlfMV84
IGRvd25sb2FkRmFjdG9yeV8xXzggPSBuZXcgRG93bmxvYWRGYWN0b3J5XzFfOCAoKTsNCisJCQkJ
ZG93bmxvYWRGYWN0b3J5XzFfOC5BZGRSZWYgKCk7DQorCQkJCWJ5dGVbXSBhQ29udHJhY3RJRCA9
IE1vemlsbGFEZWxlZ2F0ZS53Y3NUb01iY3MgKG51bGwsIFhQQ09NLk5TX1RSQU5TRkVSX0NPTlRS
QUNUSUQsIHRydWUpOw0KKwkJCQlieXRlW10gYUNsYXNzTmFtZSA9IE1vemlsbGFEZWxlZ2F0ZS53
Y3NUb01iY3MgKG51bGwsICJUcmFuc2ZlciIsIHRydWUpOyAvLyROT04tTkxTLTEkDQorCQkJCXJj
ID0gY29tcG9uZW50UmVnaXN0cmFyLlJlZ2lzdGVyRmFjdG9yeSAoWFBDT00uTlNfRE9XTkxPQURf
Q0lELCBhQ2xhc3NOYW1lLCBhQ29udHJhY3RJRCwgZG93bmxvYWRGYWN0b3J5XzFfOC5nZXRBZGRy
ZXNzICgpKTsNCisJCQkJaWYgKHJjICE9IFhQQ09NLk5TX09LKSB7DQorCQkJCQlicm93c2VyLmRp
c3Bvc2UgKCk7DQorCQkJCQllcnJvciAocmMpOw0KKwkJCQl9DQorCQkJCWRvd25sb2FkRmFjdG9y
eV8xXzguUmVsZWFzZSAoKTsNCisJCQkJY29tcG9uZW50UmVnaXN0cmFyLlJlbGVhc2UgKCk7DQor
CQkJfQ0KKwkJfQ0KKwkJcmVzdWx0WzBdID0gMDsNCiAJCWludGVyZmFjZVJlcXVlc3Rvci5SZWxl
YXNlICgpOw0KIAl9DQorCWNvbXBvbmVudE1hbmFnZXIuUmVsZWFzZSAoKTsNCiANCiAJcmMgPSB3
ZWJCcm93c2VyLkFkZFdlYkJyb3dzZXJMaXN0ZW5lciAod2Vha1JlZmVyZW5jZS5nZXRBZGRyZXNz
ICgpLCBuc0lXZWJQcm9ncmVzc0xpc3RlbmVyLk5TX0lXRUJQUk9HUkVTU0xJU1RFTkVSX0lJRCk7
DQogCWlmIChyYyAhPSBYUENPTS5OU19PSykgew0KQEAgLTE3NjksMjAgKzE4MTIsMjkgQEANCiAJ
SW5wdXRTdHJlYW0gaW5wdXRTdHJlYW0gPSBuZXcgSW5wdXRTdHJlYW0gKGRhdGEpOw0KIAlpbnB1
dFN0cmVhbS5BZGRSZWYgKCk7DQogDQotCWlmIChJc18xXzgpIHsNCi0JCXJjID0gaW50ZXJmYWNl
UmVxdWVzdG9yLkdldEludGVyZmFjZSAobnNJRG9jU2hlbGxfMV84Lk5TX0lET0NTSEVMTF9JSUQs
IHJlc3VsdCk7DQotCQlpZiAocmMgIT0gWFBDT00uTlNfT0spIGVycm9yIChyYyk7DQorCXJjID0g
aW50ZXJmYWNlUmVxdWVzdG9yLkdldEludGVyZmFjZSAobnNJRG9jU2hlbGxfMV85Lk5TX0lET0NT
SEVMTF9JSUQsIHJlc3VsdCk7DQorCWlmIChyYyA9PSBYUENPTS5OU19PSykgew0KIAkJaWYgKHJl
c3VsdFswXSA9PSAwKSBlcnJvciAoWFBDT00uTlNfRVJST1JfTk9fSU5URVJGQUNFKTsNCi0JCW5z
SURvY1NoZWxsXzFfOCBkb2NTaGVsbCA9IG5ldyBuc0lEb2NTaGVsbF8xXzggKHJlc3VsdFswXSk7
DQorCQluc0lEb2NTaGVsbF8xXzkgZG9jU2hlbGwgPSBuZXcgbnNJRG9jU2hlbGxfMV85IChyZXN1
bHRbMF0pOw0KIAkJcmMgPSBkb2NTaGVsbC5Mb2FkU3RyZWFtIChpbnB1dFN0cmVhbS5nZXRBZGRy
ZXNzICgpLCB1cmkuZ2V0QWRkcmVzcyAoKSwgYUNvbnRlbnRUeXBlLCAgYUNvbnRlbnRDaGFyc2V0
LCAwKTsNCiAJCWRvY1NoZWxsLlJlbGVhc2UgKCk7DQogCX0gZWxzZSB7DQotCQlyYyA9IGludGVy
ZmFjZVJlcXVlc3Rvci5HZXRJbnRlcmZhY2UgKG5zSURvY1NoZWxsLk5TX0lET0NTSEVMTF9JSUQs
IHJlc3VsdCk7DQotCQlpZiAocmMgIT0gWFBDT00uTlNfT0spIGVycm9yIChyYyk7DQotCQlpZiAo
cmVzdWx0WzBdID09IDApIGVycm9yIChYUENPTS5OU19FUlJPUl9OT19JTlRFUkZBQ0UpOw0KLQkJ
bnNJRG9jU2hlbGwgZG9jU2hlbGwgPSBuZXcgbnNJRG9jU2hlbGwgKHJlc3VsdFswXSk7DQotCQly
YyA9IGRvY1NoZWxsLkxvYWRTdHJlYW0gKGlucHV0U3RyZWFtLmdldEFkZHJlc3MgKCksIHVyaS5n
ZXRBZGRyZXNzICgpLCBhQ29udGVudFR5cGUsICBhQ29udGVudENoYXJzZXQsIDApOw0KLQkJZG9j
U2hlbGwuUmVsZWFzZSAoKTsNCisJCXJlc3VsdFswXSA9IDA7DQorCQlyYyA9IGludGVyZmFjZVJl
cXVlc3Rvci5HZXRJbnRlcmZhY2UgKG5zSURvY1NoZWxsXzFfOC5OU19JRE9DU0hFTExfSUlELCBy
ZXN1bHQpOw0KKwkJaWYgKHJjID09IFhQQ09NLk5TX09LKSB7CQ0KKwkJCWlmIChyZXN1bHRbMF0g
PT0gMCkgZXJyb3IgKFhQQ09NLk5TX0VSUk9SX05PX0lOVEVSRkFDRSk7DQorCQkJbnNJRG9jU2hl
bGxfMV84IGRvY1NoZWxsID0gbmV3IG5zSURvY1NoZWxsXzFfOCAocmVzdWx0WzBdKTsNCisJCQly
YyA9IGRvY1NoZWxsLkxvYWRTdHJlYW0gKGlucHV0U3RyZWFtLmdldEFkZHJlc3MgKCksIHVyaS5n
ZXRBZGRyZXNzICgpLCBhQ29udGVudFR5cGUsICBhQ29udGVudENoYXJzZXQsIDApOw0KKwkJCWRv
Y1NoZWxsLlJlbGVhc2UgKCk7DQorCQl9IGVsc2Ugew0KKwkJCXJlc3VsdFswXSA9IDA7DQorCQkJ
cmMgPSBpbnRlcmZhY2VSZXF1ZXN0b3IuR2V0SW50ZXJmYWNlIChuc0lEb2NTaGVsbC5OU19JRE9D
U0hFTExfSUlELCByZXN1bHQpOw0KKwkJCWlmIChyYyAhPSBYUENPTS5OU19PSykgZXJyb3IgKHJj
KTsNCisJCQlpZiAocmVzdWx0WzBdID09IDApIGVycm9yIChYUENPTS5OU19FUlJPUl9OT19JTlRF
UkZBQ0UpOw0KKwkJCW5zSURvY1NoZWxsIGRvY1NoZWxsID0gbmV3IG5zSURvY1NoZWxsIChyZXN1
bHRbMF0pOw0KKwkJCXJjID0gZG9jU2hlbGwuTG9hZFN0cmVhbSAoaW5wdXRTdHJlYW0uZ2V0QWRk
cmVzcyAoKSwgdXJpLmdldEFkZHJlc3MgKCksIGFDb250ZW50VHlwZSwgIGFDb250ZW50Q2hhcnNl
dCwgMCk7DQorCQkJZG9jU2hlbGwuUmVsZWFzZSAoKTsNCisJCX0NCiAJfQ0KIAlpZiAocmMgIT0g
WFBDT00uTlNfT0spIGVycm9yIChyYyk7DQogCXJlc3VsdFswXSA9IDA7DQpAQCAtMjMwNCw3ICsy
MzU2LDcgQEANCiAJICogdG8gYWJvdXQ6YmxhbmsgYW5kIGZpcmVzIHRoZSBjb3JyZXNwb25kaW5n
IG5hdmlnYXRpb24gZXZlbnRzLiAgRG8gbm90IHNlbmQNCiAJICogdGhpcyBldmVudCBvbiB0byB0
aGUgdXNlciBzaW5jZSBpdCBpcyBub3QgZXhwZWN0ZWQuDQogCSAqLw0KLQlpZiAoSXNfMV84ICYm
IGFSZXF1ZXN0ID09IDAgJiYgdXJsLnN0YXJ0c1dpdGggKEFCT1VUX0JMQU5LKSkgcmV0dXJuIFhQ
Q09NLk5TX09LOw0KKwlpZiAoIUlzUHJlXzFfOCAmJiBhUmVxdWVzdCA9PSAwICYmIHVybC5zdGFy
dHNXaXRoIChBQk9VVF9CTEFOSykpIHJldHVybiBYUENPTS5OU19PSzsNCiANCiAJTG9jYXRpb25F
dmVudCBldmVudCA9IG5ldyBMb2NhdGlvbkV2ZW50IChicm93c2VyKTsNCiAJZXZlbnQuZGlzcGxh
eSA9IGJyb3dzZXIuZ2V0RGlzcGxheSAoKTsNCkluZGV4OiBFY2xpcHNlIFNXVCBNb3ppbGxhL2Nv
bW1vbi9vcmcvZWNsaXBzZS9zd3QvYnJvd3Nlci9IZWxwZXJBcHBMYXVuY2hlckRpYWxvZy5qYXZh
DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5zd3Qv
RWNsaXBzZSBTV1QgTW96aWxsYS9jb21tb24vb3JnL2VjbGlwc2Uvc3d0L2Jyb3dzZXIvSGVscGVy
QXBwTGF1bmNoZXJEaWFsb2cuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNQ0KZGlmZiAt
dSAtcjEuNSBIZWxwZXJBcHBMYXVuY2hlckRpYWxvZy5qYXZhDQotLS0gRWNsaXBzZSBTV1QgTW96
aWxsYS9jb21tb24vb3JnL2VjbGlwc2Uvc3d0L2Jyb3dzZXIvSGVscGVyQXBwTGF1bmNoZXJEaWFs
b2cuamF2YQkxIEF1ZyAyMDA3IDE5OjU3OjI0IC0wMDAwCTEuNQ0KKysrIEVjbGlwc2UgU1dUIE1v
emlsbGEvY29tbW9uL29yZy9lY2xpcHNlL3N3dC9icm93c2VyL0hlbHBlckFwcExhdW5jaGVyRGlh
bG9nLmphdmEJOCBKYW4gMjAwOCAyMjowNjowNSAtMDAwMA0KQEAgLTk4LDE5ICs5OCwyOCBAQA0K
IA0KIGludCBTaG93IChpbnQgLypsb25nKi8gYUxhdW5jaGVyLCBpbnQgLypsb25nKi8gYUNvbnRl
eHQsIGludCBhUmVhc29uKSB7DQogCS8qDQotCSAqIFRoZSBpbnRlcmZhY2UgZm9yIG5zSUhlbHBl
ckFwcExhdW5jaGVyIGNoYW5nZWQgYXMgb2YgbW96aWxsYSAxLjguICBRdWVyeSB0aGUgcmVjZWl2
ZWQNCi0JICogbnNJSGVscGVyQXBwTGF1bmNoZXIgZm9yIHRoZSBuZXcgaW50ZXJmYWNlLCBhbmQg
aWYgaXQgaXMgbm90IGZvdW5kIHRoZW4gZmFsbCBiYWNrIHRvDQotCSAqIHRoZSBvbGQgaW50ZXJm
YWNlLiANCi0JICovDQorCSogVGhlIGludGVyZmFjZSBmb3IgbnNJSGVscGVyQXBwTGF1bmNoZXIg
Y2hhbmdlZCBpbiBHUkUgdmVyc2lvbnMgMS44IGFuZCAxLjkuICBRdWVyeSBmb3INCisJKiBlYWNo
IG9mIHRoZXNlIGludGVyZmFjZXMgaW4gdHVybiB1bnRpbCBvbmUgaXMgZm91bmQuDQorCSovDQog
CW5zSVN1cHBvcnRzIHN1cHBvcnRzID0gbmV3IG5zSVN1cHBvcnRzIChhTGF1bmNoZXIpOw0KIAlp
bnQgLypsb25nKi9bXSByZXN1bHQgPSBuZXcgaW50IC8qbG9uZyovWzFdOw0KLQlpbnQgcmMgPSBz
dXBwb3J0cy5RdWVyeUludGVyZmFjZSAobnNJSGVscGVyQXBwTGF1bmNoZXJfMV84Lk5TX0lIRUxQ
RVJBUFBMQVVOQ0hFUl9JSUQsIHJlc3VsdCk7DQotCWlmIChyYyA9PSAwKSB7CS8qID49IDEuOCAq
Lw0KKwlpbnQgcmMgPSBzdXBwb3J0cy5RdWVyeUludGVyZmFjZSAobnNJSGVscGVyQXBwTGF1bmNo
ZXJfMV85Lk5TX0lIRUxQRVJBUFBMQVVOQ0hFUl9JSUQsIHJlc3VsdCk7DQorCWlmIChyYyA9PSAw
KSB7DQorCQluc0lIZWxwZXJBcHBMYXVuY2hlcl8xXzkgaGVscGVyQXBwTGF1bmNoZXIgPSBuZXcg
bnNJSGVscGVyQXBwTGF1bmNoZXJfMV85IChhTGF1bmNoZXIpOw0KKwkJcmMgPSBoZWxwZXJBcHBM
YXVuY2hlci5TYXZlVG9EaXNrICgwLCBmYWxzZSk7DQorCQloZWxwZXJBcHBMYXVuY2hlci5SZWxl
YXNlICgpOw0KKwkJcmV0dXJuIHJjOw0KKwl9DQorDQorCXJlc3VsdFswXSA9IDA7DQorCXJjID0g
c3VwcG9ydHMuUXVlcnlJbnRlcmZhY2UgKG5zSUhlbHBlckFwcExhdW5jaGVyXzFfOC5OU19JSEVM
UEVSQVBQTEFVTkNIRVJfSUlELCByZXN1bHQpOw0KKwlpZiAocmMgPT0gMCkgew0KIAkJbnNJSGVs
cGVyQXBwTGF1bmNoZXJfMV84IGhlbHBlckFwcExhdW5jaGVyID0gbmV3IG5zSUhlbHBlckFwcExh
dW5jaGVyXzFfOCAoYUxhdW5jaGVyKTsNCiAJCXJjID0gaGVscGVyQXBwTGF1bmNoZXIuU2F2ZVRv
RGlzayAoMCwgZmFsc2UpOw0KIAkJaGVscGVyQXBwTGF1bmNoZXIuUmVsZWFzZSAoKTsNCiAJCXJl
dHVybiByYzsNCiAJfQ0KKw0KIAluc0lIZWxwZXJBcHBMYXVuY2hlciBoZWxwZXJBcHBMYXVuY2hl
ciA9IG5ldyBuc0lIZWxwZXJBcHBMYXVuY2hlciAoYUxhdW5jaGVyKTsJLyogPCAxLjggKi8NCiAJ
cmV0dXJuIGhlbHBlckFwcExhdW5jaGVyLlNhdmVUb0Rpc2sgKDAsIGZhbHNlKTsNCiB9DQpAQCAt
MTM1LDE4ICsxNDQsMjUgQEANCiAJbnNJU3VwcG9ydHMgc3VwcG9ydCA9IG5ldyBuc0lTdXBwb3J0
cyAoYXJnMCk7DQogCWludCAvKmxvbmcqL1tdIHJlc3VsdCA9IG5ldyBpbnQgLypsb25nKi9bMV07
DQogCWludCByYyA9IHN1cHBvcnQuUXVlcnlJbnRlcmZhY2UgKG5zSUhlbHBlckFwcExhdW5jaGVy
XzFfOC5OU19JSEVMUEVSQVBQTEFVTkNIRVJfSUlELCByZXN1bHQpOw0KLQlib29sZWFuIHVzaW5n
TW96aWxsYTE4ID0gcmMgPT0gMDsNCi0JaWYgKHVzaW5nTW96aWxsYTE4KSB7DQorCWJvb2xlYW4g
dXNpbmdfMV84ID0gZmFsc2UsIHVzaW5nXzFfOSA9IGZhbHNlOw0KKwlpZiAocmMgPT0gMCkgew0K
KwkJdXNpbmdfMV84ID0gdHJ1ZTsNCiAJCWhhc0xhdW5jaGVyID0gdHJ1ZTsNCi0JCW5zSVN1cHBv
cnRzIHN1cHBvcnRzID0gbmV3IG5zSVN1cHBvcnRzIChyZXN1bHRbMF0pOw0KLQkJc3VwcG9ydHMu
UmVsZWFzZSAoKTsNCisJCW5ldyBuc0lTdXBwb3J0cyAocmVzdWx0WzBdKS5SZWxlYXNlICgpOw0K
IAl9IGVsc2Ugew0KIAkJcmVzdWx0WzBdID0gMDsNCi0JCXJjID0gc3VwcG9ydC5RdWVyeUludGVy
ZmFjZSAobnNJSGVscGVyQXBwTGF1bmNoZXIuTlNfSUhFTFBFUkFQUExBVU5DSEVSX0lJRCwgcmVz
dWx0KTsNCisJCXJjID0gc3VwcG9ydC5RdWVyeUludGVyZmFjZSAobnNJSGVscGVyQXBwTGF1bmNo
ZXJfMV85Lk5TX0lIRUxQRVJBUFBMQVVOQ0hFUl9JSUQsIHJlc3VsdCk7DQogCQlpZiAocmMgPT0g
MCkgew0KKwkJCXVzaW5nXzFfOSA9IHRydWU7DQogCQkJaGFzTGF1bmNoZXIgPSB0cnVlOw0KLQkJ
CW5zSVN1cHBvcnRzIHN1cHBvcnRzID0gbmV3IG5zSVN1cHBvcnRzIChyZXN1bHRbMF0pOw0KLQkJ
CXN1cHBvcnRzLlJlbGVhc2UgKCk7DQorCQkJbmV3IG5zSVN1cHBvcnRzIChyZXN1bHRbMF0pLlJl
bGVhc2UgKCk7DQorCQl9IGVsc2Ugew0KKwkJCXJlc3VsdFswXSA9IDA7DQorCQkJcmMgPSBzdXBw
b3J0LlF1ZXJ5SW50ZXJmYWNlIChuc0lIZWxwZXJBcHBMYXVuY2hlci5OU19JSEVMUEVSQVBQTEFV
TkNIRVJfSUlELCByZXN1bHQpOw0KKwkJCWlmIChyYyA9PSAwKSB7DQorCQkJCWhhc0xhdW5jaGVy
ID0gdHJ1ZTsNCisJCQkJbmV3IG5zSVN1cHBvcnRzIChyZXN1bHRbMF0pLlJlbGVhc2UgKCk7DQor
CQkJfQ0KIAkJfQ0KIAl9DQogCXJlc3VsdFswXSA9IDA7DQpAQCAtMTc5LDkgKzE5NSwxMiBAQA0K
IAlzaGVsbC5jbG9zZSAoKTsNCiAJaWYgKG5hbWUgPT0gbnVsbCkgew0KIAkJaWYgKGhhc0xhdW5j
aGVyKSB7DQotCQkJaWYgKHVzaW5nTW96aWxsYTE4KSB7DQorCQkJaWYgKHVzaW5nXzFfOCkgew0K
IAkJCQluc0lIZWxwZXJBcHBMYXVuY2hlcl8xXzggbGF1bmNoZXIgPSBuZXcgbnNJSGVscGVyQXBw
TGF1bmNoZXJfMV84IChhcmcwKTsNCiAJCQkJcmMgPSBsYXVuY2hlci5DYW5jZWwgKFhQQ09NLk5T
X0JJTkRJTkdfQUJPUlRFRCk7DQorCQkJfSBlbHNlIGlmICh1c2luZ18xXzkpIHsNCisJCQkJbnNJ
SGVscGVyQXBwTGF1bmNoZXJfMV85IGxhdW5jaGVyID0gbmV3IG5zSUhlbHBlckFwcExhdW5jaGVy
XzFfOSAoYXJnMCk7DQorCQkJCXJjID0gbGF1bmNoZXIuQ2FuY2VsIChYUENPTS5OU19CSU5ESU5H
X0FCT1JURUQpOw0KIAkJCX0gZWxzZSB7DQogCQkJCW5zSUhlbHBlckFwcExhdW5jaGVyIGxhdW5j
aGVyID0gbmV3IG5zSUhlbHBlckFwcExhdW5jaGVyIChhcmcwKTsNCiAJCQkJcmMgPSBsYXVuY2hl
ci5DYW5jZWwgKCk7DQpJbmRleDogRWNsaXBzZSBTV1QgTW96aWxsYS9jb21tb24vb3JnL2VjbGlw
c2Uvc3d0L2ludGVybmFsL21vemlsbGEvbnNJRG9jU2hlbGxfMV85LmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiBFY2xpcHNlIFNXVCBNb3ppbGxhL2NvbW1vbi9vcmcvZWNsaXBzZS9zd3QvaW50
ZXJuYWwvbW96aWxsYS9uc0lEb2NTaGVsbF8xXzkuamF2YQ0KZGlmZiAtTiBFY2xpcHNlIFNXVCBN
b3ppbGxhL2NvbW1vbi9vcmcvZWNsaXBzZS9zd3QvaW50ZXJuYWwvbW96aWxsYS9uc0lEb2NTaGVs
bF8xXzkuamF2YQ0KLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysg
RWNsaXBzZSBTV1QgTW96aWxsYS9jb21tb24vb3JnL2VjbGlwc2Uvc3d0L2ludGVybmFsL21vemls
bGEvbnNJRG9jU2hlbGxfMV85LmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAs
MCArMSwzNDUgQEANCisvKiAqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqDQorICogVmVy
c2lvbjogTVBMIDEuMQ0KKyAqDQorICogVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3Vi
amVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSBWZXJzaW9uDQorICogMS4xICh0aGUg
IkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5j
ZSB3aXRoDQorICogdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGlj
ZW5zZSBhdA0KKyAqIGh0dHA6Ly93d3cubW96aWxsYS5vcmcvTVBMLw0KKyAqDQorICogU29mdHdh
cmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFT
IElTIiBiYXNpcywNCisgKiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhw
cmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UNCisgKiBmb3IgdGhlIHNwZWNpZmljIGxh
bmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZQ0KKyAqIExp
Y2Vuc2UuDQorICoNCisgKiBUaGUgT3JpZ2luYWwgQ29kZSBpcyBNb3ppbGxhIENvbW11bmljYXRv
ciBjbGllbnQgY29kZSwgcmVsZWFzZWQgTWFyY2ggMzEsIDE5OTguDQorICoNCisgKiBUaGUgSW5p
dGlhbCBEZXZlbG9wZXIgb2YgdGhlIE9yaWdpbmFsIENvZGUgaXMNCisgKiBOZXRzY2FwZSBDb21t
dW5pY2F0aW9ucyBDb3Jwb3JhdGlvbi4NCisgKiBQb3J0aW9ucyBjcmVhdGVkIGJ5IE5ldHNjYXBl
IGFyZSBDb3B5cmlnaHQgKEMpIDE5OTgtMTk5OQ0KKyAqIE5ldHNjYXBlIENvbW11bmljYXRpb25z
IENvcnBvcmF0aW9uLiAgQWxsIFJpZ2h0cyBSZXNlcnZlZC4NCisgKg0KKyAqIENvbnRyaWJ1dG9y
KHMpOg0KKyAqDQorICogSUJNDQorICogLSAgQmluZGluZyB0byBwZXJtaXQgaW50ZXJmYWNpbmcg
YmV0d2VlbiBNb3ppbGxhIGFuZCBTV1QNCisgKiAtICBDb3B5cmlnaHQgKEMpIDIwMDggSUJNIENv
cnAuICBBbGwgUmlnaHRzIFJlc2VydmVkLg0KKyAqDQorICogKioqKiogRU5EIExJQ0VOU0UgQkxP
Q0sgKioqKiogKi8NCitwYWNrYWdlIG9yZy5lY2xpcHNlLnN3dC5pbnRlcm5hbC5tb3ppbGxhOw0K
Kw0KK3B1YmxpYyBjbGFzcyBuc0lEb2NTaGVsbF8xXzkgZXh0ZW5kcyBuc0lTdXBwb3J0cyB7DQor
DQorCXN0YXRpYyBmaW5hbCBpbnQgTEFTVF9NRVRIT0RfSUQgPSBuc0lTdXBwb3J0cy5MQVNUX01F
VEhPRF9JRCArIDY3Ow0KKw0KKwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBOU19JRE9DU0hF
TExfSUlEX1NUUiA9DQorCQkiNGIwMDIyMmEtOGQwYS00NmQ3LWExZmUtNDNiZDg5ZDE5MzI0IjsN
CisNCisJcHVibGljIHN0YXRpYyBmaW5hbCBuc0lEIE5TX0lET0NTSEVMTF9JSUQgPQ0KKwkJbmV3
IG5zSUQoTlNfSURPQ1NIRUxMX0lJRF9TVFIpOw0KKw0KKwlwdWJsaWMgbnNJRG9jU2hlbGxfMV85
KGludCAvKmxvbmcqLyBhZGRyZXNzKSB7DQorCQlzdXBlcihhZGRyZXNzKTsNCisJfQ0KKw0KKwlw
dWJsaWMgaW50IExvYWRVUkkoaW50IC8qbG9uZyovIHVyaSwgaW50IC8qbG9uZyovIGxvYWRJbmZv
LCBpbnQgYUxvYWRGbGFncywgYm9vbGVhbiBmaXJzdFBhcnR5KSB7DQorCQlyZXR1cm4gWFBDT00u
VnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyAxLCBnZXRBZGRyZXNzKCksIHVy
aSwgbG9hZEluZm8sIGFMb2FkRmxhZ3MsIGZpcnN0UGFydHkpOw0KKwl9DQorDQorCXB1YmxpYyBp
bnQgTG9hZFN0cmVhbShpbnQgLypsb25nKi8gYVN0cmVhbSwgaW50IC8qbG9uZyovIGFVUkksIGlu
dCAvKmxvbmcqLyBhQ29udGVudFR5cGUsIGludCAvKmxvbmcqLyBhQ29udGVudENoYXJzZXQsIGlu
dCAvKmxvbmcqLyBhTG9hZEluZm8pIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBw
b3J0cy5MQVNUX01FVEhPRF9JRCArIDIsIGdldEFkZHJlc3MoKSwgYVN0cmVhbSwgYVVSSSwgYUNv
bnRlbnRUeXBlLCBhQ29udGVudENoYXJzZXQsIGFMb2FkSW5mbyk7DQorCX0NCisNCisJcHVibGlj
IHN0YXRpYyBmaW5hbCBpbnQgSU5URVJOQUxfTE9BRF9GTEFHU19OT05FID0gMDsNCisNCisJcHVi
bGljIHN0YXRpYyBmaW5hbCBpbnQgSU5URVJOQUxfTE9BRF9GTEFHU19JTkhFUklUX09XTkVSID0g
MTsNCisNCisJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgSU5URVJOQUxfTE9BRF9GTEFHU19ET05U
X1NFTkRfUkVGRVJSRVIgPSAyOw0KKw0KKwlwdWJsaWMgc3RhdGljIGZpbmFsIGludCBJTlRFUk5B
TF9MT0FEX0ZMQUdTX0FMTE9XX1RISVJEX1BBUlRZX0ZJWFVQID0gNDsNCisNCisJcHVibGljIHN0
YXRpYyBmaW5hbCBpbnQgSU5URVJOQUxfTE9BRF9GTEFHU19GSVJTVF9MT0FEID0gODsNCisNCisJ
cHVibGljIGludCBJbnRlcm5hbExvYWQoaW50IC8qbG9uZyovIGFVUkksIGludCAvKmxvbmcqLyBh
UmVmZXJyZXIsIGludCAvKmxvbmcqLyBhT3duZXIsIGludCBhRmxhZ3MsIGNoYXJbXSBhV2luZG93
VGFyZ2V0LCBieXRlW10gYVR5cGVIaW50LCBpbnQgLypsb25nKi8gYVBvc3REYXRhU3RyZWFtLCBp
bnQgLypsb25nKi8gYUhlYWRlcnNTdHJlYW0sIGludCBhTG9hZEZsYWdzLCBpbnQgLypsb25nKi8g
YVNIRW50cnksIGJvb2xlYW4gZmlyc3RQYXJ0eSwgaW50IC8qbG9uZyovW10gYURvY1NoZWxsLCBp
bnQgLypsb25nKi9bXSBhUmVxdWVzdCkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1
cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMywgZ2V0QWRkcmVzcygpLCBhVVJJLCBhUmVmZXJyZXIs
IGFPd25lciwgYUZsYWdzLCBhV2luZG93VGFyZ2V0LCBhVHlwZUhpbnQsIGFQb3N0RGF0YVN0cmVh
bSwgYUhlYWRlcnNTdHJlYW0sIGFMb2FkRmxhZ3MsIGFTSEVudHJ5LCBmaXJzdFBhcnR5LCBhRG9j
U2hlbGwsIGFSZXF1ZXN0KTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IENyZWF0ZUxvYWRJbmZvKGlu
dCAvKmxvbmcqL1tdIGxvYWRJbmZvKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3Vw
cG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA0LCBnZXRBZGRyZXNzKCksIGxvYWRJbmZvKTsNCisJfQ0K
Kw0KKwlwdWJsaWMgaW50IFByZXBhcmVGb3JOZXdDb250ZW50TW9kZWwoKSB7DQorCQlyZXR1cm4g
WFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA1LCBnZXRBZGRyZXNz
KCkpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgU2V0Q3VycmVudFVSSShpbnQgLypsb25nKi8gYVVS
SSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lE
ICsgNiwgZ2V0QWRkcmVzcygpLCBhVVJJKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEZpcmVQYWdl
SGlkZU5vdGlmaWNhdGlvbihib29sZWFuIGlzVW5sb2FkKSB7DQorCQlyZXR1cm4gWFBDT00uVnRi
bENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA3LCBnZXRBZGRyZXNzKCksIGlzVW5s
b2FkKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldFByZXNDb250ZXh0KGludCAvKmxvbmcqL1td
IGFQcmVzQ29udGV4dCkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxB
U1RfTUVUSE9EX0lEICsgOCwgZ2V0QWRkcmVzcygpLCBhUHJlc0NvbnRleHQpOw0KKwl9DQorDQor
CXB1YmxpYyBpbnQgR2V0UHJlc1NoZWxsKGludCAvKmxvbmcqL1tdIGFQcmVzU2hlbGwpIHsNCisJ
CXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDksIGdl
dEFkZHJlc3MoKSwgYVByZXNTaGVsbCk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRFbGRlc3RQ
cmVzU2hlbGwoaW50IC8qbG9uZyovW10gYUVsZGVzdFByZXNTaGVsbCkgew0KKwkJcmV0dXJuIFhQ
Q09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMTAsIGdldEFkZHJlc3Mo
KSwgYUVsZGVzdFByZXNTaGVsbCk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRDb250ZW50Vmll
d2VyKGludCAvKmxvbmcqL1tdIGFDb250ZW50Vmlld2VyKSB7DQorCQlyZXR1cm4gWFBDT00uVnRi
bENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyAxMSwgZ2V0QWRkcmVzcygpLCBhQ29u
dGVudFZpZXdlcik7DQorCX0NCisNCisJcHVibGljIGludCBHZXRDaHJvbWVFdmVudEhhbmRsZXIo
aW50IC8qbG9uZyovW10gYUNocm9tZUV2ZW50SGFuZGxlcikgew0KKwkJcmV0dXJuIFhQQ09NLlZ0
YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMTIsIGdldEFkZHJlc3MoKSwgYUNo
cm9tZUV2ZW50SGFuZGxlcik7DQorCX0NCisNCisJcHVibGljIGludCBTZXRDaHJvbWVFdmVudEhh
bmRsZXIoaW50IC8qbG9uZyovIGFDaHJvbWVFdmVudEhhbmRsZXIpIHsNCisJCXJldHVybiBYUENP
TS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDEzLCBnZXRBZGRyZXNzKCks
IGFDaHJvbWVFdmVudEhhbmRsZXIpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgR2V0RG9jdW1lbnRD
aGFyc2V0SW5mbyhpbnQgLypsb25nKi9bXSBhRG9jdW1lbnRDaGFyc2V0SW5mbykgew0KKwkJcmV0
dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMTQsIGdldEFk
ZHJlc3MoKSwgYURvY3VtZW50Q2hhcnNldEluZm8pOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgU2V0
RG9jdW1lbnRDaGFyc2V0SW5mbyhpbnQgLypsb25nKi8gYURvY3VtZW50Q2hhcnNldEluZm8pIHsN
CisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDE1
LCBnZXRBZGRyZXNzKCksIGFEb2N1bWVudENoYXJzZXRJbmZvKTsNCisJfQ0KKw0KKwlwdWJsaWMg
aW50IEdldEFsbG93UGx1Z2lucyhib29sZWFuW10gYUFsbG93UGx1Z2lucykgew0KKwkJcmV0dXJu
IFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMTYsIGdldEFkZHJl
c3MoKSwgYUFsbG93UGx1Z2lucyk7DQorCX0NCisNCisJcHVibGljIGludCBTZXRBbGxvd1BsdWdp
bnMoYm9vbGVhbiBhQWxsb3dQbHVnaW5zKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJ
U3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyAxNywgZ2V0QWRkcmVzcygpLCBhQWxsb3dQbHVnaW5z
KTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldEFsbG93SmF2YXNjcmlwdChib29sZWFuW10gYUFs
bG93SmF2YXNjcmlwdCkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxB
U1RfTUVUSE9EX0lEICsgMTgsIGdldEFkZHJlc3MoKSwgYUFsbG93SmF2YXNjcmlwdCk7DQorCX0N
CisNCisJcHVibGljIGludCBTZXRBbGxvd0phdmFzY3JpcHQoYm9vbGVhbiBhQWxsb3dKYXZhc2Ny
aXB0KSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0Rf
SUQgKyAxOSwgZ2V0QWRkcmVzcygpLCBhQWxsb3dKYXZhc2NyaXB0KTsNCisJfQ0KKw0KKwlwdWJs
aWMgaW50IEdldEFsbG93TWV0YVJlZGlyZWN0cyhib29sZWFuW10gYUFsbG93TWV0YVJlZGlyZWN0
cykgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lE
ICsgMjAsIGdldEFkZHJlc3MoKSwgYUFsbG93TWV0YVJlZGlyZWN0cyk7DQorCX0NCisNCisJcHVi
bGljIGludCBTZXRBbGxvd01ldGFSZWRpcmVjdHMoYm9vbGVhbiBhQWxsb3dNZXRhUmVkaXJlY3Rz
KSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQg
KyAyMSwgZ2V0QWRkcmVzcygpLCBhQWxsb3dNZXRhUmVkaXJlY3RzKTsNCisJfQ0KKw0KKwlwdWJs
aWMgaW50IEdldEFsbG93U3ViZnJhbWVzKGJvb2xlYW5bXSBhQWxsb3dTdWJmcmFtZXMpIHsNCisJ
CXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDIyLCBn
ZXRBZGRyZXNzKCksIGFBbGxvd1N1YmZyYW1lcyk7DQorCX0NCisNCisJcHVibGljIGludCBTZXRB
bGxvd1N1YmZyYW1lcyhib29sZWFuIGFBbGxvd1N1YmZyYW1lcykgew0KKwkJcmV0dXJuIFhQQ09N
LlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMjMsIGdldEFkZHJlc3MoKSwg
YUFsbG93U3ViZnJhbWVzKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldEFsbG93SW1hZ2VzKGJv
b2xlYW5bXSBhQWxsb3dJbWFnZXMpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBw
b3J0cy5MQVNUX01FVEhPRF9JRCArIDI0LCBnZXRBZGRyZXNzKCksIGFBbGxvd0ltYWdlcyk7DQor
CX0NCisNCisJcHVibGljIGludCBTZXRBbGxvd0ltYWdlcyhib29sZWFuIGFBbGxvd0ltYWdlcykg
ew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsg
MjUsIGdldEFkZHJlc3MoKSwgYUFsbG93SW1hZ2VzKTsNCisJfQ0KKw0KKwlwdWJsaWMgc3RhdGlj
IGZpbmFsIGludCBFTlVNRVJBVEVfRk9SV0FSRFMgPSAwOw0KKw0KKwlwdWJsaWMgc3RhdGljIGZp
bmFsIGludCBFTlVNRVJBVEVfQkFDS1dBUkRTID0gMTsNCisNCisJcHVibGljIGludCBHZXREb2NT
aGVsbEVudW1lcmF0b3IoaW50IGFJdGVtVHlwZSwgaW50IGFEaXJlY3Rpb24sIGludCAvKmxvbmcq
L1tdIF9yZXR2YWwpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNU
X01FVEhPRF9JRCArIDI2LCBnZXRBZGRyZXNzKCksIGFJdGVtVHlwZSwgYURpcmVjdGlvbiwgX3Jl
dHZhbCk7DQorCX0NCisNCisJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQVBQX1RZUEVfVU5LTk9X
TiA9IDA7DQorDQorCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEFQUF9UWVBFX01BSUwgPSAxOw0K
Kw0KKwlwdWJsaWMgc3RhdGljIGZpbmFsIGludCBBUFBfVFlQRV9FRElUT1IgPSAyOw0KKw0KKwlw
dWJsaWMgaW50IEdldEFwcFR5cGUoaW50W10gYUFwcFR5cGUpIHsNCisJCXJldHVybiBYUENPTS5W
dGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDI3LCBnZXRBZGRyZXNzKCksIGFB
cHBUeXBlKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IFNldEFwcFR5cGUoaW50IGFBcHBUeXBlKSB7
DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyAy
OCwgZ2V0QWRkcmVzcygpLCBhQXBwVHlwZSk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRBbGxv
d0F1dGgoYm9vbGVhbltdIGFBbGxvd0F1dGgpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChu
c0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDI5LCBnZXRBZGRyZXNzKCksIGFBbGxvd0F1dGgp
Ow0KKwl9DQorDQorCXB1YmxpYyBpbnQgU2V0QWxsb3dBdXRoKGJvb2xlYW4gYUFsbG93QXV0aCkg
ew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsg
MzAsIGdldEFkZHJlc3MoKSwgYUFsbG93QXV0aCk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRa
b29tKGZsb2F0W10gYVpvb20pIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0
cy5MQVNUX01FVEhPRF9JRCArIDMxLCBnZXRBZGRyZXNzKCksIGFab29tKTsNCisJfQ0KKw0KKwlw
dWJsaWMgaW50IFNldFpvb20oZmxvYXQgYVpvb20pIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2Fs
bChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDMyLCBnZXRBZGRyZXNzKCksIGFab29tKTsN
CisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldE1hcmdpbldpZHRoKGludFtdIGFNYXJnaW5XaWR0aCkg
ew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsg
MzMsIGdldEFkZHJlc3MoKSwgYU1hcmdpbldpZHRoKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IFNl
dE1hcmdpbldpZHRoKGludCBhTWFyZ2luV2lkdGgpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2Fs
bChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDM0LCBnZXRBZGRyZXNzKCksIGFNYXJnaW5X
aWR0aCk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRNYXJnaW5IZWlnaHQoaW50W10gYU1hcmdp
bkhlaWdodCkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVU
SE9EX0lEICsgMzUsIGdldEFkZHJlc3MoKSwgYU1hcmdpbkhlaWdodCk7DQorCX0NCisNCisJcHVi
bGljIGludCBTZXRNYXJnaW5IZWlnaHQoaW50IGFNYXJnaW5IZWlnaHQpIHsNCisJCXJldHVybiBY
UENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDM2LCBnZXRBZGRyZXNz
KCksIGFNYXJnaW5IZWlnaHQpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgR2V0SGFzRm9jdXMoYm9v
bGVhbltdIGFIYXNGb2N1cykgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRz
LkxBU1RfTUVUSE9EX0lEICsgMzcsIGdldEFkZHJlc3MoKSwgYUhhc0ZvY3VzKTsNCisJfQ0KKw0K
KwlwdWJsaWMgaW50IFNldEhhc0ZvY3VzKGJvb2xlYW4gYUhhc0ZvY3VzKSB7DQorCQlyZXR1cm4g
WFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyAzOCwgZ2V0QWRkcmVz
cygpLCBhSGFzRm9jdXMpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgR2V0Q2FudmFzSGFzRm9jdXMo
Ym9vbGVhbltdIGFDYW52YXNIYXNGb2N1cykgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5z
SVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgMzksIGdldEFkZHJlc3MoKSwgYUNhbnZhc0hhc0Zv
Y3VzKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IFNldENhbnZhc0hhc0ZvY3VzKGJvb2xlYW4gYUNh
bnZhc0hhc0ZvY3VzKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFT
VF9NRVRIT0RfSUQgKyA0MCwgZ2V0QWRkcmVzcygpLCBhQ2FudmFzSGFzRm9jdXMpOw0KKwl9DQor
DQorCXB1YmxpYyBpbnQgVGFiVG9UcmVlT3duZXIoYm9vbGVhbiBmb3J3YXJkLCBib29sZWFuW10g
dG9va0ZvY3VzKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9N
RVRIT0RfSUQgKyA0MSwgZ2V0QWRkcmVzcygpLCBmb3J3YXJkLCB0b29rRm9jdXMpOw0KKwl9DQor
DQorCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEJVU1lfRkxBR1NfTk9ORSA9IDA7DQorDQorCXB1
YmxpYyBzdGF0aWMgZmluYWwgaW50IEJVU1lfRkxBR1NfQlVTWSA9IDE7DQorDQorCXB1YmxpYyBz
dGF0aWMgZmluYWwgaW50IEJVU1lfRkxBR1NfQkVGT1JFX1BBR0VfTE9BRCA9IDI7DQorDQorCXB1
YmxpYyBzdGF0aWMgZmluYWwgaW50IEJVU1lfRkxBR1NfUEFHRV9MT0FESU5HID0gNDsNCisNCisJ
cHVibGljIHN0YXRpYyBmaW5hbCBpbnQgTE9BRF9DTURfTk9STUFMID0gMTsNCisNCisJcHVibGlj
IHN0YXRpYyBmaW5hbCBpbnQgTE9BRF9DTURfUkVMT0FEID0gMjsNCisNCisJcHVibGljIHN0YXRp
YyBmaW5hbCBpbnQgTE9BRF9DTURfSElTVE9SWSA9IDQ7DQorDQorCXB1YmxpYyBpbnQgR2V0QnVz
eUZsYWdzKGludFtdIGFCdXN5RmxhZ3MpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lT
dXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDQyLCBnZXRBZGRyZXNzKCksIGFCdXN5RmxhZ3MpOw0K
Kwl9DQorDQorCXB1YmxpYyBpbnQgR2V0TG9hZFR5cGUoaW50W10gYUxvYWRUeXBlKSB7DQorCQly
ZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA0MywgZ2V0
QWRkcmVzcygpLCBhTG9hZFR5cGUpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgU2V0TG9hZFR5cGUo
aW50IGFMb2FkVHlwZSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxB
U1RfTUVUSE9EX0lEICsgNDQsIGdldEFkZHJlc3MoKSwgYUxvYWRUeXBlKTsNCisJfQ0KKw0KKwlw
dWJsaWMgaW50IElzQmVpbmdEZXN0cm95ZWQoYm9vbGVhbltdIF9yZXR2YWwpIHsNCisJCXJldHVy
biBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDQ1LCBnZXRBZGRy
ZXNzKCksIF9yZXR2YWwpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgR2V0SXNFeGVjdXRpbmdPbkxv
YWRIYW5kbGVyKGJvb2xlYW5bXSBhSXNFeGVjdXRpbmdPbkxvYWRIYW5kbGVyKSB7DQorCQlyZXR1
cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA0NiwgZ2V0QWRk
cmVzcygpLCBhSXNFeGVjdXRpbmdPbkxvYWRIYW5kbGVyKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50
IEdldExheW91dEhpc3RvcnlTdGF0ZShpbnQgLypsb25nKi9bXSBhTGF5b3V0SGlzdG9yeVN0YXRl
KSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQg
KyA0NywgZ2V0QWRkcmVzcygpLCBhTGF5b3V0SGlzdG9yeVN0YXRlKTsNCisJfQ0KKw0KKwlwdWJs
aWMgaW50IFNldExheW91dEhpc3RvcnlTdGF0ZShpbnQgLypsb25nKi8gYUxheW91dEhpc3RvcnlT
dGF0ZSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9E
X0lEICsgNDgsIGdldEFkZHJlc3MoKSwgYUxheW91dEhpc3RvcnlTdGF0ZSk7DQorCX0NCisNCisJ
cHVibGljIGludCBHZXRTaG91bGRTYXZlTGF5b3V0U3RhdGUoYm9vbGVhbltdIGFTaG91bGRTYXZl
TGF5b3V0U3RhdGUpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNU
X01FVEhPRF9JRCArIDQ5LCBnZXRBZGRyZXNzKCksIGFTaG91bGRTYXZlTGF5b3V0U3RhdGUpOw0K
Kwl9DQorDQorCXB1YmxpYyBpbnQgR2V0U2VjdXJpdHlVSShpbnQgLypsb25nKi9bXSBhU2VjdXJp
dHlVSSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9E
X0lEICsgNTAsIGdldEFkZHJlc3MoKSwgYVNlY3VyaXR5VUkpOw0KKwl9DQorDQorCXB1YmxpYyBp
bnQgU2V0U2VjdXJpdHlVSShpbnQgLypsb25nKi8gYVNlY3VyaXR5VUkpIHsNCisJCXJldHVybiBY
UENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDUxLCBnZXRBZGRyZXNz
KCksIGFTZWN1cml0eVVJKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IFN1c3BlbmRSZWZyZXNoVVJJ
cygpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9J
RCArIDUyLCBnZXRBZGRyZXNzKCkpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgUmVzdW1lUmVmcmVz
aFVSSXMoKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRI
T0RfSUQgKyA1MywgZ2V0QWRkcmVzcygpKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEJlZ2luUmVz
dG9yZShpbnQgLypsb25nKi8gdmlld2VyLCBib29sZWFuIHRvcCkgew0KKwkJcmV0dXJuIFhQQ09N
LlZ0YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgNTQsIGdldEFkZHJlc3MoKSwg
dmlld2VyLCB0b3ApOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgRmluaXNoUmVzdG9yZSgpIHsNCisJ
CXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDU1LCBn
ZXRBZGRyZXNzKCkpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgR2V0UmVzdG9yaW5nRG9jdW1lbnQo
Ym9vbGVhbltdIGFSZXN0b3JpbmdEb2N1bWVudCkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxs
KG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgNTYsIGdldEFkZHJlc3MoKSwgYVJlc3Rvcmlu
Z0RvY3VtZW50KTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldFVzZUVycm9yUGFnZXMoYm9vbGVh
bltdIGFVc2VFcnJvclBhZ2VzKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9y
dHMuTEFTVF9NRVRIT0RfSUQgKyA1NywgZ2V0QWRkcmVzcygpLCBhVXNlRXJyb3JQYWdlcyk7DQor
CX0NCisNCisJcHVibGljIGludCBTZXRVc2VFcnJvclBhZ2VzKGJvb2xlYW4gYVVzZUVycm9yUGFn
ZXMpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9J
RCArIDU4LCBnZXRBZGRyZXNzKCksIGFVc2VFcnJvclBhZ2VzKTsNCisJfQ0KKw0KKwlwdWJsaWMg
aW50IEdldFByZXZpb3VzVHJhbnNJbmRleChpbnRbXSBhUHJldmlvdXNUcmFuc0luZGV4KSB7DQor
CQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA1OSwg
Z2V0QWRkcmVzcygpLCBhUHJldmlvdXNUcmFuc0luZGV4KTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50
IEdldExvYWRlZFRyYW5zSW5kZXgoaW50W10gYUxvYWRlZFRyYW5zSW5kZXgpIHsNCisJCXJldHVy
biBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDYwLCBnZXRBZGRy
ZXNzKCksIGFMb2FkZWRUcmFuc0luZGV4KTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEhpc3RvcnlQ
dXJnZWQoaW50IG51bUVudHJpZXMpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBw
b3J0cy5MQVNUX01FVEhPRF9JRCArIDYxLCBnZXRBZGRyZXNzKCksIG51bUVudHJpZXMpOw0KKwl9
DQorDQorCXB1YmxpYyBpbnQgR2V0U2Vzc2lvblN0b3JhZ2VGb3JVUkkoaW50IC8qbG9uZyovIHVy
aSwgaW50IC8qbG9uZyovW10gX3JldHZhbCkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5z
SVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgNjIsIGdldEFkZHJlc3MoKSwgdXJpLCBfcmV0dmFs
KTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEFkZFNlc3Npb25TdG9yYWdlKGludCAvKmxvbmcqLyBh
RG9tYWluLCBpbnQgLypsb25nKi8gc3RvcmFnZSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxs
KG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgNjMsIGdldEFkZHJlc3MoKSwgYURvbWFpbiwg
c3RvcmFnZSk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRDdXJyZW50RG9jdW1lbnRDaGFubmVs
KGludCAvKmxvbmcqL1tdIGFDdXJyZW50RG9jdW1lbnRDaGFubmVsKSB7DQorCQlyZXR1cm4gWFBD
T00uVnRibENhbGwobnNJU3VwcG9ydHMuTEFTVF9NRVRIT0RfSUQgKyA2NCwgZ2V0QWRkcmVzcygp
LCBhQ3VycmVudERvY3VtZW50Q2hhbm5lbCk7DQorCX0NCisNCisJcHVibGljIGludCBTZXRDaGls
ZE9mZnNldChpbnQgb2Zmc2V0KSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJU3VwcG9y
dHMuTEFTVF9NRVRIT0RfSUQgKyA2NSwgZ2V0QWRkcmVzcygpLCBvZmZzZXQpOw0KKwl9DQorDQor
CXB1YmxpYyBpbnQgR2V0SXNJblVubG9hZChib29sZWFuW10gYUlzSW5VbmxvYWQpIHsNCisJCXJl
dHVybiBYUENPTS5WdGJsQ2FsbChuc0lTdXBwb3J0cy5MQVNUX01FVEhPRF9JRCArIDY2LCBnZXRB
ZGRyZXNzKCksIGFJc0luVW5sb2FkKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldENoYW5uZWxJ
c1Vuc2FmZShib29sZWFuW10gYUNoYW5uZWxJc1Vuc2FmZSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0
YmxDYWxsKG5zSVN1cHBvcnRzLkxBU1RfTUVUSE9EX0lEICsgNjcsIGdldEFkZHJlc3MoKSwgYUNo
YW5uZWxJc1Vuc2FmZSk7DQorCX0NCit9DQpJbmRleDogRWNsaXBzZSBTV1QgTW96aWxsYS9jb21t
b24vb3JnL2VjbGlwc2Uvc3d0L2ludGVybmFsL21vemlsbGEvbnNJSGVscGVyQXBwTGF1bmNoZXJf
MV85LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiBFY2xpcHNlIFNXVCBNb3ppbGxhL2NvbW1v
bi9vcmcvZWNsaXBzZS9zd3QvaW50ZXJuYWwvbW96aWxsYS9uc0lIZWxwZXJBcHBMYXVuY2hlcl8x
XzkuamF2YQ0KZGlmZiAtTiBFY2xpcHNlIFNXVCBNb3ppbGxhL2NvbW1vbi9vcmcvZWNsaXBzZS9z
d3QvaW50ZXJuYWwvbW96aWxsYS9uc0lIZWxwZXJBcHBMYXVuY2hlcl8xXzkuamF2YQ0KLS0tIC9k
ZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysgRWNsaXBzZSBTV1QgTW96aWxs
YS9jb21tb24vb3JnL2VjbGlwc2Uvc3d0L2ludGVybmFsL21vemlsbGEvbnNJSGVscGVyQXBwTGF1
bmNoZXJfMV85LmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSw4MyBA
QA0KKy8qICoqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioNCisgKiBWZXJzaW9uOiBNUEwg
MS4xDQorICoNCisgKiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRo
ZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlIFZlcnNpb24NCisgKiAxLjEgKHRoZSAiTGljZW5zZSIp
OyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGgNCisg
KiB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQor
ICogaHR0cDovL3d3dy5tb3ppbGxhLm9yZy9NUEwvDQorICoNCisgKiBTb2Z0d2FyZSBkaXN0cmli
dXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIGJhc2lz
LA0KKyAqIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt
cGxpZWQuIFNlZSB0aGUgTGljZW5zZQ0KKyAqIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292
ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlDQorICogTGljZW5zZS4NCisg
Kg0KKyAqIFRoZSBPcmlnaW5hbCBDb2RlIGlzIE1vemlsbGEgQ29tbXVuaWNhdG9yIGNsaWVudCBj
b2RlLCByZWxlYXNlZCBNYXJjaCAzMSwgMTk5OC4NCisgKg0KKyAqIFRoZSBJbml0aWFsIERldmVs
b3BlciBvZiB0aGUgT3JpZ2luYWwgQ29kZSBpcw0KKyAqIE5ldHNjYXBlIENvbW11bmljYXRpb25z
IENvcnBvcmF0aW9uLg0KKyAqIFBvcnRpb25zIGNyZWF0ZWQgYnkgTmV0c2NhcGUgYXJlIENvcHly
aWdodCAoQykgMTk5OC0xOTk5DQorICogTmV0c2NhcGUgQ29tbXVuaWNhdGlvbnMgQ29ycG9yYXRp
b24uICBBbGwgUmlnaHRzIFJlc2VydmVkLg0KKyAqDQorICogQ29udHJpYnV0b3Iocyk6DQorICoN
CisgKiBJQk0NCisgKiAtICBCaW5kaW5nIHRvIHBlcm1pdCBpbnRlcmZhY2luZyBiZXR3ZWVuIE1v
emlsbGEgYW5kIFNXVA0KKyAqIC0gIENvcHlyaWdodCAoQykgMjAwOCBJQk0gQ29ycC4gIEFsbCBS
aWdodHMgUmVzZXJ2ZWQuDQorICoNCisgKiAqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKiAq
Lw0KK3BhY2thZ2Ugb3JnLmVjbGlwc2Uuc3d0LmludGVybmFsLm1vemlsbGE7DQorDQorcHVibGlj
IGNsYXNzIG5zSUhlbHBlckFwcExhdW5jaGVyXzFfOSBleHRlbmRzIG5zSUNhbmNlbGFibGUgew0K
Kw0KKwlzdGF0aWMgZmluYWwgaW50IExBU1RfTUVUSE9EX0lEID0gbnNJQ2FuY2VsYWJsZS5MQVNU
X01FVEhPRF9JRCArIDEwOw0KKw0KKwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBOU19JSEVM
UEVSQVBQTEFVTkNIRVJfSUlEX1NUUiA9DQorCQkiY2M3NWMyMWEtMGE3OS00ZjY4LTkwZTEtNTYz
MjUzZDBjNTU1IjsNCisNCisJcHVibGljIHN0YXRpYyBmaW5hbCBuc0lEIE5TX0lIRUxQRVJBUFBM
QVVOQ0hFUl9JSUQgPQ0KKwkJbmV3IG5zSUQoTlNfSUhFTFBFUkFQUExBVU5DSEVSX0lJRF9TVFIp
Ow0KKw0KKwlwdWJsaWMgbnNJSGVscGVyQXBwTGF1bmNoZXJfMV85KGludCAvKmxvbmcqLyBhZGRy
ZXNzKSB7DQorCQlzdXBlcihhZGRyZXNzKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldE1JTUVJ
bmZvKGludCAvKmxvbmcqL1tdIGFNSU1FSW5mbykgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxs
KG5zSUNhbmNlbGFibGUuTEFTVF9NRVRIT0RfSUQgKyAxLCBnZXRBZGRyZXNzKCksIGFNSU1FSW5m
byk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRTb3VyY2UoaW50IC8qbG9uZyovW10gYVNvdXJj
ZSkgew0KKwkJcmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSUNhbmNlbGFibGUuTEFTVF9NRVRIT0Rf
SUQgKyAyLCBnZXRBZGRyZXNzKCksIGFTb3VyY2UpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgR2V0
U3VnZ2VzdGVkRmlsZU5hbWUoaW50IC8qbG9uZyovIGFTdWdnZXN0ZWRGaWxlTmFtZSkgew0KKwkJ
cmV0dXJuIFhQQ09NLlZ0YmxDYWxsKG5zSUNhbmNlbGFibGUuTEFTVF9NRVRIT0RfSUQgKyAzLCBn
ZXRBZGRyZXNzKCksIGFTdWdnZXN0ZWRGaWxlTmFtZSk7DQorCX0NCisNCisJcHVibGljIGludCBT
YXZlVG9EaXNrKGludCAvKmxvbmcqLyBhTmV3RmlsZUxvY2F0aW9uLCBib29sZWFuIGFSZW1lbWJl
clRoaXNQcmVmZXJlbmNlKSB7DQorCQlyZXR1cm4gWFBDT00uVnRibENhbGwobnNJQ2FuY2VsYWJs
ZS5MQVNUX01FVEhPRF9JRCArIDQsIGdldEFkZHJlc3MoKSwgYU5ld0ZpbGVMb2NhdGlvbiwgYVJl
bWVtYmVyVGhpc1ByZWZlcmVuY2UpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgTGF1bmNoV2l0aEFw
cGxpY2F0aW9uKGludCAvKmxvbmcqLyBhQXBwbGljYXRpb24sIGJvb2xlYW4gYVJlbWVtYmVyVGhp
c1ByZWZlcmVuY2UpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lDYW5jZWxhYmxlLkxB
U1RfTUVUSE9EX0lEICsgNSwgZ2V0QWRkcmVzcygpLCBhQXBwbGljYXRpb24sIGFSZW1lbWJlclRo
aXNQcmVmZXJlbmNlKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IFNldFdlYlByb2dyZXNzTGlzdGVu
ZXIoaW50IC8qbG9uZyovIGFXZWJQcm9ncmVzc0xpc3RlbmVyKSB7DQorCQlyZXR1cm4gWFBDT00u
VnRibENhbGwobnNJQ2FuY2VsYWJsZS5MQVNUX01FVEhPRF9JRCArIDYsIGdldEFkZHJlc3MoKSwg
YVdlYlByb2dyZXNzTGlzdGVuZXIpOw0KKwl9DQorDQorCXB1YmxpYyBpbnQgQ2xvc2VQcm9ncmVz
c1dpbmRvdygpIHsNCisJCXJldHVybiBYUENPTS5WdGJsQ2FsbChuc0lDYW5jZWxhYmxlLkxBU1Rf
TUVUSE9EX0lEICsgNywgZ2V0QWRkcmVzcygpKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldFRh
cmdldEZpbGUoaW50IC8qbG9uZyovW10gYVRhcmdldEZpbGUpIHsNCisJCXJldHVybiBYUENPTS5W
dGJsQ2FsbChuc0lDYW5jZWxhYmxlLkxBU1RfTUVUSE9EX0lEICsgOCwgZ2V0QWRkcmVzcygpLCBh
VGFyZ2V0RmlsZSk7DQorCX0NCisNCisJcHVibGljIGludCBHZXRUYXJnZXRGaWxlSXNFeGVjdXRh
YmxlKGJvb2xlYW5bXSBhVGFyZ2V0RmlsZUlzRXhlY3V0YWJsZSkgew0KKwkJcmV0dXJuIFhQQ09N
LlZ0YmxDYWxsKG5zSUNhbmNlbGFibGUuTEFTVF9NRVRIT0RfSUQgKyA5LCBnZXRBZGRyZXNzKCks
IGFUYXJnZXRGaWxlSXNFeGVjdXRhYmxlKTsNCisJfQ0KKw0KKwlwdWJsaWMgaW50IEdldFRpbWVE
b3dubG9hZFN0YXJ0ZWQoaW50IC8qbG9uZyovIGFUaW1lRG93bmxvYWRTdGFydGVkKSB7DQorCQly
ZXR1cm4gWFBDT00uVnRibENhbGwobnNJQ2FuY2VsYWJsZS5MQVNUX01FVEhPRF9JRCArIDEwLCBn
ZXRBZGRyZXNzKCksIGFUaW1lRG93bmxvYWRTdGFydGVkKTsNCisJfQ0KK30NCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>