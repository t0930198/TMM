<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214973</bug_id>
          
          <creation_ts>2008-01-10 18:17:00 -0500</creation_ts>
          <short_desc>Connection profile extension point should not require an icon for the connection profile element</short_desc>
          <delta_ts>2008-07-01 17:42:14 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>9</classification_id>
          <classification>DataTools</classification>
          <product>Data Tools</product>
          <component>Connectivity</component>
          <version>1.6</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>1.6M5</target_milestone>
          
          <blocked>214840</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Larry Dunnell">ledunnel</reporter>
          <assigned_to name="Brian Fitzpatrick">bfitzpat</assigned_to>
          <cc>bfitzpat</cc>
    
    <cc>lchan</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="5163"
          type_id="1"
          status="+"
          setter="ledunnel"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1129367</commentid>
    <comment_count>0</comment_count>
    <who name="Larry Dunnell">ledunnel</who>
    <bug_when>2008-01-10 18:17:41 -0500</bug_when>
    <thetext>The connection profile element of the connectionProfile extension point requires a graphic and since it is usually defined in a non-ui plug-in and it is undesirable to require the non-ui plug-in to provide a graphic file, the extension should be changed so that the graphic can be provided separately.

Note:  Once this defect has been fixed the jdbc_16.gif file that is shared from the org.eclipse.datatools.connectivity plug-in should be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1135418</commentid>
    <comment_count>1</comment_count>
    <who name="Brian Fitzpatrick">bfitzpat</who>
    <bug_when>2008-01-21 17:37:20 -0500</bug_when>
    <thetext>Hey Larry... 

I&apos;m not sure I understand what you&apos;re after here. Is it simply that you want a different mechanism for getting an icon other than in the non-UI connectivity plug-in? The icon property is already optional in the connection profile extension and shouldn&apos;t throw any errors if omitted. 

Is it that you&apos;re looking for is a separate way to provide or override the icon associated with a particular profile, from a UI plug-in. 

org.eclipse.datatools.connectivity.connectionProfileImage
    profileID (String, Required)
    icon (String, plug-in relative path, Required)

Should we worry about handling priorites so we can order these icons? Or should we assume that the implementer will only be providing one icon or the other and there shouldn&apos;t be any conflicts? I&apos;d assume that this connectionProfileImage extension point would override the icon associated with the profile extension point with the same profile ID. So it would be 1-to-1. 

There would then be a class, similar to the ProfileImageRegistry in o.e.d.connectivity, perhaps called ProfileUIImageRegistry in o.e.d.c.ui. The ConnectionProfileLabelProvider could then query both for the icon URL and if the ProfileUIImageRegistry has one, we&apos;ll use it. If not, we default to the one in ProfileImageRegistry for backward-compatibility.

--Fitz</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1135751</commentid>
    <comment_count>2</comment_count>
      <attachid>87509</attachid>
    <who name="Brian Fitzpatrick">bfitzpat</who>
    <bug_when>2008-01-22 07:43:43 -0500</bug_when>
    <thetext>Created attachment 87509
First cut at patch for profile image extension

Hey Larry...

Here&apos;s a first cut at a patch that provides a new extension point for the profile icon. Let me know what you think. 

Thanks
--Fitz</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1135767</commentid>
    <comment_count>3</comment_count>
    <who name="Brian Fitzpatrick">bfitzpat</who>
    <bug_when>2008-01-22 08:21:22 -0500</bug_when>
    <thetext>Never mind. This patch needs some more work before you should test it. Sorry to
jump the gun.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1135773</commentid>
    <comment_count>4</comment_count>
      <attachid>87511</attachid>
    <who name="Brian Fitzpatrick">bfitzpat</who>
    <bug_when>2008-01-22 08:26:26 -0500</bug_when>
    <thetext>Created attachment 87511
Updated patch

This patch fixes the issue I was having with disposed images. Can you go ahead and review now? Sorry for the confusion. I&apos;ll blame it on cold meds or the lack thereof. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1136064</commentid>
    <comment_count>5</comment_count>
    <who name="Larry Dunnell">ledunnel</who>
    <bug_when>2008-01-22 13:40:50 -0500</bug_when>
    <thetext>The patch looks good.  I tested it with images in a local plug-in as well as referencing an image in another plug-in. Everything worked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1136287</commentid>
    <comment_count>6</comment_count>
    <who name="Brian Fitzpatrick">bfitzpat</who>
    <bug_when>2008-01-22 17:38:34 -0500</bug_when>
    <thetext>Delivered to 1.6 head stream</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1282370</commentid>
    <comment_count>7</comment_count>
    <who name="Brian Fitzpatrick">bfitzpat</who>
    <bug_when>2008-07-01 17:42:14 -0400</bug_when>
    <thetext>Closing bugs</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>87509</attachid>
            <date>2008-01-22 07:43:00 -0500</date>
            <delta_ts>2008-01-22 08:26:26 -0500</delta_ts>
            <desc>First cut at patch for profile image extension</desc>
            <filename>BZ214973_profile_icon_extension_patch.txt</filename>
            <type>text/plain</type>
            <size>17724</size>
            <attacher name="Brian Fitzpatrick">bfitzpat</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZGF0YXRvb2xz
LmNvbm5lY3Rpdml0eS5zYW1wbGUuY3ANCkluZGV4OiBwbHVnaW4ueG1sDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZGF0YXRvb2xzL29yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0
aXZpdHkvcGx1Z2lucy9vcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnNhbXBsZS5j
cC9wbHVnaW4ueG1sLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11IC1yMS41IHBs
dWdpbi54bWwNCi0tLSBwbHVnaW4ueG1sCTQgSnVuIDIwMDcgMjE6NTE6NDIgLTAwMDAJMS41DQor
KysgcGx1Z2luLnhtbAkyMiBKYW4gMjAwOCAxMjo0MjoyMCAtMDAwMA0KQEAgLTU0LDExICs1NCwx
MSBAQA0KICAgICAgICAgICAgIGlkPSJqYXZhLmlvLkZpbGUiPg0KICAgICAgIDwvY29ubmVjdGlv
bkZhY3Rvcnk+DQogICAgICAgPGNvbm5lY3Rpb25Qcm9maWxlDQorICAgICAgICAgICAgY2F0ZWdv
cnk9Im9yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0aXZpdHkuc2FtcGxlLmZpbGVDYXRlZ29y
eSINCiAgICAgICAgICAgICBjb25maWd1cmF0aW9uVHlwZT0ib3JnLmVjbGlwc2UuZGF0YXRvb2xz
LmNvbm5lY3Rpdml0eS5zYW1wbGUucGF0aENvbmZpZ3VyYXRpb24iDQotICAgICAgICAgICAgbmFt
ZT0iJUV4dGVuc2lvbi5TZXJ2ZXJFeHRlbnNpb24uQ29ubmVjdGlvblByb2ZpbGUuTmFtZSINCiAg
ICAgICAgICAgICBpY29uPSJpY29ucy9maWxlLmdpZiINCi0gICAgICAgICAgICBjYXRlZ29yeT0i
b3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5zYW1wbGUuZmlsZUNhdGVnb3J5Ig0K
LSAgICAgICAgICAgIGlkPSJvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnNhbXBs
ZS5maWxlUHJvZmlsZSI+DQorICAgICAgICAgICAgaWQ9Im9yZy5lY2xpcHNlLmRhdGF0b29scy5j
b25uZWN0aXZpdHkuc2FtcGxlLmZpbGVQcm9maWxlIg0KKyAgICAgICAgICAgIG5hbWU9IiVFeHRl
bnNpb24uU2VydmVyRXh0ZW5zaW9uLkNvbm5lY3Rpb25Qcm9maWxlLk5hbWUiPg0KICAgICAgIDwv
Y29ubmVjdGlvblByb2ZpbGU+DQogICAgICAgPG5ld1dpemFyZA0KICAgICAgICAgICAgIG5hbWU9
IiVFeHRlbnNpb24uTmV3V2l6YXJkLk5hbWUiDQpAQCAtMTY2LDQgKzE2NiwxMSBAQA0KICAgICAg
ICAgIDwvZW5hYmxlbWVudD4NCiAgICAgICA8L2FjdGlvblByb3ZpZGVyPg0KICAgIDwvZXh0ZW5z
aW9uPg0KKyAgIDxleHRlbnNpb24NCisgICAgICAgICBwb2ludD0ib3JnLmVjbGlwc2UuZGF0YXRv
b2xzLmNvbm5lY3Rpdml0eS51aS5jb25uZWN0aW9uUHJvZmlsZUltYWdlIj4NCisgICAgICA8cHJv
ZmlsZUltYWdlDQorICAgICAgICAgICAgaWNvbj0iaWNvbnMvZmlsZTIuZ2lmIg0KKyAgICAgICAg
ICAgIHByb2ZpbGVJRD0ib3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5zYW1wbGUu
ZmlsZVByb2ZpbGUiPg0KKyAgICAgIDwvcHJvZmlsZUltYWdlPg0KKyAgIDwvZXh0ZW5zaW9uPg0K
IDwvcGx1Z2luPg0KSW5kZXg6IGljb25zL2ZpbGUyLmdpZg0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6
IGljb25zL2ZpbGUyLmdpZg0KZGlmZiAtTiBpY29ucy9maWxlMi5naWYNCi0tLSAvZGV2L251bGwJ
MSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KKysrIGljb25zL2ZpbGUyLmdpZgkxIEphbiAxOTcw
IDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDEgQEANCitHSUY4OWEQABAA9wAAAICAX5+fn7+/
39+//9+f////wMDAgICAX19f////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAALAAAAAAQABAAAAhZABEIHEiwIMEDCBMiNCjwAD8CECEeYIjgQMSI
DhlaBBAggIACEzVevDjA4MaOHT+WLGhxJMSVBwtwRKnSpMuXNmemLABzYEuXPRve5GnSgNGjR01S
XMoUQUAAOw0KI1Agb3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS51aQ0KSW5kZXg6
IHNyYy9vcmcvZWNsaXBzZS9kYXRhdG9vbHMvY29ubmVjdGl2aXR5L3VpL1Byb2ZpbGVJbWFnZVJl
Z2lzdHJ5LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kYXRhdG9vbHMvb3Jn
LmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS9wbHVnaW5zL29yZy5lY2xpcHNlLmRhdGF0
b29scy5jb25uZWN0aXZpdHkudWkvc3JjL29yZy9lY2xpcHNlL2RhdGF0b29scy9jb25uZWN0aXZp
dHkvdWkvUHJvZmlsZUltYWdlUmVnaXN0cnkuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEu
Mg0KZGlmZiAtdSAtcjEuMiBQcm9maWxlSW1hZ2VSZWdpc3RyeS5qYXZhDQotLS0gc3JjL29yZy9l
Y2xpcHNlL2RhdGF0b29scy9jb25uZWN0aXZpdHkvdWkvUHJvZmlsZUltYWdlUmVnaXN0cnkuamF2
YQkyNiBGZWIgMjAwNyAxOTozNjowOCAtMDAwMAkxLjINCisrKyBzcmMvb3JnL2VjbGlwc2UvZGF0
YXRvb2xzL2Nvbm5lY3Rpdml0eS91aS9Qcm9maWxlSW1hZ2VSZWdpc3RyeS5qYXZhCTIyIEphbiAy
MDA4IDEyOjQyOjIxIC0wMDAwDQpAQCAtMTQsNiArMTQsNyBAQA0KIA0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LklDb25uZWN0aW9uUHJvZmlsZVByb3ZpZGVyOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LmludGVybmFsLnVpLkNv
bm5lY3Rpdml0eVVJUGx1Z2luOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVj
dGl2aXR5LmludGVybmFsLnVpLlByb2ZpbGVJbWFnZURlc2NyaXB0b3I7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpmYWNlLnJlc291cmNlLkltYWdlRGVzY3JpcHRvcjsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuamZhY2UucmVzb3VyY2UuSW1hZ2VSZWdpc3RyeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0
LmdyYXBoaWNzLkltYWdlOw0KQEAgLTM0LDcgKzM1LDIyIEBADQogDQogCXB1YmxpYyBJbWFnZSBn
ZXRQcm9maWxlSW1hZ2UoSUNvbm5lY3Rpb25Qcm9maWxlUHJvdmlkZXIgcHJvdmlkZXIpIHsNCiAJ
CUltYWdlIGltYWdlID0gbUltYWdlUmVnaXN0cnkuZ2V0KHByb3ZpZGVyLmdldElkKCkpOw0KLQkJ
aWYgKGltYWdlID09IG51bGwpIHsNCisJCVByb2ZpbGVJbWFnZURlc2NyaXB0b3IgcGlkc1tdID0N
CisJCQlQcm9maWxlSW1hZ2VEZXNjcmlwdG9yLmdldFByb2ZpbGVJbWFnZURlc2NyaXB0b3JzRm9y
UHJvZmlsZUlEKHByb3ZpZGVyLmdldElkKCkpOw0KKwkJaWYgKHBpZHMgIT0gbnVsbCAmJiBwaWRz
Lmxlbmd0aCA+IDApIHsNCisJCQlVUkwgaWNvblVSTCA9IHBpZHNbMF0uZ2V0SWNvblVSTCgpOw0K
KwkJCWlmIChpY29uVVJMICE9IG51bGwpIHsNCisJCQkJSW1hZ2VEZXNjcmlwdG9yIGltYWdlRGVz
YyA9IEltYWdlRGVzY3JpcHRvcg0KKwkJCQkJCS5jcmVhdGVGcm9tVVJMKGljb25VUkwpOw0KKwkJ
CQlpZiAoaW1hZ2UgIT0gbnVsbCkgew0KKwkJCQkJbUltYWdlUmVnaXN0cnkucmVtb3ZlKHByb3Zp
ZGVyLmdldElkKCkpOw0KKwkJCQkJaW1hZ2UuZGlzcG9zZSgpOw0KKwkJCQl9DQorCQkJCW1JbWFn
ZVJlZ2lzdHJ5LnB1dChwcm92aWRlci5nZXRJZCgpLCBpbWFnZURlc2MpOw0KKwkJCQlpbWFnZSA9
IG1JbWFnZVJlZ2lzdHJ5LmdldChwcm92aWRlci5nZXRJZCgpKTsNCisJCQl9DQorCQl9DQorCQll
bHNlIGlmIChpbWFnZSA9PSBudWxsKSB7DQogCQkJVVJMIGljb25VUkwgPSBwcm92aWRlci5nZXRJ
Y29uVVJMKCk7DQogCQkJaWYgKGljb25VUkwgIT0gbnVsbCkgew0KIAkJCQlJbWFnZURlc2NyaXB0
b3IgaW1hZ2VEZXNjID0gSW1hZ2VEZXNjcmlwdG9yDQpJbmRleDogcGx1Z2luLnhtbA0KPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RhdGF0b29scy9vcmcuZWNsaXBzZS5kYXRhdG9vbHMu
Y29ubmVjdGl2aXR5L3BsdWdpbnMvb3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS51
aS9wbHVnaW4ueG1sLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xNA0KZGlmZiAtdSAtcjEuMTQg
cGx1Z2luLnhtbA0KLS0tIHBsdWdpbi54bWwJMTUgSmFuIDIwMDggMTY6NDc6MDcgLTAwMDAJMS4x
NA0KKysrIHBsdWdpbi54bWwJMjIgSmFuIDIwMDggMTI6NDI6MjEgLTAwMDANCkBAIC0zLDYgKzMs
NyBAQA0KIDxwbHVnaW4+DQogICAgPGV4dGVuc2lvbi1wb2ludCBpZD0iZHJpdmVyUHJvcGVydHlF
ZGl0b3IiIG5hbWU9IkRyaXZlciBQcm9wZXJ0eSBFZGl0b3IiIHNjaGVtYT0ic2NoZW1hL2RyaXZl
clByb3BlcnR5RWRpdG9yLmV4c2QiLz4NCiAgICA8ZXh0ZW5zaW9uLXBvaW50IGlkPSJkcml2ZXJV
SUNvbnRyaWJ1dG9yIiBuYW1lPSJEcml2ZXIgVUkgQ29udHJpYnV0b3IiIHNjaGVtYT0ic2NoZW1h
L2RyaXZlclVJQ29udHJpYnV0b3IuZXhzZCIvPg0KKyAgIDxleHRlbnNpb24tcG9pbnQgaWQ9ImNv
bm5lY3Rpb25Qcm9maWxlSW1hZ2UiIG5hbWU9IkNvbm5lY3Rpb24gUHJvZmlsZSBJbWFnZSIgc2No
ZW1hPSJzY2hlbWEvY29ubmVjdGlvblByb2ZpbGVJbWFnZS5leHNkIi8+DQogICAgPGV4dGVuc2lv
biBwb2ludD0ib3JnLmVjbGlwc2UudWkucHJlZmVyZW5jZVBhZ2VzIj4NCiAgICAJPHBhZ2UgbmFt
ZT0iJWRhdGF0b29scy5wcmVmZXJlbmNlLnBhZ2UubmFtZSIgY2xhc3M9Im9yZy5lY2xpcHNlLmRh
dGF0b29scy5jb25uZWN0aXZpdHkuaW50ZXJuYWwudWkucHJlZmVyZW5jZXMuRGF0YVRvb2xzTWFp
blBhZ2UiDQogICAgCWlkID0gIm9yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0aXZpdHkuaW50
ZXJuYWwudWkucHJlZmVyZW5jZXMuRGF0YVRvb2xzTWFpblBhZ2UiLz4NCkluZGV4OiBzcmMvb3Jn
L2VjbGlwc2UvZGF0YXRvb2xzL2Nvbm5lY3Rpdml0eS9pbnRlcm5hbC91aS9Qcm9maWxlSW1hZ2VT
YWZlUnVubmFibGUuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHNyYy9vcmcvZWNsaXBzZS9k
YXRhdG9vbHMvY29ubmVjdGl2aXR5L2ludGVybmFsL3VpL1Byb2ZpbGVJbWFnZVNhZmVSdW5uYWJs
ZS5qYXZhDQpkaWZmIC1OIHNyYy9vcmcvZWNsaXBzZS9kYXRhdG9vbHMvY29ubmVjdGl2aXR5L2lu
dGVybmFsL3VpL1Byb2ZpbGVJbWFnZVNhZmVSdW5uYWJsZS5qYXZhDQotLS0gL2Rldi9udWxsCTEg
SmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2VjbGlwc2UvZGF0YXRvb2xzL2Nv
bm5lY3Rpdml0eS9pbnRlcm5hbC91aS9Qcm9maWxlSW1hZ2VTYWZlUnVubmFibGUuamF2YQkxIEph
biAxOTcwIDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDI2IEBADQorcGFja2FnZSBvcmcuZWNs
aXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LmludGVybmFsLnVpOw0KKw0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5jb3JlLnJ1bnRpbWUuSUNvbmZpZ3VyYXRpb25FbGVtZW50Ow0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5jb3JlLnJ1bnRpbWUuSVNhZmVSdW5uYWJsZTsNCitpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5pbnRlcm5hbC5Db25uZWN0aXZpdHlQbHVnaW47DQorDQor
cHVibGljIGNsYXNzIFByb2ZpbGVJbWFnZVNhZmVSdW5uYWJsZSBpbXBsZW1lbnRzIElTYWZlUnVu
bmFibGUgew0KKw0KKwlwcml2YXRlIFByb2ZpbGVJbWFnZURlc2NyaXB0b3JbXSBtSW5zdGFuY2Vz
ID0gbnVsbDsNCisJcHJpdmF0ZSBJQ29uZmlndXJhdGlvbkVsZW1lbnQgbUVsZW1lbnQgPSBudWxs
Ow0KKwkNCisJcHVibGljIFByb2ZpbGVJbWFnZVNhZmVSdW5uYWJsZSAoIFByb2ZpbGVJbWFnZURl
c2NyaXB0b3JbXSBpbnN0YW5jZSwgSUNvbmZpZ3VyYXRpb25FbGVtZW50IGVsZW1lbnQgKSB7DQor
CQl0aGlzLm1JbnN0YW5jZXMgPSBpbnN0YW5jZTsNCisJCXRoaXMubUVsZW1lbnQgPSBlbGVtZW50
Ow0KKwl9DQorCQ0KKwlwdWJsaWMgdm9pZCBoYW5kbGVFeGNlcHRpb24oVGhyb3dhYmxlIGV4Y2Vw
dGlvbikgew0KKwkJQ29ubmVjdGl2aXR5UGx1Z2luLmdldERlZmF1bHQoKS5sb2coZXhjZXB0aW9u
KTsNCisJfQ0KKw0KKwlwdWJsaWMgdm9pZCBydW4oKSB0aHJvd3MgRXhjZXB0aW9uIHsNCisJCWlm
ICh0aGlzLm1JbnN0YW5jZXMgIT0gbnVsbCkNCisJCQl0aGlzLm1JbnN0YW5jZXNbMF0gPSBuZXcg
UHJvZmlsZUltYWdlRGVzY3JpcHRvcih0aGlzLm1FbGVtZW50KTsNCisJfQ0KKw0KK30NCkluZGV4
OiBzcmMvb3JnL2VjbGlwc2UvZGF0YXRvb2xzL2Nvbm5lY3Rpdml0eS9pbnRlcm5hbC91aS9Qcm9m
aWxlSW1hZ2VEZXNjcmlwdG9yLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiBzcmMvb3JnL2Vj
bGlwc2UvZGF0YXRvb2xzL2Nvbm5lY3Rpdml0eS9pbnRlcm5hbC91aS9Qcm9maWxlSW1hZ2VEZXNj
cmlwdG9yLmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNlL2RhdGF0b29scy9jb25uZWN0aXZp
dHkvaW50ZXJuYWwvdWkvUHJvZmlsZUltYWdlRGVzY3JpcHRvci5qYXZhDQotLS0gL2Rldi9udWxs
CTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2VjbGlwc2UvZGF0YXRvb2xz
L2Nvbm5lY3Rpdml0eS9pbnRlcm5hbC91aS9Qcm9maWxlSW1hZ2VEZXNjcmlwdG9yLmphdmEJMSBK
YW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSwyMDMgQEANCisvKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwNC0yMDA3IFN5YmFzZSwgSW5jLg0KKyAq
IA0KKyAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFu
eWluZyBtYXRlcmlhbHMgYXJlIG1hZGUNCisgKiBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9m
IHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hpY2gNCisgKiBhY2NvbXBhbmllcyB0
aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdA0KKyAqIGh0dHA6Ly93d3cuZWNs
aXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sDQorICogDQorICogQ29udHJpYnV0b3JzOiBicmlh
bmYgLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisgKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqLw0KK3BhY2thZ2Ugb3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5pbnRlcm5h
bC51aTsNCisNCitpbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9uOw0KK2ltcG9y
dCBqYXZhLm5ldC5VUkw7DQoraW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7DQoraW1wb3J0IGph
dmEudXRpbC5IYXNoTWFwOw0KK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsNCitpbXBvcnQgamF2YS51
dGlsLk1hcDsNCisNCitpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLkFzc2VydDsNCitp
bXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLklDb25maWd1cmF0aW9uRWxlbWVudDsNCitp
bXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLklFeHRlbnNpb25SZWdpc3RyeTsNCitpbXBv
cnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLlBsYXRmb3JtOw0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5jb3JlLnJ1bnRpbWUuU2FmZVJ1bm5lcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGF0YXRvb2xz
LmNvbm5lY3Rpdml0eS5kcml2ZXJzLm1vZGVscy5DYXRlZ29yeURlc2NyaXB0b3I7DQoraW1wb3J0
IG9yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0aXZpdHkuZHJpdmVycy5tb2RlbHMuTXlTYWZl
UnVubmFibGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0aXZpdHkuaW50
ZXJuYWwudWkuQ29ubmVjdGl2aXR5VUlQbHVnaW47DQorDQoraW1wb3J0IGNvbS5pYm0uaWN1LnRl
eHQuQ29sbGF0b3I7DQorDQorLyoqDQorICogUmVwcmVzZW50cyBhIHdheSB0byBzcGVjaWZ5IGEg
cHJvZmlsZSBpbWFnZSBkZXNjcmlwdG9yIHdoaWNoIGlzIHByb3ZpZGVkIGJ5IHRoZQ0KKyAqICJv
cmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnVpLmNvbm5lY3Rpb25Qcm9maWxlSW1h
Z2UiIGV4dGVuc2lvbiBwb2ludC4NCisgKiANCisgKiBAYXV0aG9yIGJyaWFuZg0KKyAqLw0KK3B1
YmxpYyBjbGFzcyBQcm9maWxlSW1hZ2VEZXNjcmlwdG9yIGltcGxlbWVudHMgQ29tcGFyYWJsZSB7
DQorDQorCS8vIGV4dGVuc2lvbiBkZXRhaWxzDQorCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5n
IFBST0ZJTEVfSU1BR0VfVEFHID0gInByb2ZpbGVJbWFnZSI7Ly8kTk9OLU5MUy0xJA0KKwlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVhURU5TSU9OX1BPSU5UX05BTUUgPSAiY29ubmVjdGlv
blByb2ZpbGVJbWFnZSI7IC8vJE5PTi1OTFMtMSQNCisNCisJLy8gYXR0cmlidXRlcw0KKwlwdWJs
aWMgc3RhdGljIGZpbmFsIFN0cmluZyBBVFRSX0lEID0gInByb2ZpbGVJRCI7IC8vJE5PTi1OTFMt
MSQNCisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQVRUUl9JQ09OID0gImljb24iOyAvLyRO
T04tTkxTLTEkDQorDQorCXByaXZhdGUgVVJMIG1JY29uVVJMOw0KKw0KKwlwcml2YXRlIHN0YXRp
YyBmaW5hbCBQcm9maWxlSW1hZ2VEZXNjcmlwdG9yW10gRU1QVFkgPSB7fTsNCisNCisJLy8gbG9j
YWwgbGlzdCBvZiBkcml2ZXIgdGVtcGxhdGVzDQorCXByaXZhdGUgc3RhdGljIE1hcCBmZ1Byb2Zp
bGVJbWFnZURlc2NyaXB0b3JzOw0KKw0KKwkvLyBsb2NhbCBjb3B5IG9mIGNvbmZpZ3VyYXRpb24g
ZWxlbWVudA0KKwlwcml2YXRlIElDb25maWd1cmF0aW9uRWxlbWVudCBmRWxlbWVudDsNCisJDQor
CS8qKg0KKwkgKiBDcmVhdGVzIGEgbmV3IGRyaXZlciBwcm9wZXJ0eSBlZGl0b3IgdGVtcGxhdGUg
ZGVzY3JpcHRvciBmb3IgdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24NCisJICogZWxlbWVudC4NCisJ
ICovDQorCXByb3RlY3RlZCBQcm9maWxlSW1hZ2VEZXNjcmlwdG9yKElDb25maWd1cmF0aW9uRWxl
bWVudCBlbGVtZW50KSB7DQorCQl0aGlzLmZFbGVtZW50ID0gZWxlbWVudDsNCisNCisJCS8qDQor
CQkgKiAiQW4gZXh0ZW5zaW9uIGZvciBleHRlbnNpb24tcG9pbnQNCisJCSAqIG9yZy5lY2xpcHNl
LmRhdGF0b29scy5jb25uZWN0aXZpdHkudWkuY29ubmVjdGlvblByb2ZpbGVJbWFnZSBkb2VzIG5v
dCBwcm92aWRlIGENCisJCSAqIHZhbGlkIElEIik7DQorCQkgKi8NCisJCUFzc2VydC5pc05vdE51
bGwoZ2V0SWQoKSwgDQorCQkJCSJUaGUgdGFyZ2V0IGNvbm5lY3Rpb24gcHJvZmlsZSBJRCBmb3Ig
dGhlIHByb2ZpbGUgaW1hZ2UgZXh0ZW5zaW9uIGNhbm5vdCBiZSBudWxsLiIpOw0KKwkJQXNzZXJ0
LmlzTm90TnVsbChnZXRJY29uKCksIA0KKwkJCSJUaGUgaWNvbiBmb3IgdGhlIHByb2ZpbGUgaW1h
Z2UgZXh0ZW5zaW9uIGNhbm5vdCBiZSBudWxsLiIpOw0KKwl9DQorDQorCS8qKg0KKwkgKiBSZXR1
cm5zIGFsbCBjb250cmlidXRlZCBkcml2ZXIgcHJvcGVydHkgZWRpdG9yIGRlc2NyaXB0b3JzLg0K
KwkgKi8NCisJcHVibGljIHN0YXRpYyBQcm9maWxlSW1hZ2VEZXNjcmlwdG9yW10gZ2V0UHJvZmls
ZUltYWdlRGVzY3JpcHRvcnMoKSB7DQorCQlpZiAoZmdQcm9maWxlSW1hZ2VEZXNjcmlwdG9ycyA9
PSBudWxsKSB7DQorCQkJSUV4dGVuc2lvblJlZ2lzdHJ5IHJlZ2lzdHJ5ID0gUGxhdGZvcm0uZ2V0
RXh0ZW5zaW9uUmVnaXN0cnkoKTsNCisJCQlJQ29uZmlndXJhdGlvbkVsZW1lbnRbXSBlbGVtZW50
cyA9IHJlZ2lzdHJ5DQorCQkJCQkuZ2V0Q29uZmlndXJhdGlvbkVsZW1lbnRzRm9yKENvbm5lY3Rp
dml0eVVJUGx1Z2luDQorCQkJCQkJCS5nZXREZWZhdWx0KCkuZ2V0QnVuZGxlKCkuZ2V0U3ltYm9s
aWNOYW1lKCksDQorCQkJCQkJCUVYVEVOU0lPTl9QT0lOVF9OQU1FKTsNCisJCQljcmVhdGVQcm9m
aWxlSW1hZ2VEZXNjcmlwdG9ycyhlbGVtZW50cyk7DQorCQl9DQorCQlpZiAoZmdQcm9maWxlSW1h
Z2VEZXNjcmlwdG9ycy5zaXplKCkgPiAwKQ0KKwkJCXJldHVybiAoUHJvZmlsZUltYWdlRGVzY3Jp
cHRvcltdKSBmZ1Byb2ZpbGVJbWFnZURlc2NyaXB0b3JzLnZhbHVlcygpLnRvQXJyYXkobmV3IFBy
b2ZpbGVJbWFnZURlc2NyaXB0b3JbZmdQcm9maWxlSW1hZ2VEZXNjcmlwdG9ycy5zaXplKCldKTsN
CisJCWVsc2UNCisJCQlyZXR1cm4gRU1QVFk7DQorCX0NCisJDQorCXB1YmxpYyBzdGF0aWMgUHJv
ZmlsZUltYWdlRGVzY3JpcHRvcltdIGdldFByb2ZpbGVJbWFnZURlc2NyaXB0b3JzRm9yUHJvZmls
ZUlEICggU3RyaW5nIHByb2ZpbGVJRCApIHsNCisJCVByb2ZpbGVJbWFnZURlc2NyaXB0b3JbXSBk
ZXNjcmlwdG9ycyA9IGdldFByb2ZpbGVJbWFnZURlc2NyaXB0b3JzKCk7DQorCQlpZiAoZGVzY3Jp
cHRvcnMgIT0gbnVsbCAmJiBkZXNjcmlwdG9ycy5sZW5ndGggPiAwKSB7DQorCQkJQXJyYXlMaXN0
IHJlc3VsdCA9IG5ldyBBcnJheUxpc3QoKTsNCisJCQlmb3IgKGludCBpID0gMDsgaSA8IGRlc2Ny
aXB0b3JzLmxlbmd0aDsgaSsrKSB7DQorCQkJCWlmIChkZXNjcmlwdG9yc1tpXS5nZXRJZCgpLmVx
dWFscyhwcm9maWxlSUQpKSB7DQorCQkJCQlyZXN1bHQuYWRkKGRlc2NyaXB0b3JzW2ldKTsNCisJ
CQkJfQ0KKwkJCX0NCisJCQlyZXR1cm4gKFByb2ZpbGVJbWFnZURlc2NyaXB0b3JbXSkgcmVzdWx0
LnRvQXJyYXkobmV3IFByb2ZpbGVJbWFnZURlc2NyaXB0b3JbcmVzdWx0LnNpemUoKV0pOw0KKwkJ
fQ0KKwkJcmV0dXJuIEVNUFRZOw0KKwl9DQorDQorCS8qKg0KKwkgKiBSZXR1cm5zIHRoZSBwcm9w
ZXJ0eSBlZGl0b3IgaWQuDQorCSAqLw0KKwlwdWJsaWMgU3RyaW5nIGdldElkKCkgew0KKwkJcmV0
dXJuIHRoaXMuZkVsZW1lbnQuZ2V0QXR0cmlidXRlKEFUVFJfSUQpOw0KKwl9DQorDQorCS8qKg0K
KwkgKiBSZXR1cm5zIHRoZSB0YXJnZXQgcHJvcGVydHkgaWQNCisJICovDQorCXB1YmxpYyBTdHJp
bmcgZ2V0SWNvbigpIHsNCisJCXJldHVybiB0aGlzLmZFbGVtZW50LmdldEF0dHJpYnV0ZShBVFRS
X0lDT04pOw0KKwl9DQorDQorCS8qKg0KKwkgKiBSZXR1cm5zIHRoZSBjb25maWd1cmF0aW9uIGVs
ZW1lbnQuDQorCSAqLw0KKwlwdWJsaWMgSUNvbmZpZ3VyYXRpb25FbGVtZW50IGdldEVsZW1lbnQo
KSB7DQorCQlyZXR1cm4gdGhpcy5mRWxlbWVudDsNCisJfQ0KKw0KKwkvKg0KKwkgKiBJbXBsZW1l
bnRzIGEgbWV0aG9kIGZyb20gSUNvbXBhcmFibGUNCisJICovDQorCXB1YmxpYyBpbnQgY29tcGFy
ZVRvKE9iamVjdCBvKSB7DQorCQlpZiAobyBpbnN0YW5jZW9mIFByb2ZpbGVJbWFnZURlc2NyaXB0
b3IpDQorCQkJcmV0dXJuIENvbGxhdG9yLmdldEluc3RhbmNlKCkuY29tcGFyZShnZXRJZCgpLA0K
KwkJCQkJKChQcm9maWxlSW1hZ2VEZXNjcmlwdG9yKSBvKS5nZXRJZCgpKTsNCisJCXJldHVybiBJ
bnRlZ2VyLk1JTl9WQUxVRTsNCisJfQ0KKw0KKwkvKioNCisJICogQ3JlYXRlcyB0aGUgcHJvZmls
ZSBpbWFnZSBkZXNjcmlwdG9ycy4NCisJICovDQorCXByaXZhdGUgc3RhdGljIHZvaWQgY3JlYXRl
UHJvZmlsZUltYWdlRGVzY3JpcHRvcnMoDQorCQkJSUNvbmZpZ3VyYXRpb25FbGVtZW50W10gZWxl
bWVudHMpIHsNCisJCWZnUHJvZmlsZUltYWdlRGVzY3JpcHRvcnMgPSBuZXcgSGFzaE1hcCgpOw0K
KwkJDQorCQlmb3IgKGludCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgKytpKSB7DQorCQkJ
ZmluYWwgSUNvbmZpZ3VyYXRpb25FbGVtZW50IGVsZW1lbnQgPSBlbGVtZW50c1tpXTsNCisJCQlp
ZiAoUFJPRklMRV9JTUFHRV9UQUcuZXF1YWxzKGVsZW1lbnQuZ2V0TmFtZSgpKSkgew0KKw0KKwkJ
CQlmaW5hbCBQcm9maWxlSW1hZ2VEZXNjcmlwdG9yW10gZGVzYyA9IG5ldyBQcm9maWxlSW1hZ2VE
ZXNjcmlwdG9yWzFdOw0KKwkJCQlTYWZlUnVubmVyDQorCQkJCQkucnVuKG5ldyBQcm9maWxlSW1h
Z2VTYWZlUnVubmFibGUgKCBkZXNjLCBlbGVtZW50KSk7DQorDQorCQkJCWlmIChkZXNjICE9IG51
bGwpIHsNCisJCQkJCWZnUHJvZmlsZUltYWdlRGVzY3JpcHRvcnMucHV0KGRlc2NbMF0uZ2V0SWQo
KSwgZGVzY1swXSk7DQorCQkJCX0NCisJCQl9DQorCQl9DQorCX0NCisJDQorCS8qIChub24tSmF2
YWRvYykNCisJICogQHNlZSBqYXZhLmxhbmcuT2JqZWN0I2VxdWFscyhqYXZhLmxhbmcuT2JqZWN0
KQ0KKwkgKi8NCisJcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvYmopIHsNCisJCWlmIChv
YmogaW5zdGFuY2VvZiBQcm9maWxlSW1hZ2VEZXNjcmlwdG9yKSB7DQorCQkJUHJvZmlsZUltYWdl
RGVzY3JpcHRvciBjb21wYXJlID0gKFByb2ZpbGVJbWFnZURlc2NyaXB0b3IpIG9iajsNCisJCQly
ZXR1cm4gdGhpcy5nZXRJZCgpLmVxdWFscyhjb21wYXJlLmdldElkKCkpOw0KKwkJfQ0KKwkJcmV0
dXJuIHN1cGVyLmVxdWFscyhvYmopOw0KKwl9DQorDQorCS8qIChub24tSmF2YWRvYykNCisJICog
QHNlZSBqYXZhLmxhbmcuT2JqZWN0I2hhc2hDb2RlKCkNCisJICovDQorCXB1YmxpYyBpbnQgaGFz
aENvZGUoKSB7DQorCQlpZiAodGhpcy5nZXRJZCgpICE9IG51bGwpDQorCQkJcmV0dXJuIHRoaXMu
Z2V0SWQoKS5oYXNoQ29kZSgpOw0KKwkJcmV0dXJuIHN1cGVyLmhhc2hDb2RlKCk7DQorCX0NCisN
CisJcHJpdmF0ZSB2b2lkIHByb2Nlc3NJY29uQXR0cigpIHsNCisJCVN0cmluZyBpY29uQXR0ciA9
IGZFbGVtZW50ID09IG51bGwgPyBudWxsIDogZkVsZW1lbnQNCisJCQkJLmdldEF0dHJpYnV0ZShB
VFRSX0lDT04pOw0KKwkJaWYgKGljb25BdHRyICE9IG51bGwgJiYgaWNvbkF0dHIudHJpbSgpLmxl
bmd0aCgpID4gMCkgew0KKwkJCWlmIChpY29uQXR0ci5zdGFydHNXaXRoKCJwbGF0Zm9ybTovIikp
ew0KKwkJCQl0cnkgew0KKwkJCQkJbUljb25VUkwgPSBuZXcgVVJMKGljb25BdHRyKTsNCisJCQkJ
fSBjYXRjaCAoTWFsZm9ybWVkVVJMRXhjZXB0aW9uIGUpIHsNCisJCQkJCS8vIERvIG5vdGhpbmcN
CisJCQkJfQ0KKwkJCX0gZWxzZSB7DQorCQkJCW1JY29uVVJMID0gUGxhdGZvcm0uZ2V0QnVuZGxl
KGZFbGVtZW50LmdldENvbnRyaWJ1dG9yKCkuZ2V0TmFtZSgpKQ0KKwkJCQkJCS5nZXRFbnRyeShp
Y29uQXR0cik7DQorCQkJfQ0KKwkJfQ0KKwl9DQorDQorCXB1YmxpYyBVUkwgZ2V0SWNvblVSTCgp
IHsNCisJCWlmIChtSWNvblVSTCA9PSBudWxsKSB7DQorCQkJcHJvY2Vzc0ljb25BdHRyKCk7DQor
CQl9DQorCQlyZXR1cm4gbUljb25VUkw7DQorCX0NCit9DQpJbmRleDogc2NoZW1hL2Nvbm5lY3Rp
b25Qcm9maWxlSW1hZ2UuZXhzZA0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHNjaGVtYS9jb25uZWN0
aW9uUHJvZmlsZUltYWdlLmV4c2QNCmRpZmYgLU4gc2NoZW1hL2Nvbm5lY3Rpb25Qcm9maWxlSW1h
Z2UuZXhzZA0KLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysgc2No
ZW1hL2Nvbm5lY3Rpb25Qcm9maWxlSW1hZ2UuZXhzZAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAw
DQpAQCAtMCwwICsxLDEwOSBAQA0KKzw/eG1sIHZlcnNpb249JzEuMCcgZW5jb2Rpbmc9J1VURi04
Jz8+DQorPCEtLSBTY2hlbWEgZmlsZSB3cml0dGVuIGJ5IFBERSAtLT4NCis8c2NoZW1hIHRhcmdl
dE5hbWVzcGFjZT0ib3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS51aSI+DQorPGFu
bm90YXRpb24+DQorICAgICAgPGFwcEluZm8+DQorICAgICAgICAgPG1ldGEuc2NoZW1hIHBsdWdp
bj0ib3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS51aSIgaWQ9ImNvbm5lY3Rpb25Q
cm9maWxlSW1hZ2UiIG5hbWU9IkNvbm5lY3Rpb24gUHJvZmlsZSBJbWFnZSIvPg0KKyAgICAgIDwv
YXBwSW5mbz4NCisgICAgICA8ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICBUaGUgQ29ubmVjdGlv
biBQcm9maWxlIEltYWdlIGV4dGVuc2lvbiBwb2ludCBhbGxvd3MgYWRvcHRlcnMgdG8gc3BsaXQg
b3V0IGljb25zIGZyb20gdGhlaXIgbWFpbiBjb25uZWN0aW9uIHByb2ZpbGUgZXh0ZW5zaW9uIGlu
dG8gYSBzZXBhcmF0ZSBwbHVnLWluIGZvciBVSSBjb2RlIGFuZCByZXNvdXJjZXMuIA0KKyAgICAg
IDwvZG9jdW1lbnRhdGlvbj4NCisgICA8L2Fubm90YXRpb24+DQorDQorICAgPGVsZW1lbnQgbmFt
ZT0iZXh0ZW5zaW9uIj4NCisgICAgICA8Y29tcGxleFR5cGU+DQorICAgICAgICAgPHNlcXVlbmNl
IG1pbk9jY3Vycz0iMSIgbWF4T2NjdXJzPSJ1bmJvdW5kZWQiPg0KKyAgICAgICAgICAgIDxlbGVt
ZW50IHJlZj0icHJvZmlsZUltYWdlIi8+DQorICAgICAgICAgPC9zZXF1ZW5jZT4NCisgICAgICAg
ICA8YXR0cmlidXRlIG5hbWU9InBvaW50IiB0eXBlPSJzdHJpbmciIHVzZT0icmVxdWlyZWQiPg0K
KyAgICAgICAgICAgIDxhbm5vdGF0aW9uPg0KKyAgICAgICAgICAgICAgIDxkb2N1bWVudGF0aW9u
Pg0KKyAgICAgICAgICAgICAgICAgIA0KKyAgICAgICAgICAgICAgIDwvZG9jdW1lbnRhdGlvbj4N
CisgICAgICAgICAgICA8L2Fubm90YXRpb24+DQorICAgICAgICAgPC9hdHRyaWJ1dGU+DQorICAg
ICAgICAgPGF0dHJpYnV0ZSBuYW1lPSJpZCIgdHlwZT0ic3RyaW5nIj4NCisgICAgICAgICAgICA8
YW5ub3RhdGlvbj4NCisgICAgICAgICAgICAgICA8ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICAg
ICAgICAgICANCisgICAgICAgICAgICAgICA8L2RvY3VtZW50YXRpb24+DQorICAgICAgICAgICAg
PC9hbm5vdGF0aW9uPg0KKyAgICAgICAgIDwvYXR0cmlidXRlPg0KKyAgICAgICAgIDxhdHRyaWJ1
dGUgbmFtZT0ibmFtZSIgdHlwZT0ic3RyaW5nIj4NCisgICAgICAgICAgICA8YW5ub3RhdGlvbj4N
CisgICAgICAgICAgICAgICA8ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICAgICAgICAgICANCisg
ICAgICAgICAgICAgICA8L2RvY3VtZW50YXRpb24+DQorICAgICAgICAgICAgICAgPGFwcEluZm8+
DQorICAgICAgICAgICAgICAgICAgPG1ldGEuYXR0cmlidXRlIHRyYW5zbGF0YWJsZT0idHJ1ZSIv
Pg0KKyAgICAgICAgICAgICAgIDwvYXBwSW5mbz4NCisgICAgICAgICAgICA8L2Fubm90YXRpb24+
DQorICAgICAgICAgPC9hdHRyaWJ1dGU+DQorICAgICAgPC9jb21wbGV4VHlwZT4NCisgICA8L2Vs
ZW1lbnQ+DQorDQorICAgPGVsZW1lbnQgbmFtZT0icHJvZmlsZUltYWdlIj4NCisgICAgICA8Y29t
cGxleFR5cGU+DQorICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPSJwcm9maWxlSUQiIHR5cGU9InN0
cmluZyIgdXNlPSJyZXF1aXJlZCI+DQorICAgICAgICAgICAgPGFubm90YXRpb24+DQorICAgICAg
ICAgICAgICAgPGRvY3VtZW50YXRpb24+DQorICAgICAgICAgICAgICAgICAgDQorICAgICAgICAg
ICAgICAgPC9kb2N1bWVudGF0aW9uPg0KKyAgICAgICAgICAgIDwvYW5ub3RhdGlvbj4NCisgICAg
ICAgICA8L2F0dHJpYnV0ZT4NCisgICAgICAgICA8YXR0cmlidXRlIG5hbWU9Imljb24iIHR5cGU9
InN0cmluZyIgdXNlPSJyZXF1aXJlZCI+DQorICAgICAgICAgICAgPGFubm90YXRpb24+DQorICAg
ICAgICAgICAgICAgPGRvY3VtZW50YXRpb24+DQorICAgICAgICAgICAgICAgICAgDQorICAgICAg
ICAgICAgICAgPC9kb2N1bWVudGF0aW9uPg0KKyAgICAgICAgICAgIDwvYW5ub3RhdGlvbj4NCisg
ICAgICAgICA8L2F0dHJpYnV0ZT4NCisgICAgICA8L2NvbXBsZXhUeXBlPg0KKyAgIDwvZWxlbWVu
dD4NCisNCisgICA8YW5ub3RhdGlvbj4NCisgICAgICA8YXBwSW5mbz4NCisgICAgICAgICA8bWV0
YS5zZWN0aW9uIHR5cGU9InNpbmNlIi8+DQorICAgICAgPC9hcHBJbmZvPg0KKyAgICAgIDxkb2N1
bWVudGF0aW9uPg0KKyAgICAgICAgIFtFbnRlciB0aGUgZmlyc3QgcmVsZWFzZSBpbiB3aGljaCB0
aGlzIGV4dGVuc2lvbiBwb2ludCBhcHBlYXJzLl0NCisgICAgICA8L2RvY3VtZW50YXRpb24+DQor
ICAgPC9hbm5vdGF0aW9uPg0KKw0KKyAgIDxhbm5vdGF0aW9uPg0KKyAgICAgIDxhcHBJbmZvPg0K
KyAgICAgICAgIDxtZXRhLnNlY3Rpb24gdHlwZT0iZXhhbXBsZXMiLz4NCisgICAgICA8L2FwcElu
Zm8+DQorICAgICAgPGRvY3VtZW50YXRpb24+DQorICAgICAgICAgW0VudGVyIGV4dGVuc2lvbiBw
b2ludCB1c2FnZSBleGFtcGxlIGhlcmUuXQ0KKyAgICAgIDwvZG9jdW1lbnRhdGlvbj4NCisgICA8
L2Fubm90YXRpb24+DQorDQorICAgPGFubm90YXRpb24+DQorICAgICAgPGFwcEluZm8+DQorICAg
ICAgICAgPG1ldGEuc2VjdGlvbiB0eXBlPSJhcGlJbmZvIi8+DQorICAgICAgPC9hcHBJbmZvPg0K
KyAgICAgIDxkb2N1bWVudGF0aW9uPg0KKyAgICAgICAgIFtFbnRlciBBUEkgaW5mb3JtYXRpb24g
aGVyZS5dDQorICAgICAgPC9kb2N1bWVudGF0aW9uPg0KKyAgIDwvYW5ub3RhdGlvbj4NCisNCisg
ICA8YW5ub3RhdGlvbj4NCisgICAgICA8YXBwSW5mbz4NCisgICAgICAgICA8bWV0YS5zZWN0aW9u
IHR5cGU9ImltcGxlbWVudGF0aW9uIi8+DQorICAgICAgPC9hcHBJbmZvPg0KKyAgICAgIDxkb2N1
bWVudGF0aW9uPg0KKyAgICAgICAgIFtFbnRlciBpbmZvcm1hdGlvbiBhYm91dCBzdXBwbGllZCBp
bXBsZW1lbnRhdGlvbiBvZiB0aGlzIGV4dGVuc2lvbiBwb2ludC5dDQorICAgICAgPC9kb2N1bWVu
dGF0aW9uPg0KKyAgIDwvYW5ub3RhdGlvbj4NCisNCisgICA8YW5ub3RhdGlvbj4NCisgICAgICA8
YXBwSW5mbz4NCisgICAgICAgICA8bWV0YS5zZWN0aW9uIHR5cGU9ImNvcHlyaWdodCIvPg0KKyAg
ICAgIDwvYXBwSW5mbz4NCisgICAgICA8ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICANCisgICAg
ICA8L2RvY3VtZW50YXRpb24+DQorICAgPC9hbm5vdGF0aW9uPg0KKw0KKzwvc2NoZW1hPg0K
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>87511</attachid>
            <date>2008-01-22 08:26:00 -0500</date>
            <delta_ts>2008-01-22 08:26:26 -0500</delta_ts>
            <desc>Updated patch</desc>
            <filename>BZ214973_profile_icon_extension_patch2.txt</filename>
            <type>text/plain</type>
            <size>18113</size>
            <attacher name="Brian Fitzpatrick">bfitzpat</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZGF0YXRvb2xz
LmNvbm5lY3Rpdml0eS5zYW1wbGUuY3ANCkluZGV4OiBwbHVnaW4ueG1sDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZGF0YXRvb2xzL29yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0
aXZpdHkvcGx1Z2lucy9vcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnNhbXBsZS5j
cC9wbHVnaW4ueG1sLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11IC1yMS41IHBs
dWdpbi54bWwNCi0tLSBwbHVnaW4ueG1sCTQgSnVuIDIwMDcgMjE6NTE6NDIgLTAwMDAJMS41DQor
KysgcGx1Z2luLnhtbAkyMiBKYW4gMjAwOCAxMzoyNTowOSAtMDAwMA0KQEAgLTU0LDExICs1NCwx
MSBAQA0KICAgICAgICAgICAgIGlkPSJqYXZhLmlvLkZpbGUiPg0KICAgICAgIDwvY29ubmVjdGlv
bkZhY3Rvcnk+DQogICAgICAgPGNvbm5lY3Rpb25Qcm9maWxlDQorICAgICAgICAgICAgY2F0ZWdv
cnk9Im9yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0aXZpdHkuc2FtcGxlLmZpbGVDYXRlZ29y
eSINCiAgICAgICAgICAgICBjb25maWd1cmF0aW9uVHlwZT0ib3JnLmVjbGlwc2UuZGF0YXRvb2xz
LmNvbm5lY3Rpdml0eS5zYW1wbGUucGF0aENvbmZpZ3VyYXRpb24iDQotICAgICAgICAgICAgbmFt
ZT0iJUV4dGVuc2lvbi5TZXJ2ZXJFeHRlbnNpb24uQ29ubmVjdGlvblByb2ZpbGUuTmFtZSINCiAg
ICAgICAgICAgICBpY29uPSJpY29ucy9maWxlLmdpZiINCi0gICAgICAgICAgICBjYXRlZ29yeT0i
b3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5zYW1wbGUuZmlsZUNhdGVnb3J5Ig0K
LSAgICAgICAgICAgIGlkPSJvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnNhbXBs
ZS5maWxlUHJvZmlsZSI+DQorICAgICAgICAgICAgaWQ9Im9yZy5lY2xpcHNlLmRhdGF0b29scy5j
b25uZWN0aXZpdHkuc2FtcGxlLmZpbGVQcm9maWxlIg0KKyAgICAgICAgICAgIG5hbWU9IiVFeHRl
bnNpb24uU2VydmVyRXh0ZW5zaW9uLkNvbm5lY3Rpb25Qcm9maWxlLk5hbWUiPg0KICAgICAgIDwv
Y29ubmVjdGlvblByb2ZpbGU+DQogICAgICAgPG5ld1dpemFyZA0KICAgICAgICAgICAgIG5hbWU9
IiVFeHRlbnNpb24uTmV3V2l6YXJkLk5hbWUiDQpAQCAtMTY2LDQgKzE2NiwxMSBAQA0KICAgICAg
ICAgIDwvZW5hYmxlbWVudD4NCiAgICAgICA8L2FjdGlvblByb3ZpZGVyPg0KICAgIDwvZXh0ZW5z
aW9uPg0KKyAgIDxleHRlbnNpb24NCisgICAgICAgICBwb2ludD0ib3JnLmVjbGlwc2UuZGF0YXRv
b2xzLmNvbm5lY3Rpdml0eS51aS5jb25uZWN0aW9uUHJvZmlsZUltYWdlIj4NCisgICAgICA8cHJv
ZmlsZUltYWdlDQorICAgICAgICAgICAgaWNvbj0iaWNvbnMvZmlsZTIuZ2lmIg0KKyAgICAgICAg
ICAgIHByb2ZpbGVJRD0ib3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5zYW1wbGUu
ZmlsZVByb2ZpbGUiPg0KKyAgICAgIDwvcHJvZmlsZUltYWdlPg0KKyAgIDwvZXh0ZW5zaW9uPg0K
IDwvcGx1Z2luPg0KSW5kZXg6IGljb25zL2ZpbGUyLmdpZg0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6
IGljb25zL2ZpbGUyLmdpZg0KZGlmZiAtTiBpY29ucy9maWxlMi5naWYNCi0tLSAvZGV2L251bGwJ
MSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KKysrIGljb25zL2ZpbGUyLmdpZgkxIEphbiAxOTcw
IDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDEgQEANCitHSUY4OWEQABAA9wAAAICAX5+fn7+/
39+//9+f////wMDAgICAX19f////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAALAAAAAAQABAAAAhZABEIHEiwIMEDCBMiNCjwAD8CECEeYIjgQMSI
DhlaBBAggIACEzVevDjA4MaOHT+WLGhxJMSVBwtwRKnSpMuXNmemLABzYEuXPRve5GnSgNGjR01S
XMoUQUAAOw0KI1Agb3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS51aQ0KSW5kZXg6
IHNyYy9vcmcvZWNsaXBzZS9kYXRhdG9vbHMvY29ubmVjdGl2aXR5L3VpL1Byb2ZpbGVJbWFnZVJl
Z2lzdHJ5LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kYXRhdG9vbHMvb3Jn
LmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS9wbHVnaW5zL29yZy5lY2xpcHNlLmRhdGF0
b29scy5jb25uZWN0aXZpdHkudWkvc3JjL29yZy9lY2xpcHNlL2RhdGF0b29scy9jb25uZWN0aXZp
dHkvdWkvUHJvZmlsZUltYWdlUmVnaXN0cnkuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEu
Mg0KZGlmZiAtdSAtcjEuMiBQcm9maWxlSW1hZ2VSZWdpc3RyeS5qYXZhDQotLS0gc3JjL29yZy9l
Y2xpcHNlL2RhdGF0b29scy9jb25uZWN0aXZpdHkvdWkvUHJvZmlsZUltYWdlUmVnaXN0cnkuamF2
YQkyNiBGZWIgMjAwNyAxOTozNjowOCAtMDAwMAkxLjINCisrKyBzcmMvb3JnL2VjbGlwc2UvZGF0
YXRvb2xzL2Nvbm5lY3Rpdml0eS91aS9Qcm9maWxlSW1hZ2VSZWdpc3RyeS5qYXZhCTIyIEphbiAy
MDA4IDEzOjI1OjExIC0wMDAwDQpAQCAtMTQsNiArMTQsNyBAQA0KIA0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LklDb25uZWN0aW9uUHJvZmlsZVByb3ZpZGVyOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LmludGVybmFsLnVpLkNv
bm5lY3Rpdml0eVVJUGx1Z2luOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVj
dGl2aXR5LmludGVybmFsLnVpLlByb2ZpbGVJbWFnZURlc2NyaXB0b3I7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpmYWNlLnJlc291cmNlLkltYWdlRGVzY3JpcHRvcjsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuamZhY2UucmVzb3VyY2UuSW1hZ2VSZWdpc3RyeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0
LmdyYXBoaWNzLkltYWdlOw0KQEAgLTM1LDEyICszNiwyNSBAQA0KIAlwdWJsaWMgSW1hZ2UgZ2V0
UHJvZmlsZUltYWdlKElDb25uZWN0aW9uUHJvZmlsZVByb3ZpZGVyIHByb3ZpZGVyKSB7DQogCQlJ
bWFnZSBpbWFnZSA9IG1JbWFnZVJlZ2lzdHJ5LmdldChwcm92aWRlci5nZXRJZCgpKTsNCiAJCWlm
IChpbWFnZSA9PSBudWxsKSB7DQotCQkJVVJMIGljb25VUkwgPSBwcm92aWRlci5nZXRJY29uVVJM
KCk7DQotCQkJaWYgKGljb25VUkwgIT0gbnVsbCkgew0KLQkJCQlJbWFnZURlc2NyaXB0b3IgaW1h
Z2VEZXNjID0gSW1hZ2VEZXNjcmlwdG9yDQotCQkJCQkJLmNyZWF0ZUZyb21VUkwoaWNvblVSTCk7
DQotCQkJCW1JbWFnZVJlZ2lzdHJ5LnB1dChwcm92aWRlci5nZXRJZCgpLCBpbWFnZURlc2MpOw0K
LQkJCQlpbWFnZSA9IG1JbWFnZVJlZ2lzdHJ5LmdldChwcm92aWRlci5nZXRJZCgpKTsNCisJCQlQ
cm9maWxlSW1hZ2VEZXNjcmlwdG9yIHBpZHNbXSA9DQorCQkJCVByb2ZpbGVJbWFnZURlc2NyaXB0
b3IuZ2V0UHJvZmlsZUltYWdlRGVzY3JpcHRvcnNGb3JQcm9maWxlSUQocHJvdmlkZXIuZ2V0SWQo
KSk7DQorCQkJaWYgKHBpZHMgIT0gbnVsbCAmJiBwaWRzLmxlbmd0aCA+IDApIHsNCisJCQkJVVJM
IGljb25VUkwgPSBwaWRzWzBdLmdldEljb25VUkwoKTsNCisJCQkJaWYgKGljb25VUkwgIT0gbnVs
bCkgew0KKwkJCQkJSW1hZ2VEZXNjcmlwdG9yIGltYWdlRGVzYyA9IEltYWdlRGVzY3JpcHRvcg0K
KwkJCQkJCQkuY3JlYXRlRnJvbVVSTChpY29uVVJMKTsNCisJCQkJCW1JbWFnZVJlZ2lzdHJ5LnB1
dChwcm92aWRlci5nZXRJZCgpLCBpbWFnZURlc2MpOw0KKwkJCQkJaW1hZ2UgPSBtSW1hZ2VSZWdp
c3RyeS5nZXQocHJvdmlkZXIuZ2V0SWQoKSk7DQorCQkJCX0NCisJCQl9DQorCQkJZWxzZSB7DQor
CQkJCVVSTCBpY29uVVJMID0gcHJvdmlkZXIuZ2V0SWNvblVSTCgpOw0KKwkJCQlpZiAoaWNvblVS
TCAhPSBudWxsKSB7DQorCQkJCQlJbWFnZURlc2NyaXB0b3IgaW1hZ2VEZXNjID0gSW1hZ2VEZXNj
cmlwdG9yDQorCQkJCQkJCS5jcmVhdGVGcm9tVVJMKGljb25VUkwpOw0KKwkJCQkJbUltYWdlUmVn
aXN0cnkucHV0KHByb3ZpZGVyLmdldElkKCksIGltYWdlRGVzYyk7DQorCQkJCQlpbWFnZSA9IG1J
bWFnZVJlZ2lzdHJ5LmdldChwcm92aWRlci5nZXRJZCgpKTsNCisJCQkJfQ0KIAkJCX0NCiAJCQlp
ZiAoaW1hZ2UgPT0gbnVsbCkgew0KIAkJCQlpbWFnZSA9IG1JbWFnZVJlZ2lzdHJ5LmdldChJTUdf
T0JKX1NFUlZFUl9ERUZBVUxUKTsNCkluZGV4OiBwbHVnaW4ueG1sDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1Mg
ZmlsZTogL2N2c3Jvb3QvZGF0YXRvb2xzL29yZy5lY2xpcHNlLmRhdGF0b29scy5jb25uZWN0aXZp
dHkvcGx1Z2lucy9vcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnVpL3BsdWdpbi54
bWwsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjE0DQpkaWZmIC11IC1yMS4xNCBwbHVnaW4ueG1s
DQotLS0gcGx1Z2luLnhtbAkxNSBKYW4gMjAwOCAxNjo0NzowNyAtMDAwMAkxLjE0DQorKysgcGx1
Z2luLnhtbAkyMiBKYW4gMjAwOCAxMzoyNToxMSAtMDAwMA0KQEAgLTMsNiArMyw3IEBADQogPHBs
dWdpbj4NCiAgICA8ZXh0ZW5zaW9uLXBvaW50IGlkPSJkcml2ZXJQcm9wZXJ0eUVkaXRvciIgbmFt
ZT0iRHJpdmVyIFByb3BlcnR5IEVkaXRvciIgc2NoZW1hPSJzY2hlbWEvZHJpdmVyUHJvcGVydHlF
ZGl0b3IuZXhzZCIvPg0KICAgIDxleHRlbnNpb24tcG9pbnQgaWQ9ImRyaXZlclVJQ29udHJpYnV0
b3IiIG5hbWU9IkRyaXZlciBVSSBDb250cmlidXRvciIgc2NoZW1hPSJzY2hlbWEvZHJpdmVyVUlD
b250cmlidXRvci5leHNkIi8+DQorICAgPGV4dGVuc2lvbi1wb2ludCBpZD0iY29ubmVjdGlvblBy
b2ZpbGVJbWFnZSIgbmFtZT0iQ29ubmVjdGlvbiBQcm9maWxlIEltYWdlIiBzY2hlbWE9InNjaGVt
YS9jb25uZWN0aW9uUHJvZmlsZUltYWdlLmV4c2QiLz4NCiAgICA8ZXh0ZW5zaW9uIHBvaW50PSJv
cmcuZWNsaXBzZS51aS5wcmVmZXJlbmNlUGFnZXMiPg0KICAgIAk8cGFnZSBuYW1lPSIlZGF0YXRv
b2xzLnByZWZlcmVuY2UucGFnZS5uYW1lIiBjbGFzcz0ib3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNv
bm5lY3Rpdml0eS5pbnRlcm5hbC51aS5wcmVmZXJlbmNlcy5EYXRhVG9vbHNNYWluUGFnZSINCiAg
ICAJaWQgPSAib3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5pbnRlcm5hbC51aS5w
cmVmZXJlbmNlcy5EYXRhVG9vbHNNYWluUGFnZSIvPg0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9k
YXRhdG9vbHMvY29ubmVjdGl2aXR5L2ludGVybmFsL3VpL1Byb2ZpbGVJbWFnZVNhZmVSdW5uYWJs
ZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2RhdGF0b29scy9j
b25uZWN0aXZpdHkvaW50ZXJuYWwvdWkvUHJvZmlsZUltYWdlU2FmZVJ1bm5hYmxlLmphdmENCmRp
ZmYgLU4gc3JjL29yZy9lY2xpcHNlL2RhdGF0b29scy9jb25uZWN0aXZpdHkvaW50ZXJuYWwvdWkv
UHJvZmlsZUltYWdlU2FmZVJ1bm5hYmxlLmphdmENCi0tLSAvZGV2L251bGwJMSBKYW4gMTk3MCAw
MDowMDowMCAtMDAwMA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kYXRhdG9vbHMvY29ubmVjdGl2aXR5
L2ludGVybmFsL3VpL1Byb2ZpbGVJbWFnZVNhZmVSdW5uYWJsZS5qYXZhCTEgSmFuIDE5NzAgMDA6
MDA6MDAgLTAwMDANCkBAIC0wLDAgKzEsMjYgQEANCitwYWNrYWdlIG9yZy5lY2xpcHNlLmRhdGF0
b29scy5jb25uZWN0aXZpdHkuaW50ZXJuYWwudWk7DQorDQoraW1wb3J0IG9yZy5lY2xpcHNlLmNv
cmUucnVudGltZS5JQ29uZmlndXJhdGlvbkVsZW1lbnQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNv
cmUucnVudGltZS5JU2FmZVJ1bm5hYmxlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kYXRhdG9vbHMu
Y29ubmVjdGl2aXR5LmludGVybmFsLkNvbm5lY3Rpdml0eVBsdWdpbjsNCisNCitwdWJsaWMgY2xh
c3MgUHJvZmlsZUltYWdlU2FmZVJ1bm5hYmxlIGltcGxlbWVudHMgSVNhZmVSdW5uYWJsZSB7DQor
DQorCXByaXZhdGUgUHJvZmlsZUltYWdlRGVzY3JpcHRvcltdIG1JbnN0YW5jZXMgPSBudWxsOw0K
Kwlwcml2YXRlIElDb25maWd1cmF0aW9uRWxlbWVudCBtRWxlbWVudCA9IG51bGw7DQorCQ0KKwlw
dWJsaWMgUHJvZmlsZUltYWdlU2FmZVJ1bm5hYmxlICggUHJvZmlsZUltYWdlRGVzY3JpcHRvcltd
IGluc3RhbmNlLCBJQ29uZmlndXJhdGlvbkVsZW1lbnQgZWxlbWVudCApIHsNCisJCXRoaXMubUlu
c3RhbmNlcyA9IGluc3RhbmNlOw0KKwkJdGhpcy5tRWxlbWVudCA9IGVsZW1lbnQ7DQorCX0NCisJ
DQorCXB1YmxpYyB2b2lkIGhhbmRsZUV4Y2VwdGlvbihUaHJvd2FibGUgZXhjZXB0aW9uKSB7DQor
CQlDb25uZWN0aXZpdHlQbHVnaW4uZ2V0RGVmYXVsdCgpLmxvZyhleGNlcHRpb24pOw0KKwl9DQor
DQorCXB1YmxpYyB2b2lkIHJ1bigpIHRocm93cyBFeGNlcHRpb24gew0KKwkJaWYgKHRoaXMubUlu
c3RhbmNlcyAhPSBudWxsKQ0KKwkJCXRoaXMubUluc3RhbmNlc1swXSA9IG5ldyBQcm9maWxlSW1h
Z2VEZXNjcmlwdG9yKHRoaXMubUVsZW1lbnQpOw0KKwl9DQorDQorfQ0KSW5kZXg6IHNyYy9vcmcv
ZWNsaXBzZS9kYXRhdG9vbHMvY29ubmVjdGl2aXR5L2ludGVybmFsL3VpL1Byb2ZpbGVJbWFnZURl
c2NyaXB0b3IuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHNyYy9vcmcvZWNsaXBzZS9kYXRh
dG9vbHMvY29ubmVjdGl2aXR5L2ludGVybmFsL3VpL1Byb2ZpbGVJbWFnZURlc2NyaXB0b3IuamF2
YQ0KZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGF0YXRvb2xzL2Nvbm5lY3Rpdml0eS9pbnRlcm5h
bC91aS9Qcm9maWxlSW1hZ2VEZXNjcmlwdG9yLmphdmENCi0tLSAvZGV2L251bGwJMSBKYW4gMTk3
MCAwMDowMDowMCAtMDAwMA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kYXRhdG9vbHMvY29ubmVjdGl2
aXR5L2ludGVybmFsL3VpL1Byb2ZpbGVJbWFnZURlc2NyaXB0b3IuamF2YQkxIEphbiAxOTcwIDAw
OjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDIwMyBAQA0KKy8qKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
DQorICogQ29weXJpZ2h0IChjKSAyMDA0LTIwMDcgU3liYXNlLCBJbmMuDQorICogDQorICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscyBhcmUgbWFkZQ0KKyAqIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlw
c2UgUHVibGljIExpY2Vuc2UgdjEuMCB3aGljaA0KKyAqIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJp
YnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0DQorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9s
ZWdhbC9lcGwtdjEwLmh0bWwNCisgKiANCisgKiBDb250cmlidXRvcnM6IGJyaWFuZiAtIGluaXRp
YWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbg0KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQorcGFj
a2FnZSBvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LmludGVybmFsLnVpOw0KKw0K
K2ltcG9ydCBqYXZhLm5ldC5NYWxmb3JtZWRVUkxFeGNlcHRpb247DQoraW1wb3J0IGphdmEubmV0
LlVSTDsNCitpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsNCitpbXBvcnQgamF2YS51dGlsLkhh
c2hNYXA7DQoraW1wb3J0IGphdmEudXRpbC5MaXN0Ow0KK2ltcG9ydCBqYXZhLnV0aWwuTWFwOw0K
Kw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUuQXNzZXJ0Ow0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5jb3JlLnJ1bnRpbWUuSUNvbmZpZ3VyYXRpb25FbGVtZW50Ow0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5jb3JlLnJ1bnRpbWUuSUV4dGVuc2lvblJlZ2lzdHJ5Ow0KK2ltcG9ydCBvcmcuZWNs
aXBzZS5jb3JlLnJ1bnRpbWUuUGxhdGZvcm07DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVu
dGltZS5TYWZlUnVubmVyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2
aXR5LmRyaXZlcnMubW9kZWxzLkNhdGVnb3J5RGVzY3JpcHRvcjsNCitpbXBvcnQgb3JnLmVjbGlw
c2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5kcml2ZXJzLm1vZGVscy5NeVNhZmVSdW5uYWJsZTsN
CitpbXBvcnQgb3JnLmVjbGlwc2UuZGF0YXRvb2xzLmNvbm5lY3Rpdml0eS5pbnRlcm5hbC51aS5D
b25uZWN0aXZpdHlVSVBsdWdpbjsNCisNCitpbXBvcnQgY29tLmlibS5pY3UudGV4dC5Db2xsYXRv
cjsNCisNCisvKioNCisgKiBSZXByZXNlbnRzIGEgd2F5IHRvIHNwZWNpZnkgYSBwcm9maWxlIGlt
YWdlIGRlc2NyaXB0b3Igd2hpY2ggaXMgcHJvdmlkZWQgYnkgdGhlDQorICogIm9yZy5lY2xpcHNl
LmRhdGF0b29scy5jb25uZWN0aXZpdHkudWkuY29ubmVjdGlvblByb2ZpbGVJbWFnZSIgZXh0ZW5z
aW9uIHBvaW50Lg0KKyAqIA0KKyAqIEBhdXRob3IgYnJpYW5mDQorICovDQorcHVibGljIGNsYXNz
IFByb2ZpbGVJbWFnZURlc2NyaXB0b3IgaW1wbGVtZW50cyBDb21wYXJhYmxlIHsNCisNCisJLy8g
ZXh0ZW5zaW9uIGRldGFpbHMNCisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJPRklMRV9J
TUFHRV9UQUcgPSAicHJvZmlsZUltYWdlIjsvLyROT04tTkxTLTEkDQorCXByaXZhdGUgc3RhdGlj
IGZpbmFsIFN0cmluZyBFWFRFTlNJT05fUE9JTlRfTkFNRSA9ICJjb25uZWN0aW9uUHJvZmlsZUlt
YWdlIjsgLy8kTk9OLU5MUy0xJA0KKw0KKwkvLyBhdHRyaWJ1dGVzDQorCXB1YmxpYyBzdGF0aWMg
ZmluYWwgU3RyaW5nIEFUVFJfSUQgPSAicHJvZmlsZUlEIjsgLy8kTk9OLU5MUy0xJA0KKwlwdWJs
aWMgc3RhdGljIGZpbmFsIFN0cmluZyBBVFRSX0lDT04gPSAiaWNvbiI7IC8vJE5PTi1OTFMtMSQN
CisNCisJcHJpdmF0ZSBVUkwgbUljb25VUkw7DQorDQorCXByaXZhdGUgc3RhdGljIGZpbmFsIFBy
b2ZpbGVJbWFnZURlc2NyaXB0b3JbXSBFTVBUWSA9IHt9Ow0KKw0KKwkvLyBsb2NhbCBsaXN0IG9m
IGRyaXZlciB0ZW1wbGF0ZXMNCisJcHJpdmF0ZSBzdGF0aWMgTWFwIGZnUHJvZmlsZUltYWdlRGVz
Y3JpcHRvcnM7DQorDQorCS8vIGxvY2FsIGNvcHkgb2YgY29uZmlndXJhdGlvbiBlbGVtZW50DQor
CXByaXZhdGUgSUNvbmZpZ3VyYXRpb25FbGVtZW50IGZFbGVtZW50Ow0KKwkNCisJLyoqDQorCSAq
IENyZWF0ZXMgYSBuZXcgZHJpdmVyIHByb3BlcnR5IGVkaXRvciB0ZW1wbGF0ZSBkZXNjcmlwdG9y
IGZvciB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbg0KKwkgKiBlbGVtZW50Lg0KKwkgKi8NCisJcHJv
dGVjdGVkIFByb2ZpbGVJbWFnZURlc2NyaXB0b3IoSUNvbmZpZ3VyYXRpb25FbGVtZW50IGVsZW1l
bnQpIHsNCisJCXRoaXMuZkVsZW1lbnQgPSBlbGVtZW50Ow0KKw0KKwkJLyoNCisJCSAqICJBbiBl
eHRlbnNpb24gZm9yIGV4dGVuc2lvbi1wb2ludA0KKwkJICogb3JnLmVjbGlwc2UuZGF0YXRvb2xz
LmNvbm5lY3Rpdml0eS51aS5jb25uZWN0aW9uUHJvZmlsZUltYWdlIGRvZXMgbm90IHByb3ZpZGUg
YQ0KKwkJICogdmFsaWQgSUQiKTsNCisJCSAqLw0KKwkJQXNzZXJ0LmlzTm90TnVsbChnZXRJZCgp
LCANCisJCQkJIlRoZSB0YXJnZXQgY29ubmVjdGlvbiBwcm9maWxlIElEIGZvciB0aGUgcHJvZmls
ZSBpbWFnZSBleHRlbnNpb24gY2Fubm90IGJlIG51bGwuIik7DQorCQlBc3NlcnQuaXNOb3ROdWxs
KGdldEljb24oKSwgDQorCQkJIlRoZSBpY29uIGZvciB0aGUgcHJvZmlsZSBpbWFnZSBleHRlbnNp
b24gY2Fubm90IGJlIG51bGwuIik7DQorCX0NCisNCisJLyoqDQorCSAqIFJldHVybnMgYWxsIGNv
bnRyaWJ1dGVkIGRyaXZlciBwcm9wZXJ0eSBlZGl0b3IgZGVzY3JpcHRvcnMuDQorCSAqLw0KKwlw
dWJsaWMgc3RhdGljIFByb2ZpbGVJbWFnZURlc2NyaXB0b3JbXSBnZXRQcm9maWxlSW1hZ2VEZXNj
cmlwdG9ycygpIHsNCisJCWlmIChmZ1Byb2ZpbGVJbWFnZURlc2NyaXB0b3JzID09IG51bGwpIHsN
CisJCQlJRXh0ZW5zaW9uUmVnaXN0cnkgcmVnaXN0cnkgPSBQbGF0Zm9ybS5nZXRFeHRlbnNpb25S
ZWdpc3RyeSgpOw0KKwkJCUlDb25maWd1cmF0aW9uRWxlbWVudFtdIGVsZW1lbnRzID0gcmVnaXN0
cnkNCisJCQkJCS5nZXRDb25maWd1cmF0aW9uRWxlbWVudHNGb3IoQ29ubmVjdGl2aXR5VUlQbHVn
aW4NCisJCQkJCQkJLmdldERlZmF1bHQoKS5nZXRCdW5kbGUoKS5nZXRTeW1ib2xpY05hbWUoKSwN
CisJCQkJCQkJRVhURU5TSU9OX1BPSU5UX05BTUUpOw0KKwkJCWNyZWF0ZVByb2ZpbGVJbWFnZURl
c2NyaXB0b3JzKGVsZW1lbnRzKTsNCisJCX0NCisJCWlmIChmZ1Byb2ZpbGVJbWFnZURlc2NyaXB0
b3JzLnNpemUoKSA+IDApDQorCQkJcmV0dXJuIChQcm9maWxlSW1hZ2VEZXNjcmlwdG9yW10pIGZn
UHJvZmlsZUltYWdlRGVzY3JpcHRvcnMudmFsdWVzKCkudG9BcnJheShuZXcgUHJvZmlsZUltYWdl
RGVzY3JpcHRvcltmZ1Byb2ZpbGVJbWFnZURlc2NyaXB0b3JzLnNpemUoKV0pOw0KKwkJZWxzZQ0K
KwkJCXJldHVybiBFTVBUWTsNCisJfQ0KKwkNCisJcHVibGljIHN0YXRpYyBQcm9maWxlSW1hZ2VE
ZXNjcmlwdG9yW10gZ2V0UHJvZmlsZUltYWdlRGVzY3JpcHRvcnNGb3JQcm9maWxlSUQgKCBTdHJp
bmcgcHJvZmlsZUlEICkgew0KKwkJUHJvZmlsZUltYWdlRGVzY3JpcHRvcltdIGRlc2NyaXB0b3Jz
ID0gZ2V0UHJvZmlsZUltYWdlRGVzY3JpcHRvcnMoKTsNCisJCWlmIChkZXNjcmlwdG9ycyAhPSBu
dWxsICYmIGRlc2NyaXB0b3JzLmxlbmd0aCA+IDApIHsNCisJCQlBcnJheUxpc3QgcmVzdWx0ID0g
bmV3IEFycmF5TGlzdCgpOw0KKwkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGVzY3JpcHRvcnMubGVu
Z3RoOyBpKyspIHsNCisJCQkJaWYgKGRlc2NyaXB0b3JzW2ldLmdldElkKCkuZXF1YWxzKHByb2Zp
bGVJRCkpIHsNCisJCQkJCXJlc3VsdC5hZGQoZGVzY3JpcHRvcnNbaV0pOw0KKwkJCQl9DQorCQkJ
fQ0KKwkJCXJldHVybiAoUHJvZmlsZUltYWdlRGVzY3JpcHRvcltdKSByZXN1bHQudG9BcnJheShu
ZXcgUHJvZmlsZUltYWdlRGVzY3JpcHRvcltyZXN1bHQuc2l6ZSgpXSk7DQorCQl9DQorCQlyZXR1
cm4gRU1QVFk7DQorCX0NCisNCisJLyoqDQorCSAqIFJldHVybnMgdGhlIHByb3BlcnR5IGVkaXRv
ciBpZC4NCisJICovDQorCXB1YmxpYyBTdHJpbmcgZ2V0SWQoKSB7DQorCQlyZXR1cm4gdGhpcy5m
RWxlbWVudC5nZXRBdHRyaWJ1dGUoQVRUUl9JRCk7DQorCX0NCisNCisJLyoqDQorCSAqIFJldHVy
bnMgdGhlIHRhcmdldCBwcm9wZXJ0eSBpZA0KKwkgKi8NCisJcHVibGljIFN0cmluZyBnZXRJY29u
KCkgew0KKwkJcmV0dXJuIHRoaXMuZkVsZW1lbnQuZ2V0QXR0cmlidXRlKEFUVFJfSUNPTik7DQor
CX0NCisNCisJLyoqDQorCSAqIFJldHVybnMgdGhlIGNvbmZpZ3VyYXRpb24gZWxlbWVudC4NCisJ
ICovDQorCXB1YmxpYyBJQ29uZmlndXJhdGlvbkVsZW1lbnQgZ2V0RWxlbWVudCgpIHsNCisJCXJl
dHVybiB0aGlzLmZFbGVtZW50Ow0KKwl9DQorDQorCS8qDQorCSAqIEltcGxlbWVudHMgYSBtZXRo
b2QgZnJvbSBJQ29tcGFyYWJsZQ0KKwkgKi8NCisJcHVibGljIGludCBjb21wYXJlVG8oT2JqZWN0
IG8pIHsNCisJCWlmIChvIGluc3RhbmNlb2YgUHJvZmlsZUltYWdlRGVzY3JpcHRvcikNCisJCQly
ZXR1cm4gQ29sbGF0b3IuZ2V0SW5zdGFuY2UoKS5jb21wYXJlKGdldElkKCksDQorCQkJCQkoKFBy
b2ZpbGVJbWFnZURlc2NyaXB0b3IpIG8pLmdldElkKCkpOw0KKwkJcmV0dXJuIEludGVnZXIuTUlO
X1ZBTFVFOw0KKwl9DQorDQorCS8qKg0KKwkgKiBDcmVhdGVzIHRoZSBwcm9maWxlIGltYWdlIGRl
c2NyaXB0b3JzLg0KKwkgKi8NCisJcHJpdmF0ZSBzdGF0aWMgdm9pZCBjcmVhdGVQcm9maWxlSW1h
Z2VEZXNjcmlwdG9ycygNCisJCQlJQ29uZmlndXJhdGlvbkVsZW1lbnRbXSBlbGVtZW50cykgew0K
KwkJZmdQcm9maWxlSW1hZ2VEZXNjcmlwdG9ycyA9IG5ldyBIYXNoTWFwKCk7DQorCQkNCisJCWZv
ciAoaW50IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyArK2kpIHsNCisJCQlmaW5hbCBJQ29u
ZmlndXJhdGlvbkVsZW1lbnQgZWxlbWVudCA9IGVsZW1lbnRzW2ldOw0KKwkJCWlmIChQUk9GSUxF
X0lNQUdFX1RBRy5lcXVhbHMoZWxlbWVudC5nZXROYW1lKCkpKSB7DQorDQorCQkJCWZpbmFsIFBy
b2ZpbGVJbWFnZURlc2NyaXB0b3JbXSBkZXNjID0gbmV3IFByb2ZpbGVJbWFnZURlc2NyaXB0b3Jb
MV07DQorCQkJCVNhZmVSdW5uZXINCisJCQkJCS5ydW4obmV3IFByb2ZpbGVJbWFnZVNhZmVSdW5u
YWJsZSAoIGRlc2MsIGVsZW1lbnQpKTsNCisNCisJCQkJaWYgKGRlc2MgIT0gbnVsbCkgew0KKwkJ
CQkJZmdQcm9maWxlSW1hZ2VEZXNjcmlwdG9ycy5wdXQoZGVzY1swXS5nZXRJZCgpLCBkZXNjWzBd
KTsNCisJCQkJfQ0KKwkJCX0NCisJCX0NCisJfQ0KKwkNCisJLyogKG5vbi1KYXZhZG9jKQ0KKwkg
KiBAc2VlIGphdmEubGFuZy5PYmplY3QjZXF1YWxzKGphdmEubGFuZy5PYmplY3QpDQorCSAqLw0K
KwlwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG9iaikgew0KKwkJaWYgKG9iaiBpbnN0YW5j
ZW9mIFByb2ZpbGVJbWFnZURlc2NyaXB0b3IpIHsNCisJCQlQcm9maWxlSW1hZ2VEZXNjcmlwdG9y
IGNvbXBhcmUgPSAoUHJvZmlsZUltYWdlRGVzY3JpcHRvcikgb2JqOw0KKwkJCXJldHVybiB0aGlz
LmdldElkKCkuZXF1YWxzKGNvbXBhcmUuZ2V0SWQoKSk7DQorCQl9DQorCQlyZXR1cm4gc3VwZXIu
ZXF1YWxzKG9iaik7DQorCX0NCisNCisJLyogKG5vbi1KYXZhZG9jKQ0KKwkgKiBAc2VlIGphdmEu
bGFuZy5PYmplY3QjaGFzaENvZGUoKQ0KKwkgKi8NCisJcHVibGljIGludCBoYXNoQ29kZSgpIHsN
CisJCWlmICh0aGlzLmdldElkKCkgIT0gbnVsbCkNCisJCQlyZXR1cm4gdGhpcy5nZXRJZCgpLmhh
c2hDb2RlKCk7DQorCQlyZXR1cm4gc3VwZXIuaGFzaENvZGUoKTsNCisJfQ0KKw0KKwlwcml2YXRl
IHZvaWQgcHJvY2Vzc0ljb25BdHRyKCkgew0KKwkJU3RyaW5nIGljb25BdHRyID0gZkVsZW1lbnQg
PT0gbnVsbCA/IG51bGwgOiBmRWxlbWVudA0KKwkJCQkuZ2V0QXR0cmlidXRlKEFUVFJfSUNPTik7
DQorCQlpZiAoaWNvbkF0dHIgIT0gbnVsbCAmJiBpY29uQXR0ci50cmltKCkubGVuZ3RoKCkgPiAw
KSB7DQorCQkJaWYgKGljb25BdHRyLnN0YXJ0c1dpdGgoInBsYXRmb3JtOi8iKSl7DQorCQkJCXRy
eSB7DQorCQkJCQltSWNvblVSTCA9IG5ldyBVUkwoaWNvbkF0dHIpOw0KKwkJCQl9IGNhdGNoIChN
YWxmb3JtZWRVUkxFeGNlcHRpb24gZSkgew0KKwkJCQkJLy8gRG8gbm90aGluZw0KKwkJCQl9DQor
CQkJfSBlbHNlIHsNCisJCQkJbUljb25VUkwgPSBQbGF0Zm9ybS5nZXRCdW5kbGUoZkVsZW1lbnQu
Z2V0Q29udHJpYnV0b3IoKS5nZXROYW1lKCkpDQorCQkJCQkJLmdldEVudHJ5KGljb25BdHRyKTsN
CisJCQl9DQorCQl9DQorCX0NCisNCisJcHVibGljIFVSTCBnZXRJY29uVVJMKCkgew0KKwkJaWYg
KG1JY29uVVJMID09IG51bGwpIHsNCisJCQlwcm9jZXNzSWNvbkF0dHIoKTsNCisJCX0NCisJCXJl
dHVybiBtSWNvblVSTDsNCisJfQ0KK30NCkluZGV4OiBzY2hlbWEvY29ubmVjdGlvblByb2ZpbGVJ
bWFnZS5leHNkDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogc2NoZW1hL2Nvbm5lY3Rpb25Qcm9maWxl
SW1hZ2UuZXhzZA0KZGlmZiAtTiBzY2hlbWEvY29ubmVjdGlvblByb2ZpbGVJbWFnZS5leHNkDQot
LS0gL2Rldi9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzY2hlbWEvY29ubmVj
dGlvblByb2ZpbGVJbWFnZS5leHNkCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCkBAIC0wLDAg
KzEsMTA5IEBADQorPD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4NCis8IS0t
IFNjaGVtYSBmaWxlIHdyaXR0ZW4gYnkgUERFIC0tPg0KKzxzY2hlbWEgdGFyZ2V0TmFtZXNwYWNl
PSJvcmcuZWNsaXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnVpIj4NCis8YW5ub3RhdGlvbj4N
CisgICAgICA8YXBwSW5mbz4NCisgICAgICAgICA8bWV0YS5zY2hlbWEgcGx1Z2luPSJvcmcuZWNs
aXBzZS5kYXRhdG9vbHMuY29ubmVjdGl2aXR5LnVpIiBpZD0iY29ubmVjdGlvblByb2ZpbGVJbWFn
ZSIgbmFtZT0iQ29ubmVjdGlvbiBQcm9maWxlIEltYWdlIi8+DQorICAgICAgPC9hcHBJbmZvPg0K
KyAgICAgIDxkb2N1bWVudGF0aW9uPg0KKyAgICAgICAgIFRoZSBDb25uZWN0aW9uIFByb2ZpbGUg
SW1hZ2UgZXh0ZW5zaW9uIHBvaW50IGFsbG93cyBhZG9wdGVycyB0byBzcGxpdCBvdXQgaWNvbnMg
ZnJvbSB0aGVpciBtYWluIGNvbm5lY3Rpb24gcHJvZmlsZSBleHRlbnNpb24gaW50byBhIHNlcGFy
YXRlIHBsdWctaW4gZm9yIFVJIGNvZGUgYW5kIHJlc291cmNlcy4gDQorICAgICAgPC9kb2N1bWVu
dGF0aW9uPg0KKyAgIDwvYW5ub3RhdGlvbj4NCisNCisgICA8ZWxlbWVudCBuYW1lPSJleHRlbnNp
b24iPg0KKyAgICAgIDxjb21wbGV4VHlwZT4NCisgICAgICAgICA8c2VxdWVuY2UgbWluT2NjdXJz
PSIxIiBtYXhPY2N1cnM9InVuYm91bmRlZCI+DQorICAgICAgICAgICAgPGVsZW1lbnQgcmVmPSJw
cm9maWxlSW1hZ2UiLz4NCisgICAgICAgICA8L3NlcXVlbmNlPg0KKyAgICAgICAgIDxhdHRyaWJ1
dGUgbmFtZT0icG9pbnQiIHR5cGU9InN0cmluZyIgdXNlPSJyZXF1aXJlZCI+DQorICAgICAgICAg
ICAgPGFubm90YXRpb24+DQorICAgICAgICAgICAgICAgPGRvY3VtZW50YXRpb24+DQorICAgICAg
ICAgICAgICAgICAgDQorICAgICAgICAgICAgICAgPC9kb2N1bWVudGF0aW9uPg0KKyAgICAgICAg
ICAgIDwvYW5ub3RhdGlvbj4NCisgICAgICAgICA8L2F0dHJpYnV0ZT4NCisgICAgICAgICA8YXR0
cmlidXRlIG5hbWU9ImlkIiB0eXBlPSJzdHJpbmciPg0KKyAgICAgICAgICAgIDxhbm5vdGF0aW9u
Pg0KKyAgICAgICAgICAgICAgIDxkb2N1bWVudGF0aW9uPg0KKyAgICAgICAgICAgICAgICAgIA0K
KyAgICAgICAgICAgICAgIDwvZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICAgICA8L2Fubm90YXRp
b24+DQorICAgICAgICAgPC9hdHRyaWJ1dGU+DQorICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPSJu
YW1lIiB0eXBlPSJzdHJpbmciPg0KKyAgICAgICAgICAgIDxhbm5vdGF0aW9uPg0KKyAgICAgICAg
ICAgICAgIDxkb2N1bWVudGF0aW9uPg0KKyAgICAgICAgICAgICAgICAgIA0KKyAgICAgICAgICAg
ICAgIDwvZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICAgICAgICA8YXBwSW5mbz4NCisgICAgICAg
ICAgICAgICAgICA8bWV0YS5hdHRyaWJ1dGUgdHJhbnNsYXRhYmxlPSJ0cnVlIi8+DQorICAgICAg
ICAgICAgICAgPC9hcHBJbmZvPg0KKyAgICAgICAgICAgIDwvYW5ub3RhdGlvbj4NCisgICAgICAg
ICA8L2F0dHJpYnV0ZT4NCisgICAgICA8L2NvbXBsZXhUeXBlPg0KKyAgIDwvZWxlbWVudD4NCisN
CisgICA8ZWxlbWVudCBuYW1lPSJwcm9maWxlSW1hZ2UiPg0KKyAgICAgIDxjb21wbGV4VHlwZT4N
CisgICAgICAgICA8YXR0cmlidXRlIG5hbWU9InByb2ZpbGVJRCIgdHlwZT0ic3RyaW5nIiB1c2U9
InJlcXVpcmVkIj4NCisgICAgICAgICAgICA8YW5ub3RhdGlvbj4NCisgICAgICAgICAgICAgICA8
ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICAgICAgICAgICANCisgICAgICAgICAgICAgICA8L2Rv
Y3VtZW50YXRpb24+DQorICAgICAgICAgICAgPC9hbm5vdGF0aW9uPg0KKyAgICAgICAgIDwvYXR0
cmlidXRlPg0KKyAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT0iaWNvbiIgdHlwZT0ic3RyaW5nIiB1
c2U9InJlcXVpcmVkIj4NCisgICAgICAgICAgICA8YW5ub3RhdGlvbj4NCisgICAgICAgICAgICAg
ICA8ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICAgICAgICAgICANCisgICAgICAgICAgICAgICA8
L2RvY3VtZW50YXRpb24+DQorICAgICAgICAgICAgPC9hbm5vdGF0aW9uPg0KKyAgICAgICAgIDwv
YXR0cmlidXRlPg0KKyAgICAgIDwvY29tcGxleFR5cGU+DQorICAgPC9lbGVtZW50Pg0KKw0KKyAg
IDxhbm5vdGF0aW9uPg0KKyAgICAgIDxhcHBJbmZvPg0KKyAgICAgICAgIDxtZXRhLnNlY3Rpb24g
dHlwZT0ic2luY2UiLz4NCisgICAgICA8L2FwcEluZm8+DQorICAgICAgPGRvY3VtZW50YXRpb24+
DQorICAgICAgICAgW0VudGVyIHRoZSBmaXJzdCByZWxlYXNlIGluIHdoaWNoIHRoaXMgZXh0ZW5z
aW9uIHBvaW50IGFwcGVhcnMuXQ0KKyAgICAgIDwvZG9jdW1lbnRhdGlvbj4NCisgICA8L2Fubm90
YXRpb24+DQorDQorICAgPGFubm90YXRpb24+DQorICAgICAgPGFwcEluZm8+DQorICAgICAgICAg
PG1ldGEuc2VjdGlvbiB0eXBlPSJleGFtcGxlcyIvPg0KKyAgICAgIDwvYXBwSW5mbz4NCisgICAg
ICA8ZG9jdW1lbnRhdGlvbj4NCisgICAgICAgICBbRW50ZXIgZXh0ZW5zaW9uIHBvaW50IHVzYWdl
IGV4YW1wbGUgaGVyZS5dDQorICAgICAgPC9kb2N1bWVudGF0aW9uPg0KKyAgIDwvYW5ub3RhdGlv
bj4NCisNCisgICA8YW5ub3RhdGlvbj4NCisgICAgICA8YXBwSW5mbz4NCisgICAgICAgICA8bWV0
YS5zZWN0aW9uIHR5cGU9ImFwaUluZm8iLz4NCisgICAgICA8L2FwcEluZm8+DQorICAgICAgPGRv
Y3VtZW50YXRpb24+DQorICAgICAgICAgW0VudGVyIEFQSSBpbmZvcm1hdGlvbiBoZXJlLl0NCisg
ICAgICA8L2RvY3VtZW50YXRpb24+DQorICAgPC9hbm5vdGF0aW9uPg0KKw0KKyAgIDxhbm5vdGF0
aW9uPg0KKyAgICAgIDxhcHBJbmZvPg0KKyAgICAgICAgIDxtZXRhLnNlY3Rpb24gdHlwZT0iaW1w
bGVtZW50YXRpb24iLz4NCisgICAgICA8L2FwcEluZm8+DQorICAgICAgPGRvY3VtZW50YXRpb24+
DQorICAgICAgICAgW0VudGVyIGluZm9ybWF0aW9uIGFib3V0IHN1cHBsaWVkIGltcGxlbWVudGF0
aW9uIG9mIHRoaXMgZXh0ZW5zaW9uIHBvaW50Ll0NCisgICAgICA8L2RvY3VtZW50YXRpb24+DQor
ICAgPC9hbm5vdGF0aW9uPg0KKw0KKyAgIDxhbm5vdGF0aW9uPg0KKyAgICAgIDxhcHBJbmZvPg0K
KyAgICAgICAgIDxtZXRhLnNlY3Rpb24gdHlwZT0iY29weXJpZ2h0Ii8+DQorICAgICAgPC9hcHBJ
bmZvPg0KKyAgICAgIDxkb2N1bWVudGF0aW9uPg0KKyAgICAgICAgIA0KKyAgICAgIDwvZG9jdW1l
bnRhdGlvbj4NCisgICA8L2Fubm90YXRpb24+DQorDQorPC9zY2hlbWE+DQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>