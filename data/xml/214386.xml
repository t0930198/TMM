<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214386</bug_id>
          
          <creation_ts>2008-01-04 14:40:00 -0500</creation_ts>
          <short_desc>[run control][debug view][source lookup] When stepping fast (holding down F5 key) the IP in editor does not keep up.</short_desc>
          <delta_ts>2014-01-29 20:46:24 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>4</classification_id>
          <classification>Tools</classification>
          <product>CDT</product>
          <component>cdt-debug-dsf</component>
          <version>0 DD 1.1</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>performance</keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>DD 1.1</target_milestone>
          
          <blocked>237559</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Pawel Piech">pawel.1.piech</reporter>
          <assigned_to name="Pawel Piech">pawel.1.piech</assigned_to>
          <cc>anton.leherbauer</cc>
    
    <cc>dd.general-inbox</cc>
    
    <cc>dschaefer</cc>
          
          <votes>0</votes>

      

      

      <flag name="iplog"
          id="18961"
          type_id="8"
          status="-"
          setter="dschaefer"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1125986</commentid>
    <comment_count>0</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-01-04 14:40:36 -0500</bug_when>
    <thetext>As a result it is hard to see what is going on in the debugger.  The view model framework should be co-ordinated enough to throttle the stepping speed so that the IP has time to update.

I&apos;ve thought about this problem over the holidays a little.  What we need to do to implement this is to move the logic that is in the StepQueueManager service into the view model.  Then we need to add logic to the view model to delay requesting data for stack and variables if there is a step command pending.  

Adding this infrastructure should also allow us to add other sophisticated update mode capabilities in the future, such as requesting that the IP in the registers view also be updated on every step, etc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1278109</commentid>
    <comment_count>1</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-06-25 14:27:48 -0400</bug_when>
    <thetext>There&apos;s actually two components to this bug:

1) Refactoring to DsfSourceDisplayAdapter

  DsfSourceDisplayAdapter was implemented somewhat in a hurry and it uses lots of flags and internal fields to synchronize the jobs for lookup up source and positioning the source.  It works, but it can use some refactoring to make the logic cleaner.  
  However, the real question is whether we really should be implementing ISourceDisplayAdapter.  ISourceDisplayAdapter is called by the SourceDisplayService, which is managed by SourceDisplayManager, both of which are fairly trivial and they simply react to the active debug selection in the window.  The problem is that this pattern has an inherent performance limitation: the source location cannot be updated until the stack frame is re-drawn in Debug view.  This is a huge penalty, which you can observe by comparing the source IP in the editor versus the one in the disassembly view.  
  The alternative to implementing ISourceDisplayAdapter would be to do duplicate the functionality of SourceDisplayService+SourceDisplayManager and also listen to DSF model events directly, (ISuspendedDMEvent) in particular, and repaint the IP in the editor before the Debug view completes its updates.  Another reason for doing this would be to allow better control over when the IP is painted and erased (e.g. see bug 225919).  The only down-side I know of is that we may have some trouble integrating with the standard platform actions: EditSourceLookupAction and LookupSourceAction.
  One more performance improvement to consider is that setting the selection in an editor is probably a lot more expensive than just painting the IP.  This is because changing selection in the window calls all kinds of selection listeners.  So it may be to our advantage to create some kind of artificial delay before the editor selection is made, just like in how the full stack refresh is delayed in debug view.  There could be some logistical issues with this though, for example if the IP was updated for a long time without positioning the editor, the IP could quickly move off screen and the user wouldn&apos;t see what he&apos;s stepping.


2) Controlling stepping speed to allow the UI to keep up.

  This is a much more far reaching aspect of this bug and it&apos;ll require some design.  The problem with the current UI implementation is that the debugger views all update completely independently of each other, and independently of the step queue manager.  Conceptually, what we need to do is to monitor the debugger views, Debug view and source display adapter in particular, and delay issuing the step command until these views have updated.  Unfortunately, we&apos;re currently missing some important APIs to be able to do this. 

  Without having a chance to prototype anything, I believe we need to do the following:
 a) Add an API to VM Providers and to source display adapter to be able to process a given DM event and call a request monitor, when the event processing is finished.
 b) Move the DM event listeners out of the VM providers and into a central place, probably the DM adapter.  This central event processing logic then will be responsible for ensuring that all the views have a chance to process the event before the next step command is issued.  
 c) Finally, I think the step queue manager implementation should be moved to the UI plugins.  This will allow closer integration with this central event processing facility, and somehow it just seems more logical.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1279379</commentid>
    <comment_count>2</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-06-27 05:30:18 -0400</bug_when>
    <thetext>(In reply to comment #1)
&gt; 1) Refactoring to DsfSourceDisplayAdapter

I am a bit confused by this. I don&apos;t think the source display is too slow.
It is true that the IP annotation is hardly visible when stepping fast, but the source display itself (revealing the line and positioning the cursor) is already faster than the eye can follow. The annotation painter seems to lag behind, but this is something we won&apos;t be able to influence by updating the annotation faster. 
Therefore I don&apos;t understand the need to make source display any faster.

&gt; 2) Controlling stepping speed to allow the UI to keep up.

Waiting for the UI to complete sounds like a contradiction to the asynchronous debugging model and performance tweaks.

I&apos;d suggest another (quite simple) approach.
How about introducing a preference for the minimum delay between steps. Of course this does not guarantee that every view has a chance to draw its pixels. On the other hand it leaves the decision to the user how fast he would like to step.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1279776</commentid>
    <comment_count>3</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-06-27 12:14:21 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; &gt; 1) Refactoring to DsfSourceDisplayAdapter
&gt; I am a bit confused by this....
Maybe my assumption is wrong, but I&apos;m pretty sure that in a fast-stepping scenario, the position-editor and show-IP jobs never get executed for many of the suspended events.  The end result is that the IP gets drawn only every once in a while, which doesn&apos;t look smooth.  It&apos;s always bothered me that the stepping appears so much smoother in the disassembly view than in the editor (in DFE), so I thought that it&apos;s our chance to close that gap.

&gt; &gt; 2) Controlling stepping speed to allow the UI to keep up.
&gt; 
&gt; Waiting for the UI to complete sounds like a contradiction to the asynchronous
&gt; debugging model and performance tweaks.
That&apos;s quite true :-)  Though the asynchronous debugging model architecture is a means to an end and not an end itself.  In this case, the asynchronous model actually makes it more difficult for us to achieve the ideal user experience, so the idea behind these changes is to put in some of the synchronous features on top of the asynchronous model in order to get the benefits of both.

&gt; 
&gt; I&apos;d suggest another (quite simple) approach...
We talked about this idea at the DFE team meeting 2 weeks ago (the one that was rescheduled and it was out of your time-zone).  Although, we talked about it in context of a &quot;force retrieve&quot; update policy for the variables views, which would allow those views to perform a full refresh of the visible or expanded variables before the next step is issued.  The conclusion of the discussion was that it would be good to have the &quot;delay between steps&quot; preference, but at the same time we need to be able to let the user step as fast as the hardware will allow while updating all the data on the screen that the user wants to see.  The user expectation for this comes from the older OCD debuggers, which were architected specifically to achieve this experience.

So I think putting in the step delay, is a very good first step and it may very well improve the stepping experience itself quite a bit.  But it seems that for the ideal user experience we will still need some mechanism for view update synchronization.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1280051</commentid>
    <comment_count>4</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-06-27 17:47:52 -0400</bug_when>
    <thetext>(In reply to comment #1)
&gt; 2) Controlling stepping speed to allow the UI to keep up.
&gt;  b) ... probably the &gt;DM&lt; adapter...
I meant the VM adapter.  Thank you Ted for pointing this out.

</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1281348</commentid>
    <comment_count>5</comment_count>
      <attachid>106217</attachid>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-01 06:47:42 -0400</bug_when>
    <thetext>Created attachment 106217
First draft

This patch tries to address the following issues:

- Make IP annotation better visible when stepping fast.
  It turned out that the annotation was removed almost faster than it was added.
  Now the old IP annotation gets removed immediately before the new one gets 
  added. This already improves the smoothness nicely.
  It is true that not every suspended event leads to a source display update, 
  because AbstractLaunchVMProvider.canSkipHandlingEvent() swallows &quot;outdated&quot; 
  events.
  
- Support minimum step interval.
  I enhanced the StepQueueManager to support a minimum interval between steps. 
  Currently it is only an instance variable that is not connected to a 
 preference.

- Add support for &quot;synchronized&quot; event handling.
  I moved parts of the generic event handling code to AbstractDMVMAdapter to 
  control the handling of events by VM providers. The handleEvent(Object) 
  method now receives a (Counting)RequestMonitor which is used to detect when 
  the event processing is complete.
  Two new methods in AbstractVMProvider:
    aboutToHandleEvent(Object)
    doneHandleEvent(Object)
  are used to indicate the start and end of handling a particular event.

- Synchronize stepping with view updates.
  The AbstractLaunchVMProvider uses the start/end indication to disable 
  stepping during the processing of an ISuspendedEvent. Enabling/disabling of 
  stepping is done in the StepQueueManager.

Issues
- The synchronization of event processing only covers the creation of the VM 
  delta, but subsequent update requests from the view will be processed 
  independently. I don&apos;t see a solution for that as there is no longer any 
  connection between a request and the originating event.
- The source display does not participate explicitely in the synchronization, 
  but I don&apos;t think it is necessary. The IP does not lag behind anyway.
- The minimum step interval and the option to synchronize stepping with updates 
  should be preferences and/or view properties.
- The patch breaks API. Of course this has to be cleaned out before committing.
- StepQueueManager can not easily be moved to UI code as it is used from non-UI 
  plug-ins (e.g. org.eclipse.dd.gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1281721</commentid>
    <comment_count>6</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-07-01 17:23:05 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; Created an attachment (id=106217) [details]
&gt; First draft

I played around with this patch for a couple of hours and I think it&apos;s a really exciting first draft :-)

&gt; - Make IP annotation better visible when stepping fast.
&gt;   ...

Yes, when stepping I also like to keep the IP painted until the next one is ready to paint, it looks much better.

It&apos;s not just the canSkipHandlingEvent() that prevents every IP from being painted.  The DsfSourceDisplayAdapter has its own mechanism to cancel a lookup or a display job that&apos;s in progress, if a new one is requested.  It&apos;s the completing of these jobs that I think we need to wait for before issuing another step.  

Also, I tried an experiment to see how much time the selectAndReveal() takes up:  I commented out this line and measured the step rate.  I got 30 steps/sec. with this line commented out, and 12 steps/sec when I left it in.... which suggests that processing this call takes more time than all other processing during fast stepping.  Wow!  In the end, I think we&apos;ll need to optimize this somehow to get optimial stepping performance.

&gt; - Support minimum step interval.
This is nice, simple and effective :-)

&gt; - Add support for &quot;synchronized&quot; event handling.
&gt; ...
This is good, but I think these methods make more sense in the AbstractVMAdapter.  Controlling stepping speed is not just responsibility of the launch VM provider, it really affects all the views.  I suppose the providers themselves could have their own aboutToHandle/doneHandle if they need it.
Also, something that I discussed with Ted wrt to the updates.  We think we need to separate the handleEvent() into two types: ones that need to processed before the next step, and ones that don&apos;t.  The ones that we need to wait for should be called first, and ones that don&apos;t should be called later to avoid having them compete for the back end.  So we&apos;d need to retain both handleEvent() method types: with request monitors, and without.  We&apos;d also need a waitForEvent(IDMEvent) method on the provider.  Unfortunately, this approach may mess up the event coalescing in the provider (canSkipEventHandling()), if it&apos;s not messed up already, so I think it would be safer to move this coalescing into VM adapter...  But all this is the last thing to worry about, and probably beyond the scope of this bug.

&gt; - Synchronize stepping with view updates.
&gt; ...
There is one major issue here.  eventDispatch() calls are prioritized based on whether a listener is a service and based on service startup order.  StepQueueManager is always going to receive the event before AbstractLaunchVMProvider.  There is a bug to add the ability to set an explicit priority for any listener (bug 169567), but I don&apos;t think that is the right answer here.  Instead, I think we should pull in the logic that&apos;s in StepQueueManager into the VM, then we can ensure that there is no race condition in handling of events, between the vm and the step queue.  

&gt; Issues
&gt; - The synchronization of event processing only covers the creation of the VM 
&gt;   delta...
I also talked about this with Ted, as it&apos;s a much bigger concern for the &quot;force update&quot; update policy.  We cannot guarantee that the view will refresh in time to show the new values, but we simulate data retrieval and force the vm cache to be populated as part of the event processing.  I believe this should be sufficient for the optimial user experience.  If it&apos;s not and we&apos;re finding that the views are still not always being updated, even from the cache, I&apos;ll investigate adding stuff to the deltas so that we&apos;d be able to populate the viewer with data as part of the event.

&gt; - The source display does not participate explicitely in the synchronization, 
&gt;   but I don&apos;t think it is necessary. The IP does not lag behind anyway.
I may sound obsessed about this, but I think we will need to do this.  But we should first discuss it in the meetings to see what others think.

&gt; - The patch breaks API...
If it would make it easier we could just duplicate AbstractVM... and create new versions of them.  But I hope this won&apos;t be necessary.

&gt; - StepQueueManager can not easily be moved to UI code...
I wasn&apos;t thinking of moving the manager service as is.  I&apos;ve had a lot of second thoughts about this piece of logic being a service in the first place, and this need to integrate it more tightly with the VM seems like a good reason to re-think that decision.  The service can be deprecated, and the references to it removed.


Like I said already, this is a great start.  I really think that spending the time on these details is what can will convince CDT users to try out DSF.  Eventually, it should also make our OCD field engineers happier as they seem to be obsessed with stepping.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1285046</commentid>
    <comment_count>7</comment_count>
      <attachid>106581</attachid>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-04 10:02:11 -0400</bug_when>
    <thetext>Created attachment 106581
Updated patch with preferences

This update contains the following changes compared to the previous patch:

- StepQueueManager is deprecated and replaced by &quot;SteppingController&quot; in the VM
  I have invested some effort to keep it bakcwards compatible, e.g. the TCF 
  implementation still uses the StepQeueeManager service, but I did not test if 
  it really works.
  The SteppingController is a model adapter, although it should actually be a 
  integral part of the debug session (the debugger does not work without it), 
  but that&apos;s basically the same with the StepQueueManager as a service.

- Added preferences for &quot;synchronized stepping&quot; and &quot;minimum step interval&quot;.
  Suggestions for better labels are welcome!

The step synchronization is still limited to the creation and firing of the VM delta, ie. all subsequent updates triggered by the delta (source display, view updates, etc.) still happen asynchronously.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1286719</commentid>
    <comment_count>8</comment_count>
      <attachid>106808</attachid>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-08 07:33:22 -0400</bug_when>
    <thetext>Created attachment 106808
Wait also for viewer updates

I have added support in AbstractVMAdapter to wait also for the viewer updates triggered by the VM deltas. Still this does not guarantee that every view is updated, because updates may happen in multiple iterations, but it is an improvement.

Additionally, I have prototyped the concept of a ISteppingControlParticipant which is intended to have multiple clients delaying the next step command until they have completed processing the previous step. E.g. this could be used by the source display adapter to report back when the editor is positioned and the annotation added.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1287746</commentid>
    <comment_count>9</comment_count>
      <attachid>106942</attachid>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-09 07:56:36 -0400</bug_when>
    <thetext>Created attachment 106942
Final patch

This is the polished version I intend to commit.
The source display adapter now uses the ISteppingControlParticipant mechanism to hold back the next step.
I added also a safeguard to enable stepping again after a maximum delay in case a stepping control participant fails to notify completion of a suspended event.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1291108</commentid>
    <comment_count>10</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-07-15 00:28:53 -0400</bug_when>
    <thetext>I started looking at the patch, and though  still have a long way to go I have one question.  How well does the monitoring of updates after an event work?  In my  prior discussions with Ted, we decided that we really had no way of knowing when the view was going to be finished with updating the view, so instead we were going to just ensure that the provider would populate its cache with the needed data and once that&apos;s done we would just assume that the view refresh was going to be fast enough.  But we haven&apos;t really tested that theory yet as we need to test his changes on top of your patch first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1291200</commentid>
    <comment_count>11</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-15 03:43:43 -0400</bug_when>
    <thetext>(In reply to comment #10)
&gt; I started looking at the patch, and though  still have a long way to go I have
&gt; one question.  How well does the monitoring of updates after an event work?  

E.g. for the variables view, it works well for the top level nodes. If a node is expanded, though, its update is not monitored and therefore may result in an error because the target is already stepping again.
This is because only the first &quot;wave&quot; of updates is monitored. In theory one could expand this strategy to more update levels, but...

&gt; In
&gt; my  prior discussions with Ted, we decided that we really had no way of knowing
&gt; when the view was going to be finished with updating the view, so instead we
&gt; were going to just ensure that the provider would populate its cache with the
&gt; needed data and once that&apos;s done we would just assume that the view refresh was
&gt; going to be fast enough.  But we haven&apos;t really tested that theory yet as we
&gt; need to test his changes on top of your patch first.
&gt; 

...prefetching the necessary data during a monitored update is a good idea and I think this would most probably overcome the update errors I mentioned above. 

I&apos;ll test with Ted&apos;s patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1291378</commentid>
    <comment_count>12</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-15 08:39:28 -0400</bug_when>
    <thetext>(In reply to comment #11)
&gt; ...prefetching the necessary data during a monitored update is a good idea and
&gt; I think this would most probably overcome the update errors I mentioned above. 
&gt; 
&gt; I&apos;ll test with Ted&apos;s patch.

Unfortunately this does not fix the update errors, because evaluation of variables happens with the label update, which is not triggered by the patch.
BTW, the visible update scope did not work at for me. I had to force it to update all.
</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1291845</commentid>
    <comment_count>13</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-07-15 14:47:36 -0400</bug_when>
    <thetext>(In reply to comment #12)
&gt; Unfortunately this does not fix the update errors, because evaluation of
&gt; variables happens with the label update...

I think not updating the labels must be an omission.... but I haven&apos;t looked at Ted&apos;s patch yet either.  But it is still a work in progress as Ted took a break to work on other WB 3.1 M3 issues.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292151</commentid>
    <comment_count>14</comment_count>
      <attachid>107542</attachid>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-07-15 19:19:42 -0400</bug_when>
    <thetext>Created attachment 107542
Updated final patch with some API reshuffling. (+committed)

I&apos;ve played with this patch for half the day and it seems almost complete, at least it&apos;s getting so big that I think we better check it in soon :-)

I have a couple of concrete suggestions plus some vague comments:

- I think interacting with the controller better fits in the VM adapter implementation than in the VM Provider.  The attached patch includes the refactoring to accomplish this.  The down-side of this patch is that it adds another abstract class to the implementation of VM Adapters.  At some point it would be good to simplify these stacks.

- This is a relatively minor point, but we typically place the burden of switching to the correct executor on the caller.  So in my included patch I added a @ConfiedToDsfExecutor annotation to the IStepQueueManager interface.

- The ISteppingControlParticipant seems like a good idea, the only thing that bothers me is that the contract where the participant needs to call doneStepping() is rather vague.  I wish there was a way that the SteppingController could call the participants when initiating the stepping, which in turn would somehow obligate the participants to call doneStepping().  This doesn&apos;t really make sense though, because both the controller and the VM adapter handle the data model events independently.  One option I though about is to completely integrate the stepping controller into the AbstractDebugVMAdapter.  But this would also force us to integrate the display manager into the vm adapter, which could turn it into something of a mess.  On the other hand it may help clarify the relationship between these.  Either way, I don&apos;t think this question should hold up committing in this patch as it can be resolved in a later refactoring.

- There is still a question of optimizations in the source display adapter, but I get the sense that you&apos;re not convinced of their value, so we could just open a separate bug for this enhancement and debate it there.

Overall, I think this is a very good patch, so I think we should check it in without delay and open new bugs for remaining issues.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292418</commentid>
    <comment_count>15</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-16 06:24:41 -0400</bug_when>
    <thetext>(In reply to comment #14)
&gt; - I think interacting with the controller better fits in the VM adapter
&gt; implementation than in the VM Provider.  The attached patch includes the
&gt; refactoring to accomplish this.  The down-side of this patch is that it adds
&gt; another abstract class to the implementation of VM Adapters.  At some point it
&gt; would be good to simplify these stacks.

That&apos;s much better. I did not dare to add another layer myself, so I am happy you did ;-)

&gt; - The ISteppingControlParticipant seems like a good idea, the only thing that
&gt; bothers me is that the contract where the participant needs to call
&gt; doneStepping() is rather vague.  

That&apos;s right. I&apos;ll try to make the contract more explicit in the interface documentation.
I also thought about a different way to participate where the participant would not need to call a method when he is done, but would be asked whether he would allow stepping or not. The downside of this is that the participant needs to keep some state.

&gt; I wish there was a way that the
&gt; SteppingController could call the participants when initiating the stepping,
&gt; which in turn would somehow obligate the participants to call doneStepping().

I thought about that, but in the end could not find a good reason for doing so, because there is no real connection between initiation of a step and its end, which is basically a suspended event.
For participants, the only interesting thing is the suspended event.
On the other hand it sounds tempting to call the participants with a request monitor when a step is issued and have them call done() as soon as they received and processed a suspended event for a matching execution context.

&gt; One option I though about is to completely integrate the stepping controller into the
&gt; AbstractDebugVMAdapter.  But this would also force us to integrate the display
&gt; manager into the vm adapter, which could turn it into something of a mess.  On
&gt; the other hand it may help clarify the relationship between these.  Either way,
&gt; I don&apos;t think this question should hold up committing in this patch as it can be
&gt; resolved in a later refactoring.

I agree. This need not be the last word on it.

&gt; - There is still a question of optimizations in the source display adapter...

Yes, I think optimizing source display is a different issue.

&gt; Overall, I think this is a very good patch, so I think we should check it in
&gt; without delay and open new bugs for remaining issues.

Thanks for reviewing, Pawel!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292446</commentid>
    <comment_count>16</comment_count>
      <attachid>107542</attachid>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-16 07:05:36 -0400</bug_when>
    <thetext>Comment on attachment 107542
Updated final patch with some API reshuffling. (+committed)

Committed Pawel&apos;s final patch with minor changes to HEAD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292448</commentid>
    <comment_count>17</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-16 07:07:24 -0400</bug_when>
    <thetext>Pawel, please verify. </thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292449</commentid>
    <comment_count>18</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-16 07:08:11 -0400</bug_when>
    <thetext>Argh. Reopen to re-assign.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292453</commentid>
    <comment_count>19</comment_count>
    <who name="Anton Leherbauer">anton.leherbauer</who>
    <bug_when>2008-07-16 07:09:28 -0400</bug_when>
    <thetext>Marking fixed again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1292970</commentid>
    <comment_count>20</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2008-07-16 14:50:05 -0400</bug_when>
    <thetext>Verified.  Thanks Toni.

For reference, bug 241075 was created to follow up on architecture of the stepping controller.  And bug 241133 was created for optimizing the source lookup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1402951</commentid>
    <comment_count>21</comment_count>
    <who name="Pawel Piech">pawel.1.piech</who>
    <bug_when>2009-01-07 16:02:21 -0500</bug_when>
    <thetext>DD 1.1 reelased!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>106217</attachid>
            <date>2008-07-01 06:47:00 -0400</date>
            <delta_ts>2008-07-04 10:02:11 -0400</delta_ts>
            <desc>First draft</desc>
            <filename>patch_214386.txt</filename>
            <type>text/plain</type>
            <size>32461</size>
            <attacher name="Anton Leherbauer">anton.leherbauer</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZGQuZHNmLnVp
DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTVBy
b3ZpZGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xp
cHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL3VpL3ZpZXdtb2RlbC9BYnN0cmFjdFZNUHJvdmlkZXIuamF2YSx2DQpyZXRyaWV2aW5n
IHJldmlzaW9uIDEuMjUNCmRpZmYgLXUgLXIxLjI1IEFic3RyYWN0Vk1Qcm92aWRlci5qYXZhDQot
LS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTVByb3ZpZGVy
LmphdmEJMjQgSnVuIDIwMDggMTg6MTM6MTMgLTAwMDAJMS4yNQ0KKysrIHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1Qcm92aWRlci5qYXZhCTEgSnVsIDIwMDgg
MDk6NTk6MDkgLTAwMDANCkBAIC0yMCw2ICsyMCw3IEBADQogaW1wb3J0IGphdmEudXRpbC5jb25j
dXJyZW50LkV4ZWN1dG9yOw0KIGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3RlZEV4
ZWN1dGlvbkV4Y2VwdGlvbjsNCiANCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJl
bnQuQ291bnRpbmdSZXF1ZXN0TW9uaXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNv
bmN1cnJlbnQuRGF0YVJlcXVlc3RNb25pdG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
Y29uY3VycmVudC5JRHNmU3RhdHVzQ29uc3RhbnRzOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5SZXF1ZXN0TW9uaXRvcjsNCkBAIC0yMDQsOCArMjA1LDIwIEBADQogICAg
ICAqIFByb2Nlc3NlcyB0aGUgZ2l2ZW4gZXZlbnQgaW4gdGhlIGdpdmVuIHByb3ZpZGVyLCBzZW5k
aW5nIG1vZGVsIA0KICAgICAgKiBkZWx0YXMgaWYgbmVjZXNzYXJ5Lg0KICAgICAgKi8NCi0gICAg
cHVibGljIHZvaWQgaGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50KSB7DQotICAgICAgICBm
b3IgKGZpbmFsIElWTU1vZGVsUHJveHkgcHJveHlTdHJhdGVneSA6IGdldEFjdGl2ZU1vZGVsUHJv
eGllcygpKSB7DQorCXB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCkg
ew0KKyAgICAJaGFuZGxlRXZlbnQoZXZlbnQsIG51bGwpOw0KKyAgICB9DQorICAgICANCisgICAg
LyoqDQorICAgICAqIFByb2Nlc3NlcyB0aGUgZ2l2ZW4gZXZlbnQgaW4gdGhlIGdpdmVuIHByb3Zp
ZGVyLCBzZW5kaW5nIG1vZGVsIA0KKyAgICAgKiBkZWx0YXMgaWYgbmVjZXNzYXJ5Lg0KKyAgICAg
Ki8NCisgICAgcHVibGljIHZvaWQgaGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50LCBSZXF1
ZXN0TW9uaXRvciBybSkgew0KKyAgICAJQ291bnRpbmdSZXF1ZXN0TW9uaXRvciBjcm09IG5ldyBD
b3VudGluZ1JlcXVlc3RNb25pdG9yKGdldEV4ZWN1dG9yKCksIHJtKTsNCisgICAgICAgIGZpbmFs
IExpc3Q8SVZNTW9kZWxQcm94eT4gYWN0aXZlTW9kZWxQcm94aWVzPSBuZXcgQXJyYXlMaXN0PElW
TU1vZGVsUHJveHk+KGdldEFjdGl2ZU1vZGVsUHJveGllcygpKTsNCisgICAgCWNybS5zZXREb25l
Q291bnQoYWN0aXZlTW9kZWxQcm94aWVzLnNpemUoKSk7DQorDQorICAgIAlmb3IgKGZpbmFsIElW
TU1vZGVsUHJveHkgcHJveHlTdHJhdGVneSA6IGFjdGl2ZU1vZGVsUHJveGllcykgew0KICAgICAg
ICAgICAgIGlmIChwcm94eVN0cmF0ZWd5LmlzRGVsdGFFdmVudChldmVudCkpIHsNCiAgICAgICAg
ICAgICAgICAgaWYgKCFmRXZlbnRRdWV1ZXMuY29udGFpbnNLZXkocHJveHlTdHJhdGVneSkpIHsN
CiAgICAgICAgICAgICAgICAgICAgIGZFdmVudFF1ZXVlcy5wdXQocHJveHlTdHJhdGVneSwgbmV3
IE1vZGVsUHJveHlFdmVudFF1ZXVlKCkpOw0KQEAgLTIyMiwxMyArMjM1LDE2IEBADQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAg
ICAgICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgICAgICAgICBjcm0uZG9uZSgpOw0KICAg
ICAgICAgICAgICAgICAgICAgcXVldWUuZkV2ZW50UXVldWUuYWRkKGV2ZW50KTsNCiAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsNCi0gICAgICAgICAgICAgICAgICAgIGRvSGFuZGxlRXZlbnQocXVl
dWUsIHByb3h5U3RyYXRlZ3ksIGV2ZW50KTsgDQorICAgICAgICAgICAgICAgICAgICBkb0hhbmRs
ZUV2ZW50KHF1ZXVlLCBwcm94eVN0cmF0ZWd5LCBldmVudCwgY3JtKTsgDQogICAgICAgICAgICAg
ICAgIH0NCisgICAgICAgICAgICB9IGVsc2Ugew0KKyAgICAgICAgICAgIAljcm0uZG9uZSgpOw0K
ICAgICAgICAgICAgIH0NCiAgICAgICAgIH0NCi0gICAgICAgIA0KKw0KICAgICAgICAgLy8gQ2xl
YW4gdXAgbW9kZWwgcHJveGllcyB0aGF0IHdlcmUgcmVtb3ZlZC4NCiAgICAgICAgIExpc3Q8SVZN
TW9kZWxQcm94eT4gYWN0aXZlUHJveGllcyA9IGdldEFjdGl2ZU1vZGVsUHJveGllcygpOw0KICAg
ICAgICAgZm9yIChJdGVyYXRvcjxJVk1Nb2RlbFByb3h5PiBpdHIgPSBmRXZlbnRRdWV1ZXMua2V5
U2V0KCkuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsNCkBAIC0yMzcsOCArMjUzLDI0IEBA
DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfQ0KICAgICB9DQotICAgICANCi0gICAgcHJpdmF0
ZSB2b2lkIGRvSGFuZGxlRXZlbnQoZmluYWwgTW9kZWxQcm94eUV2ZW50UXVldWUgcXVldWUsIGZp
bmFsIElWTU1vZGVsUHJveHkgcHJveHlTdHJhdGVneSwgZmluYWwgT2JqZWN0IGV2ZW50KSB7DQor
DQorICAgIC8qKg0KKyAgICAgKiBHaXZlbiBldmVudCBpcyBhYm91dCB0byBiZSBoYW5kbGVkIGJ5
IFZNIHByb3ZpZGVycy4NCisgICAgICogDQorICAgICAqIEBwYXJhbSBldmVudA0KKyAgICAgKi8N
CisgICAgcHVibGljIHZvaWQgYWJvdXRUb0hhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCkg
ew0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBHaXZlbiBldmVudCBoYXMgYmVlbiBwcm9j
ZXNzZWQgYnkgYWxsIFZNIHByb3ZpZGVycy4NCisgICAgICogDQorICAgICAqIEBwYXJhbSBldmVu
dA0KKyAgICAgKi8NCisgICAgcHVibGljIHZvaWQgZG9uZUhhbmRsZUV2ZW50KGZpbmFsIE9iamVj
dCBldmVudCkgew0KKyAgICB9DQorDQorICAgIHByaXZhdGUgdm9pZCBkb0hhbmRsZUV2ZW50KGZp
bmFsIE1vZGVsUHJveHlFdmVudFF1ZXVlIHF1ZXVlLCBmaW5hbCBJVk1Nb2RlbFByb3h5IHByb3h5
U3RyYXRlZ3ksIGZpbmFsIE9iamVjdCBldmVudCwgZmluYWwgUmVxdWVzdE1vbml0b3Igcm0pIHsN
CiAgICAgICAgIHF1ZXVlLmZQcm9jZXNzaW5nRXZlbnQgPSB0cnVlOw0KICAgICAgICAgaGFuZGxl
RXZlbnQoDQogICAgICAgICAgICAgcHJveHlTdHJhdGVneSwgZXZlbnQsIA0KQEAgLTI0Nyw4ICsy
NzksMTAgQEANCiAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxldGVk
KCkgew0KICAgICAgICAgICAgICAgICAgICAgcXVldWUuZlByb2Nlc3NpbmdFdmVudCA9IGZhbHNl
Ow0KICAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWV1ZS5mRXZlbnRRdWV1ZS5pc0VtcHR5KCkp
IHsNCi0gICAgICAgICAgICAgICAgICAgICAgICBkb0hhbmRsZUV2ZW50KHF1ZXVlLCBwcm94eVN0
cmF0ZWd5LCBxdWV1ZS5mRXZlbnRRdWV1ZS5yZW1vdmUoMCkpOw0KLSAgICAgICAgICAgICAgICAg
ICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KKyAgICAgICAgICAgICAg
ICAgICAgICAgIGRvSGFuZGxlRXZlbnQocXVldWUsIHByb3h5U3RyYXRlZ3ksIHF1ZXVlLmZFdmVu
dFF1ZXVlLnJlbW92ZSgwKSwgcm0pOw0KKyAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCisg
ICAgICAgICAgICAgICAgICAgIAlybS5kb25lKCk7DQorICAgICAgICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICB9KTsNCiAgICAgfQ0KSW5kZXg6IHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVyLmphdmENCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVn
aW5zL29yZy5lY2xpcHNlLmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdt
b2RlbC9BYnN0cmFjdFZNQWRhcHRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xMg0K
ZGlmZiAtdSAtcjEuMTIgQWJzdHJhY3RWTUFkYXB0ZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVyLmphdmEJMiBKdW4gMjAwOCAx
Nzo1NDo0NSAtMDAwMAkxLjEyDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9k
ZWwvQWJzdHJhY3RWTUFkYXB0ZXIuamF2YQkxIEp1bCAyMDA4IDA5OjU5OjA5IC0wMDAwDQpAQCAt
NzAsNiArNzAsMTAgQEANCiAgICAgICAgIH0NCiAgICAgfQ0KIA0KKyAgICBwcm90ZWN0ZWQgSXRl
cmFibGU8SVZNUHJvdmlkZXI+IGdldFZNUHJvdmlkZXJJdGVyYWJsZSgpIHsNCisgICAgCXJldHVy
biBmVmlld01vZGVsUHJvdmlkZXJzLnZhbHVlcygpOw0KKyAgICB9DQorDQogICAgIHB1YmxpYyB2
b2lkIGRpc3Bvc2UoKSB7DQogICAgICAgICBJVk1Qcm92aWRlcltdIHByb3ZpZGVycyA9IG5ldyBJ
Vk1Qcm92aWRlclswXTsgDQogICAgICAgICBzeW5jaHJvbml6ZWQoZlZpZXdNb2RlbFByb3ZpZGVy
cykgew0KQEAgLTkxLDYgKzk1LDEzIEBADQogICAgICAgICB9DQogICAgIH0NCiAgICAgDQorICAg
IC8qKg0KKwkgKiBAcmV0dXJuIHdoZXRoZXIgdGhpcyBWTSBhZGFwdGVyIGlzIGRpc3Bvc2VkDQor
CSAqLw0KKwlwdWJsaWMgYm9vbGVhbiBpc0Rpc3Bvc2VkKCkgew0KKwkJcmV0dXJuIGZEaXNwb3Nl
ZDsNCisJfQ0KKw0KICAgICBwdWJsaWMgdm9pZCB1cGRhdGUoSUhhc0NoaWxkcmVuVXBkYXRlW10g
dXBkYXRlcykgew0KICAgICAgICAgSVZNUHJvdmlkZXIgcHJvdmlkZXIgPSBnZXRWTVByb3ZpZGVy
KHVwZGF0ZXNbMF0uZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpKTsNCiAgICAgICAgIGlmIChwcm92
aWRlciAhPSBudWxsKSB7DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9k
ZWwvZGF0YW1vZGVsL0Fic3RyYWN0RE1WTVByb3ZpZGVyLmphdmENCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBm
aWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNl
LmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwv
QWJzdHJhY3RETVZNUHJvdmlkZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMg0KZGlm
ZiAtdSAtcjEuMiBBYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi91aS92aWV3bW9kZWwvZGF0YW1vZGVsL0Fic3RyYWN0RE1WTVByb3ZpZGVyLmphdmEJ
MiBKdW4gMjAwOCAxNzo1NDo0NSAtMDAwMAkxLjINCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNUHJvdmlkZXIuamF2YQkxIEp1bCAy
MDA4IDA5OjU5OjEwIC0wMDAwDQpAQCAtMTAsMTEgKzEwLDcgQEANCiAgKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKi8NCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWwuZGF0YW1v
ZGVsOw0KIA0KLWltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3RlZEV4ZWN1dGlvbkV4
Y2VwdGlvbjsNCi0NCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuQ29uZmlu
ZWRUb0RzZkV4ZWN1dG9yOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklE
TUV2ZW50Ow0KLWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlRXZl
bnRIYW5kbGVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9u
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLkFic3RyYWN0Vk1BZGFw
dGVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLklWTU5vZGU7DQpA
QCAtNDQsMTQgKzQwLDYgQEANCiBhYnN0cmFjdCBwdWJsaWMgY2xhc3MgQWJzdHJhY3RETVZNUHJv
dmlkZXIgZXh0ZW5kcyBBYnN0cmFjdENhY2hpbmdWTVByb3ZpZGVyDQogew0KICAgICBwcml2YXRl
IGZpbmFsIERzZlNlc3Npb24gZlNlc3Npb247DQotDQotICAgIC8qKg0KLSAgICAgKiBJdCBpcyB0
aGVvcmV0aWNhbGx5IHBvc3NpYmxlIGZvciBhIFZNUHJvdmlkZXIgdG8gYmUgZGlzcG9zZWQgYmVm
b3JlIGl0IA0KLSAgICAgKiBoYXMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIGFzIGV2ZW50
IGxpc3RlbmVyLiAgVGhpcyBmbGFnIGlzIHVzZWQNCi0gICAgICogdG8gYXZvaWQgcmVtb3Zpbmcg
aXRzZWxmIGFzIGxpc3RlbmVyIGluIHN1Y2ggc2l0dWF0aW9uLg0KLSAgICAgKi8NCi0gICAgcHJp
dmF0ZSBib29sZWFuIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyID0gZmFsc2U7DQotDQogICAg
IC8qKg0KICAgICAgKiBDb25zdHJ1Y3RzIHRoZSB2aWV3IG1vZGVsIHByb3ZpZGVyIGZvciBnaXZl
biBEU0Ygc2Vzc2lvbi4gIFRoZSANCiAgICAgICogY29uc3RydWN0b3IgaXMgdGhyZWFkLXNhZmUg
dG8gYWxsb3cgVk0gcHJvdmlkZXIgdG8gYmUgY29uc3RydWN0ZWQNCkBAIC02MSw2NCArNDksNyBA
QA0KICAgICBwdWJsaWMgQWJzdHJhY3RETVZNUHJvdmlkZXIoQWJzdHJhY3RWTUFkYXB0ZXIgYWRh
cHRlciwgIElQcmVzZW50YXRpb25Db250ZXh0IHByZXNlbnRhdGlvbkNvbnRleHQsIERzZlNlc3Np
b24gc2Vzc2lvbikgew0KICAgICAgICAgc3VwZXIoYWRhcHRlciwgcHJlc2VudGF0aW9uQ29udGV4
dCk7DQogICAgICAgICBmU2Vzc2lvbiA9IHNlc3Npb247DQotICAgICAgICAvLyBBZGQgb3Vyc2Vs
dmVzIGFzIGxpc3RlbmVyIGZvciBETSBldmVudHMgZXZlbnRzLg0KLSAgICAgICAgdHJ5IHsNCi0g
ICAgICAgICAgICBzZXNzaW9uLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7
DQotICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCi0gICAgICAgICAgICAgICAg
ICAgIGlmIChEc2ZTZXNzaW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRTZXNzaW9uKCkuZ2V0SWQoKSkp
IHsNCi0gICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXNzaW9uKCkuYWRkU2VydmljZUV2ZW50
TGlzdGVuZXIoQWJzdHJhY3RETVZNUHJvdmlkZXIudGhpcywgbnVsbCk7DQotICAgICAgICAgICAg
ICAgICAgICAgICAgZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIgPSB0cnVlOw0KLSAgICAgICAg
ICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgfSk7DQotICAg
ICAgICB9IGNhdGNoIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlvbiBlKSB7DQotICAgICAgICAg
ICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24sIG5vdCBtdWNoIHdlIGNhbiBkbyBidXQgd2FpdCB0byBi
ZSBkaXNwb3NlZC4NCi0gICAgICAgIH0gDQogICAgIH0gICAgDQogDQotICAgIC8qKiBDYWxsZWQg
dG8gZGlzcG9zZSB0aGUgcHJvdmlkZXIuICovIA0KLSAgICBAT3ZlcnJpZGUNCi0gICAgcHVibGlj
IHZvaWQgZGlzcG9zZSgpIHsNCi0gICAgICAgIHRyeSB7DQotICAgICAgICAgICAgZ2V0U2Vzc2lv
bigpLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7DQotICAgICAgICAgICAg
ICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCi0gICAgICAgICAgICAgICAgICAgIGlmIChEc2ZTZXNz
aW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRTZXNzaW9uKCkuZ2V0SWQoKSkgJiYgZlJlZ2lzdGVyZWRB
c0V2ZW50TGlzdGVuZXIgKSB7DQotICAgICAgICAgICAgICAgICAgICAgICAgZlNlc3Npb24ucmVt
b3ZlU2VydmljZUV2ZW50TGlzdGVuZXIoQWJzdHJhY3RETVZNUHJvdmlkZXIudGhpcyk7DQotICAg
ICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgICAgIH0NCi0gICAgICAgICAgICB9KTsN
Ci0gICAgICAgIH0gY2F0Y2ggKFJlamVjdGVkRXhlY3V0aW9uRXhjZXB0aW9uIGUpIHsNCi0gICAg
ICAgICAgICAvLyBTZXNzaW9uIHNodXQgZG93bi4NCi0gICAgICAgIH0gDQotICAgICAgICBzdXBl
ci5kaXNwb3NlKCk7DQotICAgIH0NCi0NCiAgICAgcHVibGljIERzZlNlc3Npb24gZ2V0U2Vzc2lv
bigpIHsgcmV0dXJuIGZTZXNzaW9uOyB9DQotDQotICAgIC8qKg0KLSAgICAgKiBIYW5kbGUgImRh
dGEgbW9kZWwgY2hhbmdlZCIgZXZlbnQgYnkgZ2VuZXJhdGluZyBhIGRlbHRhIG9iamVjdCBmb3Ig
ZWFjaCANCi0gICAgICogdmlldyBhbmQgcGFzc2luZyBpdCB0byB0aGUgY29ycmVzcG9uZGluZyB2
aWV3IG1vZGVsIHByb3ZpZGVyLiAgVGhlIHZpZXcNCi0gICAgICogbW9kZWwgcHJvdmlkZXIgaXMg
dGhlbiByZXNwb25zaWJsZSBmb3IgZmlsbGluZy1pbiBhbmQgc2VuZGluZyB0aGUgZGVsdGENCi0g
ICAgICogdG8gdGhlIHZpZXdlci4NCi0gICAgICogQHBhcmFtIGUNCi0gICAgICovDQotICAgIEBE
c2ZTZXJ2aWNlRXZlbnRIYW5kbGVyDQotICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChm
aW5hbCBJRE1FdmVudDw/PiBldmVudCkgew0KLSAgICAgICAgLy8gV2UncmUgaW4gc2Vzc2lvbidz
IGV4ZWN1dG9yIHRocmVhZCAoc2Vzc2lvbiBpbiB3aGljaCB0aGUgZXZlbnQgb3JpZ2luYXRlZCku
IA0KLSAgICAgICAgLy8gUmUtZGlzcGFjaCB0byB0aGUgdmlldyBtb2RlbCBwcm92aWRlciBleGVj
dXRvciB0aHJlYWQgYW5kIHRoZW4gY2FsbCB0aGUgDQotICAgICAgICAvLyBtb2RlbCBwcm94eSBz
dHJhdGVneSB0byBoYW5kbGUgdGhlIGV2ZW50Lg0KLSAgICAgICAgaWYgKGlzRGlzcG9zZWQoKSkg
cmV0dXJuOw0KLQ0KLSAgICAgICAgdHJ5IHsNCi0gICAgICAgICAgICBnZXRFeGVjdXRvcigpLmV4
ZWN1dGUobmV3IFJ1bm5hYmxlKCkgew0KLSAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4o
KSB7DQotICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXNwb3NlZCgpKSByZXR1cm47DQotICAg
ICAgICAgICAgICAgICAgICBoYW5kbGVFdmVudChldmVudCk7DQotICAgICAgICAgICAgICAgIH0N
Ci0gICAgICAgICAgICB9KTsNCi0gICAgICAgIH0gY2F0Y2ggKFJlamVjdGVkRXhlY3V0aW9uRXhj
ZXB0aW9uIGUpIHsNCi0gICAgICAgICAgICAvLyBJZ25vcmUuICBUaGlzIGV4Y2VwdGlvbiBjb3Vs
ZCBiZSB0aHJvd24gaWYgdGhlIHByb3ZpZGVyIGlzIGJlaW5nIA0KLSAgICAgICAgICAgIC8vIHNo
dXQgZG93bi4gIA0KLSAgICAgICAgfQ0KLSAgICB9DQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1BZGFwdGVyLmphdmEN
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9w
bHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3Zp
ZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRlci5qYXZhLHYNCnJldHJpZXZpbmcg
cmV2aXNpb24gMS4yDQpkaWZmIC11IC1yMS4yIEFic3RyYWN0RE1WTUFkYXB0ZXIuamF2YQ0KLS0t
IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERN
Vk1BZGFwdGVyLmphdmEJMiBKdW4gMjAwOCAxNzo1NDo0NSAtMDAwMAkxLjINCisrKyBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRl
ci5qYXZhCTEgSnVsIDIwMDggMDk6NTk6MDkgLTAwMDANCkBAIC0xMCw5ICsxMCwxNiBAQA0KICAq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqLw0KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuZGQuZHNmLnVpLnZp
ZXdtb2RlbC5kYXRhbW9kZWw7DQogDQoraW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlJlamVj
dGVkRXhlY3V0aW9uRXhjZXB0aW9uOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29u
Y3VycmVudC5Db3VudGluZ1JlcXVlc3RNb25pdG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5UaHJlYWRTYWZlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0
YW1vZGVsLklETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZT
ZXJ2aWNlRXZlbnRIYW5kbGVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5E
c2ZTZXNzaW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLkFic3Ry
YWN0Vk1BZGFwdGVyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLkFi
c3RyYWN0Vk1Qcm92aWRlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnVpLnZpZXdtb2Rl
bC5JVk1Qcm92aWRlcjsNCiANCiAvKiogDQogICogQmFzZSBpbXBsZW1lbnRhdGlvbiBmb3IgRFNG
LWJhc2VkIHZpZXcgbW9kZWwgYWRhcHRlcnMuDQpAQCAtMjMsNiArMzAsMTMgQEANCiAgICAgcHJp
dmF0ZSBmaW5hbCBEc2ZTZXNzaW9uIGZTZXNzaW9uOw0KIA0KICAgICAvKioNCisgICAgICogSXQg
aXMgdGhlb3JldGljYWxseSBwb3NzaWJsZSBmb3IgYSBWTSBhZGFwdGVyIHRvIGJlIGRpc3Bvc2Vk
IGJlZm9yZSBpdCANCisgICAgICogaGFzIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiBhcyBl
dmVudCBsaXN0ZW5lci4gIFRoaXMgZmxhZyBpcyB1c2VkDQorICAgICAqIHRvIGF2b2lkIHJlbW92
aW5nIGl0c2VsZiBhcyBsaXN0ZW5lciBpbiBzdWNoIHNpdHVhdGlvbi4NCisgICAgICovDQorICAg
IHByaXZhdGUgYm9vbGVhbiBmUmVnaXN0ZXJlZEFzRXZlbnRMaXN0ZW5lciA9IGZhbHNlOw0KKw0K
KyAgICAvKioNCiAgICAgICogQ29uc3RydWN0b3IgZm9yIHRoZSBWaWV3IE1vZGVsIHNlc3Npb24u
ICBJdCBpcyB0ZW1wdGluZyB0byBoYXZlIHRoZSANCiAgICAgICogYWRhcHRlciByZWdpc3RlciBp
dHNlbGYgaGVyZSB3aXRoIHRoZSBzZXNzaW9uIGFzIHRoZSBtb2RlbCBhZGFwdGVyLCBidXQNCiAg
ICAgICogdGhhdCB3b3VsZCBtZWFuIHRoYXQgdGhlIGFkYXB0ZXIgbWlnaHQgZ2V0IGFjY2Vzc2Vk
IG9uIGFub3RoZXIgdGhyZWFkDQpAQCAtMzMsMTIgKzQ3LDg4IEBADQogICAgIHB1YmxpYyBBYnN0
cmFjdERNVk1BZGFwdGVyKERzZlNlc3Npb24gc2Vzc2lvbikgew0KICAgICAgICAgc3VwZXIoKTsN
CiAgICAgICAgIGZTZXNzaW9uID0gc2Vzc2lvbjsNCisgICAgICAgIC8vIEFkZCBvdXJzZWx2ZXMg
YXMgbGlzdGVuZXIgZm9yIERNIGV2ZW50cyBldmVudHMuDQorICAgICAgICB0cnkgew0KKyAgICAg
ICAgICAgIHNlc3Npb24uZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsNCisg
ICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgew0KKyAgICAgICAgICAgICAgICAgICAg
aWYgKERzZlNlc3Npb24uaXNTZXNzaW9uQWN0aXZlKGdldFNlc3Npb24oKS5nZXRJZCgpKSkgew0K
KyAgICAgICAgICAgICAgICAgICAgICAgIGdldFNlc3Npb24oKS5hZGRTZXJ2aWNlRXZlbnRMaXN0
ZW5lcihBYnN0cmFjdERNVk1BZGFwdGVyLnRoaXMsIG51bGwpOw0KKyAgICAgICAgICAgICAgICAg
ICAgICAgIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyID0gdHJ1ZTsNCisgICAgICAgICAgICAg
ICAgICAgIH0NCisgICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgIH0pOw0KKyAgICAgICAg
fSBjYXRjaCAoUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgew0KKyAgICAgICAgICAgIC8v
IFNlc3Npb24gc2h1dCBkb3duLCBub3QgbXVjaCB3ZSBjYW4gZG8gYnV0IHdhaXQgdG8gYmUgZGlz
cG9zZWQuDQorICAgICAgICB9DQogICAgIH0gICAgDQogDQorICAgIEBPdmVycmlkZQ0KKyAgICBw
dWJsaWMgdm9pZCBkaXNwb3NlKCkgew0KKyAgICAgICAgdHJ5IHsNCisgICAgICAgICAgICBnZXRT
ZXNzaW9uKCkuZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsNCisgICAgICAg
ICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgew0KKyAgICAgICAgICAgICAgICAgICAgaWYgKGZS
ZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyICYmIGdldFNlc3Npb24oKS5pc0FjdGl2ZSgpKSB7DQor
ICAgICAgICAgICAgICAgICAgICAgICAgZlNlc3Npb24ucmVtb3ZlU2VydmljZUV2ZW50TGlzdGVu
ZXIoQWJzdHJhY3RETVZNQWRhcHRlci50aGlzKTsNCisgICAgICAgICAgICAgICAgICAgIH0NCisg
ICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgIH0pOw0KKyAgICAgICAgfSBjYXRjaCAoUmVq
ZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgew0KKyAgICAgICAgICAgIC8vIFNlc3Npb24gc2h1
dCBkb3duLg0KKyAgICAgICAgfQ0KKyAgICAgICAgc3VwZXIuZGlzcG9zZSgpOw0KKyAgICB9DQor
DQogICAgIC8qKg0KICAgICAgKiBSZXR1cm5zIHRoZSBEU0Ygc2Vzc2lvbiB0aGF0IHRoaXMgYWRh
cHRlciBpcyBhc3NvY2lhdGVkIHdpdGguDQogICAgICAqIEByZXR1cm4NCiAgICAgICovDQogICAg
IHByb3RlY3RlZCBEc2ZTZXNzaW9uIGdldFNlc3Npb24oKSB7IHJldHVybiBmU2Vzc2lvbjsgfQ0K
ICAgICANCisgICAgLyoqDQorICAgICAqIEhhbmRsZSAiZGF0YSBtb2RlbCBjaGFuZ2VkIiBldmVu
dCBieSBnZW5lcmF0aW5nIGEgZGVsdGEgb2JqZWN0IGZvciBlYWNoIA0KKyAgICAgKiB2aWV3IGFu
ZCBwYXNzaW5nIGl0IHRvIHRoZSBjb3JyZXNwb25kaW5nIHZpZXcgbW9kZWwgcHJvdmlkZXIuICBU
aGUgdmlldw0KKyAgICAgKiBtb2RlbCBwcm92aWRlciBpcyB0aGVuIHJlc3BvbnNpYmxlIGZvciBm
aWxsaW5nLWluIGFuZCBzZW5kaW5nIHRoZSBkZWx0YQ0KKyAgICAgKiB0byB0aGUgdmlld2VyLg0K
KyAgICAgKiBAcGFyYW0gZQ0KKyAgICAgKi8NCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIN
CisgICAgcHVibGljIHZvaWQgZXZlbnREaXNwYXRjaGVkKGZpbmFsIElETUV2ZW50PD8+IGV2ZW50
KSB7DQorICAgICAgICAvLyBXZSdyZSBpbiBzZXNzaW9uJ3MgZXhlY3V0b3IgdGhyZWFkIChzZXNz
aW9uIGluIHdoaWNoIHRoZSBldmVudCBvcmlnaW5hdGVkKS4gDQorICAgICAgICBpZiAoaXNEaXNw
b3NlZCgpKSByZXR1cm47DQorDQorICAgICAgICBpbnQgY291bnQgPSAwOw0KKyAgICAgICAgZm9y
IChJVk1Qcm92aWRlciB2bVByb3ZpZGVyIDogZ2V0Vk1Qcm92aWRlckl0ZXJhYmxlKCkpIHsNCisg
ICAgICAgIAlpZiAodm1Qcm92aWRlciBpbnN0YW5jZW9mIEFic3RyYWN0Vk1Qcm92aWRlcikgew0K
KyAgICAJCQkoKEFic3RyYWN0Vk1Qcm92aWRlcikgdm1Qcm92aWRlcikuYWJvdXRUb0hhbmRsZUV2
ZW50KGV2ZW50KTsNCisgICAgICAgIAkJY291bnQrKzsNCisgICAgICAgIAl9DQorCQl9DQorICAg
ICAgICANCisgICAgICAgIENvdW50aW5nUmVxdWVzdE1vbml0b3IgY3JtID0gbmV3IENvdW50aW5n
UmVxdWVzdE1vbml0b3IoZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCksIG51bGwpIHsNCisJCQlA
T3ZlcnJpZGUNCisJCQlwcm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQorCQkJCWRv
bmVIYW5kbGVFdmVudChldmVudCk7DQorCQkJfQ0KKyAgICAgICAgfTsNCisgICAgICAgIGNybS5z
ZXREb25lQ291bnQoY291bnQpOw0KKyAgICAgICAgDQorICAgICAgICBmb3IgKElWTVByb3ZpZGVy
IHZtUHJvdmlkZXIgOiBnZXRWTVByb3ZpZGVySXRlcmFibGUoKSkgew0KKyAgICAgICAgCWlmICh2
bVByb3ZpZGVyIGluc3RhbmNlb2YgQWJzdHJhY3RWTVByb3ZpZGVyKSB7DQorICAgIAkJCSgoQWJz
dHJhY3RWTVByb3ZpZGVyKSB2bVByb3ZpZGVyKS5oYW5kbGVFdmVudChldmVudCwgY3JtKTsNCisg
ICAgICAgIAl9DQorCQl9DQorICAgIH0NCisNCisJLyoqDQorCSAqIE5vdGlmeSBWTSBwcm92aWRl
cnMgYWJvdXQgY29tcGxldGlvbiBvZiBoYW5kbGluZyBnaXZlbiBldmVudC4NCisJICogDQorCSAq
IEBwYXJhbSBldmVudA0KKwkgKi8NCisJcHJvdGVjdGVkIGZpbmFsIHZvaWQgZG9uZUhhbmRsZUV2
ZW50KElETUV2ZW50PD8+IGV2ZW50KSB7DQorICAgICAgICBmb3IgKElWTVByb3ZpZGVyIHZtUHJv
dmlkZXIgOiBnZXRWTVByb3ZpZGVySXRlcmFibGUoKSkgew0KKyAgICAgICAgCWlmICh2bVByb3Zp
ZGVyIGluc3RhbmNlb2YgQWJzdHJhY3RWTVByb3ZpZGVyKSB7DQorICAgIAkJCSgoQWJzdHJhY3RW
TVByb3ZpZGVyKSB2bVByb3ZpZGVyKS5kb25lSGFuZGxlRXZlbnQoZXZlbnQpOw0KKyAgICAgICAg
CX0NCisJCX0NCisJfQ0KIH0NCiNQIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zw0KSW5kZXg6IHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9TdGVwUXVldWVNYW5hZ2VyLmphdmEN
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9w
bHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2Rl
YnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24g
MS44DQpkaWZmIC11IC1yMS44IFN0ZXBRdWV1ZU1hbmFnZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9TdGVwUXVldWVNYW5hZ2VyLmphdmEJMzAgTWF5IDIw
MDggMjI6NTc6NDQgLTAwMDAJMS44DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9z
ZXJ2aWNlL1N0ZXBRdWV1ZU1hbmFnZXIuamF2YQkxIEp1bCAyMDA4IDA5OjU5OjEyIC0wMDAwDQpA
QCAtNzYsNiArNzYsMTUgQEANCiAgICAgcHJpdmF0ZSBNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxM
aXN0PFN0ZXBSZXF1ZXN0Pj4gZlN0ZXBRdWV1ZXMgPSBuZXcgSGFzaE1hcDxJRXhlY3V0aW9uRE1D
b250ZXh0LExpc3Q8U3RlcFJlcXVlc3Q+PigpOw0KICAgICBwcml2YXRlIE1hcDxJRXhlY3V0aW9u
RE1Db250ZXh0LEJvb2xlYW4+IGZUaW1lZE91dEZsYWdzID0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlv
bkRNQ29udGV4dCxCb29sZWFuPigpOw0KICAgICBwcml2YXRlIE1hcDxJRXhlY3V0aW9uRE1Db250
ZXh0LFNjaGVkdWxlZEZ1dHVyZTw/Pj4gZlRpbWVkT3V0RnV0dXJlcyA9IG5ldyBIYXNoTWFwPElF
eGVjdXRpb25ETUNvbnRleHQsU2NoZWR1bGVkRnV0dXJlPD8+PigpOw0KKw0KKwlwcml2YXRlIE1h
cDxJRXhlY3V0aW9uRE1Db250ZXh0LCBMb25nPiBmTGFzdFN0ZXBUaW1lPSBuZXcgSGFzaE1hcDxJ
RXhlY3V0aW9uRE1Db250ZXh0LCBMb25nPigpOw0KKwkvKioNCisJICogTWluaW11bSBzdGVwIGlu
dGVydmFsIGluIG1pbGxpc2Vjb25kcy4NCisJICogVE9ETyBNYWtlIHRoaXMgYSBwcmVmZXJlbmNl
DQorCSAqLw0KKwlwcml2YXRlIGludCBmTWluU3RlcEludGVydmFsPSAwOw0KKw0KKwlwcml2YXRl
IE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LCBCb29sZWFuPiBmRGlzYWJsZWRDb250ZXh0cyA9IG5l
dyBIYXNoTWFwPElFeGVjdXRpb25ETUNvbnRleHQsIEJvb2xlYW4+KCk7DQogICAgIA0KICAgICBw
dWJsaWMgU3RlcFF1ZXVlTWFuYWdlcihEc2ZTZXNzaW9uIHNlc3Npb24pIHsNCiAgICAgICAgIHN1
cGVyKHNlc3Npb24pOw0KQEAgLTEyOSw3ICsxMzgsNDkgQEANCiAgICAgICAgIHJldHVybiBmUnVu
Q29udHJvbC5pc1N0ZXBwaW5nKGV4ZWNDdHgpICYmICFpc1N0ZXBwaW5nVGltZWRPdXQoZXhlY0N0
eCk7IA0KICAgICB9DQogDQotICAgIC8qKiANCisgICAgLyoqDQorICAgICAqIENoZWNrIHdoZXRo
ZXIgdGhlIG5leHQgc3RlcCBvbiB0aGUgZ2l2ZW4gZXhlY3V0aW9uIGNvbnRleHQgc2hvdWxkIGJl
IGRlbGF5ZWQNCisgICAgICogYmFzZWQgb24gdGhlIGNvbmZpZ3VyZWQgc3RlcCBkZWxheS4NCisg
ICAgICogDQorCSAqIEBwYXJhbSBleGVjQ3R4DQorCSAqIEByZXR1cm4gPGNvZGU+dHJ1ZTwvY29k
ZT4gaWYgdGhlIHN0ZXAgc2hvdWxkIGJlIGRlbGF5ZWQNCisJICovDQorCXByaXZhdGUgYm9vbGVh
biBzaG91bGREZWxheVN0ZXAoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorICAgICAg
ICByZXR1cm4gZ2V0U3RlcERlbGF5KGV4ZWNDdHgpID4gMDsNCisJfQ0KKw0KKwkvKioNCisJICog
Q29tcHV0ZSB0aGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSB0aGUgbmV4dCBzdGVwIGZv
ciB0aGUgZ2l2ZW4gY29udGV4dCBtYXkgYmUgZXhlY3V0ZWQuDQorCSAqIA0KKwkgKiBAcGFyYW0g
ZXhlY0N0eA0KKwkgKiBAcmV0dXJuICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZWZvcmUg
dGhlIG5leHQgcG9zc2libGUgc3RlcA0KKwkgKi8NCisJcHJpdmF0ZSBpbnQgZ2V0U3RlcERlbGF5
KElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKwkJaWYgKGZNaW5TdGVwSW50ZXJ2YWwg
PiAwKSB7DQorCSAgICAgICAgZm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGxhc3RTdGVwQ3R4IDog
Zkxhc3RTdGVwVGltZS5rZXlTZXQoKSkgew0KKwkgICAgICAgICAgICBpZiAoZXhlY0N0eC5lcXVh
bHMobGFzdFN0ZXBDdHgpIHx8IERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4ZWNDdHgsIGxhc3RT
dGVwQ3R4KSkgew0KKwkgICAgICAgICAgICAgICAgbG9uZyBub3cgPSBTeXN0ZW0uY3VycmVudFRp
bWVNaWxsaXMoKTsNCisJCQkJCWludCBkZWxheT0gKGludCkgKGZMYXN0U3RlcFRpbWUuZ2V0KGxh
c3RTdGVwQ3R4KSArIGZNaW5TdGVwSW50ZXJ2YWwgLSBub3cpOw0KKwkJCQkJcmV0dXJuIE1hdGgu
bWF4KGRlbGF5LCAwKTsNCisJICAgICAgICAgICAgfQ0KKwkgICAgICAgIH0NCisJCX0NCisgICAg
ICAgIHJldHVybiAwOw0KKwl9DQorDQorCXByaXZhdGUgdm9pZCB1cGRhdGVMYXN0U3RlcFRpbWUo
SUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorCQlpZiAoZk1pblN0ZXBJbnRlcnZhbCA+
IDApIHsNCisJICAgICAgICBsb25nIG5vdyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOw0K
KwkJCWZMYXN0U3RlcFRpbWUucHV0KGV4ZWNDdHgsIG5vdyk7DQorCSAgICAgICAgZm9yIChJRXhl
Y3V0aW9uRE1Db250ZXh0IGxhc3RTdGVwQ3R4IDogZkxhc3RTdGVwVGltZS5rZXlTZXQoKSkgew0K
KwkgICAgICAgICAgICBpZiAoZXhlY0N0eCAhPSBsYXN0U3RlcEN0eCAmJiBETUNvbnRleHRzLmlz
QW5jZXN0b3JPZihleGVjQ3R4LCBsYXN0U3RlcEN0eCkpIHsNCisJCQkJCWZMYXN0U3RlcFRpbWUu
cHV0KGxhc3RTdGVwQ3R4LCBub3cpOw0KKwkgICAgICAgICAgICB9DQorCSAgICAgICAgfQ0KKwkJ
fQ0KKwl9DQorDQorCS8qKiANCiAgICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN0ZXAgY29t
bWFuZHMgdGhhdCBhcmUgcXVldWVkIGZvciBnaXZlbiBleGVjdXRpb24NCiAgICAgICogY29udGV4
dC4NCiAgICAgICovDQpAQCAtMTQ1LDI1ICsxOTYsNDggQEANCiAgICAgICogQHBhcmFtIHN0ZXBU
eXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0KICAgICAgKi8NCiAgICAgcHVibGljIHZvaWQg
ZW5xdWV1ZVN0ZXAoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVw
VHlwZSBzdGVwVHlwZSkgew0KLSAgICAgICAgZlJ1bkNvbnRyb2wuY2FuU3RlcCgNCi0gICAgICAg
ICAgICBleGVjQ3R4LCBzdGVwVHlwZSwgbmV3IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihn
ZXRFeGVjdXRvcigpLCBudWxsKSB7DQotICAgICAgICAgICAgICAgIEBPdmVycmlkZQ0KLSAgICAg
ICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQotICAgICAgICAg
ICAgICAgICAgICBpZiAoaXNTdWNjZXNzKCkgJiYgZ2V0RGF0YSgpKSB7DQotICAgICAgICAgICAg
ICAgICAgICAgICAgZlJ1bkNvbnRyb2wuc3RlcChleGVjQ3R4LCBzdGVwVHlwZSwgbmV3IFJlcXVl
c3RNb25pdG9yKGdldEV4ZWN1dG9yKCksIG51bGwpKTsgDQotICAgICAgICAgICAgICAgICAgICB9
IGVsc2UgaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUpKSB7DQotICAgICAg
ICAgICAgICAgICAgICAgICAgTGlzdDxTdGVwUmVxdWVzdD4gc3RlcFF1ZXVlID0gZlN0ZXBRdWV1
ZXMuZ2V0KGV4ZWNDdHgpOw0KLSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGVwUXVldWUg
PT0gbnVsbCkgew0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwUXVldWUgPSBuZXcg
TGlua2VkTGlzdDxTdGVwUmVxdWVzdD4oKTsNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZlN0ZXBRdWV1ZXMucHV0KGV4ZWNDdHgsIHN0ZXBRdWV1ZSk7DQotICAgICAgICAgICAgICAgICAg
ICAgICAgfQ0KLSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGVwUXVldWUuc2l6ZSgpIDwg
ZlF1ZXVlRGVwdGgpIHsNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcFF1ZXVlLmFk
ZChuZXcgU3RlcFJlcXVlc3Qoc3RlcFR5cGUpKTsNCi0gICAgICAgICAgICAgICAgICAgICAgICB9
DQotICAgICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgICAgIH0NCi0gICAgICAgICAg
ICB9KTsNCi0gICAgfQ0KKyAgICAJaWYgKGlzU3RlcHBpbmdEaXNhYmxlZChleGVjQ3R4KSkgew0K
KyAgICAJCXJldHVybjsNCisgICAgCX0NCisgICAgCWlmIChzaG91bGREZWxheVN0ZXAoZXhlY0N0
eCkpIHsNCisgICAgCQlpZiAoZG9DYW5FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSkpIHsN
CisJICAgICAgICAgICAgZG9FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSk7DQorCSAgICAg
ICAgICAgIGlmICghZlJ1bkNvbnRyb2wuaXNTdGVwcGluZyhleGVjQ3R4KSkgew0KKwkgICAgICAg
ICAgICAJcHJvY2Vzc1N0ZXBRdWV1ZShleGVjQ3R4KTsNCisJICAgICAgICAgICAgfQ0KKyAgICAJ
CX0NCisgICAgCX0gZWxzZSB7DQorCSAgICAgICAgZlJ1bkNvbnRyb2wuY2FuU3RlcCgNCisJICAg
ICAgICAgICAgZXhlY0N0eCwgc3RlcFR5cGUsIG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVh
bj4oZ2V0RXhlY3V0b3IoKSwgbnVsbCkgew0KKwkgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQor
CSAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQorCSAg
ICAgICAgICAgICAgICAgICAgaWYgKGlzU3VjY2VzcygpICYmIGdldERhdGEoKSkgew0KKwkgICAg
ICAgICAgICAgICAgICAgIAl1cGRhdGVMYXN0U3RlcFRpbWUoZXhlY0N0eCk7DQorCSAgICAgICAg
ICAgICAgICAgICAgCWZSdW5Db250cm9sLnN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUsIG5ldyBSZXF1
ZXN0TW9uaXRvcihnZXRFeGVjdXRvcigpLCBudWxsKSk7DQorCSAgICAgICAgICAgICAgICAgICAg
fSBlbHNlIGlmIChkb0NhbkVucXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKSkgew0KKwkgICAg
ICAgICAgICAgICAgICAgICAgICBkb0VucXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKTsNCisJ
ICAgICAgICAgICAgICAgICAgICB9DQorCSAgICAgICAgICAgICAgICB9DQorCSAgICAgICAgICAg
IH0pOw0KKyAgICAJfQ0KKyAgICB9DQorDQorCS8qKg0KKwkgKiBFbnF1ZXVlIHRoZSBnaXZlbiBz
dGVwIGZvciBsYXRlciBleGVjdXRpb24uDQorCSAqIA0KKwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkg
KiBAcGFyYW0gc3RlcFR5cGUNCisJICovDQorCXByaXZhdGUgdm9pZCBkb0VucXVldWVTdGVwKGZp
bmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGUp
IHsNCisJCUxpc3Q8U3RlcFJlcXVlc3Q+IHN0ZXBRdWV1ZSA9IGZTdGVwUXVldWVzLmdldChleGVj
Q3R4KTsNCisJCWlmIChzdGVwUXVldWUgPT0gbnVsbCkgew0KKwkJICAgIHN0ZXBRdWV1ZSA9IG5l
dyBMaW5rZWRMaXN0PFN0ZXBSZXF1ZXN0PigpOw0KKwkJICAgIGZTdGVwUXVldWVzLnB1dChleGVj
Q3R4LCBzdGVwUXVldWUpOw0KKwkJfQ0KKwkJaWYgKHN0ZXBRdWV1ZS5zaXplKCkgPCBmUXVldWVE
ZXB0aCkgew0KKwkJICAgIHN0ZXBRdWV1ZS5hZGQobmV3IFN0ZXBSZXF1ZXN0KHN0ZXBUeXBlKSk7
DQorCQl9DQorCX0NCiANCiAgICAgLyoqDQogICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgc3Rl
cCBpbnN0cnVjdGlvbiBmb3IgdGhlIGdpdmVuIGNvbnRleHQgaGFzIHRpbWVkIG91dC4NCkBAIC0x
ODgsMjcgKzI2Miw0NSBAQA0KICAgICAgICAgaWYgKGZ1dHVyZSAhPSBudWxsKSBmdXR1cmUuY2Fu
Y2VsKGZhbHNlKTsNCiAgICAgICAgIA0KICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHN0
ZXAgcGVuZGluZywgaWYgc28gZXhlY3V0ZSBpdA0KLSAgICAgICAgaWYgKGZTdGVwUXVldWVzLmNv
bnRhaW5zS2V5KGUuZ2V0RE1Db250ZXh0KCkpKSB7DQotICAgICAgICAgICAgTGlzdDxTdGVwUmVx
dWVzdD4gcXVldWUgPSBmU3RlcFF1ZXVlcy5nZXQoZS5nZXRETUNvbnRleHQoKSk7DQorICAgICAg
ICBwcm9jZXNzU3RlcFF1ZXVlKGUuZ2V0RE1Db250ZXh0KCkpOw0KKyAgICB9DQorDQorCS8qKg0K
KwkgKiBQcm9jZXNzIG5leHQgc3RlcCBvbiBxdWV1ZSBpZiBhbnkuDQorCSAqIEBwYXJhbSBleGVj
Q3R4DQorCSAqLw0KKwlwcml2YXRlIHZvaWQgcHJvY2Vzc1N0ZXBRdWV1ZShmaW5hbCBJRXhlY3V0
aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisJCWlmIChmU3RlcFF1ZXVlcy5jb250YWluc0tleShl
eGVjQ3R4KSkgew0KKwkJCWZpbmFsIGludCBzdGVwRGVsYXk9IGlzU3RlcHBpbmdEaXNhYmxlZChl
eGVjQ3R4KSA/IDEwIDogZ2V0U3RlcERlbGF5KGV4ZWNDdHgpOw0KKwkJCWlmIChzdGVwRGVsYXkg
PiAwKSB7DQorCQkJCWdldEV4ZWN1dG9yKCkuc2NoZWR1bGUobmV3IERzZlJ1bm5hYmxlKCkgew0K
KwkJCQkJcHVibGljIHZvaWQgcnVuKCkgew0KKwkJCQkJCXByb2Nlc3NTdGVwUXVldWUoZXhlY0N0
eCk7DQorCQkJCQl9DQorCQkJCX0sIHN0ZXBEZWxheSwgVGltZVVuaXQuTUlMTElTRUNPTkRTKTsN
CisJCQkJcmV0dXJuOw0KKwkJCX0NCisgICAgICAgICAgICBMaXN0PFN0ZXBSZXF1ZXN0PiBxdWV1
ZSA9IGZTdGVwUXVldWVzLmdldChleGVjQ3R4KTsNCiAgICAgICAgICAgICBmaW5hbCBTdGVwUmVx
dWVzdCByZXF1ZXN0ID0gcXVldWUucmVtb3ZlKHF1ZXVlLnNpemUoKSAtIDEpOw0KLSAgICAgICAg
ICAgIGlmIChxdWV1ZS5pc0VtcHR5KCkpIGZTdGVwUXVldWVzLnJlbW92ZShlLmdldERNQ29udGV4
dCgpKTsNCisgICAgICAgICAgICBpZiAocXVldWUuaXNFbXB0eSgpKSBmU3RlcFF1ZXVlcy5yZW1v
dmUoZXhlY0N0eCk7DQogICAgICAgICAgICAgZlJ1bkNvbnRyb2wuY2FuU3RlcCgNCi0gICAgICAg
ICAgICAgICAgZS5nZXRETUNvbnRleHQoKSwgcmVxdWVzdC5mU3RlcFR5cGUsIA0KKyAgICAgICAg
ICAgICAgICBleGVjQ3R4LCByZXF1ZXN0LmZTdGVwVHlwZSwgDQogICAgICAgICAgICAgICAgIG5l
dyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4oZ2V0RXhlY3V0b3IoKSwgbnVsbCkgew0KICAg
ICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQogICAgICAgICAgICAgICAgICAgICBwcm90ZWN0
ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgaWYg
KGlzU3VjY2VzcygpICYmIGdldERhdGEoKSkgew0KKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1cGRhdGVMYXN0U3RlcFRpbWUoZXhlY0N0eCk7DQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGZSdW5Db250cm9sLnN0ZXAoDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl
LmdldERNQ29udGV4dCgpLCByZXF1ZXN0LmZTdGVwVHlwZSwgbmV3IFJlcXVlc3RNb25pdG9yKGdl
dEV4ZWN1dG9yKCksIG51bGwpKTsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4
ZWNDdHgsIHJlcXVlc3QuZlN0ZXBUeXBlLCBuZXcgUmVxdWVzdE1vbml0b3IoZ2V0RXhlY3V0b3Io
KSwgbnVsbCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIC8vIEZvciB3aGF0ZXZlciByZWFzb24gd2UgY2FuJ3Qgc3RlcCBh
bnltb3JlLCBzbyBjbGVhciBvdXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhl
IHN0ZXAgcXVldWUuDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZTdGVwUXVldWVzLnJl
bW92ZShlLmdldERNQ29udGV4dCgpKTsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgZlN0
ZXBRdWV1ZXMucmVtb3ZlKGV4ZWNDdHgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICB9DQot
ICAgIH0NCisJfQ0KIA0KICAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlciANCiAgICAgcHVibGlj
IHZvaWQgZXZlbnREaXNwYXRjaGVkKGZpbmFsIElSZXN1bWVkRE1FdmVudCBlKSB7DQpAQCAtMjQ0
LDQgKzMzNiwzMSBAQA0KICAgICAgICAgZlRpbWVkT3V0RmxhZ3MucHV0KGUuZ2V0RE1Db250ZXh0
KCksIEJvb2xlYW4uVFJVRSk7DQogICAgIH0NCiANCisJLyoqDQorCSAqIEBwYXJhbSBjb250ZXh0
DQorCSAqLw0KKwlwdWJsaWMgdm9pZCBkaXNhYmxlU3RlcHBpbmdGb3IoSUV4ZWN1dGlvbkRNQ29u
dGV4dCBjb250ZXh0KSB7DQorICAgICAgICBmRGlzYWJsZWRDb250ZXh0cy5wdXQoY29udGV4dCwg
Qm9vbGVhbi5UUlVFKTsNCisgICAgICAgIGZTdGVwUXVldWVzLnJlbW92ZShjb250ZXh0KTsNCisJ
fQ0KKw0KKwkvKioNCisJICogQHBhcmFtIGNvbnRleHQNCisJICovDQorCXB1YmxpYyB2b2lkIGVu
YWJsZVN0ZXBwaW5nRm9yKElFeGVjdXRpb25ETUNvbnRleHQgY29udGV4dCkgew0KKyAgICAgICAg
ZkRpc2FibGVkQ29udGV4dHMucmVtb3ZlKGNvbnRleHQpOw0KKwl9DQorDQorCXByaXZhdGUgYm9v
bGVhbiBpc1N0ZXBwaW5nRGlzYWJsZWQoSUV4ZWN1dGlvbkRNQ29udGV4dCBjb250ZXh0KSB7DQor
ICAgICAgICBCb29sZWFuIGRpc2FibGVkPSBmRGlzYWJsZWRDb250ZXh0cy5nZXQoY29udGV4dCk7
DQorICAgICAgICBpZiAoZGlzYWJsZWQgIT0gbnVsbCAmJiBkaXNhYmxlZC5ib29sZWFuVmFsdWUo
KSkgew0KKyAgICAgICAgCXJldHVybiB0cnVlOw0KKyAgICAgICAgfQ0KKyAgICAgICAgZm9yIChJ
RXhlY3V0aW9uRE1Db250ZXh0IGRpc2FibGVkQ3R4IDogZkRpc2FibGVkQ29udGV4dHMua2V5U2V0
KCkpIHsNCisJCQlpZiAoRE1Db250ZXh0cy5pc0FuY2VzdG9yT2YoY29udGV4dCwgZGlzYWJsZWRD
dHgpKSB7DQorCQkJCXJldHVybiB0cnVlOw0KKwkJCX0NCisJCX0NCisgICAgICAgIHJldHVybiBm
YWxzZTsNCisJfQ0KIH0NCiNQIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aQ0KSW5kZXg6IHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0RzZlNvdXJjZURpc3Bs
YXlBZGFwdGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5l
Y2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRh
cHRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11IC1yMS41IERzZlNv
dXJjZURpc3BsYXlBZGFwdGVyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZhCTMgSnVuIDIwMDgg
MjA6MTc6MTMgLTAwMDAJMS41DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9z
b3VyY2Vsb29rdXAvRHNmU291cmNlRGlzcGxheUFkYXB0ZXIuamF2YQkxIEp1bCAyMDA4IDA5OjU5
OjEzIC0wMDAwDQpAQCAtNTY0LDkgKzU2NCw2IEBADQogICAgIA0KICAgICBARHNmU2VydmljZUV2
ZW50SGFuZGxlcg0KICAgICBwdWJsaWMgdm9pZCBldmVudERpc3BhdGNoZWQoSVJ1bkNvbnRyb2wu
SVN1c3BlbmRlZERNRXZlbnQgZSkgew0KLSAgICAgICAgaWYgKGUuZ2V0UmVhc29uKCkgPT0gU3Rh
dGVDaGFuZ2VSZWFzb24uU1RFUCkgew0KLSAgICAgICAgICAgIHN0YXJ0QW5ub3RhdGlvbkNsZWFy
aW5nSm9iKGUuZ2V0RE1Db250ZXh0KCkpOw0KLSAgICAgICAgfQ0KICAgICAgICAgZlByZXZNb2Rl
bENvbnRleHQgPSBudWxsOw0KICAgICB9DQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvdWkvc291cmNlbG9va3VwL0luc3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YQ0K
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3Bs
dWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvdWkvc291cmNlbG9va3VwL0luc3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YSx2DQpy
ZXRyaWV2aW5nIHJldmlzaW9uIDEuMg0KZGlmZiAtdSAtcjEuMiBJbnN0cnVjdGlvblBvaW50ZXJN
YW5hZ2VyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxv
b2t1cC9JbnN0cnVjdGlvblBvaW50ZXJNYW5hZ2VyLmphdmEJMzAgTWF5IDIwMDggMjI6NTc6Mzkg
LTAwMDAJMS4yDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9zb3VyY2Vsb29r
dXAvSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlci5qYXZhCTEgSnVsIDIwMDggMDk6NTk6MTMgLTAw
MDANCkBAIC0yMSw2ICsyMSw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9k
ZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2Uu
SVJ1bkNvbnRyb2w7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklT
dGFjazsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRy
b2wuSUV4ZWN1dGlvbkRNQ29udGV4dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcudWkuRGVi
dWdVSVRvb2xzOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy51aS5JRGVidWdVSUNvbnN0YW50
czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamZhY2UudGV4dC5Qb3NpdGlvbjsNCkBAIC0zNyw3ICsz
OCwxNyBAQA0KIEBUaHJlYWRTYWZlDQogY2xhc3MgSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlciB7
DQogDQorCS8qKg0KKwkgKiBDdXJyZW50IGluc3RydWN0aW9uIHBvaW50ZXIgYW5ub3RhdGlvbiB0
eXBlLg0KKwkgKi8NCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIElEX0NVUlJFTlRfSVA9
ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5jdXJyZW50SVAiOyAvLyROT04tTkxTLTEkDQorCQ0KICAg
ICAvKioNCisJICogU2Vjb25kYXJ5IGluc3RydWN0aW9uIHBvaW50ZXIgYW5ub3RhdGlvbiB0eXBl
Lg0KKwkgKi8NCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIElEX1NFQ09OREFSWV9JUD0g
Im9yZy5lY2xpcHNlLmRkLmRlYnVnLnNlY29uZGFyeUlQIjsgLy8kTk9OLU5MUy0xJA0KKw0KKwkv
KioNCiAgICAgICogRWRpdG9yIGFubm90YXRpb24gb2JqZWN0IGZvciBpbnN0cnVjdGlvbiBwb2lu
dGVycy4NCiAgICAgICovDQogICAgIHN0YXRpYyBjbGFzcyBJUEFubm90YXRpb24gZXh0ZW5kcyBB
bm5vdGF0aW9uIHsNCkBAIC02MSw3ICs3Miw3IEBADQogICAgICAgICAgICAgZkZyYW1lID0gZnJh
bWU7DQogICAgICAgICAgICAgZkltYWdlID0gaW1hZ2U7DQogICAgICAgICB9DQotICAgICAgICAg
ICAgDQorICAgICAgICANCiAgICAgICAgIC8qKg0KICAgICAgICAgICogUmV0dXJucyB0aGlzIGFu
bm90YXRpb24ncyBpbWFnZS4NCiAgICAgICAgICAqIA0KQEAgLTE3MCwxNSArMTgxLDE5IEBADQog
ICAgICAgICBTdHJpbmcgdGV4dDsNCiAgICAgICAgIEltYWdlIGltYWdlOw0KICAgICAgICAgaWYg
KGlzVG9wRnJhbWUpIHsNCi0gICAgICAgICAgICBpZCA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5j
dXJyZW50SVAiOyAvLyROT04tTkxTLTEkDQorICAgICAgICAgICAgaWQgPSBJRF9DVVJSRU5UX0lQ
Ow0KICAgICAgICAgICAgIHRleHQgPSAiRGVidWcgQ3VycmVudCBJbnN0cnVjdGlvbiBQb2ludGVy
IjsgLy8kTk9OLU5MUy0xJA0KICAgICAgICAgICAgIGltYWdlID0gRGVidWdVSVRvb2xzLmdldElt
YWdlKElEZWJ1Z1VJQ29uc3RhbnRzLklNR19PQkpTX0lOU1RSVUNUSU9OX1BPSU5URVJfVE9QKTsN
CiAgICAgICAgIH0gZWxzZSB7DQotICAgICAgICAgICAgaWQgPSAib3JnLmVjbGlwc2UuZGQuZGVi
dWcuc2Vjb25kYXJ5SVAiOyAvLyROT04tTkxTLTEkDQorICAgICAgICAgICAgaWQgPSBJRF9TRUNP
TkRBUllfSVA7DQogICAgICAgICAgICAgdGV4dCA9ICJEZWJ1ZyBDYWxsIFN0YWNrIjsgLy8kTk9O
LU5MUy0xJA0KICAgICAgICAgICAgIGltYWdlID0gRGVidWdVSVRvb2xzLmdldEltYWdlKElEZWJ1
Z1VJQ29uc3RhbnRzLklNR19PQkpTX0lOU1RSVUNUSU9OX1BPSU5URVIpOw0KICAgICAgICAgfQ0K
IA0KKyAgICAgICAgaWYgKGlzVG9wRnJhbWUpIHsNCisgICAgICAgIAkvLyByZW1vdmUgb3RoZXIg
dG9wLWZyYW1lIElQIGFubm90YXRpb24ocykgZm9yIHRoaXMgZXhlY3V0aW9uLWNvbnRleHQNCisg
ICAgICAgIAlyZW1vdmVUb3BGcmFtZUFubm90YXRpb25zKERNQ29udGV4dHMuZ2V0QW5jZXN0b3JP
ZlR5cGUoZnJhbWUuZ2V0UGFyZW50cygpWzBdLCBJRXhlY3V0aW9uRE1Db250ZXh0LmNsYXNzKSk7
DQorICAgICAgICB9DQogICAgICAgICBBbm5vdGF0aW9uIGFubm90YXRpb24gPSBuZXcgSVBBbm5v
dGF0aW9uKGZyYW1lLCBpZCwgdGV4dCwgaW1hZ2UpOyANCiAgICAgICAgIA0KIAkJLy8gQWRkIHRo
ZSBhbm5vdGF0aW9uIGF0IHRoZSBwb3NpdGlvbiB0byB0aGUgZWRpdG9yJ3MgYW5ub3RhdGlvbiBt
b2RlbC4NCkBAIC0yMDUsNyArMjIwLDI1IEBADQogICAgICAgICAgICAgfSAgICAgICAgICAgIA0K
ICAgICAgICAgfQ0KIAl9DQotCQ0KKw0KKwkvKioNCisJICogUmVtb3ZlIGFsbCB0b3AtZnJhbWUg
YW5ub3RhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZGVidWcgdGFyZ2V0IHRo
YXQgdGhpcyBjbGFzcw0KKwkgKiBpcyB0cmFja2luZy4NCisJICovDQorCXB1YmxpYyB2b2lkIHJl
bW92ZVRvcEZyYW1lQW5ub3RhdGlvbnMoSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29udGV4dCBl
eGVjRG1jKSB7DQorCQkvLyBSZXRyaWV2ZSB0aGUgbWFwcGluZyBvZiB0aHJlYWRzIHRvIGNvbnRl
eHQgbGlzdHMNCisgICAgICAgIHN5bmNocm9uaXplZChmQW5ub3RhdGlvbldyYXBwZXJzKSB7DQor
ICAgICAgICAgICAgZm9yIChJdGVyYXRvcjxBbm5vdGF0aW9uV3JhcHBlcj4gd3JhcHBlckl0ciA9
IGZBbm5vdGF0aW9uV3JhcHBlcnMuaXRlcmF0b3IoKTsgd3JhcHBlckl0ci5oYXNOZXh0KCk7KSB7
DQorICAgICAgICAgICAgICAgIEFubm90YXRpb25XcmFwcGVyIHdyYXBwZXIgPSB3cmFwcGVySXRy
Lm5leHQoKTsNCisgICAgICAgICAgICAgICAgaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKHdy
YXBwZXIuZ2V0RnJhbWVETUMoKSwgZXhlY0RtYykgDQorICAgICAgICAgICAgICAgIAkJJiYgSURf
Q1VSUkVOVF9JUC5lcXVhbHMod3JhcHBlci5nZXRBbm5vdGF0aW9uKCkuZ2V0VHlwZSgpKSkgew0K
KyAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQW5ub3RhdGlvbih3cmFwcGVyLmdldFRleHRFZGl0
b3IoKSwgd3JhcHBlci5nZXRBbm5vdGF0aW9uKCkpOw0KKyAgICAgICAgICAgICAgICAgICAgd3Jh
cHBlckl0ci5yZW1vdmUoKTsNCisgICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgIH0NCisg
ICAgICAgIH0NCisJfQ0KKw0KICAgICAvKiogUmVtb3ZlcyBhbGwgYW5ub3RhdGlvbnMgdHJhY2tl
ZCBieSB0aGlzIG1hbmFnZXIgKi8NCiAgICAgcHVibGljIHZvaWQgcmVtb3ZlQWxsQW5ub3RhdGlv
bnMoKSB7DQogICAgICAgICBzeW5jaHJvbml6ZWQoZkFubm90YXRpb25XcmFwcGVycykgew0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdExhdW5jaFZNUHJvdmlkZXIuamF2YQ0KPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3Jn
LmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50
ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdExhdW5jaFZNUHJv
dmlkZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMw0KZGlmZiAtdSAtcjEuMyBBYnN0
cmFjdExhdW5jaFZNUHJvdmlkZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdExhdW5j
aFZNUHJvdmlkZXIuamF2YQkyNCBKdW4gMjAwOCAxNzozNDo0MCAtMDAwMAkxLjMNCisrKyBzcmMv
b3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2Rl
bC9sYXVuY2gvQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVyLmphdmEJMSBKdWwgMjAwOCAwOTo1OTox
MyAtMDAwMA0KQEAgLTI3LDkgKzI3LDExIEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
ZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLlN0YWNrRnJhbWVz
Vk1Ob2RlLkluY29tcGxldGVTdGFja1ZNQ29udGV4dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQu
ZHNmLmRlYnVnLmludGVybmFsLnVpLkRzZkRlYnVnVUlQbHVnaW47DQogaW1wb3J0IG9yZy5lY2xp
cHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5J
U3VzcGVuZGVkRE1FdmVudDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpLklE
c2ZEZWJ1Z1VJQ29uc3RhbnRzOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5E
c2ZTZXJ2aWNlc1RyYWNrZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5zZXJ2aWNlLkRz
ZlNlc3Npb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWwuQWJzdHJh
Y3RWTUFkYXB0ZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWwuSVJv
b3RWTU5vZGU7DQpAQCAtMTI4LDcgKzEzMCwzNSBAQA0KICAgICB9DQogDQogICAgIEBPdmVycmlk
ZQ0KLSAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChPYmplY3QgZXZlbnQpIHsNCisgICAgcHVi
bGljIHZvaWQgYWJvdXRUb0hhbmRsZUV2ZW50KE9iamVjdCBldmVudCkgew0KKwkJaWYgKGV2ZW50
IGluc3RhbmNlb2YgSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQpIHsNCisJCQlpZiAoLyog
ZlN5bmNocm9uaXplZFN0ZXBwaW5nICovIHRydWUpIHsNCisJCQkJRHNmU2VydmljZXNUcmFja2Vy
IHRyYWNrZXIgPSBuZXcgRHNmU2VydmljZXNUcmFja2VyKERzZkRlYnVnVUlQbHVnaW4uZ2V0QnVu
ZGxlQ29udGV4dCgpLCBnZXRTZXNzaW9uKCkuZ2V0SWQoKSk7DQorCQkJCVN0ZXBRdWV1ZU1hbmFn
ZXIgc3RlcFF1ZXVlID0gdHJhY2tlci5nZXRTZXJ2aWNlKFN0ZXBRdWV1ZU1hbmFnZXIuY2xhc3Mp
Ow0KKwkJCQl0cmFja2VyLmRpc3Bvc2UoKTsNCisJCQkJaWYgKHN0ZXBRdWV1ZSAhPSBudWxsKSB7
DQorCQkJCQlzdGVwUXVldWUuZGlzYWJsZVN0ZXBwaW5nRm9yKCgoSVJ1bkNvbnRyb2wuSVN1c3Bl
bmRlZERNRXZlbnQpIGV2ZW50KS5nZXRETUNvbnRleHQoKSk7DQorCQkJCX0NCisJCQl9DQorCQl9
DQorICAgIH0NCisNCisgICAgQE92ZXJyaWRlDQorICAgIHB1YmxpYyB2b2lkIGRvbmVIYW5kbGVF
dmVudChPYmplY3QgZXZlbnQpIHsNCisJCWlmIChldmVudCBpbnN0YW5jZW9mIElSdW5Db250cm9s
LklTdXNwZW5kZWRETUV2ZW50KSB7DQorCQkJaWYgKC8qIGZTeW5jaHJvbml6ZWRTdGVwcGluZyAq
LyB0cnVlKSB7DQorCQkJCURzZlNlcnZpY2VzVHJhY2tlciB0cmFja2VyID0gbmV3IERzZlNlcnZp
Y2VzVHJhY2tlcihEc2ZEZWJ1Z1VJUGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKSwgZ2V0U2Vzc2lv
bigpLmdldElkKCkpOw0KKwkJCQlTdGVwUXVldWVNYW5hZ2VyIHN0ZXBRdWV1ZSA9IHRyYWNrZXIu
Z2V0U2VydmljZShTdGVwUXVldWVNYW5hZ2VyLmNsYXNzKTsNCisJCQkJdHJhY2tlci5kaXNwb3Nl
KCk7DQorCQkJCWlmIChzdGVwUXVldWUgIT0gbnVsbCkgew0KKwkJCQkJc3RlcFF1ZXVlLmVuYWJs
ZVN0ZXBwaW5nRm9yKCgoSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQpIGV2ZW50KS5nZXRE
TUNvbnRleHQoKSk7DQorCQkJCX0NCisJCQl9DQorCQl9DQorICAgIH0NCisgICAgDQorICAgIEBP
dmVycmlkZQ0KKyAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChPYmplY3QgZXZlbnQsIGZpbmFs
IFJlcXVlc3RNb25pdG9yIHJtKSB7DQogICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBEb3Vi
bGVDbGlja0V2ZW50ICYmICFpc0Rpc3Bvc2VkKCkpIHsNCiAgICAgICAgICAgICBmaW5hbCBJU2Vs
ZWN0aW9uIHNlbGVjdGlvbj0gKChEb3VibGVDbGlja0V2ZW50KSBldmVudCkuZ2V0U2VsZWN0aW9u
KCk7DQogICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9mIElTdHJ1Y3R1cmVkU2Vs
ZWN0aW9uKSB7DQpAQCAtMTQzLDE1ICsxNzMsMTYgQEANCiAJCQkJCQlmaW5hbCBFeHBhbmRTdGFj
a0V2ZW50IGV4cGFuZFN0YWNrRXZlbnQgPSBuZXcgRXhwYW5kU3RhY2tFdmVudChleGVDdHgpOw0K
IAkJCQkJCWdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVubmFibGUoKSB7DQogCQkJCQkJ
ICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCi0JCQkJCQkgICAgICAgIGhhbmRsZUV2ZW50KGV4cGFu
ZFN0YWNrRXZlbnQpOw0KKwkJCQkJCSAgICAgICAgaGFuZGxlRXZlbnQoZXhwYW5kU3RhY2tFdmVu
dCwgbnVsbCk7DQogCQkJCQkJICAgIH0NCiAJCQkJCQl9KTsNCiAgICAgICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIH0NCisgICAgICAgICAgICBybS5k
b25lKCk7DQogICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgfQ0KLSAgICAJc3VwZXIuaGFu
ZGxlRXZlbnQoZXZlbnQpOw0KKyAgICAJc3VwZXIuaGFuZGxlRXZlbnQoZXZlbnQsIHJtKTsNCiAg
ICAgfQ0KIA0KICAgICBAT3ZlcnJpZGUNCkBAIC0xNzcsNyArMjA4LDcgQEANCiAJICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBTY2hlZHVsZWRGdXR1cmU8Pz4gZnV0dXJlPSBmUmVmcmVz
aFN0YWNrRnJhbWVzRnV0dXJlcy5nZXQoZXhlQ29udGV4dCk7DQogCSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgKGZ1dHVyZSAhPSBudWxsICYmICFpc0Rpc3Bvc2VkKCkpIHsNCiAJ
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZlJlZnJlc2hTdGFja0ZyYW1lc0Z1
dHVyZXMucmVtb3ZlKGV4ZUNvbnRleHQpOw0KLQkgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBoYW5kbGVFdmVudChuZXcgRnVsbFN0YWNrUmVmcmVzaEV2ZW50KGV4ZUNvbnRleHQp
KTsNCisJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXZlbnQobmV3
IEZ1bGxTdGFja1JlZnJlc2hFdmVudChleGVDb250ZXh0KSwgbnVsbCk7DQogCSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfQ0KIAkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0p
Ow0KIAkgICAgICAgICAgICAgICAgICAgIH0NCg==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>106581</attachid>
            <date>2008-07-04 10:02:00 -0400</date>
            <delta_ts>2008-07-08 07:33:22 -0400</delta_ts>
            <desc>Updated patch with preferences</desc>
            <filename>patch_214386_2.txt</filename>
            <type>text/plain</type>
            <size>94868</size>
            <attacher name="Anton Leherbauer">anton.leherbauer</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZGQuZ2RiLnVp
DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC91aS9HZGJBZGFwdGVyRmFj
dG9yeS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBz
ZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5nZGIudWkvc3JjL29yZy9lY2xpcHNlL2Rk
L2dkYi9pbnRlcm5hbC91aS9HZGJBZGFwdGVyRmFjdG9yeS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS4xMA0KZGlmZiAtdSAtcjEuMTAgR2RiQWRhcHRlckZhY3RvcnkuamF2YQ0KLS0tIHNy
Yy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvdWkvR2RiQWRhcHRlckZhY3RvcnkuamF2YQky
OCBNYXkgMjAwOCAxODoyNToxMiAtMDAwMAkxLjEwDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2dk
Yi9pbnRlcm5hbC91aS9HZGJBZGFwdGVyRmFjdG9yeS5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MDYg
LTAwMDANCkBAIC0xOSw2ICsxOSw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGlt
ZS5JQWRhcHRlckZhY3Rvcnk7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50
LkltbXV0YWJsZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuVGhyZWFk
U2FmZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lv
bmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkRl
ZmF1bHREc2ZNb2RlbFNlbGVjdGlvblBvbGljeUZhY3Rvcnk7DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy51aS5hY3Rpb25zLkRzZlJlc3VtZUNvbW1hbmQ7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS5hY3Rpb25zLkRzZlN0ZXBJbnRvQ29tbWFuZDsNCkBAIC03
OSw2ICs4MCw3IEBADQogICAgICAgICBmaW5hbCBEc2ZTdXNwZW5kVHJpZ2dlciBmU3VzcGVuZFRy
aWdnZXI7DQogCQlmaW5hbCBEc2ZTdGVwcGluZ01vZGVUYXJnZXQgZlN0ZXBwaW5nTW9kZVRhcmdl
dDsNCiAJCWZpbmFsIElNb2RlbFNlbGVjdGlvblBvbGljeUZhY3RvcnkgZk1vZGVsU2VsZWN0aW9u
UG9saWN5RmFjdG9yeTsNCisJCWZpbmFsIFN0ZXBwaW5nQ29udHJvbGxlciBmU3RlcHBpbmdDb250
cm9sbGVyOw0KIA0KICAgICAgICAgU2Vzc2lvbkFkYXB0ZXJTZXQoR2RiTGF1bmNoIGxhdW5jaCkg
ew0KICAgICAgICAgICAgIGZMYXVuY2ggPSBsYXVuY2g7DQpAQCAtMTI4LDYgKzEzMCwxMSBAQA0K
ICAgICAgICAgICAgICAqIHNlc3Npb24uDQogICAgICAgICAgICAgICovDQogICAgICAgICAgICAg
c2Vzc2lvbi5yZWdpc3Rlck1vZGVsQWRhcHRlcihJTGF1bmNoLmNsYXNzLCBmTGF1bmNoKTsNCisN
CisgICAgICAgICAgICAvLyByZWdpc3RlciBzdGVwcGluZyBjb250cm9sbGVyDQorICAgICAgICAg
ICAgZlN0ZXBwaW5nQ29udHJvbGxlciA9IG5ldyBTdGVwcGluZ0NvbnRyb2xsZXIoc2Vzc2lvbik7
DQorICAgICAgICAgICAgc2Vzc2lvbi5yZWdpc3Rlck1vZGVsQWRhcHRlcihTdGVwcGluZ0NvbnRy
b2xsZXIuY2xhc3MsIGZTdGVwcGluZ0NvbnRyb2xsZXIpOw0KKw0KICAgICAgICAgfQ0KICAgICAg
ICAgDQogICAgICAgICB2b2lkIGRpc3Bvc2UoKSB7DQpAQCAtMTQ3LDcgKzE1NCw3IEBADQogICAg
ICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElSZXN0YXJ0LmNsYXNzKTsN
CiAgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSVRlcm1pbmF0ZUhh
bmRsZXIuY2xhc3MpOw0KICAgICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRl
cihJTW9kZWxTZWxlY3Rpb25Qb2xpY3lGYWN0b3J5LmNsYXNzKTsNCi0NCisgICAgICAgICAgICAN
CiAgICAgICAgICAgICBmU3RlcEludG9Db21tYW5kLmRpc3Bvc2UoKTsNCiAgICAgICAgICAgICBm
U3RlcE92ZXJDb21tYW5kLmRpc3Bvc2UoKTsNCiAgICAgICAgICAgICBmU3RlcFJldHVybkNvbW1h
bmQuZGlzcG9zZSgpOw0KQEAgLTE1Niw2ICsxNjMsOSBAQA0KICAgICAgICAgICAgIGZSZXN0YXJ0
Q29tbWFuZC5kaXNwb3NlKCk7DQogICAgICAgICAgICAgZlRlcm1pbmF0ZUNvbW1hbmQuZGlzcG9z
ZSgpOw0KICAgICAgICAgICAgIGZTdXNwZW5kVHJpZ2dlci5kaXNwb3NlKCk7DQorICAgICAgICAg
ICAgDQorICAgICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKFN0ZXBwaW5n
Q29udHJvbGxlci5jbGFzcyk7DQorICAgICAgICAgICAgZlN0ZXBwaW5nQ29udHJvbGxlci5kaXNw
b3NlKCk7DQogICAgICAgICB9DQogICAgICAgICANCiAgICAgICAgIA0KI1Agb3JnLmVjbGlwc2Uu
ZGQuZXhhbXBsZXMucGRhDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9s
YXVuY2gvUERBU2VydmljZXNTaHV0ZG93blNlcXVlbmNlLmphdmENCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBm
aWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNl
LmRkLmV4YW1wbGVzLnBkYS9zcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5jaC9Q
REFTZXJ2aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEu
OA0KZGlmZiAtdSAtcjEuOCBQREFTZXJ2aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YQ0KLS0tIHNy
Yy9vcmcvZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzU2h1dGRvd25T
ZXF1ZW5jZS5qYXZhCTI1IEFwciAyMDA4IDE4OjAxOjE3IC0wMDAwCTEuOA0KKysrIHNyYy9vcmcv
ZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzU2h1dGRvd25TZXF1ZW5j
ZS5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MDggLTAwMDANCkBAIC0xNyw3ICsxNyw2IEBADQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5TZXF1ZW5jZTsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuQnJlYWtwb2ludHNNZWRpYXRvcjsNCi1pbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuU3RlcFF1ZXVlTWFuYWdlcjsNCiBpbXBv
cnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZXNUcmFja2VyOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5JRHNmU2VydmljZTsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZXhhbXBsZXMucGRhLlBEQVBsdWdpbjsNCkBAIC04OSwxMiArODgsNiBAQA0KICAg
ICAgICAgbmV3IFN0ZXAoKSB7DQogICAgICAgICAgICAgQE92ZXJyaWRlDQogICAgICAgICAgICAg
cHVibGljIHZvaWQgZXhlY3V0ZShSZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgew0KLSAg
ICAgICAgICAgICAgICBzaHV0ZG93blNlcnZpY2UoU3RlcFF1ZXVlTWFuYWdlci5jbGFzcywgcmVx
dWVzdE1vbml0b3IpOw0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0sDQotICAgICAgICBuZXcg
U3RlcCgpIHsNCi0gICAgICAgICAgICBAT3ZlcnJpZGUNCi0gICAgICAgICAgICBwdWJsaWMgdm9p
ZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7DQogICAgICAgICAgICAg
ICAgIHNodXRkb3duU2VydmljZShQREFSdW5Db250cm9sLmNsYXNzLCByZXF1ZXN0TW9uaXRvcik7
DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfSwNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQv
ZXhhbXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9v
cmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEvc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3Bk
YS9sYXVuY2gvUERBU2VydmljZXNJbml0U2VxdWVuY2UuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlz
aW9uIDEuOA0KZGlmZiAtdSAtcjEuOCBQREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZhDQotLS0g
c3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9sYXVuY2gvUERBU2VydmljZXNJbml0U2Vx
dWVuY2UuamF2YQkxNiBKdW4gMjAwOCAxODozMDo1MiAtMDAwMAkxLjgNCisrKyBzcmMvb3JnL2Vj
bGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZh
CTQgSnVsIDIwMDggMTM6NDY6MDggLTAwMDANCkBAIC0xMyw3ICsxMyw2IEBADQogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5TZXF1ZW5jZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnNlcnZpY2UuQnJlYWtwb2ludHNNZWRpYXRvcjsNCi1pbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuU3RlcFF1ZXVlTWFuYWdlcjsNCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vzc2lvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZXhhbXBsZXMucGRhLnNlcnZpY2UuUERBQnJlYWtwb2ludEF0dHJpYnV0ZVRyYW5zbGF0b3I7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmV4YW1wbGVzLnBkYS5zZXJ2aWNlLlBEQUJyZWFrcG9p
bnRzOw0KQEAgLTU2LDEzICs1NSw2IEBADQogICAgICAgICB9LA0KICAgICAgICAgbmV3IFN0ZXAo
KSB7IA0KICAgICAgICAgICAgIEBPdmVycmlkZQ0KLSAgICAgICAgICAgIHB1YmxpYyB2b2lkIGV4
ZWN1dGUoUmVxdWVzdE1vbml0b3IgcmVxdWVzdE1vbml0b3IpIHsNCi0gICAgICAgICAgICAgICAg
Ly8gU3RhcnQgdGhlIHNlcnZpY2UgdG8gbWFuYWdlIHN0ZXAgYWN0aW9ucy4NCi0gICAgICAgICAg
ICAgICAgbmV3IFN0ZXBRdWV1ZU1hbmFnZXIoZlNlc3Npb24pLmluaXRpYWxpemUocmVxdWVzdE1v
bml0b3IpOw0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0sDQotICAgICAgICBuZXcgU3RlcCgp
IHsgDQotICAgICAgICAgICAgQE92ZXJyaWRlDQogICAgICAgICAgICAgcHVibGljIHZvaWQgZXhl
Y3V0ZShmaW5hbCBSZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgew0KICAgICAgICAgICAg
ICAgICAvLyBTdGFydCB0aGUgbG93LWxldmVsIGJyZWFrcG9pbnQgc2VydmljZSANCiAgICAgICAg
ICAgICAgICAgbmV3IFBEQUJyZWFrcG9pbnRzKGZTZXNzaW9uKS5pbml0aWFsaXplKG5ldyBSZXF1
ZXN0TW9uaXRvcihnZXRFeGVjdXRvcigpLCByZXF1ZXN0TW9uaXRvcikpOw0KI1Agb3JnLmVjbGlw
c2UuZGQuZ2RiDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC9wcm92aXNp
b25hbC9sYXVuY2hpbmcvU2VydmljZXNMYXVuY2hTZXF1ZW5jZS5qYXZhDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNs
aXBzZS5kZC5nZGIvc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC9wcm92aXNpb25hbC9s
YXVuY2hpbmcvU2VydmljZXNMYXVuY2hTZXF1ZW5jZS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNp
b24gMS45DQpkaWZmIC11IC1yMS45IFNlcnZpY2VzTGF1bmNoU2VxdWVuY2UuamF2YQ0KLS0tIHNy
Yy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvcHJvdmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZp
Y2VzTGF1bmNoU2VxdWVuY2UuamF2YQkzIEp1bCAyMDA4IDE5OjA1OjIwIC0wMDAwCTEuOQ0KKysr
IHNyYy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvcHJvdmlzaW9uYWwvbGF1bmNoaW5nL1Nl
cnZpY2VzTGF1bmNoU2VxdWVuY2UuamF2YQk0IEp1bCAyMDA4IDEzOjQ2OjEwIC0wMDAwDQpAQCAt
MjQsNyArMjQsNiBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5J
UnVuQ29udHJvbDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVNv
dXJjZUxvb2t1cDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0
YWNrOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVN
YW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5kZC5nZGIuaW50ZXJuYWwucHJvdmlzaW9uYWwuc2VydmljZS5j
b21tYW5kLkdEQkNvbnRyb2w7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmdkYi5pbnRlcm5hbC5w
cm92aXNpb25hbC5zZXJ2aWNlLmNvbW1hbmQuR0RCQ29udHJvbC5TZXNzaW9uVHlwZTsNCkBAIC01
NiwxMCArNTUsNiBAQA0KICAgICAgICAgfX0sDQogICAgICAgICBuZXcgU3RlcCgpIHsgQE92ZXJy
aWRlDQogICAgICAgICBwdWJsaWMgdm9pZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RN
b25pdG9yKSB7DQotICAgICAgICAgICAgbmV3IFN0ZXBRdWV1ZU1hbmFnZXIoZlNlc3Npb24pLmlu
aXRpYWxpemUocmVxdWVzdE1vbml0b3IpOw0KLSAgICAgICAgfX0sDQotICAgICAgICBuZXcgU3Rl
cCgpIHsgQE92ZXJyaWRlDQotICAgICAgICBwdWJsaWMgdm9pZCBleGVjdXRlKFJlcXVlc3RNb25p
dG9yIHJlcXVlc3RNb25pdG9yKSB7DQogICAgICAgICAJZkxhdW5jaC5nZXRTZXJ2aWNlRmFjdG9y
eSgpLmNyZWF0ZVNlcnZpY2UoZlNlc3Npb24sIElNZW1vcnkuY2xhc3MpLmluaXRpYWxpemUocmVx
dWVzdE1vbml0b3IpOw0KICAgICAgICAgfX0sDQogICAgICAgICBuZXcgU3RlcCgpIHsgQE92ZXJy
aWRlDQojUCBvcmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEudWkNCkluZGV4OiBzcmMvb3JnL2Vj
bGlwc2UvZGQvZXhhbXBsZXMvcGRhL3VpL1BEQUFkYXB0ZXJGYWN0b3J5LmphdmENCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29y
Zy5lY2xpcHNlLmRkLmV4YW1wbGVzLnBkYS51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMv
cGRhL3VpL1BEQUFkYXB0ZXJGYWN0b3J5LmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjcN
CmRpZmYgLXUgLXIxLjcgUERBQWRhcHRlckZhY3RvcnkuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBz
ZS9kZC9leGFtcGxlcy9wZGEvdWkvUERBQWRhcHRlckZhY3RvcnkuamF2YQkxNyBKdW4gMjAwOCAy
MDo0NjoxMyAtMDAwMAkxLjcNCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL3Vp
L1BEQUFkYXB0ZXJGYWN0b3J5LmphdmEJNCBKdWwgMjAwOCAxMzo0NjoxNCAtMDAwMA0KQEAgLTE3
LDYgKzE3LDcgQEANCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLklBZGFwdGVyRmFj
dG9yeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuSW1tdXRhYmxlOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRTYWZlOw0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21v
ZGVsLlN0ZXBwaW5nQ29udHJvbGxlcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5sYXVuY2guRGVmYXVsdERzZk1vZGVs
U2VsZWN0aW9uUG9saWN5RmFjdG9yeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LnVpLmFjdGlvbnMuRHNmUmVzdW1lQ29tbWFuZDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmRlYnVnLnVpLmFjdGlvbnMuRHNmU3RlcEludG9Db21tYW5kOw0KQEAgLTYyLDcgKzYzLDcgQEAN
CiBwdWJsaWMgY2xhc3MgUERBQWRhcHRlckZhY3RvcnkgaW1wbGVtZW50cyBJQWRhcHRlckZhY3Rv
cnksIElMYXVuY2hlc0xpc3RlbmVyMg0KIHsNCiAgICAgLyoqDQotICAgICAqIENvbnRhaW5zIHRo
ZSBzZXQgb2YgYWRhcHRlcnMgdGhhdCBhcmUgY3JlYXRlZCBmb3IgZWFjeSBsYXVuY2ggaW5zdGFu
Y2UuDQorICAgICAqIENvbnRhaW5zIHRoZSBzZXQgb2YgYWRhcHRlcnMgdGhhdCBhcmUgY3JlYXRl
ZCBmb3IgZWFjaCBsYXVuY2ggaW5zdGFuY2UuDQogICAgICAqLw0KICAgICBASW1tdXRhYmxlDQog
ICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIExhdW5jaEFkYXB0ZXJTZXQgew0KQEAgLTg0LDYgKzg1
LDggQEANCiAgICAgICAgIGZpbmFsIElEZWJ1Z01vZGVsUHJvdmlkZXIgZkRlYnVnTW9kZWxQcm92
aWRlcjsNCiAgICAgICAgIGZpbmFsIFBEQUxhdW5jaCBmTGF1bmNoOw0KIA0KKwkJZmluYWwgU3Rl
cHBpbmdDb250cm9sbGVyIGZTdGVwcGluZ0NvbnRyb2xsZXI7DQorDQogCQlwcml2YXRlIElNb2Rl
bFNlbGVjdGlvblBvbGljeUZhY3RvcnkgZk1vZGVsU2VsZWN0aW9uUG9saWN5RmFjdG9yeTsNCiAN
CiAgICAgICAgIExhdW5jaEFkYXB0ZXJTZXQoUERBTGF1bmNoIGxhdW5jaCkgew0KQEAgLTEyOCw3
ICsxMzEsMTEgQEANCiAgICAgICAgICAgICAvLyBhbmQgZGVidWcgbW9kZWwgSUQgd2lsbCBiZSBh
c3NvY2lhdGVkIHdpdGggYWxsIERNQ29udGV4dHMgZnJvbSB0aGlzDQogICAgICAgICAgICAgLy8g
c2Vzc2lvbi4NCiAgICAgICAgICAgICBzZXNzaW9uLnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElMYXVu
Y2guY2xhc3MsIGZMYXVuY2gpOw0KLSAgICAgICAgfQ0KKw0KKyAgICAgICAgICAgIC8vIHJlZ2lz
dGVyIHN0ZXBwaW5nIGNvbnRyb2xsZXINCisgICAgICAgICAgICBmU3RlcHBpbmdDb250cm9sbGVy
ID0gbmV3IFN0ZXBwaW5nQ29udHJvbGxlcihzZXNzaW9uKTsNCisgICAgICAgICAgICBzZXNzaW9u
LnJlZ2lzdGVyTW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5jbGFzcywgZlN0ZXBwaW5n
Q29udHJvbGxlcik7DQorfQ0KICAgICAgICAgDQogICAgICAgICB2b2lkIGRpc3Bvc2UoKSB7DQog
ICAgICAgICAgICAgRHNmU2Vzc2lvbiBzZXNzaW9uID0gZkxhdW5jaC5nZXRTZXNzaW9uKCk7DQpA
QCAtMTUyLDcgKzE1OSwxMCBAQA0KICAgICAgICAgICAgIGZTdXNwZW5kQ29tbWFuZC5kaXNwb3Nl
KCk7DQogICAgICAgICAgICAgZlJlc3VtZUNvbW1hbmQuZGlzcG9zZSgpOw0KICAgICAgICAgICAg
IGZUZXJtaW5hdGVDb21tYW5kLmRpc3Bvc2UoKTsNCi0gICAgICAgIH0NCisNCisgICAgICAgICAg
ICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNz
KTsNCisgICAgICAgICAgICBmU3RlcHBpbmdDb250cm9sbGVyLmRpc3Bvc2UoKTsNCit9DQogICAg
IH0NCiANCiAgICAgcHJpdmF0ZSBNYXA8UERBTGF1bmNoLCBMYXVuY2hBZGFwdGVyU2V0PiBmTGF1
bmNoQWRhcHRlclNldHMgPQ0KI1Agb3JnLmVjbGlwc2UuZGQuZHNmLnVpDQpJbmRleDogc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTVByb3ZpZGVyLmphdmENCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVn
aW5zL29yZy5lY2xpcHNlLmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdt
b2RlbC9BYnN0cmFjdFZNUHJvdmlkZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMjUN
CmRpZmYgLXUgLXIxLjI1IEFic3RyYWN0Vk1Qcm92aWRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTVByb3ZpZGVyLmphdmEJMjQgSnVuIDIw
MDggMTg6MTM6MTMgLTAwMDAJMS4yNQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmll
d21vZGVsL0Fic3RyYWN0Vk1Qcm92aWRlci5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTUgLTAwMDAN
CkBAIC0yMCw2ICsyMCw3IEBADQogaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9y
Ow0KIGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlv
bjsNCiANCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuQ291bnRpbmdSZXF1
ZXN0TW9uaXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuRGF0YVJl
cXVlc3RNb25pdG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5JRHNm
U3RhdHVzQ29uc3RhbnRzOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5S
ZXF1ZXN0TW9uaXRvcjsNCkBAIC02MCw3ICs2MSw3IEBADQogICogQHNlZSBJVk1Ob2RlDQogICov
DQogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikNCi1hYnN0cmFjdCBwdWJsaWMgY2xh
c3MgQWJzdHJhY3RWTVByb3ZpZGVyIGltcGxlbWVudHMgSVZNUHJvdmlkZXINCithYnN0cmFjdCBw
dWJsaWMgY2xhc3MgQWJzdHJhY3RWTVByb3ZpZGVyIGltcGxlbWVudHMgSVZNUHJvdmlkZXIsIElW
TUV2ZW50TGlzdGVuZXINCiB7DQogICAgIA0KICAgICAvKiogUmVmZXJlbmNlIHRvIHRoZSBWTSBh
ZGFwdGVyIHRoYXQgb3ducyB0aGlzIHByb3ZpZGVyICovDQpAQCAtMjA0LDggKzIwNSwyMCBAQA0K
ICAgICAgKiBQcm9jZXNzZXMgdGhlIGdpdmVuIGV2ZW50IGluIHRoZSBnaXZlbiBwcm92aWRlciwg
c2VuZGluZyBtb2RlbCANCiAgICAgICogZGVsdGFzIGlmIG5lY2Vzc2FyeS4NCiAgICAgICovDQot
ICAgIHB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCkgew0KLSAgICAg
ICAgZm9yIChmaW5hbCBJVk1Nb2RlbFByb3h5IHByb3h5U3RyYXRlZ3kgOiBnZXRBY3RpdmVNb2Rl
bFByb3hpZXMoKSkgew0KKwlwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChmaW5hbCBPYmplY3QgZXZl
bnQpIHsNCisgICAgCWhhbmRsZUV2ZW50KGV2ZW50LCBudWxsKTsNCisgICAgfQ0KKwkNCisgICAg
LyoqDQorICAgICAqIHtAaW5oZXJpdERvY30NCisJICogQHNpbmNlIDEuMQ0KKwkgKi8NCisgICAg
cHVibGljIHZvaWQgaGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50LCBSZXF1ZXN0TW9uaXRv
ciBybSkgew0KKyAgICAJQ291bnRpbmdSZXF1ZXN0TW9uaXRvciBjcm0gPSBuZXcgQ291bnRpbmdS
ZXF1ZXN0TW9uaXRvcihnZXRFeGVjdXRvcigpLCBybSk7DQorICAgICAgICBmaW5hbCBMaXN0PElW
TU1vZGVsUHJveHk+IGFjdGl2ZU1vZGVsUHJveGllcz0gbmV3IEFycmF5TGlzdDxJVk1Nb2RlbFBy
b3h5PihnZXRBY3RpdmVNb2RlbFByb3hpZXMoKSk7DQorICAgIAljcm0uc2V0RG9uZUNvdW50KGFj
dGl2ZU1vZGVsUHJveGllcy5zaXplKCkpOw0KKw0KKyAgICAJZm9yIChmaW5hbCBJVk1Nb2RlbFBy
b3h5IHByb3h5U3RyYXRlZ3kgOiBhY3RpdmVNb2RlbFByb3hpZXMpIHsNCiAgICAgICAgICAgICBp
ZiAocHJveHlTdHJhdGVneS5pc0RlbHRhRXZlbnQoZXZlbnQpKSB7DQogICAgICAgICAgICAgICAg
IGlmICghZkV2ZW50UXVldWVzLmNvbnRhaW5zS2V5KHByb3h5U3RyYXRlZ3kpKSB7DQogICAgICAg
ICAgICAgICAgICAgICBmRXZlbnRRdWV1ZXMucHV0KHByb3h5U3RyYXRlZ3ksIG5ldyBNb2RlbFBy
b3h5RXZlbnRRdWV1ZSgpKTsNCkBAIC0yMjIsMTMgKzIzNSwxNiBAQA0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ICAgICAgICAgfQ0KKyAgICAgICAgICAgICAgICAgICAgY3JtLmRvbmUoKTsNCiAgICAgICAgICAg
ICAgICAgICAgIHF1ZXVlLmZFdmVudFF1ZXVlLmFkZChldmVudCk7DQogICAgICAgICAgICAgICAg
IH0gZWxzZSB7DQotICAgICAgICAgICAgICAgICAgICBkb0hhbmRsZUV2ZW50KHF1ZXVlLCBwcm94
eVN0cmF0ZWd5LCBldmVudCk7IA0KKyAgICAgICAgICAgICAgICAgICAgZG9IYW5kbGVFdmVudChx
dWV1ZSwgcHJveHlTdHJhdGVneSwgZXZlbnQsIGNybSk7DQogICAgICAgICAgICAgICAgIH0NCisg
ICAgICAgICAgICB9IGVsc2Ugew0KKyAgICAgICAgICAgIAljcm0uZG9uZSgpOw0KICAgICAgICAg
ICAgIH0NCiAgICAgICAgIH0NCi0gICAgICAgIA0KKw0KICAgICAgICAgLy8gQ2xlYW4gdXAgbW9k
ZWwgcHJveGllcyB0aGF0IHdlcmUgcmVtb3ZlZC4NCiAgICAgICAgIExpc3Q8SVZNTW9kZWxQcm94
eT4gYWN0aXZlUHJveGllcyA9IGdldEFjdGl2ZU1vZGVsUHJveGllcygpOw0KICAgICAgICAgZm9y
IChJdGVyYXRvcjxJVk1Nb2RlbFByb3h5PiBpdHIgPSBmRXZlbnRRdWV1ZXMua2V5U2V0KCkuaXRl
cmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsNCkBAIC0yMzcsOCArMjUzLDIyIEBADQogICAgICAg
ICAgICAgfQ0KICAgICAgICAgfQ0KICAgICB9DQotICAgICANCi0gICAgcHJpdmF0ZSB2b2lkIGRv
SGFuZGxlRXZlbnQoZmluYWwgTW9kZWxQcm94eUV2ZW50UXVldWUgcXVldWUsIGZpbmFsIElWTU1v
ZGVsUHJveHkgcHJveHlTdHJhdGVneSwgZmluYWwgT2JqZWN0IGV2ZW50KSB7DQorDQorICAgIC8q
Kg0KKyAgICAgKiB7QGluaGVyaXREb2N9DQorCSAqIEBzaW5jZSAxLjENCisJICovDQorICAgIHB1
YmxpYyB2b2lkIGFib3V0VG9IYW5kbGVFdmVudChmaW5hbCBPYmplY3QgZXZlbnQpIHsNCisgICAg
fQ0KKw0KKyAgICAvKioNCisgICAgICoge0Bpbmhlcml0RG9jfQ0KKwkgKiBAc2luY2UgMS4xDQor
CSAqLw0KKyAgICBwdWJsaWMgdm9pZCBkb25lSGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50
KSB7DQorICAgIH0NCisNCisgICAgcHJpdmF0ZSB2b2lkIGRvSGFuZGxlRXZlbnQoZmluYWwgTW9k
ZWxQcm94eUV2ZW50UXVldWUgcXVldWUsIGZpbmFsIElWTU1vZGVsUHJveHkgcHJveHlTdHJhdGVn
eSwgZmluYWwgT2JqZWN0IGV2ZW50LCBmaW5hbCBSZXF1ZXN0TW9uaXRvciBybSkgew0KICAgICAg
ICAgcXVldWUuZlByb2Nlc3NpbmdFdmVudCA9IHRydWU7DQogICAgICAgICBoYW5kbGVFdmVudCgN
CiAgICAgICAgICAgICBwcm94eVN0cmF0ZWd5LCBldmVudCwgDQpAQCAtMjQ3LDggKzI3NywxMCBA
QA0KICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQog
ICAgICAgICAgICAgICAgICAgICBxdWV1ZS5mUHJvY2Vzc2luZ0V2ZW50ID0gZmFsc2U7DQogICAg
ICAgICAgICAgICAgICAgICBpZiAoIXF1ZXVlLmZFdmVudFF1ZXVlLmlzRW1wdHkoKSkgew0KLSAg
ICAgICAgICAgICAgICAgICAgICAgIGRvSGFuZGxlRXZlbnQocXVldWUsIHByb3h5U3RyYXRlZ3ks
IHF1ZXVlLmZFdmVudFF1ZXVlLnJlbW92ZSgwKSk7DQotICAgICAgICAgICAgICAgICAgICB9ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQorICAgICAgICAgICAgICAgICAgICAg
ICAgZG9IYW5kbGVFdmVudChxdWV1ZSwgcHJveHlTdHJhdGVneSwgcXVldWUuZkV2ZW50UXVldWUu
cmVtb3ZlKDApLCBybSk7DQorICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KKyAgICAgICAg
ICAgICAgICAgICAgCXJtLmRvbmUoKTsNCisgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgIH0pOw0KICAgICB9DQpJbmRleDogc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTUFkYXB0ZXIuamF2YQ0KPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3Jn
LmVjbGlwc2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fi
c3RyYWN0Vk1BZGFwdGVyLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjEyDQpkaWZmIC11
IC1yMS4xMiBBYnN0cmFjdFZNQWRhcHRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTUFkYXB0ZXIuamF2YQkyIEp1biAyMDA4IDE3OjU0OjQ1
IC0wMDAwCTEuMTINCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9BYnN0
cmFjdFZNQWRhcHRlci5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTUgLTAwMDANCkBAIC0xMCwxNCAr
MTAsMTkgQEANCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCiBwYWNrYWdlIG9yZy5lY2xpcHNl
LmRkLmRzZi51aS52aWV3bW9kZWw7DQogDQoraW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7DQog
aW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsNCiBpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7
DQoraW1wb3J0IGphdmEudXRpbC5MaXN0Ow0KIGltcG9ydCBqYXZhLnV0aWwuTWFwOw0KIGltcG9y
dCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlvbjsNCiANCiBp
bXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLklTdGF0dXM7DQogaW1wb3J0IG9yZy5lY2xp
cHNlLmNvcmUucnVudGltZS5TdGF0dXM7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25j
dXJyZW50LkNvdW50aW5nUmVxdWVzdE1vbml0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRz
Zi5jb25jdXJyZW50LkRzZlJ1bm5hYmxlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29u
Y3VycmVudC5JRHNmU3RhdHVzQ29uc3RhbnRzOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
Y29uY3VycmVudC5JbW1lZGlhdGVFeGVjdXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmNvbmN1cnJlbnQuVGhyZWFkU2FmZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmludGVy
bmFsLnVpLkRzZlVJUGx1Z2luOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy5pbnRlcm5hbC51
aS52aWV3ZXJzLm1vZGVsLnByb3Zpc2lvbmFsLklDaGlsZHJlbkNvdW50VXBkYXRlOw0KQEAgLTcw
LDYgKzc1LDE2IEBADQogICAgICAgICB9DQogICAgIH0NCiANCisgICAgLyoqDQorICAgICAqIEVu
dW1lcmF0ZSB0aGUgVk0gcHJvdmlkZXJzLg0KKyAgICAgKiBAcmV0dXJuIEFuIGluc3RhbmNlIG9m
IHtAbGluayBJdGVyYWJsZTxJVk1Qcm92aWRlcj59DQorICAgICAqIA0KKwkgKiBAc2luY2UgMS4x
DQorCSAqLw0KKyAgICBwcm90ZWN0ZWQgSXRlcmFibGU8SVZNUHJvdmlkZXI+IGdldFZNUHJvdmlk
ZXJJdGVyYWJsZSgpIHsNCisgICAgCXJldHVybiBmVmlld01vZGVsUHJvdmlkZXJzLnZhbHVlcygp
Ow0KKyAgICB9DQorDQogICAgIHB1YmxpYyB2b2lkIGRpc3Bvc2UoKSB7DQogICAgICAgICBJVk1Q
cm92aWRlcltdIHByb3ZpZGVycyA9IG5ldyBJVk1Qcm92aWRlclswXTsgDQogICAgICAgICBzeW5j
aHJvbml6ZWQoZlZpZXdNb2RlbFByb3ZpZGVycykgew0KQEAgLTkxLDYgKzEwNiwxNSBAQA0KICAg
ICAgICAgfQ0KICAgICB9DQogICAgIA0KKyAgICAvKioNCisJICogQHJldHVybiB3aGV0aGVyIHRo
aXMgVk0gYWRhcHRlciBpcyBkaXNwb3NlZC4NCisJICogDQorICAgICAqIEBzaW5jZSAxLjENCisJ
ICovDQorCXB1YmxpYyBib29sZWFuIGlzRGlzcG9zZWQoKSB7DQorCQlyZXR1cm4gZkRpc3Bvc2Vk
Ow0KKwl9DQorDQogICAgIHB1YmxpYyB2b2lkIHVwZGF0ZShJSGFzQ2hpbGRyZW5VcGRhdGVbXSB1
cGRhdGVzKSB7DQogICAgICAgICBJVk1Qcm92aWRlciBwcm92aWRlciA9IGdldFZNUHJvdmlkZXIo
dXBkYXRlc1swXS5nZXRQcmVzZW50YXRpb25Db250ZXh0KCkpOw0KICAgICAgICAgaWYgKHByb3Zp
ZGVyICE9IG51bGwpIHsNCkBAIC0xODcsNCArMjExLDQ0IEBADQogICAgICAqLw0KICAgICBAVGhy
ZWFkU2FmZSAgICANCiAgICAgYWJzdHJhY3QgcHJvdGVjdGVkIElWTVByb3ZpZGVyIGNyZWF0ZVZp
ZXdNb2RlbFByb3ZpZGVyKElQcmVzZW50YXRpb25Db250ZXh0IGNvbnRleHQpOw0KKw0KKwkvKioN
CisJICogQHNpbmNlIDEuMQ0KKwkgKi8NCisJcHJvdGVjdGVkIGZpbmFsIHZvaWQgaGFuZGxlRXZl
bnQoZmluYWwgT2JqZWN0IGV2ZW50KSB7DQorICAgIAlmaW5hbCBMaXN0PElWTUV2ZW50TGlzdGVu
ZXI+IGV2ZW50TGlzdGVuZXIgPSBuZXcgQXJyYXlMaXN0PElWTUV2ZW50TGlzdGVuZXI+KCk7DQor
CQ0KKwkJZm9yIChJVk1Qcm92aWRlciB2bVByb3ZpZGVyIDogZ2V0Vk1Qcm92aWRlckl0ZXJhYmxl
KCkpIHsNCisJCQlpZiAodm1Qcm92aWRlciBpbnN0YW5jZW9mIElWTUV2ZW50TGlzdGVuZXIpIHsN
CisJCQkJZmluYWwgSVZNRXZlbnRMaXN0ZW5lciB2bUV2ZW50TGlzdGVuZXI9IChJVk1FdmVudExp
c3RlbmVyKSB2bVByb3ZpZGVyOw0KKwkJCQl2bVByb3ZpZGVyLmdldEV4ZWN1dG9yKCkuZXhlY3V0
ZShuZXcgRHNmUnVubmFibGUoKSB7DQorCQkJCQlwdWJsaWMgdm9pZCBydW4oKSB7DQorCQkJCQkJ
dm1FdmVudExpc3RlbmVyLmFib3V0VG9IYW5kbGVFdmVudChldmVudCk7DQorCQkJCQl9fSk7DQor
CQkJCWV2ZW50TGlzdGVuZXIuYWRkKHZtRXZlbnRMaXN0ZW5lcik7DQorCQkJfQ0KKwkJfQ0KKwkN
CisJCWlmICghZXZlbnRMaXN0ZW5lci5pc0VtcHR5KCkpIHsNCisJCQlmaW5hbCBDb3VudGluZ1Jl
cXVlc3RNb25pdG9yIGNybSA9IG5ldyBDb3VudGluZ1JlcXVlc3RNb25pdG9yKEltbWVkaWF0ZUV4
ZWN1dG9yLmdldEluc3RhbmNlKCksIG51bGwpIHsNCisJCQkJQE92ZXJyaWRlDQorCQkJCXByb3Rl
Y3RlZCB2b2lkIGhhbmRsZUNvbXBsZXRlZCgpIHsNCisJCQkJCWZvciAoZmluYWwgSVZNRXZlbnRM
aXN0ZW5lciB2bUV2ZW50TGlzdGVuZXIgOiBldmVudExpc3RlbmVyKSB7DQorCQkJCQkJdm1FdmVu
dExpc3RlbmVyLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVubmFibGUoKSB7DQorCQkJ
CQkJCXB1YmxpYyB2b2lkIHJ1bigpIHsNCisJCQkJCQkJCXZtRXZlbnRMaXN0ZW5lci5kb25lSGFu
ZGxlRXZlbnQoZXZlbnQpOw0KKwkJCQkJCQl9fSk7DQorCQkJCQl9DQorCQkJCX0NCisJCQl9Ow0K
KwkJCWNybS5zZXREb25lQ291bnQoZXZlbnRMaXN0ZW5lci5zaXplKCkpOw0KKwkgICAgICAgIA0K
KwkJCWZvciAoZmluYWwgSVZNRXZlbnRMaXN0ZW5lciB2bUV2ZW50TGlzdGVuZXIgOiBldmVudExp
c3RlbmVyKSB7DQorCQkJCXZtRXZlbnRMaXN0ZW5lci5nZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3
IERzZlJ1bm5hYmxlKCkgew0KKwkJCQkJcHVibGljIHZvaWQgcnVuKCkgew0KKwkJCQkJCXZtRXZl
bnRMaXN0ZW5lci5oYW5kbGVFdmVudChldmVudCwgY3JtKTsNCisJCQkJCX19KTsNCisJCQl9DQor
CQl9DQorCX0NCiB9DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwv
ZGF0YW1vZGVsL0Fic3RyYWN0RE1WTVByb3ZpZGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxl
OiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRk
LmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJz
dHJhY3RETVZNUHJvdmlkZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMg0KZGlmZiAt
dSAtcjEuMiBBYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi91aS92aWV3bW9kZWwvZGF0YW1vZGVsL0Fic3RyYWN0RE1WTVByb3ZpZGVyLmphdmEJMiBK
dW4gMjAwOCAxNzo1NDo0NSAtMDAwMAkxLjINCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3Vp
L3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNUHJvdmlkZXIuamF2YQk0IEp1bCAyMDA4
IDEzOjQ2OjE1IC0wMDAwDQpAQCAtNDQsMTQgKzQ0LDYgQEANCiBhYnN0cmFjdCBwdWJsaWMgY2xh
c3MgQWJzdHJhY3RETVZNUHJvdmlkZXIgZXh0ZW5kcyBBYnN0cmFjdENhY2hpbmdWTVByb3ZpZGVy
DQogew0KICAgICBwcml2YXRlIGZpbmFsIERzZlNlc3Npb24gZlNlc3Npb247DQotDQotICAgIC8q
Kg0KLSAgICAgKiBJdCBpcyB0aGVvcmV0aWNhbGx5IHBvc3NpYmxlIGZvciBhIFZNUHJvdmlkZXIg
dG8gYmUgZGlzcG9zZWQgYmVmb3JlIGl0IA0KLSAgICAgKiBoYXMgYSBjaGFuY2UgdG8gcmVnaXN0
ZXIgaXRzZWxmIGFzIGV2ZW50IGxpc3RlbmVyLiAgVGhpcyBmbGFnIGlzIHVzZWQNCi0gICAgICog
dG8gYXZvaWQgcmVtb3ZpbmcgaXRzZWxmIGFzIGxpc3RlbmVyIGluIHN1Y2ggc2l0dWF0aW9uLg0K
LSAgICAgKi8NCi0gICAgcHJpdmF0ZSBib29sZWFuIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVy
ID0gZmFsc2U7DQotDQogICAgIC8qKg0KICAgICAgKiBDb25zdHJ1Y3RzIHRoZSB2aWV3IG1vZGVs
IHByb3ZpZGVyIGZvciBnaXZlbiBEU0Ygc2Vzc2lvbi4gIFRoZSANCiAgICAgICogY29uc3RydWN0
b3IgaXMgdGhyZWFkLXNhZmUgdG8gYWxsb3cgVk0gcHJvdmlkZXIgdG8gYmUgY29uc3RydWN0ZWQN
CkBAIC02MSwzOCArNTMsOCBAQA0KICAgICBwdWJsaWMgQWJzdHJhY3RETVZNUHJvdmlkZXIoQWJz
dHJhY3RWTUFkYXB0ZXIgYWRhcHRlciwgIElQcmVzZW50YXRpb25Db250ZXh0IHByZXNlbnRhdGlv
bkNvbnRleHQsIERzZlNlc3Npb24gc2Vzc2lvbikgew0KICAgICAgICAgc3VwZXIoYWRhcHRlciwg
cHJlc2VudGF0aW9uQ29udGV4dCk7DQogICAgICAgICBmU2Vzc2lvbiA9IHNlc3Npb247DQotICAg
ICAgICAvLyBBZGQgb3Vyc2VsdmVzIGFzIGxpc3RlbmVyIGZvciBETSBldmVudHMgZXZlbnRzLg0K
LSAgICAgICAgdHJ5IHsNCi0gICAgICAgICAgICBzZXNzaW9uLmdldEV4ZWN1dG9yKCkuZXhlY3V0
ZShuZXcgUnVubmFibGUoKSB7DQotICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsN
Ci0gICAgICAgICAgICAgICAgICAgIGlmIChEc2ZTZXNzaW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRT
ZXNzaW9uKCkuZ2V0SWQoKSkpIHsNCi0gICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXNzaW9u
KCkuYWRkU2VydmljZUV2ZW50TGlzdGVuZXIoQWJzdHJhY3RETVZNUHJvdmlkZXIudGhpcywgbnVs
bCk7DQotICAgICAgICAgICAgICAgICAgICAgICAgZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIg
PSB0cnVlOw0KLSAgICAgICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgICAgICB9DQotICAg
ICAgICAgICAgfSk7DQotICAgICAgICB9IGNhdGNoIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlv
biBlKSB7DQotICAgICAgICAgICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24sIG5vdCBtdWNoIHdlIGNh
biBkbyBidXQgd2FpdCB0byBiZSBkaXNwb3NlZC4NCi0gICAgICAgIH0gDQogICAgIH0gICAgDQog
DQotICAgIC8qKiBDYWxsZWQgdG8gZGlzcG9zZSB0aGUgcHJvdmlkZXIuICovIA0KLSAgICBAT3Zl
cnJpZGUNCi0gICAgcHVibGljIHZvaWQgZGlzcG9zZSgpIHsNCi0gICAgICAgIHRyeSB7DQotICAg
ICAgICAgICAgZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUo
KSB7DQotICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCi0gICAgICAgICAgICAg
ICAgICAgIGlmIChEc2ZTZXNzaW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRTZXNzaW9uKCkuZ2V0SWQo
KSkgJiYgZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIgKSB7DQotICAgICAgICAgICAgICAgICAg
ICAgICAgZlNlc3Npb24ucmVtb3ZlU2VydmljZUV2ZW50TGlzdGVuZXIoQWJzdHJhY3RETVZNUHJv
dmlkZXIudGhpcyk7DQotICAgICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgICAgIH0N
Ci0gICAgICAgICAgICB9KTsNCi0gICAgICAgIH0gY2F0Y2ggKFJlamVjdGVkRXhlY3V0aW9uRXhj
ZXB0aW9uIGUpIHsNCi0gICAgICAgICAgICAvLyBTZXNzaW9uIHNodXQgZG93bi4NCi0gICAgICAg
IH0gDQotICAgICAgICBzdXBlci5kaXNwb3NlKCk7DQotICAgIH0NCi0NCiAgICAgcHVibGljIERz
ZlNlc3Npb24gZ2V0U2Vzc2lvbigpIHsgcmV0dXJuIGZTZXNzaW9uOyB9DQogDQogICAgIC8qKg0K
QEAgLTEwMCw5ICs2MiwxMyBAQA0KICAgICAgKiB2aWV3IGFuZCBwYXNzaW5nIGl0IHRvIHRoZSBj
b3JyZXNwb25kaW5nIHZpZXcgbW9kZWwgcHJvdmlkZXIuICBUaGUgdmlldw0KICAgICAgKiBtb2Rl
bCBwcm92aWRlciBpcyB0aGVuIHJlc3BvbnNpYmxlIGZvciBmaWxsaW5nLWluIGFuZCBzZW5kaW5n
IHRoZSBkZWx0YQ0KICAgICAgKiB0byB0aGUgdmlld2VyLg0KLSAgICAgKiBAcGFyYW0gZQ0KKyAg
ICAgKiANCisgICAgICogQHBhcmFtIGV2ZW50DQorICAgICAqIA0KKyAgICAgKiBAZGVwcmVjYXRl
ZCBLZXB0IGZvciBBUEkgY29tcGF0aWJpbGl0eSByZWFzb25zLg0KICAgICAgKi8NCi0gICAgQERz
ZlNlcnZpY2VFdmVudEhhbmRsZXINCisgICAgQERlcHJlY2F0ZWQNCisJQERzZlNlcnZpY2VFdmVu
dEhhbmRsZXINCiAgICAgcHVibGljIHZvaWQgZXZlbnREaXNwYXRjaGVkKGZpbmFsIElETUV2ZW50
PD8+IGV2ZW50KSB7DQogICAgICAgICAvLyBXZSdyZSBpbiBzZXNzaW9uJ3MgZXhlY3V0b3IgdGhy
ZWFkIChzZXNzaW9uIGluIHdoaWNoIHRoZSBldmVudCBvcmlnaW5hdGVkKS4gDQogICAgICAgICAv
LyBSZS1kaXNwYWNoIHRvIHRoZSB2aWV3IG1vZGVsIHByb3ZpZGVyIGV4ZWN1dG9yIHRocmVhZCBh
bmQgdGhlbiBjYWxsIHRoZSANCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdt
b2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRlci5qYXZhDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1Mg
ZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBz
ZS5kZC5kc2YudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvZGF0YW1vZGVs
L0Fic3RyYWN0RE1WTUFkYXB0ZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMg0KZGlm
ZiAtdSAtcjEuMiBBYnN0cmFjdERNVk1BZGFwdGVyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRlci5qYXZhCTIg
SnVuIDIwMDggMTc6NTQ6NDUgLTAwMDAJMS4yDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91
aS92aWV3bW9kZWwvZGF0YW1vZGVsL0Fic3RyYWN0RE1WTUFkYXB0ZXIuamF2YQk0IEp1bCAyMDA4
IDEzOjQ2OjE1IC0wMDAwDQpAQCAtMTAsNyArMTAsMTEgQEANCiAgKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKi8NCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWwuZGF0YW1vZGVs
Ow0KIA0KK2ltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3RlZEV4ZWN1dGlvbkV4Y2Vw
dGlvbjsNCisNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuVGhyZWFkU2Fm
ZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1FdmVudDsNCitpbXBv
cnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZUV2ZW50SGFuZGxlcjsNCiBp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vzc2lvbjsNCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLnVpLnZpZXdtb2RlbC5BYnN0cmFjdFZNQWRhcHRlcjsNCiANCkBAIC0y
Myw2ICsyNywxMyBAQA0KICAgICBwcml2YXRlIGZpbmFsIERzZlNlc3Npb24gZlNlc3Npb247DQog
DQogICAgIC8qKg0KKyAgICAgKiBJdCBpcyB0aGVvcmV0aWNhbGx5IHBvc3NpYmxlIGZvciBhIFZN
IGFkYXB0ZXIgdG8gYmUgZGlzcG9zZWQgYmVmb3JlIGl0IA0KKyAgICAgKiBoYXMgYSBjaGFuY2Ug
dG8gcmVnaXN0ZXIgaXRzZWxmIGFzIGV2ZW50IGxpc3RlbmVyLiAgVGhpcyBmbGFnIGlzIHVzZWQN
CisgICAgICogdG8gYXZvaWQgcmVtb3ZpbmcgaXRzZWxmIGFzIGxpc3RlbmVyIGluIHN1Y2ggc2l0
dWF0aW9uLg0KKyAgICAgKi8NCisgICAgcHJpdmF0ZSBib29sZWFuIGZSZWdpc3RlcmVkQXNFdmVu
dExpc3RlbmVyID0gZmFsc2U7DQorDQorICAgIC8qKg0KICAgICAgKiBDb25zdHJ1Y3RvciBmb3Ig
dGhlIFZpZXcgTW9kZWwgc2Vzc2lvbi4gIEl0IGlzIHRlbXB0aW5nIHRvIGhhdmUgdGhlIA0KICAg
ICAgKiBhZGFwdGVyIHJlZ2lzdGVyIGl0c2VsZiBoZXJlIHdpdGggdGhlIHNlc3Npb24gYXMgdGhl
IG1vZGVsIGFkYXB0ZXIsIGJ1dA0KICAgICAgKiB0aGF0IHdvdWxkIG1lYW4gdGhhdCB0aGUgYWRh
cHRlciBtaWdodCBnZXQgYWNjZXNzZWQgb24gYW5vdGhlciB0aHJlYWQNCkBAIC0zMywxMiArNDQs
NTkgQEANCiAgICAgcHVibGljIEFic3RyYWN0RE1WTUFkYXB0ZXIoRHNmU2Vzc2lvbiBzZXNzaW9u
KSB7DQogICAgICAgICBzdXBlcigpOw0KICAgICAgICAgZlNlc3Npb24gPSBzZXNzaW9uOw0KKyAg
ICAgICAgLy8gQWRkIG91cnNlbHZlcyBhcyBsaXN0ZW5lciBmb3IgRE0gZXZlbnRzIGV2ZW50cy4N
CisgICAgICAgIHRyeSB7DQorICAgICAgICAgICAgc2Vzc2lvbi5nZXRFeGVjdXRvcigpLmV4ZWN1
dGUobmV3IFJ1bm5hYmxlKCkgew0KKyAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7
DQorICAgICAgICAgICAgICAgICAgICBpZiAoRHNmU2Vzc2lvbi5pc1Nlc3Npb25BY3RpdmUoZ2V0
U2Vzc2lvbigpLmdldElkKCkpKSB7DQorICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2Vzc2lv
bigpLmFkZFNlcnZpY2VFdmVudExpc3RlbmVyKEFic3RyYWN0RE1WTUFkYXB0ZXIudGhpcywgbnVs
bCk7DQorICAgICAgICAgICAgICAgICAgICAgICAgZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIg
PSB0cnVlOw0KKyAgICAgICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgICAgICB9DQorICAg
ICAgICAgICAgfSk7DQorICAgICAgICB9IGNhdGNoIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlv
biBlKSB7DQorICAgICAgICAgICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24sIG5vdCBtdWNoIHdlIGNh
biBkbyBidXQgd2FpdCB0byBiZSBkaXNwb3NlZC4NCisgICAgICAgIH0NCiAgICAgfSAgICANCiAN
CisgICAgQE92ZXJyaWRlDQorICAgIHB1YmxpYyB2b2lkIGRpc3Bvc2UoKSB7DQorICAgICAgICB0
cnkgew0KKyAgICAgICAgICAgIGdldFNlc3Npb24oKS5nZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3
IFJ1bm5hYmxlKCkgew0KKyAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7DQorICAg
ICAgICAgICAgICAgICAgICBpZiAoZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIgJiYgZ2V0U2Vz
c2lvbigpLmlzQWN0aXZlKCkpIHsNCisgICAgICAgICAgICAgICAgICAgICAgICBmU2Vzc2lvbi5y
ZW1vdmVTZXJ2aWNlRXZlbnRMaXN0ZW5lcihBYnN0cmFjdERNVk1BZGFwdGVyLnRoaXMpOw0KKyAg
ICAgICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgfSk7
DQorICAgICAgICB9IGNhdGNoIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlvbiBlKSB7DQorICAg
ICAgICAgICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24uDQorICAgICAgICB9DQorICAgICAgICBzdXBl
ci5kaXNwb3NlKCk7DQorICAgIH0NCisNCiAgICAgLyoqDQogICAgICAqIFJldHVybnMgdGhlIERT
RiBzZXNzaW9uIHRoYXQgdGhpcyBhZGFwdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC4NCiAgICAgICog
QHJldHVybg0KICAgICAgKi8NCiAgICAgcHJvdGVjdGVkIERzZlNlc3Npb24gZ2V0U2Vzc2lvbigp
IHsgcmV0dXJuIGZTZXNzaW9uOyB9DQogICAgIA0KKyAgICAvKioNCisgICAgICogSGFuZGxlICJk
YXRhIG1vZGVsIGNoYW5nZWQiIGV2ZW50IGJ5IGdlbmVyYXRpbmcgYSBkZWx0YSBvYmplY3QgZm9y
IGVhY2ggDQorICAgICAqIHZpZXcgYW5kIHBhc3NpbmcgaXQgdG8gdGhlIGNvcnJlc3BvbmRpbmcg
dmlldyBtb2RlbCBwcm92aWRlci4gIFRoZSB2aWV3DQorICAgICAqIG1vZGVsIHByb3ZpZGVyIGlz
IHRoZW4gcmVzcG9uc2libGUgZm9yIGZpbGxpbmctaW4gYW5kIHNlbmRpbmcgdGhlIGRlbHRhDQor
ICAgICAqIHRvIHRoZSB2aWV3ZXIuDQorICAgICAqIA0KKyAgICAgKiBAcGFyYW0gZXZlbnQNCisg
ICAgICogDQorICAgICAqIEBzaW5jZSAxLjENCisgICAgICovDQorICAgIEBEc2ZTZXJ2aWNlRXZl
bnRIYW5kbGVyDQorICAgIHB1YmxpYyBmaW5hbCB2b2lkIGV2ZW50RGlzcGF0Y2hlZChmaW5hbCBJ
RE1FdmVudDw/PiBldmVudCkgew0KKyAgICAJLy8gV2UncmUgaW4gc2Vzc2lvbidzIGV4ZWN1dG9y
IHRocmVhZCAoc2Vzc2lvbiBpbiB3aGljaCB0aGUgZXZlbnQgb3JpZ2luYXRlZCkuIA0KKyAgICAg
ICAgaWYgKGlzRGlzcG9zZWQoKSkgcmV0dXJuOw0KKw0KKyAgICAgICAgaGFuZGxlRXZlbnQoZXZl
bnQpOw0KKyAgICB9DQorDQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmll
d21vZGVsL0lWTUV2ZW50TGlzdGVuZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0lWTUV2ZW50TGlzdGVuZXIuamF2YQ0KZGlm
ZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9JVk1FdmVudExpc3RlbmVy
LmphdmENCi0tLSAvZGV2L251bGwJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KKysrIHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0lWTUV2ZW50TGlzdGVuZXIuamF2YQkxIEph
biAxOTcwIDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDQ4IEBADQorLyoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioNCisgKiBDb3B5cmlnaHQgKGMpIDIwMDggV2luZCBSaXZlciBTeXN0ZW1zLCBJbmMu
IGFuZCBvdGhlcnMuDQorICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0
aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscw0KKyAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMA0KKyAqIHdoaWNoIGFj
Y29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0DQorICogaHR0
cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwNCisgKg0KKyAqIENvbnRyaWJ1
dG9yczoNCisgKiAgICAgV2luZCBSaXZlciBTeXN0ZW1zIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxl
bWVudGF0aW9uDQorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQorcGFja2FnZSBvcmcuZWNsaXBz
ZS5kZC5kc2YudWkudmlld21vZGVsOw0KKw0KK2ltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5F
eGVjdXRvcjsNCisNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVz
dE1vbml0b3I7DQorDQorLyoqDQorICogQSBsaXN0ZW5lciBwYXJ0aWNpcGF0aW5nIGluIGV2ZW50
IG5vdGlmaWNhdGlvbnMgc2VudCBvdXQgZnJvbSBWTSBhZGFwdGVyLg0KKyAqIA0KKyAqIEBzaW5j
ZSAxLjENCisgKi8NCitwdWJsaWMgaW50ZXJmYWNlIElWTUV2ZW50TGlzdGVuZXIgew0KKw0KKyAg
ICAvKioNCisgICAgICogUmV0dXJucyB0aGUgZXhlY3V0b3IgdGhhdCBuZWVkcyB0byBiZSB1c2Vk
IHRvIGFjY2VzcyB0aGlzIGV2ZW50IGxpc3RlbmVyLiANCisgICAgICovDQorICAgIHB1YmxpYyBF
eGVjdXRvciBnZXRFeGVjdXRvcigpOw0KKyAgICANCisJLyoqDQorCSAqIFByb2Nlc3MgdGhlIGdp
dmVuIGV2ZW50IGFuZCBpbmRpY2F0ZSBjb21wbGV0aW9uIHdpdGggcmVxdWVzdCBtb25pdG9yLg0K
KwkgKi8NCisJcHVibGljIGFic3RyYWN0IHZvaWQgaGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2
ZW50LCBSZXF1ZXN0TW9uaXRvciBybSk7DQorDQorCS8qKg0KKwkgKiBHaXZlbiBldmVudCBpcyBh
Ym91dCB0byBiZSBoYW5kbGVkLg0KKwkgKiANCisJICogQHBhcmFtIGV2ZW50DQorCSAqLw0KKwlw
dWJsaWMgYWJzdHJhY3Qgdm9pZCBhYm91dFRvSGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50
KTsNCisNCisJLyoqDQorCSAqIEdpdmVuIGV2ZW50IGhhcyBiZWVuIHByb2Nlc3NlZCBieSBhbGwg
Vk0gZXZlbnQgbGlzdGVuZXJzLg0KKwkgKiANCisJICogQHBhcmFtIGV2ZW50DQorCSAqLw0KKwlw
dWJsaWMgYWJzdHJhY3Qgdm9pZCBkb25lSGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50KTsN
CisNCit9DQojUCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcNCkluZGV4OiBzcmMvb3JnL2VjbGlw
c2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5qYXZhDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNl
L1N0ZXBRdWV1ZU1hbmFnZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuOA0KZGlmZiAt
dSAtcjEuOCBTdGVwUXVldWVNYW5hZ2VyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5qYXZhCTMwIE1heSAyMDA4IDIyOjU3OjQ0
IC0wMDAwCTEuOA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9TdGVw
UXVldWVNYW5hZ2VyLmphdmEJNCBKdWwgMjAwOCAxMzo0NjoxNyAtMDAwMA0KQEAgLTQxLDggKzQx
LDExIEBADQogICogaXMgdXNlZCwgb3RoZXIgc2VydmljZSBpbXBsZW1lbnRhdGlvbnMsIHN1Y2gg
YXMgc3RhY2sgYW5kIGV4cHJlc3Npb25zLCBjYW4gDQogICogdXNlIGl0IHRvIGF2b2lkIHJlcXVl
c3RpbmcgZGF0YSBmcm9tIGRlYnVnZ2VyIGJhY2sgZW5kIGlmIGFub3RoZXIgc3RlcCBpcyANCiAg
KiBhYm91dCB0byBiZSBleGVjdXRlZC4gDQorICogDQorICogQGRlcHJlY2F0ZWQgRnVuY3Rpb25h
bGl0eSBoYXMgYmVlbiBpbnRlZ3JhdGVkIGluIHRoZSBVSSBsYXllci4NCiAgKi8NCi1wdWJsaWMg
Y2xhc3MgU3RlcFF1ZXVlTWFuYWdlciBleHRlbmRzIEFic3RyYWN0RHNmU2VydmljZQ0KK0BEZXBy
ZWNhdGVkDQorcHVibGljIGNsYXNzIFN0ZXBRdWV1ZU1hbmFnZXIgZXh0ZW5kcyBBYnN0cmFjdERz
ZlNlcnZpY2UgaW1wbGVtZW50cyBJU3RlcFF1ZXVlTWFuYWdlcg0KIHsNCiAgICAgLyoqDQogICAg
ICAqIEFtb3VudCBvZiB0aW1lIGluIG1pbGlzZWNvbmRzLCB0aGF0IGl0IHRha2VzIHRoZSBJU3Rl
cHBpbmdUaW1lZE91dEV2ZW50IA0KQEAgLTExMyw5ICsxMTYsOSBAQA0KICAgICAgICAgcmV0dXJu
IERzZkRlYnVnUGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKTsNCiAgICAgfQ0KIA0KLSAgICAvKioN
Ci0gICAgICogQ2hlY2tzIHdoZXRoZXIgYSBzdGVwIGNvbW1hbmQgY2FuIGJlIHF1ZXVlZCB1cCBm
b3IgZ2l2ZW4gY29udGV4dC4NCi0gICAgICovDQorICAgIC8qDQorCSAqIEBzZWUgb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0ZXBRdWV1ZU1hbmFnZXIjY2FuRW5xdWV1ZVN0ZXAo
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRN
Q29udGV4dCwgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuU3Rl
cFR5cGUsIG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRhdGFSZXF1ZXN0TW9uaXRvcikN
CisJICovDQogICAgIHB1YmxpYyB2b2lkIGNhbkVucXVldWVTdGVwKElFeGVjdXRpb25ETUNvbnRl
eHQgZXhlY0N0eCwgU3RlcFR5cGUgc3RlcFR5cGUsIERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFu
PiBybSkgew0KICAgICAgICAgaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUp
KSB7DQogICAgICAgICAgICAgcm0uc2V0RGF0YSh0cnVlKTsNCkBAIC0xMzksMTEgKzE0Miw5IEBA
DQogICAgICAgICByZXR1cm4gc3RlcFF1ZXVlLnNpemUoKTsNCiAgICAgfQ0KIA0KLSAgICAvKioN
Ci0gICAgICogQWRkcyBhIHN0ZXAgY29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVlIGZvciBn
aXZlbiBjb250ZXh0Lg0KLSAgICAgKiBAcGFyYW0gZXhlY0N0eCBFeGVjdXRpb24gY29udGV4dCB0
aGF0IHNob3VsZCBwZXJmb3JtIHRoZSBzdGVwLiANCi0gICAgICogQHBhcmFtIHN0ZXBUeXBlIFR5
cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0KLSAgICAgKi8NCisgICAgLyoNCisJICogQHNlZSBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RlcFF1ZXVlTWFuYWdlciNlbnF1ZXVlU3Rl
cChvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9u
RE1Db250ZXh0LCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5T
dGVwVHlwZSkNCisJICovDQogICAgIHB1YmxpYyB2b2lkIGVucXVldWVTdGVwKGZpbmFsIElFeGVj
dXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGUpIHsNCiAgICAg
ICAgIGZSdW5Db250cm9sLmNhblN0ZXAoDQogICAgICAgICAgICAgZXhlY0N0eCwgc3RlcFR5cGUs
IG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4oZ2V0RXhlY3V0b3IoKSwgbnVsbCkgew0K
SW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9JU3RlcFF1ZXVlTWFu
YWdlci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2VyLmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2VyLmphdmENCi0tLSAvZGV2
L251bGwJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvc2VydmljZS9JU3RlcFF1ZXVlTWFuYWdlci5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6
MDAgLTAwMDANCkBAIC0wLDAgKzEsMzMgQEANCisvKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KKyAq
IENvcHlyaWdodCAoYykgMjAwOCBXaW5kIFJpdmVyIFN5c3RlbXMsIEluYy4gYW5kIG90aGVycy4N
CisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlp
bmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0
aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5pZXMgdGhp
cyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3LmVjbGlw
c2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqDQorICogQ29udHJpYnV0b3JzOg0KKyAqICAg
ICBXaW5kIFJpdmVyIFN5c3RlbXMgLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisg
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKi8NCitwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy5zZXJ2aWNlOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5EYXRh
UmVxdWVzdE1vbml0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNl
LklSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLlN0ZXBUeXBlOw0KKw0KKy8qKg0KKyAqIEBz
aW5jZSAxLjENCisgKi8NCitwdWJsaWMgaW50ZXJmYWNlIElTdGVwUXVldWVNYW5hZ2VyIHsNCisJ
LyoqDQorCSAqIENoZWNrcyB3aGV0aGVyIGEgc3RlcCBjb21tYW5kIGNhbiBiZSBxdWV1ZWQgdXAg
Zm9yIGdpdmVuIGNvbnRleHQuDQorCSAqLw0KKwlwdWJsaWMgYWJzdHJhY3Qgdm9pZCBjYW5FbnF1
ZXVlU3RlcChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgsIFN0ZXBUeXBlIHN0ZXBUeXBlLCBE
YXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4gcm0pOw0KKw0KKwkvKioNCisJICogQWRkcyBhIHN0
ZXAgY29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVlIGZvciBnaXZlbiBjb250ZXh0Lg0KKwkg
KiBAcGFyYW0gZXhlY0N0eCBFeGVjdXRpb24gY29udGV4dCB0aGF0IHNob3VsZCBwZXJmb3JtIHRo
ZSBzdGVwLiANCisJICogQHBhcmFtIHN0ZXBUeXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0K
KwkgKi8NCisJcHVibGljIGFic3RyYWN0IHZvaWQgZW5xdWV1ZVN0ZXAoZmluYWwgSUV4ZWN1dGlv
bkRNQ29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVwVHlwZSBzdGVwVHlwZSk7DQorDQorfQ0KI1Ag
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlLmph
dmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2Uu
amF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQ0KZGlmZiAtdSAtcjEuMSBEc2ZEZWJ1Z1By
ZWZlcmVuY2VQYWdlLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVy
bmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YQkyNCBKdW4gMjAw
OCAxNzozNDo0MCAtMDAwMAkxLjENCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2lu
dGVybmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YQk0IEp1bCAy
MDA4IDEzOjQ2OjE4IC0wMDAwDQpAQCAtMTIsNiArMTIsNyBAQA0KIA0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsNCiBpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpLklEc2ZEZWJ1Z1VJQ29uc3RhbnRzOw0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5qZmFjZS5wcmVmZXJlbmNlLkJvb2xlYW5GaWVsZEVkaXRvcjsNCiBpbXBv
cnQgb3JnLmVjbGlwc2UuamZhY2UucHJlZmVyZW5jZS5GaWVsZEVkaXRvclByZWZlcmVuY2VQYWdl
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS5wcmVmZXJlbmNlLklQcmVmZXJlbmNlU3RvcmU7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLnByZWZlcmVuY2UuSW50ZWdlckZpZWxkRWRpdG9y
Ow0KQEAgLTMzLDcgKzM0LDcgQEANCiAJICogTWFuZGF0b3J5IGRlZmF1bHQgY29uc3RydWN0b3Ig
KGV4ZWN1dGFibGUgZXh0ZW5zaW9uKS4NCiAJICovDQogCXB1YmxpYyBEc2ZEZWJ1Z1ByZWZlcmVu
Y2VQYWdlKCkgew0KLQkJc3VwZXIoR1JJRCk7DQorCQlzdXBlcihGTEFUKTsNCiAJCUlQcmVmZXJl
bmNlU3RvcmUgc3RvcmU9IERzZkRlYnVnVUlQbHVnaW4uZ2V0RGVmYXVsdCgpLmdldFByZWZlcmVu
Y2VTdG9yZSgpOw0KIAkJc2V0UHJlZmVyZW5jZVN0b3JlKHN0b3JlKTsNCiAJCXNldERlc2NyaXB0
aW9uKE1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9kZXNjcmlw
dGlvbik7IA0KQEAgLTUzLDE3ICs1NCwyMCBAQA0KIA0KIAlAT3ZlcnJpZGUNCiAJcHJvdGVjdGVk
IHZvaWQgY3JlYXRlRmllbGRFZGl0b3JzKCkgew0KLQkJR3JvdXAgcGVyZm9ybWFuY2VHcm91cD0g
bmV3IEdyb3VwKGdldEZpZWxkRWRpdG9yUGFyZW50KCksIFNXVC5OT05FKTsNCisJCWZpbmFsIENv
bXBvc2l0ZSBwYXJlbnQ9IGdldEZpZWxkRWRpdG9yUGFyZW50KCk7DQorCQlwYXJlbnQuc2V0TGF5
b3V0KG5ldyBHcmlkTGF5b3V0KCkpOw0KKwkJDQorCQlHcm91cCBwZXJmb3JtYW5jZUdyb3VwPSBu
ZXcgR3JvdXAocGFyZW50LCBTV1QuTk9ORSk7DQogCQlwZXJmb3JtYW5jZUdyb3VwLnNldFRleHQo
TWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3BlcmZvcm1hbmNl
R3JvdXBfbGFiZWwpOw0KIAkJcGVyZm9ybWFuY2VHcm91cC5zZXRMYXlvdXQobmV3IEdyaWRMYXlv
dXQoKSk7DQogCQlHcmlkRGF0YSBnZD0gbmV3IEdyaWREYXRhKEdyaWREYXRhLkZJTExfSE9SSVpP
TlRBTCk7DQogCQlnZC52ZXJ0aWNhbEluZGVudD0gNTsNCiAJCXBlcmZvcm1hbmNlR3JvdXAuc2V0
TGF5b3V0RGF0YShnZCk7DQotCQkNCisNCiAJCUNvbXBvc2l0ZSBpbm5lclBhcmVudD0gbmV3IENv
bXBvc2l0ZShwZXJmb3JtYW5jZUdyb3VwLCBTV1QuTk9ORSk7DQotCQlpbm5lclBhcmVudC5zZXRM
YXlvdXQobmV3IEdyaWRMYXlvdXQoKSk7DQotCQlpbm5lclBhcmVudC5zZXRMYXlvdXREYXRhKGdk
KTsNCi0JCQ0KKwkJaW5uZXJQYXJlbnQuc2V0TGF5b3V0RGF0YShuZXcgR3JpZERhdGEoR3JpZERh
dGEuRklMTF9IT1JJWk9OVEFMKSk7DQorDQorCQkvLyBzdGFjayBmcmFtZSBsaW1pdA0KIAkJSW50
ZWdlckZpZWxkRWRpdG9yIGxpbWl0RWRpdG9yPSBuZXcgSW50ZWdlcldpdGhCb29sZWFuRmllbGRF
ZGl0b3IoDQogCQkJCUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVRf
RU5BQkxFLCANCiAJCQkJSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1J
VCwgDQpAQCAtNzMsNiArNzcsMzIgQEANCiAJCWxpbWl0RWRpdG9yLnNldFZhbGlkUmFuZ2UoMSwg
SW50ZWdlci5NQVhfVkFMVUUpOw0KIAkJbGltaXRFZGl0b3IuZmlsbEludG9HcmlkKGlubmVyUGFy
ZW50LCAzKTsNCiAJCWFkZEZpZWxkKGxpbWl0RWRpdG9yKTsNCisNCisJCS8vIHN5bmMgc3RlcHBp
bmcgc3BlZWQNCisJCUJvb2xlYW5GaWVsZEVkaXRvciBzeW5jU3RlcHBpbmdFZGl0b3I9IG5ldyBC
b29sZWFuRmllbGRFZGl0b3IoDQorCQkJCUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1lOQ0hS
T05JWkVEX1NURVBQSU5HX0VOQUJMRSwNCisJCQkJTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5Ec2ZE
ZWJ1Z1ByZWZlcmVuY2VQYWdlX3N5bmNTdGVwcGluZ19sYWJlbCwNCisJCQkJaW5uZXJQYXJlbnQp
Ow0KKw0KKwkJc3luY1N0ZXBwaW5nRWRpdG9yLmZpbGxJbnRvR3JpZChpbm5lclBhcmVudCwgMyk7
DQorCQlhZGRGaWVsZChzeW5jU3RlcHBpbmdFZGl0b3IpOw0KKw0KKwkJLy8gbWluaW11bSBzdGVw
IGludGVydmFsDQorCQlJbnRlZ2VyRmllbGRFZGl0b3IgbWluSW50ZXJ2YWxFZGl0b3I9IG5ldyBJ
bnRlZ2VyRmllbGRFZGl0b3IoDQorCQkJCUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfTUlOX1NU
RVBfSU5URVJWQUwsDQorCQkJCU1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJl
bmNlUGFnZV9taW5TdGVwSW50ZXJ2YWxfbGFiZWwsDQorCQkJCWlubmVyUGFyZW50KTsNCisNCisJ
CW1pbkludGVydmFsRWRpdG9yLnNldFZhbGlkUmFuZ2UoMCwgMTAwMDApOw0KKwkJbWluSW50ZXJ2
YWxFZGl0b3IuZmlsbEludG9HcmlkKGlubmVyUGFyZW50LCAzKTsNCisJCWFkZEZpZWxkKG1pbklu
dGVydmFsRWRpdG9yKTsNCisNCisJCWlubmVyUGFyZW50LnNldExheW91dChuZXcgR3JpZExheW91
dCgzLCBmYWxzZSkpOw0KK30NCisNCisJQE92ZXJyaWRlDQorCXByb3RlY3RlZCB2b2lkIGFkanVz
dEdyaWRMYXlvdXQoKSB7DQorCQkvLyBkbyBub3RoaW5nDQogCX0NCiANCiB9DQpJbmRleDogc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9tZXNzYWdl
cy5wcm9wZXJ0aWVzDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNs
aXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9tZXNzYWdlcy5wcm9w
ZXJ0aWVzLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIG1lc3NhZ2Vz
LnByb3BlcnRpZXMNCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Vp
L3ByZWZlcmVuY2VzL21lc3NhZ2VzLnByb3BlcnRpZXMJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAw
MDAJMS4xDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVm
ZXJlbmNlcy9tZXNzYWdlcy5wcm9wZXJ0aWVzCTQgSnVsIDIwMDggMTM6NDY6MTggLTAwMDANCkBA
IC0xMSw0ICsxMSw2IEBADQogDQogRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9kZXNjcmlwdGlvbj1H
ZW5lcmFsIHNldHRpbmdzIGZvciBkZWJ1Z2dpbmcgd2l0aCBEU0Y6DQogRHNmRGVidWdQcmVmZXJl
bmNlUGFnZV9saW1pdFN0YWNrRnJhbWVzX2xhYmVsPUxpbWl0IG51bWJlciBvZiBzdGFjayBmcmFt
ZXMgdG8NCitEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX21pblN0ZXBJbnRlcnZhbF9sYWJlbD1NaW5p
bXVtIGludGVydmFsIGJldHdlZW4gc3RlcHMgKGluIG1pbGxpc2Vjb25kcykNCiBEc2ZEZWJ1Z1By
ZWZlcmVuY2VQYWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFiZWw9UGVyZm9ybWFuY2UNCitEc2ZEZWJ1
Z1ByZWZlcmVuY2VQYWdlX3N5bmNTdGVwcGluZ19sYWJlbD1TeW5jaHJvbml6ZSBzdGVwcGluZyBz
cGVlZCB3aXRoIFVJIHVwZGF0ZXMNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL1N0cmluZ1dpdGhCb29sZWFuRmllbGRFZGl0b3IuamF2
YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNm
L3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJvb2xlYW5GaWVsZEVk
aXRvci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIFN0cmlu
Z1dpdGhCb29sZWFuRmllbGRFZGl0b3IuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJvb2xlYW5GaWVsZEVkaXRv
ci5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJvb2xlYW5G
aWVsZEVkaXRvci5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTggLTAwMDANCkBAIC0xNCw4ICsxNCwx
MCBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuU1dUOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5z
d3QuZXZlbnRzLlNlbGVjdGlvbkFkYXB0ZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ldmVu
dHMuU2VsZWN0aW9uRXZlbnQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5sYXlvdXQuR3JpZExh
eW91dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQnV0dG9uOw0KIGltcG9ydCBv
cmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5Db21wb3NpdGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3
dC53aWRnZXRzLkxhYmVsOw0KIA0KIC8qKg0KICAqIEEgc3RyaW5nIGZpZWxkIGVkaXRvciB3aXRo
IGFuIGVuYWJsZW1lbnQgY2hlY2sgYm94Lg0KQEAgLTQ3LDIwICs0OSwxNCBAQA0KIAkJc3VwZXIu
ZG9GaWxsSW50b0dyaWQocGFyZW50LCBudW1Db2x1bW5zKTsNCiAJfQ0KIA0KLQlAT3ZlcnJpZGUN
Ci0JcHVibGljIGludCBnZXROdW1iZXJPZkNvbnRyb2xzKCkgew0KLQkJcmV0dXJuIHN1cGVyLmdl
dE51bWJlck9mQ29udHJvbHMoKSArIDE7DQotCX0NCi0NCi0gICAgQE92ZXJyaWRlDQotCXByb3Rl
Y3RlZCB2b2lkIGFkanVzdEZvck51bUNvbHVtbnMoaW50IG51bUNvbHVtbnMpIHsNCi0gICAgCS8v
IHRoZSBjaGVja2JveCB1c2VzIG9uZSBjb2x1bW4NCi0gICAgCXN1cGVyLmFkanVzdEZvck51bUNv
bHVtbnMobnVtQ29sdW1ucyAtIDEpOw0KLSAgICB9DQotDQogCXByaXZhdGUgQnV0dG9uIGdldENo
ZWNrYm94Q29udHJvbChDb21wb3NpdGUgcGFyZW50KSB7DQogCQlpZiAoZkNoZWNrYm94ID09IG51
bGwpIHsNCi0JCQlmQ2hlY2tib3g9IG5ldyBCdXR0b24ocGFyZW50LCBTV1QuQ0hFQ0spOw0KKwkJ
CUNvbXBvc2l0ZSBpbm5lcj0gbmV3IENvbXBvc2l0ZShwYXJlbnQsIFNXVC5OVUxMKTsNCisJCQlm
aW5hbCBHcmlkTGF5b3V0IGxheW91dD0gbmV3IEdyaWRMYXlvdXQoMiwgZmFsc2UpOw0KKwkJCWxh
eW91dC5tYXJnaW5XaWR0aCA9IDA7DQorCQkJaW5uZXIuc2V0TGF5b3V0KGxheW91dCk7DQorCQkJ
ZkNoZWNrYm94PSBuZXcgQnV0dG9uKGlubmVyLCBTV1QuQ0hFQ0spOw0KKwkJCWdldExhYmVsQ29u
dHJvbChpbm5lcik7DQogCQkJZkNoZWNrYm94LmFkZFNlbGVjdGlvbkxpc3RlbmVyKG5ldyBTZWxl
Y3Rpb25BZGFwdGVyKCkgew0KIAkJCQlAT3ZlcnJpZGUNCiAJCQkJcHVibGljIHZvaWQgd2lkZ2V0
U2VsZWN0ZWQoU2VsZWN0aW9uRXZlbnQgZSkgew0KQEAgLTcwLDExICs2NiwyMiBAQA0KIAkJCQl9
DQogCQkJfSk7DQogCQl9IGVsc2Ugew0KLQkJCWNoZWNrUGFyZW50KGZDaGVja2JveCwgcGFyZW50
KTsNCisJCQljaGVja1BhcmVudChmQ2hlY2tib3guZ2V0UGFyZW50KCksIHBhcmVudCk7DQogCQl9
DQogCQlyZXR1cm4gZkNoZWNrYm94Ow0KIAl9DQogDQorCUBPdmVycmlkZQ0KKwlwdWJsaWMgTGFi
ZWwgZ2V0TGFiZWxDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsNCisJCWZpbmFsIExhYmVsIGxh
YmVsPSBnZXRMYWJlbENvbnRyb2woKTsNCisJCWlmIChsYWJlbCA9PSBudWxsKSB7DQorCQkJcmV0
dXJuIHN1cGVyLmdldExhYmVsQ29udHJvbChwYXJlbnQpOw0KKwkJfSBlbHNlIHsNCisJCQljaGVj
a1BhcmVudChsYWJlbC5nZXRQYXJlbnQoKSwgcGFyZW50KTsNCisJCX0NCisJCXJldHVybiBsYWJl
bDsNCisJfQ0KKw0KIAlwcm90ZWN0ZWQgdm9pZCB2YWx1ZUNoYW5nZWQoYm9vbGVhbiBvbGRWYWx1
ZSwgYm9vbGVhbiBuZXdWYWx1ZSkgew0KICAgICAgICAgc2V0UHJlc2VudHNEZWZhdWx0VmFsdWUo
ZmFsc2UpOw0KICAgICAgICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVlKSB7DQpJbmRleDogc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9JbnRlZ2Vy
V2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jv
b3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNl
cy9JbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNp
b24gMS4xDQpkaWZmIC11IC1yMS4xIEludGVnZXJXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmEN
Ci0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2Vz
L0ludGVnZXJXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmEJMjQgSnVuIDIwMDggMTc6MzQ6NDAg
LTAwMDAJMS4xDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9w
cmVmZXJlbmNlcy9JbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhCTQgSnVsIDIwMDgg
MTM6NDY6MTggLTAwMDANCkBAIC0xNCw4ICsxNCwxMCBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5z
d3QuU1dUOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuZXZlbnRzLlNlbGVjdGlvbkFkYXB0ZXI7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ldmVudHMuU2VsZWN0aW9uRXZlbnQ7DQoraW1wb3J0
IG9yZy5lY2xpcHNlLnN3dC5sYXlvdXQuR3JpZExheW91dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
c3d0LndpZGdldHMuQnV0dG9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5Db21w
b3NpdGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkxhYmVsOw0KIA0KIC8qKg0K
ICAqIEFuIGludGVnZXIgZmllbGQgZWRpdG9yIHdpdGggYW4gZW5hYmxlbWVudCBjaGVjayBib3gu
DQpAQCAtNDIsMjAgKzQ0LDE0IEBADQogCQlzdXBlci5kb0ZpbGxJbnRvR3JpZChwYXJlbnQsIG51
bUNvbHVtbnMpOw0KIAl9DQogDQotCUBPdmVycmlkZQ0KLQlwdWJsaWMgaW50IGdldE51bWJlck9m
Q29udHJvbHMoKSB7DQotCQlyZXR1cm4gc3VwZXIuZ2V0TnVtYmVyT2ZDb250cm9scygpICsgMTsN
Ci0JfQ0KLQ0KLSAgICBAT3ZlcnJpZGUNCi0JcHJvdGVjdGVkIHZvaWQgYWRqdXN0Rm9yTnVtQ29s
dW1ucyhpbnQgbnVtQ29sdW1ucykgew0KLSAgICAJLy8gdGhlIGNoZWNrYm94IHVzZXMgb25lIGNv
bHVtbg0KLSAgICAJc3VwZXIuYWRqdXN0Rm9yTnVtQ29sdW1ucyhudW1Db2x1bW5zIC0gMSk7DQot
ICAgIH0NCi0NCiAJcHJpdmF0ZSBCdXR0b24gZ2V0Q2hlY2tib3hDb250cm9sKENvbXBvc2l0ZSBw
YXJlbnQpIHsNCiAJCWlmIChmQ2hlY2tib3ggPT0gbnVsbCkgew0KLQkJCWZDaGVja2JveD0gbmV3
IEJ1dHRvbihwYXJlbnQsIFNXVC5DSEVDSyk7DQorCQkJQ29tcG9zaXRlIGlubmVyPSBuZXcgQ29t
cG9zaXRlKHBhcmVudCwgU1dULk5VTEwpOw0KKwkJCWZpbmFsIEdyaWRMYXlvdXQgbGF5b3V0PSBu
ZXcgR3JpZExheW91dCgyLCBmYWxzZSk7DQorCQkJbGF5b3V0Lm1hcmdpbldpZHRoID0gMDsNCisJ
CQlpbm5lci5zZXRMYXlvdXQobGF5b3V0KTsNCisJCQlmQ2hlY2tib3g9IG5ldyBCdXR0b24oaW5u
ZXIsIFNXVC5DSEVDSyk7DQorCQkJZ2V0TGFiZWxDb250cm9sKGlubmVyKTsNCiAJCQlmQ2hlY2ti
b3guYWRkU2VsZWN0aW9uTGlzdGVuZXIobmV3IFNlbGVjdGlvbkFkYXB0ZXIoKSB7DQogCQkJCUBP
dmVycmlkZQ0KIAkJCQlwdWJsaWMgdm9pZCB3aWRnZXRTZWxlY3RlZChTZWxlY3Rpb25FdmVudCBl
KSB7DQpAQCAtNjUsMTEgKzYxLDIyIEBADQogCQkJCX0NCiAJCQl9KTsNCiAJCX0gZWxzZSB7DQot
CQkJY2hlY2tQYXJlbnQoZkNoZWNrYm94LCBwYXJlbnQpOw0KKwkJCWNoZWNrUGFyZW50KGZDaGVj
a2JveC5nZXRQYXJlbnQoKSwgcGFyZW50KTsNCiAJCX0NCiAJCXJldHVybiBmQ2hlY2tib3g7DQog
CX0NCiANCisJQE92ZXJyaWRlDQorCXB1YmxpYyBMYWJlbCBnZXRMYWJlbENvbnRyb2woQ29tcG9z
aXRlIHBhcmVudCkgew0KKwkJZmluYWwgTGFiZWwgbGFiZWw9IGdldExhYmVsQ29udHJvbCgpOw0K
KwkJaWYgKGxhYmVsID09IG51bGwpIHsNCisJCQlyZXR1cm4gc3VwZXIuZ2V0TGFiZWxDb250cm9s
KHBhcmVudCk7DQorCQl9IGVsc2Ugew0KKwkJCWNoZWNrUGFyZW50KGxhYmVsLmdldFBhcmVudCgp
LCBwYXJlbnQpOw0KKwkJfQ0KKwkJcmV0dXJuIGxhYmVsOw0KKwl9DQorDQogCXByb3RlY3RlZCB2
b2lkIHZhbHVlQ2hhbmdlZChib29sZWFuIG9sZFZhbHVlLCBib29sZWFuIG5ld1ZhbHVlKSB7DQog
ICAgICAgICBzZXRQcmVzZW50c0RlZmF1bHRWYWx1ZShmYWxzZSk7DQogICAgICAgICBpZiAob2xk
VmFsdWUgIT0gbmV3VmFsdWUpIHsNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL01lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuamF2YQ0KPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdp
bnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhLHYN
CnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIE1lc3NhZ2VzRm9yUHJlZmVy
ZW5jZXMuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkv
cHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCTI0IEp1biAyMDA4IDE3OjM0
OjQwIC0wMDAwCTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwv
dWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCTQgSnVsIDIwMDggMTM6
NDY6MTggLTAwMDANCkBAIC0yMCw4ICsyMCwxMiBAQA0KIA0KIAlwdWJsaWMgc3RhdGljIFN0cmlu
ZyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX2Rlc2NyaXB0aW9uOw0KIAlwdWJsaWMgc3RhdGljIFN0
cmluZyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX2xpbWl0U3RhY2tGcmFtZXNfbGFiZWw7DQorDQor
CXB1YmxpYyBzdGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfbWluU3RlcEludGVy
dmFsX2xhYmVsOw0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdl
X3BlcmZvcm1hbmNlR3JvdXBfbGFiZWw7DQogDQorCXB1YmxpYyBzdGF0aWMgU3RyaW5nIERzZkRl
YnVnUHJlZmVyZW5jZVBhZ2Vfc3luY1N0ZXBwaW5nX2xhYmVsOw0KKw0KIAlzdGF0aWMgew0KIAkJ
Ly8gaW5pdGlhbGl6ZSByZXNvdXJjZSBidW5kbGUNCiAJCU5MUy5pbml0aWFsaXplTWVzc2FnZXMo
QlVORExFX05BTUUsIE1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuY2xhc3MpOw0KSW5kZXg6IHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0RzZlNvdXJjZURpc3BsYXlB
ZGFwdGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xp
cHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRl
ci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11IC1yMS41IERzZlNvdXJj
ZURpc3BsYXlBZGFwdGVyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3Vp
L3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZhCTMgSnVuIDIwMDggMjA6
MTc6MTMgLTAwMDAJMS41DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9zb3Vy
Y2Vsb29rdXAvRHNmU291cmNlRGlzcGxheUFkYXB0ZXIuamF2YQk0IEp1bCAyMDA4IDEzOjQ2OjE4
IC0wMDAwDQpAQCAtMzMsNiArMzMsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29u
Y3VycmVudC5UaHJlYWRTYWZlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVs
LkRNQ29udGV4dHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuSURNQ29u
dGV4dDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lv
bmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuU3RlcHBpbmdUaW1lZE91dEV2ZW50
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdV
SVBsdWdpbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNv
bnRyb2w7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklTdGFjazsN
CkBAIC0xMTcsOCArMTE4LDEwIEBADQogCQkJaWYgKG1vbml0b3IuaXNDYW5jZWxlZCgpKSB7DQog
ICAgICAgICAgICAgICAgIHJldHVybiBTdGF0dXMuQ0FOQ0VMX1NUQVRVUzsNCiAgICAgICAgICAg
ICB9DQotICAgICAgICAgICAgDQogCQkJZmluYWwgU291cmNlTG9va3VwUmVzdWx0IHJlc3VsdCA9
IHBlcmZvcm1Mb29rdXAoKTsNCisJCQlzeW5jaHJvbml6ZWQgKHRoaXMpIHsNCisJCQkJbm90aWZ5
QWxsKCk7DQorCQkJfQ0KICAgICAgICAgICAgIGV4ZWN1dGVGcm9tSm9iKG5ldyBEc2ZSdW5uYWJs
ZSgpIHsgcHVibGljIHZvaWQgcnVuKCkgew0KICAgICAgICAgICAgICAgICBpZiAoIW1vbml0b3Iu
aXNDYW5jZWxlZCgpKSB7IA0KICAgICAgICAgICAgICAgICAgICAgZlByZXZSZXN1bHQgPSByZXN1
bHQ7DQpAQCAtNTU4LDE1ICs1NjEsMTcgQEANCiAgICAgfQ0KIA0KICAgICBARHNmU2VydmljZUV2
ZW50SGFuZGxlcg0KKyAgICBwdWJsaWMgdm9pZCBldmVudERpc3BhdGNoZWQoU3RlcHBpbmdUaW1l
ZE91dEV2ZW50IGUpIHsNCisgICAgICAgIHN0YXJ0QW5ub3RhdGlvbkNsZWFyaW5nSm9iKGUuZ2V0
RE1Db250ZXh0KCkpOyAgICAgICAgDQorICAgIH0NCisgICAgDQorICAgIEBEc2ZTZXJ2aWNlRXZl
bnRIYW5kbGVyDQogICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChTdGVwUXVldWVNYW5h
Z2VyLklTdGVwcGluZ1RpbWVkT3V0RXZlbnQgZSkgew0KICAgICAgICAgc3RhcnRBbm5vdGF0aW9u
Q2xlYXJpbmdKb2IoZS5nZXRETUNvbnRleHQoKSk7ICAgICAgICANCi0gICAgfSAgICANCisgICAg
fQ0KICAgICANCiAgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXINCiAgICAgcHVibGljIHZvaWQg
ZXZlbnREaXNwYXRjaGVkKElSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50IGUpIHsNCi0gICAg
ICAgIGlmIChlLmdldFJlYXNvbigpID09IFN0YXRlQ2hhbmdlUmVhc29uLlNURVApIHsNCi0gICAg
ICAgICAgICBzdGFydEFubm90YXRpb25DbGVhcmluZ0pvYihlLmdldERNQ29udGV4dCgpKTsNCi0g
ICAgICAgIH0NCiAgICAgICAgIGZQcmV2TW9kZWxDb250ZXh0ID0gbnVsbDsNCiAgICAgfQ0KIH0N
CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9JbnN0
cnVjdGlvblBvaW50ZXJNYW5hZ2VyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9v
dC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9JbnN0cnVj
dGlvblBvaW50ZXJNYW5hZ2VyLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjINCmRpZmYg
LXUgLXIxLjIgSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlci5qYXZhDQotLS0gc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAvSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdl
ci5qYXZhCTMwIE1heSAyMDA4IDIyOjU3OjM5IC0wMDAwCTEuMg0KKysrIHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0luc3RydWN0aW9uUG9pbnRlck1hbmFnZXIu
amF2YQk0IEp1bCAyMDA4IDEzOjQ2OjE4IC0wMDAwDQpAQCAtMjEsNiArMjEsNyBAQA0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2s7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRlYnVnLnVpLkRlYnVnVUlUb29sczsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuZGVidWcudWkuSURlYnVnVUlDb25zdGFudHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNl
LnRleHQuUG9zaXRpb247DQpAQCAtMzcsNyArMzgsMTcgQEANCiBAVGhyZWFkU2FmZQ0KIGNsYXNz
IEluc3RydWN0aW9uUG9pbnRlck1hbmFnZXIgew0KIA0KKwkvKioNCisJICogQ3VycmVudCBpbnN0
cnVjdGlvbiBwb2ludGVyIGFubm90YXRpb24gdHlwZS4NCisJICovDQorCXByaXZhdGUgc3RhdGlj
IGZpbmFsIFN0cmluZyBJRF9DVVJSRU5UX0lQPSAib3JnLmVjbGlwc2UuZGQuZGVidWcuY3VycmVu
dElQIjsgLy8kTk9OLU5MUy0xJA0KKwkNCiAgICAgLyoqDQorCSAqIFNlY29uZGFyeSBpbnN0cnVj
dGlvbiBwb2ludGVyIGFubm90YXRpb24gdHlwZS4NCisJICovDQorCXByaXZhdGUgc3RhdGljIGZp
bmFsIFN0cmluZyBJRF9TRUNPTkRBUllfSVA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5zZWNvbmRh
cnlJUCI7IC8vJE5PTi1OTFMtMSQNCisNCisJLyoqDQogICAgICAqIEVkaXRvciBhbm5vdGF0aW9u
IG9iamVjdCBmb3IgaW5zdHJ1Y3Rpb24gcG9pbnRlcnMuDQogICAgICAqLw0KICAgICBzdGF0aWMg
Y2xhc3MgSVBBbm5vdGF0aW9uIGV4dGVuZHMgQW5ub3RhdGlvbiB7DQpAQCAtNjEsNyArNzIsNyBA
QA0KICAgICAgICAgICAgIGZGcmFtZSA9IGZyYW1lOw0KICAgICAgICAgICAgIGZJbWFnZSA9IGlt
YWdlOw0KICAgICAgICAgfQ0KLSAgICAgICAgICAgIA0KKyAgICAgICAgDQogICAgICAgICAvKioN
CiAgICAgICAgICAqIFJldHVybnMgdGhpcyBhbm5vdGF0aW9uJ3MgaW1hZ2UuDQogICAgICAgICAg
KiANCkBAIC0xNzAsMTUgKzE4MSwxOSBAQA0KICAgICAgICAgU3RyaW5nIHRleHQ7DQogICAgICAg
ICBJbWFnZSBpbWFnZTsNCiAgICAgICAgIGlmIChpc1RvcEZyYW1lKSB7DQotICAgICAgICAgICAg
aWQgPSAib3JnLmVjbGlwc2UuZGQuZGVidWcuY3VycmVudElQIjsgLy8kTk9OLU5MUy0xJA0KKyAg
ICAgICAgICAgIGlkID0gSURfQ1VSUkVOVF9JUDsNCiAgICAgICAgICAgICB0ZXh0ID0gIkRlYnVn
IEN1cnJlbnQgSW5zdHJ1Y3Rpb24gUG9pbnRlciI7IC8vJE5PTi1OTFMtMSQNCiAgICAgICAgICAg
ICBpbWFnZSA9IERlYnVnVUlUb29scy5nZXRJbWFnZShJRGVidWdVSUNvbnN0YW50cy5JTUdfT0JK
U19JTlNUUlVDVElPTl9QT0lOVEVSX1RPUCk7DQogICAgICAgICB9IGVsc2Ugew0KLSAgICAgICAg
ICAgIGlkID0gIm9yZy5lY2xpcHNlLmRkLmRlYnVnLnNlY29uZGFyeUlQIjsgLy8kTk9OLU5MUy0x
JA0KKyAgICAgICAgICAgIGlkID0gSURfU0VDT05EQVJZX0lQOw0KICAgICAgICAgICAgIHRleHQg
PSAiRGVidWcgQ2FsbCBTdGFjayI7IC8vJE5PTi1OTFMtMSQNCiAgICAgICAgICAgICBpbWFnZSA9
IERlYnVnVUlUb29scy5nZXRJbWFnZShJRGVidWdVSUNvbnN0YW50cy5JTUdfT0JKU19JTlNUUlVD
VElPTl9QT0lOVEVSKTsNCiAgICAgICAgIH0NCiANCisgICAgICAgIGlmIChpc1RvcEZyYW1lKSB7
DQorICAgICAgICAJLy8gcmVtb3ZlIG90aGVyIHRvcC1mcmFtZSBJUCBhbm5vdGF0aW9uKHMpIGZv
ciB0aGlzIGV4ZWN1dGlvbi1jb250ZXh0DQorICAgICAgICAJcmVtb3ZlQW5ub3RhdGlvbnMoRE1D
b250ZXh0cy5nZXRBbmNlc3Rvck9mVHlwZShmcmFtZS5nZXRQYXJlbnRzKClbMF0sIElFeGVjdXRp
b25ETUNvbnRleHQuY2xhc3MpKTsNCisgICAgICAgIH0NCiAgICAgICAgIEFubm90YXRpb24gYW5u
b3RhdGlvbiA9IG5ldyBJUEFubm90YXRpb24oZnJhbWUsIGlkLCB0ZXh0LCBpbWFnZSk7IA0KICAg
ICAgICAgDQogCQkvLyBBZGQgdGhlIGFubm90YXRpb24gYXQgdGhlIHBvc2l0aW9uIHRvIHRoZSBl
ZGl0b3IncyBhbm5vdGF0aW9uIG1vZGVsLg0KQEAgLTIwMiwxMCArMjE3LDI4IEBADQogICAgICAg
ICAgICAgICAgICAgICByZW1vdmVBbm5vdGF0aW9uKHdyYXBwZXIuZ2V0VGV4dEVkaXRvcigpLCB3
cmFwcGVyLmdldEFubm90YXRpb24oKSk7DQogICAgICAgICAgICAgICAgICAgICB3cmFwcGVySXRy
LnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgfSAgICAgICAgICAg
IA0KKyAgICAgICAgICAgIH0NCiAgICAgICAgIH0NCiAJfQ0KLQkNCisNCisJLyoqDQorCSAqIFJl
bW92ZSBhbGwgdG9wLWZyYW1lIGFubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lm
aWVkIGRlYnVnIHRhcmdldCB0aGF0IHRoaXMgY2xhc3MNCisJICogaXMgdHJhY2tpbmcuDQorCSAq
Lw0KKwlwdWJsaWMgdm9pZCByZW1vdmVUb3BGcmFtZUFubm90YXRpb25zKElSdW5Db250cm9sLklF
eGVjdXRpb25ETUNvbnRleHQgZXhlY0RtYykgew0KKwkJLy8gUmV0cmlldmUgdGhlIG1hcHBpbmcg
b2YgdGhyZWFkcyB0byBjb250ZXh0IGxpc3RzDQorICAgICAgICBzeW5jaHJvbml6ZWQoZkFubm90
YXRpb25XcmFwcGVycykgew0KKyAgICAgICAgICAgIGZvciAoSXRlcmF0b3I8QW5ub3RhdGlvbldy
YXBwZXI+IHdyYXBwZXJJdHIgPSBmQW5ub3RhdGlvbldyYXBwZXJzLml0ZXJhdG9yKCk7IHdyYXBw
ZXJJdHIuaGFzTmV4dCgpOykgew0KKyAgICAgICAgICAgICAgICBBbm5vdGF0aW9uV3JhcHBlciB3
cmFwcGVyID0gd3JhcHBlckl0ci5uZXh0KCk7DQorICAgICAgICAgICAgICAgIGlmIChETUNvbnRl
eHRzLmlzQW5jZXN0b3JPZih3cmFwcGVyLmdldEZyYW1lRE1DKCksIGV4ZWNEbWMpIA0KKyAgICAg
ICAgICAgICAgICAJCSYmIElEX0NVUlJFTlRfSVAuZXF1YWxzKHdyYXBwZXIuZ2V0QW5ub3RhdGlv
bigpLmdldFR5cGUoKSkpIHsNCisgICAgICAgICAgICAgICAgICAgIHJlbW92ZUFubm90YXRpb24o
d3JhcHBlci5nZXRUZXh0RWRpdG9yKCksIHdyYXBwZXIuZ2V0QW5ub3RhdGlvbigpKTsNCisgICAg
ICAgICAgICAgICAgICAgIHdyYXBwZXJJdHIucmVtb3ZlKCk7DQorICAgICAgICAgICAgICAgIH0N
CisgICAgICAgICAgICB9DQorICAgICAgICB9DQorCX0NCisNCiAgICAgLyoqIFJlbW92ZXMgYWxs
IGFubm90YXRpb25zIHRyYWNrZWQgYnkgdGhpcyBtYW5hZ2VyICovDQogICAgIHB1YmxpYyB2b2lk
IHJlbW92ZUFsbEFubm90YXRpb25zKCkgew0KICAgICAgICAgc3luY2hyb25pemVkKGZBbm5vdGF0
aW9uV3JhcHBlcnMpIHsNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2Fj
dGlvbnMvRHNmU3RlcEludG9Db21tYW5kLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zz
cm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5k
ZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcElu
dG9Db21tYW5kLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUg
RHNmU3RlcEludG9Db21tYW5kLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L3VpL2FjdGlvbnMvRHNmU3RlcEludG9Db21tYW5kLmphdmEJNyBNYXkgMjAwOCAxNzo0MDo0NyAt
MDAwMAkxLjUNCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNm
U3RlcEludG9Db21tYW5kLmphdmEJNCBKdWwgMjAwOCAxMzo0NjoxOCAtMDAwMA0KQEAgLTQ5LDcg
KzQ5LDcgQEANCiAgICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRTdGVwVHlwZSgp
Ow0KICAgICAgICAgZkV4ZWN1dG9yLnN1Ym1pdChuZXcgRHNmQ29tbWFuZFJ1bm5hYmxlKGZUcmFj
a2VyLCByZXF1ZXN0LmdldEVsZW1lbnRzKClbMF0sIHJlcXVlc3QpIHsNCiAgICAgICAgICAgICBA
T3ZlcnJpZGUgcHVibGljIHZvaWQgZG9FeGVjdXRlKCkgew0KLSAgICAgICAgICAgICAgICBnZXRT
dGVwUXVldWVNZ3IoKS5jYW5FbnF1ZXVlU3RlcCgNCisgICAgICAgICAgICAgICAgZ2V0U3RlcFF1
ZXVlTWFuYWdlcigpLmNhbkVucXVldWVTdGVwKA0KICAgICAgICAgICAgICAgICAgICAgZ2V0Q29u
dGV4dCgpLCBzdGVwVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhUmVxdWVzdE1v
bml0b3I8Qm9vbGVhbj4oSW1tZWRpYXRlRXhlY3V0b3IuZ2V0SW5zdGFuY2UoKSwgbnVsbCkgew0K
ICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQ0KQEAgLTcxLDcgKzcxLDcgQEANCiAg
ICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRTdGVwVHlwZSgpOw0KICAgICAgICAg
ZkV4ZWN1dG9yLnN1Ym1pdChuZXcgRHNmQ29tbWFuZFJ1bm5hYmxlKGZUcmFja2VyLCByZXF1ZXN0
LmdldEVsZW1lbnRzKClbMF0sIHJlcXVlc3QpIHsNCiAgICAgICAgICAgICBAT3ZlcnJpZGUgcHVi
bGljIHZvaWQgZG9FeGVjdXRlKCkgew0KLQkJCQlnZXRTdGVwUXVldWVNZ3IoKS5lbnF1ZXVlU3Rl
cChnZXRDb250ZXh0KCksIHN0ZXBUeXBlKTsNCisgICAgICAgICAgICAJZ2V0U3RlcFF1ZXVlTWFu
YWdlcigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwgc3RlcFR5cGUpOw0KICAgICAgICAgICAg
IH0NCiAgICAgICAgIH0pOw0KICAgICAgICAgcmV0dXJuIHRydWU7DQpJbmRleDogc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhDQo9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1
Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS41DQpkaWZmIC11IC1yMS41IERzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhDQotLS0gc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5q
YXZhCTcgTWF5IDIwMDggMTc6NDA6NDcgLTAwMDAJMS41DQorKysgc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhCTQgSnVsIDIwMDgg
MTM6NDY6MTggLTAwMDANCkBAIC00OSw3ICs0OSw3IEBADQogICAgICAgICBmRXhlY3V0b3Iuc3Vi
bWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMo
KVswXSwgcmVxdWVzdCkgew0KICAgICAgICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBn
ZXRTdGVwVHlwZSgpOw0KICAgICAgICAgICAgIEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1
dGUoKSB7DQotCQkJCWdldFN0ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKA0KKyAgICAgICAg
ICAgIAlnZXRTdGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoDQogICAgICAgICAgICAg
ICAgICAgICBnZXRDb250ZXh0KCksIHN0ZXBUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgbmV3
IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihJbW1lZGlhdGVFeGVjdXRvci5nZXRJbnN0YW5j
ZSgpLCBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQpAQCAtNzEs
NyArNzEsNyBAQA0KICAgICAgICAgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGU9IGdldFN0ZXBUeXBl
KCk7DQogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRy
YWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgew0KICAgICAgICAgICAg
IEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotICAgICAgICAgICAgICAgIGdl
dFN0ZXBRdWV1ZU1ncigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwgc3RlcFR5cGUpOw0KKyAg
ICAgICAgICAgIAlnZXRTdGVwUXVldWVNYW5hZ2VyKCkuZW5xdWV1ZVN0ZXAoZ2V0Q29udGV4dCgp
LCBzdGVwVHlwZSk7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfSk7DQogICAgICAgICByZXR1
cm4gdHJ1ZTsNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMv
RHNmQ29tbWFuZFJ1bm5hYmxlLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9k
c2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51
aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmQ29tbWFuZFJ1bm5h
YmxlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjgNCmRpZmYgLXUgLXIxLjggRHNmQ29t
bWFuZFJ1bm5hYmxlLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2Fj
dGlvbnMvRHNmQ29tbWFuZFJ1bm5hYmxlLmphdmEJMzAgTWF5IDIwMDggMjI6NTc6NDAgLTAwMDAJ
MS44DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZkNvbW1h
bmRSdW5uYWJsZS5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTggLTAwMDANCkBAIC0xNSw4ICsxNSwx
MCBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5Ec2ZSdW5uYWJsZTsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuSW1tdXRhYmxlOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7DQoraW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwuU3Rl
cHBpbmdDb250cm9sbGVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJu
YWwudWkuRHNmRGVidWdVSVBsdWdpbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LnNlcnZpY2UuSVJ1bkNvbnRyb2w7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5z
ZXJ2aWNlLklTdGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
ZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0Ow0KIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlc1RyYWNrZXI7DQpAQCAtMzMsMTAg
KzM1LDM2IEBADQogICAgIHB1YmxpYyBJUnVuQ29udHJvbCBnZXRSdW5Db250cm9sKCkgew0KICAg
ICAgICAgcmV0dXJuIGZUcmFja2VyLmdldFNlcnZpY2UoSVJ1bkNvbnRyb2wuY2xhc3MpOw0KICAg
ICB9DQotICAgIHB1YmxpYyBTdGVwUXVldWVNYW5hZ2VyIGdldFN0ZXBRdWV1ZU1ncigpIHsNCisg
ICAgLyoqDQorICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgI2dldFN0ZXBRdWV1ZU1hbmFn
ZXIoKX0gaW5zdGVhZC4NCisgICAgICovDQorICAgIEBEZXByZWNhdGVkDQorCXB1YmxpYyBTdGVw
UXVldWVNYW5hZ2VyIGdldFN0ZXBRdWV1ZU1ncigpIHsNCiAgICAgICAgIHJldHVybiBmVHJhY2tl
ci5nZXRTZXJ2aWNlKFN0ZXBRdWV1ZU1hbmFnZXIuY2xhc3MpOw0KICAgICB9DQogDQorICAgIC8q
Kg0KKwkgKiBAc2luY2UgMS4xDQorCSAqLw0KKwlwdWJsaWMgSVN0ZXBRdWV1ZU1hbmFnZXIgZ2V0
U3RlcFF1ZXVlTWFuYWdlcigpIHsNCisJCS8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQ0K
KwkJSVN0ZXBRdWV1ZU1hbmFnZXIgbWdyPSBnZXRTdGVwUXVldWVNZ3IoKTsNCisJCWlmIChtZ3Ig
IT0gbnVsbCkgew0KKwkJCXJldHVybiBtZ3I7DQorCQl9DQorCQlyZXR1cm4gZ2V0U3RlcHBpbmdD
b250cm9sbGVyKCk7DQorICAgIH0NCisNCisgICAgLyoqDQorCSAqIEBzaW5jZSAxLjENCisJICov
DQorICAgIHB1YmxpYyBTdGVwcGluZ0NvbnRyb2xsZXIgZ2V0U3RlcHBpbmdDb250cm9sbGVyKCkg
ew0KKyAgICAJaWYgKGZDb250ZXh0ICE9IG51bGwpIHsNCisgICAgCQlyZXR1cm4gKFN0ZXBwaW5n
Q29udHJvbGxlcikgZkNvbnRleHQuZ2V0QWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3Mp
Ow0KKyAgICAJfQ0KKyAgICAJcmV0dXJuIG51bGw7DQorICAgIH0NCisNCiAgICAgcHVibGljIERz
ZkNvbW1hbmRSdW5uYWJsZShEc2ZTZXJ2aWNlc1RyYWNrZXIgc2VydmljZXNUcmFja2VyLCBPYmpl
Y3QgZWxlbWVudCwgSURlYnVnQ29tbWFuZFJlcXVlc3QgcmVxdWVzdCkgew0KICAgICAgICAgZlRy
YWNrZXIgPSBzZXJ2aWNlc1RyYWNrZXI7DQogICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9m
IElETVZNQ29udGV4dCkgew0KQEAgLTU2LDcgKzg0LDcgQEANCiAgICAgICAgIH0NCiAgICAgICAg
IGlmIChnZXRDb250ZXh0KCkgPT0gbnVsbCkgew0KICAgICAgICAgICAgIGZSZXF1ZXN0LnNldFN0
YXR1cyhtYWtlRXJyb3IoIlNlbGVjdGVkIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IHJ1biBjb250
cm9sLiIsIG51bGwpKTsgICAgICAgICAgICAgLy8kTk9OLU5MUy0xJA0KLSAgICAgICAgfSBlbHNl
IGlmIChnZXRSdW5Db250cm9sKCkgPT0gbnVsbCB8fCBnZXRTdGVwUXVldWVNZ3IoKSA9PSBudWxs
KSB7DQorICAgICAgICB9IGVsc2UgaWYgKGdldFJ1bkNvbnRyb2woKSA9PSBudWxsIHx8IGdldFN0
ZXBwaW5nQ29udHJvbGxlcigpID09IG51bGwpIHsNCiAgICAgICAgICAgICBmUmVxdWVzdC5zZXRT
dGF0dXMobWFrZUVycm9yKCJSdW4gQ29udHJvbCBub3QgYXZhaWxhYmxlIiwgbnVsbCkpOyAvLyRO
T04tTkxTLTEkDQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgIGRvRXhlY3V0ZSgpOw0K
SW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwUmV0
dXJuQ29tbWFuZC5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcu
ZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBSZXR1cm5Db21tYW5kLmph
dmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgRHNmU3RlcFJldHVy
bkNvbW1hbmQuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9u
cy9Ec2ZTdGVwUmV0dXJuQ29tbWFuZC5qYXZhCTMwIE1heSAyMDA4IDIyOjU3OjQwIC0wMDAwCTEu
NQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwUmV0
dXJuQ29tbWFuZC5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTggLTAwMDANCkBAIC00Niw3ICs0Niw3
IEBADQogICAgICAgICANCiAgICAgICAgIGZFeGVjdXRvci5zdWJtaXQobmV3IERzZkNvbW1hbmRS
dW5uYWJsZShmVHJhY2tlciwgcmVxdWVzdC5nZXRFbGVtZW50cygpWzBdLCByZXF1ZXN0KSB7IA0K
ICAgICAgICAgICAgIEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotICAgICAg
ICAgICAgICAgIGdldFN0ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKA0KKyAgICAgICAgICAg
IAlnZXRTdGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoDQogICAgICAgICAgICAgICAg
ICAgICBnZXRDb250ZXh0KCksIFN0ZXBUeXBlLlNURVBfUkVUVVJOLA0KICAgICAgICAgICAgICAg
ICAgICAgbmV3IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihJbW1lZGlhdGVFeGVjdXRvci5n
ZXRJbnN0YW5jZSgpLCBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRl
DQpAQCAtNjcsNyArNjcsNyBAQA0KICAgICAgICAgDQogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0
KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVsw
XSwgcmVxdWVzdCkgeyANCiAgICAgICAgICAgICBAT3ZlcnJpZGUgcHVibGljIHZvaWQgZG9FeGVj
dXRlKCkgew0KLSAgICAgICAgICAgICAgICBnZXRTdGVwUXVldWVNZ3IoKS5lbnF1ZXVlU3RlcChn
ZXRDb250ZXh0KCksIFN0ZXBUeXBlLlNURVBfUkVUVVJOKTsNCisgICAgICAgICAgICAJZ2V0U3Rl
cFF1ZXVlTWFuYWdlcigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwgU3RlcFR5cGUuU1RFUF9S
RVRVUk4pOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgIH0pOw0KICAgICAgICAgcmV0dXJuIHRy
dWU7DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNp
b25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhDQo9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1
Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1
bmNoVk1Qcm92aWRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4zDQpkaWZmIC11IC1y
MS4zIEFic3RyYWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3Ry
YWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMw0K
KysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdExhdW5jaFZNUHJvdmlkZXIuamF2YQk0IEp1bCAyMDA4
IDEzOjQ2OjE4IC0wMDAwDQpAQCAtMjMsNiArMjMsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
YXRhbW9kZWwuSURNQ29udGV4dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2Rl
bC5JRE1FdmVudDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnBy
b3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXI7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1
bmNoLkxhdW5jaFJvb3RWTU5vZGUuTGF1bmNoZXNFdmVudDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5sYXVuY2guU3Rh
Y2tGcmFtZXNWTU5vZGUuSW5jb21wbGV0ZVN0YWNrVk1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsNCkBAIC01NCw3
ICs1NSw3IEBADQogDQogDQogLyoqDQotICogDQorICogQHNpbmNlIDEuMQ0KICAqLw0KIEBTdXBw
cmVzc1dhcm5pbmdzKCJyZXN0cmljdGlvbiIpDQogcHVibGljIGNsYXNzIEFic3RyYWN0TGF1bmNo
Vk1Qcm92aWRlciBleHRlbmRzIEFic3RyYWN0RE1WTVByb3ZpZGVyIA0KQEAgLTgxLDIyICs4Miwx
NSBAQA0KICAgICAgICAgDQogICAgICAgICBmUHJlZmVyZW5jZXNMaXN0ZW5lciA9IG5ldyBJUHJv
cGVydHlDaGFuZ2VMaXN0ZW5lcigpIHsNCiAJCQlwdWJsaWMgdm9pZCBwcm9wZXJ0eUNoYW5nZShm
aW5hbCBQcm9wZXJ0eUNoYW5nZUV2ZW50IGV2ZW50KSB7DQotCQkJCVN0cmluZyBwcm9wZXJ0eSA9
IGV2ZW50LmdldFByb3BlcnR5KCk7DQotCQkJCWlmIChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVG
X1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRS5lcXVhbHMocHJvcGVydHkpDQotCQkJCQkJfHwgSURz
ZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVC5lcXVhbHMocHJvcGVydHkp
KSB7DQotCQkJCQlpZiAoc3RvcmUuZ2V0Qm9vbGVhbihJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVG
X1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSkpIHsNCi0JCQkgICAgICAgIAlnZXRQcmVzZW50YXRp
b25Db250ZXh0KCkuc2V0UHJvcGVydHkoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19G
UkFNRV9MSU1JVCwgc3RvcmUuZ2V0SW50KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tf
RlJBTUVfTElNSVQpKTsNCi0JCQkJCX0gZWxzZSB7DQotCQkJICAgICAgICAJZ2V0UHJlc2VudGF0
aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tf
RlJBTUVfTElNSVQsIG51bGwpOw0KLQkJCQkJfQ0KLQkJCQkJZ2V0RXhlY3V0b3IoKS5leGVjdXRl
KG5ldyBEc2ZSdW5uYWJsZSgpIHsNCi0JCQkJCSAgICBwdWJsaWMgdm9pZCBydW4oKSB7DQotCQkJ
CQkgICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KTsNCi0JCQkJCSAgICB9DQotCQkJCQl9KTsNCi0J
CQkJfQ0KKwkJCQloYW5kbGVQcm9wZXJ0eUNoYW5nZWQoc3RvcmUsIGV2ZW50KTsNCiAJCQl9fTsN
CiAgICAgICAgIHN0b3JlLmFkZFByb3BlcnR5Q2hhbmdlTGlzdGVuZXIoZlByZWZlcmVuY2VzTGlz
dGVuZXIpOw0KKyAgICAgICAgDQorCQlTdGVwcGluZ0NvbnRyb2xsZXIgY29udHJvbGxlciA9IChT
dGVwcGluZ0NvbnRyb2xsZXIpIHNlc3Npb24uZ2V0TW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJv
bGxlci5jbGFzcyk7DQorCQlpZiAoY29udHJvbGxlciAhPSBudWxsKSB7DQorCQkJY29udHJvbGxl
ci5lbmFibGVTeW5jaHJvbml6ZWRTdGVwcGluZyhzdG9yZS5nZXRCb29sZWFuKElEc2ZEZWJ1Z1VJ
Q29uc3RhbnRzLlBSRUZfU1lOQ0hST05JWkVEX1NURVBQSU5HX0VOQUJMRSkpOw0KKwkJCWNvbnRy
b2xsZXIuc2V0TWluaW11bVN0ZXBJbnRlcnZhbChzdG9yZS5nZXRJbnQoSURzZkRlYnVnVUlDb25z
dGFudHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTCkpOw0KKwkJfQ0KICAgICB9DQogICAgIA0KICAg
ICBAT3ZlcnJpZGUNCkBAIC0xMjgsMzAgKzEyMiw0NiBAQA0KICAgICB9DQogDQogICAgIEBPdmVy
cmlkZQ0KLSAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChPYmplY3QgZXZlbnQpIHsNCisgICAg
cHVibGljIHZvaWQgZG9uZUhhbmRsZUV2ZW50KE9iamVjdCBldmVudCkgew0KKwkJaWYgKGV2ZW50
IGluc3RhbmNlb2YgSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQpIHsNCisJCQlpZiAoLyog
ZlN5bmNocm9uaXplZFN0ZXBwaW5nICovIHRydWUpIHsNCisJCQkJSUV4ZWN1dGlvbkRNQ29udGV4
dCBkbWMgPSAoKElSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50KSBldmVudCkuZ2V0RE1Db250
ZXh0KCk7DQorCQkJCVN0ZXBwaW5nQ29udHJvbGxlciBzdGVwUXVldWUgPSAoU3RlcHBpbmdDb250
cm9sbGVyKSBkbWMuZ2V0QWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MpOw0KKwkJCQlp
ZiAoc3RlcFF1ZXVlICE9IG51bGwpIHsNCisJCQkJCXN0ZXBRdWV1ZS5kb25lU3RlcHBpbmcoZG1j
KTsNCisJCQkJfQ0KKwkJCX0NCisJCX0NCisgICAgfQ0KKyAgICANCisgICAgQE92ZXJyaWRlDQor
ICAgIHB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KE9iamVjdCBldmVudCwgZmluYWwgUmVxdWVzdE1v
bml0b3Igcm0pIHsNCiAgICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIERvdWJsZUNsaWNrRXZl
bnQgJiYgIWlzRGlzcG9zZWQoKSkgew0KICAgICAgICAgICAgIGZpbmFsIElTZWxlY3Rpb24gc2Vs
ZWN0aW9uPSAoKERvdWJsZUNsaWNrRXZlbnQpIGV2ZW50KS5nZXRTZWxlY3Rpb24oKTsNCiAgICAg
ICAgICAgICBpZiAoc2VsZWN0aW9uIGluc3RhbmNlb2YgSVN0cnVjdHVyZWRTZWxlY3Rpb24pIHsN
CiAgICAgICAgICAgICAgICAgT2JqZWN0IGVsZW1lbnQ9ICgoSVN0cnVjdHVyZWRTZWxlY3Rpb24p
IHNlbGVjdGlvbikuZ2V0Rmlyc3RFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgIGlmIChlbGVt
ZW50IGluc3RhbmNlb2YgSW5jb21wbGV0ZVN0YWNrVk1Db250ZXh0KSB7DQogICAgICAgICAgICAg
ICAgICAgICBJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQgaW5jU3RhY2tWbWMgPSAoKEluY29tcGxl
dGVTdGFja1ZNQ29udGV4dCkgZWxlbWVudCk7IA0KLSAgICAgICAgICAgICAgICAgICAgSVZNTm9k
ZSBub2RlID0gKChJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQpIGVsZW1lbnQpLmdldFZNTm9kZSgp
Ow0KLSAgICAgICAgICAgICAgICAgICAgaWYgKGluY1N0YWNrVm1jLmdldFZNTm9kZSgpIGluc3Rh
bmNlb2YgU3RhY2tGcmFtZXNWTU5vZGUpIHsNCisgICAgICAgICAgICAgICAgICAgIElWTU5vZGUg
bm9kZSA9IGluY1N0YWNrVm1jLmdldFZNTm9kZSgpOw0KKyAgICAgICAgICAgICAgICAgICAgaWYg
KG5vZGUgaW5zdGFuY2VvZiBTdGFja0ZyYW1lc1ZNTm9kZSAmJiBub2RlLmdldFZNUHJvdmlkZXIo
KSA9PSB0aGlzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgSUV4ZWN1dGlvbkRNQ29udGV4
dCBleGVDdHg9IGluY1N0YWNrVm1jLmdldEV4ZWN1dGlvbkRNQ29udGV4dCgpOw0KIAkJCQkJCSgo
U3RhY2tGcmFtZXNWTU5vZGUpIG5vZGUpLmluY3JlbWVudFN0YWNrRnJhbWVMaW1pdChleGVDdHgp
Ow0KIAkJCQkJCS8vIHJlcGxhY2UgZG91YmxlIGNsaWNrIGV2ZW50IHdpdGggZXhwYW5kIHN0YWNr
IGV2ZW50DQogCQkJCQkJZmluYWwgRXhwYW5kU3RhY2tFdmVudCBleHBhbmRTdGFja0V2ZW50ID0g
bmV3IEV4cGFuZFN0YWNrRXZlbnQoZXhlQ3R4KTsNCiAJCQkJCQlnZXRFeGVjdXRvcigpLmV4ZWN1
dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KIAkJCQkJCSAgICBwdWJsaWMgdm9pZCBydW4oKSB7DQot
CQkJCQkJICAgICAgICBoYW5kbGVFdmVudChleHBhbmRTdGFja0V2ZW50KTsNCisJCQkJCQkgICAg
ICAgIGhhbmRsZUV2ZW50KGV4cGFuZFN0YWNrRXZlbnQsIG51bGwpOw0KIAkJCQkJCSAgICB9DQog
CQkJCQkJfSk7DQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICB9DQorICAgICAgICAgICAgaWYgKHJtICE9IG51bGwpIHsNCisgICAgICAgICAg
ICAJcm0uZG9uZSgpOw0KKyAgICAgICAgICAgIH0NCiAgICAgICAgICAgICByZXR1cm47DQogICAg
ICAgICB9DQotICAgIAlzdXBlci5oYW5kbGVFdmVudChldmVudCk7DQorICAgIAlzdXBlci5oYW5k
bGVFdmVudChldmVudCwgcm0pOw0KICAgICB9DQogDQogICAgIEBPdmVycmlkZQ0KQEAgLTE3Nyw3
ICsxODcsNyBAQA0KIAkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjaGVkdWxlZEZ1
dHVyZTw/PiBmdXR1cmU9IGZSZWZyZXNoU3RhY2tGcmFtZXNGdXR1cmVzLmdldChleGVDb250ZXh0
KTsNCiAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnV0dXJlICE9IG51bGwg
JiYgIWlzRGlzcG9zZWQoKSkgew0KIAkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBmUmVmcmVzaFN0YWNrRnJhbWVzRnV0dXJlcy5yZW1vdmUoZXhlQ29udGV4dCk7DQotCSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KG5ldyBGdWxsU3RhY2tS
ZWZyZXNoRXZlbnQoZXhlQ29udGV4dCkpOw0KKwkgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBoYW5kbGVFdmVudChuZXcgRnVsbFN0YWNrUmVmcmVzaEV2ZW50KGV4ZUNvbnRleHQp
LCBudWxsKTsNCiAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogCSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB9fSk7DQogCSAgICAgICAgICAgICAgICAgICAgfQ0KQEAgLTI2
OSw2ICsyNzksNyBAQA0KICAgICAgICAgICAgIElETUNvbnRleHQgZXZlbnRUb1NraXBEbWMgPSAo
KElETUV2ZW50PD8+KWV2ZW50VG9Ta2lwKS5nZXRETUNvbnRleHQoKTsNCiAgICAgICAgICAgICAN
CiAgICAgICAgICAgICBpZiAobmV3RXZlbnREbWMuZXF1YWxzKGV2ZW50VG9Ta2lwRG1jKSB8fCBE
TUNvbnRleHRzLmlzQW5jZXN0b3JPZihldmVudFRvU2tpcERtYywgbmV3RXZlbnREbWMpKSB7DQor
ICAgICAgICAgICAgCVN5c3RlbS5vdXQucHJpbnRsbigiQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVy
LmNhblNraXBIYW5kbGluZ0V2ZW50KCkgc2tpcHBpbmcgIitldmVudFRvU2tpcC5nZXRDbGFzcygp
LmdldFNpbXBsZU5hbWUoKSk7DQogICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAg
ICAgICAgIH0NCiAgICAgICAgIH0NCkBAIC0yNzYsNCArMjg3LDMxIEBADQogICAgICAgICByZXR1
cm4gZmFsc2U7DQogICAgIH0NCiANCisJcHJvdGVjdGVkIHZvaWQgaGFuZGxlUHJvcGVydHlDaGFu
Z2VkKGZpbmFsIElQcmVmZXJlbmNlU3RvcmUgc3RvcmUsIGZpbmFsIFByb3BlcnR5Q2hhbmdlRXZl
bnQgZXZlbnQpIHsNCisJCVN0cmluZyBwcm9wZXJ0eSA9IGV2ZW50LmdldFByb3BlcnR5KCk7DQor
CQlpZiAoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVF9FTkFCTEUu
ZXF1YWxzKHByb3BlcnR5KQ0KKwkJCQl8fCBJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNL
X0ZSQU1FX0xJTUlULmVxdWFscyhwcm9wZXJ0eSkpIHsNCisJCQlpZiAoc3RvcmUuZ2V0Qm9vbGVh
bihJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSkpIHsN
CisJCSAgICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJ
Q29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIHN0b3JlLmdldEludChJRHNmRGVidWdV
SUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUKSk7DQorCQkJfSBlbHNlIHsNCisJCSAg
ICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3Rh
bnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIG51bGwpOw0KKwkJCX0NCisJCQlnZXRFeGVjdXRv
cigpLmV4ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KKwkJCSAgICBwdWJsaWMgdm9pZCBydW4o
KSB7DQorCQkJICAgICAgICBoYW5kbGVFdmVudChldmVudCk7DQorCQkJICAgIH0NCisJCQl9KTsN
CisJCX0gZWxzZSBpZiAoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TWU5DSFJPTklaRURfU1RF
UFBJTkdfRU5BQkxFLmVxdWFscyhwcm9wZXJ0eSkpIHsNCisJCQlTdGVwcGluZ0NvbnRyb2xsZXIg
Y29udHJvbGxlciA9IChTdGVwcGluZ0NvbnRyb2xsZXIpIGdldFNlc3Npb24oKS5nZXRNb2RlbEFk
YXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzKTsNCisJCQlpZiAoY29udHJvbGxlciAhPSBu
dWxsKSB7DQorCQkJCWNvbnRyb2xsZXIuZW5hYmxlU3luY2hyb25pemVkU3RlcHBpbmcoc3RvcmUu
Z2V0Qm9vbGVhbihwcm9wZXJ0eSkpOw0KKwkJCX0NCisJCX0gZWxzZSBpZiAoSURzZkRlYnVnVUlD
b25zdGFudHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTC5lcXVhbHMocHJvcGVydHkpKSB7DQorCQkJ
U3RlcHBpbmdDb250cm9sbGVyIGNvbnRyb2xsZXIgPSAoU3RlcHBpbmdDb250cm9sbGVyKSBnZXRT
ZXNzaW9uKCkuZ2V0TW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5jbGFzcyk7DQorCQkJ
aWYgKGNvbnRyb2xsZXIgIT0gbnVsbCkgew0KKwkJCQljb250cm9sbGVyLnNldE1pbmltdW1TdGVw
SW50ZXJ2YWwoc3RvcmUuZ2V0SW50KHByb3BlcnR5KSk7DQorCQkJfQ0KKwkJfQ0KKwl9DQorDQog
fQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9u
YWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhDQo9PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lu
cy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0Q29udGFp
bmVyVk1Ob2RlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjQNCmRpZmYgLXUgLXIxLjQg
QWJzdHJhY3RDb250YWluZXJWTU5vZGUuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENv
bnRhaW5lclZNTm9kZS5qYXZhCTE2IEp1biAyMDA4IDE4OjMwOjU0IC0wMDAwCTEuNA0KKysrIHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21v
ZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhCTQgSnVsIDIwMDggMTM6NDY6
MTcgLTAwMDANCkBAIC0xOCw2ICsxOCw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
YXRhbW9kZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2Rl
bC5JRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2
ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9u
YWwudWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlci5TdGVwcGluZ1RpbWVkT3V0RXZlbnQ7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29u
dGFpbmVyRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vydmlj
ZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyUmVzdW1lZERNRXZlbnQ7DQpAQCAtMzcsNiArMzgsOCBA
QA0KIC8qKg0KICAqIEFic3RyYWN0IGltcGxlbWVudGF0aW9uIG9mIGEgY29udGFpbmVyIHZpZXcg
bW9kZWwgbm9kZS4NCiAgKiBDbGllbnRzIG5lZWQgdG8gaW1wbGVtZW50IHtAbGluayAjdXBkYXRl
TGFiZWxJblNlc3Npb25UaHJlYWQoSUxhYmVsVXBkYXRlW10pfS4NCisgKiANCisgKiBAc2luY2Ug
MS4xDQogICovDQogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikNCiBwdWJsaWMgYWJz
dHJhY3QgY2xhc3MgQWJzdHJhY3RDb250YWluZXJWTU5vZGUgZXh0ZW5kcyBBYnN0cmFjdERNVk1O
b2RlIGltcGxlbWVudHMgSUVsZW1lbnRMYWJlbFByb3ZpZGVyIHsNCkBAIC04Nyw2ICs5MCwxMSBA
QA0KICAgICAgICAgICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7
DQogICAgICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOw0KICAgICAgICAg
ICAgIH0NCisJICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVu
dCkgew0KKwkgICAgICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSAN
CisJICAgICAgICB7DQorCSAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOw0K
KwkgICAgICAgIH0NCiAJICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVk
T3V0RXZlbnQpIHsNCiAJICAgICAgICBpZiAoZG1jIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29u
dGV4dCkgDQogCSAgICAgICAgew0KQEAgLTEyOSw2ICsxMzcsMTUgQEANCiAJCSAgICBpZiAoZG1j
IGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgew0KIAkJICAgICAgICBwYXJlbnREZWx0
YS5hZGROb2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0YS5DT05URU5UKTsNCiAJ
CSAgICB9DQorCQl9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQp
IHsNCisJCSAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3Bl
cmF0aW9uIGlzIHRha2luZyANCisJCSAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5l
ZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IA0KKwkJICAgIC8vIHRoZSB1c2VyIHRoYXQgdGhl
IHByb2dyYW0gaXMgcnVubmluZy4NCisJCSAgICAvLyBJZiB0aGUgc3RlcCB3YXMgaXNzdWVkIGZv
ciB0aGUgd2hvbGUgY29udGFpbmVyIHJlZnJlc2gNCisJCSAgICAvLyB0aGUgd2hvbGUgY29udGFp
bmVyLg0KKwkJICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7DQor
CSAgICAgICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3JlYXRlVk1Db250ZXh0KGRtYyksIElN
b2RlbERlbHRhLkNPTlRFTlQpOw0KKwkJICAgIH0NCiAJCX0gZWxzZSBpZiAoZSBpbnN0YW5jZW9m
IElTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCiAJCSAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBp
bmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCiAJCSAgICAvLyBhIGxv
bmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IA0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5h
bC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0VGhyZWFkVk1Ob2RlLmph
dmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgQWJzdHJhY3RUaHJl
YWRWTU5vZGUuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwv
cHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZh
CTE3IEp1biAyMDA4IDIwOjQ2OjExIC0wMDAwCTEuNQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFj
dFRocmVhZFZNTm9kZS5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTggLTAwMDANCkBAIC0yMyw2ICsy
Myw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBw
aW5nQ29udHJvbGxlci5TdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyRE1Db250ZXh0Ow0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFp
bmVyUmVzdW1lZERNRXZlbnQ7DQpAQCAtNTAsNiArNTEsOCBAQA0KIC8qKg0KICAqIEFic3RyYWN0
IGltcGxlbWVudGF0aW9uIG9mIGEgdGhyZWFkIHZpZXcgbW9kZWwgbm9kZS4NCiAgKiBDbGllbnRz
IG5lZWQgdG8gaW1wbGVtZW50IHtAbGluayAjdXBkYXRlTGFiZWxJblNlc3Npb25UaHJlYWQoSUxh
YmVsVXBkYXRlW10pfS4NCisgKiANCisgKiBAc2luY2UgMS4xDQogICovDQogQFN1cHByZXNzV2Fy
bmluZ3MoInJlc3RyaWN0aW9uIikNCiBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUaHJl
YWRWTU5vZGUgZXh0ZW5kcyBBYnN0cmFjdERNVk1Ob2RlDQpAQCAtMTEyLDYgKzExNSwxNSBAQA0K
ICAgICAgICAgICAgICAgICBybS5kb25lKCk7DQogICAgICAgICAgICAgICAgIHJldHVybjsNCiAg
ICAgICAgICAgICB9DQorICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1Rp
bWVkT3V0RXZlbnQgJiYgDQorICAgICAgICAgICAgICAgICgoU3RlcHBpbmdUaW1lZE91dEV2ZW50
KWUpLmdldERNQ29udGV4dCgpIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgDQorICAg
ICB7DQorICAgICAgICAgIC8vIFRoZSB0aW1lZCBvdXQgZXZlbnQgb2NjdXJlZCBvbiBhIGNvbnRh
aW5lciBhbmQgbm90IG9uIGEgdGhyZWFkLiAgRG8gbm90DQorICAgICAgICAgIC8vIHJldHVybiBh
IGNvbnRleHQgZm9yIHRoaXMgZXZlbnQsIHdoaWNoIHdpbGwgZm9yY2UgdGhlIHZpZXcgbW9kZWwg
dG8gZ2VuZXJhdGUNCisgICAgICAgICAgLy8gYSBkZWx0YSBmb3IgYWxsIHRoZSB0aHJlYWRzLg0K
KyAgICAgICAgICBybS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBEc2ZVSVBs
dWdpbi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMuTk9UX1NVUFBPUlRFRCwgIiIsIG51
bGwpKTsgLy8kTk9OLU5MUy0xJA0KKyAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICAgIHJl
dHVybjsNCiAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0
RXZlbnQgJiYgDQogICAgICAgICAgICAgICAgICAgICgoSVN0ZXBwaW5nVGltZWRPdXRFdmVudCll
KS5nZXRETUNvbnRleHQoKSBpbnN0YW5jZW9mIElDb250YWluZXJETUNvbnRleHQpIA0KICAgICAg
ICAgew0KQEAgLTIzMiw2ICsyNDQsOCBAQA0KICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0
YS5OT19DSEFOR0U7DQogICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBGdWxsU3RhY2tS
ZWZyZXNoRXZlbnQpIHsNCiAgICAgICAgICAgICByZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVDsN
CisgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkg
ew0KKyAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOyAgICAgICAgICAgIA0K
ICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkg
ew0KICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOyAgICAgICAgICAgIA0K
ICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgTW9kZWxQcm94eUluc3RhbGxlZEV2ZW50
KSB7DQpAQCAtMjcxLDYgKzI4NSwxMiBAQA0KICAgICAgICAgICAgIC8vIGFuZCBhIGZpeGVkIGRl
bGF5LiAgUmVmcmVzaCB0aGUgd2hvbGUgdGhyZWFkIHVwb24gdGhpcyBldmVudC4NCiAgICAgICAg
ICAgICBwYXJlbnREZWx0YS5hZGROb2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0
YS5DT05URU5UKTsNCiAgICAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICB9IGVsc2UgaWYg
KGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCisgICAgICAgICAgICAvLyBT
dGVwcGluZyB0aW1lLW91dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2lu
ZyANCisgICAgICAgICAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJl
IHJlZnJlc2hlZCB0byBzaG93IA0KKyAgICAgICAgICAgIC8vIHRoZSB1c2VyIHRoYXQgdGhlIHBy
b2dyYW0gaXMgcnVubmluZy4gIA0KKyAgICAgICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3Jl
YXRlVk1Db250ZXh0KGRtYyksIElNb2RlbERlbHRhLkNPTlRFTlQpOw0KKyAgICAgICAgICAgIHJt
LmRvbmUoKTsgICAgICAgICAgICANCiAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElT
dGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCiAgICAgICAgICAgICAvLyBTdGVwcGluZyB0aW1lLW91
dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCiAgICAgICAgICAg
ICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBz
aG93IA0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlz
aW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9v
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9p
bnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL1N0YWNrRnJhbWVzVk1Ob2Rl
LmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjE0DQpkaWZmIC11IC1yMS4xNCBTdGFja0Zy
YW1lc1ZNTm9kZS5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5h
bC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL1N0YWNrRnJhbWVzVk1Ob2RlLmphdmEJ
MjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xNA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0Zy
YW1lc1ZNTm9kZS5qYXZhCTQgSnVsIDIwMDggMTM6NDY6MTggLTAwMDANCkBAIC0yMiwxMCArMjIs
MTEgQEANCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0
b3I7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KK2ltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVs
LlN0ZXBwaW5nQ29udHJvbGxlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmlu
dGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuU3RlcHBp
bmdUaW1lZE91dEV2ZW50Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vydmlj
ZS5JUnVuQ29udHJvbDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2Uu
SVN0YWNrOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2sy
Ow0KLWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5h
Z2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJv
bC5JQ29udGFpbmVyRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcu
c2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyU3VzcGVuZGVkRE1FdmVudDsNCiBpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRN
Q29udGV4dDsNCkBAIC0zMyw2ICszNCw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
ZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50Ow0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2suSUZyYW1lRE1Db250ZXh0Ow0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2suSUZyYW1lRE1EYXRh
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5h
Z2VyLklTdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
ZWJ1Zy51aS5JRHNmRGVidWdVSUNvbnN0YW50czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LnNlcnZpY2UuRHNmU2Vzc2lvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnVpLmNvbmN1
cnJlbnQuVmlld2VyRGF0YVJlcXVlc3RNb25pdG9yOw0KQEAgLTY1LDYgKzY3LDggQEANCiAgICAg
DQogCS8qKg0KIAkgKiBWaWV3IG1vZGVsIGNvbnRleHQgcmVwcmVzZW50aW5nIHRoZSBlbmQgb2Yg
YW4gaW5jb21wbGV0ZSBzdGFjay4NCisJICogDQorCSAqIEBzaW5jZSAxLjENCiAJICovDQogCXB1
YmxpYyBjbGFzcyBJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQgZXh0ZW5kcyBBYnN0cmFjdFZNQ29u
dGV4dCB7DQogCQlwcml2YXRlIGZpbmFsIGludCBmTGV2ZWw7DQpAQCAtMzIwLDEzICszMjQsMTYg
QEANCiAgICAgICAgIGlmIChpZHggIT0gMCkgcmV0dXJuOw0KICAgICAgICAgDQogICAgICAgICBm
aW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNEbWMgPSBmaW5kRG1jSW5QYXRoKHVwZGF0ZS5n
ZXRWaWV3ZXJJbnB1dCgpLCB1cGRhdGUuZ2V0RWxlbWVudFBhdGgoKSwgSUV4ZWN1dGlvbkRNQ29u
dGV4dC5jbGFzcyk7DQorICAgICAgICBpZiAoZXhlY0RtYyA9PSBudWxsKSB7DQorICAgICAgICAJ
cmV0dXJuOw0KKyAgICAgICAgfQ0KICAgICAgICAgSVJ1bkNvbnRyb2wgcnVuQ29udHJvbFNlcnZp
Y2UgPSBnZXRTZXJ2aWNlc1RyYWNrZXIoKS5nZXRTZXJ2aWNlKElSdW5Db250cm9sLmNsYXNzKTsg
DQotICAgICAgICBTdGVwUXVldWVNYW5hZ2VyIHN0ZXBRdWV1ZU1nclNlcnZpY2UgPSBnZXRTZXJ2
aWNlc1RyYWNrZXIoKS5nZXRTZXJ2aWNlKFN0ZXBRdWV1ZU1hbmFnZXIuY2xhc3MpOyANCi0gICAg
ICAgIGlmIChleGVjRG1jID09IG51bGwgfHwgcnVuQ29udHJvbFNlcnZpY2UgPT0gbnVsbCB8fCBz
dGVwUXVldWVNZ3JTZXJ2aWNlID09IG51bGwpIHJldHVybjsNCisgICAgICAgIFN0ZXBwaW5nQ29u
dHJvbGxlciBzdGVwUXVldWVNZ3IgPSAoU3RlcHBpbmdDb250cm9sbGVyKSBleGVjRG1jLmdldEFk
YXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzKTsgDQorICAgICAgICBpZiAocnVuQ29udHJv
bFNlcnZpY2UgPT0gbnVsbCB8fCBzdGVwUXVldWVNZ3IgPT0gbnVsbCkgcmV0dXJuOw0KICAgICAg
ICAgDQogICAgICAgICBTdHJpbmcgaW1hZ2VLZXkgPSBudWxsOw0KICAgICAgICAgaWYgKHJ1bkNv
bnRyb2xTZXJ2aWNlLmlzU3VzcGVuZGVkKGV4ZWNEbWMpIHx8IA0KLSAgICAgICAgICAgIChydW5D
b250cm9sU2VydmljZS5pc1N0ZXBwaW5nKGV4ZWNEbWMpICYmICFzdGVwUXVldWVNZ3JTZXJ2aWNl
LmlzU3RlcHBpbmdUaW1lZE91dChleGVjRG1jKSkpDQorICAgICAgICAgICAgKHJ1bkNvbnRyb2xT
ZXJ2aWNlLmlzU3RlcHBpbmcoZXhlY0RtYykgJiYgIXN0ZXBRdWV1ZU1nci5pc1N0ZXBwaW5nVGlt
ZWRPdXQoZXhlY0RtYykpKQ0KICAgICAgICAgew0KICAgICAgICAgICAgIGltYWdlS2V5ID0gSURl
YnVnVUlDb25zdGFudHMuSU1HX09CSlNfU1RBQ0tGUkFNRTsNCiAgICAgICAgIH0gZWxzZSB7DQpA
QCAtNDA5LDcgKzQxNiw5IEBADQogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRF
TlQgfCBJTW9kZWxEZWx0YS5FWFBBTkQgfCBJTW9kZWxEZWx0YS5TRUxFQ1Q7DQogICAgICAgICB9
IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBGdWxsU3RhY2tSZWZyZXNoRXZlbnQpIHsNCiAgICAgICAg
IAlyZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVCB8IElNb2RlbERlbHRhLkVYUEFORDsNCi0gICAg
ICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBRdWV1ZU1hbmFnZXIuSVN0ZXBwaW5nVGlt
ZWRPdXRFdmVudCkgew0KKyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgU3RlcHBpbmdU
aW1lZE91dEV2ZW50KSB7DQorICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7
DQorICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBJU3RlcHBpbmdUaW1lZE91dEV2ZW50
KSB7DQogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7DQogICAgICAgICB9
IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBNb2RlbFByb3h5SW5zdGFsbGVkRXZlbnQpIHsNCiAgICAg
ICAgICAgICByZXR1cm4gSU1vZGVsRGVsdGEuU0VMRUNUIHwgSU1vZGVsRGVsdGEuRVhQQU5EOw0K
QEAgLTQ2MSw4ICs0NzAsMTAgQEANCiAgICAgICAgICAgICBjbGVhclN0YWNrRnJhbWVMaW1pdCgg
KChJU3VzcGVuZGVkRE1FdmVudCllKS5nZXRETUNvbnRleHQoKSApOw0KICAgICAgICAgICAgIElF
eGVjdXRpb25ETUNvbnRleHQgZXhlY0RtYyA9ICgoSVN1c3BlbmRlZERNRXZlbnQpZSkuZ2V0RE1D
b250ZXh0KCk7DQogICAgICAgICAgICAgYnVpbGREZWx0YUZvclN1c3BlbmRlZEV2ZW50KGV4ZWNE
bWMsIGV4ZWNEbWMsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KLSAgICAgICAgfSBlbHNlIGlm
IChlIGluc3RhbmNlb2YgU3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7
DQotICAgICAgICAgICAgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgoU3RlcFF1
ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwg
cm0pOw0KKyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgU3RlcHBpbmdUaW1lZE91dEV2
ZW50KSB7DQorICAgICAgICAgICAgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgo
U3RlcHBpbmdUaW1lZE91dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KKyAgICAg
ICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0KKyAg
ICAgICAgICAgIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoKElTdGVwcGluZ1Rp
bWVkT3V0RXZlbnQpZSwgcGFyZW50LCBub2RlT2Zmc2V0LCBybSk7DQogICAgICAgICB9IGVsc2Ug
aWYgKGUgaW5zdGFuY2VvZiBNb2RlbFByb3h5SW5zdGFsbGVkRXZlbnQpIHsNCiAgICAgICAgICAg
ICBidWlsZERlbHRhRm9yTW9kZWxQcm94eUluc3RhbGxlZEV2ZW50KHBhcmVudCwgbm9kZU9mZnNl
dCwgcm0pOw0KICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgRXhwYW5kU3RhY2tFdmVu
dCkgew0KQEAgLTU0Nyw3ICs1NTgsMTMgQEANCiAgICAgICAgIHJtLmRvbmUoKTsNCiAJfQ0KIAkN
Ci0gICAgcHJpdmF0ZSB2b2lkIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoZmlu
YWwgU3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50IGUsIGZpbmFsIFZNRGVs
dGEgcGFyZW50RGVsdGEsIGZpbmFsIGludCBub2RlT2Zmc2V0LCBmaW5hbCBSZXF1ZXN0TW9uaXRv
ciBybSkgew0KKyAgICBwcml2YXRlIHZvaWQgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRF
dmVudChmaW5hbCBTdGVwcGluZ1RpbWVkT3V0RXZlbnQgZSwgZmluYWwgVk1EZWx0YSBwYXJlbnRE
ZWx0YSwgZmluYWwgaW50IG5vZGVPZmZzZXQsIGZpbmFsIFJlcXVlc3RNb25pdG9yIHJtKSB7DQor
ICAgICAgICAvLyBSZXBhaW50IHRoZSBzdGFjayBmcmFtZSBpbWFnZXMgdG8gaGF2ZSB0aGUgcnVu
bmluZyBzeW1ib2wuDQorICAgICAgICAvL3BhcmVudERlbHRhLnNldEZsYWdzKHBhcmVudERlbHRh
LmdldEZsYWdzKCkgfCBJTW9kZWxEZWx0YS5DT05URU5UKTsNCisgICAgICAgIHJtLmRvbmUoKTsN
CisgICAgfQ0KKyAgICANCisgICAgcHJpdmF0ZSB2b2lkIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1Rp
bWVkT3V0RXZlbnQoZmluYWwgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCBlLCBmaW5hbCBWTURlbHRh
IHBhcmVudERlbHRhLCBmaW5hbCBpbnQgbm9kZU9mZnNldCwgZmluYWwgUmVxdWVzdE1vbml0b3Ig
cm0pIHsNCiAgICAgICAgIC8vIFJlcGFpbnQgdGhlIHN0YWNrIGZyYW1lIGltYWdlcyB0byBoYXZl
IHRoZSBydW5uaW5nIHN5bWJvbC4NCiAgICAgICAgIC8vcGFyZW50RGVsdGEuc2V0RmxhZ3MocGFy
ZW50RGVsdGEuZ2V0RmxhZ3MoKSB8IElNb2RlbERlbHRhLkNPTlRFTlQpOw0KICAgICAgICAgcm0u
ZG9uZSgpOw0KQEAgLTY2MCw2ICs2NzcsOCBAQA0KIAkgKiBHZXQgdGhlIGN1cnJlbnQgYWN0aXZl
IHN0YWNrIGZyYW1lIGxpbWl0LiBJZiBubyBsaW1pdCBpcyBhcHBsaWNhYmxlIHtAbGluayBJbnRl
Z2VyLk1BWF9WQUxVRX0gaXMgcmV0dXJuZWQuDQogCSAqIA0KIAkgKiBAcmV0dXJuIHRoZSBjdXJy
ZW50IHN0YWNrIGZyYW1lIGxpbWl0DQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQogCSAqLw0KIAlw
dWJsaWMgaW50IGdldFN0YWNrRnJhbWVMaW1pdChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgp
IHsNCiAJCWlmIChmVGVtcG9yYXJ5TGltaXRzLmNvbnRhaW5zS2V5KGV4ZWNDdHgpKSB7DQpAQCAt
Njg5LDYgKzcwOCw4IEBADQogCS8qKg0KIAkgKiBJbmNyZW1lbnQgdGhlIHN0YWNrIGZyYW1lIGxp
bWl0IGJ5IHRoZSBkZWZhdWx0IGluY3JlbWVudC4NCiAJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBk
b3VibGVzIHRoZSBjdXJyZW50IGxpbWl0Lg0KKwkgKiANCisJICogQHNpbmNlIDEuMQ0KIAkgKi8N
CiAJcHVibGljIHZvaWQgaW5jcmVtZW50U3RhY2tGcmFtZUxpbWl0KElFeGVjdXRpb25ETUNvbnRl
eHQgZXhlY0N0eCkgew0KIAkJZmluYWwgaW50IHN0YWNrRnJhbWVMaW1pdD0gZ2V0U3RhY2tGcmFt
ZUxpbWl0KGV4ZWNDdHgpOw0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkv
SURzZkRlYnVnVUlDb25zdGFudHMuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290
L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvSURzZkRlYnVnVUlDb25zdGFudHMu
amF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNQ0KZGlmZiAtdSAtcjEuNSBJRHNmRGVidWdV
SUNvbnN0YW50cy5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNm
RGVidWdVSUNvbnN0YW50cy5qYXZhCTI0IEp1biAyMDA4IDIwOjAyOjU2IC0wMDAwCTEuNQ0KKysr
IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvSURzZkRlYnVnVUlDb25zdGFudHMuamF2
YQk0IEp1bCAyMDA4IDEzOjQ2OjE4IC0wMDAwDQpAQCAtMTIsNyArMTIsOSBAQA0KIA0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZWJ1Zy51aS5JRGVidWdVSUNvbnN0YW50czsNCiANCi0NCisvKioNCisg
KiBAbm9pbXBsZW1lbnQgVGhpcyBpbnRlcmZhY2UgaXMgbm90IGludGVuZGVkIHRvIGJlIGltcGxl
bWVudGVkIGJ5IGNsaWVudHMuDQorICovDQogcHVibGljIGludGVyZmFjZSBJRHNmRGVidWdVSUNv
bnN0YW50cyB7DQogDQogCS8qKg0KQEAgLTYwLDE1ICs2MiwzMyBAQA0KIAkgKiBJbnRlZ2VyIHBy
ZWZlcmVuY2UgdG8gY29udHJvbCB0aGUgbWF4aW11bSBhbW91bnQgb2Ygc3RhY2sgZnJhbWVzIHRv
DQogCSAqIHJldHJpZXZlIGZyb20gdGhlIGJhY2tlbmQuIERlZmF1bHQgdmFsdWUgaXMgMTAuDQog
CSAqIEBzZWUge0BsaW5rICNQUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRX0NCisJICogDQor
CSAqIEBzaW5jZSAxLjENCiAJICovDQogCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBSRUZf
U1RBQ0tfRlJBTUVfTElNSVQgPSAic3RhY2tGcmFtZUxpbWl0IjsgLy8kTk9OLU5MUy0xJA0KIAkN
CiAJLyoqDQotCSAqIEJvb2xlYW4gcHJlZmVyZW5jZSB3aGV0aGVyIHRvIGFwcGx5IHRoZSBzdGFj
ayBmcmFtZSBsaW1pdCBwcmVmZXJlbmNlLg0KKwkgKiBCb29sZWFuIHByZWZlcmVuY2Ugd2hldGhl
ciB0byBhcHBseSB0aGUgc3RhY2sgZnJhbWUgbGltaXQgcHJlZmVyZW5jZS4gRGVmYXVsdCBpcyA8
Y29kZT50cnVlPC9jb2RlPi4NCiAJICogQHNlZSB7QGxpbmsgI1BSRUZfU1RBQ0tfRlJBTUVfTElN
SVR9DQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQogCSAqLw0KIAlwdWJsaWMgc3RhdGljIGZpbmFs
IFN0cmluZyBQUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSA9ICJzdGFja0ZyYW1lTGltaXRF
bmFibGUiOyAvLyROT04tTkxTLTEkDQogDQorCS8qKg0KKwkgKiBCb29sZWFuIHByZWZlcmVuY2Ug
d2hldGhlciB0byBrZWVwIHN0ZXBwaW5nIHNwZWVkIGluIHN5bmMgd2l0aCBVSSB1cGRhdGVzLiBE
ZWZhdWx0IGlzIDxjb2RlPnRydWU8L2NvZGU+Lg0KKwkgKiANCisJICogQHNpbmNlIDEuMQ0KKwkg
Ki8NCisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJFRl9TWU5DSFJPTklaRURfU1RFUFBJ
TkdfRU5BQkxFID0gInN5bmNocm9uaXplZFN0ZXBwaW5nRW5hYmxlIjsgLy8kTk9OLU5MUy0xJA0K
Kw0KKwkvKioNCisJICogSW50ZWdlciBwcmVmZXJlbmNlIHRvIGVuZm9yY2UgYSBtaW5pbXVtIHRp
bWUgaW50ZXJ2YWwgYmV0d2VlbiBzdGVwcy4gRGVmYXVsdCBpcyA8Y29kZT4wPC9jb2RlPi4NCisJ
ICogDQorCSAqIEBzaW5jZSAxLjENCisJICovDQorCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5n
IFBSRUZfTUlOX1NURVBfSU5URVJWQUw9ICJtaW5TdGVwSW50ZXJ2YWwiOyAvLyROT04tTkxTLTEk
DQorDQogICAgIC8qKg0KICAgICAgKiBIZWxwIHByZWZpeGVzLg0KICAgICAgKi8NCkBAIC04NSw1
ICsxMDUsOCBAQA0KICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBERVRBSUxfUEFORV9X
T1JEX1dSQVBfQUNUSU9OID0gUFJFRklYICsgImRldGFpbF9wYW5lX3dvcmRfd3JhcF9hY3Rpb25f
Y29udGV4dCI7IC8vJE5PTi1OTFMtMSQNCiAgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg
REVUQUlMX1BBTkVfTUFYX0xFTkdUSF9BQ1RJT04gPSBQUkVGSVggKyAiZGV0YWlsX3BhbmVfbWF4
X2xlbmd0aF9hY3Rpb25fY29udGV4dCI7IC8vJE5PTi1OTFMtMSQNCiANCisgICAgLyoqDQorCSAq
IEBzaW5jZSAxLjENCisJICovDQogICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBSRUZF
UkVOQ0VfUEFHRT0gUFJFRklYICsgInByZWZlcmVuY2VfcGFnZV9jb250ZXh0IjsgLy8kTk9OLU5M
Uy0xJA0KIH0NCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL1ByZWZlcmVu
Y2VJbml0aWFsaXplci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9v
cmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9QcmVmZXJlbmNlSW5pdGlhbGl6ZXIuamF2YSx2
DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNA0KZGlmZiAtdSAtcjEuNCBQcmVmZXJlbmNlSW5pdGlh
bGl6ZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvUHJlZmVyZW5j
ZUluaXRpYWxpemVyLmphdmEJMjQgSnVuIDIwMDggMjA6MDI6NTYgLTAwMDAJMS40DQorKysgc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9QcmVmZXJlbmNlSW5pdGlhbGl6ZXIuamF2YQk0
IEp1bCAyMDA4IDEzOjQ2OjE4IC0wMDAwDQpAQCAtNTgsNSArNTgsNyBAQA0KIAkJICovDQogCQlw
cmVmcy5zZXREZWZhdWx0KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElN
SVQsIDEwKTsNCiAJCXByZWZzLnNldERlZmF1bHQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9T
VEFDS19GUkFNRV9MSU1JVF9FTkFCTEUsIHRydWUpOw0KLX0NCisJCXByZWZzLnNldERlZmF1bHQo
SURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TWU5DSFJPTklaRURfU1RFUFBJTkdfRU5BQkxFLCB0
cnVlKTsNCisJCXByZWZzLnNldERlZmF1bHQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9NSU5f
U1RFUF9JTlRFUlZBTCwgMCk7DQorCX0NCiB9DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvU3RlcHBpbmdDb250cm9s
bGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2Rl
YnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIu
amF2YQ0KZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zp
c2lvbmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIuamF2YQ0KLS0tIC9kZXYvbnVs
bAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvU3RlcHBpbmdDb250cm9sbGVy
LmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSw0NDAgQEANCisvKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwNiwgMjAwOCBXaW5kIFJp
dmVyIFN5c3RlbXMgYW5kIG90aGVycy4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQor
ICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUg
YXQNCisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqIA0K
KyAqIENvbnRyaWJ1dG9yczoNCisgKiAgICAgV2luZCBSaXZlciBTeXN0ZW1zIC0gaW5pdGlhbCBB
UEkgYW5kIGltcGxlbWVudGF0aW9uDQorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQorcGFja2Fn
ZSBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21v
ZGVsOw0KKw0KK2ltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCitpbXBvcnQgamF2YS51dGlsLkhh
c2hTZXQ7DQoraW1wb3J0IGphdmEudXRpbC5MaW5rZWRMaXN0Ow0KK2ltcG9ydCBqYXZhLnV0aWwu
TGlzdDsNCitpbXBvcnQgamF2YS51dGlsLk1hcDsNCitpbXBvcnQgamF2YS51dGlsLlNldDsNCitp
bXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuU2NoZWR1bGVkRnV0dXJlOw0KK2ltcG9ydCBqYXZh
LnV0aWwuY29uY3VycmVudC5UaW1lVW5pdDsNCisNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmNvbmN1cnJlbnQuRGF0YVJlcXVlc3RNb25pdG9yOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5Ec2ZFeGVjdXRvcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNv
bmN1cnJlbnQuRHNmUnVubmFibGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJy
ZW50LlJlcXVlc3RNb25pdG9yOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVs
LkFic3RyYWN0RE1FdmVudDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5E
TUNvbnRleHRzOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWku
RHNmRGVidWdVSVBsdWdpbjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZp
Y2UuSVJ1bkNvbnRyb2w7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNl
LklTdGVwUXVldWVNYW5hZ2VyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0Ow0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JUmVzdW1lZERNRXZlbnQ7DQoraW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklTdXNwZW5k
ZWRETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVu
Q29udHJvbC5TdGF0ZUNoYW5nZVJlYXNvbjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRl
YnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuU3RlcFR5cGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLlN0ZXBRdWV1ZU1hbmFnZXIuSVN0ZXBwaW5nVGltZWRPdXRFdmVu
dDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZUV2ZW50SGFu
ZGxlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZXNUcmFj
a2VyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOw0KKw0K
Ky8qKg0KKyAqIFRoaXMgY2xhc3MgYnVpbGRzIG9uIHRvcCBvZiBzdGFuZGFyZCBydW4gY29udHJv
bCBzZXJ2aWNlIHRvIHByb3ZpZGUgDQorICogc3RlcCBxdWV1aW5nIGZ1bmN0aW9uYWxpdHkuICBT
dGVwIHF1ZXVpbmcgZXNzZW50aWFsbHkgYWxsb3dzIHVzZXIgdG8gcHJlc3MNCisgKiBhbmQgaG9s
ZCB0aGUgc3RlcCBrZXkgYW5kIGFjaGlldmUgbWF4aW11bSBzdGVwcGluZyBzcGVlZC4gIElmIHRo
aXMgY2xhc3MNCisgKiBpcyB1c2VkLCBvdGhlciBzZXJ2aWNlIGltcGxlbWVudGF0aW9ucywgc3Vj
aCBhcyBzdGFjayBhbmQgZXhwcmVzc2lvbnMsIGNhbiANCisgKiB1c2UgaXQgdG8gYXZvaWQgcmVx
dWVzdGluZyBkYXRhIGZyb20gZGVidWdnZXIgYmFjayBlbmQgaWYgYW5vdGhlciBzdGVwIGlzIA0K
KyAqIGFib3V0IHRvIGJlIGV4ZWN1dGVkLiANCisgKiANCisgKiBAc2luY2UgMS4xDQorICovDQor
cHVibGljIGNsYXNzIFN0ZXBwaW5nQ29udHJvbGxlciBpbXBsZW1lbnRzIElTdGVwUXVldWVNYW5h
Z2VyDQorew0KKyAgICAvKioNCisgICAgICogQW1vdW50IG9mIHRpbWUgaW4gbWlsaXNlY29uZHMs
IHRoYXQgaXQgdGFrZXMgdGhlIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQgDQorICAgICAqIGV2ZW50
IHRvIGJlIGlzc3VlZCBhZnRlciBhIHN0ZXAgaXMgc3RhcnRlZC4gDQorICAgICAqIEBzZWUgSVN0
ZXBwaW5nVGltZWRPdXRFdmVudCAgDQorICAgICAqLw0KKyAgICBwdWJsaWMgZmluYWwgc3RhdGlj
IGludCBTVEVQUElOR19USU1FT1VUID0gNTAwOw0KKyAgICANCisgICAgLyoqDQorICAgICAqIFRo
ZSBkZXB0aCBvZiB0aGUgc3RlcCBxdWV1ZS4gIEluIG90aGVyIHdvcmRzLCB0aGUgbWF4aW11bSBu
dW1iZXIgb2Ygc3RlcHMgDQorICAgICAqIHRoYXQgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHN0ZXAg
cXVldWUgbWFuYWdlciB0aHJvd2luZyB0aGVtIGF3YXkuIA0KKyAgICAgKi8NCisgICAgcHVibGlj
IGZpbmFsIHN0YXRpYyBpbnQgU1RFUF9RVUVVRV9ERVBUSCA9IDE7DQorICAgIA0KKy8vICAgIC8q
Kg0KKy8vICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBnaXZlbiBjb250ZXh0IGhhcyBiZWVuIHN0
ZXBwaW5nIGZvciBzb21lIHRpbWUsIA0KKy8vICAgICAqIGFuZCB0aGUgVUkgKHZpZXdzIGFuZCBh
Y3Rpb25zKSBtYXkgbmVlZCB0byBiZSB1cGRhdGVkIGFjY29yZGluZ2x5LiANCisvLyAgICAgKi8N
CisvLyAgICBwdWJsaWMgaW50ZXJmYWNlIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQgZXh0ZW5kcyBJ
RE1FdmVudDxJRXhlY3V0aW9uRE1Db250ZXh0PiB7fQ0KKy8vDQorICAgIA0KKwlwdWJsaWMgc3Rh
dGljIGZpbmFsIGNsYXNzIFN0ZXBwaW5nVGltZWRPdXRFdmVudCBleHRlbmRzIEFic3RyYWN0RE1F
dmVudDxJRXhlY3V0aW9uRE1Db250ZXh0PiBpbXBsZW1lbnRzIElTdGVwcGluZ1RpbWVkT3V0RXZl
bnQgew0KKwkJcHJpdmF0ZSBTdGVwcGluZ1RpbWVkT3V0RXZlbnQoSUV4ZWN1dGlvbkRNQ29udGV4
dCBleGVjQ3R4KSB7DQorCQkJc3VwZXIoZXhlY0N0eCk7DQorCQl9DQorCX0NCisNCisJcHJpdmF0
ZSBzdGF0aWMgY2xhc3MgU3RlcFJlcXVlc3Qgew0KKyAgICAgICAgU3RlcFR5cGUgZlN0ZXBUeXBl
Ow0KKyAgICAgICAgU3RlcFJlcXVlc3QoU3RlcFR5cGUgdHlwZSkgew0KKyAgICAgICAgICAgIGZT
dGVwVHlwZSA9IHR5cGU7DQorICAgICAgICB9DQorICAgIH0NCisNCisJcHJpdmF0ZSBmaW5hbCBE
c2ZTZXNzaW9uIGZTZXNzaW9uOw0KKwlwcml2YXRlIGZpbmFsIERzZlNlcnZpY2VzVHJhY2tlciBm
U2VydmljZXNUcmFja2VyOw0KKw0KKyAgICBwcml2YXRlIElSdW5Db250cm9sIGZSdW5Db250cm9s
Ow0KKyAgICBwcml2YXRlIGludCBmUXVldWVEZXB0aCA9IFNURVBfUVVFVUVfREVQVEg7DQorICAg
IHByaXZhdGUgTWFwPElFeGVjdXRpb25ETUNvbnRleHQsTGlzdDxTdGVwUmVxdWVzdD4+IGZTdGVw
UXVldWVzID0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxMaXN0PFN0ZXBSZXF1ZXN0
Pj4oKTsNCisgICAgcHJpdmF0ZSBNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxCb29sZWFuPiBmVGlt
ZWRPdXRGbGFncyA9IG5ldyBIYXNoTWFwPElFeGVjdXRpb25ETUNvbnRleHQsQm9vbGVhbj4oKTsN
CisgICAgcHJpdmF0ZSBNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxTY2hlZHVsZWRGdXR1cmU8Pz4+
IGZUaW1lZE91dEZ1dHVyZXMgPSBuZXcgSGFzaE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LFNjaGVk
dWxlZEZ1dHVyZTw/Pj4oKTsNCisNCisJcHJpdmF0ZSBNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCwg
TG9uZz4gZkxhc3RTdGVwVGltZT0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCwgTG9u
Zz4oKTsNCisJLyoqDQorCSAqIE1pbmltdW0gc3RlcCBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHMu
DQorCSAqIFRPRE8gTWFrZSB0aGlzIGEgcHJlZmVyZW5jZQ0KKwkgKi8NCisJcHJpdmF0ZSBpbnQg
Zk1pblN0ZXBJbnRlcnZhbD0gMDsNCisNCisJLyoqDQorCSAqIFdoZXRoZXIgc3luY2hyb25pemVk
IHN0ZXBwaW5nIGlzIGVuYWJsZWQuDQorCSAqIFRPRE8gTWFrZSB0aGlzIGEgcHJlZmVyZW5jZQ0K
KwkgKi8NCisJcHJpdmF0ZSBib29sZWFuIGZTeW5jaHJvbml6ZWRTdGVwcGluZyA9IHRydWU7DQor
CQ0KKwkvKioNCisJICogU2V0IG9mIGV4ZWN1dGlvbiBjb250ZXh0cyBmb3Igd2hpY2ggc3RlcHBp
bmcgaXMgdGVtcG9yYXJpbHkgZGlzYWJsZWQuDQorCSAqLw0KKwlwcml2YXRlIFNldDxJRXhlY3V0
aW9uRE1Db250ZXh0PiBmRGlzYWJsZWRDb250ZXh0cyA9IG5ldyBIYXNoU2V0PElFeGVjdXRpb25E
TUNvbnRleHQ+KCk7DQorDQorDQorICAgIHB1YmxpYyBTdGVwcGluZ0NvbnRyb2xsZXIoRHNmU2Vz
c2lvbiBzZXNzaW9uKSB7DQorICAgICAgICBmU2Vzc2lvbiA9IHNlc3Npb247DQorICAgICAgICBm
U2VydmljZXNUcmFja2VyID0gbmV3IERzZlNlcnZpY2VzVHJhY2tlcihEc2ZEZWJ1Z1VJUGx1Z2lu
LmdldEJ1bmRsZUNvbnRleHQoKSwgc2Vzc2lvbi5nZXRJZCgpKTsNCisgICAgfQ0KKw0KKyAgICBw
dWJsaWMgdm9pZCBkaXNwb3NlKCkgew0KKyAgICAJaWYgKGZSdW5Db250cm9sICE9IG51bGwpIHsN
CisgICAgCQlnZXRTZXNzaW9uKCkucmVtb3ZlU2VydmljZUV2ZW50TGlzdGVuZXIodGhpcyk7DQor
ICAgIAl9DQorICAgICAgICBmU2VydmljZXNUcmFja2VyLmRpc3Bvc2UoKTsNCisgICAgfQ0KKw0K
Kwlwcml2YXRlIERzZlNlc3Npb24gZ2V0U2Vzc2lvbigpIHsNCisJCXJldHVybiBmU2Vzc2lvbjsN
CisJfQ0KKw0KKwlwcml2YXRlIERzZkV4ZWN1dG9yIGdldEV4ZWN1dG9yKCkgew0KKwkJcmV0dXJu
IGdldFNlc3Npb24oKS5nZXRFeGVjdXRvcigpOw0KKwl9DQorCQ0KKwlwcml2YXRlIERzZlNlcnZp
Y2VzVHJhY2tlciBnZXRTZXJ2aWNlc1RyYWNrZXIoKSB7DQorCQlyZXR1cm4gZlNlcnZpY2VzVHJh
Y2tlcjsNCisJfQ0KKw0KKwlwcml2YXRlIElSdW5Db250cm9sIGdldFJ1bkNvbnRyb2woKSB7DQor
CQlpZiAoZlJ1bkNvbnRyb2wgPT0gbnVsbCkgew0KKwkgICAgICAgIGZSdW5Db250cm9sID0gZ2V0
U2VydmljZXNUcmFja2VyKCkuZ2V0U2VydmljZShJUnVuQ29udHJvbC5jbGFzcyk7DQorCSAgICAg
ICAgZ2V0U2Vzc2lvbigpLmFkZFNlcnZpY2VFdmVudExpc3RlbmVyKHRoaXMsIG51bGwpOw0KKwkJ
fQ0KKwkJcmV0dXJuIGZSdW5Db250cm9sOw0KKwl9DQorDQorCS8qKg0KKyAgICAgKiBDaGVja3Mg
d2hldGhlciBhIHN0ZXAgY29tbWFuZCBjYW4gYmUgcXVldWVkIHVwIGZvciBnaXZlbiBjb250ZXh0
Lg0KKyAgICAgKi8NCisgICAgcHVibGljIHZvaWQgY2FuRW5xdWV1ZVN0ZXAoSUV4ZWN1dGlvbkRN
Q29udGV4dCBleGVjQ3R4LCBTdGVwVHlwZSBzdGVwVHlwZSwgRGF0YVJlcXVlc3RNb25pdG9yPEJv
b2xlYW4+IHJtKSB7DQorICAgICAgICBpZiAoZG9DYW5FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVw
VHlwZSkpIHsNCisgICAgICAgICAgICBybS5zZXREYXRhKHRydWUpOw0KKyAgICAgICAgICAgIHJt
LmRvbmUoKTsNCisgICAgICAgIH0gZWxzZSB7DQorICAgICAgICAgICAgZ2V0UnVuQ29udHJvbCgp
LmNhblN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUsIHJtKTsNCisgICAgICAgIH0NCisgICAgfQ0KKw0K
KyAgICBwcml2YXRlIGJvb2xlYW4gZG9DYW5FbnF1ZXVlU3RlcChJRXhlY3V0aW9uRE1Db250ZXh0
IGV4ZWNDdHgsIFN0ZXBUeXBlIHN0ZXBUeXBlKSB7DQorICAgICAgICByZXR1cm4gZ2V0UnVuQ29u
dHJvbCgpLmlzU3RlcHBpbmcoZXhlY0N0eCkgJiYgIWlzU3RlcHBpbmdUaW1lZE91dChleGVjQ3R4
KTsgDQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIG5leHQg
c3RlcCBvbiB0aGUgZ2l2ZW4gZXhlY3V0aW9uIGNvbnRleHQgc2hvdWxkIGJlIGRlbGF5ZWQNCisg
ICAgICogYmFzZWQgb24gdGhlIGNvbmZpZ3VyZWQgc3RlcCBkZWxheS4NCisgICAgICogDQorCSAq
IEBwYXJhbSBleGVjQ3R4DQorCSAqIEByZXR1cm4gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIHN0
ZXAgc2hvdWxkIGJlIGRlbGF5ZWQNCisJICovDQorCXByaXZhdGUgYm9vbGVhbiBzaG91bGREZWxh
eVN0ZXAoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorICAgICAgICByZXR1cm4gZ2V0
U3RlcERlbGF5KGV4ZWNDdHgpID4gMDsNCisJfQ0KKw0KKwkvKioNCisJICogQ29tcHV0ZSB0aGUg
ZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSB0aGUgbmV4dCBzdGVwIGZvciB0aGUgZ2l2ZW4g
Y29udGV4dCBtYXkgYmUgZXhlY3V0ZWQuDQorCSAqIA0KKwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkg
KiBAcmV0dXJuICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZWZvcmUgdGhlIG5leHQgcG9z
c2libGUgc3RlcA0KKwkgKi8NCisJcHJpdmF0ZSBpbnQgZ2V0U3RlcERlbGF5KElFeGVjdXRpb25E
TUNvbnRleHQgZXhlY0N0eCkgew0KKwkJaWYgKGZNaW5TdGVwSW50ZXJ2YWwgPiAwKSB7DQorCSAg
ICAgICAgZm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGxhc3RTdGVwQ3R4IDogZkxhc3RTdGVwVGlt
ZS5rZXlTZXQoKSkgew0KKwkgICAgICAgICAgICBpZiAoZXhlY0N0eC5lcXVhbHMobGFzdFN0ZXBD
dHgpIHx8IERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4ZWNDdHgsIGxhc3RTdGVwQ3R4KSkgew0K
KwkgICAgICAgICAgICAgICAgbG9uZyBub3cgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsN
CisJCQkJCWludCBkZWxheT0gKGludCkgKGZMYXN0U3RlcFRpbWUuZ2V0KGxhc3RTdGVwQ3R4KSAr
IGZNaW5TdGVwSW50ZXJ2YWwgLSBub3cpOw0KKwkJCQkJcmV0dXJuIE1hdGgubWF4KGRlbGF5LCAw
KTsNCisJICAgICAgICAgICAgfQ0KKwkgICAgICAgIH0NCisJCX0NCisgICAgICAgIHJldHVybiAw
Ow0KKwl9DQorDQorCXByaXZhdGUgdm9pZCB1cGRhdGVMYXN0U3RlcFRpbWUoSUV4ZWN1dGlvbkRN
Q29udGV4dCBleGVjQ3R4KSB7DQorCQlpZiAoZk1pblN0ZXBJbnRlcnZhbCA+IDApIHsNCisJICAg
ICAgICBsb25nIG5vdyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOw0KKwkJCWZMYXN0U3Rl
cFRpbWUucHV0KGV4ZWNDdHgsIG5vdyk7DQorCSAgICAgICAgZm9yIChJRXhlY3V0aW9uRE1Db250
ZXh0IGxhc3RTdGVwQ3R4IDogZkxhc3RTdGVwVGltZS5rZXlTZXQoKSkgew0KKwkgICAgICAgICAg
ICBpZiAoZXhlY0N0eCAhPSBsYXN0U3RlcEN0eCAmJiBETUNvbnRleHRzLmlzQW5jZXN0b3JPZihl
eGVjQ3R4LCBsYXN0U3RlcEN0eCkpIHsNCisJCQkJCWZMYXN0U3RlcFRpbWUucHV0KGxhc3RTdGVw
Q3R4LCBub3cpOw0KKwkgICAgICAgICAgICB9DQorCSAgICAgICAgfQ0KKwkJfQ0KKwl9DQorDQor
CS8qKiANCisgICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN0ZXAgY29tbWFuZHMgdGhhdCBh
cmUgcXVldWVkIGZvciBnaXZlbiBleGVjdXRpb24NCisgICAgICogY29udGV4dC4NCisgICAgICov
DQorICAgIHB1YmxpYyBpbnQgZ2V0UGVuZGluZ1N0ZXBDb3VudChJRXhlY3V0aW9uRE1Db250ZXh0
IGV4ZWNDdHgpIHsNCisgICAgICAgIExpc3Q8U3RlcFJlcXVlc3Q+IHN0ZXBRdWV1ZSA9IGZTdGVw
UXVldWVzLmdldChleGVjQ3R4KTsNCisgICAgICAgIGlmIChzdGVwUXVldWUgPT0gbnVsbCkgcmV0
dXJuIDA7DQorICAgICAgICByZXR1cm4gc3RlcFF1ZXVlLnNpemUoKTsNCisgICAgfQ0KKw0KKyAg
ICAvKioNCisgICAgICogQWRkcyBhIHN0ZXAgY29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVl
IGZvciBnaXZlbiBjb250ZXh0Lg0KKyAgICAgKiBAcGFyYW0gZXhlY0N0eCBFeGVjdXRpb24gY29u
dGV4dCB0aGF0IHNob3VsZCBwZXJmb3JtIHRoZSBzdGVwLiANCisgICAgICogQHBhcmFtIHN0ZXBU
eXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0KKyAgICAgKi8NCisgICAgcHVibGljIHZvaWQg
ZW5xdWV1ZVN0ZXAoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVw
VHlwZSBzdGVwVHlwZSkgew0KKyAgICAJaWYgKHNob3VsZERlbGF5U3RlcChleGVjQ3R4KSkgew0K
KyAgICAJCWlmIChkb0NhbkVucXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKSkgew0KKwkgICAg
ICAgICAgICBkb0VucXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKTsNCisJICAgICAgICAgICAg
aWYgKCFnZXRSdW5Db250cm9sKCkuaXNTdGVwcGluZyhleGVjQ3R4KSkgew0KKwkgICAgICAgICAg
ICAJcHJvY2Vzc1N0ZXBRdWV1ZShleGVjQ3R4KTsNCisJICAgICAgICAgICAgfQ0KKyAgICAJCX0N
CisgICAgCX0gZWxzZSB7DQorCSAgICAgICAgZ2V0UnVuQ29udHJvbCgpLmNhblN0ZXAoDQorCSAg
ICAgICAgICAgIGV4ZWNDdHgsIHN0ZXBUeXBlLCBuZXcgRGF0YVJlcXVlc3RNb25pdG9yPEJvb2xl
YW4+KGdldEV4ZWN1dG9yKCksIG51bGwpIHsNCisJICAgICAgICAgICAgICAgIEBPdmVycmlkZQ0K
KwkgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxldGVkKCkgew0KKwkg
ICAgICAgICAgICAgICAgICAgIGlmIChpc1N1Y2Nlc3MoKSAmJiBnZXREYXRhKCkpIHsNCisJICAg
ICAgICAgICAgICAgICAgICAJaWYgKGlzU3RlcHBpbmdEaXNhYmxlZChleGVjQ3R4KSkgew0KKwkJ
ICAgICAgICAgICAgICAgICAgICAgICAgZG9FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSk7
DQorCSAgICAgICAgICAgICAgICAgICAgCX0gZWxzZSB7DQorCSAgICAgICAgICAgICAgICAgICAg
CQlkb1N0ZXAoZXhlY0N0eCwgc3RlcFR5cGUpOw0KKwkgICAgICAgICAgICAgICAgICAgIAl9DQor
CSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb0NhbkVucXVldWVTdGVwKGV4ZWNDdHgs
IHN0ZXBUeXBlKSkgew0KKwkgICAgICAgICAgICAgICAgICAgICAgICBkb0VucXVldWVTdGVwKGV4
ZWNDdHgsIHN0ZXBUeXBlKTsNCisJICAgICAgICAgICAgICAgICAgICB9DQorCSAgICAgICAgICAg
ICAgICB9DQorCSAgICAgICAgICAgIH0pOw0KKyAgICAJfQ0KKyAgICB9DQorDQorCXByaXZhdGUg
dm9pZCBkb1N0ZXAoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVw
VHlwZSBzdGVwVHlwZSkgew0KKwkJaWYgKGZTeW5jaHJvbml6ZWRTdGVwcGluZykgew0KKwkJCWRp
c2FibGVTdGVwcGluZyhleGVjQ3R4KTsNCisJCX0NCisgICAgICAgIHVwZGF0ZUxhc3RTdGVwVGlt
ZShleGVjQ3R4KTsNCisJCWdldFJ1bkNvbnRyb2woKS5zdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlLCBu
ZXcgUmVxdWVzdE1vbml0b3IoZ2V0RXhlY3V0b3IoKSwgbnVsbCkpOw0KKwl9DQorDQorCS8qKg0K
KwkgKiBFbnF1ZXVlIHRoZSBnaXZlbiBzdGVwIGZvciBsYXRlciBleGVjdXRpb24uDQorCSAqIA0K
KwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkgKiBAcGFyYW0gc3RlcFR5cGUNCisJICovDQorCXByaXZh
dGUgdm9pZCBkb0VucXVldWVTdGVwKGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwg
ZmluYWwgU3RlcFR5cGUgc3RlcFR5cGUpIHsNCisJCUxpc3Q8U3RlcFJlcXVlc3Q+IHN0ZXBRdWV1
ZSA9IGZTdGVwUXVldWVzLmdldChleGVjQ3R4KTsNCisJCWlmIChzdGVwUXVldWUgPT0gbnVsbCkg
ew0KKwkJICAgIHN0ZXBRdWV1ZSA9IG5ldyBMaW5rZWRMaXN0PFN0ZXBSZXF1ZXN0PigpOw0KKwkJ
ICAgIGZTdGVwUXVldWVzLnB1dChleGVjQ3R4LCBzdGVwUXVldWUpOw0KKwkJfQ0KKwkJaWYgKHN0
ZXBRdWV1ZS5zaXplKCkgPCBmUXVldWVEZXB0aCkgew0KKwkJICAgIHN0ZXBRdWV1ZS5hZGQobmV3
IFN0ZXBSZXF1ZXN0KHN0ZXBUeXBlKSk7DQorCQl9DQorCX0NCisNCisgICAgLyoqDQorICAgICAq
IFJldHVybnMgd2hldGhlciB0aGUgc3RlcCBpbnN0cnVjdGlvbiBmb3IgdGhlIGdpdmVuIGNvbnRl
eHQgaGFzIHRpbWVkIG91dC4NCisgICAgICovDQorICAgIHB1YmxpYyBib29sZWFuIGlzU3RlcHBp
bmdUaW1lZE91dChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisgICAgICAgIGZvciAo
SUV4ZWN1dGlvbkRNQ29udGV4dCB0aW1lZE91dEN0eCA6IGZUaW1lZE91dEZsYWdzLmtleVNldCgp
KSB7DQorICAgICAgICAgICAgaWYgKGV4ZWNDdHguZXF1YWxzKHRpbWVkT3V0Q3R4KSB8fCBETUNv
bnRleHRzLmlzQW5jZXN0b3JPZihleGVjQ3R4LCB0aW1lZE91dEN0eCkpIHsNCisgICAgICAgICAg
ICAgICAgcmV0dXJuIGZUaW1lZE91dEZsYWdzLmdldCh0aW1lZE91dEN0eCk7DQorICAgICAgICAg
ICAgfQ0KKyAgICAgICAgfQ0KKyAgICAgICAgcmV0dXJuIGZhbHNlOw0KKyAgICB9DQorICAgIA0K
Kw0KKyAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCisNCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRs
ZXIgDQorICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChmaW5hbCBJU3VzcGVuZGVkRE1F
dmVudCBlKSB7DQorICAgICAgICAvLyBUYWtlIGNhcmUgb2YgdGhlIHN0ZXBwaW5nIHRpbWUgb3V0
DQorICAgICAgICBmVGltZWRPdXRGbGFncy5yZW1vdmUoZS5nZXRETUNvbnRleHQoKSk7DQorICAg
ICAgICBTY2hlZHVsZWRGdXR1cmU8Pz4gZnV0dXJlID0gZlRpbWVkT3V0RnV0dXJlcy5yZW1vdmUo
ZS5nZXRETUNvbnRleHQoKSk7IA0KKyAgICAgICAgaWYgKGZ1dHVyZSAhPSBudWxsKSBmdXR1cmUu
Y2FuY2VsKGZhbHNlKTsNCisgICAgICAgIA0KKyAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBh
IHN0ZXAgcGVuZGluZywgaWYgc28gZXhlY3V0ZSBpdA0KKyAgICAgICAgcHJvY2Vzc1N0ZXBRdWV1
ZShlLmdldERNQ29udGV4dCgpKTsNCisgICAgfQ0KKw0KKwkvKioNCisJICogUHJvY2VzcyBuZXh0
IHN0ZXAgb24gcXVldWUgaWYgYW55Lg0KKwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkgKi8NCisJcHJp
dmF0ZSB2b2lkIHByb2Nlc3NTdGVwUXVldWUoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVj
Q3R4KSB7DQorCQlpZiAoaXNTdGVwcGluZ0Rpc2FibGVkKGV4ZWNDdHgpKSB7DQorCQkJcmV0dXJu
Ow0KKwkJfQ0KKwkJaWYgKGZTdGVwUXVldWVzLmNvbnRhaW5zS2V5KGV4ZWNDdHgpKSB7DQorCQkJ
ZmluYWwgaW50IHN0ZXBEZWxheSA9IGdldFN0ZXBEZWxheShleGVjQ3R4KTsNCisJCQlpZiAoc3Rl
cERlbGF5ID4gMCkgew0KKwkJCQlnZXRFeGVjdXRvcigpLnNjaGVkdWxlKG5ldyBEc2ZSdW5uYWJs
ZSgpIHsNCisJCQkJCXB1YmxpYyB2b2lkIHJ1bigpIHsNCisJCQkJCQlwcm9jZXNzU3RlcFF1ZXVl
KGV4ZWNDdHgpOw0KKwkJCQkJfQ0KKwkJCQl9LCBzdGVwRGVsYXksIFRpbWVVbml0Lk1JTExJU0VD
T05EUyk7DQorCQkJCXJldHVybjsNCisJCQl9DQorICAgICAgICAgICAgTGlzdDxTdGVwUmVxdWVz
dD4gcXVldWUgPSBmU3RlcFF1ZXVlcy5nZXQoZXhlY0N0eCk7DQorICAgICAgICAgICAgZmluYWwg
U3RlcFJlcXVlc3QgcmVxdWVzdCA9IHF1ZXVlLnJlbW92ZShxdWV1ZS5zaXplKCkgLSAxKTsNCisg
ICAgICAgICAgICBpZiAocXVldWUuaXNFbXB0eSgpKSBmU3RlcFF1ZXVlcy5yZW1vdmUoZXhlY0N0
eCk7DQorICAgICAgICAgICAgZ2V0UnVuQ29udHJvbCgpLmNhblN0ZXAoDQorICAgICAgICAgICAg
ICAgIGV4ZWNDdHgsIHJlcXVlc3QuZlN0ZXBUeXBlLCANCisgICAgICAgICAgICAgICAgbmV3IERh
dGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihnZXRFeGVjdXRvcigpLCBudWxsKSB7DQorICAgICAg
ICAgICAgICAgICAgICBAT3ZlcnJpZGUNCisgICAgICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2
b2lkIGhhbmRsZUNvbXBsZXRlZCgpIHsNCisgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNT
dWNjZXNzKCkgJiYgZ2V0RGF0YSgpKSB7DQorICAgICAgICAgICAgICAgICAgICAJCWRvU3RlcChl
eGVjQ3R4LCByZXF1ZXN0LmZTdGVwVHlwZSk7DQorICAgICAgICAgICAgICAgICAgICAgICAgfSBl
bHNlIHsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHdoYXRldmVyIHJlYXNv
biB3ZSBjYW4ndCBzdGVwIGFueW1vcmUsIHNvIGNsZWFyIG91dA0KKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAvLyB0aGUgc3RlcCBxdWV1ZS4NCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZlN0ZXBRdWV1ZXMucmVtb3ZlKGV4ZWNDdHgpOw0KKyAgICAgICAgICAgICAgICAgICAgICAg
IH0NCisgICAgICAgICAgICAgICAgICAgIH0NCisgICAgICAgICAgICAgICAgfSk7DQorICAgICAg
ICB9DQorCX0NCisNCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIgDQorICAgIHB1YmxpYyB2
b2lkIGV2ZW50RGlzcGF0Y2hlZChmaW5hbCBJUmVzdW1lZERNRXZlbnQgZSkgew0KKyAgICAgICAg
aWYgKGUuZ2V0UmVhc29uKCkuZXF1YWxzKFN0YXRlQ2hhbmdlUmVhc29uLlNURVApKSB7DQorICAg
ICAgICAgICAgZlRpbWVkT3V0RmxhZ3MucHV0KGUuZ2V0RE1Db250ZXh0KCksIEJvb2xlYW4uRkFM
U0UpOw0KKyAgICAgICAgICAgIC8vIFdlIHNob3VsZG4ndCBoYXZlIGEgc3RlcHBpbmcgdGltZW91
dCBydW5uaW5nIHVubGVzcyB3ZSBnZXQgdHdvIA0KKyAgICAgICAgICAgIC8vIHN0ZXBwaW5nIGV2
ZW50cyBpbiBhIHJvdyB3aXRob3V0IGEgc3VzcGVuZGVkLCB3aGljaCB3b3VsZCBiZSBhIA0KKyAg
ICAgICAgICAgIC8vIHByb3RvY29sIGVycm9yLg0KKyAgICAgICAgICAgIGFzc2VydCAhZlRpbWVk
T3V0RnV0dXJlcy5jb250YWluc0tleShlLmdldERNQ29udGV4dCgpKTsNCisgICAgICAgICAgICBm
VGltZWRPdXRGdXR1cmVzLnB1dCgNCisgICAgICAgICAgICAgICAgZS5nZXRETUNvbnRleHQoKSwg
DQorICAgICAgICAgICAgICAgIGdldEV4ZWN1dG9yKCkuc2NoZWR1bGUoDQorICAgICAgICAgICAg
ICAgICAgICBuZXcgRHNmUnVubmFibGUoKSB7IHB1YmxpYyB2b2lkIHJ1bigpIHsNCisgICAgICAg
ICAgICAgICAgICAgICAgICBmVGltZWRPdXRGdXR1cmVzLnJlbW92ZShlLmdldERNQ29udGV4dCgp
KTsNCisNCisgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0U2Vzc2lvbigpLmlzQWN0aXZl
KCkpIHsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXNzdWUgdGhlIHN0ZXBwaW5n
IHRpbWUtb3V0IGV2ZW50Lg0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXNzaW9u
KCkuZGlzcGF0Y2hFdmVudCgNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBT
dGVwcGluZ1RpbWVkT3V0RXZlbnQoZS5nZXRETUNvbnRleHQoKSksIA0KKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbnVsbCk7DQorICAgICAgICAgICAgICAgICAgICAgICAgfQ0KKyAg
ICAgICAgICAgICAgICAgICAgfX0sDQorICAgICAgICAgICAgICAgICAgICBTVEVQUElOR19USU1F
T1VULCBUaW1lVW5pdC5NSUxMSVNFQ09ORFMpDQorICAgICAgICAgICAgICAgICk7DQorICAgICAg
ICAgICAgDQorICAgICAgICB9IA0KKyAgICB9ICAgIA0KKw0KKyAgICBARHNmU2VydmljZUV2ZW50
SGFuZGxlciANCisgICAgcHVibGljIHZvaWQgZXZlbnREaXNwYXRjaGVkKFN0ZXBwaW5nVGltZWRP
dXRFdmVudCBlKSB7DQorICAgICAgICBmVGltZWRPdXRGbGFncy5wdXQoZS5nZXRETUNvbnRleHQo
KSwgQm9vbGVhbi5UUlVFKTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisgICAgICogRW5hYmxlcyBv
ciBkaXNhYmxlcyBzeW5jaHJvbml6ZWQgc3RlcHBpbmcgbW9kZS4NCisgICAgICogSW4gc3luY2hy
b25pemVkIG1vZGUsIGFmdGVyIGEgc3RlcCBjb21tYW5kIGlzIGlzc3VlZCwNCisgICAgICogc3Vi
c2VxdWVudCBzdGVwcyBhcmUgYmxvY2tlZCBmb3IgdGhlIGV4ZWN1dGlvbiBjb250ZXh0DQorICAg
ICAqIHVudGlsIHtAbGluayBkb25lU3RlcHBpbmcoKX0gaXMgY2FsbGVkIHRvIGluZGljYXRlIGNv
bXBsZXRpb24NCisgICAgICogb2YgdGhlIHByb2Nlc3NpbmcgZm9yIHRoZSBsYXN0IHN0ZXAuDQor
ICAgICAqIA0KKyAgICAgKiBAcGFyYW0gZW5hYmxlDQorICAgICAqLw0KKyAgICBwdWJsaWMgdm9p
ZCBlbmFibGVTeW5jaHJvbml6ZWRTdGVwcGluZyhib29sZWFuIGVuYWJsZSkgew0KKyAgICAJZlN5
bmNocm9uaXplZFN0ZXBwaW5nID0gZW5hYmxlOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAg
KiBDb25maWd1cmUgdGhlIG1pbmltdW0gdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0byB3YWl0IGJl
dHdlZW4gc3RlcHMuDQorICAgICAqIA0KKyAgICAgKiBAcGFyYW0gaW50ZXJ2YWwNCisgICAgICov
DQorICAgIHB1YmxpYyB2b2lkIHNldE1pbmltdW1TdGVwSW50ZXJ2YWwoaW50IGludGVydmFsKSB7
DQorICAgIAlmTWluU3RlcEludGVydmFsID0gaW50ZXJ2YWw7DQorICAgIH0NCisgICAgDQorICAg
IC8qKg0KKyAgICAgKiBJbmRpY2F0ZSB0aGF0IHByb2Nlc3Npbmcgb2YgdGhlIGxhc3Qgc3RlcCBo
YXMgY29tcGxldGVkIGFuZA0KKyAgICAgKiB0aGUgbmV4dCBzdGVwIGNhbiBiZSBpc3N1ZWQuDQor
ICAgICAqIA0KKyAgICAgKiBAcGFyYW0gZXhlY0N0eA0KKyAgICAgKi8NCisgICAgcHVibGljIHZv
aWQgZG9uZVN0ZXBwaW5nKGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKyAg
ICAJZW5hYmxlU3RlcHBpbmcoZXhlY0N0eCk7DQorCQlnZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3
IERzZlJ1bm5hYmxlKCkgew0KKwkJCXB1YmxpYyB2b2lkIHJ1bigpIHsNCisJCQkJcHJvY2Vzc1N0
ZXBRdWV1ZShleGVjQ3R4KTsNCisJCQl9DQorCQl9KTsNCisgICAgfQ0KKw0KKwkvKioNCisJICog
RGlzYWJsZSBzdGVwcGluZyBmb3IgdGhlIGdpdmVuIGV4ZWN1dGlvbiBjb250ZXh0Lg0KKwkgKiAN
CisJICogQHBhcmFtIGV4ZWNDdHgNCisJICovDQorCXByaXZhdGUgdm9pZCBkaXNhYmxlU3RlcHBp
bmcoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorICAgICAgICBmRGlzYWJsZWRDb250
ZXh0cy5hZGQoZXhlY0N0eCk7DQorCX0NCisNCisJLyoqDQorCSAqIEVuYWJsZSBzdGVwcGluZyBm
b3IgdGhlIGdpdmVuIGV4ZWN1dGlvbiBjb250ZXh0Lg0KKwkgKiANCisJICogQHBhcmFtIGV4ZWND
dHgNCisJICovDQorCXByaXZhdGUgdm9pZCBlbmFibGVTdGVwcGluZyhmaW5hbCBJRXhlY3V0aW9u
RE1Db250ZXh0IGV4ZWNDdHgpIHsNCisgICAgICAgIGZEaXNhYmxlZENvbnRleHRzLnJlbW92ZShl
eGVjQ3R4KTsNCisJCWZvciAoSUV4ZWN1dGlvbkRNQ29udGV4dCBkaXNhYmxlZEN0eCA6IGZEaXNh
YmxlZENvbnRleHRzKSB7DQorCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGRpc2FibGVk
Q3R4LCBleGVjQ3R4KSkgew0KKwkJCQlmRGlzYWJsZWRDb250ZXh0cy5yZW1vdmUoZGlzYWJsZWRD
dHgpOw0KKwkJCX0NCisJCX0NCisJfQ0KKw0KKwlwcml2YXRlIGJvb2xlYW4gaXNTdGVwcGluZ0Rp
c2FibGVkKElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKyAgICAgICAgYm9vbGVhbiBk
aXNhYmxlZD0gZkRpc2FibGVkQ29udGV4dHMuY29udGFpbnMoZXhlY0N0eCk7DQorICAgICAgICBp
ZiAoZGlzYWJsZWQpIHsNCisgICAgICAgIAlyZXR1cm4gdHJ1ZTsNCisgICAgICAgIH0NCisgICAg
ICAgIGZvciAoSUV4ZWN1dGlvbkRNQ29udGV4dCBkaXNhYmxlZEN0eCA6IGZEaXNhYmxlZENvbnRl
eHRzKSB7DQorCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4ZWNDdHgsIGRpc2FibGVk
Q3R4KSkgew0KKwkJCQlyZXR1cm4gdHJ1ZTsNCisJCQl9DQorCQl9DQorICAgICAgICByZXR1cm4g
ZmFsc2U7DQorCX0NCisNCit9DQo=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>106808</attachid>
            <date>2008-07-08 07:33:00 -0400</date>
            <delta_ts>2008-07-09 07:56:36 -0400</delta_ts>
            <desc>Wait also for viewer updates</desc>
            <filename>patch_214386_3.txt</filename>
            <type>text/plain</type>
            <size>102983</size>
            <attacher name="Anton Leherbauer">anton.leherbauer</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZGQuZ2RiLnVp
DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC91aS9HZGJBZGFwdGVyRmFj
dG9yeS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBz
ZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5nZGIudWkvc3JjL29yZy9lY2xpcHNlL2Rk
L2dkYi9pbnRlcm5hbC91aS9HZGJBZGFwdGVyRmFjdG9yeS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS4xMA0KZGlmZiAtdSAtcjEuMTAgR2RiQWRhcHRlckZhY3RvcnkuamF2YQ0KLS0tIHNy
Yy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvdWkvR2RiQWRhcHRlckZhY3RvcnkuamF2YQky
OCBNYXkgMjAwOCAxODoyNToxMiAtMDAwMAkxLjEwDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2dk
Yi9pbnRlcm5hbC91aS9HZGJBZGFwdGVyRmFjdG9yeS5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDEg
LTAwMDANCkBAIC0xOSw2ICsxOSw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGlt
ZS5JQWRhcHRlckZhY3Rvcnk7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50
LkltbXV0YWJsZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuVGhyZWFk
U2FmZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lv
bmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkRl
ZmF1bHREc2ZNb2RlbFNlbGVjdGlvblBvbGljeUZhY3Rvcnk7DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy51aS5hY3Rpb25zLkRzZlJlc3VtZUNvbW1hbmQ7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS5hY3Rpb25zLkRzZlN0ZXBJbnRvQ29tbWFuZDsNCkBAIC03
OSw2ICs4MCw3IEBADQogICAgICAgICBmaW5hbCBEc2ZTdXNwZW5kVHJpZ2dlciBmU3VzcGVuZFRy
aWdnZXI7DQogCQlmaW5hbCBEc2ZTdGVwcGluZ01vZGVUYXJnZXQgZlN0ZXBwaW5nTW9kZVRhcmdl
dDsNCiAJCWZpbmFsIElNb2RlbFNlbGVjdGlvblBvbGljeUZhY3RvcnkgZk1vZGVsU2VsZWN0aW9u
UG9saWN5RmFjdG9yeTsNCisJCWZpbmFsIFN0ZXBwaW5nQ29udHJvbGxlciBmU3RlcHBpbmdDb250
cm9sbGVyOw0KIA0KICAgICAgICAgU2Vzc2lvbkFkYXB0ZXJTZXQoR2RiTGF1bmNoIGxhdW5jaCkg
ew0KICAgICAgICAgICAgIGZMYXVuY2ggPSBsYXVuY2g7DQpAQCAtMTI4LDYgKzEzMCwxMSBAQA0K
ICAgICAgICAgICAgICAqIHNlc3Npb24uDQogICAgICAgICAgICAgICovDQogICAgICAgICAgICAg
c2Vzc2lvbi5yZWdpc3Rlck1vZGVsQWRhcHRlcihJTGF1bmNoLmNsYXNzLCBmTGF1bmNoKTsNCisN
CisgICAgICAgICAgICAvLyByZWdpc3RlciBzdGVwcGluZyBjb250cm9sbGVyDQorICAgICAgICAg
ICAgZlN0ZXBwaW5nQ29udHJvbGxlciA9IG5ldyBTdGVwcGluZ0NvbnRyb2xsZXIoc2Vzc2lvbik7
DQorICAgICAgICAgICAgc2Vzc2lvbi5yZWdpc3Rlck1vZGVsQWRhcHRlcihTdGVwcGluZ0NvbnRy
b2xsZXIuY2xhc3MsIGZTdGVwcGluZ0NvbnRyb2xsZXIpOw0KKw0KICAgICAgICAgfQ0KICAgICAg
ICAgDQogICAgICAgICB2b2lkIGRpc3Bvc2UoKSB7DQpAQCAtMTQ3LDcgKzE1NCw3IEBADQogICAg
ICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElSZXN0YXJ0LmNsYXNzKTsN
CiAgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSVRlcm1pbmF0ZUhh
bmRsZXIuY2xhc3MpOw0KICAgICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRl
cihJTW9kZWxTZWxlY3Rpb25Qb2xpY3lGYWN0b3J5LmNsYXNzKTsNCi0NCisgICAgICAgICAgICAN
CiAgICAgICAgICAgICBmU3RlcEludG9Db21tYW5kLmRpc3Bvc2UoKTsNCiAgICAgICAgICAgICBm
U3RlcE92ZXJDb21tYW5kLmRpc3Bvc2UoKTsNCiAgICAgICAgICAgICBmU3RlcFJldHVybkNvbW1h
bmQuZGlzcG9zZSgpOw0KQEAgLTE1Niw2ICsxNjMsOSBAQA0KICAgICAgICAgICAgIGZSZXN0YXJ0
Q29tbWFuZC5kaXNwb3NlKCk7DQogICAgICAgICAgICAgZlRlcm1pbmF0ZUNvbW1hbmQuZGlzcG9z
ZSgpOw0KICAgICAgICAgICAgIGZTdXNwZW5kVHJpZ2dlci5kaXNwb3NlKCk7DQorICAgICAgICAg
ICAgDQorICAgICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKFN0ZXBwaW5n
Q29udHJvbGxlci5jbGFzcyk7DQorICAgICAgICAgICAgZlN0ZXBwaW5nQ29udHJvbGxlci5kaXNw
b3NlKCk7DQogICAgICAgICB9DQogICAgICAgICANCiAgICAgICAgIA0KI1Agb3JnLmVjbGlwc2Uu
ZGQuZXhhbXBsZXMucGRhDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9s
YXVuY2gvUERBU2VydmljZXNTaHV0ZG93blNlcXVlbmNlLmphdmENCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBm
aWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNl
LmRkLmV4YW1wbGVzLnBkYS9zcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5jaC9Q
REFTZXJ2aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEu
OA0KZGlmZiAtdSAtcjEuOCBQREFTZXJ2aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YQ0KLS0tIHNy
Yy9vcmcvZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzU2h1dGRvd25T
ZXF1ZW5jZS5qYXZhCTI1IEFwciAyMDA4IDE4OjAxOjE3IC0wMDAwCTEuOA0KKysrIHNyYy9vcmcv
ZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzU2h1dGRvd25TZXF1ZW5j
ZS5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDIgLTAwMDANCkBAIC0xNyw3ICsxNyw2IEBADQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5TZXF1ZW5jZTsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuQnJlYWtwb2ludHNNZWRpYXRvcjsNCi1pbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuU3RlcFF1ZXVlTWFuYWdlcjsNCiBpbXBv
cnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZXNUcmFja2VyOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5JRHNmU2VydmljZTsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZXhhbXBsZXMucGRhLlBEQVBsdWdpbjsNCkBAIC04OSwxMiArODgsNiBAQA0KICAg
ICAgICAgbmV3IFN0ZXAoKSB7DQogICAgICAgICAgICAgQE92ZXJyaWRlDQogICAgICAgICAgICAg
cHVibGljIHZvaWQgZXhlY3V0ZShSZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgew0KLSAg
ICAgICAgICAgICAgICBzaHV0ZG93blNlcnZpY2UoU3RlcFF1ZXVlTWFuYWdlci5jbGFzcywgcmVx
dWVzdE1vbml0b3IpOw0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0sDQotICAgICAgICBuZXcg
U3RlcCgpIHsNCi0gICAgICAgICAgICBAT3ZlcnJpZGUNCi0gICAgICAgICAgICBwdWJsaWMgdm9p
ZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7DQogICAgICAgICAgICAg
ICAgIHNodXRkb3duU2VydmljZShQREFSdW5Db250cm9sLmNsYXNzLCByZXF1ZXN0TW9uaXRvcik7
DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfSwNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQv
ZXhhbXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9v
cmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEvc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3Bk
YS9sYXVuY2gvUERBU2VydmljZXNJbml0U2VxdWVuY2UuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlz
aW9uIDEuOA0KZGlmZiAtdSAtcjEuOCBQREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZhDQotLS0g
c3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9sYXVuY2gvUERBU2VydmljZXNJbml0U2Vx
dWVuY2UuamF2YQkxNiBKdW4gMjAwOCAxODozMDo1MiAtMDAwMAkxLjgNCisrKyBzcmMvb3JnL2Vj
bGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZh
CTggSnVsIDIwMDggMTE6MTE6MDIgLTAwMDANCkBAIC0xMyw3ICsxMyw2IEBADQogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5TZXF1ZW5jZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnNlcnZpY2UuQnJlYWtwb2ludHNNZWRpYXRvcjsNCi1pbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuU3RlcFF1ZXVlTWFuYWdlcjsNCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vzc2lvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZXhhbXBsZXMucGRhLnNlcnZpY2UuUERBQnJlYWtwb2ludEF0dHJpYnV0ZVRyYW5zbGF0b3I7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmV4YW1wbGVzLnBkYS5zZXJ2aWNlLlBEQUJyZWFrcG9p
bnRzOw0KQEAgLTU2LDEzICs1NSw2IEBADQogICAgICAgICB9LA0KICAgICAgICAgbmV3IFN0ZXAo
KSB7IA0KICAgICAgICAgICAgIEBPdmVycmlkZQ0KLSAgICAgICAgICAgIHB1YmxpYyB2b2lkIGV4
ZWN1dGUoUmVxdWVzdE1vbml0b3IgcmVxdWVzdE1vbml0b3IpIHsNCi0gICAgICAgICAgICAgICAg
Ly8gU3RhcnQgdGhlIHNlcnZpY2UgdG8gbWFuYWdlIHN0ZXAgYWN0aW9ucy4NCi0gICAgICAgICAg
ICAgICAgbmV3IFN0ZXBRdWV1ZU1hbmFnZXIoZlNlc3Npb24pLmluaXRpYWxpemUocmVxdWVzdE1v
bml0b3IpOw0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0sDQotICAgICAgICBuZXcgU3RlcCgp
IHsgDQotICAgICAgICAgICAgQE92ZXJyaWRlDQogICAgICAgICAgICAgcHVibGljIHZvaWQgZXhl
Y3V0ZShmaW5hbCBSZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgew0KICAgICAgICAgICAg
ICAgICAvLyBTdGFydCB0aGUgbG93LWxldmVsIGJyZWFrcG9pbnQgc2VydmljZSANCiAgICAgICAg
ICAgICAgICAgbmV3IFBEQUJyZWFrcG9pbnRzKGZTZXNzaW9uKS5pbml0aWFsaXplKG5ldyBSZXF1
ZXN0TW9uaXRvcihnZXRFeGVjdXRvcigpLCByZXF1ZXN0TW9uaXRvcikpOw0KI1Agb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLnVpDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9p
bnRlcm5hbC91aS9wcmVmZXJlbmNlcy9Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlLmphdmENCj09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5z
L29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YSx2DQpy
ZXRyaWV2aW5nIHJldmlzaW9uIDEuMQ0KZGlmZiAtdSAtcjEuMSBEc2ZEZWJ1Z1ByZWZlcmVuY2VQ
YWdlLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3By
ZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YQkyNCBKdW4gMjAwOCAxNzozNDo0
MCAtMDAwMAkxLjENCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Vp
L3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YQk4IEp1bCAyMDA4IDExOjEx
OjA0IC0wMDAwDQpAQCAtMTIsNiArMTIsNyBAQA0KIA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLnVpLklEc2ZEZWJ1Z1VJQ29uc3RhbnRzOw0KK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZmFjZS5wcmVmZXJlbmNlLkJvb2xlYW5GaWVsZEVkaXRvcjsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuamZhY2UucHJlZmVyZW5jZS5GaWVsZEVkaXRvclByZWZlcmVuY2VQYWdlOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5qZmFjZS5wcmVmZXJlbmNlLklQcmVmZXJlbmNlU3RvcmU7DQogaW1wb3J0
IG9yZy5lY2xpcHNlLmpmYWNlLnByZWZlcmVuY2UuSW50ZWdlckZpZWxkRWRpdG9yOw0KQEAgLTMz
LDcgKzM0LDcgQEANCiAJICogTWFuZGF0b3J5IGRlZmF1bHQgY29uc3RydWN0b3IgKGV4ZWN1dGFi
bGUgZXh0ZW5zaW9uKS4NCiAJICovDQogCXB1YmxpYyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlKCkg
ew0KLQkJc3VwZXIoR1JJRCk7DQorCQlzdXBlcihGTEFUKTsNCiAJCUlQcmVmZXJlbmNlU3RvcmUg
c3RvcmU9IERzZkRlYnVnVUlQbHVnaW4uZ2V0RGVmYXVsdCgpLmdldFByZWZlcmVuY2VTdG9yZSgp
Ow0KIAkJc2V0UHJlZmVyZW5jZVN0b3JlKHN0b3JlKTsNCiAJCXNldERlc2NyaXB0aW9uKE1lc3Nh
Z2VzRm9yUHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9kZXNjcmlwdGlvbik7IA0K
QEAgLTUzLDE3ICs1NCwyMCBAQA0KIA0KIAlAT3ZlcnJpZGUNCiAJcHJvdGVjdGVkIHZvaWQgY3Jl
YXRlRmllbGRFZGl0b3JzKCkgew0KLQkJR3JvdXAgcGVyZm9ybWFuY2VHcm91cD0gbmV3IEdyb3Vw
KGdldEZpZWxkRWRpdG9yUGFyZW50KCksIFNXVC5OT05FKTsNCisJCWZpbmFsIENvbXBvc2l0ZSBw
YXJlbnQ9IGdldEZpZWxkRWRpdG9yUGFyZW50KCk7DQorCQlwYXJlbnQuc2V0TGF5b3V0KG5ldyBH
cmlkTGF5b3V0KCkpOw0KKwkJDQorCQlHcm91cCBwZXJmb3JtYW5jZUdyb3VwPSBuZXcgR3JvdXAo
cGFyZW50LCBTV1QuTk9ORSk7DQogCQlwZXJmb3JtYW5jZUdyb3VwLnNldFRleHQoTWVzc2FnZXNG
b3JQcmVmZXJlbmNlcy5Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFi
ZWwpOw0KIAkJcGVyZm9ybWFuY2VHcm91cC5zZXRMYXlvdXQobmV3IEdyaWRMYXlvdXQoKSk7DQog
CQlHcmlkRGF0YSBnZD0gbmV3IEdyaWREYXRhKEdyaWREYXRhLkZJTExfSE9SSVpPTlRBTCk7DQog
CQlnZC52ZXJ0aWNhbEluZGVudD0gNTsNCiAJCXBlcmZvcm1hbmNlR3JvdXAuc2V0TGF5b3V0RGF0
YShnZCk7DQotCQkNCisNCiAJCUNvbXBvc2l0ZSBpbm5lclBhcmVudD0gbmV3IENvbXBvc2l0ZShw
ZXJmb3JtYW5jZUdyb3VwLCBTV1QuTk9ORSk7DQotCQlpbm5lclBhcmVudC5zZXRMYXlvdXQobmV3
IEdyaWRMYXlvdXQoKSk7DQotCQlpbm5lclBhcmVudC5zZXRMYXlvdXREYXRhKGdkKTsNCi0JCQ0K
KwkJaW5uZXJQYXJlbnQuc2V0TGF5b3V0RGF0YShuZXcgR3JpZERhdGEoR3JpZERhdGEuRklMTF9I
T1JJWk9OVEFMKSk7DQorDQorCQkvLyBzdGFjayBmcmFtZSBsaW1pdA0KIAkJSW50ZWdlckZpZWxk
RWRpdG9yIGxpbWl0RWRpdG9yPSBuZXcgSW50ZWdlcldpdGhCb29sZWFuRmllbGRFZGl0b3IoDQog
CQkJCUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVRfRU5BQkxFLCAN
CiAJCQkJSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVCwgDQpAQCAt
NzMsNiArNzcsMzIgQEANCiAJCWxpbWl0RWRpdG9yLnNldFZhbGlkUmFuZ2UoMSwgSW50ZWdlci5N
QVhfVkFMVUUpOw0KIAkJbGltaXRFZGl0b3IuZmlsbEludG9HcmlkKGlubmVyUGFyZW50LCAzKTsN
CiAJCWFkZEZpZWxkKGxpbWl0RWRpdG9yKTsNCisNCisJCS8vIHN5bmMgc3RlcHBpbmcgc3BlZWQN
CisJCUJvb2xlYW5GaWVsZEVkaXRvciBzeW5jU3RlcHBpbmdFZGl0b3I9IG5ldyBCb29sZWFuRmll
bGRFZGl0b3IoDQorCQkJCUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1lOQ0hST05JWkVEX1NU
RVBQSU5HX0VOQUJMRSwNCisJCQkJTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5Ec2ZEZWJ1Z1ByZWZl
cmVuY2VQYWdlX3N5bmNTdGVwcGluZ19sYWJlbCwNCisJCQkJaW5uZXJQYXJlbnQpOw0KKw0KKwkJ
c3luY1N0ZXBwaW5nRWRpdG9yLmZpbGxJbnRvR3JpZChpbm5lclBhcmVudCwgMyk7DQorCQlhZGRG
aWVsZChzeW5jU3RlcHBpbmdFZGl0b3IpOw0KKw0KKwkJLy8gbWluaW11bSBzdGVwIGludGVydmFs
DQorCQlJbnRlZ2VyRmllbGRFZGl0b3IgbWluSW50ZXJ2YWxFZGl0b3I9IG5ldyBJbnRlZ2VyRmll
bGRFZGl0b3IoDQorCQkJCUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfTUlOX1NURVBfSU5URVJW
QUwsDQorCQkJCU1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9t
aW5TdGVwSW50ZXJ2YWxfbGFiZWwsDQorCQkJCWlubmVyUGFyZW50KTsNCisNCisJCW1pbkludGVy
dmFsRWRpdG9yLnNldFZhbGlkUmFuZ2UoMCwgMTAwMDApOw0KKwkJbWluSW50ZXJ2YWxFZGl0b3Iu
ZmlsbEludG9HcmlkKGlubmVyUGFyZW50LCAzKTsNCisJCWFkZEZpZWxkKG1pbkludGVydmFsRWRp
dG9yKTsNCisNCisJCWlubmVyUGFyZW50LnNldExheW91dChuZXcgR3JpZExheW91dCgzLCBmYWxz
ZSkpOw0KK30NCisNCisJQE92ZXJyaWRlDQorCXByb3RlY3RlZCB2b2lkIGFkanVzdEdyaWRMYXlv
dXQoKSB7DQorCQkvLyBkbyBub3RoaW5nDQogCX0NCiANCiB9DQpJbmRleDogc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9tZXNzYWdlcy5wcm9wZXJ0
aWVzDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5k
c2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9tZXNzYWdlcy5wcm9wZXJ0aWVzLHYN
CnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIG1lc3NhZ2VzLnByb3BlcnRp
ZXMNCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVu
Y2VzL21lc3NhZ2VzLnByb3BlcnRpZXMJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xDQor
Kysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9t
ZXNzYWdlcy5wcm9wZXJ0aWVzCTggSnVsIDIwMDggMTE6MTE6MDQgLTAwMDANCkBAIC0xMSw0ICsx
MSw2IEBADQogDQogRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9kZXNjcmlwdGlvbj1HZW5lcmFsIHNl
dHRpbmdzIGZvciBkZWJ1Z2dpbmcgd2l0aCBEU0Y6DQogRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9s
aW1pdFN0YWNrRnJhbWVzX2xhYmVsPUxpbWl0IG51bWJlciBvZiBzdGFjayBmcmFtZXMgdG8NCitE
c2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX21pblN0ZXBJbnRlcnZhbF9sYWJlbD1NaW5pbXVtIGludGVy
dmFsIGJldHdlZW4gc3RlcHMgKGluIG1pbGxpc2Vjb25kcykNCiBEc2ZEZWJ1Z1ByZWZlcmVuY2VQ
YWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFiZWw9UGVyZm9ybWFuY2UNCitEc2ZEZWJ1Z1ByZWZlcmVu
Y2VQYWdlX3N5bmNTdGVwcGluZ19sYWJlbD1TeW5jaHJvbml6ZSBzdGVwcGluZyBzcGVlZCB3aXRo
IFVJIHVwZGF0ZXMNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFs
L3VpL3ByZWZlcmVuY2VzL1N0cmluZ1dpdGhCb29sZWFuRmllbGRFZGl0b3IuamF2YQ0KPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMv
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
aW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZh
LHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIFN0cmluZ1dpdGhCb29s
ZWFuRmllbGRFZGl0b3IuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50
ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhCTI0
IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJvb2xlYW5GaWVsZEVkaXRv
ci5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQgLTAwMDANCkBAIC0xNCw4ICsxNCwxMCBAQA0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5zd3QuU1dUOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuZXZlbnRz
LlNlbGVjdGlvbkFkYXB0ZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ldmVudHMuU2VsZWN0
aW9uRXZlbnQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5sYXlvdXQuR3JpZExheW91dDsNCiBp
bXBvcnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQnV0dG9uOw0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5zd3Qud2lkZ2V0cy5Db21wb3NpdGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRz
LkxhYmVsOw0KIA0KIC8qKg0KICAqIEEgc3RyaW5nIGZpZWxkIGVkaXRvciB3aXRoIGFuIGVuYWJs
ZW1lbnQgY2hlY2sgYm94Lg0KQEAgLTQ3LDIwICs0OSwxNCBAQA0KIAkJc3VwZXIuZG9GaWxsSW50
b0dyaWQocGFyZW50LCBudW1Db2x1bW5zKTsNCiAJfQ0KIA0KLQlAT3ZlcnJpZGUNCi0JcHVibGlj
IGludCBnZXROdW1iZXJPZkNvbnRyb2xzKCkgew0KLQkJcmV0dXJuIHN1cGVyLmdldE51bWJlck9m
Q29udHJvbHMoKSArIDE7DQotCX0NCi0NCi0gICAgQE92ZXJyaWRlDQotCXByb3RlY3RlZCB2b2lk
IGFkanVzdEZvck51bUNvbHVtbnMoaW50IG51bUNvbHVtbnMpIHsNCi0gICAgCS8vIHRoZSBjaGVj
a2JveCB1c2VzIG9uZSBjb2x1bW4NCi0gICAgCXN1cGVyLmFkanVzdEZvck51bUNvbHVtbnMobnVt
Q29sdW1ucyAtIDEpOw0KLSAgICB9DQotDQogCXByaXZhdGUgQnV0dG9uIGdldENoZWNrYm94Q29u
dHJvbChDb21wb3NpdGUgcGFyZW50KSB7DQogCQlpZiAoZkNoZWNrYm94ID09IG51bGwpIHsNCi0J
CQlmQ2hlY2tib3g9IG5ldyBCdXR0b24ocGFyZW50LCBTV1QuQ0hFQ0spOw0KKwkJCUNvbXBvc2l0
ZSBpbm5lcj0gbmV3IENvbXBvc2l0ZShwYXJlbnQsIFNXVC5OVUxMKTsNCisJCQlmaW5hbCBHcmlk
TGF5b3V0IGxheW91dD0gbmV3IEdyaWRMYXlvdXQoMiwgZmFsc2UpOw0KKwkJCWxheW91dC5tYXJn
aW5XaWR0aCA9IDA7DQorCQkJaW5uZXIuc2V0TGF5b3V0KGxheW91dCk7DQorCQkJZkNoZWNrYm94
PSBuZXcgQnV0dG9uKGlubmVyLCBTV1QuQ0hFQ0spOw0KKwkJCWdldExhYmVsQ29udHJvbChpbm5l
cik7DQogCQkJZkNoZWNrYm94LmFkZFNlbGVjdGlvbkxpc3RlbmVyKG5ldyBTZWxlY3Rpb25BZGFw
dGVyKCkgew0KIAkJCQlAT3ZlcnJpZGUNCiAJCQkJcHVibGljIHZvaWQgd2lkZ2V0U2VsZWN0ZWQo
U2VsZWN0aW9uRXZlbnQgZSkgew0KQEAgLTcwLDExICs2NiwyMiBAQA0KIAkJCQl9DQogCQkJfSk7
DQogCQl9IGVsc2Ugew0KLQkJCWNoZWNrUGFyZW50KGZDaGVja2JveCwgcGFyZW50KTsNCisJCQlj
aGVja1BhcmVudChmQ2hlY2tib3guZ2V0UGFyZW50KCksIHBhcmVudCk7DQogCQl9DQogCQlyZXR1
cm4gZkNoZWNrYm94Ow0KIAl9DQogDQorCUBPdmVycmlkZQ0KKwlwdWJsaWMgTGFiZWwgZ2V0TGFi
ZWxDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsNCisJCWZpbmFsIExhYmVsIGxhYmVsPSBnZXRM
YWJlbENvbnRyb2woKTsNCisJCWlmIChsYWJlbCA9PSBudWxsKSB7DQorCQkJcmV0dXJuIHN1cGVy
LmdldExhYmVsQ29udHJvbChwYXJlbnQpOw0KKwkJfSBlbHNlIHsNCisJCQljaGVja1BhcmVudChs
YWJlbC5nZXRQYXJlbnQoKSwgcGFyZW50KTsNCisJCX0NCisJCXJldHVybiBsYWJlbDsNCisJfQ0K
Kw0KIAlwcm90ZWN0ZWQgdm9pZCB2YWx1ZUNoYW5nZWQoYm9vbGVhbiBvbGRWYWx1ZSwgYm9vbGVh
biBuZXdWYWx1ZSkgew0KICAgICAgICAgc2V0UHJlc2VudHNEZWZhdWx0VmFsdWUoZmFsc2UpOw0K
ICAgICAgICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVlKSB7DQpJbmRleDogc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9JbnRlZ2VyV2l0aEJvb2xl
YW5GaWVsZEVkaXRvci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9v
cmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9JbnRlZ2Vy
V2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpk
aWZmIC11IC1yMS4xIEludGVnZXJXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmENCi0tLSBzcmMv
b3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0ludGVnZXJX
aXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmEJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4x
DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNl
cy9JbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQg
LTAwMDANCkBAIC0xNCw4ICsxNCwxMCBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuU1dUOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuZXZlbnRzLlNlbGVjdGlvbkFkYXB0ZXI7DQogaW1wb3J0
IG9yZy5lY2xpcHNlLnN3dC5ldmVudHMuU2VsZWN0aW9uRXZlbnQ7DQoraW1wb3J0IG9yZy5lY2xp
cHNlLnN3dC5sYXlvdXQuR3JpZExheW91dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdl
dHMuQnV0dG9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5Db21wb3NpdGU7DQor
aW1wb3J0IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkxhYmVsOw0KIA0KIC8qKg0KICAqIEFuIGlu
dGVnZXIgZmllbGQgZWRpdG9yIHdpdGggYW4gZW5hYmxlbWVudCBjaGVjayBib3guDQpAQCAtNDIs
MjAgKzQ0LDE0IEBADQogCQlzdXBlci5kb0ZpbGxJbnRvR3JpZChwYXJlbnQsIG51bUNvbHVtbnMp
Ow0KIAl9DQogDQotCUBPdmVycmlkZQ0KLQlwdWJsaWMgaW50IGdldE51bWJlck9mQ29udHJvbHMo
KSB7DQotCQlyZXR1cm4gc3VwZXIuZ2V0TnVtYmVyT2ZDb250cm9scygpICsgMTsNCi0JfQ0KLQ0K
LSAgICBAT3ZlcnJpZGUNCi0JcHJvdGVjdGVkIHZvaWQgYWRqdXN0Rm9yTnVtQ29sdW1ucyhpbnQg
bnVtQ29sdW1ucykgew0KLSAgICAJLy8gdGhlIGNoZWNrYm94IHVzZXMgb25lIGNvbHVtbg0KLSAg
ICAJc3VwZXIuYWRqdXN0Rm9yTnVtQ29sdW1ucyhudW1Db2x1bW5zIC0gMSk7DQotICAgIH0NCi0N
CiAJcHJpdmF0ZSBCdXR0b24gZ2V0Q2hlY2tib3hDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsN
CiAJCWlmIChmQ2hlY2tib3ggPT0gbnVsbCkgew0KLQkJCWZDaGVja2JveD0gbmV3IEJ1dHRvbihw
YXJlbnQsIFNXVC5DSEVDSyk7DQorCQkJQ29tcG9zaXRlIGlubmVyPSBuZXcgQ29tcG9zaXRlKHBh
cmVudCwgU1dULk5VTEwpOw0KKwkJCWZpbmFsIEdyaWRMYXlvdXQgbGF5b3V0PSBuZXcgR3JpZExh
eW91dCgyLCBmYWxzZSk7DQorCQkJbGF5b3V0Lm1hcmdpbldpZHRoID0gMDsNCisJCQlpbm5lci5z
ZXRMYXlvdXQobGF5b3V0KTsNCisJCQlmQ2hlY2tib3g9IG5ldyBCdXR0b24oaW5uZXIsIFNXVC5D
SEVDSyk7DQorCQkJZ2V0TGFiZWxDb250cm9sKGlubmVyKTsNCiAJCQlmQ2hlY2tib3guYWRkU2Vs
ZWN0aW9uTGlzdGVuZXIobmV3IFNlbGVjdGlvbkFkYXB0ZXIoKSB7DQogCQkJCUBPdmVycmlkZQ0K
IAkJCQlwdWJsaWMgdm9pZCB3aWRnZXRTZWxlY3RlZChTZWxlY3Rpb25FdmVudCBlKSB7DQpAQCAt
NjUsMTEgKzYxLDIyIEBADQogCQkJCX0NCiAJCQl9KTsNCiAJCX0gZWxzZSB7DQotCQkJY2hlY2tQ
YXJlbnQoZkNoZWNrYm94LCBwYXJlbnQpOw0KKwkJCWNoZWNrUGFyZW50KGZDaGVja2JveC5nZXRQ
YXJlbnQoKSwgcGFyZW50KTsNCiAJCX0NCiAJCXJldHVybiBmQ2hlY2tib3g7DQogCX0NCiANCisJ
QE92ZXJyaWRlDQorCXB1YmxpYyBMYWJlbCBnZXRMYWJlbENvbnRyb2woQ29tcG9zaXRlIHBhcmVu
dCkgew0KKwkJZmluYWwgTGFiZWwgbGFiZWw9IGdldExhYmVsQ29udHJvbCgpOw0KKwkJaWYgKGxh
YmVsID09IG51bGwpIHsNCisJCQlyZXR1cm4gc3VwZXIuZ2V0TGFiZWxDb250cm9sKHBhcmVudCk7
DQorCQl9IGVsc2Ugew0KKwkJCWNoZWNrUGFyZW50KGxhYmVsLmdldFBhcmVudCgpLCBwYXJlbnQp
Ow0KKwkJfQ0KKwkJcmV0dXJuIGxhYmVsOw0KKwl9DQorDQogCXByb3RlY3RlZCB2b2lkIHZhbHVl
Q2hhbmdlZChib29sZWFuIG9sZFZhbHVlLCBib29sZWFuIG5ld1ZhbHVlKSB7DQogICAgICAgICBz
ZXRQcmVzZW50c0RlZmF1bHRWYWx1ZShmYWxzZSk7DQogICAgICAgICBpZiAob2xkVmFsdWUgIT0g
bmV3VmFsdWUpIHsNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFs
L3VpL3ByZWZlcmVuY2VzL01lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuamF2YQ0KPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0K
UkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJu
YWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhLHYNCnJldHJpZXZp
bmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIE1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuamF2
YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5j
ZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAw
CTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVy
ZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQgLTAw
MDANCkBAIC0yMCw4ICsyMCwxMiBAQA0KIA0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBEc2ZEZWJ1
Z1ByZWZlcmVuY2VQYWdlX2Rlc2NyaXB0aW9uOw0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBEc2ZE
ZWJ1Z1ByZWZlcmVuY2VQYWdlX2xpbWl0U3RhY2tGcmFtZXNfbGFiZWw7DQorDQorCXB1YmxpYyBz
dGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfbWluU3RlcEludGVydmFsX2xhYmVs
Ow0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3BlcmZvcm1h
bmNlR3JvdXBfbGFiZWw7DQogDQorCXB1YmxpYyBzdGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVy
ZW5jZVBhZ2Vfc3luY1N0ZXBwaW5nX2xhYmVsOw0KKw0KIAlzdGF0aWMgew0KIAkJLy8gaW5pdGlh
bGl6ZSByZXNvdXJjZSBidW5kbGUNCiAJCU5MUy5pbml0aWFsaXplTWVzc2FnZXMoQlVORExFX05B
TUUsIE1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuY2xhc3MpOw0KSW5kZXg6IHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0RzZlNvdXJjZURpc3BsYXlBZGFwdGVyLmph
dmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZhLHYN
CnJldHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11IC1yMS41IERzZlNvdXJjZURpc3BsYXlB
ZGFwdGVyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxv
b2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZhCTMgSnVuIDIwMDggMjA6MTc6MTMgLTAw
MDAJMS41DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAv
RHNmU291cmNlRGlzcGxheUFkYXB0ZXIuamF2YQk4IEp1bCAyMDA4IDExOjExOjA0IC0wMDAwDQpA
QCAtMzMsNiArMzMsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5U
aHJlYWRTYWZlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4
dHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuSURNQ29udGV4dDsNCitp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZp
ZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuU3RlcHBpbmdUaW1lZE91dEV2ZW50Ow0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2w7DQog
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklTdGFjazsNCkBAIC0xMTcs
OCArMTE4LDEwIEBADQogCQkJaWYgKG1vbml0b3IuaXNDYW5jZWxlZCgpKSB7DQogICAgICAgICAg
ICAgICAgIHJldHVybiBTdGF0dXMuQ0FOQ0VMX1NUQVRVUzsNCiAgICAgICAgICAgICB9DQotICAg
ICAgICAgICAgDQogCQkJZmluYWwgU291cmNlTG9va3VwUmVzdWx0IHJlc3VsdCA9IHBlcmZvcm1M
b29rdXAoKTsNCisJCQlzeW5jaHJvbml6ZWQgKHRoaXMpIHsNCisJCQkJbm90aWZ5QWxsKCk7DQor
CQkJfQ0KICAgICAgICAgICAgIGV4ZWN1dGVGcm9tSm9iKG5ldyBEc2ZSdW5uYWJsZSgpIHsgcHVi
bGljIHZvaWQgcnVuKCkgew0KICAgICAgICAgICAgICAgICBpZiAoIW1vbml0b3IuaXNDYW5jZWxl
ZCgpKSB7IA0KICAgICAgICAgICAgICAgICAgICAgZlByZXZSZXN1bHQgPSByZXN1bHQ7DQpAQCAt
NTU4LDE1ICs1NjEsMTcgQEANCiAgICAgfQ0KIA0KICAgICBARHNmU2VydmljZUV2ZW50SGFuZGxl
cg0KKyAgICBwdWJsaWMgdm9pZCBldmVudERpc3BhdGNoZWQoU3RlcHBpbmdUaW1lZE91dEV2ZW50
IGUpIHsNCisgICAgICAgIHN0YXJ0QW5ub3RhdGlvbkNsZWFyaW5nSm9iKGUuZ2V0RE1Db250ZXh0
KCkpOyAgICAgICAgDQorICAgIH0NCisgICAgDQorICAgIEBEc2ZTZXJ2aWNlRXZlbnRIYW5kbGVy
DQogICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChTdGVwUXVldWVNYW5hZ2VyLklTdGVw
cGluZ1RpbWVkT3V0RXZlbnQgZSkgew0KICAgICAgICAgc3RhcnRBbm5vdGF0aW9uQ2xlYXJpbmdK
b2IoZS5nZXRETUNvbnRleHQoKSk7ICAgICAgICANCi0gICAgfSAgICANCisgICAgfQ0KICAgICAN
CiAgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXINCiAgICAgcHVibGljIHZvaWQgZXZlbnREaXNw
YXRjaGVkKElSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50IGUpIHsNCi0gICAgICAgIGlmIChl
LmdldFJlYXNvbigpID09IFN0YXRlQ2hhbmdlUmVhc29uLlNURVApIHsNCi0gICAgICAgICAgICBz
dGFydEFubm90YXRpb25DbGVhcmluZ0pvYihlLmdldERNQ29udGV4dCgpKTsNCi0gICAgICAgIH0N
CiAgICAgICAgIGZQcmV2TW9kZWxDb250ZXh0ID0gbnVsbDsNCiAgICAgfQ0KIH0NCkluZGV4OiBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9JbnN0cnVjdGlvblBv
aW50ZXJNYW5hZ2VyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29y
Zy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMv
b3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9JbnN0cnVjdGlvblBvaW50
ZXJNYW5hZ2VyLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjINCmRpZmYgLXUgLXIxLjIg
SW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAvSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlci5qYXZhCTMw
IE1heSAyMDA4IDIyOjU3OjM5IC0wMDAwCTEuMg0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvdWkvc291cmNlbG9va3VwL0luc3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YQk4IEp1
bCAyMDA4IDExOjExOjA0IC0wMDAwDQpAQCAtMjEsNiArMjEsNyBAQA0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuc2VydmljZS5JU3RhY2s7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy5zZXJ2aWNlLklSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRlYnVnLnVpLkRlYnVnVUlUb29sczsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcu
dWkuSURlYnVnVUlDb25zdGFudHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLnRleHQuUG9z
aXRpb247DQpAQCAtMzcsNyArMzgsMTcgQEANCiBAVGhyZWFkU2FmZQ0KIGNsYXNzIEluc3RydWN0
aW9uUG9pbnRlck1hbmFnZXIgew0KIA0KKwkvKioNCisJICogQ3VycmVudCBpbnN0cnVjdGlvbiBw
b2ludGVyIGFubm90YXRpb24gdHlwZS4NCisJICovDQorCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0
cmluZyBJRF9DVVJSRU5UX0lQPSAib3JnLmVjbGlwc2UuZGQuZGVidWcuY3VycmVudElQIjsgLy8k
Tk9OLU5MUy0xJA0KKwkNCiAgICAgLyoqDQorCSAqIFNlY29uZGFyeSBpbnN0cnVjdGlvbiBwb2lu
dGVyIGFubm90YXRpb24gdHlwZS4NCisJICovDQorCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmlu
ZyBJRF9TRUNPTkRBUllfSVA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5zZWNvbmRhcnlJUCI7IC8v
JE5PTi1OTFMtMSQNCisNCisJLyoqDQogICAgICAqIEVkaXRvciBhbm5vdGF0aW9uIG9iamVjdCBm
b3IgaW5zdHJ1Y3Rpb24gcG9pbnRlcnMuDQogICAgICAqLw0KICAgICBzdGF0aWMgY2xhc3MgSVBB
bm5vdGF0aW9uIGV4dGVuZHMgQW5ub3RhdGlvbiB7DQpAQCAtNjEsNyArNzIsNyBAQA0KICAgICAg
ICAgICAgIGZGcmFtZSA9IGZyYW1lOw0KICAgICAgICAgICAgIGZJbWFnZSA9IGltYWdlOw0KICAg
ICAgICAgfQ0KLSAgICAgICAgICAgIA0KKyAgICAgICAgDQogICAgICAgICAvKioNCiAgICAgICAg
ICAqIFJldHVybnMgdGhpcyBhbm5vdGF0aW9uJ3MgaW1hZ2UuDQogICAgICAgICAgKiANCkBAIC0x
NzAsMTUgKzE4MSwxOSBAQA0KICAgICAgICAgU3RyaW5nIHRleHQ7DQogICAgICAgICBJbWFnZSBp
bWFnZTsNCiAgICAgICAgIGlmIChpc1RvcEZyYW1lKSB7DQotICAgICAgICAgICAgaWQgPSAib3Jn
LmVjbGlwc2UuZGQuZGVidWcuY3VycmVudElQIjsgLy8kTk9OLU5MUy0xJA0KKyAgICAgICAgICAg
IGlkID0gSURfQ1VSUkVOVF9JUDsNCiAgICAgICAgICAgICB0ZXh0ID0gIkRlYnVnIEN1cnJlbnQg
SW5zdHJ1Y3Rpb24gUG9pbnRlciI7IC8vJE5PTi1OTFMtMSQNCiAgICAgICAgICAgICBpbWFnZSA9
IERlYnVnVUlUb29scy5nZXRJbWFnZShJRGVidWdVSUNvbnN0YW50cy5JTUdfT0JKU19JTlNUUlVD
VElPTl9QT0lOVEVSX1RPUCk7DQogICAgICAgICB9IGVsc2Ugew0KLSAgICAgICAgICAgIGlkID0g
Im9yZy5lY2xpcHNlLmRkLmRlYnVnLnNlY29uZGFyeUlQIjsgLy8kTk9OLU5MUy0xJA0KKyAgICAg
ICAgICAgIGlkID0gSURfU0VDT05EQVJZX0lQOw0KICAgICAgICAgICAgIHRleHQgPSAiRGVidWcg
Q2FsbCBTdGFjayI7IC8vJE5PTi1OTFMtMSQNCiAgICAgICAgICAgICBpbWFnZSA9IERlYnVnVUlU
b29scy5nZXRJbWFnZShJRGVidWdVSUNvbnN0YW50cy5JTUdfT0JKU19JTlNUUlVDVElPTl9QT0lO
VEVSKTsNCiAgICAgICAgIH0NCiANCisgICAgICAgIGlmIChpc1RvcEZyYW1lKSB7DQorICAgICAg
ICAJLy8gcmVtb3ZlIG90aGVyIHRvcC1mcmFtZSBJUCBhbm5vdGF0aW9uKHMpIGZvciB0aGlzIGV4
ZWN1dGlvbi1jb250ZXh0DQorICAgICAgICAJcmVtb3ZlQW5ub3RhdGlvbnMoRE1Db250ZXh0cy5n
ZXRBbmNlc3Rvck9mVHlwZShmcmFtZS5nZXRQYXJlbnRzKClbMF0sIElFeGVjdXRpb25ETUNvbnRl
eHQuY2xhc3MpKTsNCisgICAgICAgIH0NCiAgICAgICAgIEFubm90YXRpb24gYW5ub3RhdGlvbiA9
IG5ldyBJUEFubm90YXRpb24oZnJhbWUsIGlkLCB0ZXh0LCBpbWFnZSk7IA0KICAgICAgICAgDQog
CQkvLyBBZGQgdGhlIGFubm90YXRpb24gYXQgdGhlIHBvc2l0aW9uIHRvIHRoZSBlZGl0b3IncyBh
bm5vdGF0aW9uIG1vZGVsLg0KQEAgLTIwMiwxMCArMjE3LDI4IEBADQogICAgICAgICAgICAgICAg
ICAgICByZW1vdmVBbm5vdGF0aW9uKHdyYXBwZXIuZ2V0VGV4dEVkaXRvcigpLCB3cmFwcGVyLmdl
dEFubm90YXRpb24oKSk7DQogICAgICAgICAgICAgICAgICAgICB3cmFwcGVySXRyLnJlbW92ZSgp
Ow0KICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgfSAgICAgICAgICAgIA0KKyAgICAg
ICAgICAgIH0NCiAgICAgICAgIH0NCiAJfQ0KLQkNCisNCisJLyoqDQorCSAqIFJlbW92ZSBhbGwg
dG9wLWZyYW1lIGFubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGRlYnVn
IHRhcmdldCB0aGF0IHRoaXMgY2xhc3MNCisJICogaXMgdHJhY2tpbmcuDQorCSAqLw0KKwlwdWJs
aWMgdm9pZCByZW1vdmVUb3BGcmFtZUFubm90YXRpb25zKElSdW5Db250cm9sLklFeGVjdXRpb25E
TUNvbnRleHQgZXhlY0RtYykgew0KKwkJLy8gUmV0cmlldmUgdGhlIG1hcHBpbmcgb2YgdGhyZWFk
cyB0byBjb250ZXh0IGxpc3RzDQorICAgICAgICBzeW5jaHJvbml6ZWQoZkFubm90YXRpb25XcmFw
cGVycykgew0KKyAgICAgICAgICAgIGZvciAoSXRlcmF0b3I8QW5ub3RhdGlvbldyYXBwZXI+IHdy
YXBwZXJJdHIgPSBmQW5ub3RhdGlvbldyYXBwZXJzLml0ZXJhdG9yKCk7IHdyYXBwZXJJdHIuaGFz
TmV4dCgpOykgew0KKyAgICAgICAgICAgICAgICBBbm5vdGF0aW9uV3JhcHBlciB3cmFwcGVyID0g
d3JhcHBlckl0ci5uZXh0KCk7DQorICAgICAgICAgICAgICAgIGlmIChETUNvbnRleHRzLmlzQW5j
ZXN0b3JPZih3cmFwcGVyLmdldEZyYW1lRE1DKCksIGV4ZWNEbWMpIA0KKyAgICAgICAgICAgICAg
ICAJCSYmIElEX0NVUlJFTlRfSVAuZXF1YWxzKHdyYXBwZXIuZ2V0QW5ub3RhdGlvbigpLmdldFR5
cGUoKSkpIHsNCisgICAgICAgICAgICAgICAgICAgIHJlbW92ZUFubm90YXRpb24od3JhcHBlci5n
ZXRUZXh0RWRpdG9yKCksIHdyYXBwZXIuZ2V0QW5ub3RhdGlvbigpKTsNCisgICAgICAgICAgICAg
ICAgICAgIHdyYXBwZXJJdHIucmVtb3ZlKCk7DQorICAgICAgICAgICAgICAgIH0NCisgICAgICAg
ICAgICB9DQorICAgICAgICB9DQorCX0NCisNCiAgICAgLyoqIFJlbW92ZXMgYWxsIGFubm90YXRp
b25zIHRyYWNrZWQgYnkgdGhpcyBtYW5hZ2VyICovDQogICAgIHB1YmxpYyB2b2lkIHJlbW92ZUFs
bEFubm90YXRpb25zKCkgew0KICAgICAgICAgc3luY2hyb25pemVkKGZBbm5vdGF0aW9uV3JhcHBl
cnMpIHsNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNm
U3RlcEludG9Db21tYW5kLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2Rw
L29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9z
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcEludG9Db21tYW5k
LmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgRHNmU3RlcElu
dG9Db21tYW5kLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlv
bnMvRHNmU3RlcEludG9Db21tYW5kLmphdmEJNyBNYXkgMjAwOCAxNzo0MDo0NyAtMDAwMAkxLjUN
CisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcEludG9D
b21tYW5kLmphdmEJOCBKdWwgMjAwOCAxMToxMTowNCAtMDAwMA0KQEAgLTQ5LDcgKzQ5LDcgQEAN
CiAgICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRTdGVwVHlwZSgpOw0KICAgICAg
ICAgZkV4ZWN1dG9yLnN1Ym1pdChuZXcgRHNmQ29tbWFuZFJ1bm5hYmxlKGZUcmFja2VyLCByZXF1
ZXN0LmdldEVsZW1lbnRzKClbMF0sIHJlcXVlc3QpIHsNCiAgICAgICAgICAgICBAT3ZlcnJpZGUg
cHVibGljIHZvaWQgZG9FeGVjdXRlKCkgew0KLSAgICAgICAgICAgICAgICBnZXRTdGVwUXVldWVN
Z3IoKS5jYW5FbnF1ZXVlU3RlcCgNCisgICAgICAgICAgICAgICAgZ2V0U3RlcFF1ZXVlTWFuYWdl
cigpLmNhbkVucXVldWVTdGVwKA0KICAgICAgICAgICAgICAgICAgICAgZ2V0Q29udGV4dCgpLCBz
dGVwVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9v
bGVhbj4oSW1tZWRpYXRlRXhlY3V0b3IuZ2V0SW5zdGFuY2UoKSwgbnVsbCkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgIEBPdmVycmlkZQ0KQEAgLTcxLDcgKzcxLDcgQEANCiAgICAgICAgIGZp
bmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRTdGVwVHlwZSgpOw0KICAgICAgICAgZkV4ZWN1dG9y
LnN1Ym1pdChuZXcgRHNmQ29tbWFuZFJ1bm5hYmxlKGZUcmFja2VyLCByZXF1ZXN0LmdldEVsZW1l
bnRzKClbMF0sIHJlcXVlc3QpIHsNCiAgICAgICAgICAgICBAT3ZlcnJpZGUgcHVibGljIHZvaWQg
ZG9FeGVjdXRlKCkgew0KLQkJCQlnZXRTdGVwUXVldWVNZ3IoKS5lbnF1ZXVlU3RlcChnZXRDb250
ZXh0KCksIHN0ZXBUeXBlKTsNCisgICAgICAgICAgICAJZ2V0U3RlcFF1ZXVlTWFuYWdlcigpLmVu
cXVldWVTdGVwKGdldENvbnRleHQoKSwgc3RlcFR5cGUpOw0KICAgICAgICAgICAgIH0NCiAgICAg
ICAgIH0pOw0KICAgICAgICAgcmV0dXJuIHRydWU7DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9h
Y3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS41
DQpkaWZmIC11IC1yMS41IERzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhDQotLS0gc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhCTcgTWF5
IDIwMDggMTc6NDA6NDcgLTAwMDAJMS41DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy91aS9hY3Rpb25zL0RzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQg
LTAwMDANCkBAIC00OSw3ICs0OSw3IEBADQogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBE
c2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVx
dWVzdCkgew0KICAgICAgICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRTdGVwVHlw
ZSgpOw0KICAgICAgICAgICAgIEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQot
CQkJCWdldFN0ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKA0KKyAgICAgICAgICAgIAlnZXRT
dGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoDQogICAgICAgICAgICAgICAgICAgICBn
ZXRDb250ZXh0KCksIHN0ZXBUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGFSZXF1
ZXN0TW9uaXRvcjxCb29sZWFuPihJbW1lZGlhdGVFeGVjdXRvci5nZXRJbnN0YW5jZSgpLCBudWxs
KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQpAQCAtNzEsNyArNzEsNyBA
QA0KICAgICAgICAgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGU9IGdldFN0ZXBUeXBlKCk7DQogICAg
ICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJl
cXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgew0KICAgICAgICAgICAgIEBPdmVycmlk
ZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotICAgICAgICAgICAgICAgIGdldFN0ZXBRdWV1
ZU1ncigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwgc3RlcFR5cGUpOw0KKyAgICAgICAgICAg
IAlnZXRTdGVwUXVldWVNYW5hZ2VyKCkuZW5xdWV1ZVN0ZXAoZ2V0Q29udGV4dCgpLCBzdGVwVHlw
ZSk7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfSk7DQogICAgICAgICByZXR1cm4gdHJ1ZTsN
CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmQ29tbWFu
ZFJ1bm5hYmxlLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5l
Y2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmQ29tbWFuZFJ1bm5hYmxlLmphdmEs
dg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjgNCmRpZmYgLXUgLXIxLjggRHNmQ29tbWFuZFJ1bm5h
YmxlLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNm
Q29tbWFuZFJ1bm5hYmxlLmphdmEJMzAgTWF5IDIwMDggMjI6NTc6NDAgLTAwMDAJMS44DQorKysg
c3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZkNvbW1hbmRSdW5uYWJs
ZS5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQgLTAwMDANCkBAIC0xNSw4ICsxNSwxMCBAQA0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5Ec2ZSdW5uYWJsZTsNCiBpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuSW1tdXRhYmxlOw0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwuU3RlcHBpbmdDb250
cm9sbGVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWkuRHNm
RGVidWdVSVBsdWdpbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2Uu
SVJ1bkNvbnRyb2w7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklT
dGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vydmlj
ZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlc1RyYWNrZXI7DQpAQCAtMzMsMTAgKzM1LDM2IEBA
DQogICAgIHB1YmxpYyBJUnVuQ29udHJvbCBnZXRSdW5Db250cm9sKCkgew0KICAgICAgICAgcmV0
dXJuIGZUcmFja2VyLmdldFNlcnZpY2UoSVJ1bkNvbnRyb2wuY2xhc3MpOw0KICAgICB9DQotICAg
IHB1YmxpYyBTdGVwUXVldWVNYW5hZ2VyIGdldFN0ZXBRdWV1ZU1ncigpIHsNCisgICAgLyoqDQor
ICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgI2dldFN0ZXBRdWV1ZU1hbmFnZXIoKX0gaW5z
dGVhZC4NCisgICAgICovDQorICAgIEBEZXByZWNhdGVkDQorCXB1YmxpYyBTdGVwUXVldWVNYW5h
Z2VyIGdldFN0ZXBRdWV1ZU1ncigpIHsNCiAgICAgICAgIHJldHVybiBmVHJhY2tlci5nZXRTZXJ2
aWNlKFN0ZXBRdWV1ZU1hbmFnZXIuY2xhc3MpOw0KICAgICB9DQogDQorICAgIC8qKg0KKwkgKiBA
c2luY2UgMS4xDQorCSAqLw0KKwlwdWJsaWMgSVN0ZXBRdWV1ZU1hbmFnZXIgZ2V0U3RlcFF1ZXVl
TWFuYWdlcigpIHsNCisJCS8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQ0KKwkJSVN0ZXBR
dWV1ZU1hbmFnZXIgbWdyPSBnZXRTdGVwUXVldWVNZ3IoKTsNCisJCWlmIChtZ3IgIT0gbnVsbCkg
ew0KKwkJCXJldHVybiBtZ3I7DQorCQl9DQorCQlyZXR1cm4gZ2V0U3RlcHBpbmdDb250cm9sbGVy
KCk7DQorICAgIH0NCisNCisgICAgLyoqDQorCSAqIEBzaW5jZSAxLjENCisJICovDQorICAgIHB1
YmxpYyBTdGVwcGluZ0NvbnRyb2xsZXIgZ2V0U3RlcHBpbmdDb250cm9sbGVyKCkgew0KKyAgICAJ
aWYgKGZDb250ZXh0ICE9IG51bGwpIHsNCisgICAgCQlyZXR1cm4gKFN0ZXBwaW5nQ29udHJvbGxl
cikgZkNvbnRleHQuZ2V0QWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MpOw0KKyAgICAJ
fQ0KKyAgICAJcmV0dXJuIG51bGw7DQorICAgIH0NCisNCiAgICAgcHVibGljIERzZkNvbW1hbmRS
dW5uYWJsZShEc2ZTZXJ2aWNlc1RyYWNrZXIgc2VydmljZXNUcmFja2VyLCBPYmplY3QgZWxlbWVu
dCwgSURlYnVnQ29tbWFuZFJlcXVlc3QgcmVxdWVzdCkgew0KICAgICAgICAgZlRyYWNrZXIgPSBz
ZXJ2aWNlc1RyYWNrZXI7DQogICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIElETVZNQ29u
dGV4dCkgew0KQEAgLTU2LDcgKzg0LDcgQEANCiAgICAgICAgIH0NCiAgICAgICAgIGlmIChnZXRD
b250ZXh0KCkgPT0gbnVsbCkgew0KICAgICAgICAgICAgIGZSZXF1ZXN0LnNldFN0YXR1cyhtYWtl
RXJyb3IoIlNlbGVjdGVkIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IHJ1biBjb250cm9sLiIsIG51
bGwpKTsgICAgICAgICAgICAgLy8kTk9OLU5MUy0xJA0KLSAgICAgICAgfSBlbHNlIGlmIChnZXRS
dW5Db250cm9sKCkgPT0gbnVsbCB8fCBnZXRTdGVwUXVldWVNZ3IoKSA9PSBudWxsKSB7DQorICAg
ICAgICB9IGVsc2UgaWYgKGdldFJ1bkNvbnRyb2woKSA9PSBudWxsIHx8IGdldFN0ZXBwaW5nQ29u
dHJvbGxlcigpID09IG51bGwpIHsNCiAgICAgICAgICAgICBmUmVxdWVzdC5zZXRTdGF0dXMobWFr
ZUVycm9yKCJSdW4gQ29udHJvbCBub3QgYXZhaWxhYmxlIiwgbnVsbCkpOyAvLyROT04tTkxTLTEk
DQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgIGRvRXhlY3V0ZSgpOw0KSW5kZXg6IHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwUmV0dXJuQ29tbWFu
ZC5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5k
ZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBSZXR1cm5Db21tYW5kLmphdmEsdg0KcmV0
cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgRHNmU3RlcFJldHVybkNvbW1hbmQu
amF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVw
UmV0dXJuQ29tbWFuZC5qYXZhCTMwIE1heSAyMDA4IDIyOjU3OjQwIC0wMDAwCTEuNQ0KKysrIHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwUmV0dXJuQ29tbWFu
ZC5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQgLTAwMDANCkBAIC00Niw3ICs0Niw3IEBADQogICAg
ICAgICANCiAgICAgICAgIGZFeGVjdXRvci5zdWJtaXQobmV3IERzZkNvbW1hbmRSdW5uYWJsZShm
VHJhY2tlciwgcmVxdWVzdC5nZXRFbGVtZW50cygpWzBdLCByZXF1ZXN0KSB7IA0KICAgICAgICAg
ICAgIEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotICAgICAgICAgICAgICAg
IGdldFN0ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKA0KKyAgICAgICAgICAgIAlnZXRTdGVw
UXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoDQogICAgICAgICAgICAgICAgICAgICBnZXRD
b250ZXh0KCksIFN0ZXBUeXBlLlNURVBfUkVUVVJOLA0KICAgICAgICAgICAgICAgICAgICAgbmV3
IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihJbW1lZGlhdGVFeGVjdXRvci5nZXRJbnN0YW5j
ZSgpLCBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQpAQCAtNjcs
NyArNjcsNyBAQA0KICAgICAgICAgDQogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZD
b21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVz
dCkgeyANCiAgICAgICAgICAgICBAT3ZlcnJpZGUgcHVibGljIHZvaWQgZG9FeGVjdXRlKCkgew0K
LSAgICAgICAgICAgICAgICBnZXRTdGVwUXVldWVNZ3IoKS5lbnF1ZXVlU3RlcChnZXRDb250ZXh0
KCksIFN0ZXBUeXBlLlNURVBfUkVUVVJOKTsNCisgICAgICAgICAgICAJZ2V0U3RlcFF1ZXVlTWFu
YWdlcigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwgU3RlcFR5cGUuU1RFUF9SRVRVUk4pOw0K
ICAgICAgICAgICAgIH0NCiAgICAgICAgIH0pOw0KICAgICAgICAgcmV0dXJuIHRydWU7DQpJbmRl
eDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92
aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRl
cm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1bmNoVk1Qcm92
aWRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4zDQpkaWZmIC11IC1yMS4zIEFic3Ry
YWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1bmNo
Vk1Qcm92aWRlci5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMw0KKysrIHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVs
L2xhdW5jaC9BYnN0cmFjdExhdW5jaFZNUHJvdmlkZXIuamF2YQk4IEp1bCAyMDA4IDExOjExOjAz
IC0wMDAwDQpAQCAtMjMsNiArMjMsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0
YW1vZGVsLkRNQ29udGV4dHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwu
SURNQ29udGV4dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1FdmVu
dDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFs
LnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkxhdW5j
aFJvb3RWTU5vZGUuTGF1bmNoZXNFdmVudDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRl
YnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5sYXVuY2guU3RhY2tGcmFtZXNW
TU5vZGUuSW5jb21wbGV0ZVN0YWNrVk1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsNCkBAIC01NCw3ICs1NSw3IEBA
DQogDQogDQogLyoqDQotICogDQorICogQHNpbmNlIDEuMQ0KICAqLw0KIEBTdXBwcmVzc1dhcm5p
bmdzKCJyZXN0cmljdGlvbiIpDQogcHVibGljIGNsYXNzIEFic3RyYWN0TGF1bmNoVk1Qcm92aWRl
ciBleHRlbmRzIEFic3RyYWN0RE1WTVByb3ZpZGVyIA0KQEAgLTgxLDIyICs4MiwxNSBAQA0KICAg
ICAgICAgDQogICAgICAgICBmUHJlZmVyZW5jZXNMaXN0ZW5lciA9IG5ldyBJUHJvcGVydHlDaGFu
Z2VMaXN0ZW5lcigpIHsNCiAJCQlwdWJsaWMgdm9pZCBwcm9wZXJ0eUNoYW5nZShmaW5hbCBQcm9w
ZXJ0eUNoYW5nZUV2ZW50IGV2ZW50KSB7DQotCQkJCVN0cmluZyBwcm9wZXJ0eSA9IGV2ZW50Lmdl
dFByb3BlcnR5KCk7DQotCQkJCWlmIChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZS
QU1FX0xJTUlUX0VOQUJMRS5lcXVhbHMocHJvcGVydHkpDQotCQkJCQkJfHwgSURzZkRlYnVnVUlD
b25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVC5lcXVhbHMocHJvcGVydHkpKSB7DQotCQkJ
CQlpZiAoc3RvcmUuZ2V0Qm9vbGVhbihJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZS
QU1FX0xJTUlUX0VOQUJMRSkpIHsNCi0JCQkgICAgICAgIAlnZXRQcmVzZW50YXRpb25Db250ZXh0
KCkuc2V0UHJvcGVydHkoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1J
VCwgc3RvcmUuZ2V0SW50KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElN
SVQpKTsNCi0JCQkJCX0gZWxzZSB7DQotCQkJICAgICAgICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4
dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElN
SVQsIG51bGwpOw0KLQkJCQkJfQ0KLQkJCQkJZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZS
dW5uYWJsZSgpIHsNCi0JCQkJCSAgICBwdWJsaWMgdm9pZCBydW4oKSB7DQotCQkJCQkgICAgICAg
IGhhbmRsZUV2ZW50KGV2ZW50KTsNCi0JCQkJCSAgICB9DQotCQkJCQl9KTsNCi0JCQkJfQ0KKwkJ
CQloYW5kbGVQcm9wZXJ0eUNoYW5nZWQoc3RvcmUsIGV2ZW50KTsNCiAJCQl9fTsNCiAgICAgICAg
IHN0b3JlLmFkZFByb3BlcnR5Q2hhbmdlTGlzdGVuZXIoZlByZWZlcmVuY2VzTGlzdGVuZXIpOw0K
KyAgICAgICAgDQorCQlTdGVwcGluZ0NvbnRyb2xsZXIgY29udHJvbGxlciA9IChTdGVwcGluZ0Nv
bnRyb2xsZXIpIHNlc3Npb24uZ2V0TW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5jbGFz
cyk7DQorCQlpZiAoY29udHJvbGxlciAhPSBudWxsKSB7DQorCQkJY29udHJvbGxlci5lbmFibGVT
eW5jaHJvbml6ZWRTdGVwcGluZyhzdG9yZS5nZXRCb29sZWFuKElEc2ZEZWJ1Z1VJQ29uc3RhbnRz
LlBSRUZfU1lOQ0hST05JWkVEX1NURVBQSU5HX0VOQUJMRSkpOw0KKwkJCWNvbnRyb2xsZXIuc2V0
TWluaW11bVN0ZXBJbnRlcnZhbChzdG9yZS5nZXRJbnQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJF
Rl9NSU5fU1RFUF9JTlRFUlZBTCkpOw0KKwkJfQ0KICAgICB9DQogICAgIA0KICAgICBAT3ZlcnJp
ZGUNCkBAIC0xMjgsMzAgKzEyMiw0NyBAQA0KICAgICB9DQogDQogICAgIEBPdmVycmlkZQ0KLSAg
ICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChPYmplY3QgZXZlbnQpIHsNCisgICAgcHVibGljIHZv
aWQgZG9uZUhhbmRsZUV2ZW50KE9iamVjdCBldmVudCkgew0KKwkJaWYgKGV2ZW50IGluc3RhbmNl
b2YgSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQpIHsNCisJCQlmaW5hbCBJU3VzcGVuZGVk
RE1FdmVudCBzdXNwZW5kZWRFdmVudD0gKElSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50KSBl
dmVudDsNCisJCQlpZiAoc3VzcGVuZGVkRXZlbnQuZ2V0UmVhc29uKCkgPT0gSVJ1bkNvbnRyb2wu
U3RhdGVDaGFuZ2VSZWFzb24uU1RFUCkgew0KKwkJCQlJRXhlY3V0aW9uRE1Db250ZXh0IGRtYyA9
IHN1c3BlbmRlZEV2ZW50LmdldERNQ29udGV4dCgpOw0KKwkJCQlTdGVwcGluZ0NvbnRyb2xsZXIg
c3RlcFF1ZXVlID0gKFN0ZXBwaW5nQ29udHJvbGxlcikgZG1jLmdldEFkYXB0ZXIoU3RlcHBpbmdD
b250cm9sbGVyLmNsYXNzKTsNCisJCQkJaWYgKHN0ZXBRdWV1ZSAhPSBudWxsKSB7DQorCQkJCQlz
dGVwUXVldWUuZG9uZVN0ZXBwaW5nKGRtYyk7DQorCQkJCX0NCisJCQl9DQorCQl9DQorICAgIH0N
CisgICAgDQorICAgIEBPdmVycmlkZQ0KKyAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChPYmpl
Y3QgZXZlbnQsIGZpbmFsIFJlcXVlc3RNb25pdG9yIHJtKSB7DQogICAgICAgICBpZiAoZXZlbnQg
aW5zdGFuY2VvZiBEb3VibGVDbGlja0V2ZW50ICYmICFpc0Rpc3Bvc2VkKCkpIHsNCiAgICAgICAg
ICAgICBmaW5hbCBJU2VsZWN0aW9uIHNlbGVjdGlvbj0gKChEb3VibGVDbGlja0V2ZW50KSBldmVu
dCkuZ2V0U2VsZWN0aW9uKCk7DQogICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9m
IElTdHJ1Y3R1cmVkU2VsZWN0aW9uKSB7DQogICAgICAgICAgICAgICAgIE9iamVjdCBlbGVtZW50
PSAoKElTdHJ1Y3R1cmVkU2VsZWN0aW9uKSBzZWxlY3Rpb24pLmdldEZpcnN0RWxlbWVudCgpOw0K
ICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEluY29tcGxldGVTdGFja1ZN
Q29udGV4dCkgew0KICAgICAgICAgICAgICAgICAgICAgSW5jb21wbGV0ZVN0YWNrVk1Db250ZXh0
IGluY1N0YWNrVm1jID0gKChJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQpIGVsZW1lbnQpOyANCi0g
ICAgICAgICAgICAgICAgICAgIElWTU5vZGUgbm9kZSA9ICgoSW5jb21wbGV0ZVN0YWNrVk1Db250
ZXh0KSBlbGVtZW50KS5nZXRWTU5vZGUoKTsNCi0gICAgICAgICAgICAgICAgICAgIGlmIChpbmNT
dGFja1ZtYy5nZXRWTU5vZGUoKSBpbnN0YW5jZW9mIFN0YWNrRnJhbWVzVk1Ob2RlKSB7DQorICAg
ICAgICAgICAgICAgICAgICBJVk1Ob2RlIG5vZGUgPSBpbmNTdGFja1ZtYy5nZXRWTU5vZGUoKTsN
CisgICAgICAgICAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgU3RhY2tGcmFtZXNWTU5v
ZGUgJiYgbm9kZS5nZXRWTVByb3ZpZGVyKCkgPT0gdGhpcykgew0KICAgICAgICAgICAgICAgICAg
ICAgICAgIElFeGVjdXRpb25ETUNvbnRleHQgZXhlQ3R4PSBpbmNTdGFja1ZtYy5nZXRFeGVjdXRp
b25ETUNvbnRleHQoKTsNCiAJCQkJCQkoKFN0YWNrRnJhbWVzVk1Ob2RlKSBub2RlKS5pbmNyZW1l
bnRTdGFja0ZyYW1lTGltaXQoZXhlQ3R4KTsNCiAJCQkJCQkvLyByZXBsYWNlIGRvdWJsZSBjbGlj
ayBldmVudCB3aXRoIGV4cGFuZCBzdGFjayBldmVudA0KIAkJCQkJCWZpbmFsIEV4cGFuZFN0YWNr
RXZlbnQgZXhwYW5kU3RhY2tFdmVudCA9IG5ldyBFeHBhbmRTdGFja0V2ZW50KGV4ZUN0eCk7DQog
CQkJCQkJZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZSdW5uYWJsZSgpIHsNCiAJCQkJCQkg
ICAgcHVibGljIHZvaWQgcnVuKCkgew0KLQkJCQkJCSAgICAgICAgaGFuZGxlRXZlbnQoZXhwYW5k
U3RhY2tFdmVudCk7DQorCQkJCQkJICAgICAgICBoYW5kbGVFdmVudChleHBhbmRTdGFja0V2ZW50
LCBudWxsKTsNCiAJCQkJCQkgICAgfQ0KIAkJCQkJCX0pOw0KICAgICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgIGlmIChy
bSAhPSBudWxsKSB7DQorICAgICAgICAgICAgCXJtLmRvbmUoKTsNCisgICAgICAgICAgICB9DQog
ICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgfQ0KLSAgICAJc3VwZXIuaGFuZGxlRXZlbnQo
ZXZlbnQpOw0KKyAgICAJc3VwZXIuaGFuZGxlRXZlbnQoZXZlbnQsIHJtKTsNCiAgICAgfQ0KIA0K
ICAgICBAT3ZlcnJpZGUNCkBAIC0xNzcsNyArMTg4LDcgQEANCiAJICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBTY2hlZHVsZWRGdXR1cmU8Pz4gZnV0dXJlPSBmUmVmcmVzaFN0YWNrRnJh
bWVzRnV0dXJlcy5nZXQoZXhlQ29udGV4dCk7DQogCSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKGZ1dHVyZSAhPSBudWxsICYmICFpc0Rpc3Bvc2VkKCkpIHsNCiAJICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZlJlZnJlc2hTdGFja0ZyYW1lc0Z1dHVyZXMucmVt
b3ZlKGV4ZUNvbnRleHQpOw0KLQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBo
YW5kbGVFdmVudChuZXcgRnVsbFN0YWNrUmVmcmVzaEV2ZW50KGV4ZUNvbnRleHQpKTsNCisJICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXZlbnQobmV3IEZ1bGxTdGFj
a1JlZnJlc2hFdmVudChleGVDb250ZXh0KSwgbnVsbCk7DQogCSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQ0KIAkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0pOw0KIAkgICAg
ICAgICAgICAgICAgICAgIH0NCkBAIC0yNzYsNCArMjg3LDMxIEBADQogICAgICAgICByZXR1cm4g
ZmFsc2U7DQogICAgIH0NCiANCisJcHJvdGVjdGVkIHZvaWQgaGFuZGxlUHJvcGVydHlDaGFuZ2Vk
KGZpbmFsIElQcmVmZXJlbmNlU3RvcmUgc3RvcmUsIGZpbmFsIFByb3BlcnR5Q2hhbmdlRXZlbnQg
ZXZlbnQpIHsNCisJCVN0cmluZyBwcm9wZXJ0eSA9IGV2ZW50LmdldFByb3BlcnR5KCk7DQorCQlp
ZiAoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVF9FTkFCTEUuZXF1
YWxzKHByb3BlcnR5KQ0KKwkJCQl8fCBJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZS
QU1FX0xJTUlULmVxdWFscyhwcm9wZXJ0eSkpIHsNCisJCQlpZiAoc3RvcmUuZ2V0Qm9vbGVhbihJ
RHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSkpIHsNCisJ
CSAgICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29u
c3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIHN0b3JlLmdldEludChJRHNmRGVidWdVSUNv
bnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUKSk7DQorCQkJfSBlbHNlIHsNCisJCSAgICAJ
Z2V0UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3RhbnRz
LlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIG51bGwpOw0KKwkJCX0NCisJCQlnZXRFeGVjdXRvcigp
LmV4ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KKwkJCSAgICBwdWJsaWMgdm9pZCBydW4oKSB7
DQorCQkJICAgICAgICBoYW5kbGVFdmVudChldmVudCk7DQorCQkJICAgIH0NCisJCQl9KTsNCisJ
CX0gZWxzZSBpZiAoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TWU5DSFJPTklaRURfU1RFUFBJ
TkdfRU5BQkxFLmVxdWFscyhwcm9wZXJ0eSkpIHsNCisJCQlTdGVwcGluZ0NvbnRyb2xsZXIgY29u
dHJvbGxlciA9IChTdGVwcGluZ0NvbnRyb2xsZXIpIGdldFNlc3Npb24oKS5nZXRNb2RlbEFkYXB0
ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzKTsNCisJCQlpZiAoY29udHJvbGxlciAhPSBudWxs
KSB7DQorCQkJCWNvbnRyb2xsZXIuZW5hYmxlU3luY2hyb25pemVkU3RlcHBpbmcoc3RvcmUuZ2V0
Qm9vbGVhbihwcm9wZXJ0eSkpOw0KKwkJCX0NCisJCX0gZWxzZSBpZiAoSURzZkRlYnVnVUlDb25z
dGFudHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTC5lcXVhbHMocHJvcGVydHkpKSB7DQorCQkJU3Rl
cHBpbmdDb250cm9sbGVyIGNvbnRyb2xsZXIgPSAoU3RlcHBpbmdDb250cm9sbGVyKSBnZXRTZXNz
aW9uKCkuZ2V0TW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5jbGFzcyk7DQorCQkJaWYg
KGNvbnRyb2xsZXIgIT0gbnVsbCkgew0KKwkJCQljb250cm9sbGVyLnNldE1pbmltdW1TdGVwSW50
ZXJ2YWwoc3RvcmUuZ2V0SW50KHByb3BlcnR5KSk7DQorCQkJfQ0KKwkJfQ0KKwl9DQorDQogfQ0K
SW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwv
dWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9v
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9p
bnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0Q29udGFpbmVy
Vk1Ob2RlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjQNCmRpZmYgLXUgLXIxLjQgQWJz
dHJhY3RDb250YWluZXJWTU5vZGUuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRh
aW5lclZNTm9kZS5qYXZhCTE2IEp1biAyMDA4IDE4OjMwOjU0IC0wMDAwCTEuNA0KKysrIHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVs
L2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDMg
LTAwMDANCkBAIC0xOCw2ICsxOCw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRh
bW9kZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5J
RE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwu
dWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlci5TdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQog
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFp
bmVyRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5J
UnVuQ29udHJvbC5JQ29udGFpbmVyUmVzdW1lZERNRXZlbnQ7DQpAQCAtMzcsNiArMzgsOCBAQA0K
IC8qKg0KICAqIEFic3RyYWN0IGltcGxlbWVudGF0aW9uIG9mIGEgY29udGFpbmVyIHZpZXcgbW9k
ZWwgbm9kZS4NCiAgKiBDbGllbnRzIG5lZWQgdG8gaW1wbGVtZW50IHtAbGluayAjdXBkYXRlTGFi
ZWxJblNlc3Npb25UaHJlYWQoSUxhYmVsVXBkYXRlW10pfS4NCisgKiANCisgKiBAc2luY2UgMS4x
DQogICovDQogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikNCiBwdWJsaWMgYWJzdHJh
Y3QgY2xhc3MgQWJzdHJhY3RDb250YWluZXJWTU5vZGUgZXh0ZW5kcyBBYnN0cmFjdERNVk1Ob2Rl
IGltcGxlbWVudHMgSUVsZW1lbnRMYWJlbFByb3ZpZGVyIHsNCkBAIC04Nyw2ICs5MCwxMSBAQA0K
ICAgICAgICAgICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7DQog
ICAgICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOw0KICAgICAgICAgICAg
IH0NCisJICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkg
ew0KKwkgICAgICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSANCisJ
ICAgICAgICB7DQorCSAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOw0KKwkg
ICAgICAgIH0NCiAJICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0
RXZlbnQpIHsNCiAJICAgICAgICBpZiAoZG1jIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4
dCkgDQogCSAgICAgICAgew0KQEAgLTEyOSw2ICsxMzcsMTUgQEANCiAJCSAgICBpZiAoZG1jIGlu
c3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgew0KIAkJICAgICAgICBwYXJlbnREZWx0YS5h
ZGROb2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0YS5DT05URU5UKTsNCiAJCSAg
ICB9DQorCQl9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsN
CisJCSAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0
aW9uIGlzIHRha2luZyANCisJCSAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRz
IHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IA0KKwkJICAgIC8vIHRoZSB1c2VyIHRoYXQgdGhlIHBy
b2dyYW0gaXMgcnVubmluZy4NCisJCSAgICAvLyBJZiB0aGUgc3RlcCB3YXMgaXNzdWVkIGZvciB0
aGUgd2hvbGUgY29udGFpbmVyIHJlZnJlc2gNCisJCSAgICAvLyB0aGUgd2hvbGUgY29udGFpbmVy
Lg0KKwkJICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7DQorCSAg
ICAgICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3JlYXRlVk1Db250ZXh0KGRtYyksIElNb2Rl
bERlbHRhLkNPTlRFTlQpOw0KKwkJICAgIH0NCiAJCX0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElT
dGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCiAJCSAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBpbmRp
Y2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCiAJCSAgICAvLyBhIGxvbmcg
dGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IA0KSW5kZXg6
IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmll
d21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1Mg
ZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9w
cm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0VGhyZWFkVk1Ob2RlLmphdmEs
dg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgQWJzdHJhY3RUaHJlYWRW
TU5vZGUuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhCTE3
IEp1biAyMDA4IDIwOjQ2OjExIC0wMDAwCTEuNQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRo
cmVhZFZNTm9kZS5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDMgLTAwMDANCkBAIC0yMyw2ICsyMyw3
IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5n
Q29udHJvbGxlci5TdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyRE1Db250ZXh0Ow0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVy
UmVzdW1lZERNRXZlbnQ7DQpAQCAtNTAsNiArNTEsOCBAQA0KIC8qKg0KICAqIEFic3RyYWN0IGlt
cGxlbWVudGF0aW9uIG9mIGEgdGhyZWFkIHZpZXcgbW9kZWwgbm9kZS4NCiAgKiBDbGllbnRzIG5l
ZWQgdG8gaW1wbGVtZW50IHtAbGluayAjdXBkYXRlTGFiZWxJblNlc3Npb25UaHJlYWQoSUxhYmVs
VXBkYXRlW10pfS4NCisgKiANCisgKiBAc2luY2UgMS4xDQogICovDQogQFN1cHByZXNzV2Fybmlu
Z3MoInJlc3RyaWN0aW9uIikNCiBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUaHJlYWRW
TU5vZGUgZXh0ZW5kcyBBYnN0cmFjdERNVk1Ob2RlDQpAQCAtMTEyLDYgKzExNSwxNSBAQA0KICAg
ICAgICAgICAgICAgICBybS5kb25lKCk7DQogICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAg
ICAgICAgICB9DQorICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVk
T3V0RXZlbnQgJiYgDQorICAgICAgICAgICAgICAgICgoU3RlcHBpbmdUaW1lZE91dEV2ZW50KWUp
LmdldERNQ29udGV4dCgpIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgDQorICAgICB7
DQorICAgICAgICAgIC8vIFRoZSB0aW1lZCBvdXQgZXZlbnQgb2NjdXJlZCBvbiBhIGNvbnRhaW5l
ciBhbmQgbm90IG9uIGEgdGhyZWFkLiAgRG8gbm90DQorICAgICAgICAgIC8vIHJldHVybiBhIGNv
bnRleHQgZm9yIHRoaXMgZXZlbnQsIHdoaWNoIHdpbGwgZm9yY2UgdGhlIHZpZXcgbW9kZWwgdG8g
Z2VuZXJhdGUNCisgICAgICAgICAgLy8gYSBkZWx0YSBmb3IgYWxsIHRoZSB0aHJlYWRzLg0KKyAg
ICAgICAgICBybS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBEc2ZVSVBsdWdp
bi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMuTk9UX1NVUFBPUlRFRCwgIiIsIG51bGwp
KTsgLy8kTk9OLU5MUy0xJA0KKyAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICAgIHJldHVy
bjsNCiAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0RXZl
bnQgJiYgDQogICAgICAgICAgICAgICAgICAgICgoSVN0ZXBwaW5nVGltZWRPdXRFdmVudCllKS5n
ZXRETUNvbnRleHQoKSBpbnN0YW5jZW9mIElDb250YWluZXJETUNvbnRleHQpIA0KICAgICAgICAg
ew0KQEAgLTIzMiw2ICsyNDQsOCBAQA0KICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5O
T19DSEFOR0U7DQogICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBGdWxsU3RhY2tSZWZy
ZXNoRXZlbnQpIHsNCiAgICAgICAgICAgICByZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVDsNCisg
ICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0K
KyAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOyAgICAgICAgICAgIA0KICAg
ICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0K
ICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOyAgICAgICAgICAgIA0KICAg
ICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgTW9kZWxQcm94eUluc3RhbGxlZEV2ZW50KSB7
DQpAQCAtMjcxLDYgKzI4NSwxMiBAQA0KICAgICAgICAgICAgIC8vIGFuZCBhIGZpeGVkIGRlbGF5
LiAgUmVmcmVzaCB0aGUgd2hvbGUgdGhyZWFkIHVwb24gdGhpcyBldmVudC4NCiAgICAgICAgICAg
ICBwYXJlbnREZWx0YS5hZGROb2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0YS5D
T05URU5UKTsNCiAgICAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICB9IGVsc2UgaWYgKGUg
aW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCisgICAgICAgICAgICAvLyBTdGVw
cGluZyB0aW1lLW91dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyAN
CisgICAgICAgICAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJl
ZnJlc2hlZCB0byBzaG93IA0KKyAgICAgICAgICAgIC8vIHRoZSB1c2VyIHRoYXQgdGhlIHByb2dy
YW0gaXMgcnVubmluZy4gIA0KKyAgICAgICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3JlYXRl
Vk1Db250ZXh0KGRtYyksIElNb2RlbERlbHRhLkNPTlRFTlQpOw0KKyAgICAgICAgICAgIHJtLmRv
bmUoKTsgICAgICAgICAgICANCiAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVw
cGluZ1RpbWVkT3V0RXZlbnQpIHsNCiAgICAgICAgICAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBp
bmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCiAgICAgICAgICAgICAv
LyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93
IA0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9u
YWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZhDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRl
cm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL1N0YWNrRnJhbWVzVk1Ob2RlLmph
dmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjE0DQpkaWZmIC11IC1yMS4xNCBTdGFja0ZyYW1l
c1ZNTm9kZS5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9w
cm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL1N0YWNrRnJhbWVzVk1Ob2RlLmphdmEJMjQg
SnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xNA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1l
c1ZNTm9kZS5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDQgLTAwMDANCkBAIC0yMiwxMCArMjIsMTEg
QEANCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBpbXBv
cnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0
ZXBwaW5nQ29udHJvbGxlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVy
bmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuU3RlcHBpbmdU
aW1lZE91dEV2ZW50Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5J
UnVuQ29udHJvbDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0
YWNrOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2syOw0K
LWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2Vy
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5J
Q29udGFpbmVyRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyU3VzcGVuZGVkRE1FdmVudDsNCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29u
dGV4dDsNCkBAIC0zMyw2ICszNCw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy5zZXJ2aWNlLklSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50Ow0KIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2suSUZyYW1lRE1Db250ZXh0Ow0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2suSUZyYW1lRE1EYXRhOw0K
K2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2Vy
LklTdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy51aS5JRHNmRGVidWdVSUNvbnN0YW50czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNl
cnZpY2UuRHNmU2Vzc2lvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnVpLmNvbmN1cnJl
bnQuVmlld2VyRGF0YVJlcXVlc3RNb25pdG9yOw0KQEAgLTY1LDYgKzY3LDggQEANCiAgICAgDQog
CS8qKg0KIAkgKiBWaWV3IG1vZGVsIGNvbnRleHQgcmVwcmVzZW50aW5nIHRoZSBlbmQgb2YgYW4g
aW5jb21wbGV0ZSBzdGFjay4NCisJICogDQorCSAqIEBzaW5jZSAxLjENCiAJICovDQogCXB1Ymxp
YyBjbGFzcyBJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQgZXh0ZW5kcyBBYnN0cmFjdFZNQ29udGV4
dCB7DQogCQlwcml2YXRlIGZpbmFsIGludCBmTGV2ZWw7DQpAQCAtMzIwLDEzICszMjQsMTYgQEAN
CiAgICAgICAgIGlmIChpZHggIT0gMCkgcmV0dXJuOw0KICAgICAgICAgDQogICAgICAgICBmaW5h
bCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNEbWMgPSBmaW5kRG1jSW5QYXRoKHVwZGF0ZS5nZXRW
aWV3ZXJJbnB1dCgpLCB1cGRhdGUuZ2V0RWxlbWVudFBhdGgoKSwgSUV4ZWN1dGlvbkRNQ29udGV4
dC5jbGFzcyk7DQorICAgICAgICBpZiAoZXhlY0RtYyA9PSBudWxsKSB7DQorICAgICAgICAJcmV0
dXJuOw0KKyAgICAgICAgfQ0KICAgICAgICAgSVJ1bkNvbnRyb2wgcnVuQ29udHJvbFNlcnZpY2Ug
PSBnZXRTZXJ2aWNlc1RyYWNrZXIoKS5nZXRTZXJ2aWNlKElSdW5Db250cm9sLmNsYXNzKTsgDQot
ICAgICAgICBTdGVwUXVldWVNYW5hZ2VyIHN0ZXBRdWV1ZU1nclNlcnZpY2UgPSBnZXRTZXJ2aWNl
c1RyYWNrZXIoKS5nZXRTZXJ2aWNlKFN0ZXBRdWV1ZU1hbmFnZXIuY2xhc3MpOyANCi0gICAgICAg
IGlmIChleGVjRG1jID09IG51bGwgfHwgcnVuQ29udHJvbFNlcnZpY2UgPT0gbnVsbCB8fCBzdGVw
UXVldWVNZ3JTZXJ2aWNlID09IG51bGwpIHJldHVybjsNCisgICAgICAgIFN0ZXBwaW5nQ29udHJv
bGxlciBzdGVwUXVldWVNZ3IgPSAoU3RlcHBpbmdDb250cm9sbGVyKSBleGVjRG1jLmdldEFkYXB0
ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzKTsgDQorICAgICAgICBpZiAocnVuQ29udHJvbFNl
cnZpY2UgPT0gbnVsbCB8fCBzdGVwUXVldWVNZ3IgPT0gbnVsbCkgcmV0dXJuOw0KICAgICAgICAg
DQogICAgICAgICBTdHJpbmcgaW1hZ2VLZXkgPSBudWxsOw0KICAgICAgICAgaWYgKHJ1bkNvbnRy
b2xTZXJ2aWNlLmlzU3VzcGVuZGVkKGV4ZWNEbWMpIHx8IA0KLSAgICAgICAgICAgIChydW5Db250
cm9sU2VydmljZS5pc1N0ZXBwaW5nKGV4ZWNEbWMpICYmICFzdGVwUXVldWVNZ3JTZXJ2aWNlLmlz
U3RlcHBpbmdUaW1lZE91dChleGVjRG1jKSkpDQorICAgICAgICAgICAgKHJ1bkNvbnRyb2xTZXJ2
aWNlLmlzU3RlcHBpbmcoZXhlY0RtYykgJiYgIXN0ZXBRdWV1ZU1nci5pc1N0ZXBwaW5nVGltZWRP
dXQoZXhlY0RtYykpKQ0KICAgICAgICAgew0KICAgICAgICAgICAgIGltYWdlS2V5ID0gSURlYnVn
VUlDb25zdGFudHMuSU1HX09CSlNfU1RBQ0tGUkFNRTsNCiAgICAgICAgIH0gZWxzZSB7DQpAQCAt
NDA5LDcgKzQxNiw5IEBADQogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQg
fCBJTW9kZWxEZWx0YS5FWFBBTkQgfCBJTW9kZWxEZWx0YS5TRUxFQ1Q7DQogICAgICAgICB9IGVs
c2UgaWYgKGUgaW5zdGFuY2VvZiBGdWxsU3RhY2tSZWZyZXNoRXZlbnQpIHsNCiAgICAgICAgIAly
ZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVCB8IElNb2RlbERlbHRhLkVYUEFORDsNCi0gICAgICAg
IH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBRdWV1ZU1hbmFnZXIuSVN0ZXBwaW5nVGltZWRP
dXRFdmVudCkgew0KKyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgU3RlcHBpbmdUaW1l
ZE91dEV2ZW50KSB7DQorICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7DQor
ICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBJU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7
DQogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7DQogICAgICAgICB9IGVs
c2UgaWYgKGUgaW5zdGFuY2VvZiBNb2RlbFByb3h5SW5zdGFsbGVkRXZlbnQpIHsNCiAgICAgICAg
ICAgICByZXR1cm4gSU1vZGVsRGVsdGEuU0VMRUNUIHwgSU1vZGVsRGVsdGEuRVhQQU5EOw0KQEAg
LTQ2MSw4ICs0NzAsMTAgQEANCiAgICAgICAgICAgICBjbGVhclN0YWNrRnJhbWVMaW1pdCggKChJ
U3VzcGVuZGVkRE1FdmVudCllKS5nZXRETUNvbnRleHQoKSApOw0KICAgICAgICAgICAgIElFeGVj
dXRpb25ETUNvbnRleHQgZXhlY0RtYyA9ICgoSVN1c3BlbmRlZERNRXZlbnQpZSkuZ2V0RE1Db250
ZXh0KCk7DQogICAgICAgICAgICAgYnVpbGREZWx0YUZvclN1c3BlbmRlZEV2ZW50KGV4ZWNEbWMs
IGV4ZWNEbWMsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KLSAgICAgICAgfSBlbHNlIGlmIChl
IGluc3RhbmNlb2YgU3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7DQot
ICAgICAgICAgICAgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgoU3RlcFF1ZXVl
TWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0p
Ow0KKyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgU3RlcHBpbmdUaW1lZE91dEV2ZW50
KSB7DQorICAgICAgICAgICAgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgoU3Rl
cHBpbmdUaW1lZE91dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KKyAgICAgICAg
fSBlbHNlIGlmIChlIGluc3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0KKyAgICAg
ICAgICAgIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoKElTdGVwcGluZ1RpbWVk
T3V0RXZlbnQpZSwgcGFyZW50LCBub2RlT2Zmc2V0LCBybSk7DQogICAgICAgICB9IGVsc2UgaWYg
KGUgaW5zdGFuY2VvZiBNb2RlbFByb3h5SW5zdGFsbGVkRXZlbnQpIHsNCiAgICAgICAgICAgICBi
dWlsZERlbHRhRm9yTW9kZWxQcm94eUluc3RhbGxlZEV2ZW50KHBhcmVudCwgbm9kZU9mZnNldCwg
cm0pOw0KICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgRXhwYW5kU3RhY2tFdmVudCkg
ew0KQEAgLTU0Nyw3ICs1NTgsMTMgQEANCiAgICAgICAgIHJtLmRvbmUoKTsNCiAJfQ0KIAkNCi0g
ICAgcHJpdmF0ZSB2b2lkIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoZmluYWwg
U3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50IGUsIGZpbmFsIFZNRGVsdGEg
cGFyZW50RGVsdGEsIGZpbmFsIGludCBub2RlT2Zmc2V0LCBmaW5hbCBSZXF1ZXN0TW9uaXRvciBy
bSkgew0KKyAgICBwcml2YXRlIHZvaWQgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVu
dChmaW5hbCBTdGVwcGluZ1RpbWVkT3V0RXZlbnQgZSwgZmluYWwgVk1EZWx0YSBwYXJlbnREZWx0
YSwgZmluYWwgaW50IG5vZGVPZmZzZXQsIGZpbmFsIFJlcXVlc3RNb25pdG9yIHJtKSB7DQorICAg
ICAgICAvLyBSZXBhaW50IHRoZSBzdGFjayBmcmFtZSBpbWFnZXMgdG8gaGF2ZSB0aGUgcnVubmlu
ZyBzeW1ib2wuDQorICAgICAgICAvL3BhcmVudERlbHRhLnNldEZsYWdzKHBhcmVudERlbHRhLmdl
dEZsYWdzKCkgfCBJTW9kZWxEZWx0YS5DT05URU5UKTsNCisgICAgICAgIHJtLmRvbmUoKTsNCisg
ICAgfQ0KKyAgICANCisgICAgcHJpdmF0ZSB2b2lkIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVk
T3V0RXZlbnQoZmluYWwgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCBlLCBmaW5hbCBWTURlbHRhIHBh
cmVudERlbHRhLCBmaW5hbCBpbnQgbm9kZU9mZnNldCwgZmluYWwgUmVxdWVzdE1vbml0b3Igcm0p
IHsNCiAgICAgICAgIC8vIFJlcGFpbnQgdGhlIHN0YWNrIGZyYW1lIGltYWdlcyB0byBoYXZlIHRo
ZSBydW5uaW5nIHN5bWJvbC4NCiAgICAgICAgIC8vcGFyZW50RGVsdGEuc2V0RmxhZ3MocGFyZW50
RGVsdGEuZ2V0RmxhZ3MoKSB8IElNb2RlbERlbHRhLkNPTlRFTlQpOw0KICAgICAgICAgcm0uZG9u
ZSgpOw0KQEAgLTY2MCw2ICs2NzcsOCBAQA0KIAkgKiBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIHN0
YWNrIGZyYW1lIGxpbWl0LiBJZiBubyBsaW1pdCBpcyBhcHBsaWNhYmxlIHtAbGluayBJbnRlZ2Vy
Lk1BWF9WQUxVRX0gaXMgcmV0dXJuZWQuDQogCSAqIA0KIAkgKiBAcmV0dXJuIHRoZSBjdXJyZW50
IHN0YWNrIGZyYW1lIGxpbWl0DQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQogCSAqLw0KIAlwdWJs
aWMgaW50IGdldFN0YWNrRnJhbWVMaW1pdChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsN
CiAJCWlmIChmVGVtcG9yYXJ5TGltaXRzLmNvbnRhaW5zS2V5KGV4ZWNDdHgpKSB7DQpAQCAtNjg5
LDYgKzcwOCw4IEBADQogCS8qKg0KIAkgKiBJbmNyZW1lbnQgdGhlIHN0YWNrIGZyYW1lIGxpbWl0
IGJ5IHRoZSBkZWZhdWx0IGluY3JlbWVudC4NCiAJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBkb3Vi
bGVzIHRoZSBjdXJyZW50IGxpbWl0Lg0KKwkgKiANCisJICogQHNpbmNlIDEuMQ0KIAkgKi8NCiAJ
cHVibGljIHZvaWQgaW5jcmVtZW50U3RhY2tGcmFtZUxpbWl0KElFeGVjdXRpb25ETUNvbnRleHQg
ZXhlY0N0eCkgew0KIAkJZmluYWwgaW50IHN0YWNrRnJhbWVMaW1pdD0gZ2V0U3RhY2tGcmFtZUxp
bWl0KGV4ZWNDdHgpOw0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvSURz
ZkRlYnVnVUlDb25zdGFudHMuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2Rz
ZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVp
L3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvSURzZkRlYnVnVUlDb25zdGFudHMuamF2
YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNQ0KZGlmZiAtdSAtcjEuNSBJRHNmRGVidWdVSUNv
bnN0YW50cy5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNmRGVi
dWdVSUNvbnN0YW50cy5qYXZhCTI0IEp1biAyMDA4IDIwOjAyOjU2IC0wMDAwCTEuNQ0KKysrIHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvSURzZkRlYnVnVUlDb25zdGFudHMuamF2YQk4
IEp1bCAyMDA4IDExOjExOjA0IC0wMDAwDQpAQCAtMTIsNyArMTIsOSBAQA0KIA0KIGltcG9ydCBv
cmcuZWNsaXBzZS5kZWJ1Zy51aS5JRGVidWdVSUNvbnN0YW50czsNCiANCi0NCisvKioNCisgKiBA
bm9pbXBsZW1lbnQgVGhpcyBpbnRlcmZhY2UgaXMgbm90IGludGVuZGVkIHRvIGJlIGltcGxlbWVu
dGVkIGJ5IGNsaWVudHMuDQorICovDQogcHVibGljIGludGVyZmFjZSBJRHNmRGVidWdVSUNvbnN0
YW50cyB7DQogDQogCS8qKg0KQEAgLTYwLDE1ICs2MiwzMyBAQA0KIAkgKiBJbnRlZ2VyIHByZWZl
cmVuY2UgdG8gY29udHJvbCB0aGUgbWF4aW11bSBhbW91bnQgb2Ygc3RhY2sgZnJhbWVzIHRvDQog
CSAqIHJldHJpZXZlIGZyb20gdGhlIGJhY2tlbmQuIERlZmF1bHQgdmFsdWUgaXMgMTAuDQogCSAq
IEBzZWUge0BsaW5rICNQUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRX0NCisJICogDQorCSAq
IEBzaW5jZSAxLjENCiAJICovDQogCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBSRUZfU1RB
Q0tfRlJBTUVfTElNSVQgPSAic3RhY2tGcmFtZUxpbWl0IjsgLy8kTk9OLU5MUy0xJA0KIAkNCiAJ
LyoqDQotCSAqIEJvb2xlYW4gcHJlZmVyZW5jZSB3aGV0aGVyIHRvIGFwcGx5IHRoZSBzdGFjayBm
cmFtZSBsaW1pdCBwcmVmZXJlbmNlLg0KKwkgKiBCb29sZWFuIHByZWZlcmVuY2Ugd2hldGhlciB0
byBhcHBseSB0aGUgc3RhY2sgZnJhbWUgbGltaXQgcHJlZmVyZW5jZS4gRGVmYXVsdCBpcyA8Y29k
ZT50cnVlPC9jb2RlPi4NCiAJICogQHNlZSB7QGxpbmsgI1BSRUZfU1RBQ0tfRlJBTUVfTElNSVR9
DQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQogCSAqLw0KIAlwdWJsaWMgc3RhdGljIGZpbmFsIFN0
cmluZyBQUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSA9ICJzdGFja0ZyYW1lTGltaXRFbmFi
bGUiOyAvLyROT04tTkxTLTEkDQogDQorCS8qKg0KKwkgKiBCb29sZWFuIHByZWZlcmVuY2Ugd2hl
dGhlciB0byBrZWVwIHN0ZXBwaW5nIHNwZWVkIGluIHN5bmMgd2l0aCBVSSB1cGRhdGVzLiBEZWZh
dWx0IGlzIDxjb2RlPnRydWU8L2NvZGU+Lg0KKwkgKiANCisJICogQHNpbmNlIDEuMQ0KKwkgKi8N
CisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJFRl9TWU5DSFJPTklaRURfU1RFUFBJTkdf
RU5BQkxFID0gInN5bmNocm9uaXplZFN0ZXBwaW5nRW5hYmxlIjsgLy8kTk9OLU5MUy0xJA0KKw0K
KwkvKioNCisJICogSW50ZWdlciBwcmVmZXJlbmNlIHRvIGVuZm9yY2UgYSBtaW5pbXVtIHRpbWUg
aW50ZXJ2YWwgYmV0d2VlbiBzdGVwcy4gRGVmYXVsdCBpcyA8Y29kZT4wPC9jb2RlPi4NCisJICog
DQorCSAqIEBzaW5jZSAxLjENCisJICovDQorCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBS
RUZfTUlOX1NURVBfSU5URVJWQUw9ICJtaW5TdGVwSW50ZXJ2YWwiOyAvLyROT04tTkxTLTEkDQor
DQogICAgIC8qKg0KICAgICAgKiBIZWxwIHByZWZpeGVzLg0KICAgICAgKi8NCkBAIC04NSw1ICsx
MDUsOCBAQA0KICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBERVRBSUxfUEFORV9XT1JE
X1dSQVBfQUNUSU9OID0gUFJFRklYICsgImRldGFpbF9wYW5lX3dvcmRfd3JhcF9hY3Rpb25fY29u
dGV4dCI7IC8vJE5PTi1OTFMtMSQNCiAgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVU
QUlMX1BBTkVfTUFYX0xFTkdUSF9BQ1RJT04gPSBQUkVGSVggKyAiZGV0YWlsX3BhbmVfbWF4X2xl
bmd0aF9hY3Rpb25fY29udGV4dCI7IC8vJE5PTi1OTFMtMSQNCiANCisgICAgLyoqDQorCSAqIEBz
aW5jZSAxLjENCisJICovDQogICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBSRUZFUkVO
Q0VfUEFHRT0gUFJFRklYICsgInByZWZlcmVuY2VfcGFnZV9jb250ZXh0IjsgLy8kTk9OLU5MUy0x
JA0KIH0NCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL1ByZWZlcmVuY2VJ
bml0aWFsaXplci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcu
ZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9QcmVmZXJlbmNlSW5pdGlhbGl6ZXIuamF2YSx2DQpy
ZXRyaWV2aW5nIHJldmlzaW9uIDEuNA0KZGlmZiAtdSAtcjEuNCBQcmVmZXJlbmNlSW5pdGlhbGl6
ZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvUHJlZmVyZW5jZUlu
aXRpYWxpemVyLmphdmEJMjQgSnVuIDIwMDggMjA6MDI6NTYgLTAwMDAJMS40DQorKysgc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9QcmVmZXJlbmNlSW5pdGlhbGl6ZXIuamF2YQk4IEp1
bCAyMDA4IDExOjExOjA0IC0wMDAwDQpAQCAtNTgsNSArNTgsNyBAQA0KIAkJICovDQogCQlwcmVm
cy5zZXREZWZhdWx0KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQs
IDEwKTsNCiAJCXByZWZzLnNldERlZmF1bHQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFD
S19GUkFNRV9MSU1JVF9FTkFCTEUsIHRydWUpOw0KLX0NCisJCXByZWZzLnNldERlZmF1bHQoSURz
ZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TWU5DSFJPTklaRURfU1RFUFBJTkdfRU5BQkxFLCB0cnVl
KTsNCisJCXByZWZzLnNldERlZmF1bHQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9NSU5fU1RF
UF9JTlRFUlZBTCwgMCk7DQorCX0NCiB9DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvU3RlcHBpbmdDb250cm9sbGVy
LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIuamF2
YQ0KZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lv
bmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIuamF2YQ0KLS0tIC9kZXYvbnVsbAkx
IEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvU3RlcHBpbmdDb250cm9sbGVyLmph
dmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSw0NjggQEANCisvKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwNiwgMjAwOCBXaW5kIFJpdmVy
IFN5c3RlbXMgYW5kIG90aGVycy4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dy
YW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxhYmxl
IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQorICog
d2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQN
CisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqIA0KKyAq
IENvbnRyaWJ1dG9yczoNCisgKiAgICAgV2luZCBSaXZlciBTeXN0ZW1zIC0gaW5pdGlhbCBBUEkg
YW5kIGltcGxlbWVudGF0aW9uDQorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQorcGFja2FnZSBv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVs
Ow0KKw0KK2ltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0Ow0KK2ltcG9ydCBqYXZhLnV0aWwuSGFz
aE1hcDsNCitpbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7DQoraW1wb3J0IGphdmEudXRpbC5M
aXN0Ow0KK2ltcG9ydCBqYXZhLnV0aWwuTWFwOw0KK2ltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVu
dC5TY2hlZHVsZWRGdXR1cmU7DQoraW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRpbWVVbml0
Ow0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5EYXRhUmVxdWVzdE1v
bml0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRzZkV4ZWN1dG9y
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5Ec2ZSdW5uYWJsZTsNCitp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7DQoraW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuQWJzdHJhY3RETUV2ZW50Ow0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7DQoraW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC51aS5Ec2ZEZWJ1Z1VJUGx1Z2luOw0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsNCitpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0ZXBRdWV1ZU1hbmFnZXI7DQoraW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklFeGVjdXRp
b25ETUNvbnRleHQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklS
dW5Db250cm9sLklSZXN1bWVkRE1FdmVudDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRl
YnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQ7DQoraW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLlN0YXRlQ2hhbmdlUmVhc29u
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5T
dGVwVHlwZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZUV2
ZW50SGFuZGxlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vydmlj
ZXNUcmFja2VyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9u
Ow0KKw0KKy8qKg0KKyAqIFRoaXMgY2xhc3MgYnVpbGRzIG9uIHRvcCBvZiBzdGFuZGFyZCBydW4g
Y29udHJvbCBzZXJ2aWNlIHRvIHByb3ZpZGUgDQorICogc3RlcCBxdWV1aW5nIGZ1bmN0aW9uYWxp
dHkuICBTdGVwIHF1ZXVpbmcgZXNzZW50aWFsbHkgYWxsb3dzIHVzZXIgdG8gcHJlc3MNCisgKiBh
bmQgaG9sZCB0aGUgc3RlcCBrZXkgYW5kIGFjaGlldmUgbWF4aW11bSBzdGVwcGluZyBzcGVlZC4g
IElmIHRoaXMgY2xhc3MNCisgKiBpcyB1c2VkLCBvdGhlciBzZXJ2aWNlIGltcGxlbWVudGF0aW9u
cywgc3VjaCBhcyBzdGFjayBhbmQgZXhwcmVzc2lvbnMsIGNhbiANCisgKiB1c2UgaXQgdG8gYXZv
aWQgcmVxdWVzdGluZyBkYXRhIGZyb20gZGVidWdnZXIgYmFjayBlbmQgaWYgYW5vdGhlciBzdGVw
IGlzIA0KKyAqIGFib3V0IHRvIGJlIGV4ZWN1dGVkLiANCisgKiANCisgKiBAc2luY2UgMS4xDQor
ICovDQorcHVibGljIGNsYXNzIFN0ZXBwaW5nQ29udHJvbGxlciBpbXBsZW1lbnRzIElTdGVwUXVl
dWVNYW5hZ2VyDQorew0KKyAgICAvKioNCisgICAgICogQW1vdW50IG9mIHRpbWUgaW4gbWlsbGlz
ZWNvbmRzLCB0aGF0IGl0IHRha2VzIHRoZSBJU3RlcHBpbmdUaW1lZE91dEV2ZW50IA0KKyAgICAg
KiBldmVudCB0byBiZSBpc3N1ZWQgYWZ0ZXIgYSBzdGVwIGlzIHN0YXJ0ZWQuIA0KKyAgICAgKiBA
c2VlIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQgIA0KKyAgICAgKi8NCisgICAgcHVibGljIGZpbmFs
IHN0YXRpYyBpbnQgU1RFUFBJTkdfVElNRU9VVCA9IDUwMDsNCisgICAgDQorICAgIC8qKg0KKyAg
ICAgKiBUaGUgZGVwdGggb2YgdGhlIHN0ZXAgcXVldWUuICBJbiBvdGhlciB3b3JkcywgdGhlIG1h
eGltdW0gbnVtYmVyIG9mIHN0ZXBzIA0KKyAgICAgKiB0aGF0IGFyZSBxdWV1ZWQgYmVmb3JlIHRo
ZSBzdGVwIHF1ZXVlIG1hbmFnZXIgdGhyb3dpbmcgdGhlbSBhd2F5LiANCisgICAgICovDQorICAg
IHB1YmxpYyBmaW5hbCBzdGF0aWMgaW50IFNURVBfUVVFVUVfREVQVEggPSAxOw0KKyAgICANCisg
ICAgLyoqDQorICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBnaXZlbiBjb250ZXh0IGhhcyBiZWVu
IHN0ZXBwaW5nIGZvciBzb21lIHRpbWUsIA0KKyAgICAgKiBhbmQgdGhlIFVJICh2aWV3cyBhbmQg
YWN0aW9ucykgbWF5IG5lZWQgdG8gYmUgdXBkYXRlZCBhY2NvcmRpbmdseS4gDQorICAgICAqLw0K
KwlwdWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIFN0ZXBwaW5nVGltZWRPdXRFdmVudCBleHRlbmRz
IEFic3RyYWN0RE1FdmVudDxJRXhlY3V0aW9uRE1Db250ZXh0PiB7DQorCQlwcml2YXRlIFN0ZXBw
aW5nVGltZWRPdXRFdmVudChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisJCQlzdXBl
cihleGVjQ3R4KTsNCisJCX0NCisJfQ0KKw0KKwkvKioNCisJICogSW50ZXJmYWNlIGNsaWVudHMg
aW50ZXJlc3RlZCBpbiBzdGVwcGluZyBjb250cm9sLg0KKwkgKi8NCisJcHVibGljIGludGVyZmFj
ZSBJU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQgew0KKwl9DQorDQorCXByaXZhdGUgc3RhdGlj
IGNsYXNzIFN0ZXBSZXF1ZXN0IHsNCisgICAgICAgIFN0ZXBUeXBlIGZTdGVwVHlwZTsNCisgICAg
ICAgIFN0ZXBSZXF1ZXN0KFN0ZXBUeXBlIHR5cGUpIHsNCisgICAgICAgICAgICBmU3RlcFR5cGUg
PSB0eXBlOw0KKyAgICAgICAgfQ0KKyAgICB9DQorDQorCXByaXZhdGUgZmluYWwgRHNmU2Vzc2lv
biBmU2Vzc2lvbjsNCisJcHJpdmF0ZSBmaW5hbCBEc2ZTZXJ2aWNlc1RyYWNrZXIgZlNlcnZpY2Vz
VHJhY2tlcjsNCisNCisgICAgcHJpdmF0ZSBJUnVuQ29udHJvbCBmUnVuQ29udHJvbDsNCisgICAg
cHJpdmF0ZSBpbnQgZlF1ZXVlRGVwdGggPSBTVEVQX1FVRVVFX0RFUFRIOw0KKyAgICBwcml2YXRl
IGZpbmFsIE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LExpc3Q8U3RlcFJlcXVlc3Q+PiBmU3RlcFF1
ZXVlcyA9IG5ldyBIYXNoTWFwPElFeGVjdXRpb25ETUNvbnRleHQsTGlzdDxTdGVwUmVxdWVzdD4+
KCk7DQorICAgIHByaXZhdGUgZmluYWwgTWFwPElFeGVjdXRpb25ETUNvbnRleHQsQm9vbGVhbj4g
ZlRpbWVkT3V0RmxhZ3MgPSBuZXcgSGFzaE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LEJvb2xlYW4+
KCk7DQorICAgIHByaXZhdGUgZmluYWwgTWFwPElFeGVjdXRpb25ETUNvbnRleHQsU2NoZWR1bGVk
RnV0dXJlPD8+PiBmVGltZWRPdXRGdXR1cmVzID0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlvbkRNQ29u
dGV4dCxTY2hlZHVsZWRGdXR1cmU8Pz4+KCk7DQorDQorCXByaXZhdGUgZmluYWwgTWFwPElFeGVj
dXRpb25ETUNvbnRleHQsIExvbmc+IGZMYXN0U3RlcFRpbWU9IG5ldyBIYXNoTWFwPElFeGVjdXRp
b25ETUNvbnRleHQsIExvbmc+KCk7DQorCS8qKg0KKwkgKiBNaW5pbXVtIHN0ZXAgaW50ZXJ2YWwg
aW4gbWlsbGlzZWNvbmRzLg0KKwkgKi8NCisJcHJpdmF0ZSBpbnQgZk1pblN0ZXBJbnRlcnZhbD0g
MDsNCisNCisJLyoqDQorCSAqIFdoZXRoZXIgc3luY2hyb25pemVkIHN0ZXBwaW5nIGlzIGVuYWJs
ZWQuDQorCSAqLw0KKwlwcml2YXRlIGJvb2xlYW4gZlN5bmNocm9uaXplZFN0ZXBwaW5nID0gdHJ1
ZTsNCisJDQorCS8qKg0KKwkgKiBNYXAgb2YgZXhlY3V0aW9uIGNvbnRleHRzIGZvciB3aGljaCBh
IHN0ZXAgaXMgaW4gcHJvZ3Jlc3MuDQorCSAqLw0KKwlwcml2YXRlIGZpbmFsIE1hcDxJRXhlY3V0
aW9uRE1Db250ZXh0LCBMaXN0PElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudD4+IGZTdGVwSW5Q
cm9ncmVzcyA9IG5ldyBIYXNoTWFwPElFeGVjdXRpb25ETUNvbnRleHQsIExpc3Q8SVN0ZXBwaW5n
Q29udHJvbFBhcnRpY2lwYW50Pj4oKTsNCisNCisJcHJpdmF0ZSBmaW5hbCBMaXN0PElTdGVwcGlu
Z0NvbnRyb2xQYXJ0aWNpcGFudD4gZlBhcnRpY2lwYW50cyA9IG5ldyBBcnJheUxpc3Q8SVN0ZXBw
aW5nQ29udHJvbFBhcnRpY2lwYW50PigpOw0KKw0KKw0KKyAgICBwdWJsaWMgU3RlcHBpbmdDb250
cm9sbGVyKERzZlNlc3Npb24gc2Vzc2lvbikgew0KKyAgICAgICAgZlNlc3Npb24gPSBzZXNzaW9u
Ow0KKyAgICAgICAgZlNlcnZpY2VzVHJhY2tlciA9IG5ldyBEc2ZTZXJ2aWNlc1RyYWNrZXIoRHNm
RGVidWdVSVBsdWdpbi5nZXRCdW5kbGVDb250ZXh0KCksIHNlc3Npb24uZ2V0SWQoKSk7DQorICAg
IH0NCisNCisgICAgcHVibGljIHZvaWQgZGlzcG9zZSgpIHsNCisgICAgCWlmIChmUnVuQ29udHJv
bCAhPSBudWxsKSB7DQorICAgIAkJZ2V0U2Vzc2lvbigpLnJlbW92ZVNlcnZpY2VFdmVudExpc3Rl
bmVyKHRoaXMpOw0KKyAgICAJfQ0KKyAgICAgICAgZlNlcnZpY2VzVHJhY2tlci5kaXNwb3NlKCk7
DQorICAgIH0NCisNCisJcHJpdmF0ZSBEc2ZTZXNzaW9uIGdldFNlc3Npb24oKSB7DQorCQlyZXR1
cm4gZlNlc3Npb247DQorCX0NCisNCisJcHJpdmF0ZSBEc2ZFeGVjdXRvciBnZXRFeGVjdXRvcigp
IHsNCisJCXJldHVybiBnZXRTZXNzaW9uKCkuZ2V0RXhlY3V0b3IoKTsNCisJfQ0KKwkNCisJcHJp
dmF0ZSBEc2ZTZXJ2aWNlc1RyYWNrZXIgZ2V0U2VydmljZXNUcmFja2VyKCkgew0KKwkJcmV0dXJu
IGZTZXJ2aWNlc1RyYWNrZXI7DQorCX0NCisNCisJcHJpdmF0ZSBJUnVuQ29udHJvbCBnZXRSdW5D
b250cm9sKCkgew0KKwkJaWYgKGZSdW5Db250cm9sID09IG51bGwpIHsNCisJICAgICAgICBmUnVu
Q29udHJvbCA9IGdldFNlcnZpY2VzVHJhY2tlcigpLmdldFNlcnZpY2UoSVJ1bkNvbnRyb2wuY2xh
c3MpOw0KKwkgICAgICAgIGdldFNlc3Npb24oKS5hZGRTZXJ2aWNlRXZlbnRMaXN0ZW5lcih0aGlz
LCBudWxsKTsNCisJCX0NCisJCXJldHVybiBmUnVuQ29udHJvbDsNCisJfQ0KKw0KKwkvKioNCisg
ICAgICogQ2hlY2tzIHdoZXRoZXIgYSBzdGVwIGNvbW1hbmQgY2FuIGJlIHF1ZXVlZCB1cCBmb3Ig
Z2l2ZW4gY29udGV4dC4NCisgICAgICovDQorICAgIHB1YmxpYyB2b2lkIGNhbkVucXVldWVTdGVw
KElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgU3RlcFR5cGUgc3RlcFR5cGUsIERhdGFSZXF1
ZXN0TW9uaXRvcjxCb29sZWFuPiBybSkgew0KKyAgICAgICAgaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAo
ZXhlY0N0eCwgc3RlcFR5cGUpKSB7DQorICAgICAgICAgICAgcm0uc2V0RGF0YSh0cnVlKTsNCisg
ICAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICB9IGVsc2Ugew0KKyAgICAgICAgICAgIGdl
dFJ1bkNvbnRyb2woKS5jYW5TdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlLCBybSk7DQorICAgICAgICB9
DQorICAgIH0NCisNCisgICAgcHJpdmF0ZSBib29sZWFuIGRvQ2FuRW5xdWV1ZVN0ZXAoSUV4ZWN1
dGlvbkRNQ29udGV4dCBleGVjQ3R4LCBTdGVwVHlwZSBzdGVwVHlwZSkgew0KKyAgICAgICAgcmV0
dXJuIGdldFJ1bkNvbnRyb2woKS5pc1N0ZXBwaW5nKGV4ZWNDdHgpICYmICFpc1N0ZXBwaW5nVGlt
ZWRPdXQoZXhlY0N0eCk7IA0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBDaGVjayB3aGV0
aGVyIHRoZSBuZXh0IHN0ZXAgb24gdGhlIGdpdmVuIGV4ZWN1dGlvbiBjb250ZXh0IHNob3VsZCBi
ZSBkZWxheWVkDQorICAgICAqIGJhc2VkIG9uIHRoZSBjb25maWd1cmVkIHN0ZXAgZGVsYXkuDQor
ICAgICAqIA0KKwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkgKiBAcmV0dXJuIDxjb2RlPnRydWU8L2Nv
ZGU+IGlmIHRoZSBzdGVwIHNob3VsZCBiZSBkZWxheWVkDQorCSAqLw0KKwlwcml2YXRlIGJvb2xl
YW4gc2hvdWxkRGVsYXlTdGVwKElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKyAgICAg
ICAgcmV0dXJuIGdldFN0ZXBEZWxheShleGVjQ3R4KSA+IDA7DQorCX0NCisNCisJLyoqDQorCSAq
IENvbXB1dGUgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyBiZWZvcmUgdGhlIG5leHQgc3RlcCBm
b3IgdGhlIGdpdmVuIGNvbnRleHQgbWF5IGJlIGV4ZWN1dGVkLg0KKwkgKiANCisJICogQHBhcmFt
IGV4ZWNDdHgNCisJICogQHJldHVybiAgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmVmb3Jl
IHRoZSBuZXh0IHBvc3NpYmxlIHN0ZXANCisJICovDQorCXByaXZhdGUgaW50IGdldFN0ZXBEZWxh
eShJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisJCWlmIChmTWluU3RlcEludGVydmFs
ID4gMCkgew0KKwkgICAgICAgIGZvciAoSUV4ZWN1dGlvbkRNQ29udGV4dCBsYXN0U3RlcEN0eCA6
IGZMYXN0U3RlcFRpbWUua2V5U2V0KCkpIHsNCisJICAgICAgICAgICAgaWYgKGV4ZWNDdHguZXF1
YWxzKGxhc3RTdGVwQ3R4KSB8fCBETUNvbnRleHRzLmlzQW5jZXN0b3JPZihleGVjQ3R4LCBsYXN0
U3RlcEN0eCkpIHsNCisJICAgICAgICAgICAgICAgIGxvbmcgbm93ID0gU3lzdGVtLmN1cnJlbnRU
aW1lTWlsbGlzKCk7DQorCQkJCQlpbnQgZGVsYXk9IChpbnQpIChmTGFzdFN0ZXBUaW1lLmdldChs
YXN0U3RlcEN0eCkgKyBmTWluU3RlcEludGVydmFsIC0gbm93KTsNCisJCQkJCXJldHVybiBNYXRo
Lm1heChkZWxheSwgMCk7DQorCSAgICAgICAgICAgIH0NCisJICAgICAgICB9DQorCQl9DQorICAg
ICAgICByZXR1cm4gMDsNCisJfQ0KKw0KKwlwcml2YXRlIHZvaWQgdXBkYXRlTGFzdFN0ZXBUaW1l
KElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKwkJaWYgKGZNaW5TdGVwSW50ZXJ2YWwg
PiAwKSB7DQorCSAgICAgICAgbG9uZyBub3cgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsN
CisJCQlmTGFzdFN0ZXBUaW1lLnB1dChleGVjQ3R4LCBub3cpOw0KKwkgICAgICAgIGZvciAoSUV4
ZWN1dGlvbkRNQ29udGV4dCBsYXN0U3RlcEN0eCA6IGZMYXN0U3RlcFRpbWUua2V5U2V0KCkpIHsN
CisJICAgICAgICAgICAgaWYgKGV4ZWNDdHggIT0gbGFzdFN0ZXBDdHggJiYgRE1Db250ZXh0cy5p
c0FuY2VzdG9yT2YoZXhlY0N0eCwgbGFzdFN0ZXBDdHgpKSB7DQorCQkJCQlmTGFzdFN0ZXBUaW1l
LnB1dChsYXN0U3RlcEN0eCwgbm93KTsNCisJICAgICAgICAgICAgfQ0KKwkgICAgICAgIH0NCisJ
CX0NCisJfQ0KKw0KKwkvKioNCisgICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN0ZXAgY29t
bWFuZHMgdGhhdCBhcmUgcXVldWVkIGZvciBnaXZlbiBleGVjdXRpb24NCisgICAgICogY29udGV4
dC4NCisgICAgICovDQorICAgIHB1YmxpYyBpbnQgZ2V0UGVuZGluZ1N0ZXBDb3VudChJRXhlY3V0
aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisgICAgICAgIExpc3Q8U3RlcFJlcXVlc3Q+IHN0ZXBR
dWV1ZSA9IGZTdGVwUXVldWVzLmdldChleGVjQ3R4KTsNCisgICAgICAgIGlmIChzdGVwUXVldWUg
PT0gbnVsbCkgcmV0dXJuIDA7DQorICAgICAgICByZXR1cm4gc3RlcFF1ZXVlLnNpemUoKTsNCisg
ICAgfQ0KKw0KKyAgICAvKioNCisgICAgICogQWRkcyBhIHN0ZXAgY29tbWFuZCB0byB0aGUgZXhl
Y3V0aW9uIHF1ZXVlIGZvciBnaXZlbiBjb250ZXh0Lg0KKyAgICAgKiBAcGFyYW0gZXhlY0N0eCBF
eGVjdXRpb24gY29udGV4dCB0aGF0IHNob3VsZCBwZXJmb3JtIHRoZSBzdGVwLiANCisgICAgICog
QHBhcmFtIHN0ZXBUeXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0KKyAgICAgKi8NCisgICAg
cHVibGljIHZvaWQgZW5xdWV1ZVN0ZXAoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4
LCBmaW5hbCBTdGVwVHlwZSBzdGVwVHlwZSkgew0KKyAgICAJaWYgKHNob3VsZERlbGF5U3RlcChl
eGVjQ3R4KSkgew0KKyAgICAJCWlmIChkb0NhbkVucXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBl
KSkgew0KKwkgICAgICAgICAgICBkb0VucXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKTsNCisJ
ICAgICAgICAgICAgaWYgKCFnZXRSdW5Db250cm9sKCkuaXNTdGVwcGluZyhleGVjQ3R4KSkgew0K
KwkgICAgICAgICAgICAJcHJvY2Vzc1N0ZXBRdWV1ZShleGVjQ3R4KTsNCisJICAgICAgICAgICAg
fQ0KKyAgICAJCX0NCisgICAgCX0gZWxzZSB7DQorCSAgICAgICAgZ2V0UnVuQ29udHJvbCgpLmNh
blN0ZXAoDQorCSAgICAgICAgICAgIGV4ZWNDdHgsIHN0ZXBUeXBlLCBuZXcgRGF0YVJlcXVlc3RN
b25pdG9yPEJvb2xlYW4+KGdldEV4ZWN1dG9yKCksIG51bGwpIHsNCisJICAgICAgICAgICAgICAg
IEBPdmVycmlkZQ0KKwkgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxl
dGVkKCkgew0KKwkgICAgICAgICAgICAgICAgICAgIGlmIChpc1N1Y2Nlc3MoKSAmJiBnZXREYXRh
KCkpIHsNCisJICAgICAgICAgICAgICAgICAgICAJaWYgKGlzU3RlcHBpbmdEaXNhYmxlZChleGVj
Q3R4KSkgew0KKwkJICAgICAgICAgICAgICAgICAgICAgICAgZG9FbnF1ZXVlU3RlcChleGVjQ3R4
LCBzdGVwVHlwZSk7DQorCSAgICAgICAgICAgICAgICAgICAgCX0gZWxzZSB7DQorCSAgICAgICAg
ICAgICAgICAgICAgCQlkb1N0ZXAoZXhlY0N0eCwgc3RlcFR5cGUpOw0KKwkgICAgICAgICAgICAg
ICAgICAgIAl9DQorCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb0NhbkVucXVldWVT
dGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKSkgew0KKwkgICAgICAgICAgICAgICAgICAgICAgICBkb0Vu
cXVldWVTdGVwKGV4ZWNDdHgsIHN0ZXBUeXBlKTsNCisJICAgICAgICAgICAgICAgICAgICB9DQor
CSAgICAgICAgICAgICAgICB9DQorCSAgICAgICAgICAgIH0pOw0KKyAgICAJfQ0KKyAgICB9DQor
DQorCXByaXZhdGUgdm9pZCBkb1N0ZXAoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4
LCBmaW5hbCBTdGVwVHlwZSBzdGVwVHlwZSkgew0KKwkJaWYgKGZTeW5jaHJvbml6ZWRTdGVwcGlu
Zykgew0KKwkJCWRpc2FibGVTdGVwcGluZyhleGVjQ3R4KTsNCisJCX0NCisgICAgICAgIHVwZGF0
ZUxhc3RTdGVwVGltZShleGVjQ3R4KTsNCisJCWdldFJ1bkNvbnRyb2woKS5zdGVwKGV4ZWNDdHgs
IHN0ZXBUeXBlLCBuZXcgUmVxdWVzdE1vbml0b3IoZ2V0RXhlY3V0b3IoKSwgbnVsbCkpOw0KKwl9
DQorDQorCS8qKg0KKwkgKiBFbnF1ZXVlIHRoZSBnaXZlbiBzdGVwIGZvciBsYXRlciBleGVjdXRp
b24uDQorCSAqIA0KKwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkgKiBAcGFyYW0gc3RlcFR5cGUNCisJ
ICovDQorCXByaXZhdGUgdm9pZCBkb0VucXVldWVTdGVwKGZpbmFsIElFeGVjdXRpb25ETUNvbnRl
eHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGUpIHsNCisJCUxpc3Q8U3RlcFJlcXVl
c3Q+IHN0ZXBRdWV1ZSA9IGZTdGVwUXVldWVzLmdldChleGVjQ3R4KTsNCisJCWlmIChzdGVwUXVl
dWUgPT0gbnVsbCkgew0KKwkJICAgIHN0ZXBRdWV1ZSA9IG5ldyBMaW5rZWRMaXN0PFN0ZXBSZXF1
ZXN0PigpOw0KKwkJICAgIGZTdGVwUXVldWVzLnB1dChleGVjQ3R4LCBzdGVwUXVldWUpOw0KKwkJ
fQ0KKwkJaWYgKHN0ZXBRdWV1ZS5zaXplKCkgPCBmUXVldWVEZXB0aCkgew0KKwkJICAgIHN0ZXBR
dWV1ZS5hZGQobmV3IFN0ZXBSZXF1ZXN0KHN0ZXBUeXBlKSk7DQorCQl9DQorCX0NCisNCisgICAg
LyoqDQorICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgc3RlcCBpbnN0cnVjdGlvbiBmb3IgdGhl
IGdpdmVuIGNvbnRleHQgaGFzIHRpbWVkIG91dC4NCisgICAgICovDQorICAgIHB1YmxpYyBib29s
ZWFuIGlzU3RlcHBpbmdUaW1lZE91dChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisg
ICAgICAgIGZvciAoSUV4ZWN1dGlvbkRNQ29udGV4dCB0aW1lZE91dEN0eCA6IGZUaW1lZE91dEZs
YWdzLmtleVNldCgpKSB7DQorICAgICAgICAgICAgaWYgKGV4ZWNDdHguZXF1YWxzKHRpbWVkT3V0
Q3R4KSB8fCBETUNvbnRleHRzLmlzQW5jZXN0b3JPZihleGVjQ3R4LCB0aW1lZE91dEN0eCkpIHsN
CisgICAgICAgICAgICAgICAgcmV0dXJuIGZUaW1lZE91dEZsYWdzLmdldCh0aW1lZE91dEN0eCk7
DQorICAgICAgICAgICAgfQ0KKyAgICAgICAgfQ0KKyAgICAgICAgcmV0dXJuIGZhbHNlOw0KKyAg
ICB9DQorICAgIA0KKw0KKyAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCisNCisgICAgQERzZlNlcnZp
Y2VFdmVudEhhbmRsZXIgDQorICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChmaW5hbCBJ
U3VzcGVuZGVkRE1FdmVudCBlKSB7DQorICAgICAgICAvLyBUYWtlIGNhcmUgb2YgdGhlIHN0ZXBw
aW5nIHRpbWUgb3V0DQorICAgICAgICBmVGltZWRPdXRGbGFncy5yZW1vdmUoZS5nZXRETUNvbnRl
eHQoKSk7DQorICAgICAgICBTY2hlZHVsZWRGdXR1cmU8Pz4gZnV0dXJlID0gZlRpbWVkT3V0RnV0
dXJlcy5yZW1vdmUoZS5nZXRETUNvbnRleHQoKSk7IA0KKyAgICAgICAgaWYgKGZ1dHVyZSAhPSBu
dWxsKSBmdXR1cmUuY2FuY2VsKGZhbHNlKTsNCisgICAgICAgIA0KKyAgICAgICAgLy8gQ2hlY2sg
aWYgdGhlcmUncyBhIHN0ZXAgcGVuZGluZywgaWYgc28gZXhlY3V0ZSBpdA0KKyAgICAgICAgcHJv
Y2Vzc1N0ZXBRdWV1ZShlLmdldERNQ29udGV4dCgpKTsNCisgICAgfQ0KKw0KKwkvKioNCisJICog
UHJvY2VzcyBuZXh0IHN0ZXAgb24gcXVldWUgaWYgYW55Lg0KKwkgKiBAcGFyYW0gZXhlY0N0eA0K
KwkgKi8NCisJcHJpdmF0ZSB2b2lkIHByb2Nlc3NTdGVwUXVldWUoZmluYWwgSUV4ZWN1dGlvbkRN
Q29udGV4dCBleGVjQ3R4KSB7DQorCQlpZiAoaXNTdGVwcGluZ0Rpc2FibGVkKGV4ZWNDdHgpKSB7
DQorCQkJcmV0dXJuOw0KKwkJfQ0KKwkJaWYgKGZTdGVwUXVldWVzLmNvbnRhaW5zS2V5KGV4ZWND
dHgpKSB7DQorCQkJZmluYWwgaW50IHN0ZXBEZWxheSA9IGdldFN0ZXBEZWxheShleGVjQ3R4KTsN
CisJCQlpZiAoc3RlcERlbGF5ID4gMCkgew0KKwkJCQlnZXRFeGVjdXRvcigpLnNjaGVkdWxlKG5l
dyBEc2ZSdW5uYWJsZSgpIHsNCisJCQkJCXB1YmxpYyB2b2lkIHJ1bigpIHsNCisJCQkJCQlwcm9j
ZXNzU3RlcFF1ZXVlKGV4ZWNDdHgpOw0KKwkJCQkJfQ0KKwkJCQl9LCBzdGVwRGVsYXksIFRpbWVV
bml0Lk1JTExJU0VDT05EUyk7DQorCQkJCXJldHVybjsNCisJCQl9DQorICAgICAgICAgICAgTGlz
dDxTdGVwUmVxdWVzdD4gcXVldWUgPSBmU3RlcFF1ZXVlcy5nZXQoZXhlY0N0eCk7DQorICAgICAg
ICAgICAgZmluYWwgU3RlcFJlcXVlc3QgcmVxdWVzdCA9IHF1ZXVlLnJlbW92ZShxdWV1ZS5zaXpl
KCkgLSAxKTsNCisgICAgICAgICAgICBpZiAocXVldWUuaXNFbXB0eSgpKSBmU3RlcFF1ZXVlcy5y
ZW1vdmUoZXhlY0N0eCk7DQorICAgICAgICAgICAgZ2V0UnVuQ29udHJvbCgpLmNhblN0ZXAoDQor
ICAgICAgICAgICAgICAgIGV4ZWNDdHgsIHJlcXVlc3QuZlN0ZXBUeXBlLCANCisgICAgICAgICAg
ICAgICAgbmV3IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihnZXRFeGVjdXRvcigpLCBudWxs
KSB7DQorICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUNCisgICAgICAgICAgICAgICAgICAg
IHByb3RlY3RlZCB2b2lkIGhhbmRsZUNvbXBsZXRlZCgpIHsNCisgICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoaXNTdWNjZXNzKCkgJiYgZ2V0RGF0YSgpKSB7DQorICAgICAgICAgICAgICAgICAg
ICAJCWRvU3RlcChleGVjQ3R4LCByZXF1ZXN0LmZTdGVwVHlwZSk7DQorICAgICAgICAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHdo
YXRldmVyIHJlYXNvbiB3ZSBjYW4ndCBzdGVwIGFueW1vcmUsIHNvIGNsZWFyIG91dA0KKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc3RlcCBxdWV1ZS4NCisgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZlN0ZXBRdWV1ZXMucmVtb3ZlKGV4ZWNDdHgpOw0KKyAgICAgICAgICAg
ICAgICAgICAgICAgIH0NCisgICAgICAgICAgICAgICAgICAgIH0NCisgICAgICAgICAgICAgICAg
fSk7DQorICAgICAgICB9DQorCX0NCisNCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIgDQor
ICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChmaW5hbCBJUmVzdW1lZERNRXZlbnQgZSkg
ew0KKyAgICAgICAgaWYgKGUuZ2V0UmVhc29uKCkuZXF1YWxzKFN0YXRlQ2hhbmdlUmVhc29uLlNU
RVApKSB7DQorICAgICAgICAgICAgZlRpbWVkT3V0RmxhZ3MucHV0KGUuZ2V0RE1Db250ZXh0KCks
IEJvb2xlYW4uRkFMU0UpOw0KKyAgICAgICAgICAgIC8vIFdlIHNob3VsZG4ndCBoYXZlIGEgc3Rl
cHBpbmcgdGltZW91dCBydW5uaW5nIHVubGVzcyB3ZSBnZXQgdHdvIA0KKyAgICAgICAgICAgIC8v
IHN0ZXBwaW5nIGV2ZW50cyBpbiBhIHJvdyB3aXRob3V0IGEgc3VzcGVuZGVkLCB3aGljaCB3b3Vs
ZCBiZSBhIA0KKyAgICAgICAgICAgIC8vIHByb3RvY29sIGVycm9yLg0KKyAgICAgICAgICAgIGFz
c2VydCAhZlRpbWVkT3V0RnV0dXJlcy5jb250YWluc0tleShlLmdldERNQ29udGV4dCgpKTsNCisg
ICAgICAgICAgICBmVGltZWRPdXRGdXR1cmVzLnB1dCgNCisgICAgICAgICAgICAgICAgZS5nZXRE
TUNvbnRleHQoKSwgDQorICAgICAgICAgICAgICAgIGdldEV4ZWN1dG9yKCkuc2NoZWR1bGUoDQor
ICAgICAgICAgICAgICAgICAgICBuZXcgRHNmUnVubmFibGUoKSB7IHB1YmxpYyB2b2lkIHJ1bigp
IHsNCisgICAgICAgICAgICAgICAgICAgICAgICBmVGltZWRPdXRGdXR1cmVzLnJlbW92ZShlLmdl
dERNQ29udGV4dCgpKTsNCisNCisgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0U2Vzc2lv
bigpLmlzQWN0aXZlKCkpIHsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXNzdWUg
dGhlIHN0ZXBwaW5nIHRpbWUtb3V0IGV2ZW50Lg0KKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBnZXRTZXNzaW9uKCkuZGlzcGF0Y2hFdmVudCgNCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIG5ldyBTdGVwcGluZ1RpbWVkT3V0RXZlbnQoZS5nZXRETUNvbnRleHQoKSksIA0KKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCk7DQorICAgICAgICAgICAgICAgICAg
ICAgICAgfQ0KKyAgICAgICAgICAgICAgICAgICAgfX0sDQorICAgICAgICAgICAgICAgICAgICBT
VEVQUElOR19USU1FT1VULCBUaW1lVW5pdC5NSUxMSVNFQ09ORFMpDQorICAgICAgICAgICAgICAg
ICk7DQorICAgICAgICAgICAgDQorICAgICAgICB9IA0KKyAgICB9ICAgIA0KKw0KKyAgICBARHNm
U2VydmljZUV2ZW50SGFuZGxlciANCisgICAgcHVibGljIHZvaWQgZXZlbnREaXNwYXRjaGVkKFN0
ZXBwaW5nVGltZWRPdXRFdmVudCBlKSB7DQorICAgICAgICBmVGltZWRPdXRGbGFncy5wdXQoZS5n
ZXRETUNvbnRleHQoKSwgQm9vbGVhbi5UUlVFKTsNCisgICAgICAgIGVuYWJsZVN0ZXBwaW5nKGUu
Z2V0RE1Db250ZXh0KCkpOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBFbmFibGVzIG9y
IGRpc2FibGVzIHN5bmNocm9uaXplZCBzdGVwcGluZyBtb2RlLg0KKyAgICAgKiBJbiBzeW5jaHJv
bml6ZWQgbW9kZSwgYWZ0ZXIgYSBzdGVwIGNvbW1hbmQgaXMgaXNzdWVkLA0KKyAgICAgKiBzdWJz
ZXF1ZW50IHN0ZXBzIGFyZSBibG9ja2VkIGZvciB0aGUgZXhlY3V0aW9uIGNvbnRleHQNCisgICAg
ICogdW50aWwge0BsaW5rIGRvbmVTdGVwcGluZygpfSBpcyBjYWxsZWQgdG8gaW5kaWNhdGUgY29t
cGxldGlvbg0KKyAgICAgKiBvZiB0aGUgcHJvY2Vzc2luZyBmb3IgdGhlIGxhc3Qgc3RlcC4NCisg
ICAgICogDQorICAgICAqIEBwYXJhbSBlbmFibGUNCisgICAgICovDQorICAgIHB1YmxpYyB2b2lk
IGVuYWJsZVN5bmNocm9uaXplZFN0ZXBwaW5nKGJvb2xlYW4gZW5hYmxlKSB7DQorICAgIAlmU3lu
Y2hyb25pemVkU3RlcHBpbmcgPSBlbmFibGU7DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAq
IENvbmZpZ3VyZSB0aGUgbWluaW11bSB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRvIHdhaXQgYmV0
d2VlbiBzdGVwcy4NCisgICAgICogDQorICAgICAqIEBwYXJhbSBpbnRlcnZhbA0KKyAgICAgKi8N
CisgICAgcHVibGljIHZvaWQgc2V0TWluaW11bVN0ZXBJbnRlcnZhbChpbnQgaW50ZXJ2YWwpIHsN
CisgICAgCWZNaW5TdGVwSW50ZXJ2YWwgPSBpbnRlcnZhbDsNCisgICAgfQ0KKyAgICANCisgICAg
cHVibGljIHZvaWQgYWRkU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQoSVN0ZXBwaW5nQ29udHJv
bFBhcnRpY2lwYW50IHBhcnRpY2lwYW50KSB7DQorICAgIAlmUGFydGljaXBhbnRzLmFkZChwYXJ0
aWNpcGFudCk7DQorICAgIH0NCisNCisgICAgcHVibGljIHZvaWQgcmVtb3ZlU3RlcHBpbmdDb250
cm9sUGFydGljaXBhbnQoSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50IHBhcnRpY2lwYW50KSB7
DQorICAgIAlmUGFydGljaXBhbnRzLnJlbW92ZShwYXJ0aWNpcGFudCk7DQorICAgIAkvLyBUT0RP
IHJlbW92ZSBmcm9tIHN0ZXBzIGluIHByb2dyZXNzDQorICAgIH0NCisNCisgICAgLyoqDQorICAg
ICAqIEluZGljYXRlIHRoYXQgcGFydGljaXBhbnQgaGFzIGNvbXBsZXRlZCBwcm9jZXNzaW5nIG9m
IHRoZSBsYXN0IHN0ZXAuDQorICAgICAqIA0KKyAgICAgKiBAcGFyYW0gZXhlY0N0eA0KKyAgICAg
Ki8NCisgICAgcHVibGljIHZvaWQgZG9uZVN0ZXBwaW5nKGZpbmFsIElFeGVjdXRpb25ETUNvbnRl
eHQgZXhlY0N0eCwgSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50IHBhcnRpY2lwYW50KSB7DQor
ICAgIAlMaXN0PElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudD4gcGFydGljaXBhbnRzID0gZlN0
ZXBJblByb2dyZXNzLmdldChleGVjQ3R4KTsNCisgICAgCWlmIChwYXJ0aWNpcGFudHMgIT0gbnVs
bCkgew0KKyAgICAJCXBhcnRpY2lwYW50cy5yZW1vdmUocGFydGljaXBhbnQpOw0KKyAgICAJCWlm
IChwYXJ0aWNpcGFudHMuaXNFbXB0eSgpKSB7DQorICAgIAkJCWRvbmVTdGVwcGluZyhleGVjQ3R4
KTsNCisgICAgCQl9DQorICAgIAl9DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIEluZGlj
YXRlIHRoYXQgcHJvY2Vzc2luZyBvZiB0aGUgbGFzdCBzdGVwIGhhcyBjb21wbGV0ZWQgYW5kDQor
ICAgICAqIHRoZSBuZXh0IHN0ZXAgY2FuIGJlIGlzc3VlZC4NCisgICAgICogDQorICAgICAqIEBw
YXJhbSBleGVjQ3R4DQorICAgICAqLw0KKyAgICBwdWJsaWMgdm9pZCBkb25lU3RlcHBpbmcoZmlu
YWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorICAgIAlpZiAoZlN5bmNocm9uaXpl
ZFN0ZXBwaW5nKSB7DQorICAgIAkJZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZSdW5uYWJs
ZSgpIHsNCisgICAgCQkJcHVibGljIHZvaWQgcnVuKCkgew0KKyAgICAJCQkJZW5hYmxlU3RlcHBp
bmcoZXhlY0N0eCk7DQorICAgIAkJCQlwcm9jZXNzU3RlcFF1ZXVlKGV4ZWNDdHgpOw0KKyAgICAJ
CQl9DQorICAgIAkJfSk7DQorICAgIAl9DQorICAgIH0NCisNCisJLyoqDQorCSAqIERpc2FibGUg
c3RlcHBpbmcgZm9yIHRoZSBnaXZlbiBleGVjdXRpb24gY29udGV4dC4NCisJICogDQorCSAqIEBw
YXJhbSBleGVjQ3R4DQorCSAqLw0KKwlwcml2YXRlIHZvaWQgZGlzYWJsZVN0ZXBwaW5nKElFeGVj
dXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKyAgICAgICAgZlN0ZXBJblByb2dyZXNzLnB1dChl
eGVjQ3R4LCBuZXcgQXJyYXlMaXN0PElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudD4oZlBhcnRp
Y2lwYW50cykpOw0KKwl9DQorDQorCS8qKg0KKwkgKiBFbmFibGUgc3RlcHBpbmcgZm9yIHRoZSBn
aXZlbiBleGVjdXRpb24gY29udGV4dC4NCisJICogDQorCSAqIEBwYXJhbSBleGVjQ3R4DQorCSAq
Lw0KKwlwcml2YXRlIHZvaWQgZW5hYmxlU3RlcHBpbmcoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4
dCBleGVjQ3R4KSB7DQorICAgICAgICBmU3RlcEluUHJvZ3Jlc3MucmVtb3ZlKGV4ZWNDdHgpOw0K
KwkJZm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGRpc2FibGVkQ3R4IDogZlN0ZXBJblByb2dyZXNz
LmtleVNldCgpKSB7DQorCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGRpc2FibGVkQ3R4
LCBleGVjQ3R4KSkgew0KKwkJCQlmU3RlcEluUHJvZ3Jlc3MucmVtb3ZlKGRpc2FibGVkQ3R4KTsN
CisJCQl9DQorCQl9DQorCX0NCisNCisJcHJpdmF0ZSBib29sZWFuIGlzU3RlcHBpbmdEaXNhYmxl
ZChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisgICAgICAgIGJvb2xlYW4gZGlzYWJs
ZWQ9IGZTdGVwSW5Qcm9ncmVzcy5jb250YWluc0tleShleGVjQ3R4KTsNCisgICAgICAgIGlmIChk
aXNhYmxlZCkgew0KKyAgICAgICAgCXJldHVybiB0cnVlOw0KKyAgICAgICAgfQ0KKyAgICAgICAg
Zm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGRpc2FibGVkQ3R4IDogZlN0ZXBJblByb2dyZXNzLmtl
eVNldCgpKSB7DQorCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4ZWNDdHgsIGRpc2Fi
bGVkQ3R4KSkgew0KKwkJCQlyZXR1cm4gdHJ1ZTsNCisJCQl9DQorCQl9DQorICAgICAgICByZXR1
cm4gZmFsc2U7DQorCX0NCisNCit9DQojUCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcNCkluZGV4
OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5q
YXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5k
c2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcvc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy9zZXJ2aWNlL1N0ZXBRdWV1ZU1hbmFnZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlz
aW9uIDEuOA0KZGlmZiAtdSAtcjEuOCBTdGVwUXVldWVNYW5hZ2VyLmphdmENCi0tLSBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5qYXZhCTMwIE1h
eSAyMDA4IDIyOjU3OjQ0IC0wMDAwCTEuOA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvc2VydmljZS9TdGVwUXVldWVNYW5hZ2VyLmphdmEJOCBKdWwgMjAwOCAxMToxMTowNiAtMDAw
MA0KQEAgLTQxLDggKzQxLDExIEBADQogICogaXMgdXNlZCwgb3RoZXIgc2VydmljZSBpbXBsZW1l
bnRhdGlvbnMsIHN1Y2ggYXMgc3RhY2sgYW5kIGV4cHJlc3Npb25zLCBjYW4gDQogICogdXNlIGl0
IHRvIGF2b2lkIHJlcXVlc3RpbmcgZGF0YSBmcm9tIGRlYnVnZ2VyIGJhY2sgZW5kIGlmIGFub3Ro
ZXIgc3RlcCBpcyANCiAgKiBhYm91dCB0byBiZSBleGVjdXRlZC4gDQorICogDQorICogQGRlcHJl
Y2F0ZWQgRnVuY3Rpb25hbGl0eSBoYXMgYmVlbiBpbnRlZ3JhdGVkIGluIHRoZSBVSSBsYXllci4N
CiAgKi8NCi1wdWJsaWMgY2xhc3MgU3RlcFF1ZXVlTWFuYWdlciBleHRlbmRzIEFic3RyYWN0RHNm
U2VydmljZQ0KK0BEZXByZWNhdGVkDQorcHVibGljIGNsYXNzIFN0ZXBRdWV1ZU1hbmFnZXIgZXh0
ZW5kcyBBYnN0cmFjdERzZlNlcnZpY2UgaW1wbGVtZW50cyBJU3RlcFF1ZXVlTWFuYWdlcg0KIHsN
CiAgICAgLyoqDQogICAgICAqIEFtb3VudCBvZiB0aW1lIGluIG1pbGlzZWNvbmRzLCB0aGF0IGl0
IHRha2VzIHRoZSBJU3RlcHBpbmdUaW1lZE91dEV2ZW50IA0KQEAgLTExMyw5ICsxMTYsOSBAQA0K
ICAgICAgICAgcmV0dXJuIERzZkRlYnVnUGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKTsNCiAgICAg
fQ0KIA0KLSAgICAvKioNCi0gICAgICogQ2hlY2tzIHdoZXRoZXIgYSBzdGVwIGNvbW1hbmQgY2Fu
IGJlIHF1ZXVlZCB1cCBmb3IgZ2l2ZW4gY29udGV4dC4NCi0gICAgICovDQorICAgIC8qDQorCSAq
IEBzZWUgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0ZXBRdWV1ZU1hbmFnZXIj
Y2FuRW5xdWV1ZVN0ZXAob3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRy
b2wuSUV4ZWN1dGlvbkRNQ29udGV4dCwgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2Uu
SVJ1bkNvbnRyb2wuU3RlcFR5cGUsIG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRhdGFS
ZXF1ZXN0TW9uaXRvcikNCisJICovDQogICAgIHB1YmxpYyB2b2lkIGNhbkVucXVldWVTdGVwKElF
eGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgU3RlcFR5cGUgc3RlcFR5cGUsIERhdGFSZXF1ZXN0
TW9uaXRvcjxCb29sZWFuPiBybSkgew0KICAgICAgICAgaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAoZXhl
Y0N0eCwgc3RlcFR5cGUpKSB7DQogICAgICAgICAgICAgcm0uc2V0RGF0YSh0cnVlKTsNCkBAIC0x
MzksMTEgKzE0Miw5IEBADQogICAgICAgICByZXR1cm4gc3RlcFF1ZXVlLnNpemUoKTsNCiAgICAg
fQ0KIA0KLSAgICAvKioNCi0gICAgICogQWRkcyBhIHN0ZXAgY29tbWFuZCB0byB0aGUgZXhlY3V0
aW9uIHF1ZXVlIGZvciBnaXZlbiBjb250ZXh0Lg0KLSAgICAgKiBAcGFyYW0gZXhlY0N0eCBFeGVj
dXRpb24gY29udGV4dCB0aGF0IHNob3VsZCBwZXJmb3JtIHRoZSBzdGVwLiANCi0gICAgICogQHBh
cmFtIHN0ZXBUeXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0KLSAgICAgKi8NCisgICAgLyoN
CisJICogQHNlZSBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RlcFF1ZXVlTWFu
YWdlciNlbnF1ZXVlU3RlcChvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29u
dHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0LCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vydmlj
ZS5JUnVuQ29udHJvbC5TdGVwVHlwZSkNCisJICovDQogICAgIHB1YmxpYyB2b2lkIGVucXVldWVT
dGVwKGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3Rl
cFR5cGUpIHsNCiAgICAgICAgIGZSdW5Db250cm9sLmNhblN0ZXAoDQogICAgICAgICAgICAgZXhl
Y0N0eCwgc3RlcFR5cGUsIG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4oZ2V0RXhlY3V0
b3IoKSwgbnVsbCkgew0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2Vydmlj
ZS9JU3RlcFF1ZXVlTWFuYWdlci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2VyLmphdmENCmRpZmYg
LU4gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2Vy
LmphdmENCi0tLSAvZGV2L251bGwJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KKysrIHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9JU3RlcFF1ZXVlTWFuYWdlci5qYXZhCTEg
SmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCkBAIC0wLDAgKzEsMzMgQEANCisvKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwOCBXaW5kIFJpdmVyIFN5c3RlbXMsIElu
Yy4gYW5kIG90aGVycy4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5k
IHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVy
IHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQorICogd2hpY2gg
YWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCisgKiBo
dHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqDQorICogQ29udHJp
YnV0b3JzOg0KKyAqICAgICBXaW5kIFJpdmVyIFN5c3RlbXMgLSBpbml0aWFsIEFQSSBhbmQgaW1w
bGVtZW50YXRpb24NCisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCitwYWNrYWdlIG9yZy5lY2xp
cHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
Y29uY3VycmVudC5EYXRhUmVxdWVzdE1vbml0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRz
Zi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ7DQoraW1wb3J0
IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLlN0ZXBUeXBlOw0K
Kw0KKy8qKg0KKyAqIEBzaW5jZSAxLjENCisgKi8NCitwdWJsaWMgaW50ZXJmYWNlIElTdGVwUXVl
dWVNYW5hZ2VyIHsNCisJLyoqDQorCSAqIENoZWNrcyB3aGV0aGVyIGEgc3RlcCBjb21tYW5kIGNh
biBiZSBxdWV1ZWQgdXAgZm9yIGdpdmVuIGNvbnRleHQuDQorCSAqLw0KKwlwdWJsaWMgYWJzdHJh
Y3Qgdm9pZCBjYW5FbnF1ZXVlU3RlcChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgsIFN0ZXBU
eXBlIHN0ZXBUeXBlLCBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4gcm0pOw0KKw0KKwkvKioN
CisJICogQWRkcyBhIHN0ZXAgY29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVlIGZvciBnaXZl
biBjb250ZXh0Lg0KKwkgKiBAcGFyYW0gZXhlY0N0eCBFeGVjdXRpb24gY29udGV4dCB0aGF0IHNo
b3VsZCBwZXJmb3JtIHRoZSBzdGVwLiANCisJICogQHBhcmFtIHN0ZXBUeXBlIFR5cGUgb2Ygc3Rl
cCB0byBleGVjdXRlLg0KKwkgKi8NCisJcHVibGljIGFic3RyYWN0IHZvaWQgZW5xdWV1ZVN0ZXAo
ZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVwVHlwZSBzdGVwVHlw
ZSk7DQorDQorfQ0KI1Agb3JnLmVjbGlwc2UuZGQuZ2RiDQpJbmRleDogc3JjL29yZy9lY2xpcHNl
L2RkL2dkYi9pbnRlcm5hbC9wcm92aXNpb25hbC9sYXVuY2hpbmcvU2VydmljZXNMYXVuY2hTZXF1
ZW5jZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBz
ZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5nZGIvc3JjL29yZy9lY2xpcHNlL2RkL2dk
Yi9pbnRlcm5hbC9wcm92aXNpb25hbC9sYXVuY2hpbmcvU2VydmljZXNMYXVuY2hTZXF1ZW5jZS5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS45DQpkaWZmIC11IC1yMS45IFNlcnZpY2VzTGF1
bmNoU2VxdWVuY2UuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZpY2VzTGF1bmNoU2VxdWVuY2UuamF2YQkzIEp1bCAyMDA4
IDE5OjA1OjIwIC0wMDAwCTEuOQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwv
cHJvdmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZpY2VzTGF1bmNoU2VxdWVuY2UuamF2YQk4IEp1bCAy
MDA4IDExOjExOjA3IC0wMDAwDQpAQCAtMjQsNyArMjQsNiBAQA0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVNvdXJjZUxvb2t1cDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
ZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2Yuc2VydmljZS5Ec2ZTZXNzaW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5nZGIuaW50ZXJu
YWwucHJvdmlzaW9uYWwuc2VydmljZS5jb21tYW5kLkdEQkNvbnRyb2w7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmdkYi5pbnRlcm5hbC5wcm92aXNpb25hbC5zZXJ2aWNlLmNvbW1hbmQuR0RCQ29u
dHJvbC5TZXNzaW9uVHlwZTsNCkBAIC01NiwxMCArNTUsNiBAQA0KICAgICAgICAgfX0sDQogICAg
ICAgICBuZXcgU3RlcCgpIHsgQE92ZXJyaWRlDQogICAgICAgICBwdWJsaWMgdm9pZCBleGVjdXRl
KFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7DQotICAgICAgICAgICAgbmV3IFN0ZXBR
dWV1ZU1hbmFnZXIoZlNlc3Npb24pLmluaXRpYWxpemUocmVxdWVzdE1vbml0b3IpOw0KLSAgICAg
ICAgfX0sDQotICAgICAgICBuZXcgU3RlcCgpIHsgQE92ZXJyaWRlDQotICAgICAgICBwdWJsaWMg
dm9pZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7DQogICAgICAgICAJ
ZkxhdW5jaC5nZXRTZXJ2aWNlRmFjdG9yeSgpLmNyZWF0ZVNlcnZpY2UoZlNlc3Npb24sIElNZW1v
cnkuY2xhc3MpLmluaXRpYWxpemUocmVxdWVzdE1vbml0b3IpOw0KICAgICAgICAgfX0sDQogICAg
ICAgICBuZXcgU3RlcCgpIHsgQE92ZXJyaWRlDQojUCBvcmcuZWNsaXBzZS5kZC5kc2YudWkNCklu
ZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9BYnN0cmFjdFZNUHJvdmlk
ZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2Uu
ZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1Qcm92aWRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS4yNQ0KZGlmZiAtdSAtcjEuMjUgQWJzdHJhY3RWTVByb3ZpZGVyLmphdmENCi0tLSBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9BYnN0cmFjdFZNUHJvdmlkZXIuamF2
YQkyNCBKdW4gMjAwOCAxODoxMzoxMyAtMDAwMAkxLjI1DQorKysgc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTVByb3ZpZGVyLmphdmEJOCBKdWwgMjAwOCAxMTox
MTowOSAtMDAwMA0KQEAgLTIwLDYgKzIwLDcgQEANCiBpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJl
bnQuRXhlY3V0b3I7DQogaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlJlamVjdGVkRXhlY3V0
aW9uRXhjZXB0aW9uOw0KIA0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5D
b3VudGluZ1JlcXVlc3RNb25pdG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3Vy
cmVudC5EYXRhUmVxdWVzdE1vbml0b3I7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25j
dXJyZW50LklEc2ZTdGF0dXNDb25zdGFudHM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5j
b25jdXJyZW50LlJlcXVlc3RNb25pdG9yOw0KQEAgLTYwLDcgKzYxLDcgQEANCiAgKiBAc2VlIElW
TU5vZGUNCiAgKi8NCiBAU3VwcHJlc3NXYXJuaW5ncygicmVzdHJpY3Rpb24iKQ0KLWFic3RyYWN0
IHB1YmxpYyBjbGFzcyBBYnN0cmFjdFZNUHJvdmlkZXIgaW1wbGVtZW50cyBJVk1Qcm92aWRlcg0K
K2Fic3RyYWN0IHB1YmxpYyBjbGFzcyBBYnN0cmFjdFZNUHJvdmlkZXIgaW1wbGVtZW50cyBJVk1Q
cm92aWRlciwgSVZNRXZlbnRMaXN0ZW5lcg0KIHsNCiAgICAgDQogICAgIC8qKiBSZWZlcmVuY2Ug
dG8gdGhlIFZNIGFkYXB0ZXIgdGhhdCBvd25zIHRoaXMgcHJvdmlkZXIgKi8NCkBAIC0yMDQsOCAr
MjA1LDIwIEBADQogICAgICAqIFByb2Nlc3NlcyB0aGUgZ2l2ZW4gZXZlbnQgaW4gdGhlIGdpdmVu
IHByb3ZpZGVyLCBzZW5kaW5nIG1vZGVsIA0KICAgICAgKiBkZWx0YXMgaWYgbmVjZXNzYXJ5Lg0K
ICAgICAgKi8NCi0gICAgcHVibGljIHZvaWQgaGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50
KSB7DQotICAgICAgICBmb3IgKGZpbmFsIElWTU1vZGVsUHJveHkgcHJveHlTdHJhdGVneSA6IGdl
dEFjdGl2ZU1vZGVsUHJveGllcygpKSB7DQorCXB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KGZpbmFs
IE9iamVjdCBldmVudCkgew0KKyAgICAJaGFuZGxlRXZlbnQoZXZlbnQsIG51bGwpOw0KKyAgICB9
DQorCQ0KKyAgICAvKioNCisgICAgICoge0Bpbmhlcml0RG9jfQ0KKwkgKiBAc2luY2UgMS4xDQor
CSAqLw0KKyAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChmaW5hbCBPYmplY3QgZXZlbnQsIFJl
cXVlc3RNb25pdG9yIHJtKSB7DQorICAgIAlDb3VudGluZ1JlcXVlc3RNb25pdG9yIGNybSA9IG5l
dyBDb3VudGluZ1JlcXVlc3RNb25pdG9yKGdldEV4ZWN1dG9yKCksIHJtKTsNCisgICAgICAgIGZp
bmFsIExpc3Q8SVZNTW9kZWxQcm94eT4gYWN0aXZlTW9kZWxQcm94aWVzPSBuZXcgQXJyYXlMaXN0
PElWTU1vZGVsUHJveHk+KGdldEFjdGl2ZU1vZGVsUHJveGllcygpKTsNCisgICAgCWNybS5zZXRE
b25lQ291bnQoYWN0aXZlTW9kZWxQcm94aWVzLnNpemUoKSk7DQorDQorICAgIAlmb3IgKGZpbmFs
IElWTU1vZGVsUHJveHkgcHJveHlTdHJhdGVneSA6IGFjdGl2ZU1vZGVsUHJveGllcykgew0KICAg
ICAgICAgICAgIGlmIChwcm94eVN0cmF0ZWd5LmlzRGVsdGFFdmVudChldmVudCkpIHsNCiAgICAg
ICAgICAgICAgICAgaWYgKCFmRXZlbnRRdWV1ZXMuY29udGFpbnNLZXkocHJveHlTdHJhdGVneSkp
IHsNCiAgICAgICAgICAgICAgICAgICAgIGZFdmVudFF1ZXVlcy5wdXQocHJveHlTdHJhdGVneSwg
bmV3IE1vZGVsUHJveHlFdmVudFF1ZXVlKCkpOw0KQEAgLTIyMiwxMyArMjM1LDE2IEBADQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgICAgICAgICBjcm0uZG9uZSgpOw0K
ICAgICAgICAgICAgICAgICAgICAgcXVldWUuZkV2ZW50UXVldWUuYWRkKGV2ZW50KTsNCiAgICAg
ICAgICAgICAgICAgfSBlbHNlIHsNCi0gICAgICAgICAgICAgICAgICAgIGRvSGFuZGxlRXZlbnQo
cXVldWUsIHByb3h5U3RyYXRlZ3ksIGV2ZW50KTsgDQorICAgICAgICAgICAgICAgICAgICBkb0hh
bmRsZUV2ZW50KHF1ZXVlLCBwcm94eVN0cmF0ZWd5LCBldmVudCwgY3JtKTsNCiAgICAgICAgICAg
ICAgICAgfQ0KKyAgICAgICAgICAgIH0gZWxzZSB7DQorICAgICAgICAgICAgCWNybS5kb25lKCk7
DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfQ0KLSAgICAgICAgDQorDQogICAgICAgICAvLyBD
bGVhbiB1cCBtb2RlbCBwcm94aWVzIHRoYXQgd2VyZSByZW1vdmVkLg0KICAgICAgICAgTGlzdDxJ
Vk1Nb2RlbFByb3h5PiBhY3RpdmVQcm94aWVzID0gZ2V0QWN0aXZlTW9kZWxQcm94aWVzKCk7DQog
ICAgICAgICBmb3IgKEl0ZXJhdG9yPElWTU1vZGVsUHJveHk+IGl0ciA9IGZFdmVudFF1ZXVlcy5r
ZXlTZXQoKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgew0KQEAgLTIzNyw4ICsyNTMsMjIg
QEANCiAgICAgICAgICAgICB9DQogICAgICAgICB9DQogICAgIH0NCi0gICAgIA0KLSAgICBwcml2
YXRlIHZvaWQgZG9IYW5kbGVFdmVudChmaW5hbCBNb2RlbFByb3h5RXZlbnRRdWV1ZSBxdWV1ZSwg
ZmluYWwgSVZNTW9kZWxQcm94eSBwcm94eVN0cmF0ZWd5LCBmaW5hbCBPYmplY3QgZXZlbnQpIHsN
CisNCisgICAgLyoqDQorICAgICAqIHtAaW5oZXJpdERvY30NCisJICogQHNpbmNlIDEuMQ0KKwkg
Ki8NCisgICAgcHVibGljIHZvaWQgYWJvdXRUb0hhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVu
dCkgew0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiB7QGluaGVyaXREb2N9DQorCSAqIEBz
aW5jZSAxLjENCisJICovDQorICAgIHB1YmxpYyB2b2lkIGRvbmVIYW5kbGVFdmVudChmaW5hbCBP
YmplY3QgZXZlbnQpIHsNCisgICAgfQ0KKw0KKyAgICBwcml2YXRlIHZvaWQgZG9IYW5kbGVFdmVu
dChmaW5hbCBNb2RlbFByb3h5RXZlbnRRdWV1ZSBxdWV1ZSwgZmluYWwgSVZNTW9kZWxQcm94eSBw
cm94eVN0cmF0ZWd5LCBmaW5hbCBPYmplY3QgZXZlbnQsIGZpbmFsIFJlcXVlc3RNb25pdG9yIHJt
KSB7DQogICAgICAgICBxdWV1ZS5mUHJvY2Vzc2luZ0V2ZW50ID0gdHJ1ZTsNCiAgICAgICAgIGhh
bmRsZUV2ZW50KA0KICAgICAgICAgICAgIHByb3h5U3RyYXRlZ3ksIGV2ZW50LCANCkBAIC0yNDcs
OCArMjc3LDEwIEBADQogICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2b2lkIGhhbmRsZUNvbXBs
ZXRlZCgpIHsNCiAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLmZQcm9jZXNzaW5nRXZlbnQgPSBm
YWxzZTsNCiAgICAgICAgICAgICAgICAgICAgIGlmICghcXVldWUuZkV2ZW50UXVldWUuaXNFbXB0
eSgpKSB7DQotICAgICAgICAgICAgICAgICAgICAgICAgZG9IYW5kbGVFdmVudChxdWV1ZSwgcHJv
eHlTdHJhdGVneSwgcXVldWUuZkV2ZW50UXVldWUucmVtb3ZlKDApKTsNCi0gICAgICAgICAgICAg
ICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCisgICAgICAgICAg
ICAgICAgICAgICAgICBkb0hhbmRsZUV2ZW50KHF1ZXVlLCBwcm94eVN0cmF0ZWd5LCBxdWV1ZS5m
RXZlbnRRdWV1ZS5yZW1vdmUoMCksIHJtKTsNCisgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQorICAgICAgICAgICAgICAgICAgICAJcm0uZG9uZSgpOw0KKyAgICAgICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfSk7DQogICAgIH0NCkluZGV4OiBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9BYnN0cmFjdFZNQWRhcHRlci5qYXZh
DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2Yv
cGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92
aWV3bW9kZWwvQWJzdHJhY3RWTUFkYXB0ZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEu
MTINCmRpZmYgLXUgLXIxLjEyIEFic3RyYWN0Vk1BZGFwdGVyLmphdmENCi0tLSBzcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9BYnN0cmFjdFZNQWRhcHRlci5qYXZhCTIgSnVuIDIw
MDggMTc6NTQ6NDUgLTAwMDAJMS4xMg0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmll
d21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVyLmphdmEJOCBKdWwgMjAwOCAxMToxMTowOSAtMDAwMA0K
QEAgLTEwLDE0ICsxMCwyMSBAQA0KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KIHBhY2thZ2Ug
b3JnLmVjbGlwc2UuZGQuZHNmLnVpLnZpZXdtb2RlbDsNCiANCitpbXBvcnQgamF2YS51dGlsLkFy
cmF5TGlzdDsNCitpbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247DQogaW1wb3J0IGphdmEudXRp
bC5Db2xsZWN0aW9uczsNCiBpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7DQoraW1wb3J0IGphdmEu
dXRpbC5MaXN0Ow0KIGltcG9ydCBqYXZhLnV0aWwuTWFwOw0KIGltcG9ydCBqYXZhLnV0aWwuY29u
Y3VycmVudC5SZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlvbjsNCiANCiBpbXBvcnQgb3JnLmVjbGlw
c2UuY29yZS5ydW50aW1lLklTdGF0dXM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGlt
ZS5TdGF0dXM7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkNvdW50aW5n
UmVxdWVzdE1vbml0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRz
ZlJ1bm5hYmxlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5JRHNmU3Rh
dHVzQ29uc3RhbnRzOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5JbW1l
ZGlhdGVFeGVjdXRvcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVx
dWVzdE1vbml0b3I7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlRocmVh
ZFNhZmU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5pbnRlcm5hbC51aS5Ec2ZVSVBsdWdp
bjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcuaW50ZXJuYWwudWkudmlld2Vycy5tb2RlbC5w
cm92aXNpb25hbC5JQ2hpbGRyZW5Db3VudFVwZGF0ZTsNCkBAIC0yOCw2ICszNSw3IEBADQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRlYnVnLmludGVybmFsLnVpLnZpZXdlcnMubW9kZWwucHJvdmlzaW9u
YWwuSVByZXNlbnRhdGlvbkNvbnRleHQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRlYnVnLmludGVy
bmFsLnVpLnZpZXdlcnMubW9kZWwucHJvdmlzaW9uYWwuSVZpZXdlcklucHV0VXBkYXRlOw0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy5pbnRlcm5hbC51aS52aWV3ZXJzLm1vZGVsLnByb3Zpc2lv
bmFsLklWaWV3ZXJVcGRhdGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLnZpZXdlcnMuVHJl
ZVBhdGg7DQogDQogLyoqIA0KICAqIEJhc2UgaW1wbGVtZW50YXRpb24gZm9yIFZpZXcgTW9kZWwg
QWRhcHRlcnMuICBUaGUgaW1wbGVtZW50YXRpb24gdXNlcw0KQEAgLTM4LDEwICs0NiwxMzkgQEAN
CiBAU3VwcHJlc3NXYXJuaW5ncygicmVzdHJpY3Rpb24iKQ0KIGFic3RyYWN0IHB1YmxpYyBjbGFz
cyBBYnN0cmFjdFZNQWRhcHRlciBpbXBsZW1lbnRzIElWTUFkYXB0ZXINCiB7DQotICAgIHByaXZh
dGUgYm9vbGVhbiBmRGlzcG9zZWQ7DQorIA0KKwkvKioNCisJICogSW50ZXJmYWNlIGZvciBhIHZp
ZXdlciB1cGRhdGUgd2hpY2ggY2FuIGJlICJtb25pdG9yZWQiLg0KKwkgKi8NCisJaW50ZXJmYWNl
IElNb25pdG9yZWRVcGRhdGUgZXh0ZW5kcyBJVmlld2VyVXBkYXRlIHsNCisgCQlib29sZWFuIGlz
RG9uZSgpOw0KKyAJCXZvaWQgc2V0TW9uaXRvcihSZXF1ZXN0TW9uaXRvciBtb25pdG9yKTsNCisJ
fQ0KKw0KKwkvKioNCisJICogV3JhcHMgYW4gSVZpZXdlclVwZGF0ZSB0byBhZGQgYSByZXF1ZXN0
IG1vbml0b3IuDQorCSAqLw0KKwlhYnN0cmFjdCBzdGF0aWMgY2xhc3MgTW9uaXRvcmVkVXBkYXRl
IGltcGxlbWVudHMgSU1vbml0b3JlZFVwZGF0ZSB7DQorDQorCQlwcm90ZWN0ZWQgSVZpZXdlclVw
ZGF0ZSBmRGVsZWdhdGU7DQorCQlwcml2YXRlIGJvb2xlYW4gZklzRG9uZTsNCisJCXByaXZhdGUg
UmVxdWVzdE1vbml0b3IgZk1vbml0b3I7DQorDQorCQlNb25pdG9yZWRVcGRhdGUoSVZpZXdlclVw
ZGF0ZSB1cGRhdGUpIHsNCisJCQlmRGVsZWdhdGUgPSB1cGRhdGU7DQorCQl9DQorDQorCQlwdWJs
aWMgYm9vbGVhbiBpc0RvbmUoKSB7DQorCQkJcmV0dXJuIGZJc0RvbmU7DQorCQl9DQorDQorCQlw
dWJsaWMgdm9pZCBzZXRNb25pdG9yKFJlcXVlc3RNb25pdG9yIG1vbml0b3IpIHsNCisJCQlmTW9u
aXRvciA9IG1vbml0b3I7DQorCQkJaWYgKGZJc0RvbmUpIHsNCisJCQkJbW9uaXRvci5kb25lKCk7
DQorCQkJfQ0KKwkJfQ0KKw0KKwkJcHVibGljIE9iamVjdCBnZXRFbGVtZW50KCkgew0KKwkJCXJl
dHVybiBmRGVsZWdhdGUuZ2V0RWxlbWVudCgpOw0KKwkJfQ0KKw0KKwkJcHVibGljIFRyZWVQYXRo
IGdldEVsZW1lbnRQYXRoKCkgew0KKwkJCXJldHVybiBmRGVsZWdhdGUuZ2V0RWxlbWVudFBhdGgo
KTsNCisJCX0NCisNCisJCXB1YmxpYyBJUHJlc2VudGF0aW9uQ29udGV4dCBnZXRQcmVzZW50YXRp
b25Db250ZXh0KCkgew0KKwkJCXJldHVybiBmRGVsZWdhdGUuZ2V0UHJlc2VudGF0aW9uQ29udGV4
dCgpOw0KKwkJfQ0KKw0KKwkJcHVibGljIE9iamVjdCBnZXRWaWV3ZXJJbnB1dCgpIHsNCisJCQly
ZXR1cm4gZkRlbGVnYXRlLmdldFZpZXdlcklucHV0KCk7DQorCQl9DQorDQorCQlwdWJsaWMgdm9p
ZCBjYW5jZWwoKSB7DQorCQkJZkRlbGVnYXRlLmNhbmNlbCgpOw0KKwkJCWlmICghZklzRG9uZSkg
ew0KKwkJCQlmSXNEb25lID0gdHJ1ZTsNCisJCQkJaWYgKGZNb25pdG9yICE9IG51bGwpIHsNCisJ
CQkJCWZNb25pdG9yLmRvbmUoKTsNCisJCQkJfQ0KKwkJCX0NCisJCX0NCisNCisJCXB1YmxpYyB2
b2lkIGRvbmUoKSB7DQorCQkJZkRlbGVnYXRlLmRvbmUoKTsNCisJCQlpZiAoIWZJc0RvbmUpIHsN
CisJCQkJZklzRG9uZSA9IHRydWU7DQorCQkJCWlmIChmTW9uaXRvciAhPSBudWxsKSB7DQorCQkJ
CQlmTW9uaXRvci5kb25lKCk7DQorCQkJCX0NCisJCQl9DQorCQl9DQorDQorCQlwdWJsaWMgSVN0
YXR1cyBnZXRTdGF0dXMoKSB7DQorCQkJcmV0dXJuIGZEZWxlZ2F0ZS5nZXRTdGF0dXMoKTsNCisJ
CX0NCisNCisJCXB1YmxpYyBib29sZWFuIGlzQ2FuY2VsZWQoKSB7DQorCQkJcmV0dXJuIGZEZWxl
Z2F0ZS5pc0NhbmNlbGVkKCk7DQorCQl9DQorDQorCQlwdWJsaWMgdm9pZCBzZXRTdGF0dXMoSVN0
YXR1cyBzdGF0dXMpIHsNCisJCQlmRGVsZWdhdGUuc2V0U3RhdHVzKHN0YXR1cyk7DQorCQl9DQor
DQorCX0NCisNCisJc3RhdGljIGNsYXNzIE1vbml0b3JlZENoaWxkcmVuVXBkYXRlIGV4dGVuZHMg
TW9uaXRvcmVkVXBkYXRlIGltcGxlbWVudHMgSUNoaWxkcmVuVXBkYXRlIHsNCisJCXB1YmxpYyBN
b25pdG9yZWRDaGlsZHJlblVwZGF0ZShJQ2hpbGRyZW5VcGRhdGUgdXBkYXRlKSB7DQorCQkJc3Vw
ZXIodXBkYXRlKTsNCisJCX0NCisNCisJCXB1YmxpYyBpbnQgZ2V0TGVuZ3RoKCkgew0KKwkJCXJl
dHVybiAoKElDaGlsZHJlblVwZGF0ZSlmRGVsZWdhdGUpLmdldExlbmd0aCgpOw0KKwkJfQ0KKw0K
KwkJcHVibGljIGludCBnZXRPZmZzZXQoKSB7DQorCQkJcmV0dXJuICgoSUNoaWxkcmVuVXBkYXRl
KWZEZWxlZ2F0ZSkuZ2V0T2Zmc2V0KCk7DQorCQl9DQorDQorCQlwdWJsaWMgdm9pZCBzZXRDaGls
ZChPYmplY3QgY2hpbGQsIGludCBvZmZzZXQpIHsNCisJCQkoKElDaGlsZHJlblVwZGF0ZSlmRGVs
ZWdhdGUpLnNldENoaWxkKGNoaWxkLCBvZmZzZXQpOw0KKwkJfQ0KKwkJDQorCX0NCisNCisJc3Rh
dGljIGNsYXNzIE1vbml0b3JlZEhhc0NoaWxkcmVuVXBkYXRlIGV4dGVuZHMgTW9uaXRvcmVkVXBk
YXRlIGltcGxlbWVudHMgSUhhc0NoaWxkcmVuVXBkYXRlIHsNCisJCXB1YmxpYyBNb25pdG9yZWRI
YXNDaGlsZHJlblVwZGF0ZShJSGFzQ2hpbGRyZW5VcGRhdGUgdXBkYXRlKSB7DQorCQkJc3VwZXIo
dXBkYXRlKTsNCisJCX0NCisNCisJCXB1YmxpYyB2b2lkIHNldEhhc0NoaWxyZW4oYm9vbGVhbiBo
YXNDaGlsZHJlbikgew0KKwkJCSgoSUhhc0NoaWxkcmVuVXBkYXRlKWZEZWxlZ2F0ZSkuc2V0SGFz
Q2hpbHJlbihoYXNDaGlsZHJlbik7DQorCQl9DQorDQorCX0NCisNCisJc3RhdGljIGNsYXNzIE1v
bml0b3JlZENoaWxkcmVuQ291bnRVcGRhdGUgZXh0ZW5kcyBNb25pdG9yZWRVcGRhdGUgaW1wbGVt
ZW50cyBJQ2hpbGRyZW5Db3VudFVwZGF0ZSB7DQorCQlwdWJsaWMgTW9uaXRvcmVkQ2hpbGRyZW5D
b3VudFVwZGF0ZShJQ2hpbGRyZW5Db3VudFVwZGF0ZSB1cGRhdGUpIHsNCisJCQlzdXBlcih1cGRh
dGUpOw0KKwkJfQ0KKw0KKwkJcHVibGljIHZvaWQgc2V0Q2hpbGRDb3VudChpbnQgbnVtQ2hpbGRy
ZW4pIHsNCisJCQkoKElDaGlsZHJlbkNvdW50VXBkYXRlKWZEZWxlZ2F0ZSkuc2V0Q2hpbGRDb3Vu
dChudW1DaGlsZHJlbik7DQorCQl9DQorDQorCX0NCisNCisNCisJcHJpdmF0ZSBib29sZWFuIGZE
aXNwb3NlZDsNCiANCiAgICAgcHJpdmF0ZSBmaW5hbCBNYXA8SVByZXNlbnRhdGlvbkNvbnRleHQs
IElWTVByb3ZpZGVyPiBmVmlld01vZGVsUHJvdmlkZXJzID0gDQotICAgICAgICBDb2xsZWN0aW9u
cy5zeW5jaHJvbml6ZWRNYXAoIG5ldyBIYXNoTWFwPElQcmVzZW50YXRpb25Db250ZXh0LCBJVk1Q
cm92aWRlcj4oKSApOyANCisgICAgICAgIENvbGxlY3Rpb25zLnN5bmNocm9uaXplZE1hcCggbmV3
IEhhc2hNYXA8SVByZXNlbnRhdGlvbkNvbnRleHQsIElWTVByb3ZpZGVyPigpICk7DQorDQorCXBy
aXZhdGUgQ29sbGVjdGlvbjxJTW9uaXRvcmVkVXBkYXRlPiBmUGVuZGluZ1VwZGF0ZXMgPSBuZXcg
QXJyYXlMaXN0PElNb25pdG9yZWRVcGRhdGU+KCk7DQorDQorCXByaXZhdGUgQ291bnRpbmdSZXF1
ZXN0TW9uaXRvciBmUGVuZGluZ1VwZGF0ZXNNb25pdG9yOw0KIA0KICAgICAvKioNCiAgICAgICog
Q29uc3RydWN0b3IgZm9yIHRoZSBWaWV3IE1vZGVsIHNlc3Npb24uICBJdCBpcyB0ZW1wdGluZyB0
byBoYXZlIHRoZSANCkBAIC03MCw2ICsyMDcsMTYgQEANCiAgICAgICAgIH0NCiAgICAgfQ0KIA0K
KyAgICAvKioNCisgICAgICogRW51bWVyYXRlIHRoZSBWTSBwcm92aWRlcnMuDQorICAgICAqIEBy
ZXR1cm4gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIEl0ZXJhYmxlPElWTVByb3ZpZGVyPn0NCisgICAg
ICogDQorCSAqIEBzaW5jZSAxLjENCisJICovDQorICAgIHByb3RlY3RlZCBJdGVyYWJsZTxJVk1Q
cm92aWRlcj4gZ2V0Vk1Qcm92aWRlckl0ZXJhYmxlKCkgew0KKyAgICAJcmV0dXJuIGZWaWV3TW9k
ZWxQcm92aWRlcnMudmFsdWVzKCk7DQorICAgIH0NCisNCiAgICAgcHVibGljIHZvaWQgZGlzcG9z
ZSgpIHsNCiAgICAgICAgIElWTVByb3ZpZGVyW10gcHJvdmlkZXJzID0gbmV3IElWTVByb3ZpZGVy
WzBdOyANCiAgICAgICAgIHN5bmNocm9uaXplZChmVmlld01vZGVsUHJvdmlkZXJzKSB7DQpAQCAt
OTEsMzEgKzIzOCwyOSBAQA0KICAgICAgICAgfQ0KICAgICB9DQogICAgIA0KKyAgICAvKioNCisJ
ICogQHJldHVybiB3aGV0aGVyIHRoaXMgVk0gYWRhcHRlciBpcyBkaXNwb3NlZC4NCisJICogDQor
ICAgICAqIEBzaW5jZSAxLjENCisJICovDQorCXB1YmxpYyBib29sZWFuIGlzRGlzcG9zZWQoKSB7
DQorCQlyZXR1cm4gZkRpc3Bvc2VkOw0KKwl9DQorDQogICAgIHB1YmxpYyB2b2lkIHVwZGF0ZShJ
SGFzQ2hpbGRyZW5VcGRhdGVbXSB1cGRhdGVzKSB7DQotICAgICAgICBJVk1Qcm92aWRlciBwcm92
aWRlciA9IGdldFZNUHJvdmlkZXIodXBkYXRlc1swXS5nZXRQcmVzZW50YXRpb25Db250ZXh0KCkp
Ow0KLSAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwpIHsNCi0gICAgICAgICAgICB1cGRhdGVQ
cm92aWRlcihwcm92aWRlciwgdXBkYXRlcyk7DQotICAgICAgICB9IGVsc2Ugew0KLSAgICAgICAg
ICAgIGZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1cGRhdGVzKSB7DQotICAgICAgICAgICAg
ICAgIHVwZGF0ZS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBEc2ZVSVBsdWdp
bi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMuSU5URVJOQUxfRVJST1IsIA0KLSAgICAg
ICAgICAgICAgICAgICAgIk5vIG1vZGVsIHByb3ZpZGVyIGZvciB1cGRhdGUgIiArIHVwZGF0ZSwg
bnVsbCkpOyAvLyROT04tTkxTLTEkDQotICAgICAgICAgICAgfQ0KLSAgICAgICAgfQ0KKyAgICAJ
aGFuZGxlVXBkYXRlKHVwZGF0ZXMpOw0KICAgICB9DQogICAgIA0KICAgICBwdWJsaWMgdm9pZCB1
cGRhdGUoSUNoaWxkcmVuQ291bnRVcGRhdGVbXSB1cGRhdGVzKSB7DQotICAgICAgICBJVk1Qcm92
aWRlciBwcm92aWRlciA9IGdldFZNUHJvdmlkZXIodXBkYXRlc1swXS5nZXRQcmVzZW50YXRpb25D
b250ZXh0KCkpOw0KLSAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwpIHsNCi0gICAgICAgICAg
ICB1cGRhdGVQcm92aWRlcihwcm92aWRlciwgdXBkYXRlcyk7DQotICAgICAgICB9IGVsc2Ugew0K
LSAgICAgICAgICAgIGZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1cGRhdGVzKSB7DQotICAg
ICAgICAgICAgICAgIHVwZGF0ZS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBE
c2ZVSVBsdWdpbi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMuSU5URVJOQUxfRVJST1Is
IA0KLSAgICAgICAgICAgICAgICAgICAgIk5vIG1vZGVsIHByb3ZpZGVyIGZvciB1cGRhdGUgIiAr
IHVwZGF0ZSwgbnVsbCkpOyAvLyROT04tTkxTLTEkDQotICAgICAgICAgICAgfQ0KLSAgICAgICAg
fQ0KKyAgICAJaGFuZGxlVXBkYXRlKHVwZGF0ZXMpOw0KICAgICB9DQogICAgIA0KICAgICBwdWJs
aWMgdm9pZCB1cGRhdGUoZmluYWwgSUNoaWxkcmVuVXBkYXRlW10gdXBkYXRlcykgew0KKyAgICAJ
aGFuZGxlVXBkYXRlKHVwZGF0ZXMpOw0KKyAgICB9DQorICAgICAgICAgICAgDQorICAgIHB1Ymxp
YyB2b2lkIGhhbmRsZVVwZGF0ZShJVmlld2VyVXBkYXRlW10gdXBkYXRlcykgew0KKyAgICAJdXBk
YXRlcyA9IHdyYXBVcGRhdGVzKHVwZGF0ZXMpOw0KICAgICAgICAgSVZNUHJvdmlkZXIgcHJvdmlk
ZXIgPSBnZXRWTVByb3ZpZGVyKHVwZGF0ZXNbMF0uZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpKTsN
CiAgICAgICAgIGlmIChwcm92aWRlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgdXBkYXRlUHJv
dmlkZXIocHJvdmlkZXIsIHVwZGF0ZXMpOw0KQEAgLTEyNiw3ICsyNzEsNyBAQA0KICAgICAgICAg
ICAgIH0NCiAgICAgICAgIH0NCiAgICAgfQ0KLSAgICAgICAgICAgIA0KKw0KICAgICBwcml2YXRl
IHZvaWQgdXBkYXRlUHJvdmlkZXIoZmluYWwgSVZNUHJvdmlkZXIgcHJvdmlkZXIsIGZpbmFsIElW
aWV3ZXJVcGRhdGVbXSB1cGRhdGVzKSB7DQogICAgICAgICB0cnkgew0KICAgICAgICAgICAgIHBy
b3ZpZGVyLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7DQpAQCAtMTg3LDQg
KzMzMiw5NyBAQA0KICAgICAgKi8NCiAgICAgQFRocmVhZFNhZmUgICAgDQogICAgIGFic3RyYWN0
IHByb3RlY3RlZCBJVk1Qcm92aWRlciBjcmVhdGVWaWV3TW9kZWxQcm92aWRlcihJUHJlc2VudGF0
aW9uQ29udGV4dCBjb250ZXh0KTsNCisNCisJLyoqDQorCSAqIEBzaW5jZSAxLjENCisJICovDQor
CXByb3RlY3RlZCBmaW5hbCB2b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCkgew0K
KyAgICAJZmluYWwgTGlzdDxJVk1FdmVudExpc3RlbmVyPiBldmVudExpc3RlbmVyID0gbmV3IEFy
cmF5TGlzdDxJVk1FdmVudExpc3RlbmVyPigpOw0KKwkNCisJCWZvciAoSVZNUHJvdmlkZXIgdm1Q
cm92aWRlciA6IGdldFZNUHJvdmlkZXJJdGVyYWJsZSgpKSB7DQorCQkJaWYgKHZtUHJvdmlkZXIg
aW5zdGFuY2VvZiBJVk1FdmVudExpc3RlbmVyKSB7DQorCQkJCWZpbmFsIElWTUV2ZW50TGlzdGVu
ZXIgdm1FdmVudExpc3RlbmVyPSAoSVZNRXZlbnRMaXN0ZW5lcikgdm1Qcm92aWRlcjsNCisJCQkJ
dm1Qcm92aWRlci5nZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KKwkJ
CQkJcHVibGljIHZvaWQgcnVuKCkgew0KKwkJCQkJCXZtRXZlbnRMaXN0ZW5lci5hYm91dFRvSGFu
ZGxlRXZlbnQoZXZlbnQpOw0KKwkJCQkJfX0pOw0KKwkJCQlldmVudExpc3RlbmVyLmFkZCh2bUV2
ZW50TGlzdGVuZXIpOw0KKwkJCX0NCisJCX0NCisJDQorCQlpZiAoIWV2ZW50TGlzdGVuZXIuaXNF
bXB0eSgpKSB7DQorCQkJZlBlbmRpbmdVcGRhdGVzLmNsZWFyKCk7DQorCQkJZmluYWwgQ291bnRp
bmdSZXF1ZXN0TW9uaXRvciBjcm0gPSBuZXcgQ291bnRpbmdSZXF1ZXN0TW9uaXRvcihJbW1lZGlh
dGVFeGVjdXRvci5nZXRJbnN0YW5jZSgpLCBudWxsKSB7DQorCQkJCUBPdmVycmlkZQ0KKwkJCQlw
cm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQorCQkJCQlmaW5hbCBDb3VudGluZ1Jl
cXVlc3RNb25pdG9yIGNybSA9IG5ldyBDb3VudGluZ1JlcXVlc3RNb25pdG9yKEltbWVkaWF0ZUV4
ZWN1dG9yLmdldEluc3RhbmNlKCksIG51bGwpIHsNCisJCQkJCQlAT3ZlcnJpZGUNCisJCQkJCQlw
cm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQorCQkJCQkJCWZvciAoZmluYWwgSVZN
RXZlbnRMaXN0ZW5lciB2bUV2ZW50TGlzdGVuZXIgOiBldmVudExpc3RlbmVyKSB7DQorCQkJCQkJ
CQl2bUV2ZW50TGlzdGVuZXIuZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZSdW5uYWJsZSgp
IHsNCisJCQkJCQkJCQlwdWJsaWMgdm9pZCBydW4oKSB7DQorCQkJCQkJCQkJCXZtRXZlbnRMaXN0
ZW5lci5kb25lSGFuZGxlRXZlbnQoZXZlbnQpOw0KKwkJCQkJCQkJCX19KTsNCisJCQkJCQkJfQ0K
KwkJCQkJCX0NCisJCQkJCX07DQorCQkJCQlpbnQgcGVuZGluZz0gZlBlbmRpbmdVcGRhdGVzLnNp
emUoKTsNCisJCQkJCWlmIChwZW5kaW5nID09IDApIHsNCisJCQkJCQljcm0uc2V0RG9uZUNvdW50
KDEpOw0KKwkJCQkJCWNybS5kb25lKCk7DQorCQkJCQl9IGVsc2Ugew0KKwkJCQkJCWNybS5zZXRE
b25lQ291bnQocGVuZGluZyk7DQorCQkJCQkJZm9yIChJTW9uaXRvcmVkVXBkYXRlIHVwZGF0ZSA6
IGZQZW5kaW5nVXBkYXRlcykgew0KKwkJCQkJCQl1cGRhdGUuc2V0TW9uaXRvcihjcm0pOw0KKwkJ
CQkJCX0NCisJCQkJCX0NCisJCQkJfQ0KKwkJCX07DQorCQkJY3JtLnNldERvbmVDb3VudChldmVu
dExpc3RlbmVyLnNpemUoKSk7DQorCSAgICAgICAgDQorCQkJZm9yIChmaW5hbCBJVk1FdmVudExp
c3RlbmVyIHZtRXZlbnRMaXN0ZW5lciA6IGV2ZW50TGlzdGVuZXIpIHsNCisJCQkJdm1FdmVudExp
c3RlbmVyLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVubmFibGUoKSB7DQorCQkJCQlw
dWJsaWMgdm9pZCBydW4oKSB7DQorCQkJCQkJdm1FdmVudExpc3RlbmVyLmhhbmRsZUV2ZW50KGV2
ZW50LCBjcm0pOw0KKwkJCQkJfX0pOw0KKwkJCX0NCisJCX0NCisJfQ0KKw0KKwlwcml2YXRlIElW
aWV3ZXJVcGRhdGVbXSB3cmFwVXBkYXRlcyhJVmlld2VyVXBkYXRlW10gdXBkYXRlcykgew0KKwkJ
aWYgKHVwZGF0ZXMubGVuZ3RoID09IDApIHsNCisJCQlyZXR1cm4gdXBkYXRlczsNCisJCX0NCisJ
CWludCBpID0gMDsNCisJCWZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1cGRhdGVzKSB7DQor
CQkJZmluYWwgSU1vbml0b3JlZFVwZGF0ZSB3cmFwPSBjcmVhdGVNb25pdG9yZWRVcGRhdGUodXBk
YXRlKTsNCisJCQl1cGRhdGVzW2krK10gPSB3cmFwOw0KKwkJCWZQZW5kaW5nVXBkYXRlcy5hZGQo
d3JhcCk7DQorCQl9DQorCQlyZXR1cm4gdXBkYXRlczsNCisJfQ0KKw0KKwlwcml2YXRlIElNb25p
dG9yZWRVcGRhdGUgY3JlYXRlTW9uaXRvcmVkVXBkYXRlKElWaWV3ZXJVcGRhdGUgdXBkYXRlKSB7
DQorCQlpZiAodXBkYXRlIGluc3RhbmNlb2YgSUNoaWxkcmVuQ291bnRVcGRhdGUpIHsNCisJCQly
ZXR1cm4gY3JlYXRlQ2hpbGRyZW5Db3VudE1vbml0b3IoKElDaGlsZHJlbkNvdW50VXBkYXRlKXVw
ZGF0ZSk7DQorCQl9IGVsc2UgaWYgKHVwZGF0ZSBpbnN0YW5jZW9mIElIYXNDaGlsZHJlblVwZGF0
ZSkgew0KKwkJCXJldHVybiBjcmVhdGVIYXNDaGlsZHJlbkNvdW50TW9uaXRvcigoSUhhc0NoaWxk
cmVuVXBkYXRlKXVwZGF0ZSk7DQorCQl9IGVsc2UgaWYgKHVwZGF0ZSBpbnN0YW5jZW9mIElDaGls
ZHJlblVwZGF0ZSkgew0KKwkJCXJldHVybiBjcmVhdGVDaGlsZHJlblVwZGF0ZU1vbml0b3IoKElD
aGlsZHJlblVwZGF0ZSl1cGRhdGUpOw0KKwkJfQ0KKwkJcmV0dXJuIG51bGw7DQorCX0NCisNCisJ
cHJpdmF0ZSBJTW9uaXRvcmVkVXBkYXRlIGNyZWF0ZUNoaWxkcmVuVXBkYXRlTW9uaXRvcihJQ2hp
bGRyZW5VcGRhdGUgdXBkYXRlKSB7DQorCQlyZXR1cm4gbmV3IE1vbml0b3JlZENoaWxkcmVuVXBk
YXRlKHVwZGF0ZSk7DQorCX0NCisNCisJcHJpdmF0ZSBJTW9uaXRvcmVkVXBkYXRlIGNyZWF0ZUhh
c0NoaWxkcmVuQ291bnRNb25pdG9yKElIYXNDaGlsZHJlblVwZGF0ZSB1cGRhdGUpIHsNCisJCXJl
dHVybiBuZXcgTW9uaXRvcmVkSGFzQ2hpbGRyZW5VcGRhdGUodXBkYXRlKTsNCisJfQ0KKw0KKwlw
cml2YXRlIElNb25pdG9yZWRVcGRhdGUgY3JlYXRlQ2hpbGRyZW5Db3VudE1vbml0b3IoSUNoaWxk
cmVuQ291bnRVcGRhdGUgdXBkYXRlKSB7DQorCQlyZXR1cm4gbmV3IE1vbml0b3JlZENoaWxkcmVu
Q291bnRVcGRhdGUodXBkYXRlKTsNCisJfQ0KKw0KIH0NCkluZGV4OiBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNUHJvdmlkZXIuamF2YQ0K
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3Bs
dWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmll
d21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhLHYNCnJldHJpZXZpbmcg
cmV2aXNpb24gMS4yDQpkaWZmIC11IC1yMS4yIEFic3RyYWN0RE1WTVByb3ZpZGVyLmphdmENCi0t
LSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RE
TVZNUHJvdmlkZXIuamF2YQkyIEp1biAyMDA4IDE3OjU0OjQ1IC0wMDAwCTEuMg0KKysrIHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1Qcm92
aWRlci5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDkgLTAwMDANCkBAIC00NCwxNCArNDQsNiBAQA0K
IGFic3RyYWN0IHB1YmxpYyBjbGFzcyBBYnN0cmFjdERNVk1Qcm92aWRlciBleHRlbmRzIEFic3Ry
YWN0Q2FjaGluZ1ZNUHJvdmlkZXINCiB7DQogICAgIHByaXZhdGUgZmluYWwgRHNmU2Vzc2lvbiBm
U2Vzc2lvbjsNCi0NCi0gICAgLyoqDQotICAgICAqIEl0IGlzIHRoZW9yZXRpY2FsbHkgcG9zc2li
bGUgZm9yIGEgVk1Qcm92aWRlciB0byBiZSBkaXNwb3NlZCBiZWZvcmUgaXQgDQotICAgICAqIGhh
cyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgYXMgZXZlbnQgbGlzdGVuZXIuICBUaGlzIGZs
YWcgaXMgdXNlZA0KLSAgICAgKiB0byBhdm9pZCByZW1vdmluZyBpdHNlbGYgYXMgbGlzdGVuZXIg
aW4gc3VjaCBzaXR1YXRpb24uDQotICAgICAqLw0KLSAgICBwcml2YXRlIGJvb2xlYW4gZlJlZ2lz
dGVyZWRBc0V2ZW50TGlzdGVuZXIgPSBmYWxzZTsNCi0NCiAgICAgLyoqDQogICAgICAqIENvbnN0
cnVjdHMgdGhlIHZpZXcgbW9kZWwgcHJvdmlkZXIgZm9yIGdpdmVuIERTRiBzZXNzaW9uLiAgVGhl
IA0KICAgICAgKiBjb25zdHJ1Y3RvciBpcyB0aHJlYWQtc2FmZSB0byBhbGxvdyBWTSBwcm92aWRl
ciB0byBiZSBjb25zdHJ1Y3RlZA0KQEAgLTYxLDM4ICs1Myw4IEBADQogICAgIHB1YmxpYyBBYnN0
cmFjdERNVk1Qcm92aWRlcihBYnN0cmFjdFZNQWRhcHRlciBhZGFwdGVyLCAgSVByZXNlbnRhdGlv
bkNvbnRleHQgcHJlc2VudGF0aW9uQ29udGV4dCwgRHNmU2Vzc2lvbiBzZXNzaW9uKSB7DQogICAg
ICAgICBzdXBlcihhZGFwdGVyLCBwcmVzZW50YXRpb25Db250ZXh0KTsNCiAgICAgICAgIGZTZXNz
aW9uID0gc2Vzc2lvbjsNCi0gICAgICAgIC8vIEFkZCBvdXJzZWx2ZXMgYXMgbGlzdGVuZXIgZm9y
IERNIGV2ZW50cyBldmVudHMuDQotICAgICAgICB0cnkgew0KLSAgICAgICAgICAgIHNlc3Npb24u
Z2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsNCi0gICAgICAgICAgICAgICAg
cHVibGljIHZvaWQgcnVuKCkgew0KLSAgICAgICAgICAgICAgICAgICAgaWYgKERzZlNlc3Npb24u
aXNTZXNzaW9uQWN0aXZlKGdldFNlc3Npb24oKS5nZXRJZCgpKSkgew0KLSAgICAgICAgICAgICAg
ICAgICAgICAgIGdldFNlc3Npb24oKS5hZGRTZXJ2aWNlRXZlbnRMaXN0ZW5lcihBYnN0cmFjdERN
Vk1Qcm92aWRlci50aGlzLCBudWxsKTsNCi0gICAgICAgICAgICAgICAgICAgICAgICBmUmVnaXN0
ZXJlZEFzRXZlbnRMaXN0ZW5lciA9IHRydWU7DQotICAgICAgICAgICAgICAgICAgICB9DQotICAg
ICAgICAgICAgICAgIH0NCi0gICAgICAgICAgICB9KTsNCi0gICAgICAgIH0gY2F0Y2ggKFJlamVj
dGVkRXhlY3V0aW9uRXhjZXB0aW9uIGUpIHsNCi0gICAgICAgICAgICAvLyBTZXNzaW9uIHNodXQg
ZG93biwgbm90IG11Y2ggd2UgY2FuIGRvIGJ1dCB3YWl0IHRvIGJlIGRpc3Bvc2VkLg0KLSAgICAg
ICAgfSANCiAgICAgfSAgICANCiANCi0gICAgLyoqIENhbGxlZCB0byBkaXNwb3NlIHRoZSBwcm92
aWRlci4gKi8gDQotICAgIEBPdmVycmlkZQ0KLSAgICBwdWJsaWMgdm9pZCBkaXNwb3NlKCkgew0K
LSAgICAgICAgdHJ5IHsNCi0gICAgICAgICAgICBnZXRTZXNzaW9uKCkuZ2V0RXhlY3V0b3IoKS5l
eGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsNCi0gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVu
KCkgew0KLSAgICAgICAgICAgICAgICAgICAgaWYgKERzZlNlc3Npb24uaXNTZXNzaW9uQWN0aXZl
KGdldFNlc3Npb24oKS5nZXRJZCgpKSAmJiBmUmVnaXN0ZXJlZEFzRXZlbnRMaXN0ZW5lciApIHsN
Ci0gICAgICAgICAgICAgICAgICAgICAgICBmU2Vzc2lvbi5yZW1vdmVTZXJ2aWNlRXZlbnRMaXN0
ZW5lcihBYnN0cmFjdERNVk1Qcm92aWRlci50aGlzKTsNCi0gICAgICAgICAgICAgICAgICAgIH0N
Ci0gICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgIH0pOw0KLSAgICAgICAgfSBjYXRjaCAo
UmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgew0KLSAgICAgICAgICAgIC8vIFNlc3Npb24g
c2h1dCBkb3duLg0KLSAgICAgICAgfSANCi0gICAgICAgIHN1cGVyLmRpc3Bvc2UoKTsNCi0gICAg
fQ0KLQ0KICAgICBwdWJsaWMgRHNmU2Vzc2lvbiBnZXRTZXNzaW9uKCkgeyByZXR1cm4gZlNlc3Np
b247IH0NCiANCiAgICAgLyoqDQpAQCAtMTAwLDkgKzYyLDEzIEBADQogICAgICAqIHZpZXcgYW5k
IHBhc3NpbmcgaXQgdG8gdGhlIGNvcnJlc3BvbmRpbmcgdmlldyBtb2RlbCBwcm92aWRlci4gIFRo
ZSB2aWV3DQogICAgICAqIG1vZGVsIHByb3ZpZGVyIGlzIHRoZW4gcmVzcG9uc2libGUgZm9yIGZp
bGxpbmctaW4gYW5kIHNlbmRpbmcgdGhlIGRlbHRhDQogICAgICAqIHRvIHRoZSB2aWV3ZXIuDQot
ICAgICAqIEBwYXJhbSBlDQorICAgICAqIA0KKyAgICAgKiBAcGFyYW0gZXZlbnQNCisgICAgICog
DQorICAgICAqIEBkZXByZWNhdGVkIEtlcHQgZm9yIEFQSSBjb21wYXRpYmlsaXR5IHJlYXNvbnMu
DQogICAgICAqLw0KLSAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlcg0KKyAgICBARGVwcmVjYXRl
ZA0KKwlARHNmU2VydmljZUV2ZW50SGFuZGxlcg0KICAgICBwdWJsaWMgdm9pZCBldmVudERpc3Bh
dGNoZWQoZmluYWwgSURNRXZlbnQ8Pz4gZXZlbnQpIHsNCiAgICAgICAgIC8vIFdlJ3JlIGluIHNl
c3Npb24ncyBleGVjdXRvciB0aHJlYWQgKHNlc3Npb24gaW4gd2hpY2ggdGhlIGV2ZW50IG9yaWdp
bmF0ZWQpLiANCiAgICAgICAgIC8vIFJlLWRpc3BhY2ggdG8gdGhlIHZpZXcgbW9kZWwgcHJvdmlk
ZXIgZXhlY3V0b3IgdGhyZWFkIGFuZCB0aGVuIGNhbGwgdGhlIA0KSW5kZXg6IHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1BZGFwdGVyLmph
dmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3Vp
L3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRlci5qYXZhLHYNCnJldHJpZXZp
bmcgcmV2aXNpb24gMS4yDQpkaWZmIC11IC1yMS4yIEFic3RyYWN0RE1WTUFkYXB0ZXIuamF2YQ0K
LS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFj
dERNVk1BZGFwdGVyLmphdmEJMiBKdW4gMjAwOCAxNzo1NDo0NSAtMDAwMAkxLjINCisrKyBzcmMv
b3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRh
cHRlci5qYXZhCTggSnVsIDIwMDggMTE6MTE6MDkgLTAwMDANCkBAIC0xMCw3ICsxMCwxMSBAQA0K
ICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqLw0KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuZGQuZHNmLnVp
LnZpZXdtb2RlbC5kYXRhbW9kZWw7DQogDQoraW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlJl
amVjdGVkRXhlY3V0aW9uRXhjZXB0aW9uOw0KKw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
Y29uY3VycmVudC5UaHJlYWRTYWZlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1v
ZGVsLklETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2
aWNlRXZlbnRIYW5kbGVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZT
ZXNzaW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLkFic3RyYWN0
Vk1BZGFwdGVyOw0KIA0KQEAgLTIzLDYgKzI3LDEzIEBADQogICAgIHByaXZhdGUgZmluYWwgRHNm
U2Vzc2lvbiBmU2Vzc2lvbjsNCiANCiAgICAgLyoqDQorICAgICAqIEl0IGlzIHRoZW9yZXRpY2Fs
bHkgcG9zc2libGUgZm9yIGEgVk0gYWRhcHRlciB0byBiZSBkaXNwb3NlZCBiZWZvcmUgaXQgDQor
ICAgICAqIGhhcyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgYXMgZXZlbnQgbGlzdGVuZXIu
ICBUaGlzIGZsYWcgaXMgdXNlZA0KKyAgICAgKiB0byBhdm9pZCByZW1vdmluZyBpdHNlbGYgYXMg
bGlzdGVuZXIgaW4gc3VjaCBzaXR1YXRpb24uDQorICAgICAqLw0KKyAgICBwcml2YXRlIGJvb2xl
YW4gZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIgPSBmYWxzZTsNCisNCisgICAgLyoqDQogICAg
ICAqIENvbnN0cnVjdG9yIGZvciB0aGUgVmlldyBNb2RlbCBzZXNzaW9uLiAgSXQgaXMgdGVtcHRp
bmcgdG8gaGF2ZSB0aGUgDQogICAgICAqIGFkYXB0ZXIgcmVnaXN0ZXIgaXRzZWxmIGhlcmUgd2l0
aCB0aGUgc2Vzc2lvbiBhcyB0aGUgbW9kZWwgYWRhcHRlciwgYnV0DQogICAgICAqIHRoYXQgd291
bGQgbWVhbiB0aGF0IHRoZSBhZGFwdGVyIG1pZ2h0IGdldCBhY2Nlc3NlZCBvbiBhbm90aGVyIHRo
cmVhZA0KQEAgLTMzLDEyICs0NCw1OSBAQA0KICAgICBwdWJsaWMgQWJzdHJhY3RETVZNQWRhcHRl
cihEc2ZTZXNzaW9uIHNlc3Npb24pIHsNCiAgICAgICAgIHN1cGVyKCk7DQogICAgICAgICBmU2Vz
c2lvbiA9IHNlc3Npb247DQorICAgICAgICAvLyBBZGQgb3Vyc2VsdmVzIGFzIGxpc3RlbmVyIGZv
ciBETSBldmVudHMgZXZlbnRzLg0KKyAgICAgICAgdHJ5IHsNCisgICAgICAgICAgICBzZXNzaW9u
LmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7DQorICAgICAgICAgICAgICAg
IHB1YmxpYyB2b2lkIHJ1bigpIHsNCisgICAgICAgICAgICAgICAgICAgIGlmIChEc2ZTZXNzaW9u
LmlzU2Vzc2lvbkFjdGl2ZShnZXRTZXNzaW9uKCkuZ2V0SWQoKSkpIHsNCisgICAgICAgICAgICAg
ICAgICAgICAgICBnZXRTZXNzaW9uKCkuYWRkU2VydmljZUV2ZW50TGlzdGVuZXIoQWJzdHJhY3RE
TVZNQWRhcHRlci50aGlzLCBudWxsKTsNCisgICAgICAgICAgICAgICAgICAgICAgICBmUmVnaXN0
ZXJlZEFzRXZlbnRMaXN0ZW5lciA9IHRydWU7DQorICAgICAgICAgICAgICAgICAgICB9DQorICAg
ICAgICAgICAgICAgIH0NCisgICAgICAgICAgICB9KTsNCisgICAgICAgIH0gY2F0Y2ggKFJlamVj
dGVkRXhlY3V0aW9uRXhjZXB0aW9uIGUpIHsNCisgICAgICAgICAgICAvLyBTZXNzaW9uIHNodXQg
ZG93biwgbm90IG11Y2ggd2UgY2FuIGRvIGJ1dCB3YWl0IHRvIGJlIGRpc3Bvc2VkLg0KKyAgICAg
ICAgfQ0KICAgICB9ICAgIA0KIA0KKyAgICBAT3ZlcnJpZGUNCisgICAgcHVibGljIHZvaWQgZGlz
cG9zZSgpIHsNCisgICAgICAgIHRyeSB7DQorICAgICAgICAgICAgZ2V0U2Vzc2lvbigpLmdldEV4
ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7DQorICAgICAgICAgICAgICAgIHB1Ymxp
YyB2b2lkIHJ1bigpIHsNCisgICAgICAgICAgICAgICAgICAgIGlmIChmUmVnaXN0ZXJlZEFzRXZl
bnRMaXN0ZW5lciAmJiBnZXRTZXNzaW9uKCkuaXNBY3RpdmUoKSkgew0KKyAgICAgICAgICAgICAg
ICAgICAgICAgIGZTZXNzaW9uLnJlbW92ZVNlcnZpY2VFdmVudExpc3RlbmVyKEFic3RyYWN0RE1W
TUFkYXB0ZXIudGhpcyk7DQorICAgICAgICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgICAg
IH0NCisgICAgICAgICAgICB9KTsNCisgICAgICAgIH0gY2F0Y2ggKFJlamVjdGVkRXhlY3V0aW9u
RXhjZXB0aW9uIGUpIHsNCisgICAgICAgICAgICAvLyBTZXNzaW9uIHNodXQgZG93bi4NCisgICAg
ICAgIH0NCisgICAgICAgIHN1cGVyLmRpc3Bvc2UoKTsNCisgICAgfQ0KKw0KICAgICAvKioNCiAg
ICAgICogUmV0dXJucyB0aGUgRFNGIHNlc3Npb24gdGhhdCB0aGlzIGFkYXB0ZXIgaXMgYXNzb2Np
YXRlZCB3aXRoLg0KICAgICAgKiBAcmV0dXJuDQogICAgICAqLw0KICAgICBwcm90ZWN0ZWQgRHNm
U2Vzc2lvbiBnZXRTZXNzaW9uKCkgeyByZXR1cm4gZlNlc3Npb247IH0NCiAgICAgDQorICAgIC8q
Kg0KKyAgICAgKiBIYW5kbGUgImRhdGEgbW9kZWwgY2hhbmdlZCIgZXZlbnQgYnkgZ2VuZXJhdGlu
ZyBhIGRlbHRhIG9iamVjdCBmb3IgZWFjaCANCisgICAgICogdmlldyBhbmQgcGFzc2luZyBpdCB0
byB0aGUgY29ycmVzcG9uZGluZyB2aWV3IG1vZGVsIHByb3ZpZGVyLiAgVGhlIHZpZXcNCisgICAg
ICogbW9kZWwgcHJvdmlkZXIgaXMgdGhlbiByZXNwb25zaWJsZSBmb3IgZmlsbGluZy1pbiBhbmQg
c2VuZGluZyB0aGUgZGVsdGENCisgICAgICogdG8gdGhlIHZpZXdlci4NCisgICAgICogDQorICAg
ICAqIEBwYXJhbSBldmVudA0KKyAgICAgKiANCisgICAgICogQHNpbmNlIDEuMQ0KKyAgICAgKi8N
CisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXINCisgICAgcHVibGljIGZpbmFsIHZvaWQgZXZl
bnREaXNwYXRjaGVkKGZpbmFsIElETUV2ZW50PD8+IGV2ZW50KSB7DQorICAgIAkvLyBXZSdyZSBp
biBzZXNzaW9uJ3MgZXhlY3V0b3IgdGhyZWFkIChzZXNzaW9uIGluIHdoaWNoIHRoZSBldmVudCBv
cmlnaW5hdGVkKS4gDQorICAgICAgICBpZiAoaXNEaXNwb3NlZCgpKSByZXR1cm47DQorDQorICAg
ICAgICBoYW5kbGVFdmVudChldmVudCk7DQorICAgIH0NCisNCiB9DQpJbmRleDogc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvSVZNRXZlbnRMaXN0ZW5lci5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvSVZNRXZl
bnRMaXN0ZW5lci5qYXZhDQpkaWZmIC1OIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21v
ZGVsL0lWTUV2ZW50TGlzdGVuZXIuamF2YQ0KLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAw
OjAwIC0wMDAwDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvSVZNRXZl
bnRMaXN0ZW5lci5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCkBAIC0wLDAgKzEsNDgg
QEANCisvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwOCBXaW5k
IFJpdmVyIFN5c3RlbXMsIEluYy4gYW5kIG90aGVycy4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVk
LiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBh
dmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRt
bA0KKyAqDQorICogQ29udHJpYnV0b3JzOg0KKyAqICAgICBXaW5kIFJpdmVyIFN5c3RlbXMgLSBp
bml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisgKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8N
CitwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWw7DQorDQoraW1wb3J0IGph
dmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5SZXF1ZXN0TW9uaXRvcjsNCisNCisvKioNCisgKiBBIGxpc3RlbmVyIHBh
cnRpY2lwYXRpbmcgaW4gZXZlbnQgbm90aWZpY2F0aW9ucyBzZW50IG91dCBmcm9tIFZNIGFkYXB0
ZXIuDQorICogDQorICogQHNpbmNlIDEuMQ0KKyAqLw0KK3B1YmxpYyBpbnRlcmZhY2UgSVZNRXZl
bnRMaXN0ZW5lciB7DQorDQorICAgIC8qKg0KKyAgICAgKiBSZXR1cm5zIHRoZSBleGVjdXRvciB0
aGF0IG5lZWRzIHRvIGJlIHVzZWQgdG8gYWNjZXNzIHRoaXMgZXZlbnQgbGlzdGVuZXIuIA0KKyAg
ICAgKi8NCisgICAgcHVibGljIEV4ZWN1dG9yIGdldEV4ZWN1dG9yKCk7DQorICAgIA0KKwkvKioN
CisJICogUHJvY2VzcyB0aGUgZ2l2ZW4gZXZlbnQgYW5kIGluZGljYXRlIGNvbXBsZXRpb24gd2l0
aCByZXF1ZXN0IG1vbml0b3IuDQorCSAqLw0KKwlwdWJsaWMgYWJzdHJhY3Qgdm9pZCBoYW5kbGVF
dmVudChmaW5hbCBPYmplY3QgZXZlbnQsIFJlcXVlc3RNb25pdG9yIHJtKTsNCisNCisJLyoqDQor
CSAqIEdpdmVuIGV2ZW50IGlzIGFib3V0IHRvIGJlIGhhbmRsZWQuDQorCSAqIA0KKwkgKiBAcGFy
YW0gZXZlbnQNCisJICovDQorCXB1YmxpYyBhYnN0cmFjdCB2b2lkIGFib3V0VG9IYW5kbGVFdmVu
dChmaW5hbCBPYmplY3QgZXZlbnQpOw0KKw0KKwkvKioNCisJICogR2l2ZW4gZXZlbnQgaGFzIGJl
ZW4gcHJvY2Vzc2VkIGJ5IGFsbCBWTSBldmVudCBsaXN0ZW5lcnMuDQorCSAqIA0KKwkgKiBAcGFy
YW0gZXZlbnQNCisJICovDQorCXB1YmxpYyBhYnN0cmFjdCB2b2lkIGRvbmVIYW5kbGVFdmVudChm
aW5hbCBPYmplY3QgZXZlbnQpOw0KKw0KK30NCiNQIG9yZy5lY2xpcHNlLmRkLmV4YW1wbGVzLnBk
YS51aQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvdWkvUERBQWRhcHRl
ckZhY3RvcnkuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVj
bGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZXhhbXBsZXMucGRhLnVpL3NyYy9v
cmcvZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvdWkvUERBQWRhcHRlckZhY3RvcnkuamF2YSx2DQpy
ZXRyaWV2aW5nIHJldmlzaW9uIDEuNw0KZGlmZiAtdSAtcjEuNyBQREFBZGFwdGVyRmFjdG9yeS5q
YXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS91aS9QREFBZGFwdGVyRmFj
dG9yeS5qYXZhCTE3IEp1biAyMDA4IDIwOjQ2OjEzIC0wMDAwCTEuNw0KKysrIHNyYy9vcmcvZWNs
aXBzZS9kZC9leGFtcGxlcy9wZGEvdWkvUERBQWRhcHRlckZhY3RvcnkuamF2YQk4IEp1bCAyMDA4
IDExOjExOjExIC0wMDAwDQpAQCAtMTcsNiArMTcsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5j
b3JlLnJ1bnRpbWUuSUFkYXB0ZXJGYWN0b3J5Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
Y29uY3VycmVudC5JbW11dGFibGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJy
ZW50LlRocmVhZFNhZmU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5h
bC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwuU3RlcHBpbmdDb250cm9sbGVyOw0KIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVs
LmxhdW5jaC5EZWZhdWx0RHNmTW9kZWxTZWxlY3Rpb25Qb2xpY3lGYWN0b3J5Ow0KIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkuYWN0aW9ucy5Ec2ZSZXN1bWVDb21tYW5kOw0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkuYWN0aW9ucy5Ec2ZTdGVwSW50b0NvbW1h
bmQ7DQpAQCAtNjIsNyArNjMsNyBAQA0KIHB1YmxpYyBjbGFzcyBQREFBZGFwdGVyRmFjdG9yeSBp
bXBsZW1lbnRzIElBZGFwdGVyRmFjdG9yeSwgSUxhdW5jaGVzTGlzdGVuZXIyDQogew0KICAgICAv
KioNCi0gICAgICogQ29udGFpbnMgdGhlIHNldCBvZiBhZGFwdGVycyB0aGF0IGFyZSBjcmVhdGVk
IGZvciBlYWN5IGxhdW5jaCBpbnN0YW5jZS4NCisgICAgICogQ29udGFpbnMgdGhlIHNldCBvZiBh
ZGFwdGVycyB0aGF0IGFyZSBjcmVhdGVkIGZvciBlYWNoIGxhdW5jaCBpbnN0YW5jZS4NCiAgICAg
ICovDQogICAgIEBJbW11dGFibGUNCiAgICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgTGF1bmNoQWRh
cHRlclNldCB7DQpAQCAtODQsNiArODUsOCBAQA0KICAgICAgICAgZmluYWwgSURlYnVnTW9kZWxQ
cm92aWRlciBmRGVidWdNb2RlbFByb3ZpZGVyOw0KICAgICAgICAgZmluYWwgUERBTGF1bmNoIGZM
YXVuY2g7DQogDQorCQlmaW5hbCBTdGVwcGluZ0NvbnRyb2xsZXIgZlN0ZXBwaW5nQ29udHJvbGxl
cjsNCisNCiAJCXByaXZhdGUgSU1vZGVsU2VsZWN0aW9uUG9saWN5RmFjdG9yeSBmTW9kZWxTZWxl
Y3Rpb25Qb2xpY3lGYWN0b3J5Ow0KIA0KICAgICAgICAgTGF1bmNoQWRhcHRlclNldChQREFMYXVu
Y2ggbGF1bmNoKSB7DQpAQCAtMTI4LDcgKzEzMSwxMSBAQA0KICAgICAgICAgICAgIC8vIGFuZCBk
ZWJ1ZyBtb2RlbCBJRCB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aCBhbGwgRE1Db250ZXh0cyBmcm9t
IHRoaXMNCiAgICAgICAgICAgICAvLyBzZXNzaW9uLg0KICAgICAgICAgICAgIHNlc3Npb24ucmVn
aXN0ZXJNb2RlbEFkYXB0ZXIoSUxhdW5jaC5jbGFzcywgZkxhdW5jaCk7DQotICAgICAgICB9DQor
DQorICAgICAgICAgICAgLy8gcmVnaXN0ZXIgc3RlcHBpbmcgY29udHJvbGxlcg0KKyAgICAgICAg
ICAgIGZTdGVwcGluZ0NvbnRyb2xsZXIgPSBuZXcgU3RlcHBpbmdDb250cm9sbGVyKHNlc3Npb24p
Ow0KKyAgICAgICAgICAgIHNlc3Npb24ucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoU3RlcHBpbmdDb250
cm9sbGVyLmNsYXNzLCBmU3RlcHBpbmdDb250cm9sbGVyKTsNCit9DQogICAgICAgICANCiAgICAg
ICAgIHZvaWQgZGlzcG9zZSgpIHsNCiAgICAgICAgICAgICBEc2ZTZXNzaW9uIHNlc3Npb24gPSBm
TGF1bmNoLmdldFNlc3Npb24oKTsNCkBAIC0xNTIsNyArMTU5LDEwIEBADQogICAgICAgICAgICAg
ZlN1c3BlbmRDb21tYW5kLmRpc3Bvc2UoKTsNCiAgICAgICAgICAgICBmUmVzdW1lQ29tbWFuZC5k
aXNwb3NlKCk7DQogICAgICAgICAgICAgZlRlcm1pbmF0ZUNvbW1hbmQuZGlzcG9zZSgpOw0KLSAg
ICAgICAgfQ0KKw0KKyAgICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihT
dGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MpOw0KKyAgICAgICAgICAgIGZTdGVwcGluZ0NvbnRyb2xs
ZXIuZGlzcG9zZSgpOw0KK30NCiAgICAgfQ0KIA0KICAgICBwcml2YXRlIE1hcDxQREFMYXVuY2gs
IExhdW5jaEFkYXB0ZXJTZXQ+IGZMYXVuY2hBZGFwdGVyU2V0cyA9DQo=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>106942</attachid>
            <date>2008-07-09 07:56:00 -0400</date>
            <delta_ts>2008-07-16 07:06:11 -0400</delta_ts>
            <desc>Final patch</desc>
            <filename>patch_214386_4.txt</filename>
            <type>text/plain</type>
            <size>115952</size>
            <attacher name="Anton Leherbauer">anton.leherbauer</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZGQuZ2RiDQpJ
bmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC9wcm92aXNpb25hbC9sYXVuY2hp
bmcvU2VydmljZXNMYXVuY2hTZXF1ZW5jZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2
c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5nZGIv
c3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC9wcm92aXNpb25hbC9sYXVuY2hpbmcvU2Vy
dmljZXNMYXVuY2hTZXF1ZW5jZS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS45DQpkaWZm
IC11IC1yMS45IFNlcnZpY2VzTGF1bmNoU2VxdWVuY2UuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBz
ZS9kZC9nZGIvaW50ZXJuYWwvcHJvdmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZpY2VzTGF1bmNoU2Vx
dWVuY2UuamF2YQkzIEp1bCAyMDA4IDE5OjA1OjIwIC0wMDAwCTEuOQ0KKysrIHNyYy9vcmcvZWNs
aXBzZS9kZC9nZGIvaW50ZXJuYWwvcHJvdmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZpY2VzTGF1bmNo
U2VxdWVuY2UuamF2YQk5IEp1bCAyMDA4IDExOjUwOjA4IC0wMDAwDQpAQCAtMjQsNyArMjQsNiBA
QA0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVNvdXJjZUxvb2t1cDsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrOw0KLWltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5nZGIuaW50ZXJuYWwucHJvdmlzaW9uYWwuc2VydmljZS5jb21tYW5kLkdEQkNv
bnRyb2w7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmdkYi5pbnRlcm5hbC5wcm92aXNpb25hbC5z
ZXJ2aWNlLmNvbW1hbmQuR0RCQ29udHJvbC5TZXNzaW9uVHlwZTsNCkBAIC01NiwxMCArNTUsNiBA
QA0KICAgICAgICAgfX0sDQogICAgICAgICBuZXcgU3RlcCgpIHsgQE92ZXJyaWRlDQogICAgICAg
ICBwdWJsaWMgdm9pZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7DQot
ICAgICAgICAgICAgbmV3IFN0ZXBRdWV1ZU1hbmFnZXIoZlNlc3Npb24pLmluaXRpYWxpemUocmVx
dWVzdE1vbml0b3IpOw0KLSAgICAgICAgfX0sDQotICAgICAgICBuZXcgU3RlcCgpIHsgQE92ZXJy
aWRlDQotICAgICAgICBwdWJsaWMgdm9pZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RN
b25pdG9yKSB7DQogICAgICAgICAJZkxhdW5jaC5nZXRTZXJ2aWNlRmFjdG9yeSgpLmNyZWF0ZVNl
cnZpY2UoZlNlc3Npb24sIElNZW1vcnkuY2xhc3MpLmluaXRpYWxpemUocmVxdWVzdE1vbml0b3Ip
Ow0KICAgICAgICAgfX0sDQogICAgICAgICBuZXcgU3RlcCgpIHsgQE92ZXJyaWRlDQojUCBvcmcu
ZWNsaXBzZS5kZC5leGFtcGxlcy5wZGENCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBs
ZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YQ0KPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3Jn
LmVjbGlwc2UuZGQuZXhhbXBsZXMucGRhL3NyYy9vcmcvZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEv
bGF1bmNoL1BEQVNlcnZpY2VzU2h1dGRvd25TZXF1ZW5jZS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS44DQpkaWZmIC11IC1yMS44IFBEQVNlcnZpY2VzU2h1dGRvd25TZXF1ZW5jZS5qYXZh
DQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9sYXVuY2gvUERBU2VydmljZXNT
aHV0ZG93blNlcXVlbmNlLmphdmEJMjUgQXByIDIwMDggMTg6MDE6MTcgLTAwMDAJMS44DQorKysg
c3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9sYXVuY2gvUERBU2VydmljZXNTaHV0ZG93
blNlcXVlbmNlLmphdmEJOSBKdWwgMjAwOCAxMTo1MDowOSAtMDAwMA0KQEAgLTE3LDcgKzE3LDYg
QEANCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlNlcXVlbmNlOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5CcmVha3BvaW50c01lZGlhdG9yOw0K
LWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2Vy
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlc1RyYWNrZXI7
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5zZXJ2aWNlLklEc2ZTZXJ2aWNlOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEuUERBUGx1Z2luOw0KQEAgLTg5LDEyICs4OCw2
IEBADQogICAgICAgICBuZXcgU3RlcCgpIHsNCiAgICAgICAgICAgICBAT3ZlcnJpZGUNCiAgICAg
ICAgICAgICBwdWJsaWMgdm9pZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9y
KSB7DQotICAgICAgICAgICAgICAgIHNodXRkb3duU2VydmljZShTdGVwUXVldWVNYW5hZ2VyLmNs
YXNzLCByZXF1ZXN0TW9uaXRvcik7DQotICAgICAgICAgICAgfQ0KLSAgICAgICAgfSwNCi0gICAg
ICAgIG5ldyBTdGVwKCkgew0KLSAgICAgICAgICAgIEBPdmVycmlkZQ0KLSAgICAgICAgICAgIHB1
YmxpYyB2b2lkIGV4ZWN1dGUoUmVxdWVzdE1vbml0b3IgcmVxdWVzdE1vbml0b3IpIHsNCiAgICAg
ICAgICAgICAgICAgc2h1dGRvd25TZXJ2aWNlKFBEQVJ1bkNvbnRyb2wuY2xhc3MsIHJlcXVlc3RN
b25pdG9yKTsNCiAgICAgICAgICAgICB9DQogICAgICAgICB9LA0KSW5kZXg6IHNyYy9vcmcvZWNs
aXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzSW5pdFNlcXVlbmNlLmphdmEN
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9w
bHVnaW5zL29yZy5lY2xpcHNlLmRkLmV4YW1wbGVzLnBkYS9zcmMvb3JnL2VjbGlwc2UvZGQvZXhh
bXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNlc0luaXRTZXF1ZW5jZS5qYXZhLHYNCnJldHJpZXZp
bmcgcmV2aXNpb24gMS44DQpkaWZmIC11IC1yMS44IFBEQVNlcnZpY2VzSW5pdFNlcXVlbmNlLmph
dmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2aWNl
c0luaXRTZXF1ZW5jZS5qYXZhCTE2IEp1biAyMDA4IDE4OjMwOjUyIC0wMDAwCTEuOA0KKysrIHNy
Yy9vcmcvZWNsaXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzSW5pdFNlcXVl
bmNlLmphdmEJOSBKdWwgMjAwOCAxMTo1MDowOSAtMDAwMA0KQEAgLTEzLDcgKzEzLDYgQEANCiBp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlNlcXVlbmNlOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5CcmVha3BvaW50c01lZGlhdG9yOw0KLWltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEuc2VydmljZS5QREFCcmVha3BvaW50QXR0cmlidXRlVHJh
bnNsYXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZXhhbXBsZXMucGRhLnNlcnZpY2UuUERB
QnJlYWtwb2ludHM7DQpAQCAtNTYsMTMgKzU1LDYgQEANCiAgICAgICAgIH0sDQogICAgICAgICBu
ZXcgU3RlcCgpIHsgDQogICAgICAgICAgICAgQE92ZXJyaWRlDQotICAgICAgICAgICAgcHVibGlj
IHZvaWQgZXhlY3V0ZShSZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgew0KLSAgICAgICAg
ICAgICAgICAvLyBTdGFydCB0aGUgc2VydmljZSB0byBtYW5hZ2Ugc3RlcCBhY3Rpb25zLg0KLSAg
ICAgICAgICAgICAgICBuZXcgU3RlcFF1ZXVlTWFuYWdlcihmU2Vzc2lvbikuaW5pdGlhbGl6ZShy
ZXF1ZXN0TW9uaXRvcik7DQotICAgICAgICAgICAgfQ0KLSAgICAgICAgfSwNCi0gICAgICAgIG5l
dyBTdGVwKCkgeyANCi0gICAgICAgICAgICBAT3ZlcnJpZGUNCiAgICAgICAgICAgICBwdWJsaWMg
dm9pZCBleGVjdXRlKGZpbmFsIFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7DQogICAg
ICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBsb3ctbGV2ZWwgYnJlYWtwb2ludCBzZXJ2aWNlIA0K
ICAgICAgICAgICAgICAgICBuZXcgUERBQnJlYWtwb2ludHMoZlNlc3Npb24pLmluaXRpYWxpemUo
bmV3IFJlcXVlc3RNb25pdG9yKGdldEV4ZWN1dG9yKCksIHJlcXVlc3RNb25pdG9yKSk7DQojUCBv
cmcuZWNsaXBzZS5kZC5nZGIudWkNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2ludGVy
bmFsL3VpL0dkYkFkYXB0ZXJGYWN0b3J5LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zz
cm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmdkYi51
aS9zcmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2ludGVybmFsL3VpL0dkYkFkYXB0ZXJGYWN0b3J5Lmph
dmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjEwDQpkaWZmIC11IC1yMS4xMCBHZGJBZGFwdGVy
RmFjdG9yeS5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC91aS9HZGJB
ZGFwdGVyRmFjdG9yeS5qYXZhCTI4IE1heSAyMDA4IDE4OjI1OjEyIC0wMDAwCTEuMTANCisrKyBz
cmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2ludGVybmFsL3VpL0dkYkFkYXB0ZXJGYWN0b3J5LmphdmEJ
OSBKdWwgMjAwOCAxMTo1MDoxMCAtMDAwMA0KQEAgLTE5LDYgKzE5LDcgQEANCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuY29yZS5ydW50aW1lLklBZGFwdGVyRmFjdG9yeTsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmNvbmN1cnJlbnQuSW1tdXRhYmxlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5UaHJlYWRTYWZlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlcjsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVp
LnZpZXdtb2RlbC5sYXVuY2guRGVmYXVsdERzZk1vZGVsU2VsZWN0aW9uUG9saWN5RmFjdG9yeTsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpLmFjdGlvbnMuRHNmUmVzdW1lQ29t
bWFuZDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpLmFjdGlvbnMuRHNmU3Rl
cEludG9Db21tYW5kOw0KQEAgLTc5LDYgKzgwLDcgQEANCiAgICAgICAgIGZpbmFsIERzZlN1c3Bl
bmRUcmlnZ2VyIGZTdXNwZW5kVHJpZ2dlcjsNCiAJCWZpbmFsIERzZlN0ZXBwaW5nTW9kZVRhcmdl
dCBmU3RlcHBpbmdNb2RlVGFyZ2V0Ow0KIAkJZmluYWwgSU1vZGVsU2VsZWN0aW9uUG9saWN5RmFj
dG9yeSBmTW9kZWxTZWxlY3Rpb25Qb2xpY3lGYWN0b3J5Ow0KKwkJZmluYWwgU3RlcHBpbmdDb250
cm9sbGVyIGZTdGVwcGluZ0NvbnRyb2xsZXI7DQogDQogICAgICAgICBTZXNzaW9uQWRhcHRlclNl
dChHZGJMYXVuY2ggbGF1bmNoKSB7DQogICAgICAgICAgICAgZkxhdW5jaCA9IGxhdW5jaDsNCkBA
IC04Niw4ICs4OCwxMiBAQA0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgIGZWaWV3TW9kZWxB
ZGFwdGVyID0gbmV3IEdkYlZpZXdNb2RlbEFkYXB0ZXIoc2Vzc2lvbik7DQogDQorICAgICAgICAg
ICAgLy8gcmVnaXN0ZXIgc3RlcHBpbmcgY29udHJvbGxlcg0KKyAgICAgICAgICAgIGZTdGVwcGlu
Z0NvbnRyb2xsZXIgPSBuZXcgU3RlcHBpbmdDb250cm9sbGVyKHNlc3Npb24pOw0KKyAgICAgICAg
ICAgIHNlc3Npb24ucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNz
LCBmU3RlcHBpbmdDb250cm9sbGVyKTsNCisNCiAgICAgICAgICAgICBpZiAobGF1bmNoLmdldFNv
dXJjZUxvY2F0b3IoKSBpbnN0YW5jZW9mIElTb3VyY2VMb29rdXBEaXJlY3Rvcikgew0KLSAgICAg
ICAgICAgICAgICBmU291cmNlRGlzcGxheUFkYXB0ZXIgPSBuZXcgRHNmU291cmNlRGlzcGxheUFk
YXB0ZXIoc2Vzc2lvbiwgKElTb3VyY2VMb29rdXBEaXJlY3RvcilsYXVuY2guZ2V0U291cmNlTG9j
YXRvcigpKTsNCisgICAgICAgICAgICAgICAgZlNvdXJjZURpc3BsYXlBZGFwdGVyID0gbmV3IERz
ZlNvdXJjZURpc3BsYXlBZGFwdGVyKHNlc3Npb24sIChJU291cmNlTG9va3VwRGlyZWN0b3IpbGF1
bmNoLmdldFNvdXJjZUxvY2F0b3IoKSwgZlN0ZXBwaW5nQ29udHJvbGxlcik7DQogICAgICAgICAg
ICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgZlNvdXJjZURpc3BsYXlBZGFwdGVyID0gbnVs
bDsNCiAgICAgICAgICAgICB9DQpAQCAtMTM3LDcgKzE0MywxMCBAQA0KIA0KICAgICAgICAgICAg
IHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJU291cmNlRGlzcGxheS5jbGFzcyk7DQog
ICAgICAgICAgICAgaWYgKGZTb3VyY2VEaXNwbGF5QWRhcHRlciAhPSBudWxsKSBmU291cmNlRGlz
cGxheUFkYXB0ZXIuZGlzcG9zZSgpOw0KLSAgICAgICAgICAgIA0KKw0KKyAgICAgICAgICAgIHNl
c3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MpOw0K
KyAgICAgICAgICAgIGZTdGVwcGluZ0NvbnRyb2xsZXIuZGlzcG9zZSgpOw0KKw0KICAgICAgICAg
ICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJU3RlcHBpbmdNb2RlVGFyZ2V0LmNs
YXNzKTsNCiAgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSVN0ZXBJ
bnRvSGFuZGxlci5jbGFzcyk7DQogICAgICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxB
ZGFwdGVyKElTdGVwT3ZlckhhbmRsZXIuY2xhc3MpOw0KQEAgLTE0Nyw3ICsxNTYsNyBAQA0KICAg
ICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJUmVzdGFydC5jbGFzcyk7
DQogICAgICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElUZXJtaW5hdGVI
YW5kbGVyLmNsYXNzKTsNCiAgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0
ZXIoSU1vZGVsU2VsZWN0aW9uUG9saWN5RmFjdG9yeS5jbGFzcyk7DQotDQorICAgICAgICAgICAg
DQogICAgICAgICAgICAgZlN0ZXBJbnRvQ29tbWFuZC5kaXNwb3NlKCk7DQogICAgICAgICAgICAg
ZlN0ZXBPdmVyQ29tbWFuZC5kaXNwb3NlKCk7DQogICAgICAgICAgICAgZlN0ZXBSZXR1cm5Db21t
YW5kLmRpc3Bvc2UoKTsNCiNQIG9yZy5lY2xpcHNlLmRkLmRzZi51aQ0KSW5kZXg6IHNyYy9vcmcv
ZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL1ZNRGVsdGEuamF2YQ0KPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNT
IGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlw
c2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL1ZNRGVsdGEu
amF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuOQ0KZGlmZiAtdSAtcjEuOSBWTURlbHRhLmph
dmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9WTURlbHRhLmphdmEJ
MTcgSnVuIDIwMDggMjA6NDY6MjYgLTAwMDAJMS45DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi91aS92aWV3bW9kZWwvVk1EZWx0YS5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTEgLTAwMDANCkBA
IC0yMDAsNiArMjAwLDggQEANCiAJICogDQogCSAqIEBwYXJhbSBlbGVtZW50IGNoaWxkIGVsZW1l
bnQNCiAJICogQHJldHVybiBjb3JyZXNwb25kaW5nIGRlbHRhIG5vZGUsIG9yIDxjb2RlPm51bGw8
L2NvZGU+DQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQogCSAqLw0KIAlAT3ZlcnJpZGUNCiAJcHVi
bGljIFZNRGVsdGEgZ2V0Q2hpbGREZWx0YShPYmplY3QgZWxlbWVudCkgew0KSW5kZXg6IHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1Qcm92aWRlci5qYXZhDQo9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1
Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3
bW9kZWwvQWJzdHJhY3RWTVByb3ZpZGVyLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjI1
DQpkaWZmIC11IC1yMS4yNSBBYnN0cmFjdFZNUHJvdmlkZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1Qcm92aWRlci5qYXZhCTI0IEp1biAy
MDA4IDE4OjEzOjEzIC0wMDAwCTEuMjUNCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3Zp
ZXdtb2RlbC9BYnN0cmFjdFZNUHJvdmlkZXIuamF2YQk5IEp1bCAyMDA4IDExOjUwOjExIC0wMDAw
DQpAQCAtMjAsNiArMjAsNyBAQA0KIGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5FeGVjdXRv
cjsNCiBpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRp
b247DQogDQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkNvdW50aW5nUmVx
dWVzdE1vbml0b3I7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRhdGFS
ZXF1ZXN0TW9uaXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuSURz
ZlN0YXR1c0NvbnN0YW50czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQu
UmVxdWVzdE1vbml0b3I7DQpAQCAtNjAsNyArNjEsNyBAQA0KICAqIEBzZWUgSVZNTm9kZQ0KICAq
Lw0KIEBTdXBwcmVzc1dhcm5pbmdzKCJyZXN0cmljdGlvbiIpDQotYWJzdHJhY3QgcHVibGljIGNs
YXNzIEFic3RyYWN0Vk1Qcm92aWRlciBpbXBsZW1lbnRzIElWTVByb3ZpZGVyDQorYWJzdHJhY3Qg
cHVibGljIGNsYXNzIEFic3RyYWN0Vk1Qcm92aWRlciBpbXBsZW1lbnRzIElWTVByb3ZpZGVyLCBJ
Vk1FdmVudExpc3RlbmVyDQogew0KICAgICANCiAgICAgLyoqIFJlZmVyZW5jZSB0byB0aGUgVk0g
YWRhcHRlciB0aGF0IG93bnMgdGhpcyBwcm92aWRlciAqLw0KQEAgLTIwNCw4ICsyMDUsMjAgQEAN
CiAgICAgICogUHJvY2Vzc2VzIHRoZSBnaXZlbiBldmVudCBpbiB0aGUgZ2l2ZW4gcHJvdmlkZXIs
IHNlbmRpbmcgbW9kZWwgDQogICAgICAqIGRlbHRhcyBpZiBuZWNlc3NhcnkuDQogICAgICAqLw0K
LSAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChmaW5hbCBPYmplY3QgZXZlbnQpIHsNCi0gICAg
ICAgIGZvciAoZmluYWwgSVZNTW9kZWxQcm94eSBwcm94eVN0cmF0ZWd5IDogZ2V0QWN0aXZlTW9k
ZWxQcm94aWVzKCkpIHsNCisJcHVibGljIHZvaWQgaGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2
ZW50KSB7DQorICAgIAloYW5kbGVFdmVudChldmVudCwgbnVsbCk7DQorICAgIH0NCisJDQorICAg
IC8qKg0KKyAgICAgKiB7QGluaGVyaXREb2N9DQorCSAqIEBzaW5jZSAxLjENCisJICovDQorICAg
IHB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCwgUmVxdWVzdE1vbml0
b3Igcm0pIHsNCisgICAgCUNvdW50aW5nUmVxdWVzdE1vbml0b3IgY3JtID0gbmV3IENvdW50aW5n
UmVxdWVzdE1vbml0b3IoZ2V0RXhlY3V0b3IoKSwgcm0pOw0KKyAgICAgICAgZmluYWwgTGlzdDxJ
Vk1Nb2RlbFByb3h5PiBhY3RpdmVNb2RlbFByb3hpZXM9IG5ldyBBcnJheUxpc3Q8SVZNTW9kZWxQ
cm94eT4oZ2V0QWN0aXZlTW9kZWxQcm94aWVzKCkpOw0KKyAgICAJY3JtLnNldERvbmVDb3VudChh
Y3RpdmVNb2RlbFByb3hpZXMuc2l6ZSgpKTsNCisNCisgICAgCWZvciAoZmluYWwgSVZNTW9kZWxQ
cm94eSBwcm94eVN0cmF0ZWd5IDogYWN0aXZlTW9kZWxQcm94aWVzKSB7DQogICAgICAgICAgICAg
aWYgKHByb3h5U3RyYXRlZ3kuaXNEZWx0YUV2ZW50KGV2ZW50KSkgew0KICAgICAgICAgICAgICAg
ICBpZiAoIWZFdmVudFF1ZXVlcy5jb250YWluc0tleShwcm94eVN0cmF0ZWd5KSkgew0KICAgICAg
ICAgICAgICAgICAgICAgZkV2ZW50UXVldWVzLnB1dChwcm94eVN0cmF0ZWd5LCBuZXcgTW9kZWxQ
cm94eUV2ZW50UXVldWUoKSk7DQpAQCAtMjIyLDEzICsyMzUsMTYgQEANCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAgICAgIH0NCisgICAgICAgICAgICAgICAgICAgIGNybS5kb25lKCk7DQogICAgICAgICAg
ICAgICAgICAgICBxdWV1ZS5mRXZlbnRRdWV1ZS5hZGQoZXZlbnQpOw0KICAgICAgICAgICAgICAg
ICB9IGVsc2Ugew0KLSAgICAgICAgICAgICAgICAgICAgZG9IYW5kbGVFdmVudChxdWV1ZSwgcHJv
eHlTdHJhdGVneSwgZXZlbnQpOyANCisgICAgICAgICAgICAgICAgICAgIGRvSGFuZGxlRXZlbnQo
cXVldWUsIHByb3h5U3RyYXRlZ3ksIGV2ZW50LCBjcm0pOw0KICAgICAgICAgICAgICAgICB9DQor
ICAgICAgICAgICAgfSBlbHNlIHsNCisgICAgICAgICAgICAJY3JtLmRvbmUoKTsNCiAgICAgICAg
ICAgICB9DQogICAgICAgICB9DQotICAgICAgICANCisNCiAgICAgICAgIC8vIENsZWFuIHVwIG1v
ZGVsIHByb3hpZXMgdGhhdCB3ZXJlIHJlbW92ZWQuDQogICAgICAgICBMaXN0PElWTU1vZGVsUHJv
eHk+IGFjdGl2ZVByb3hpZXMgPSBnZXRBY3RpdmVNb2RlbFByb3hpZXMoKTsNCiAgICAgICAgIGZv
ciAoSXRlcmF0b3I8SVZNTW9kZWxQcm94eT4gaXRyID0gZkV2ZW50UXVldWVzLmtleVNldCgpLml0
ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7DQpAQCAtMjM3LDggKzI1MywyMiBAQA0KICAgICAg
ICAgICAgIH0NCiAgICAgICAgIH0NCiAgICAgfQ0KLSAgICAgDQotICAgIHByaXZhdGUgdm9pZCBk
b0hhbmRsZUV2ZW50KGZpbmFsIE1vZGVsUHJveHlFdmVudFF1ZXVlIHF1ZXVlLCBmaW5hbCBJVk1N
b2RlbFByb3h5IHByb3h5U3RyYXRlZ3ksIGZpbmFsIE9iamVjdCBldmVudCkgew0KKw0KKyAgICAv
KioNCisgICAgICoge0Bpbmhlcml0RG9jfQ0KKwkgKiBAc2luY2UgMS4xDQorCSAqLw0KKyAgICBw
dWJsaWMgdm9pZCBhYm91dFRvSGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50KSB7DQorICAg
IH0NCisNCisgICAgLyoqDQorICAgICAqIHtAaW5oZXJpdERvY30NCisJICogQHNpbmNlIDEuMQ0K
KwkgKi8NCisgICAgcHVibGljIHZvaWQgZG9uZUhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVu
dCkgew0KKyAgICB9DQorDQorICAgIHByaXZhdGUgdm9pZCBkb0hhbmRsZUV2ZW50KGZpbmFsIE1v
ZGVsUHJveHlFdmVudFF1ZXVlIHF1ZXVlLCBmaW5hbCBJVk1Nb2RlbFByb3h5IHByb3h5U3RyYXRl
Z3ksIGZpbmFsIE9iamVjdCBldmVudCwgZmluYWwgUmVxdWVzdE1vbml0b3Igcm0pIHsNCiAgICAg
ICAgIHF1ZXVlLmZQcm9jZXNzaW5nRXZlbnQgPSB0cnVlOw0KICAgICAgICAgaGFuZGxlRXZlbnQo
DQogICAgICAgICAgICAgcHJveHlTdHJhdGVneSwgZXZlbnQsIA0KQEAgLTI0Nyw4ICsyNzcsMTAg
QEANCiAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxldGVkKCkgew0K
ICAgICAgICAgICAgICAgICAgICAgcXVldWUuZlByb2Nlc3NpbmdFdmVudCA9IGZhbHNlOw0KICAg
ICAgICAgICAgICAgICAgICAgaWYgKCFxdWV1ZS5mRXZlbnRRdWV1ZS5pc0VtcHR5KCkpIHsNCi0g
ICAgICAgICAgICAgICAgICAgICAgICBkb0hhbmRsZUV2ZW50KHF1ZXVlLCBwcm94eVN0cmF0ZWd5
LCBxdWV1ZS5mRXZlbnRRdWV1ZS5yZW1vdmUoMCkpOw0KLSAgICAgICAgICAgICAgICAgICAgfSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KKyAgICAgICAgICAgICAgICAgICAg
ICAgIGRvSGFuZGxlRXZlbnQocXVldWUsIHByb3h5U3RyYXRlZ3ksIHF1ZXVlLmZFdmVudFF1ZXVl
LnJlbW92ZSgwKSwgcm0pOw0KKyAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCisgICAgICAg
ICAgICAgICAgICAgIAlybS5kb25lKCk7DQorICAgICAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICB9KTsNCiAgICAgfQ0KSW5kZXg6IHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVyLmphdmENCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29y
Zy5lY2xpcHNlLmRkLmRzZi51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9B
YnN0cmFjdFZNQWRhcHRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xMg0KZGlmZiAt
dSAtcjEuMTIgQWJzdHJhY3RWTUFkYXB0ZXIuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVyLmphdmEJMiBKdW4gMjAwOCAxNzo1NDo0
NSAtMDAwMAkxLjEyDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJz
dHJhY3RWTUFkYXB0ZXIuamF2YQk5IEp1bCAyMDA4IDExOjUwOjExIC0wMDAwDQpAQCAtMTAsMTQg
KzEwLDIwIEBADQogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQogcGFja2FnZSBvcmcuZWNsaXBz
ZS5kZC5kc2YudWkudmlld21vZGVsOw0KIA0KK2ltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0Ow0K
IGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7DQogaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw
Ow0KK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsNCiBpbXBvcnQgamF2YS51dGlsLk1hcDsNCitpbXBv
cnQgamF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3I7DQogaW1wb3J0IGphdmEudXRpbC5jb25j
dXJyZW50LlJlamVjdGVkRXhlY3V0aW9uRXhjZXB0aW9uOw0KIA0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5jb3JlLnJ1bnRpbWUuSVN0YXR1czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1l
LlN0YXR1czsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuQ291bnRpbmdS
ZXF1ZXN0TW9uaXRvcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuRHNm
UnVubmFibGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LklEc2ZTdGF0
dXNDb25zdGFudHM7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVl
c3RNb25pdG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRT
YWZlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuaW50ZXJuYWwudWkuRHNmVUlQbHVnaW47
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRlYnVnLmludGVybmFsLnVpLnZpZXdlcnMubW9kZWwucHJv
dmlzaW9uYWwuSUNoaWxkcmVuQ291bnRVcGRhdGU7DQpAQCAtMjgsNiArMzQsNyBAQA0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZWJ1Zy5pbnRlcm5hbC51aS52aWV3ZXJzLm1vZGVsLnByb3Zpc2lvbmFs
LklQcmVzZW50YXRpb25Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy5pbnRlcm5h
bC51aS52aWV3ZXJzLm1vZGVsLnByb3Zpc2lvbmFsLklWaWV3ZXJJbnB1dFVwZGF0ZTsNCiBpbXBv
cnQgb3JnLmVjbGlwc2UuZGVidWcuaW50ZXJuYWwudWkudmlld2Vycy5tb2RlbC5wcm92aXNpb25h
bC5JVmlld2VyVXBkYXRlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS52aWV3ZXJzLlRyZWVQ
YXRoOw0KIA0KIC8qKiANCiAgKiBCYXNlIGltcGxlbWVudGF0aW9uIGZvciBWaWV3IE1vZGVsIEFk
YXB0ZXJzLiAgVGhlIGltcGxlbWVudGF0aW9uIHVzZXMNCkBAIC0zOCwxMCArNDUsMTQwIEBADQog
QFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikNCiBhYnN0cmFjdCBwdWJsaWMgY2xhc3Mg
QWJzdHJhY3RWTUFkYXB0ZXIgaW1wbGVtZW50cyBJVk1BZGFwdGVyDQogew0KLSAgICBwcml2YXRl
IGJvb2xlYW4gZkRpc3Bvc2VkOw0KKyANCisJLyoqDQorCSAqIEludGVyZmFjZSBmb3IgYSB2aWV3
ZXIgdXBkYXRlIHdoaWNoIGNhbiBiZSAibW9uaXRvcmVkIi4NCisJICovDQorCWludGVyZmFjZSBJ
TW9uaXRvcmVkVXBkYXRlIGV4dGVuZHMgSVZpZXdlclVwZGF0ZSB7DQorIAkJYm9vbGVhbiBpc0Rv
bmUoKTsNCisgCQl2b2lkIHNldE1vbml0b3IoUmVxdWVzdE1vbml0b3IgbW9uaXRvcik7DQorCX0N
CisNCisJLyoqDQorCSAqIFdyYXBzIGFuIElWaWV3ZXJVcGRhdGUgdG8gYWRkIGEgcmVxdWVzdCBt
b25pdG9yLg0KKwkgKi8NCisJYWJzdHJhY3Qgc3RhdGljIGNsYXNzIE1vbml0b3JlZFVwZGF0ZSBp
bXBsZW1lbnRzIElNb25pdG9yZWRVcGRhdGUgew0KKw0KKwkJcHJvdGVjdGVkIElWaWV3ZXJVcGRh
dGUgZkRlbGVnYXRlOw0KKwkJcHJpdmF0ZSBib29sZWFuIGZJc0RvbmU7DQorCQlwcml2YXRlIFJl
cXVlc3RNb25pdG9yIGZNb25pdG9yOw0KKw0KKwkJTW9uaXRvcmVkVXBkYXRlKElWaWV3ZXJVcGRh
dGUgdXBkYXRlKSB7DQorCQkJZkRlbGVnYXRlID0gdXBkYXRlOw0KKwkJfQ0KKw0KKwkJcHVibGlj
IGJvb2xlYW4gaXNEb25lKCkgew0KKwkJCXJldHVybiBmSXNEb25lOw0KKwkJfQ0KKw0KKwkJcHVi
bGljIHZvaWQgc2V0TW9uaXRvcihSZXF1ZXN0TW9uaXRvciBtb25pdG9yKSB7DQorCQkJZk1vbml0
b3IgPSBtb25pdG9yOw0KKwkJCWlmIChmSXNEb25lKSB7DQorCQkJCW1vbml0b3IuZG9uZSgpOw0K
KwkJCX0NCisJCX0NCisNCisJCXB1YmxpYyBPYmplY3QgZ2V0RWxlbWVudCgpIHsNCisJCQlyZXR1
cm4gZkRlbGVnYXRlLmdldEVsZW1lbnQoKTsNCisJCX0NCisNCisJCXB1YmxpYyBUcmVlUGF0aCBn
ZXRFbGVtZW50UGF0aCgpIHsNCisJCQlyZXR1cm4gZkRlbGVnYXRlLmdldEVsZW1lbnRQYXRoKCk7
DQorCQl9DQorDQorCQlwdWJsaWMgSVByZXNlbnRhdGlvbkNvbnRleHQgZ2V0UHJlc2VudGF0aW9u
Q29udGV4dCgpIHsNCisJCQlyZXR1cm4gZkRlbGVnYXRlLmdldFByZXNlbnRhdGlvbkNvbnRleHQo
KTsNCisJCX0NCisNCisJCXB1YmxpYyBPYmplY3QgZ2V0Vmlld2VySW5wdXQoKSB7DQorCQkJcmV0
dXJuIGZEZWxlZ2F0ZS5nZXRWaWV3ZXJJbnB1dCgpOw0KKwkJfQ0KKw0KKwkJcHVibGljIHZvaWQg
Y2FuY2VsKCkgew0KKwkJCWZEZWxlZ2F0ZS5jYW5jZWwoKTsNCisJCQlpZiAoIWZJc0RvbmUpIHsN
CisJCQkJZklzRG9uZSA9IHRydWU7DQorCQkJCWlmIChmTW9uaXRvciAhPSBudWxsKSB7DQorCQkJ
CQlmTW9uaXRvci5kb25lKCk7DQorCQkJCX0NCisJCQl9DQorCQl9DQorDQorCQlwdWJsaWMgdm9p
ZCBkb25lKCkgew0KKwkJCWZEZWxlZ2F0ZS5kb25lKCk7DQorCQkJaWYgKCFmSXNEb25lKSB7DQor
CQkJCWZJc0RvbmUgPSB0cnVlOw0KKwkJCQlpZiAoZk1vbml0b3IgIT0gbnVsbCkgew0KKwkJCQkJ
Zk1vbml0b3IuZG9uZSgpOw0KKwkJCQl9DQorCQkJfQ0KKwkJfQ0KKw0KKwkJcHVibGljIElTdGF0
dXMgZ2V0U3RhdHVzKCkgew0KKwkJCXJldHVybiBmRGVsZWdhdGUuZ2V0U3RhdHVzKCk7DQorCQl9
DQorDQorCQlwdWJsaWMgYm9vbGVhbiBpc0NhbmNlbGVkKCkgew0KKwkJCXJldHVybiBmRGVsZWdh
dGUuaXNDYW5jZWxlZCgpOw0KKwkJfQ0KKw0KKwkJcHVibGljIHZvaWQgc2V0U3RhdHVzKElTdGF0
dXMgc3RhdHVzKSB7DQorCQkJZkRlbGVnYXRlLnNldFN0YXR1cyhzdGF0dXMpOw0KKwkJfQ0KKw0K
Kwl9DQorDQorCXN0YXRpYyBjbGFzcyBNb25pdG9yZWRDaGlsZHJlblVwZGF0ZSBleHRlbmRzIE1v
bml0b3JlZFVwZGF0ZSBpbXBsZW1lbnRzIElDaGlsZHJlblVwZGF0ZSB7DQorCQlwdWJsaWMgTW9u
aXRvcmVkQ2hpbGRyZW5VcGRhdGUoSUNoaWxkcmVuVXBkYXRlIHVwZGF0ZSkgew0KKwkJCXN1cGVy
KHVwZGF0ZSk7DQorCQl9DQorDQorCQlwdWJsaWMgaW50IGdldExlbmd0aCgpIHsNCisJCQlyZXR1
cm4gKChJQ2hpbGRyZW5VcGRhdGUpZkRlbGVnYXRlKS5nZXRMZW5ndGgoKTsNCisJCX0NCisNCisJ
CXB1YmxpYyBpbnQgZ2V0T2Zmc2V0KCkgew0KKwkJCXJldHVybiAoKElDaGlsZHJlblVwZGF0ZSlm
RGVsZWdhdGUpLmdldE9mZnNldCgpOw0KKwkJfQ0KKw0KKwkJcHVibGljIHZvaWQgc2V0Q2hpbGQo
T2JqZWN0IGNoaWxkLCBpbnQgb2Zmc2V0KSB7DQorCQkJKChJQ2hpbGRyZW5VcGRhdGUpZkRlbGVn
YXRlKS5zZXRDaGlsZChjaGlsZCwgb2Zmc2V0KTsNCisJCX0NCisJCQ0KKwl9DQorDQorCXN0YXRp
YyBjbGFzcyBNb25pdG9yZWRIYXNDaGlsZHJlblVwZGF0ZSBleHRlbmRzIE1vbml0b3JlZFVwZGF0
ZSBpbXBsZW1lbnRzIElIYXNDaGlsZHJlblVwZGF0ZSB7DQorCQlwdWJsaWMgTW9uaXRvcmVkSGFz
Q2hpbGRyZW5VcGRhdGUoSUhhc0NoaWxkcmVuVXBkYXRlIHVwZGF0ZSkgew0KKwkJCXN1cGVyKHVw
ZGF0ZSk7DQorCQl9DQorDQorCQlwdWJsaWMgdm9pZCBzZXRIYXNDaGlscmVuKGJvb2xlYW4gaGFz
Q2hpbGRyZW4pIHsNCisJCQkoKElIYXNDaGlsZHJlblVwZGF0ZSlmRGVsZWdhdGUpLnNldEhhc0No
aWxyZW4oaGFzQ2hpbGRyZW4pOw0KKwkJfQ0KKw0KKwl9DQorDQorCXN0YXRpYyBjbGFzcyBNb25p
dG9yZWRDaGlsZHJlbkNvdW50VXBkYXRlIGV4dGVuZHMgTW9uaXRvcmVkVXBkYXRlIGltcGxlbWVu
dHMgSUNoaWxkcmVuQ291bnRVcGRhdGUgew0KKwkJcHVibGljIE1vbml0b3JlZENoaWxkcmVuQ291
bnRVcGRhdGUoSUNoaWxkcmVuQ291bnRVcGRhdGUgdXBkYXRlKSB7DQorCQkJc3VwZXIodXBkYXRl
KTsNCisJCX0NCisNCisJCXB1YmxpYyB2b2lkIHNldENoaWxkQ291bnQoaW50IG51bUNoaWxkcmVu
KSB7DQorCQkJKChJQ2hpbGRyZW5Db3VudFVwZGF0ZSlmRGVsZWdhdGUpLnNldENoaWxkQ291bnQo
bnVtQ2hpbGRyZW4pOw0KKwkJfQ0KKw0KKwl9DQorDQorDQorCXByaXZhdGUgYm9vbGVhbiBmRGlz
cG9zZWQ7DQogDQogICAgIHByaXZhdGUgZmluYWwgTWFwPElQcmVzZW50YXRpb25Db250ZXh0LCBJ
Vk1Qcm92aWRlcj4gZlZpZXdNb2RlbFByb3ZpZGVycyA9IA0KLSAgICAgICAgQ29sbGVjdGlvbnMu
c3luY2hyb25pemVkTWFwKCBuZXcgSGFzaE1hcDxJUHJlc2VudGF0aW9uQ29udGV4dCwgSVZNUHJv
dmlkZXI+KCkgKTsgDQorICAgICAgICBDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRNYXAoIG5ldyBI
YXNoTWFwPElQcmVzZW50YXRpb25Db250ZXh0LCBJVk1Qcm92aWRlcj4oKSApOw0KKw0KKwkvKioN
CisJICogTGlzdCBvZiBJVmlld2VyVXBkYXRlcyBwZW5kaW5nIGFmdGVyIHByb2Nlc3NpbmcgYW4g
ZXZlbnQuDQorCSAqLw0KKwlwcml2YXRlIGZpbmFsIExpc3Q8SU1vbml0b3JlZFVwZGF0ZT4gZlBl
bmRpbmdVcGRhdGVzID0gbmV3IEFycmF5TGlzdDxJTW9uaXRvcmVkVXBkYXRlPigpOw0KIA0KICAg
ICAvKioNCiAgICAgICogQ29uc3RydWN0b3IgZm9yIHRoZSBWaWV3IE1vZGVsIHNlc3Npb24uICBJ
dCBpcyB0ZW1wdGluZyB0byBoYXZlIHRoZSANCkBAIC03MCw2ICsyMDcsMTYgQEANCiAgICAgICAg
IH0NCiAgICAgfQ0KIA0KKyAgICAvKioNCisgICAgICogRW51bWVyYXRlIHRoZSBWTSBwcm92aWRl
cnMuDQorICAgICAqIEByZXR1cm4gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIEl0ZXJhYmxlPElWTVBy
b3ZpZGVyPn0NCisgICAgICogDQorCSAqIEBzaW5jZSAxLjENCisJICovDQorICAgIHByb3RlY3Rl
ZCBJdGVyYWJsZTxJVk1Qcm92aWRlcj4gZ2V0Vk1Qcm92aWRlckl0ZXJhYmxlKCkgew0KKyAgICAJ
cmV0dXJuIGZWaWV3TW9kZWxQcm92aWRlcnMudmFsdWVzKCk7DQorICAgIH0NCisNCiAgICAgcHVi
bGljIHZvaWQgZGlzcG9zZSgpIHsNCiAgICAgICAgIElWTVByb3ZpZGVyW10gcHJvdmlkZXJzID0g
bmV3IElWTVByb3ZpZGVyWzBdOyANCiAgICAgICAgIHN5bmNocm9uaXplZChmVmlld01vZGVsUHJv
dmlkZXJzKSB7DQpAQCAtOTEsMzEgKzIzOCwyOSBAQA0KICAgICAgICAgfQ0KICAgICB9DQogICAg
IA0KKyAgICAvKioNCisJICogQHJldHVybiB3aGV0aGVyIHRoaXMgVk0gYWRhcHRlciBpcyBkaXNw
b3NlZC4NCisJICogDQorICAgICAqIEBzaW5jZSAxLjENCisJICovDQorCXB1YmxpYyBib29sZWFu
IGlzRGlzcG9zZWQoKSB7DQorCQlyZXR1cm4gZkRpc3Bvc2VkOw0KKwl9DQorDQogICAgIHB1Ymxp
YyB2b2lkIHVwZGF0ZShJSGFzQ2hpbGRyZW5VcGRhdGVbXSB1cGRhdGVzKSB7DQotICAgICAgICBJ
Vk1Qcm92aWRlciBwcm92aWRlciA9IGdldFZNUHJvdmlkZXIodXBkYXRlc1swXS5nZXRQcmVzZW50
YXRpb25Db250ZXh0KCkpOw0KLSAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwpIHsNCi0gICAg
ICAgICAgICB1cGRhdGVQcm92aWRlcihwcm92aWRlciwgdXBkYXRlcyk7DQotICAgICAgICB9IGVs
c2Ugew0KLSAgICAgICAgICAgIGZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1cGRhdGVzKSB7
DQotICAgICAgICAgICAgICAgIHVwZGF0ZS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVS
Uk9SLCBEc2ZVSVBsdWdpbi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMuSU5URVJOQUxf
RVJST1IsIA0KLSAgICAgICAgICAgICAgICAgICAgIk5vIG1vZGVsIHByb3ZpZGVyIGZvciB1cGRh
dGUgIiArIHVwZGF0ZSwgbnVsbCkpOyAvLyROT04tTkxTLTEkDQotICAgICAgICAgICAgfQ0KLSAg
ICAgICAgfQ0KKyAgICAJaGFuZGxlVXBkYXRlKHVwZGF0ZXMpOw0KICAgICB9DQogICAgIA0KICAg
ICBwdWJsaWMgdm9pZCB1cGRhdGUoSUNoaWxkcmVuQ291bnRVcGRhdGVbXSB1cGRhdGVzKSB7DQot
ICAgICAgICBJVk1Qcm92aWRlciBwcm92aWRlciA9IGdldFZNUHJvdmlkZXIodXBkYXRlc1swXS5n
ZXRQcmVzZW50YXRpb25Db250ZXh0KCkpOw0KLSAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwp
IHsNCi0gICAgICAgICAgICB1cGRhdGVQcm92aWRlcihwcm92aWRlciwgdXBkYXRlcyk7DQotICAg
ICAgICB9IGVsc2Ugew0KLSAgICAgICAgICAgIGZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1
cGRhdGVzKSB7DQotICAgICAgICAgICAgICAgIHVwZGF0ZS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJ
U3RhdHVzLkVSUk9SLCBEc2ZVSVBsdWdpbi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMu
SU5URVJOQUxfRVJST1IsIA0KLSAgICAgICAgICAgICAgICAgICAgIk5vIG1vZGVsIHByb3ZpZGVy
IGZvciB1cGRhdGUgIiArIHVwZGF0ZSwgbnVsbCkpOyAvLyROT04tTkxTLTEkDQotICAgICAgICAg
ICAgfQ0KLSAgICAgICAgfQ0KKyAgICAJaGFuZGxlVXBkYXRlKHVwZGF0ZXMpOw0KICAgICB9DQog
ICAgIA0KICAgICBwdWJsaWMgdm9pZCB1cGRhdGUoZmluYWwgSUNoaWxkcmVuVXBkYXRlW10gdXBk
YXRlcykgew0KKyAgICAJaGFuZGxlVXBkYXRlKHVwZGF0ZXMpOw0KKyAgICB9DQorICAgIA0KKyAg
ICBwcml2YXRlIHZvaWQgaGFuZGxlVXBkYXRlKElWaWV3ZXJVcGRhdGVbXSB1cGRhdGVzKSB7DQor
ICAgIAl1cGRhdGVzID0gd3JhcFVwZGF0ZXModXBkYXRlcyk7DQogICAgICAgICBJVk1Qcm92aWRl
ciBwcm92aWRlciA9IGdldFZNUHJvdmlkZXIodXBkYXRlc1swXS5nZXRQcmVzZW50YXRpb25Db250
ZXh0KCkpOw0KICAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICB1
cGRhdGVQcm92aWRlcihwcm92aWRlciwgdXBkYXRlcyk7DQpAQCAtMTIzLDEwICsyNjgsMTEgQEAN
CiAgICAgICAgICAgICBmb3IgKElWaWV3ZXJVcGRhdGUgdXBkYXRlIDogdXBkYXRlcykgew0KICAg
ICAgICAgICAgICAgICB1cGRhdGUuc2V0U3RhdHVzKG5ldyBTdGF0dXMoSVN0YXR1cy5FUlJPUiwg
RHNmVUlQbHVnaW4uUExVR0lOX0lELCBJRHNmU3RhdHVzQ29uc3RhbnRzLklOVEVSTkFMX0VSUk9S
LCANCiAgICAgICAgICAgICAgICAgICAgICJObyBtb2RlbCBwcm92aWRlciBmb3IgdXBkYXRlICIg
KyB1cGRhdGUsIG51bGwpKTsgLy8kTk9OLU5MUy0xJA0KKyAgICAgICAgICAgICAgICB1cGRhdGUu
ZG9uZSgpOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgIH0NCiAgICAgfQ0KLSAgICAgICAgICAg
IA0KKw0KICAgICBwcml2YXRlIHZvaWQgdXBkYXRlUHJvdmlkZXIoZmluYWwgSVZNUHJvdmlkZXIg
cHJvdmlkZXIsIGZpbmFsIElWaWV3ZXJVcGRhdGVbXSB1cGRhdGVzKSB7DQogICAgICAgICB0cnkg
ew0KICAgICAgICAgICAgIHByb3ZpZGVyLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFi
bGUoKSB7DQpAQCAtMTg3LDQgKzMzMyw5OSBAQA0KICAgICAgKi8NCiAgICAgQFRocmVhZFNhZmUg
ICAgDQogICAgIGFic3RyYWN0IHByb3RlY3RlZCBJVk1Qcm92aWRlciBjcmVhdGVWaWV3TW9kZWxQ
cm92aWRlcihJUHJlc2VudGF0aW9uQ29udGV4dCBjb250ZXh0KTsNCisNCisJLyoqDQorCSAqIERp
c3BhdGNoIGdpdmVuIGV2ZW50IHRvIFZNIHByb3ZpZGVycyBpbnRlcmVzdGVkIGluIGV2ZW50cy4N
CisJICogDQorCSAqIEBzaW5jZSAxLjENCisJICovDQorCXByb3RlY3RlZCBmaW5hbCB2b2lkIGhh
bmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCkgew0KKyAgICAJZmluYWwgTGlzdDxJVk1FdmVu
dExpc3RlbmVyPiBldmVudExpc3RlbmVycyA9IG5ldyBBcnJheUxpc3Q8SVZNRXZlbnRMaXN0ZW5l
cj4oKTsNCisJDQorCQlmb3IgKElWTVByb3ZpZGVyIHZtUHJvdmlkZXIgOiBnZXRWTVByb3ZpZGVy
SXRlcmFibGUoKSkgew0KKwkJCWlmICh2bVByb3ZpZGVyIGluc3RhbmNlb2YgSVZNRXZlbnRMaXN0
ZW5lcikgew0KKwkJCQlmaW5hbCBJVk1FdmVudExpc3RlbmVyIHZtRXZlbnRMaXN0ZW5lcj0gKElW
TUV2ZW50TGlzdGVuZXIpIHZtUHJvdmlkZXI7DQorCQkJCXZtUHJvdmlkZXIuZ2V0RXhlY3V0b3Io
KS5leGVjdXRlKG5ldyBEc2ZSdW5uYWJsZSgpIHsNCisJCQkJCXB1YmxpYyB2b2lkIHJ1bigpIHsN
CisJCQkJCQl2bUV2ZW50TGlzdGVuZXIuYWJvdXRUb0hhbmRsZUV2ZW50KGV2ZW50KTsNCisJCQkJ
CX19KTsNCisJCQkJZXZlbnRMaXN0ZW5lcnMuYWRkKHZtRXZlbnRMaXN0ZW5lcik7DQorCQkJfQ0K
KwkJfQ0KKwkNCisJCWlmICghZXZlbnRMaXN0ZW5lcnMuaXNFbXB0eSgpKSB7DQorCQkJc3luY2hy
b25pemVkIChmUGVuZGluZ1VwZGF0ZXMpIHsNCisJCQkJZlBlbmRpbmdVcGRhdGVzLmNsZWFyKCk7
DQorCQkJfQ0KKwkJCS8vIFRPRE8gd2hpY2ggZXhlY3V0b3IgdG8gdXNlPw0KKwkJCWZpbmFsIEV4
ZWN1dG9yIGV4ZWN1dG9yPSBldmVudExpc3RlbmVycy5nZXQoMCkuZ2V0RXhlY3V0b3IoKTsNCisJ
CQlmaW5hbCBDb3VudGluZ1JlcXVlc3RNb25pdG9yIGNybSA9IG5ldyBDb3VudGluZ1JlcXVlc3RN
b25pdG9yKGV4ZWN1dG9yLCBudWxsKSB7DQorCQkJCUBPdmVycmlkZQ0KKwkJCQlwcm90ZWN0ZWQg
dm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQorCQkJCQlpZiAoaXNEaXNwb3NlZCgpKSB7DQorCQkJ
CQkJcmV0dXJuOw0KKwkJCQkJfQ0KKwkJCQkJLy8gVGhlIGV2ZW50IGxpc3RlbmVycyBoYXZlIGNv
bXBsZXRlZCBwcm9jZXNzaW5nIHRoZSBldmVudC4NCisJCQkJCS8vIE5vdyBtb25pdG9yIGNvbXBs
ZXRpb24gb2Ygdmlld2VyIHVwZGF0ZXMgaXNzdWVkIHdoaWxlIGRpc3BhdGNoaW5nIHRoZSBldmVu
dA0KKwkJCQkJZmluYWwgQ291bnRpbmdSZXF1ZXN0TW9uaXRvciB1cGRhdGVzTW9uaXRvciA9IG5l
dyBDb3VudGluZ1JlcXVlc3RNb25pdG9yKGV4ZWN1dG9yLCBudWxsKSB7DQorCQkJCQkJQE92ZXJy
aWRlDQorCQkJCQkJcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxldGVkKCkgew0KKwkJCQkJCQlp
ZiAoaXNEaXNwb3NlZCgpKSB7DQorCQkJCQkJCQlyZXR1cm47DQorCQkJCQkJCX0NCisJCQkJCQkJ
Zm9yIChmaW5hbCBJVk1FdmVudExpc3RlbmVyIHZtRXZlbnRMaXN0ZW5lciA6IGV2ZW50TGlzdGVu
ZXJzKSB7DQorCQkJCQkJCQl2bUV2ZW50TGlzdGVuZXIuZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5l
dyBEc2ZSdW5uYWJsZSgpIHsNCisJCQkJCQkJCQlwdWJsaWMgdm9pZCBydW4oKSB7DQorCQkJCQkJ
CQkJCXZtRXZlbnRMaXN0ZW5lci5kb25lSGFuZGxlRXZlbnQoZXZlbnQpOw0KKwkJCQkJCQkJCX19
KTsNCisJCQkJCQkJfQ0KKwkJCQkJCX0NCisJCQkJCX07DQorCQkJCQlzeW5jaHJvbml6ZWQgKGZQ
ZW5kaW5nVXBkYXRlcykgew0KKwkJCQkJCWludCBwZW5kaW5nID0gZlBlbmRpbmdVcGRhdGVzLnNp
emUoKTsNCisJCQkJCQl1cGRhdGVzTW9uaXRvci5zZXREb25lQ291bnQocGVuZGluZyk7DQorCQkJ
CQkJZm9yIChJTW9uaXRvcmVkVXBkYXRlIHVwZGF0ZSA6IGZQZW5kaW5nVXBkYXRlcykgew0KKwkJ
CQkJCQl1cGRhdGUuc2V0TW9uaXRvcih1cGRhdGVzTW9uaXRvcik7DQorCQkJCQkJfQ0KKwkJCQkJ
CWZQZW5kaW5nVXBkYXRlcy5jbGVhcigpOw0KKwkJCQkJfQ0KKwkJCQl9DQorCQkJfTsNCisJCQlj
cm0uc2V0RG9uZUNvdW50KGV2ZW50TGlzdGVuZXJzLnNpemUoKSk7DQorCSAgICAgICAgDQorCQkJ
Zm9yIChmaW5hbCBJVk1FdmVudExpc3RlbmVyIHZtRXZlbnRMaXN0ZW5lciA6IGV2ZW50TGlzdGVu
ZXJzKSB7DQorCQkJCXZtRXZlbnRMaXN0ZW5lci5nZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3IERz
ZlJ1bm5hYmxlKCkgew0KKwkJCQkJcHVibGljIHZvaWQgcnVuKCkgew0KKwkJCQkJCXZtRXZlbnRM
aXN0ZW5lci5oYW5kbGVFdmVudChldmVudCwgY3JtKTsNCisJCQkJCX19KTsNCisJCQl9DQorCQl9
DQorCX0NCisNCisJcHJpdmF0ZSBJVmlld2VyVXBkYXRlW10gd3JhcFVwZGF0ZXMoSVZpZXdlclVw
ZGF0ZVtdIHVwZGF0ZXMpIHsNCisJCWlmICh1cGRhdGVzLmxlbmd0aCA9PSAwKSB7DQorCQkJcmV0
dXJuIHVwZGF0ZXM7DQorCQl9DQorCQlpbnQgaSA9IDA7DQorCQlzeW5jaHJvbml6ZWQgKGZQZW5k
aW5nVXBkYXRlcykgew0KKwkJCWZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1cGRhdGVzKSB7
DQorCQkJCUlNb25pdG9yZWRVcGRhdGUgd3JhcD0gY3JlYXRlTW9uaXRvcmVkVXBkYXRlKHVwZGF0
ZSk7DQorCQkJCXVwZGF0ZXNbaSsrXSA9IHdyYXA7DQorCQkJCWZQZW5kaW5nVXBkYXRlcy5hZGQo
d3JhcCk7DQorCQkJfQ0KKwkJfQ0KKwkJcmV0dXJuIHVwZGF0ZXM7DQorCX0NCisNCisJcHJpdmF0
ZSBJTW9uaXRvcmVkVXBkYXRlIGNyZWF0ZU1vbml0b3JlZFVwZGF0ZShJVmlld2VyVXBkYXRlIHVw
ZGF0ZSkgew0KKwkJaWYgKHVwZGF0ZSBpbnN0YW5jZW9mIElDaGlsZHJlbkNvdW50VXBkYXRlKSB7
DQorCQkJcmV0dXJuIG5ldyBNb25pdG9yZWRDaGlsZHJlbkNvdW50VXBkYXRlKCgoSUNoaWxkcmVu
Q291bnRVcGRhdGUpdXBkYXRlKSk7DQorCQl9IGVsc2UgaWYgKHVwZGF0ZSBpbnN0YW5jZW9mIElI
YXNDaGlsZHJlblVwZGF0ZSkgew0KKwkJCXJldHVybiBuZXcgTW9uaXRvcmVkSGFzQ2hpbGRyZW5V
cGRhdGUoKChJSGFzQ2hpbGRyZW5VcGRhdGUpdXBkYXRlKSk7DQorCQl9IGVsc2UgaWYgKHVwZGF0
ZSBpbnN0YW5jZW9mIElDaGlsZHJlblVwZGF0ZSkgew0KKwkJCXJldHVybiBuZXcgTW9uaXRvcmVk
Q2hpbGRyZW5VcGRhdGUoKChJQ2hpbGRyZW5VcGRhdGUpdXBkYXRlKSk7DQorCQl9DQorCQlyZXR1
cm4gbnVsbDsNCisJfQ0KKw0KIH0NCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3Zp
ZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNUHJvdmlkZXIuamF2YQ0KPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0K
UkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVj
bGlwc2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFt
b2RlbC9BYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4y
DQpkaWZmIC11IC1yMS4yIEFic3RyYWN0RE1WTVByb3ZpZGVyLmphdmENCi0tLSBzcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNUHJvdmlkZXIu
amF2YQkyIEp1biAyMDA4IDE3OjU0OjQ1IC0wMDAwCTEuMg0KKysrIHNyYy9vcmcvZWNsaXBzZS9k
ZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhCTkg
SnVsIDIwMDggMTE6NTA6MTEgLTAwMDANCkBAIC0xMCw4ICsxMCw2IEBADQogICoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKiovDQogcGFja2FnZSBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLmRh
dGFtb2RlbDsNCiANCi1pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuUmVqZWN0ZWRFeGVjdXRp
b25FeGNlcHRpb247DQotDQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkNv
bmZpbmVkVG9Ec2ZFeGVjdXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2Rl
bC5JRE1FdmVudDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vydmlj
ZUV2ZW50SGFuZGxlcjsNCkBAIC00NCwxNCArNDIsNiBAQA0KIGFic3RyYWN0IHB1YmxpYyBjbGFz
cyBBYnN0cmFjdERNVk1Qcm92aWRlciBleHRlbmRzIEFic3RyYWN0Q2FjaGluZ1ZNUHJvdmlkZXIN
CiB7DQogICAgIHByaXZhdGUgZmluYWwgRHNmU2Vzc2lvbiBmU2Vzc2lvbjsNCi0NCi0gICAgLyoq
DQotICAgICAqIEl0IGlzIHRoZW9yZXRpY2FsbHkgcG9zc2libGUgZm9yIGEgVk1Qcm92aWRlciB0
byBiZSBkaXNwb3NlZCBiZWZvcmUgaXQgDQotICAgICAqIGhhcyBhIGNoYW5jZSB0byByZWdpc3Rl
ciBpdHNlbGYgYXMgZXZlbnQgbGlzdGVuZXIuICBUaGlzIGZsYWcgaXMgdXNlZA0KLSAgICAgKiB0
byBhdm9pZCByZW1vdmluZyBpdHNlbGYgYXMgbGlzdGVuZXIgaW4gc3VjaCBzaXR1YXRpb24uDQot
ICAgICAqLw0KLSAgICBwcml2YXRlIGJvb2xlYW4gZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIg
PSBmYWxzZTsNCi0NCiAgICAgLyoqDQogICAgICAqIENvbnN0cnVjdHMgdGhlIHZpZXcgbW9kZWwg
cHJvdmlkZXIgZm9yIGdpdmVuIERTRiBzZXNzaW9uLiAgVGhlIA0KICAgICAgKiBjb25zdHJ1Y3Rv
ciBpcyB0aHJlYWQtc2FmZSB0byBhbGxvdyBWTSBwcm92aWRlciB0byBiZSBjb25zdHJ1Y3RlZA0K
QEAgLTYxLDY0ICs1MSwxNiBAQA0KICAgICBwdWJsaWMgQWJzdHJhY3RETVZNUHJvdmlkZXIoQWJz
dHJhY3RWTUFkYXB0ZXIgYWRhcHRlciwgIElQcmVzZW50YXRpb25Db250ZXh0IHByZXNlbnRhdGlv
bkNvbnRleHQsIERzZlNlc3Npb24gc2Vzc2lvbikgew0KICAgICAgICAgc3VwZXIoYWRhcHRlciwg
cHJlc2VudGF0aW9uQ29udGV4dCk7DQogICAgICAgICBmU2Vzc2lvbiA9IHNlc3Npb247DQotICAg
ICAgICAvLyBBZGQgb3Vyc2VsdmVzIGFzIGxpc3RlbmVyIGZvciBETSBldmVudHMgZXZlbnRzLg0K
LSAgICAgICAgdHJ5IHsNCi0gICAgICAgICAgICBzZXNzaW9uLmdldEV4ZWN1dG9yKCkuZXhlY3V0
ZShuZXcgUnVubmFibGUoKSB7DQotICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsN
Ci0gICAgICAgICAgICAgICAgICAgIGlmIChEc2ZTZXNzaW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRT
ZXNzaW9uKCkuZ2V0SWQoKSkpIHsNCi0gICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXNzaW9u
KCkuYWRkU2VydmljZUV2ZW50TGlzdGVuZXIoQWJzdHJhY3RETVZNUHJvdmlkZXIudGhpcywgbnVs
bCk7DQotICAgICAgICAgICAgICAgICAgICAgICAgZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIg
PSB0cnVlOw0KLSAgICAgICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgICAgICB9DQotICAg
ICAgICAgICAgfSk7DQotICAgICAgICB9IGNhdGNoIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlv
biBlKSB7DQotICAgICAgICAgICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24sIG5vdCBtdWNoIHdlIGNh
biBkbyBidXQgd2FpdCB0byBiZSBkaXNwb3NlZC4NCi0gICAgICAgIH0gDQogICAgIH0gICAgDQog
DQotICAgIC8qKiBDYWxsZWQgdG8gZGlzcG9zZSB0aGUgcHJvdmlkZXIuICovIA0KLSAgICBAT3Zl
cnJpZGUNCi0gICAgcHVibGljIHZvaWQgZGlzcG9zZSgpIHsNCi0gICAgICAgIHRyeSB7DQotICAg
ICAgICAgICAgZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUo
KSB7DQotICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCi0gICAgICAgICAgICAg
ICAgICAgIGlmIChEc2ZTZXNzaW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRTZXNzaW9uKCkuZ2V0SWQo
KSkgJiYgZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIgKSB7DQotICAgICAgICAgICAgICAgICAg
ICAgICAgZlNlc3Npb24ucmVtb3ZlU2VydmljZUV2ZW50TGlzdGVuZXIoQWJzdHJhY3RETVZNUHJv
dmlkZXIudGhpcyk7DQotICAgICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgICAgIH0N
Ci0gICAgICAgICAgICB9KTsNCi0gICAgICAgIH0gY2F0Y2ggKFJlamVjdGVkRXhlY3V0aW9uRXhj
ZXB0aW9uIGUpIHsNCi0gICAgICAgICAgICAvLyBTZXNzaW9uIHNodXQgZG93bi4NCi0gICAgICAg
IH0gDQotICAgICAgICBzdXBlci5kaXNwb3NlKCk7DQotICAgIH0NCi0NCiAgICAgcHVibGljIERz
ZlNlc3Npb24gZ2V0U2Vzc2lvbigpIHsgcmV0dXJuIGZTZXNzaW9uOyB9DQogDQogICAgIC8qKg0K
LSAgICAgKiBIYW5kbGUgImRhdGEgbW9kZWwgY2hhbmdlZCIgZXZlbnQgYnkgZ2VuZXJhdGluZyBh
IGRlbHRhIG9iamVjdCBmb3IgZWFjaCANCi0gICAgICogdmlldyBhbmQgcGFzc2luZyBpdCB0byB0
aGUgY29ycmVzcG9uZGluZyB2aWV3IG1vZGVsIHByb3ZpZGVyLiAgVGhlIHZpZXcNCi0gICAgICog
bW9kZWwgcHJvdmlkZXIgaXMgdGhlbiByZXNwb25zaWJsZSBmb3IgZmlsbGluZy1pbiBhbmQgc2Vu
ZGluZyB0aGUgZGVsdGENCi0gICAgICogdG8gdGhlIHZpZXdlci4NCi0gICAgICogQHBhcmFtIGUN
CisgICAgICogQGRlcHJlY2F0ZWQgS2VwdCBmb3IgQVBJIGNvbXBhdGliaWxpdHkgcmVhc29ucy4g
DQorICAgICAqIEV2ZW50cyBhcmUgbm93IHJlY2VpdmVkIGFuZCBkaXNwYXRjaGVkIGJ5IHRoZSBW
TSBhZGFwdGVyLg0KICAgICAgKi8NCi0gICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXINCisgICAg
QERlcHJlY2F0ZWQNCisJQERzZlNlcnZpY2VFdmVudEhhbmRsZXINCiAgICAgcHVibGljIHZvaWQg
ZXZlbnREaXNwYXRjaGVkKGZpbmFsIElETUV2ZW50PD8+IGV2ZW50KSB7DQotICAgICAgICAvLyBX
ZSdyZSBpbiBzZXNzaW9uJ3MgZXhlY3V0b3IgdGhyZWFkIChzZXNzaW9uIGluIHdoaWNoIHRoZSBl
dmVudCBvcmlnaW5hdGVkKS4gDQotICAgICAgICAvLyBSZS1kaXNwYWNoIHRvIHRoZSB2aWV3IG1v
ZGVsIHByb3ZpZGVyIGV4ZWN1dG9yIHRocmVhZCBhbmQgdGhlbiBjYWxsIHRoZSANCi0gICAgICAg
IC8vIG1vZGVsIHByb3h5IHN0cmF0ZWd5IHRvIGhhbmRsZSB0aGUgZXZlbnQuDQotICAgICAgICBp
ZiAoaXNEaXNwb3NlZCgpKSByZXR1cm47DQotDQotICAgICAgICB0cnkgew0KLSAgICAgICAgICAg
IGdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7DQotICAgICAgICAgICAgICAg
IHB1YmxpYyB2b2lkIHJ1bigpIHsNCi0gICAgICAgICAgICAgICAgICAgIGlmIChpc0Rpc3Bvc2Vk
KCkpIHJldHVybjsNCi0gICAgICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KTsNCi0g
ICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgIH0pOw0KLSAgICAgICAgfSBjYXRjaCAoUmVq
ZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgew0KLSAgICAgICAgICAgIC8vIElnbm9yZS4gIFRo
aXMgZXhjZXB0aW9uIGNvdWxkIGJlIHRocm93biBpZiB0aGUgcHJvdmlkZXIgaXMgYmVpbmcgDQot
ICAgICAgICAgICAgLy8gc2h1dCBkb3duLiAgDQotICAgICAgICB9DQogICAgIH0NCiB9DQpJbmRl
eDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvZGF0YW1vZGVsL0Fic3RyYWN0
RE1WTUFkYXB0ZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3Jn
LmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1BZGFwdGVyLmph
dmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjINCmRpZmYgLXUgLXIxLjIgQWJzdHJhY3RETVZN
QWRhcHRlci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvZGF0
YW1vZGVsL0Fic3RyYWN0RE1WTUFkYXB0ZXIuamF2YQkyIEp1biAyMDA4IDE3OjU0OjQ1IC0wMDAw
CTEuMg0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9B
YnN0cmFjdERNVk1BZGFwdGVyLmphdmEJOSBKdWwgMjAwOCAxMTo1MDoxMSAtMDAwMA0KQEAgLTEw
LDcgKzEwLDExIEBADQogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQogcGFja2FnZSBvcmcuZWNs
aXBzZS5kZC5kc2YudWkudmlld21vZGVsLmRhdGFtb2RlbDsNCiANCitpbXBvcnQgamF2YS51dGls
LmNvbmN1cnJlbnQuUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb247DQorDQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlRocmVhZFNhZmU7DQoraW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kYXRhbW9kZWwuSURNRXZlbnQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5z
ZXJ2aWNlLkRzZlNlcnZpY2VFdmVudEhhbmRsZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRz
Zi5zZXJ2aWNlLkRzZlNlc3Npb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3
bW9kZWwuQWJzdHJhY3RWTUFkYXB0ZXI7DQogDQpAQCAtMjMsNiArMjcsMTMgQEANCiAgICAgcHJp
dmF0ZSBmaW5hbCBEc2ZTZXNzaW9uIGZTZXNzaW9uOw0KIA0KICAgICAvKioNCisgICAgICogSXQg
aXMgdGhlb3JldGljYWxseSBwb3NzaWJsZSBmb3IgYSBWTSBhZGFwdGVyIHRvIGJlIGRpc3Bvc2Vk
IGJlZm9yZSBpdCANCisgICAgICogaGFzIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiBhcyBl
dmVudCBsaXN0ZW5lci4gIFRoaXMgZmxhZyBpcyB1c2VkDQorICAgICAqIHRvIGF2b2lkIHJlbW92
aW5nIGl0c2VsZiBhcyBsaXN0ZW5lciBpbiBzdWNoIHNpdHVhdGlvbi4NCisgICAgICovDQorICAg
IHByaXZhdGUgYm9vbGVhbiBmUmVnaXN0ZXJlZEFzRXZlbnRMaXN0ZW5lciA9IGZhbHNlOw0KKw0K
KyAgICAvKioNCiAgICAgICogQ29uc3RydWN0b3IgZm9yIHRoZSBWaWV3IE1vZGVsIHNlc3Npb24u
ICBJdCBpcyB0ZW1wdGluZyB0byBoYXZlIHRoZSANCiAgICAgICogYWRhcHRlciByZWdpc3RlciBp
dHNlbGYgaGVyZSB3aXRoIHRoZSBzZXNzaW9uIGFzIHRoZSBtb2RlbCBhZGFwdGVyLCBidXQNCiAg
ICAgICogdGhhdCB3b3VsZCBtZWFuIHRoYXQgdGhlIGFkYXB0ZXIgbWlnaHQgZ2V0IGFjY2Vzc2Vk
IG9uIGFub3RoZXIgdGhyZWFkDQpAQCAtMzMsMTIgKzQ0LDU5IEBADQogICAgIHB1YmxpYyBBYnN0
cmFjdERNVk1BZGFwdGVyKERzZlNlc3Npb24gc2Vzc2lvbikgew0KICAgICAgICAgc3VwZXIoKTsN
CiAgICAgICAgIGZTZXNzaW9uID0gc2Vzc2lvbjsNCisgICAgICAgIC8vIEFkZCBvdXJzZWx2ZXMg
YXMgbGlzdGVuZXIgZm9yIERNIGV2ZW50cyBldmVudHMuDQorICAgICAgICB0cnkgew0KKyAgICAg
ICAgICAgIHNlc3Npb24uZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsNCisg
ICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgew0KKyAgICAgICAgICAgICAgICAgICAg
aWYgKERzZlNlc3Npb24uaXNTZXNzaW9uQWN0aXZlKGdldFNlc3Npb24oKS5nZXRJZCgpKSkgew0K
KyAgICAgICAgICAgICAgICAgICAgICAgIGdldFNlc3Npb24oKS5hZGRTZXJ2aWNlRXZlbnRMaXN0
ZW5lcihBYnN0cmFjdERNVk1BZGFwdGVyLnRoaXMsIG51bGwpOw0KKyAgICAgICAgICAgICAgICAg
ICAgICAgIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyID0gdHJ1ZTsNCisgICAgICAgICAgICAg
ICAgICAgIH0NCisgICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgIH0pOw0KKyAgICAgICAg
fSBjYXRjaCAoUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgew0KKyAgICAgICAgICAgIC8v
IFNlc3Npb24gc2h1dCBkb3duLCBub3QgbXVjaCB3ZSBjYW4gZG8gYnV0IHdhaXQgdG8gYmUgZGlz
cG9zZWQuDQorICAgICAgICB9DQogICAgIH0gICAgDQogDQorICAgIEBPdmVycmlkZQ0KKyAgICBw
dWJsaWMgdm9pZCBkaXNwb3NlKCkgew0KKyAgICAgICAgdHJ5IHsNCisgICAgICAgICAgICBnZXRT
ZXNzaW9uKCkuZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsNCisgICAgICAg
ICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgew0KKyAgICAgICAgICAgICAgICAgICAgaWYgKGZS
ZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyICYmIGdldFNlc3Npb24oKS5pc0FjdGl2ZSgpKSB7DQor
ICAgICAgICAgICAgICAgICAgICAgICAgZlNlc3Npb24ucmVtb3ZlU2VydmljZUV2ZW50TGlzdGVu
ZXIoQWJzdHJhY3RETVZNQWRhcHRlci50aGlzKTsNCisgICAgICAgICAgICAgICAgICAgIH0NCisg
ICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAgIH0pOw0KKyAgICAgICAgfSBjYXRjaCAoUmVq
ZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgew0KKyAgICAgICAgICAgIC8vIFNlc3Npb24gc2h1
dCBkb3duLg0KKyAgICAgICAgfQ0KKyAgICAgICAgc3VwZXIuZGlzcG9zZSgpOw0KKyAgICB9DQor
DQogICAgIC8qKg0KICAgICAgKiBSZXR1cm5zIHRoZSBEU0Ygc2Vzc2lvbiB0aGF0IHRoaXMgYWRh
cHRlciBpcyBhc3NvY2lhdGVkIHdpdGguDQogICAgICAqIEByZXR1cm4NCiAgICAgICovDQogICAg
IHByb3RlY3RlZCBEc2ZTZXNzaW9uIGdldFNlc3Npb24oKSB7IHJldHVybiBmU2Vzc2lvbjsgfQ0K
ICAgICANCisgICAgLyoqDQorICAgICAqIEhhbmRsZSAiZGF0YSBtb2RlbCBjaGFuZ2VkIiBldmVu
dCBieSBnZW5lcmF0aW5nIGEgZGVsdGEgb2JqZWN0IGZvciBlYWNoIA0KKyAgICAgKiB2aWV3IGFu
ZCBwYXNzaW5nIGl0IHRvIHRoZSBjb3JyZXNwb25kaW5nIHZpZXcgbW9kZWwgcHJvdmlkZXIuICBU
aGUgdmlldw0KKyAgICAgKiBtb2RlbCBwcm92aWRlciBpcyB0aGVuIHJlc3BvbnNpYmxlIGZvciBm
aWxsaW5nLWluIGFuZCBzZW5kaW5nIHRoZSBkZWx0YQ0KKyAgICAgKiB0byB0aGUgdmlld2VyLg0K
KyAgICAgKiANCisgICAgICogQHBhcmFtIGV2ZW50DQorICAgICAqIA0KKyAgICAgKiBAc2luY2Ug
MS4xDQorICAgICAqLw0KKyAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlcg0KKyAgICBwdWJsaWMg
ZmluYWwgdm9pZCBldmVudERpc3BhdGNoZWQoZmluYWwgSURNRXZlbnQ8Pz4gZXZlbnQpIHsNCisg
ICAgCS8vIFdlJ3JlIGluIHNlc3Npb24ncyBleGVjdXRvciB0aHJlYWQgKHNlc3Npb24gaW4gd2hp
Y2ggdGhlIGV2ZW50IG9yaWdpbmF0ZWQpLiANCisgICAgICAgIGlmIChpc0Rpc3Bvc2VkKCkpIHJl
dHVybjsNCisNCisgICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KTsNCisgICAgfQ0KKw0KIH0NCklu
ZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9JVk1FdmVudExpc3RlbmVy
LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3Zp
ZXdtb2RlbC9JVk1FdmVudExpc3RlbmVyLmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi91aS92aWV3bW9kZWwvSVZNRXZlbnRMaXN0ZW5lci5qYXZhDQotLS0gL2Rldi9udWxsCTEg
SmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3Zp
ZXdtb2RlbC9JVk1FdmVudExpc3RlbmVyLmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0K
QEAgLTAsMCArMSw0OCBAQA0KKy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQorICogQ29weXJpZ2h0
IChjKSAyMDA4IFdpbmQgUml2ZXIgU3lzdGVtcywgSW5jLiBhbmQgb3RoZXJzLg0KKyAqIEFsbCBy
aWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlh
bHMNCisgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNl
IFB1YmxpYyBMaWNlbnNlIHYxLjANCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1
dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdA0KKyAqIGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVn
YWwvZXBsLXYxMC5odG1sDQorICoNCisgKiBDb250cmlidXRvcnM6DQorICogICAgIFdpbmQgUml2
ZXIgU3lzdGVtcyAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbg0KKyAqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqLw0KK3BhY2thZ2Ugb3JnLmVjbGlwc2UuZGQuZHNmLnVpLnZpZXdtb2RlbDsN
CisNCitpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3I7DQorDQoraW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOw0KKw0KKy8qKg0KKyAq
IEEgbGlzdGVuZXIgcGFydGljaXBhdGluZyBpbiBldmVudCBub3RpZmljYXRpb25zIHNlbnQgb3V0
IGZyb20gVk0gYWRhcHRlci4NCisgKiANCisgKiBAc2luY2UgMS4xDQorICovDQorcHVibGljIGlu
dGVyZmFjZSBJVk1FdmVudExpc3RlbmVyIHsNCisNCisgICAgLyoqDQorICAgICAqIFJldHVybnMg
dGhlIGV4ZWN1dG9yIHRoYXQgbmVlZHMgdG8gYmUgdXNlZCB0byBhY2Nlc3MgdGhpcyBldmVudCBs
aXN0ZW5lci4gDQorICAgICAqLw0KKyAgICBwdWJsaWMgRXhlY3V0b3IgZ2V0RXhlY3V0b3IoKTsN
CisgICAgDQorCS8qKg0KKwkgKiBQcm9jZXNzIHRoZSBnaXZlbiBldmVudCBhbmQgaW5kaWNhdGUg
Y29tcGxldGlvbiB3aXRoIHJlcXVlc3QgbW9uaXRvci4NCisJICovDQorCXB1YmxpYyBhYnN0cmFj
dCB2b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCwgUmVxdWVzdE1vbml0b3Igcm0p
Ow0KKw0KKwkvKioNCisJICogR2l2ZW4gZXZlbnQgaXMgYWJvdXQgdG8gYmUgaGFuZGxlZC4NCisJ
ICogDQorCSAqIEBwYXJhbSBldmVudA0KKwkgKi8NCisJcHVibGljIGFic3RyYWN0IHZvaWQgYWJv
dXRUb0hhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCk7DQorDQorCS8qKg0KKwkgKiBHaXZl
biBldmVudCBoYXMgYmVlbiBwcm9jZXNzZWQgYnkgYWxsIFZNIGV2ZW50IGxpc3RlbmVycy4NCisJ
ICogDQorCSAqIEBwYXJhbSBldmVudA0KKwkgKi8NCisJcHVibGljIGFic3RyYWN0IHZvaWQgZG9u
ZUhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCk7DQorDQorfQ0KI1Agb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNl
L1N0ZXBRdWV1ZU1hbmFnZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2Rz
ZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnL3Ny
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9TdGVwUXVldWVNYW5hZ2VyLmphdmEs
dg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjgNCmRpZmYgLXUgLXIxLjggU3RlcFF1ZXVlTWFuYWdl
ci5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNlL1N0ZXBRdWV1
ZU1hbmFnZXIuamF2YQkzMCBNYXkgMjAwOCAyMjo1Nzo0NCAtMDAwMAkxLjgNCisrKyBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5qYXZhCTkgSnVs
IDIwMDggMTE6NTA6MTMgLTAwMDANCkBAIC00MSwxMSArNDEsMTQgQEANCiAgKiBpcyB1c2VkLCBv
dGhlciBzZXJ2aWNlIGltcGxlbWVudGF0aW9ucywgc3VjaCBhcyBzdGFjayBhbmQgZXhwcmVzc2lv
bnMsIGNhbiANCiAgKiB1c2UgaXQgdG8gYXZvaWQgcmVxdWVzdGluZyBkYXRhIGZyb20gZGVidWdn
ZXIgYmFjayBlbmQgaWYgYW5vdGhlciBzdGVwIGlzIA0KICAqIGFib3V0IHRvIGJlIGV4ZWN1dGVk
LiANCisgKiANCisgKiBAZGVwcmVjYXRlZCBUaGUgZnVuY3Rpb25hbGl0eSBoYXMgYmVlbiBpbnRl
Z3JhdGVkIGluIHRoZSBVSSBsYXllci4NCiAgKi8NCi1wdWJsaWMgY2xhc3MgU3RlcFF1ZXVlTWFu
YWdlciBleHRlbmRzIEFic3RyYWN0RHNmU2VydmljZQ0KK0BEZXByZWNhdGVkDQorcHVibGljIGNs
YXNzIFN0ZXBRdWV1ZU1hbmFnZXIgZXh0ZW5kcyBBYnN0cmFjdERzZlNlcnZpY2UgaW1wbGVtZW50
cyBJU3RlcFF1ZXVlTWFuYWdlcg0KIHsNCiAgICAgLyoqDQotICAgICAqIEFtb3VudCBvZiB0aW1l
IGluIG1pbGlzZWNvbmRzLCB0aGF0IGl0IHRha2VzIHRoZSBJU3RlcHBpbmdUaW1lZE91dEV2ZW50
IA0KKyAgICAgKiBBbW91bnQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHMsIHRoYXQgaXQgdGFrZXMg
dGhlIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQgDQogICAgICAqIGV2ZW50IHRvIGJlIGlzc3VlZCBh
ZnRlciBhIHN0ZXAgaXMgc3RhcnRlZC4gDQogICAgICAqIEBzZWUgSVN0ZXBwaW5nVGltZWRPdXRF
dmVudCAgDQogICAgICAqLw0KQEAgLTExMyw5ICsxMTYsOSBAQA0KICAgICAgICAgcmV0dXJuIERz
ZkRlYnVnUGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKTsNCiAgICAgfQ0KIA0KLSAgICAvKioNCi0g
ICAgICogQ2hlY2tzIHdoZXRoZXIgYSBzdGVwIGNvbW1hbmQgY2FuIGJlIHF1ZXVlZCB1cCBmb3Ig
Z2l2ZW4gY29udGV4dC4NCi0gICAgICovDQorICAgIC8qDQorCSAqIEBzZWUgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0ZXBRdWV1ZU1hbmFnZXIjY2FuRW5xdWV1ZVN0ZXAob3Jn
LmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29u
dGV4dCwgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuU3RlcFR5
cGUsIG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRhdGFSZXF1ZXN0TW9uaXRvcikNCisJ
ICovDQogICAgIHB1YmxpYyB2b2lkIGNhbkVucXVldWVTdGVwKElFeGVjdXRpb25ETUNvbnRleHQg
ZXhlY0N0eCwgU3RlcFR5cGUgc3RlcFR5cGUsIERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPiBy
bSkgew0KICAgICAgICAgaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUpKSB7
DQogICAgICAgICAgICAgcm0uc2V0RGF0YSh0cnVlKTsNCkBAIC0xMzksMTEgKzE0Miw5IEBADQog
ICAgICAgICByZXR1cm4gc3RlcFF1ZXVlLnNpemUoKTsNCiAgICAgfQ0KIA0KLSAgICAvKioNCi0g
ICAgICogQWRkcyBhIHN0ZXAgY29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVlIGZvciBnaXZl
biBjb250ZXh0Lg0KLSAgICAgKiBAcGFyYW0gZXhlY0N0eCBFeGVjdXRpb24gY29udGV4dCB0aGF0
IHNob3VsZCBwZXJmb3JtIHRoZSBzdGVwLiANCi0gICAgICogQHBhcmFtIHN0ZXBUeXBlIFR5cGUg
b2Ygc3RlcCB0byBleGVjdXRlLg0KLSAgICAgKi8NCisgICAgLyoNCisJICogQHNlZSBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RlcFF1ZXVlTWFuYWdlciNlbnF1ZXVlU3RlcChv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1D
b250ZXh0LCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5TdGVw
VHlwZSkNCisJICovDQogICAgIHB1YmxpYyB2b2lkIGVucXVldWVTdGVwKGZpbmFsIElFeGVjdXRp
b25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGUpIHsNCiAgICAgICAg
IGZSdW5Db250cm9sLmNhblN0ZXAoDQogICAgICAgICAgICAgZXhlY0N0eCwgc3RlcFR5cGUsIG5l
dyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4oZ2V0RXhlY3V0b3IoKSwgbnVsbCkgew0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9JU3RlcFF1ZXVlTWFuYWdl
ci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2VyLmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2VyLmphdmENCi0tLSAvZGV2L251
bGwJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvc2VydmljZS9JU3RlcFF1ZXVlTWFuYWdlci5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6MDAg
LTAwMDANCkBAIC0wLDAgKzEsMzMgQEANCisvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KKyAqIENv
cHlyaWdodCAoYykgMjAwOCBXaW5kIFJpdmVyIFN5c3RlbXMsIEluYy4gYW5kIG90aGVycy4NCisg
KiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcg
bWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBk
aXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3LmVjbGlwc2Uu
b3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqDQorICogQ29udHJpYnV0b3JzOg0KKyAqICAgICBX
aW5kIFJpdmVyIFN5c3RlbXMgLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisgKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKi8NCitwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5z
ZXJ2aWNlOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5EYXRhUmVx
dWVzdE1vbml0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklS
dW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRz
Zi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLlN0ZXBUeXBlOw0KKw0KKy8qKg0KKyAqIEBzaW5j
ZSAxLjENCisgKi8NCitwdWJsaWMgaW50ZXJmYWNlIElTdGVwUXVldWVNYW5hZ2VyIHsNCisJLyoq
DQorCSAqIENoZWNrcyB3aGV0aGVyIGEgc3RlcCBjb21tYW5kIGNhbiBiZSBxdWV1ZWQgdXAgZm9y
IGdpdmVuIGNvbnRleHQuDQorCSAqLw0KKwlwdWJsaWMgYWJzdHJhY3Qgdm9pZCBjYW5FbnF1ZXVl
U3RlcChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgsIFN0ZXBUeXBlIHN0ZXBUeXBlLCBEYXRh
UmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4gcm0pOw0KKw0KKwkvKioNCisJICogQWRkcyBhIHN0ZXAg
Y29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVlIGZvciBnaXZlbiBjb250ZXh0Lg0KKwkgKiBA
cGFyYW0gZXhlY0N0eCBFeGVjdXRpb24gY29udGV4dCB0aGF0IHNob3VsZCBwZXJmb3JtIHRoZSBz
dGVwLiANCisJICogQHBhcmFtIHN0ZXBUeXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLg0KKwkg
Ki8NCisJcHVibGljIGFic3RyYWN0IHZvaWQgZW5xdWV1ZVN0ZXAoZmluYWwgSUV4ZWN1dGlvbkRN
Q29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVwVHlwZSBzdGVwVHlwZSk7DQorDQorfQ0KI1Agb3Jn
LmVjbGlwc2UuZGQuZXhhbXBsZXMucGRhLnVpDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2V4
YW1wbGVzL3BkYS91aS9QREFBZGFwdGVyRmFjdG9yeS5qYXZhDQo9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmls
ZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5k
ZC5leGFtcGxlcy5wZGEudWkvc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS91aS9QREFB
ZGFwdGVyRmFjdG9yeS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS43DQpkaWZmIC11IC1y
MS43IFBEQUFkYXB0ZXJGYWN0b3J5LmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBs
ZXMvcGRhL3VpL1BEQUFkYXB0ZXJGYWN0b3J5LmphdmEJMTcgSnVuIDIwMDggMjA6NDY6MTMgLTAw
MDAJMS43DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS91aS9QREFBZGFwdGVy
RmFjdG9yeS5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTQgLTAwMDANCkBAIC0xNyw2ICsxNyw3IEBA
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5JQWRhcHRlckZhY3Rvcnk7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkltbXV0YWJsZTsNCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuVGhyZWFkU2FmZTsNCitpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGlu
Z0NvbnRyb2xsZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5w
cm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkRlZmF1bHREc2ZNb2RlbFNlbGVjdGlvblBv
bGljeUZhY3Rvcnk7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS5hY3Rpb25z
LkRzZlJlc3VtZUNvbW1hbmQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS5h
Y3Rpb25zLkRzZlN0ZXBJbnRvQ29tbWFuZDsNCkBAIC02Miw3ICs2Myw3IEBADQogcHVibGljIGNs
YXNzIFBEQUFkYXB0ZXJGYWN0b3J5IGltcGxlbWVudHMgSUFkYXB0ZXJGYWN0b3J5LCBJTGF1bmNo
ZXNMaXN0ZW5lcjINCiB7DQogICAgIC8qKg0KLSAgICAgKiBDb250YWlucyB0aGUgc2V0IG9mIGFk
YXB0ZXJzIHRoYXQgYXJlIGNyZWF0ZWQgZm9yIGVhY3kgbGF1bmNoIGluc3RhbmNlLg0KKyAgICAg
KiBDb250YWlucyB0aGUgc2V0IG9mIGFkYXB0ZXJzIHRoYXQgYXJlIGNyZWF0ZWQgZm9yIGVhY2gg
bGF1bmNoIGluc3RhbmNlLg0KICAgICAgKi8NCiAgICAgQEltbXV0YWJsZQ0KICAgICBwcml2YXRl
IHN0YXRpYyBjbGFzcyBMYXVuY2hBZGFwdGVyU2V0IHsNCkBAIC04NCw2ICs4NSw4IEBADQogICAg
ICAgICBmaW5hbCBJRGVidWdNb2RlbFByb3ZpZGVyIGZEZWJ1Z01vZGVsUHJvdmlkZXI7DQogICAg
ICAgICBmaW5hbCBQREFMYXVuY2ggZkxhdW5jaDsNCiANCisJCWZpbmFsIFN0ZXBwaW5nQ29udHJv
bGxlciBmU3RlcHBpbmdDb250cm9sbGVyOw0KKw0KIAkJcHJpdmF0ZSBJTW9kZWxTZWxlY3Rpb25Q
b2xpY3lGYWN0b3J5IGZNb2RlbFNlbGVjdGlvblBvbGljeUZhY3Rvcnk7DQogDQogICAgICAgICBM
YXVuY2hBZGFwdGVyU2V0KFBEQUxhdW5jaCBsYXVuY2gpIHsNCkBAIC05NCw4ICs5NywxMiBAQA0K
ICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgVk0NCiAgICAgICAgICAgICBmVmlld01vZGVsQWRh
cHRlciA9IG5ldyBQREFWTUFkYXB0ZXIoc2Vzc2lvbik7DQogDQorICAgICAgICAgICAgLy8gcmVn
aXN0ZXIgc3RlcHBpbmcgY29udHJvbGxlcg0KKyAgICAgICAgICAgIGZTdGVwcGluZ0NvbnRyb2xs
ZXIgPSBuZXcgU3RlcHBpbmdDb250cm9sbGVyKHNlc3Npb24pOw0KKyAgICAgICAgICAgIHNlc3Np
b24ucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzLCBmU3RlcHBp
bmdDb250cm9sbGVyKTsNCisNCiAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHNvdXJjZSBsb29r
dXANCi0gICAgICAgICAgICBmU291cmNlRGlzcGxheUFkYXB0ZXIgPSBuZXcgRHNmU291cmNlRGlz
cGxheUFkYXB0ZXIoc2Vzc2lvbiwgKElTb3VyY2VMb29rdXBEaXJlY3RvcilsYXVuY2guZ2V0U291
cmNlTG9jYXRvcigpKTsNCisgICAgICAgICAgICBmU291cmNlRGlzcGxheUFkYXB0ZXIgPSBuZXcg
RHNmU291cmNlRGlzcGxheUFkYXB0ZXIoc2Vzc2lvbiwgKElTb3VyY2VMb29rdXBEaXJlY3Rvcils
YXVuY2guZ2V0U291cmNlTG9jYXRvcigpLCBmU3RlcHBpbmdDb250cm9sbGVyKTsNCiAgICAgICAg
ICAgICBzZXNzaW9uLnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElTb3VyY2VEaXNwbGF5LmNsYXNzLCBm
U291cmNlRGlzcGxheUFkYXB0ZXIpOw0KIA0KICAgICAgICAgICAgIC8vIERlZmF1bHQgc2VsZWN0
aW9uIHBvbGljeQ0KQEAgLTEyOCw3ICsxMzUsNyBAQA0KICAgICAgICAgICAgIC8vIGFuZCBkZWJ1
ZyBtb2RlbCBJRCB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aCBhbGwgRE1Db250ZXh0cyBmcm9tIHRo
aXMNCiAgICAgICAgICAgICAvLyBzZXNzaW9uLg0KICAgICAgICAgICAgIHNlc3Npb24ucmVnaXN0
ZXJNb2RlbEFkYXB0ZXIoSUxhdW5jaC5jbGFzcywgZkxhdW5jaCk7DQotICAgICAgICB9DQorfQ0K
ICAgICAgICAgDQogICAgICAgICB2b2lkIGRpc3Bvc2UoKSB7DQogICAgICAgICAgICAgRHNmU2Vz
c2lvbiBzZXNzaW9uID0gZkxhdW5jaC5nZXRTZXNzaW9uKCk7DQpAQCAtMTM4LDYgKzE0NSw5IEBA
DQogICAgICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElTb3VyY2VEaXNw
bGF5LmNsYXNzKTsNCiAgICAgICAgICAgICBpZiAoZlNvdXJjZURpc3BsYXlBZGFwdGVyICE9IG51
bGwpIGZTb3VyY2VEaXNwbGF5QWRhcHRlci5kaXNwb3NlKCk7DQogICAgICAgICAgICAgDQorICAg
ICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxl
ci5jbGFzcyk7DQorICAgICAgICAgICAgZlN0ZXBwaW5nQ29udHJvbGxlci5kaXNwb3NlKCk7DQor
DQogICAgICAgICAgICAgc2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElNb2RlbFNlbGVj
dGlvblBvbGljeUZhY3RvcnkuY2xhc3MpOw0KIA0KICAgICAgICAgICAgIHNlc3Npb24udW5yZWdp
c3Rlck1vZGVsQWRhcHRlcihJU3RlcEludG9IYW5kbGVyLmNsYXNzKTsNCiNQIG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy51aQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50
ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9FeHBhbmRTdGFja0V2ZW50Lmph
dmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvRXhwYW5k
U3RhY2tFdmVudC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4x
IEV4cGFuZFN0YWNrRXZlbnQuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
aW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9FeHBhbmRTdGFja0V2ZW50
LmphdmEJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xDQorKysgc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0V4
cGFuZFN0YWNrRXZlbnQuamF2YQk5IEp1bCAyMDA4IDExOjUwOjE2IC0wMDAwDQpAQCAtMTUsNiAr
MTUsOCBAQA0KIA0KIC8qKg0KICAqIEV2ZW50IHRvIGluY3JlYXNlIHRoZSBzdGFjayBmcmFtZSBs
aW1pdCBmb3IgYW4gZXhlY3V0aW9uIGNvbnRleHQuDQorICogDQorICogQHNpbmNlIDEuMQ0KICAq
Lw0KIHB1YmxpYyBjbGFzcyBFeHBhbmRTdGFja0V2ZW50IGV4dGVuZHMgQWJzdHJhY3RETUV2ZW50
PElFeGVjdXRpb25ETUNvbnRleHQ+IHsNCiAgICAgDQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0xhdW5j
aFZNVXBkYXRlTWVzc2FnZXMuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2Rz
ZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVp
L3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmll
d21vZGVsL2xhdW5jaC9MYXVuY2hWTVVwZGF0ZU1lc3NhZ2VzLmphdmEsdg0KcmV0cmlldmluZyBy
ZXZpc2lvbiAxLjENCmRpZmYgLXUgLXIxLjEgTGF1bmNoVk1VcGRhdGVNZXNzYWdlcy5qYXZhDQot
LS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92
aWV3bW9kZWwvbGF1bmNoL0xhdW5jaFZNVXBkYXRlTWVzc2FnZXMuamF2YQkxNyBKdW4gMjAwOCAy
MDo0NjoxMSAtMDAwMAkxLjENCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVy
bmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvTGF1bmNoVk1VcGRhdGVNZXNzYWdl
cy5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0xMiw2ICsxMiw5IEBADQogDQog
aW1wb3J0IG9yZy5lY2xpcHNlLm9zZ2kudXRpbC5OTFM7DQogDQorLyoqDQorICogQHNpbmNlIDEu
MQ0KKyAqLw0KIHB1YmxpYyBjbGFzcyBMYXVuY2hWTVVwZGF0ZU1lc3NhZ2VzIGV4dGVuZHMgTkxT
IHsNCiANCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEJVTkRMRV9OQU1FID0gIm9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1
bmNoLkxhdW5jaFZNVXBkYXRlTWVzc2FnZXMiOy8vJE5PTi1OTFMtMSQNCkluZGV4OiBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9s
YXVuY2gvQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxl
OiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zp
c2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVyLmphdmEs
dg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMNCmRpZmYgLXUgLXIxLjMgQWJzdHJhY3RMYXVuY2hW
TVByb3ZpZGVyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFs
L3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVy
LmphdmEJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4zDQorKysgc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fi
c3RyYWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBA
IC0yMyw2ICsyMyw4IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1D
b250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50Ow0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21v
ZGVsLlN0ZXBwaW5nQ29udHJvbGxlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuSVN0
ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLmxhdW5jaC5MYXVuY2hSb290Vk1O
b2RlLkxhdW5jaGVzRXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRl
cm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLlN0YWNrRnJhbWVzVk1Ob2RlLklu
Y29tcGxldGVTdGFja1ZNQ29udGV4dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LmludGVybmFsLnVpLkRzZkRlYnVnVUlQbHVnaW47DQpAQCAtNTQsMTEgKzU2LDExIEBADQogDQog
DQogLyoqDQotICogDQorICogQHNpbmNlIDEuMQ0KICAqLw0KIEBTdXBwcmVzc1dhcm5pbmdzKCJy
ZXN0cmljdGlvbiIpDQogcHVibGljIGNsYXNzIEFic3RyYWN0TGF1bmNoVk1Qcm92aWRlciBleHRl
bmRzIEFic3RyYWN0RE1WTVByb3ZpZGVyIA0KLSAgICBpbXBsZW1lbnRzIElEZWJ1Z0V2ZW50U2V0
TGlzdGVuZXIsIElMYXVuY2hlc0xpc3RlbmVyMg0KKyAgICBpbXBsZW1lbnRzIElEZWJ1Z0V2ZW50
U2V0TGlzdGVuZXIsIElMYXVuY2hlc0xpc3RlbmVyMiwgSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lw
YW50DQogew0KICAgICAvKioNCiAJICogRGVsYXkgKGluIG1pbGxpc2Vjb25kcykgYmVmb3JlIGEg
ZnVsbCBzdGFjayB0cmFjZSB3aWxsIGJlIHJlcXVlc3RlZC4NCkBAIC02OSw2ICs3MSw4IEBADQog
DQogCXByaXZhdGUgSVByb3BlcnR5Q2hhbmdlTGlzdGVuZXIgZlByZWZlcmVuY2VzTGlzdGVuZXI7
DQogDQorCXByaXZhdGUgU3RlcHBpbmdDb250cm9sbGVyIGZDb250cm9sbGVyOw0KKw0KIAlAVGhy
ZWFkU2FmZQ0KICAgICBwdWJsaWMgQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVyKEFic3RyYWN0Vk1B
ZGFwdGVyIGFkYXB0ZXIsIElQcmVzZW50YXRpb25Db250ZXh0IHByZXNlbnRhdGlvbkNvbnRleHQs
IERzZlNlc3Npb24gc2Vzc2lvbikNCiAgICAgew0KQEAgLTgxLDIyICs4NSwxNiBAQA0KICAgICAg
ICAgDQogICAgICAgICBmUHJlZmVyZW5jZXNMaXN0ZW5lciA9IG5ldyBJUHJvcGVydHlDaGFuZ2VM
aXN0ZW5lcigpIHsNCiAJCQlwdWJsaWMgdm9pZCBwcm9wZXJ0eUNoYW5nZShmaW5hbCBQcm9wZXJ0
eUNoYW5nZUV2ZW50IGV2ZW50KSB7DQotCQkJCVN0cmluZyBwcm9wZXJ0eSA9IGV2ZW50LmdldFBy
b3BlcnR5KCk7DQotCQkJCWlmIChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1F
X0xJTUlUX0VOQUJMRS5lcXVhbHMocHJvcGVydHkpDQotCQkJCQkJfHwgSURzZkRlYnVnVUlDb25z
dGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVC5lcXVhbHMocHJvcGVydHkpKSB7DQotCQkJCQlp
ZiAoc3RvcmUuZ2V0Qm9vbGVhbihJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1F
X0xJTUlUX0VOQUJMRSkpIHsNCi0JCQkgICAgICAgIAlnZXRQcmVzZW50YXRpb25Db250ZXh0KCku
c2V0UHJvcGVydHkoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVCwg
c3RvcmUuZ2V0SW50KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQp
KTsNCi0JCQkJCX0gZWxzZSB7DQotCQkJICAgICAgICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgp
LnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQs
IG51bGwpOw0KLQkJCQkJfQ0KLQkJCQkJZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZSdW5u
YWJsZSgpIHsNCi0JCQkJCSAgICBwdWJsaWMgdm9pZCBydW4oKSB7DQotCQkJCQkgICAgICAgIGhh
bmRsZUV2ZW50KGV2ZW50KTsNCi0JCQkJCSAgICB9DQotCQkJCQl9KTsNCi0JCQkJfQ0KKwkJCQlo
YW5kbGVQcm9wZXJ0eUNoYW5nZWQoc3RvcmUsIGV2ZW50KTsNCiAJCQl9fTsNCiAgICAgICAgIHN0
b3JlLmFkZFByb3BlcnR5Q2hhbmdlTGlzdGVuZXIoZlByZWZlcmVuY2VzTGlzdGVuZXIpOw0KKyAg
ICAgICAgDQorCQlmQ29udHJvbGxlciA9IChTdGVwcGluZ0NvbnRyb2xsZXIpIHNlc3Npb24uZ2V0
TW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5jbGFzcyk7DQorCQlpZiAoZkNvbnRyb2xs
ZXIgIT0gbnVsbCkgew0KKwkJCWZDb250cm9sbGVyLmFkZFN0ZXBwaW5nQ29udHJvbFBhcnRpY2lw
YW50KHRoaXMpOw0KKwkJCWZDb250cm9sbGVyLmVuYWJsZVN5bmNocm9uaXplZFN0ZXBwaW5nKHN0
b3JlLmdldEJvb2xlYW4oSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TWU5DSFJPTklaRURfU1RF
UFBJTkdfRU5BQkxFKSk7DQorCQkJZkNvbnRyb2xsZXIuc2V0TWluaW11bVN0ZXBJbnRlcnZhbChz
dG9yZS5nZXRJbnQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTCkp
Ow0KKwkJfQ0KICAgICB9DQogICAgIA0KICAgICBAT3ZlcnJpZGUNCkBAIC0xMjgsMzAgKzEyNiw0
MyBAQA0KICAgICB9DQogDQogICAgIEBPdmVycmlkZQ0KLSAgICBwdWJsaWMgdm9pZCBoYW5kbGVF
dmVudChPYmplY3QgZXZlbnQpIHsNCisgICAgcHVibGljIHZvaWQgZG9uZUhhbmRsZUV2ZW50KE9i
amVjdCBldmVudCkgew0KKwkJaWYgKGV2ZW50IGluc3RhbmNlb2YgSVJ1bkNvbnRyb2wuSVN1c3Bl
bmRlZERNRXZlbnQpIHsNCisJCQlmaW5hbCBJU3VzcGVuZGVkRE1FdmVudCBzdXNwZW5kZWRFdmVu
dD0gKElSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50KSBldmVudDsNCisJCQlpZiAoZkNvbnRy
b2xsZXIgIT0gbnVsbCkgew0KKwkJCQlmQ29udHJvbGxlci5kb25lU3RlcHBpbmcoc3VzcGVuZGVk
RXZlbnQuZ2V0RE1Db250ZXh0KCksIHRoaXMpOw0KKwkJCX0NCisJCX0NCisgICAgfQ0KKyAgICAN
CisgICAgQE92ZXJyaWRlDQorICAgIHB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KE9iamVjdCBldmVu
dCwgZmluYWwgUmVxdWVzdE1vbml0b3Igcm0pIHsNCiAgICAgICAgIGlmIChldmVudCBpbnN0YW5j
ZW9mIERvdWJsZUNsaWNrRXZlbnQgJiYgIWlzRGlzcG9zZWQoKSkgew0KICAgICAgICAgICAgIGZp
bmFsIElTZWxlY3Rpb24gc2VsZWN0aW9uPSAoKERvdWJsZUNsaWNrRXZlbnQpIGV2ZW50KS5nZXRT
ZWxlY3Rpb24oKTsNCiAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uIGluc3RhbmNlb2YgSVN0cnVj
dHVyZWRTZWxlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICAgT2JqZWN0IGVsZW1lbnQ9ICgoSVN0
cnVjdHVyZWRTZWxlY3Rpb24pIHNlbGVjdGlvbikuZ2V0Rmlyc3RFbGVtZW50KCk7DQogICAgICAg
ICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSW5jb21wbGV0ZVN0YWNrVk1Db250ZXh0
KSB7DQogICAgICAgICAgICAgICAgICAgICBJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQgaW5jU3Rh
Y2tWbWMgPSAoKEluY29tcGxldGVTdGFja1ZNQ29udGV4dCkgZWxlbWVudCk7IA0KLSAgICAgICAg
ICAgICAgICAgICAgSVZNTm9kZSBub2RlID0gKChJbmNvbXBsZXRlU3RhY2tWTUNvbnRleHQpIGVs
ZW1lbnQpLmdldFZNTm9kZSgpOw0KLSAgICAgICAgICAgICAgICAgICAgaWYgKGluY1N0YWNrVm1j
LmdldFZNTm9kZSgpIGluc3RhbmNlb2YgU3RhY2tGcmFtZXNWTU5vZGUpIHsNCisgICAgICAgICAg
ICAgICAgICAgIElWTU5vZGUgbm9kZSA9IGluY1N0YWNrVm1jLmdldFZNTm9kZSgpOw0KKyAgICAg
ICAgICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBTdGFja0ZyYW1lc1ZNTm9kZSAmJiBu
b2RlLmdldFZNUHJvdmlkZXIoKSA9PSB0aGlzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAg
SUV4ZWN1dGlvbkRNQ29udGV4dCBleGVDdHg9IGluY1N0YWNrVm1jLmdldEV4ZWN1dGlvbkRNQ29u
dGV4dCgpOw0KIAkJCQkJCSgoU3RhY2tGcmFtZXNWTU5vZGUpIG5vZGUpLmluY3JlbWVudFN0YWNr
RnJhbWVMaW1pdChleGVDdHgpOw0KIAkJCQkJCS8vIHJlcGxhY2UgZG91YmxlIGNsaWNrIGV2ZW50
IHdpdGggZXhwYW5kIHN0YWNrIGV2ZW50DQogCQkJCQkJZmluYWwgRXhwYW5kU3RhY2tFdmVudCBl
eHBhbmRTdGFja0V2ZW50ID0gbmV3IEV4cGFuZFN0YWNrRXZlbnQoZXhlQ3R4KTsNCiAJCQkJCQln
ZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KIAkJCQkJCSAgICBwdWJs
aWMgdm9pZCBydW4oKSB7DQotCQkJCQkJICAgICAgICBoYW5kbGVFdmVudChleHBhbmRTdGFja0V2
ZW50KTsNCisJCQkJCQkgICAgICAgIGhhbmRsZUV2ZW50KGV4cGFuZFN0YWNrRXZlbnQsIG51bGwp
Ow0KIAkJCQkJCSAgICB9DQogCQkJCQkJfSk7DQogICAgICAgICAgICAgICAgICAgICB9DQogICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICB9DQorICAgICAgICAgICAgaWYgKHJtICE9IG51
bGwpIHsNCisgICAgICAgICAgICAJcm0uZG9uZSgpOw0KKyAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICByZXR1cm47DQogICAgICAgICB9DQotICAgIAlzdXBlci5oYW5kbGVFdmVudChldmVudCk7
DQorICAgIAlzdXBlci5oYW5kbGVFdmVudChldmVudCwgcm0pOw0KICAgICB9DQogDQogICAgIEBP
dmVycmlkZQ0KQEAgLTE3Nyw3ICsxODgsNyBAQA0KIAkgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFNjaGVkdWxlZEZ1dHVyZTw/PiBmdXR1cmU9IGZSZWZyZXNoU3RhY2tGcmFtZXNGdXR1
cmVzLmdldChleGVDb250ZXh0KTsNCiAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoZnV0dXJlICE9IG51bGwgJiYgIWlzRGlzcG9zZWQoKSkgew0KIAkgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBmUmVmcmVzaFN0YWNrRnJhbWVzRnV0dXJlcy5yZW1vdmUoZXhl
Q29udGV4dCk7DQotCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUV2
ZW50KG5ldyBGdWxsU3RhY2tSZWZyZXNoRXZlbnQoZXhlQ29udGV4dCkpOw0KKwkgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFdmVudChuZXcgRnVsbFN0YWNrUmVmcmVz
aEV2ZW50KGV4ZUNvbnRleHQpLCBudWxsKTsNCiAJICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB9DQogCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSk7DQogCSAgICAgICAgICAg
ICAgICAgICAgfQ0KQEAgLTIxMiw2ICsyMjMsMTAgQEANCiAgICAgDQogICAgIEBPdmVycmlkZQ0K
ICAgICBwdWJsaWMgdm9pZCBkaXNwb3NlKCkgew0KKwkJaWYgKGZDb250cm9sbGVyICE9IG51bGwp
IHsNCisJCQlmQ29udHJvbGxlci5yZW1vdmVTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudCh0aGlz
KTsNCisJCQlmQ29udHJvbGxlciA9IG51bGw7DQorCQl9DQogICAgICAgICBEZWJ1Z1BsdWdpbi5n
ZXREZWZhdWx0KCkucmVtb3ZlRGVidWdFdmVudExpc3RlbmVyKHRoaXMpOw0KICAgICAgICAgRGVi
dWdQbHVnaW4uZ2V0RGVmYXVsdCgpLmdldExhdW5jaE1hbmFnZXIoKS5yZW1vdmVMYXVuY2hMaXN0
ZW5lcih0aGlzKTsNCiANCkBAIC0yNzYsNCArMjkxLDMxIEBADQogICAgICAgICByZXR1cm4gZmFs
c2U7DQogICAgIH0NCiANCisJcHJvdGVjdGVkIHZvaWQgaGFuZGxlUHJvcGVydHlDaGFuZ2VkKGZp
bmFsIElQcmVmZXJlbmNlU3RvcmUgc3RvcmUsIGZpbmFsIFByb3BlcnR5Q2hhbmdlRXZlbnQgZXZl
bnQpIHsNCisJCVN0cmluZyBwcm9wZXJ0eSA9IGV2ZW50LmdldFByb3BlcnR5KCk7DQorCQlpZiAo
SURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVF9FTkFCTEUuZXF1YWxz
KHByb3BlcnR5KQ0KKwkJCQl8fCBJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1F
X0xJTUlULmVxdWFscyhwcm9wZXJ0eSkpIHsNCisJCQlpZiAoc3RvcmUuZ2V0Qm9vbGVhbihJRHNm
RGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSkpIHsNCisJCSAg
ICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3Rh
bnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIHN0b3JlLmdldEludChJRHNmRGVidWdVSUNvbnN0
YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUKSk7DQorCQkJfSBlbHNlIHsNCisJCSAgICAJZ2V0
UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFByb3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBS
RUZfU1RBQ0tfRlJBTUVfTElNSVQsIG51bGwpOw0KKwkJCX0NCisJCQlnZXRFeGVjdXRvcigpLmV4
ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KKwkJCSAgICBwdWJsaWMgdm9pZCBydW4oKSB7DQor
CQkJICAgICAgICBoYW5kbGVFdmVudChldmVudCk7DQorCQkJICAgIH0NCisJCQl9KTsNCisJCX0g
ZWxzZSBpZiAoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TWU5DSFJPTklaRURfU1RFUFBJTkdf
RU5BQkxFLmVxdWFscyhwcm9wZXJ0eSkpIHsNCisJCQlTdGVwcGluZ0NvbnRyb2xsZXIgY29udHJv
bGxlciA9IChTdGVwcGluZ0NvbnRyb2xsZXIpIGdldFNlc3Npb24oKS5nZXRNb2RlbEFkYXB0ZXIo
U3RlcHBpbmdDb250cm9sbGVyLmNsYXNzKTsNCisJCQlpZiAoY29udHJvbGxlciAhPSBudWxsKSB7
DQorCQkJCWNvbnRyb2xsZXIuZW5hYmxlU3luY2hyb25pemVkU3RlcHBpbmcoc3RvcmUuZ2V0Qm9v
bGVhbihwcm9wZXJ0eSkpOw0KKwkJCX0NCisJCX0gZWxzZSBpZiAoSURzZkRlYnVnVUlDb25zdGFu
dHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTC5lcXVhbHMocHJvcGVydHkpKSB7DQorCQkJU3RlcHBp
bmdDb250cm9sbGVyIGNvbnRyb2xsZXIgPSAoU3RlcHBpbmdDb250cm9sbGVyKSBnZXRTZXNzaW9u
KCkuZ2V0TW9kZWxBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5jbGFzcyk7DQorCQkJaWYgKGNv
bnRyb2xsZXIgIT0gbnVsbCkgew0KKwkJCQljb250cm9sbGVyLnNldE1pbmltdW1TdGVwSW50ZXJ2
YWwoc3RvcmUuZ2V0SW50KHByb3BlcnR5KSk7DQorCQkJfQ0KKwkJfQ0KKwl9DQorDQogfQ0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRl
cm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0Q29udGFpbmVyVk1O
b2RlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjQNCmRpZmYgLXUgLXIxLjQgQWJzdHJh
Y3RDb250YWluZXJWTU5vZGUuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
aW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5l
clZNTm9kZS5qYXZhCTE2IEp1biAyMDA4IDE4OjMwOjU0IC0wMDAwCTEuNA0KKysrIHNyYy9vcmcv
ZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xh
dW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAw
MDANCkBAIC0xOCw2ICsxOCw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9k
ZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1D
b250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50Ow0K
K2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWku
dmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlci5TdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVy
RE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVu
Q29udHJvbC5JQ29udGFpbmVyUmVzdW1lZERNRXZlbnQ7DQpAQCAtMzcsNiArMzgsOCBAQA0KIC8q
Kg0KICAqIEFic3RyYWN0IGltcGxlbWVudGF0aW9uIG9mIGEgY29udGFpbmVyIHZpZXcgbW9kZWwg
bm9kZS4NCiAgKiBDbGllbnRzIG5lZWQgdG8gaW1wbGVtZW50IHtAbGluayAjdXBkYXRlTGFiZWxJ
blNlc3Npb25UaHJlYWQoSUxhYmVsVXBkYXRlW10pfS4NCisgKiANCisgKiBAc2luY2UgMS4xDQog
ICovDQogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikNCiBwdWJsaWMgYWJzdHJhY3Qg
Y2xhc3MgQWJzdHJhY3RDb250YWluZXJWTU5vZGUgZXh0ZW5kcyBBYnN0cmFjdERNVk1Ob2RlIGlt
cGxlbWVudHMgSUVsZW1lbnRMYWJlbFByb3ZpZGVyIHsNCkBAIC04Nyw2ICs5MCwxMSBAQA0KICAg
ICAgICAgICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7DQogICAg
ICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOw0KICAgICAgICAgICAgIH0N
CisJICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0K
KwkgICAgICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSANCisJICAg
ICAgICB7DQorCSAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOw0KKwkgICAg
ICAgIH0NCiAJICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0RXZl
bnQpIHsNCiAJICAgICAgICBpZiAoZG1jIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkg
DQogCSAgICAgICAgew0KQEAgLTEyOSw2ICsxMzcsMTUgQEANCiAJCSAgICBpZiAoZG1jIGluc3Rh
bmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgew0KIAkJICAgICAgICBwYXJlbnREZWx0YS5hZGRO
b2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0YS5DT05URU5UKTsNCiAJCSAgICB9
DQorCQl9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCisJ
CSAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9u
IGlzIHRha2luZyANCisJCSAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRv
IGJlIHJlZnJlc2hlZCB0byBzaG93IA0KKwkJICAgIC8vIHRoZSB1c2VyIHRoYXQgdGhlIHByb2dy
YW0gaXMgcnVubmluZy4NCisJCSAgICAvLyBJZiB0aGUgc3RlcCB3YXMgaXNzdWVkIGZvciB0aGUg
d2hvbGUgY29udGFpbmVyIHJlZnJlc2gNCisJCSAgICAvLyB0aGUgd2hvbGUgY29udGFpbmVyLg0K
KwkJICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7DQorCSAgICAg
ICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3JlYXRlVk1Db250ZXh0KGRtYyksIElNb2RlbERl
bHRhLkNPTlRFTlQpOw0KKwkJICAgIH0NCiAJCX0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVw
cGluZ1RpbWVkT3V0RXZlbnQpIHsNCiAJCSAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBpbmRpY2F0
ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCiAJCSAgICAvLyBhIGxvbmcgdGlt
ZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IA0KSW5kZXg6IHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21v
ZGVsL2xhdW5jaC9GdWxsU3RhY2tSZWZyZXNoRXZlbnQuamF2YQ0KPT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZp
bGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9GdWxsU3RhY2tSZWZyZXNoRXZlbnQuamF2YSx2
DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQ0KZGlmZiAtdSAtcjEuMSBGdWxsU3RhY2tSZWZyZXNo
RXZlbnQuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9GdWxsU3RhY2tSZWZyZXNoRXZlbnQuamF2YQkz
IEp1biAyMDA4IDA0OjU2OjIyIC0wMDAwCTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9GdWxsU3RhY2tS
ZWZyZXNoRXZlbnQuamF2YQk5IEp1bCAyMDA4IDExOjUwOjE2IC0wMDAwDQpAQCAtMTYsNiArMTYs
OCBAQA0KIC8qKg0KICAqIEluZGljYXRlcyB0aGUgZW5kIG9mIGEgc2VxdWVuY2Ugb2Ygc3RlcHMu
IFNob3VsZCBiZSBoYW5kbGVkIGxpa2UgYSBzdXNwZW5kZWQNCiAgKiBldmVudCB0byB0cmlnZ2Vy
IGEgZnVsbCByZWZyZXNoIG9mIHN0YWNrIGZyYW1lcy4NCisgKiANCisgKiBAc2luY2UgMS4xDQog
ICovDQogcHVibGljIGNsYXNzIEZ1bGxTdGFja1JlZnJlc2hFdmVudCBleHRlbmRzIEFic3RyYWN0
RE1FdmVudDxJRXhlY3V0aW9uRE1Db250ZXh0PiB7DQogICAgIA0KSW5kZXg6IHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5j
aC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jv
b3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91
aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0VGhyZWFkVk1Ob2RlLmphdmEsdg0KcmV0cmlldmlu
ZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgQWJzdHJhY3RUaHJlYWRWTU5vZGUuamF2YQ0K
LS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhCTE3IEp1biAyMDA4IDIw
OjQ2OjExIC0wMDAwCTEuNQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJu
YWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5q
YXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0yMyw2ICsyMyw3IEBADQogaW1wb3J0
IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlci5T
dGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5z
ZXJ2aWNlLklSdW5Db250cm9sOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyUmVzdW1lZERNRXZl
bnQ7DQpAQCAtNTAsNiArNTEsOCBAQA0KIC8qKg0KICAqIEFic3RyYWN0IGltcGxlbWVudGF0aW9u
IG9mIGEgdGhyZWFkIHZpZXcgbW9kZWwgbm9kZS4NCiAgKiBDbGllbnRzIG5lZWQgdG8gaW1wbGVt
ZW50IHtAbGluayAjdXBkYXRlTGFiZWxJblNlc3Npb25UaHJlYWQoSUxhYmVsVXBkYXRlW10pfS4N
CisgKiANCisgKiBAc2luY2UgMS4xDQogICovDQogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0
aW9uIikNCiBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUaHJlYWRWTU5vZGUgZXh0ZW5k
cyBBYnN0cmFjdERNVk1Ob2RlDQpAQCAtMTEyLDYgKzExNSwxNSBAQA0KICAgICAgICAgICAgICAg
ICBybS5kb25lKCk7DQogICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICB9DQor
ICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQgJiYg
DQorICAgICAgICAgICAgICAgICgoU3RlcHBpbmdUaW1lZE91dEV2ZW50KWUpLmdldERNQ29udGV4
dCgpIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgDQorICAgICB7DQorICAgICAgICAg
IC8vIFRoZSB0aW1lZCBvdXQgZXZlbnQgb2NjdXJlZCBvbiBhIGNvbnRhaW5lciBhbmQgbm90IG9u
IGEgdGhyZWFkLiAgRG8gbm90DQorICAgICAgICAgIC8vIHJldHVybiBhIGNvbnRleHQgZm9yIHRo
aXMgZXZlbnQsIHdoaWNoIHdpbGwgZm9yY2UgdGhlIHZpZXcgbW9kZWwgdG8gZ2VuZXJhdGUNCisg
ICAgICAgICAgLy8gYSBkZWx0YSBmb3IgYWxsIHRoZSB0aHJlYWRzLg0KKyAgICAgICAgICBybS5z
ZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBEc2ZVSVBsdWdpbi5QTFVHSU5fSUQs
IElEc2ZTdGF0dXNDb25zdGFudHMuTk9UX1NVUFBPUlRFRCwgIiIsIG51bGwpKTsgLy8kTk9OLU5M
Uy0xJA0KKyAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICAgIHJldHVybjsNCiAgICAgICAg
IH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQgJiYgDQogICAg
ICAgICAgICAgICAgICAgICgoSVN0ZXBwaW5nVGltZWRPdXRFdmVudCllKS5nZXRETUNvbnRleHQo
KSBpbnN0YW5jZW9mIElDb250YWluZXJETUNvbnRleHQpIA0KICAgICAgICAgew0KQEAgLTIzMiw2
ICsyNDQsOCBAQA0KICAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5OT19DSEFOR0U7DQog
ICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBGdWxsU3RhY2tSZWZyZXNoRXZlbnQpIHsN
CiAgICAgICAgICAgICByZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVDsNCisgICAgICAgIH0gZWxz
ZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0KKyAgICAgICAgICAg
IHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOyAgICAgICAgICAgIA0KICAgICAgICAgfSBlbHNl
IGlmIChlIGluc3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0KICAgICAgICAgICAg
IHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOyAgICAgICAgICAgIA0KICAgICAgICAgfSBlbHNl
IGlmIChlIGluc3RhbmNlb2YgTW9kZWxQcm94eUluc3RhbGxlZEV2ZW50KSB7DQpAQCAtMjcxLDYg
KzI4NSwxMiBAQA0KICAgICAgICAgICAgIC8vIGFuZCBhIGZpeGVkIGRlbGF5LiAgUmVmcmVzaCB0
aGUgd2hvbGUgdGhyZWFkIHVwb24gdGhpcyBldmVudC4NCiAgICAgICAgICAgICBwYXJlbnREZWx0
YS5hZGROb2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0YS5DT05URU5UKTsNCiAg
ICAgICAgICAgICBybS5kb25lKCk7DQorICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBT
dGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsNCisgICAgICAgICAgICAvLyBTdGVwcGluZyB0aW1lLW91
dCBpbmRpY2F0ZXMgdGhhdCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCisgICAgICAgICAg
ICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBz
aG93IA0KKyAgICAgICAgICAgIC8vIHRoZSB1c2VyIHRoYXQgdGhlIHByb2dyYW0gaXMgcnVubmlu
Zy4gIA0KKyAgICAgICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3JlYXRlVk1Db250ZXh0KGRt
YyksIElNb2RlbERlbHRhLkNPTlRFTlQpOw0KKyAgICAgICAgICAgIHJtLmRvbmUoKTsgICAgICAg
ICAgICANCiAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0
RXZlbnQpIHsNCiAgICAgICAgICAgICAvLyBTdGVwcGluZyB0aW1lLW91dCBpbmRpY2F0ZXMgdGhh
dCBhIHN0ZXAgb3BlcmF0aW9uIGlzIHRha2luZyANCiAgICAgICAgICAgICAvLyBhIGxvbmcgdGlt
ZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IA0KSW5kZXg6IHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21v
ZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTog
L2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNp
b25hbC91aS92aWV3bW9kZWwvbGF1bmNoL1N0YWNrRnJhbWVzVk1Ob2RlLmphdmEsdg0KcmV0cmll
dmluZyByZXZpc2lvbiAxLjE0DQpkaWZmIC11IC1yMS4xNCBTdGFja0ZyYW1lc1ZNTm9kZS5qYXZh
DQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91
aS92aWV3bW9kZWwvbGF1bmNoL1N0YWNrRnJhbWVzVk1Ob2RlLmphdmEJMjQgSnVuIDIwMDggMTc6
MzQ6NDAgLTAwMDAJMS4xNA0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJu
YWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZh
CTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0yMiwxMCArMjIsMTEgQEANCiBpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7DQogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJv
bGxlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lv
bmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuU3RlcHBpbmdUaW1lZE91dEV2ZW50
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2syOw0KLWltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyRE1D
b250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29u
dHJvbC5JQ29udGFpbmVyU3VzcGVuZGVkRE1FdmVudDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQu
ZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29udGV4dDsNCkBAIC0z
Myw2ICszNCw3IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklS
dW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
ZGVidWcuc2VydmljZS5JU3RhY2suSUZyYW1lRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2suSUZyYW1lRE1EYXRhOw0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyLklTdGVwcGluZ1Rp
bWVkT3V0RXZlbnQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS5JRHNmRGVi
dWdVSUNvbnN0YW50czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vz
c2lvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnVpLmNvbmN1cnJlbnQuVmlld2VyRGF0
YVJlcXVlc3RNb25pdG9yOw0KQEAgLTY1LDYgKzY3LDggQEANCiAgICAgDQogCS8qKg0KIAkgKiBW
aWV3IG1vZGVsIGNvbnRleHQgcmVwcmVzZW50aW5nIHRoZSBlbmQgb2YgYW4gaW5jb21wbGV0ZSBz
dGFjay4NCisJICogDQorCSAqIEBzaW5jZSAxLjENCiAJICovDQogCXB1YmxpYyBjbGFzcyBJbmNv
bXBsZXRlU3RhY2tWTUNvbnRleHQgZXh0ZW5kcyBBYnN0cmFjdFZNQ29udGV4dCB7DQogCQlwcml2
YXRlIGZpbmFsIGludCBmTGV2ZWw7DQpAQCAtMzIwLDEzICszMjQsMTYgQEANCiAgICAgICAgIGlm
IChpZHggIT0gMCkgcmV0dXJuOw0KICAgICAgICAgDQogICAgICAgICBmaW5hbCBJRXhlY3V0aW9u
RE1Db250ZXh0IGV4ZWNEbWMgPSBmaW5kRG1jSW5QYXRoKHVwZGF0ZS5nZXRWaWV3ZXJJbnB1dCgp
LCB1cGRhdGUuZ2V0RWxlbWVudFBhdGgoKSwgSUV4ZWN1dGlvbkRNQ29udGV4dC5jbGFzcyk7DQor
ICAgICAgICBpZiAoZXhlY0RtYyA9PSBudWxsKSB7DQorICAgICAgICAJcmV0dXJuOw0KKyAgICAg
ICAgfQ0KICAgICAgICAgSVJ1bkNvbnRyb2wgcnVuQ29udHJvbFNlcnZpY2UgPSBnZXRTZXJ2aWNl
c1RyYWNrZXIoKS5nZXRTZXJ2aWNlKElSdW5Db250cm9sLmNsYXNzKTsgDQotICAgICAgICBTdGVw
UXVldWVNYW5hZ2VyIHN0ZXBRdWV1ZU1nclNlcnZpY2UgPSBnZXRTZXJ2aWNlc1RyYWNrZXIoKS5n
ZXRTZXJ2aWNlKFN0ZXBRdWV1ZU1hbmFnZXIuY2xhc3MpOyANCi0gICAgICAgIGlmIChleGVjRG1j
ID09IG51bGwgfHwgcnVuQ29udHJvbFNlcnZpY2UgPT0gbnVsbCB8fCBzdGVwUXVldWVNZ3JTZXJ2
aWNlID09IG51bGwpIHJldHVybjsNCisgICAgICAgIFN0ZXBwaW5nQ29udHJvbGxlciBzdGVwUXVl
dWVNZ3IgPSAoU3RlcHBpbmdDb250cm9sbGVyKSBleGVjRG1jLmdldEFkYXB0ZXIoU3RlcHBpbmdD
b250cm9sbGVyLmNsYXNzKTsgDQorICAgICAgICBpZiAocnVuQ29udHJvbFNlcnZpY2UgPT0gbnVs
bCB8fCBzdGVwUXVldWVNZ3IgPT0gbnVsbCkgcmV0dXJuOw0KICAgICAgICAgDQogICAgICAgICBT
dHJpbmcgaW1hZ2VLZXkgPSBudWxsOw0KICAgICAgICAgaWYgKHJ1bkNvbnRyb2xTZXJ2aWNlLmlz
U3VzcGVuZGVkKGV4ZWNEbWMpIHx8IA0KLSAgICAgICAgICAgIChydW5Db250cm9sU2VydmljZS5p
c1N0ZXBwaW5nKGV4ZWNEbWMpICYmICFzdGVwUXVldWVNZ3JTZXJ2aWNlLmlzU3RlcHBpbmdUaW1l
ZE91dChleGVjRG1jKSkpDQorICAgICAgICAgICAgKHJ1bkNvbnRyb2xTZXJ2aWNlLmlzU3RlcHBp
bmcoZXhlY0RtYykgJiYgIXN0ZXBRdWV1ZU1nci5pc1N0ZXBwaW5nVGltZWRPdXQoZXhlY0RtYykp
KQ0KICAgICAgICAgew0KICAgICAgICAgICAgIGltYWdlS2V5ID0gSURlYnVnVUlDb25zdGFudHMu
SU1HX09CSlNfU1RBQ0tGUkFNRTsNCiAgICAgICAgIH0gZWxzZSB7DQpAQCAtNDA5LDcgKzQxNiw5
IEBADQogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQgfCBJTW9kZWxEZWx0
YS5FWFBBTkQgfCBJTW9kZWxEZWx0YS5TRUxFQ1Q7DQogICAgICAgICB9IGVsc2UgaWYgKGUgaW5z
dGFuY2VvZiBGdWxsU3RhY2tSZWZyZXNoRXZlbnQpIHsNCiAgICAgICAgIAlyZXR1cm4gSU1vZGVs
RGVsdGEuQ09OVEVOVCB8IElNb2RlbERlbHRhLkVYUEFORDsNCi0gICAgICAgIH0gZWxzZSBpZiAo
ZSBpbnN0YW5jZW9mIFN0ZXBRdWV1ZU1hbmFnZXIuSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0K
KyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7
DQorICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7DQorICAgICAgICB9IGVs
c2UgaWYgKGUgaW5zdGFuY2VvZiBJU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7DQogICAgICAgICAg
ICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7DQogICAgICAgICB9IGVsc2UgaWYgKGUgaW5z
dGFuY2VvZiBNb2RlbFByb3h5SW5zdGFsbGVkRXZlbnQpIHsNCiAgICAgICAgICAgICByZXR1cm4g
SU1vZGVsRGVsdGEuU0VMRUNUIHwgSU1vZGVsRGVsdGEuRVhQQU5EOw0KQEAgLTQ2MSw4ICs0NzAs
MTAgQEANCiAgICAgICAgICAgICBjbGVhclN0YWNrRnJhbWVMaW1pdCggKChJU3VzcGVuZGVkRE1F
dmVudCllKS5nZXRETUNvbnRleHQoKSApOw0KICAgICAgICAgICAgIElFeGVjdXRpb25ETUNvbnRl
eHQgZXhlY0RtYyA9ICgoSVN1c3BlbmRlZERNRXZlbnQpZSkuZ2V0RE1Db250ZXh0KCk7DQogICAg
ICAgICAgICAgYnVpbGREZWx0YUZvclN1c3BlbmRlZEV2ZW50KGV4ZWNEbWMsIGV4ZWNEbWMsIHBh
cmVudCwgbm9kZU9mZnNldCwgcm0pOw0KLSAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2Yg
U3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7DQotICAgICAgICAgICAg
YnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgoU3RlcFF1ZXVlTWFuYWdlci5JU3Rl
cHBpbmdUaW1lZE91dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KKyAgICAgICAg
fSBlbHNlIGlmIChlIGluc3RhbmNlb2YgU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7DQorICAgICAg
ICAgICAgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgoU3RlcHBpbmdUaW1lZE91
dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KKyAgICAgICAgfSBlbHNlIGlmIChl
IGluc3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgew0KKyAgICAgICAgICAgIGJ1aWxk
RGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoKElTdGVwcGluZ1RpbWVkT3V0RXZlbnQpZSwg
cGFyZW50LCBub2RlT2Zmc2V0LCBybSk7DQogICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2Vv
ZiBNb2RlbFByb3h5SW5zdGFsbGVkRXZlbnQpIHsNCiAgICAgICAgICAgICBidWlsZERlbHRhRm9y
TW9kZWxQcm94eUluc3RhbGxlZEV2ZW50KHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOw0KICAgICAg
ICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgRXhwYW5kU3RhY2tFdmVudCkgew0KQEAgLTU0Nyw3
ICs1NTgsMTMgQEANCiAgICAgICAgIHJtLmRvbmUoKTsNCiAJfQ0KIAkNCi0gICAgcHJpdmF0ZSB2
b2lkIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoZmluYWwgU3RlcFF1ZXVlTWFu
YWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50IGUsIGZpbmFsIFZNRGVsdGEgcGFyZW50RGVsdGEs
IGZpbmFsIGludCBub2RlT2Zmc2V0LCBmaW5hbCBSZXF1ZXN0TW9uaXRvciBybSkgew0KKyAgICBw
cml2YXRlIHZvaWQgYnVpbGREZWx0YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudChmaW5hbCBTdGVw
cGluZ1RpbWVkT3V0RXZlbnQgZSwgZmluYWwgVk1EZWx0YSBwYXJlbnREZWx0YSwgZmluYWwgaW50
IG5vZGVPZmZzZXQsIGZpbmFsIFJlcXVlc3RNb25pdG9yIHJtKSB7DQorICAgICAgICAvLyBSZXBh
aW50IHRoZSBzdGFjayBmcmFtZSBpbWFnZXMgdG8gaGF2ZSB0aGUgcnVubmluZyBzeW1ib2wuDQor
ICAgICAgICAvL3BhcmVudERlbHRhLnNldEZsYWdzKHBhcmVudERlbHRhLmdldEZsYWdzKCkgfCBJ
TW9kZWxEZWx0YS5DT05URU5UKTsNCisgICAgICAgIHJtLmRvbmUoKTsNCisgICAgfQ0KKyAgICAN
CisgICAgcHJpdmF0ZSB2b2lkIGJ1aWxkRGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoZmlu
YWwgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCBlLCBmaW5hbCBWTURlbHRhIHBhcmVudERlbHRhLCBm
aW5hbCBpbnQgbm9kZU9mZnNldCwgZmluYWwgUmVxdWVzdE1vbml0b3Igcm0pIHsNCiAgICAgICAg
IC8vIFJlcGFpbnQgdGhlIHN0YWNrIGZyYW1lIGltYWdlcyB0byBoYXZlIHRoZSBydW5uaW5nIHN5
bWJvbC4NCiAgICAgICAgIC8vcGFyZW50RGVsdGEuc2V0RmxhZ3MocGFyZW50RGVsdGEuZ2V0Rmxh
Z3MoKSB8IElNb2RlbERlbHRhLkNPTlRFTlQpOw0KICAgICAgICAgcm0uZG9uZSgpOw0KQEAgLTY2
MCw2ICs2NzcsOCBAQA0KIAkgKiBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YWNrIGZyYW1lIGxp
bWl0LiBJZiBubyBsaW1pdCBpcyBhcHBsaWNhYmxlIHtAbGluayBJbnRlZ2VyLk1BWF9WQUxVRX0g
aXMgcmV0dXJuZWQuDQogCSAqIA0KIAkgKiBAcmV0dXJuIHRoZSBjdXJyZW50IHN0YWNrIGZyYW1l
IGxpbWl0DQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQogCSAqLw0KIAlwdWJsaWMgaW50IGdldFN0
YWNrRnJhbWVMaW1pdChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCiAJCWlmIChmVGVt
cG9yYXJ5TGltaXRzLmNvbnRhaW5zS2V5KGV4ZWNDdHgpKSB7DQpAQCAtNjg5LDYgKzcwOCw4IEBA
DQogCS8qKg0KIAkgKiBJbmNyZW1lbnQgdGhlIHN0YWNrIGZyYW1lIGxpbWl0IGJ5IHRoZSBkZWZh
dWx0IGluY3JlbWVudC4NCiAJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBkb3VibGVzIHRoZSBjdXJy
ZW50IGxpbWl0Lg0KKwkgKiANCisJICogQHNpbmNlIDEuMQ0KIAkgKi8NCiAJcHVibGljIHZvaWQg
aW5jcmVtZW50U3RhY2tGcmFtZUxpbWl0KElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0K
IAkJZmluYWwgaW50IHN0YWNrRnJhbWVMaW1pdD0gZ2V0U3RhY2tGcmFtZUxpbWl0KGV4ZWNDdHgp
Ow0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9u
YWwvdWkvdmlld21vZGVsL2xhdW5jaC9EZWxheWVkU3RhY2tSZWZyZXNoVXBkYXRlUG9saWN5Lmph
dmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvRGVsYXll
ZFN0YWNrUmVmcmVzaFVwZGF0ZVBvbGljeS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4z
DQpkaWZmIC11IC1yMS4zIERlbGF5ZWRTdGFja1JlZnJlc2hVcGRhdGVQb2xpY3kuamF2YQ0KLS0t
IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmll
d21vZGVsL2xhdW5jaC9EZWxheWVkU3RhY2tSZWZyZXNoVXBkYXRlUG9saWN5LmphdmEJMTcgSnVu
IDIwMDggMjE6MDA6MzIgLTAwMDAJMS4zDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0RlbGF5ZWRTdGFja1Jl
ZnJlc2hVcGRhdGVQb2xpY3kuamF2YQk5IEp1bCAyMDA4IDExOjUwOjE2IC0wMDAwDQpAQCAtMzEs
NiArMzEsOCBAQA0KICAqIFRoZSB1bmRlcmx5aW5nIGJhc2UgdXBkYXRlIHBvbGljeSBpcyBjb25z
aWRlcmVkIGZvciBjb250YWluZXIgY29udGV4dHMgb25seS4NCiAgKiBJbiBvdGhlciBjYXNlcyB0
aGUgY2FjaGUgZGF0YSBpcyBhbHdheXMgZmx1c2hlZC4NCiAgKiA8L3A+DQorICogDQorICogQHNp
bmNlIDEuMQ0KICAqLw0KIHB1YmxpYyBjbGFzcyBEZWxheWVkU3RhY2tSZWZyZXNoVXBkYXRlUG9s
aWN5IGV4dGVuZHMgVXBkYXRlUG9saWN5RGVjb3JhdG9yIHsNCiANCkluZGV4OiBzcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVy
ZW5jZVBhZ2UuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVj
bGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcv
ZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvRHNmRGVidWdQcmVm
ZXJlbmNlUGFnZS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4x
IERzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvRHNmRGVidWdQcmVmZXJlbmNlUGFnZS5qYXZh
CTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvRHNmRGVidWdQcmVmZXJlbmNlUGFnZS5q
YXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0xMiw2ICsxMiw3IEBADQogDQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC51aS5Ec2ZEZWJ1Z1VJUGx1Z2lu
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkuSURzZkRlYnVnVUlDb25zdGFu
dHM7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLnByZWZlcmVuY2UuQm9vbGVhbkZpZWxkRWRp
dG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS5wcmVmZXJlbmNlLkZpZWxkRWRpdG9yUHJl
ZmVyZW5jZVBhZ2U7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLnByZWZlcmVuY2UuSVByZWZl
cmVuY2VTdG9yZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamZhY2UucHJlZmVyZW5jZS5JbnRlZ2Vy
RmllbGRFZGl0b3I7DQpAQCAtMzMsNyArMzQsNyBAQA0KIAkgKiBNYW5kYXRvcnkgZGVmYXVsdCBj
b25zdHJ1Y3RvciAoZXhlY3V0YWJsZSBleHRlbnNpb24pLg0KIAkgKi8NCiAJcHVibGljIERzZkRl
YnVnUHJlZmVyZW5jZVBhZ2UoKSB7DQotCQlzdXBlcihHUklEKTsNCisJCXN1cGVyKEZMQVQpOw0K
IAkJSVByZWZlcmVuY2VTdG9yZSBzdG9yZT0gRHNmRGVidWdVSVBsdWdpbi5nZXREZWZhdWx0KCku
Z2V0UHJlZmVyZW5jZVN0b3JlKCk7DQogCQlzZXRQcmVmZXJlbmNlU3RvcmUoc3RvcmUpOw0KIAkJ
c2V0RGVzY3JpcHRpb24oTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5Ec2ZEZWJ1Z1ByZWZlcmVuY2VQ
YWdlX2Rlc2NyaXB0aW9uKTsgDQpAQCAtNTMsMjYgKzU0LDU0IEBADQogDQogCUBPdmVycmlkZQ0K
IAlwcm90ZWN0ZWQgdm9pZCBjcmVhdGVGaWVsZEVkaXRvcnMoKSB7DQotCQlHcm91cCBwZXJmb3Jt
YW5jZUdyb3VwPSBuZXcgR3JvdXAoZ2V0RmllbGRFZGl0b3JQYXJlbnQoKSwgU1dULk5PTkUpOw0K
LQkJcGVyZm9ybWFuY2VHcm91cC5zZXRUZXh0KE1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuRHNmRGVi
dWdQcmVmZXJlbmNlUGFnZV9wZXJmb3JtYW5jZUdyb3VwX2xhYmVsKTsNCi0JCXBlcmZvcm1hbmNl
R3JvdXAuc2V0TGF5b3V0KG5ldyBHcmlkTGF5b3V0KCkpOw0KLQkJR3JpZERhdGEgZ2Q9IG5ldyBH
cmlkRGF0YShHcmlkRGF0YS5GSUxMX0hPUklaT05UQUwpOw0KLQkJZ2QudmVydGljYWxJbmRlbnQ9
IDU7DQotCQlwZXJmb3JtYW5jZUdyb3VwLnNldExheW91dERhdGEoZ2QpOw0KLQkJDQotCQlDb21w
b3NpdGUgaW5uZXJQYXJlbnQ9IG5ldyBDb21wb3NpdGUocGVyZm9ybWFuY2VHcm91cCwgU1dULk5P
TkUpOw0KLQkJaW5uZXJQYXJlbnQuc2V0TGF5b3V0KG5ldyBHcmlkTGF5b3V0KCkpOw0KLQkJaW5u
ZXJQYXJlbnQuc2V0TGF5b3V0RGF0YShnZCk7DQorCQlmaW5hbCBDb21wb3NpdGUgcGFyZW50PSBn
ZXRGaWVsZEVkaXRvclBhcmVudCgpOw0KKwkJZmluYWwgR3JpZExheW91dCBsYXlvdXQ9IG5ldyBH
cmlkTGF5b3V0KCk7DQorCQlsYXlvdXQubWFyZ2luV2lkdGg9IDA7DQorCQlwYXJlbnQuc2V0TGF5
b3V0KGxheW91dCk7DQogCQkNCisJCUdyb3VwIHBlcmZvcm1hbmNlR3JvdXA9IG5ldyBHcm91cChw
YXJlbnQsIFNXVC5OT05FKTsNCisJCXBlcmZvcm1hbmNlR3JvdXAuc2V0VGV4dChNZXNzYWdlc0Zv
clByZWZlcmVuY2VzLkRzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfcGVyZm9ybWFuY2VHcm91cF9sYWJl
bCk7DQorCQlHcmlkTGF5b3V0IGdyb3VwTGF5b3V0PSBuZXcgR3JpZExheW91dCgzLCBmYWxzZSk7
DQorCQlwZXJmb3JtYW5jZUdyb3VwLnNldExheW91dChncm91cExheW91dCk7DQorCQlwZXJmb3Jt
YW5jZUdyb3VwLnNldExheW91dERhdGEobmV3IEdyaWREYXRhKEdyaWREYXRhLkZJTExfSE9SSVpP
TlRBTCkpOw0KKw0KKwkJLy8gc3RhY2sgZnJhbWUgbGltaXQNCiAJCUludGVnZXJGaWVsZEVkaXRv
ciBsaW1pdEVkaXRvcj0gbmV3IEludGVnZXJXaXRoQm9vbGVhbkZpZWxkRWRpdG9yKA0KIAkJCQlJ
RHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRSwgDQogCQkJ
CUlEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIA0KIAkJCQlNZXNz
YWdlc0ZvclByZWZlcmVuY2VzLkRzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfbGltaXRTdGFja0ZyYW1l
c19sYWJlbCwgDQotCQkJCWlubmVyUGFyZW50KTsNCisJCQkJcGVyZm9ybWFuY2VHcm91cCk7DQog
DQogCQlsaW1pdEVkaXRvci5zZXRWYWxpZFJhbmdlKDEsIEludGVnZXIuTUFYX1ZBTFVFKTsNCi0J
CWxpbWl0RWRpdG9yLmZpbGxJbnRvR3JpZChpbm5lclBhcmVudCwgMyk7DQorCQlsaW1pdEVkaXRv
ci5maWxsSW50b0dyaWQocGVyZm9ybWFuY2VHcm91cCwgMyk7DQogCQlhZGRGaWVsZChsaW1pdEVk
aXRvcik7DQorDQorCQkvLyBzeW5jIHN0ZXBwaW5nIHNwZWVkDQorCQlCb29sZWFuRmllbGRFZGl0
b3Igc3luY1N0ZXBwaW5nRWRpdG9yPSBuZXcgQm9vbGVhbkZpZWxkRWRpdG9yKA0KKwkJCQlJRHNm
RGVidWdVSUNvbnN0YW50cy5QUkVGX1NZTkNIUk9OSVpFRF9TVEVQUElOR19FTkFCTEUsDQorCQkJ
CU1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9zeW5jU3RlcHBp
bmdfbGFiZWwsDQorCQkJCXBlcmZvcm1hbmNlR3JvdXApOw0KKw0KKwkJc3luY1N0ZXBwaW5nRWRp
dG9yLmZpbGxJbnRvR3JpZChwZXJmb3JtYW5jZUdyb3VwLCAzKTsNCisJCWFkZEZpZWxkKHN5bmNT
dGVwcGluZ0VkaXRvcik7DQorDQorCQkvLyBtaW5pbXVtIHN0ZXAgaW50ZXJ2YWwNCisJCUludGVn
ZXJGaWVsZEVkaXRvciBtaW5JbnRlcnZhbEVkaXRvcj0gbmV3IEludGVnZXJGaWVsZEVkaXRvcigN
CisJCQkJSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTCwNCisJCQkJ
TWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX21pblN0ZXBJbnRl
cnZhbF9sYWJlbCwNCisJCQkJcGVyZm9ybWFuY2VHcm91cCk7DQorDQorCQltaW5JbnRlcnZhbEVk
aXRvci5zZXRWYWxpZFJhbmdlKDAsIDEwMDAwKTsNCisJCW1pbkludGVydmFsRWRpdG9yLmZpbGxJ
bnRvR3JpZChwZXJmb3JtYW5jZUdyb3VwLCAzKTsNCisJCWFkZEZpZWxkKG1pbkludGVydmFsRWRp
dG9yKTsNCisNCisJCS8vIG5lZWQgdG8gc2V0IGxheW91dCBhZ2Fpbg0KKwkJcGVyZm9ybWFuY2VH
cm91cC5zZXRMYXlvdXQoZ3JvdXBMYXlvdXQpOw0KK30NCisNCisJQE92ZXJyaWRlDQorCXByb3Rl
Y3RlZCB2b2lkIGFkanVzdEdyaWRMYXlvdXQoKSB7DQorCQkvLyBkbyBub3RoaW5nDQogCX0NCiAN
CiB9DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVm
ZXJlbmNlcy9tZXNzYWdlcy5wcm9wZXJ0aWVzDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jv
b3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNl
cy9tZXNzYWdlcy5wcm9wZXJ0aWVzLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11
IC1yMS4xIG1lc3NhZ2VzLnByb3BlcnRpZXMNCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2Rl
YnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL21lc3NhZ2VzLnByb3BlcnRpZXMJMjQgSnVuIDIw
MDggMTc6MzQ6NDAgLTAwMDAJMS4xDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9p
bnRlcm5hbC91aS9wcmVmZXJlbmNlcy9tZXNzYWdlcy5wcm9wZXJ0aWVzCTkgSnVsIDIwMDggMTE6
NTA6MTYgLTAwMDANCkBAIC0xMSw0ICsxMSw2IEBADQogDQogRHNmRGVidWdQcmVmZXJlbmNlUGFn
ZV9kZXNjcmlwdGlvbj1HZW5lcmFsIHNldHRpbmdzIGZvciBkZWJ1Z2dpbmcgd2l0aCBEU0Y6DQog
RHNmRGVidWdQcmVmZXJlbmNlUGFnZV9saW1pdFN0YWNrRnJhbWVzX2xhYmVsPUxpbWl0IG51bWJl
ciBvZiBzdGFjayBmcmFtZXMgdG8NCitEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX21pblN0ZXBJbnRl
cnZhbF9sYWJlbD1NaW5pbXVtIGludGVydmFsIGJldHdlZW4gc3RlcHMgKGluIG1pbGxpc2Vjb25k
cykNCiBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFiZWw9UGVyZm9y
bWFuY2UNCitEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3N5bmNTdGVwcGluZ19sYWJlbD1TeW5jaHJv
bml6ZSBzdGVwcGluZyBzcGVlZCB3aXRoIFVJIHVwZGF0ZXMNCkluZGV4OiBzcmMvb3JnL2VjbGlw
c2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL1N0cmluZ1dpdGhCb29sZWFu
RmllbGRFZGl0b3IuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3Jn
LmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0
aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZm
IC11IC1yMS4xIFN0cmluZ1dpdGhCb29sZWFuRmllbGRFZGl0b3IuamF2YQ0KLS0tIHNyYy9vcmcv
ZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3RyaW5nV2l0aEJv
b2xlYW5GaWVsZEVkaXRvci5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMQ0KKysr
IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvU3Ry
aW5nV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDAN
CkBAIC0xNCw4ICsxNCwxMCBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuU1dUOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5zd3QuZXZlbnRzLlNlbGVjdGlvbkFkYXB0ZXI7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLnN3dC5ldmVudHMuU2VsZWN0aW9uRXZlbnQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3
dC5sYXlvdXQuR3JpZExheW91dDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQnV0
dG9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5Db21wb3NpdGU7DQoraW1wb3J0
IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkxhYmVsOw0KIA0KIC8qKg0KICAqIEEgc3RyaW5nIGZp
ZWxkIGVkaXRvciB3aXRoIGFuIGVuYWJsZW1lbnQgY2hlY2sgYm94Lg0KQEAgLTQ3LDIwICs0OSwx
NCBAQA0KIAkJc3VwZXIuZG9GaWxsSW50b0dyaWQocGFyZW50LCBudW1Db2x1bW5zKTsNCiAJfQ0K
IA0KLQlAT3ZlcnJpZGUNCi0JcHVibGljIGludCBnZXROdW1iZXJPZkNvbnRyb2xzKCkgew0KLQkJ
cmV0dXJuIHN1cGVyLmdldE51bWJlck9mQ29udHJvbHMoKSArIDE7DQotCX0NCi0NCi0gICAgQE92
ZXJyaWRlDQotCXByb3RlY3RlZCB2b2lkIGFkanVzdEZvck51bUNvbHVtbnMoaW50IG51bUNvbHVt
bnMpIHsNCi0gICAgCS8vIHRoZSBjaGVja2JveCB1c2VzIG9uZSBjb2x1bW4NCi0gICAgCXN1cGVy
LmFkanVzdEZvck51bUNvbHVtbnMobnVtQ29sdW1ucyAtIDEpOw0KLSAgICB9DQotDQogCXByaXZh
dGUgQnV0dG9uIGdldENoZWNrYm94Q29udHJvbChDb21wb3NpdGUgcGFyZW50KSB7DQogCQlpZiAo
ZkNoZWNrYm94ID09IG51bGwpIHsNCi0JCQlmQ2hlY2tib3g9IG5ldyBCdXR0b24ocGFyZW50LCBT
V1QuQ0hFQ0spOw0KKwkJCUNvbXBvc2l0ZSBpbm5lcj0gbmV3IENvbXBvc2l0ZShwYXJlbnQsIFNX
VC5OVUxMKTsNCisJCQlmaW5hbCBHcmlkTGF5b3V0IGxheW91dD0gbmV3IEdyaWRMYXlvdXQoMiwg
ZmFsc2UpOw0KKwkJCWxheW91dC5tYXJnaW5XaWR0aCA9IDA7DQorCQkJaW5uZXIuc2V0TGF5b3V0
KGxheW91dCk7DQorCQkJZkNoZWNrYm94PSBuZXcgQnV0dG9uKGlubmVyLCBTV1QuQ0hFQ0spOw0K
KwkJCWdldExhYmVsQ29udHJvbChpbm5lcik7DQogCQkJZkNoZWNrYm94LmFkZFNlbGVjdGlvbkxp
c3RlbmVyKG5ldyBTZWxlY3Rpb25BZGFwdGVyKCkgew0KIAkJCQlAT3ZlcnJpZGUNCiAJCQkJcHVi
bGljIHZvaWQgd2lkZ2V0U2VsZWN0ZWQoU2VsZWN0aW9uRXZlbnQgZSkgew0KQEAgLTcwLDExICs2
NiwyMiBAQA0KIAkJCQl9DQogCQkJfSk7DQogCQl9IGVsc2Ugew0KLQkJCWNoZWNrUGFyZW50KGZD
aGVja2JveCwgcGFyZW50KTsNCisJCQljaGVja1BhcmVudChmQ2hlY2tib3guZ2V0UGFyZW50KCks
IHBhcmVudCk7DQogCQl9DQogCQlyZXR1cm4gZkNoZWNrYm94Ow0KIAl9DQogDQorCUBPdmVycmlk
ZQ0KKwlwdWJsaWMgTGFiZWwgZ2V0TGFiZWxDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsNCisJ
CWZpbmFsIExhYmVsIGxhYmVsPSBnZXRMYWJlbENvbnRyb2woKTsNCisJCWlmIChsYWJlbCA9PSBu
dWxsKSB7DQorCQkJcmV0dXJuIHN1cGVyLmdldExhYmVsQ29udHJvbChwYXJlbnQpOw0KKwkJfSBl
bHNlIHsNCisJCQljaGVja1BhcmVudChsYWJlbC5nZXRQYXJlbnQoKSwgcGFyZW50KTsNCisJCX0N
CisJCXJldHVybiBsYWJlbDsNCisJfQ0KKw0KIAlwcm90ZWN0ZWQgdm9pZCB2YWx1ZUNoYW5nZWQo
Ym9vbGVhbiBvbGRWYWx1ZSwgYm9vbGVhbiBuZXdWYWx1ZSkgew0KICAgICAgICAgc2V0UHJlc2Vu
dHNEZWZhdWx0VmFsdWUoZmFsc2UpOw0KICAgICAgICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVl
KSB7DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVm
ZXJlbmNlcy9JbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5h
bC91aS9wcmVmZXJlbmNlcy9JbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhLHYNCnJl
dHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIEludGVnZXJXaXRoQm9vbGVhbkZp
ZWxkRWRpdG9yLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFs
L3VpL3ByZWZlcmVuY2VzL0ludGVnZXJXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmEJMjQgSnVu
IDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xDQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9JbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5q
YXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0xNCw4ICsxNCwxMCBAQA0KIGltcG9y
dCBvcmcuZWNsaXBzZS5zd3QuU1dUOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuZXZlbnRzLlNl
bGVjdGlvbkFkYXB0ZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ldmVudHMuU2VsZWN0aW9u
RXZlbnQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5sYXlvdXQuR3JpZExheW91dDsNCiBpbXBv
cnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQnV0dG9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5z
d3Qud2lkZ2V0cy5Db21wb3NpdGU7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkxh
YmVsOw0KIA0KIC8qKg0KICAqIEFuIGludGVnZXIgZmllbGQgZWRpdG9yIHdpdGggYW4gZW5hYmxl
bWVudCBjaGVjayBib3guDQpAQCAtNDIsMjAgKzQ0LDE0IEBADQogCQlzdXBlci5kb0ZpbGxJbnRv
R3JpZChwYXJlbnQsIG51bUNvbHVtbnMpOw0KIAl9DQogDQotCUBPdmVycmlkZQ0KLQlwdWJsaWMg
aW50IGdldE51bWJlck9mQ29udHJvbHMoKSB7DQotCQlyZXR1cm4gc3VwZXIuZ2V0TnVtYmVyT2ZD
b250cm9scygpICsgMTsNCi0JfQ0KLQ0KLSAgICBAT3ZlcnJpZGUNCi0JcHJvdGVjdGVkIHZvaWQg
YWRqdXN0Rm9yTnVtQ29sdW1ucyhpbnQgbnVtQ29sdW1ucykgew0KLSAgICAJLy8gdGhlIGNoZWNr
Ym94IHVzZXMgb25lIGNvbHVtbg0KLSAgICAJc3VwZXIuYWRqdXN0Rm9yTnVtQ29sdW1ucyhudW1D
b2x1bW5zIC0gMSk7DQotICAgIH0NCi0NCiAJcHJpdmF0ZSBCdXR0b24gZ2V0Q2hlY2tib3hDb250
cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsNCiAJCWlmIChmQ2hlY2tib3ggPT0gbnVsbCkgew0KLQkJ
CWZDaGVja2JveD0gbmV3IEJ1dHRvbihwYXJlbnQsIFNXVC5DSEVDSyk7DQorCQkJQ29tcG9zaXRl
IGlubmVyPSBuZXcgQ29tcG9zaXRlKHBhcmVudCwgU1dULk5VTEwpOw0KKwkJCWZpbmFsIEdyaWRM
YXlvdXQgbGF5b3V0PSBuZXcgR3JpZExheW91dCgyLCBmYWxzZSk7DQorCQkJbGF5b3V0Lm1hcmdp
bldpZHRoID0gMDsNCisJCQlpbm5lci5zZXRMYXlvdXQobGF5b3V0KTsNCisJCQlmQ2hlY2tib3g9
IG5ldyBCdXR0b24oaW5uZXIsIFNXVC5DSEVDSyk7DQorCQkJZ2V0TGFiZWxDb250cm9sKGlubmVy
KTsNCiAJCQlmQ2hlY2tib3guYWRkU2VsZWN0aW9uTGlzdGVuZXIobmV3IFNlbGVjdGlvbkFkYXB0
ZXIoKSB7DQogCQkJCUBPdmVycmlkZQ0KIAkJCQlwdWJsaWMgdm9pZCB3aWRnZXRTZWxlY3RlZChT
ZWxlY3Rpb25FdmVudCBlKSB7DQpAQCAtNjUsMTEgKzYxLDIyIEBADQogCQkJCX0NCiAJCQl9KTsN
CiAJCX0gZWxzZSB7DQotCQkJY2hlY2tQYXJlbnQoZkNoZWNrYm94LCBwYXJlbnQpOw0KKwkJCWNo
ZWNrUGFyZW50KGZDaGVja2JveC5nZXRQYXJlbnQoKSwgcGFyZW50KTsNCiAJCX0NCiAJCXJldHVy
biBmQ2hlY2tib3g7DQogCX0NCiANCisJQE92ZXJyaWRlDQorCXB1YmxpYyBMYWJlbCBnZXRMYWJl
bENvbnRyb2woQ29tcG9zaXRlIHBhcmVudCkgew0KKwkJZmluYWwgTGFiZWwgbGFiZWw9IGdldExh
YmVsQ29udHJvbCgpOw0KKwkJaWYgKGxhYmVsID09IG51bGwpIHsNCisJCQlyZXR1cm4gc3VwZXIu
Z2V0TGFiZWxDb250cm9sKHBhcmVudCk7DQorCQl9IGVsc2Ugew0KKwkJCWNoZWNrUGFyZW50KGxh
YmVsLmdldFBhcmVudCgpLCBwYXJlbnQpOw0KKwkJfQ0KKwkJcmV0dXJuIGxhYmVsOw0KKwl9DQor
DQogCXByb3RlY3RlZCB2b2lkIHZhbHVlQ2hhbmdlZChib29sZWFuIG9sZFZhbHVlLCBib29sZWFu
IG5ld1ZhbHVlKSB7DQogICAgICAgICBzZXRQcmVzZW50c0RlZmF1bHRWYWx1ZShmYWxzZSk7DQog
ICAgICAgICBpZiAob2xkVmFsdWUgIT0gbmV3VmFsdWUpIHsNCkluZGV4OiBzcmMvb3JnL2VjbGlw
c2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL01lc3NhZ2VzRm9yUHJlZmVy
ZW5jZXMuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlw
c2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVm
ZXJlbmNlcy5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpkaWZmIC11IC1yMS4xIE1l
c3NhZ2VzRm9yUHJlZmVyZW5jZXMuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCTI0
IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZh
CTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0yMCw4ICsyMCwxMiBAQA0KIA0KIAlwdWJs
aWMgc3RhdGljIFN0cmluZyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX2Rlc2NyaXB0aW9uOw0KIAlw
dWJsaWMgc3RhdGljIFN0cmluZyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX2xpbWl0U3RhY2tGcmFt
ZXNfbGFiZWw7DQorDQorCXB1YmxpYyBzdGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5jZVBh
Z2VfbWluU3RlcEludGVydmFsX2xhYmVsOw0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBEc2ZEZWJ1
Z1ByZWZlcmVuY2VQYWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFiZWw7DQogDQorCXB1YmxpYyBzdGF0
aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5jZVBhZ2Vfc3luY1N0ZXBwaW5nX2xhYmVsOw0KKw0K
IAlzdGF0aWMgew0KIAkJLy8gaW5pdGlhbGl6ZSByZXNvdXJjZSBidW5kbGUNCiAJCU5MUy5pbml0
aWFsaXplTWVzc2FnZXMoQlVORExFX05BTUUsIE1lc3NhZ2VzRm9yUHJlZmVyZW5jZXMuY2xhc3Mp
Ow0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0Rz
ZlNvdXJjZURpc3BsYXlBZGFwdGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9v
dC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3Vy
Y2VEaXNwbGF5QWRhcHRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11
IC1yMS41IERzZlNvdXJjZURpc3BsYXlBZGFwdGVyLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZh
CTMgSnVuIDIwMDggMjA6MTc6MTMgLTAwMDAJMS41DQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAvRHNmU291cmNlRGlzcGxheUFkYXB0ZXIuamF2YQk5IEp1
bCAyMDA4IDExOjUwOjE2IC0wMDAwDQpAQCAtMzMsMTAgKzMzLDE0IEBADQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlRocmVhZFNhZmU7DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmRhdGFtb2RlbC5JRE1Db250ZXh0Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcu
aW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlcjsNCitp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZp
ZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50Ow0K
K2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWku
dmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlci5TdGVwcGluZ1RpbWVkT3V0RXZlbnQ7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC51aS5Ec2ZEZWJ1Z1VJUGx1Z2lu
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOw0KK2lt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0
aW9uRE1Db250ZXh0Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5J
UnVuQ29udHJvbC5TdGF0ZUNoYW5nZVJlYXNvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmRlYnVnLnNlcnZpY2UuSVN0YWNrLklGcmFtZURNQ29udGV4dDsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrLklGcmFtZURNRGF0YTsNCkBAIC04Niw3ICs5
MCw3IEBADQogICogZGlzcGF0Y2ggdGhyZWFkIHRvIHN5bmNocm9uaXplIGFjY2VzcyB0byB0aGUg
c3RhdGUgZGF0YSBvZiB0aGUgcnVubmluZyBqb2JzLg0KICAqLw0KIEBUaHJlYWRTYWZlDQotcHVi
bGljIGNsYXNzIERzZlNvdXJjZURpc3BsYXlBZGFwdGVyIGltcGxlbWVudHMgSVNvdXJjZURpc3Bs
YXkgDQorcHVibGljIGNsYXNzIERzZlNvdXJjZURpc3BsYXlBZGFwdGVyIGltcGxlbWVudHMgSVNv
dXJjZURpc3BsYXksIElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudA0KIHsNCiAgICAgLyoqDQog
CSAqIEEgam9iIHRvIHBlcmZvcm0gc291cmNlIGxvb2t1cCBvbiB0aGUgZ2l2ZW4gRE1DLg0KQEAg
LTQxMiw4ICs0MTYsMTYgQEANCiAgICAgcHJpdmF0ZSBEaXNwbGF5Sm9iIGZQZW5kaW5nRGlzcGxh
eUpvYjsNCiAgICAgcHJpdmF0ZSBDbGVhcmluZ0pvYiBmUnVubmluZ0NsZWFyaW5nSm9iOw0KICAg
ICBwcml2YXRlIExpc3Q8SVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29udGV4dD4gZlBlbmRpbmdF
eGVjRG1jc1RvQ2xlYXIgPSBuZXcgTGlua2VkTGlzdDxJUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1D
b250ZXh0PigpOw0KLSAgICANCisJcHJpdmF0ZSBTdGVwcGluZ0NvbnRyb2xsZXIgZkNvbnRyb2xs
ZXI7DQorIA0KICAgICBwdWJsaWMgRHNmU291cmNlRGlzcGxheUFkYXB0ZXIoRHNmU2Vzc2lvbiBz
ZXNzaW9uLCBJU291cmNlTG9va3VwRGlyZWN0b3Igc291cmNlTG9jYXRvcikgew0KKyAgICAJdGhp
cyhzZXNzaW9uLCBzb3VyY2VMb2NhdG9yLCBudWxsKTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisJ
ICogQHNpbmNlIDEuMQ0KKwkgKi8NCisgICAgcHVibGljIERzZlNvdXJjZURpc3BsYXlBZGFwdGVy
KERzZlNlc3Npb24gc2Vzc2lvbiwgSVNvdXJjZUxvb2t1cERpcmVjdG9yIHNvdXJjZUxvY2F0b3Is
IFN0ZXBwaW5nQ29udHJvbGxlciBjb250cm9sbGVyKSB7DQogICAgICAgICBmU2Vzc2lvbiA9IHNl
c3Npb247DQogICAgICAgICBmRXhlY3V0b3IgPSBzZXNzaW9uLmdldEV4ZWN1dG9yKCk7DQogICAg
ICAgICBmU2VydmljZXNUcmFja2VyID0gbmV3IERzZlNlcnZpY2VzVHJhY2tlcihEc2ZEZWJ1Z1VJ
UGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKSwgc2Vzc2lvbi5nZXRJZCgpKTsNCkBAIC00MjQsOSAr
NDM2LDE4IEBADQogICAgICAgICBmSVBNYW5hZ2VyID0gbmV3IEluc3RydWN0aW9uUG9pbnRlck1h
bmFnZXIoKTsNCiAgICAgICAgIA0KICAgICAgICAgZlNlc3Npb24uYWRkU2VydmljZUV2ZW50TGlz
dGVuZXIodGhpcywgbnVsbCk7DQorDQorICAgICAgICBmQ29udHJvbGxlciA9IGNvbnRyb2xsZXI7
DQorCQlpZiAoZkNvbnRyb2xsZXIgIT0gbnVsbCkgew0KKwkJCWZDb250cm9sbGVyLmFkZFN0ZXBw
aW5nQ29udHJvbFBhcnRpY2lwYW50KHRoaXMpOw0KKwkJfQ0KICAgICB9DQogICAgIA0KICAgICBw
dWJsaWMgdm9pZCBkaXNwb3NlKCkgew0KKwkJaWYgKGZDb250cm9sbGVyICE9IG51bGwpIHsNCisJ
CQlmQ29udHJvbGxlci5yZW1vdmVTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudCh0aGlzKTsNCisJ
CQlmQ29udHJvbGxlciA9IG51bGw7DQorCQl9DQogICAgICAgICBmU2Vzc2lvbi5yZW1vdmVTZXJ2
aWNlRXZlbnRMaXN0ZW5lcih0aGlzKTsNCiAgICAgICAgIGZTZXJ2aWNlc1RyYWNrZXIuZGlzcG9z
ZSgpOw0KICAgICAgICAgZlNvdXJjZUxvb2t1cC5yZW1vdmVQYXJ0aWNpcGFudHMobmV3IElTb3Vy
Y2VMb29rdXBQYXJ0aWNpcGFudFtdIHtmU291cmNlTG9va3VwUGFydGljaXBhbnR9KTsNCkBAIC01
MDAsNiArNTIxLDEyIEBADQogICAgICAgICAgICAgZlJ1bm5pbmdEaXNwbGF5Sm9iID0gbmV4dERp
c3BsYXlKb2I7DQogICAgICAgICAgICAgZlJ1bm5pbmdEaXNwbGF5Sm9iLnNjaGVkdWxlKCk7ICAg
ICAgICANCiAgICAgICAgIH0NCisgICAgICAgIGlmIChmQ29udHJvbGxlciAhPSBudWxsKSB7DQor
ICAgICAgICAJSUV4ZWN1dGlvbkRNQ29udGV4dCBkbWMgPSBETUNvbnRleHRzLmdldEFuY2VzdG9y
T2ZUeXBlKGxvb2t1cFJlc3VsdC5nZXREbWMoKSwgSUV4ZWN1dGlvbkRNQ29udGV4dC5jbGFzcyk7
DQorICAgICAgICAJaWYgKGRtYyAhPSBudWxsKSB7DQorICAgICAgICAJCWZDb250cm9sbGVyLmRv
bmVTdGVwcGluZyhkbWMsIHRoaXMpOw0KKyAgICAgICAgCX0NCisgICAgICAgIH0NCiAgICAgfQ0K
IA0KICAgICANCkBAIC01NTgsMTUgKzU4NSwxNyBAQA0KICAgICB9DQogDQogICAgIEBEc2ZTZXJ2
aWNlRXZlbnRIYW5kbGVyDQorICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hlZChTdGVwcGlu
Z1RpbWVkT3V0RXZlbnQgZSkgew0KKyAgICAgICAgc3RhcnRBbm5vdGF0aW9uQ2xlYXJpbmdKb2Io
ZS5nZXRETUNvbnRleHQoKSk7ICAgICAgICANCisgICAgfQ0KKyAgICANCisgICAgQERzZlNlcnZp
Y2VFdmVudEhhbmRsZXINCiAgICAgcHVibGljIHZvaWQgZXZlbnREaXNwYXRjaGVkKFN0ZXBRdWV1
ZU1hbmFnZXIuSVN0ZXBwaW5nVGltZWRPdXRFdmVudCBlKSB7DQogICAgICAgICBzdGFydEFubm90
YXRpb25DbGVhcmluZ0pvYihlLmdldERNQ29udGV4dCgpKTsgICAgICAgIA0KLSAgICB9ICAgIA0K
KyAgICB9DQogICAgIA0KICAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlcg0KICAgICBwdWJsaWMg
dm9pZCBldmVudERpc3BhdGNoZWQoSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQgZSkgew0K
LSAgICAgICAgaWYgKGUuZ2V0UmVhc29uKCkgPT0gU3RhdGVDaGFuZ2VSZWFzb24uU1RFUCkgew0K
LSAgICAgICAgICAgIHN0YXJ0QW5ub3RhdGlvbkNsZWFyaW5nSm9iKGUuZ2V0RE1Db250ZXh0KCkp
Ow0KLSAgICAgICAgfQ0KICAgICAgICAgZlByZXZNb2RlbENvbnRleHQgPSBudWxsOw0KICAgICB9
DQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3Vw
L0luc3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9j
dnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNm
LmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0lu
c3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMg0K
ZGlmZiAtdSAtcjEuMiBJbnN0cnVjdGlvblBvaW50ZXJNYW5hZ2VyLmphdmENCi0tLSBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9JbnN0cnVjdGlvblBvaW50ZXJN
YW5hZ2VyLmphdmEJMzAgTWF5IDIwMDggMjI6NTc6MzkgLTAwMDAJMS4yDQorKysgc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAvSW5zdHJ1Y3Rpb25Qb2ludGVyTWFu
YWdlci5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC0yMSw2ICsyMSw3IEBADQog
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCiBpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2w7DQogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklTdGFjazsNCitpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29udGV4dDsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcudWkuRGVidWdVSVRvb2xzOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZWJ1Zy51aS5JRGVidWdVSUNvbnN0YW50czsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amZhY2UudGV4dC5Qb3NpdGlvbjsNCkBAIC0zNyw3ICszOCwxNyBAQA0KIEBUaHJlYWRTYWZlDQog
Y2xhc3MgSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlciB7DQogDQorCS8qKg0KKwkgKiBDdXJyZW50
IGluc3RydWN0aW9uIHBvaW50ZXIgYW5ub3RhdGlvbiB0eXBlLg0KKwkgKi8NCisJcHJpdmF0ZSBz
dGF0aWMgZmluYWwgU3RyaW5nIElEX0NVUlJFTlRfSVA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5j
dXJyZW50SVAiOyAvLyROT04tTkxTLTEkDQorCQ0KICAgICAvKioNCisJICogU2Vjb25kYXJ5IGlu
c3RydWN0aW9uIHBvaW50ZXIgYW5ub3RhdGlvbiB0eXBlLg0KKwkgKi8NCisJcHJpdmF0ZSBzdGF0
aWMgZmluYWwgU3RyaW5nIElEX1NFQ09OREFSWV9JUD0gIm9yZy5lY2xpcHNlLmRkLmRlYnVnLnNl
Y29uZGFyeUlQIjsgLy8kTk9OLU5MUy0xJA0KKw0KKwkvKioNCiAgICAgICogRWRpdG9yIGFubm90
YXRpb24gb2JqZWN0IGZvciBpbnN0cnVjdGlvbiBwb2ludGVycy4NCiAgICAgICovDQogICAgIHN0
YXRpYyBjbGFzcyBJUEFubm90YXRpb24gZXh0ZW5kcyBBbm5vdGF0aW9uIHsNCkBAIC02MSw3ICs3
Miw3IEBADQogICAgICAgICAgICAgZkZyYW1lID0gZnJhbWU7DQogICAgICAgICAgICAgZkltYWdl
ID0gaW1hZ2U7DQogICAgICAgICB9DQotICAgICAgICAgICAgDQorICAgICAgICANCiAgICAgICAg
IC8qKg0KICAgICAgICAgICogUmV0dXJucyB0aGlzIGFubm90YXRpb24ncyBpbWFnZS4NCiAgICAg
ICAgICAqIA0KQEAgLTE3MCwxNSArMTgxLDE5IEBADQogICAgICAgICBTdHJpbmcgdGV4dDsNCiAg
ICAgICAgIEltYWdlIGltYWdlOw0KICAgICAgICAgaWYgKGlzVG9wRnJhbWUpIHsNCi0gICAgICAg
ICAgICBpZCA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5jdXJyZW50SVAiOyAvLyROT04tTkxTLTEk
DQorICAgICAgICAgICAgaWQgPSBJRF9DVVJSRU5UX0lQOw0KICAgICAgICAgICAgIHRleHQgPSAi
RGVidWcgQ3VycmVudCBJbnN0cnVjdGlvbiBQb2ludGVyIjsgLy8kTk9OLU5MUy0xJA0KICAgICAg
ICAgICAgIGltYWdlID0gRGVidWdVSVRvb2xzLmdldEltYWdlKElEZWJ1Z1VJQ29uc3RhbnRzLklN
R19PQkpTX0lOU1RSVUNUSU9OX1BPSU5URVJfVE9QKTsNCiAgICAgICAgIH0gZWxzZSB7DQotICAg
ICAgICAgICAgaWQgPSAib3JnLmVjbGlwc2UuZGQuZGVidWcuc2Vjb25kYXJ5SVAiOyAvLyROT04t
TkxTLTEkDQorICAgICAgICAgICAgaWQgPSBJRF9TRUNPTkRBUllfSVA7DQogICAgICAgICAgICAg
dGV4dCA9ICJEZWJ1ZyBDYWxsIFN0YWNrIjsgLy8kTk9OLU5MUy0xJA0KICAgICAgICAgICAgIGlt
YWdlID0gRGVidWdVSVRvb2xzLmdldEltYWdlKElEZWJ1Z1VJQ29uc3RhbnRzLklNR19PQkpTX0lO
U1RSVUNUSU9OX1BPSU5URVIpOw0KICAgICAgICAgfQ0KIA0KKyAgICAgICAgaWYgKGlzVG9wRnJh
bWUpIHsNCisgICAgICAgIAkvLyByZW1vdmUgb3RoZXIgdG9wLWZyYW1lIElQIGFubm90YXRpb24o
cykgZm9yIHRoaXMgZXhlY3V0aW9uLWNvbnRleHQNCisgICAgICAgIAlyZW1vdmVBbm5vdGF0aW9u
cyhETUNvbnRleHRzLmdldEFuY2VzdG9yT2ZUeXBlKGZyYW1lLmdldFBhcmVudHMoKVswXSwgSUV4
ZWN1dGlvbkRNQ29udGV4dC5jbGFzcykpOw0KKyAgICAgICAgfQ0KICAgICAgICAgQW5ub3RhdGlv
biBhbm5vdGF0aW9uID0gbmV3IElQQW5ub3RhdGlvbihmcmFtZSwgaWQsIHRleHQsIGltYWdlKTsg
DQogICAgICAgICANCiAJCS8vIEFkZCB0aGUgYW5ub3RhdGlvbiBhdCB0aGUgcG9zaXRpb24gdG8g
dGhlIGVkaXRvcidzIGFubm90YXRpb24gbW9kZWwuDQpAQCAtMjAyLDEwICsyMTcsMjggQEANCiAg
ICAgICAgICAgICAgICAgICAgIHJlbW92ZUFubm90YXRpb24od3JhcHBlci5nZXRUZXh0RWRpdG9y
KCksIHdyYXBwZXIuZ2V0QW5ub3RhdGlvbigpKTsNCiAgICAgICAgICAgICAgICAgICAgIHdyYXBw
ZXJJdHIucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgIH0NCi0gICAgICAgICAgICB9ICAgICAg
ICAgICAgDQorICAgICAgICAgICAgfQ0KICAgICAgICAgfQ0KIAl9DQotCQ0KKw0KKwkvKioNCisJ
ICogUmVtb3ZlIGFsbCB0b3AtZnJhbWUgYW5ub3RhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBz
cGVjaWZpZWQgZGVidWcgdGFyZ2V0IHRoYXQgdGhpcyBjbGFzcw0KKwkgKiBpcyB0cmFja2luZy4N
CisJICovDQorCXB1YmxpYyB2b2lkIHJlbW92ZVRvcEZyYW1lQW5ub3RhdGlvbnMoSVJ1bkNvbnRy
b2wuSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjRG1jKSB7DQorCQkvLyBSZXRyaWV2ZSB0aGUgbWFw
cGluZyBvZiB0aHJlYWRzIHRvIGNvbnRleHQgbGlzdHMNCisgICAgICAgIHN5bmNocm9uaXplZChm
QW5ub3RhdGlvbldyYXBwZXJzKSB7DQorICAgICAgICAgICAgZm9yIChJdGVyYXRvcjxBbm5vdGF0
aW9uV3JhcHBlcj4gd3JhcHBlckl0ciA9IGZBbm5vdGF0aW9uV3JhcHBlcnMuaXRlcmF0b3IoKTsg
d3JhcHBlckl0ci5oYXNOZXh0KCk7KSB7DQorICAgICAgICAgICAgICAgIEFubm90YXRpb25XcmFw
cGVyIHdyYXBwZXIgPSB3cmFwcGVySXRyLm5leHQoKTsNCisgICAgICAgICAgICAgICAgaWYgKERN
Q29udGV4dHMuaXNBbmNlc3Rvck9mKHdyYXBwZXIuZ2V0RnJhbWVETUMoKSwgZXhlY0RtYykgDQor
ICAgICAgICAgICAgICAgIAkJJiYgSURfQ1VSUkVOVF9JUC5lcXVhbHMod3JhcHBlci5nZXRBbm5v
dGF0aW9uKCkuZ2V0VHlwZSgpKSkgew0KKyAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQW5ub3Rh
dGlvbih3cmFwcGVyLmdldFRleHRFZGl0b3IoKSwgd3JhcHBlci5nZXRBbm5vdGF0aW9uKCkpOw0K
KyAgICAgICAgICAgICAgICAgICAgd3JhcHBlckl0ci5yZW1vdmUoKTsNCisgICAgICAgICAgICAg
ICAgfQ0KKyAgICAgICAgICAgIH0NCisgICAgICAgIH0NCisJfQ0KKw0KICAgICAvKiogUmVtb3Zl
cyBhbGwgYW5ub3RhdGlvbnMgdHJhY2tlZCBieSB0aGlzIG1hbmFnZXIgKi8NCiAgICAgcHVibGlj
IHZvaWQgcmVtb3ZlQWxsQW5ub3RhdGlvbnMoKSB7DQogICAgICAgICBzeW5jaHJvbml6ZWQoZkFu
bm90YXRpb25XcmFwcGVycykgew0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
dWkvYWN0aW9ucy9Ec2ZTdGVwSW50b0NvbW1hbmQuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6
IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQu
ZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZT
dGVwSW50b0NvbW1hbmQuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNQ0KZGlmZiAtdSAt
cjEuNSBEc2ZTdGVwSW50b0NvbW1hbmQuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwSW50b0NvbW1hbmQuamF2YQk3IE1heSAyMDA4IDE3OjQw
OjQ3IC0wMDAwCTEuNQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9u
cy9Ec2ZTdGVwSW50b0NvbW1hbmQuamF2YQk5IEp1bCAyMDA4IDExOjUwOjE2IC0wMDAwDQpAQCAt
NDksNyArNDksNyBAQA0KICAgICAgICAgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGU9IGdldFN0ZXBU
eXBlKCk7DQogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUo
ZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgew0KICAgICAgICAg
ICAgIEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotICAgICAgICAgICAgICAg
IGdldFN0ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKA0KKyAgICAgICAgICAgICAgICBnZXRT
dGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoDQogICAgICAgICAgICAgICAgICAgICBn
ZXRDb250ZXh0KCksIHN0ZXBUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGFSZXF1
ZXN0TW9uaXRvcjxCb29sZWFuPihJbW1lZGlhdGVFeGVjdXRvci5nZXRJbnN0YW5jZSgpLCBudWxs
KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQpAQCAtNzEsNyArNzEsNyBA
QA0KICAgICAgICAgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGU9IGdldFN0ZXBUeXBlKCk7DQogICAg
ICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJl
cXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgew0KICAgICAgICAgICAgIEBPdmVycmlk
ZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotCQkJCWdldFN0ZXBRdWV1ZU1ncigpLmVucXVl
dWVTdGVwKGdldENvbnRleHQoKSwgc3RlcFR5cGUpOw0KKyAgICAgICAgICAgIAlnZXRTdGVwUXVl
dWVNYW5hZ2VyKCkuZW5xdWV1ZVN0ZXAoZ2V0Q29udGV4dCgpLCBzdGVwVHlwZSk7DQogICAgICAg
ICAgICAgfQ0KICAgICAgICAgfSk7DQogICAgICAgICByZXR1cm4gdHJ1ZTsNCkluZGV4OiBzcmMv
b3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcE92ZXJDb21tYW5kLmph
dmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcE92ZXJDb21tYW5kLmphdmEsdg0KcmV0cmlldmlu
ZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgRHNmU3RlcE92ZXJDb21tYW5kLmphdmENCi0t
LSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcE92ZXJDb21t
YW5kLmphdmEJNyBNYXkgMjAwOCAxNzo0MDo0NyAtMDAwMAkxLjUNCisrKyBzcmMvb3JnL2VjbGlw
c2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcE92ZXJDb21tYW5kLmphdmEJOSBKdWwg
MjAwOCAxMTo1MDoxNiAtMDAwMA0KQEAgLTQ5LDcgKzQ5LDcgQEANCiAgICAgICAgIGZFeGVjdXRv
ci5zdWJtaXQobmV3IERzZkNvbW1hbmRSdW5uYWJsZShmVHJhY2tlciwgcmVxdWVzdC5nZXRFbGVt
ZW50cygpWzBdLCByZXF1ZXN0KSB7DQogICAgICAgICAgICAgZmluYWwgU3RlcFR5cGUgc3RlcFR5
cGU9IGdldFN0ZXBUeXBlKCk7DQogICAgICAgICAgICAgQE92ZXJyaWRlIHB1YmxpYyB2b2lkIGRv
RXhlY3V0ZSgpIHsNCi0JCQkJZ2V0U3RlcFF1ZXVlTWdyKCkuY2FuRW5xdWV1ZVN0ZXAoDQorICAg
ICAgICAgICAgCWdldFN0ZXBRdWV1ZU1hbmFnZXIoKS5jYW5FbnF1ZXVlU3RlcCgNCiAgICAgICAg
ICAgICAgICAgICAgIGdldENvbnRleHQoKSwgc3RlcFR5cGUsDQogICAgICAgICAgICAgICAgICAg
ICBuZXcgRGF0YVJlcXVlc3RNb25pdG9yPEJvb2xlYW4+KEltbWVkaWF0ZUV4ZWN1dG9yLmdldElu
c3RhbmNlKCksIG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUNCkBA
IC03MSw3ICs3MSw3IEBADQogICAgICAgICBmaW5hbCBTdGVwVHlwZSBzdGVwVHlwZT0gZ2V0U3Rl
cFR5cGUoKTsNCiAgICAgICAgIGZFeGVjdXRvci5zdWJtaXQobmV3IERzZkNvbW1hbmRSdW5uYWJs
ZShmVHJhY2tlciwgcmVxdWVzdC5nZXRFbGVtZW50cygpWzBdLCByZXF1ZXN0KSB7DQogICAgICAg
ICAgICAgQE92ZXJyaWRlIHB1YmxpYyB2b2lkIGRvRXhlY3V0ZSgpIHsNCi0gICAgICAgICAgICAg
ICAgZ2V0U3RlcFF1ZXVlTWdyKCkuZW5xdWV1ZVN0ZXAoZ2V0Q29udGV4dCgpLCBzdGVwVHlwZSk7
DQorICAgICAgICAgICAgCWdldFN0ZXBRdWV1ZU1hbmFnZXIoKS5lbnF1ZXVlU3RlcChnZXRDb250
ZXh0KCksIHN0ZXBUeXBlKTsNCiAgICAgICAgICAgICB9DQogICAgICAgICB9KTsNCiAgICAgICAg
IHJldHVybiB0cnVlOw0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0
aW9ucy9Ec2ZDb21tYW5kUnVubmFibGUuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNy
b290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRl
YnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZDb21tYW5k
UnVubmFibGUuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuOA0KZGlmZiAtdSAtcjEuOCBE
c2ZDb21tYW5kUnVubmFibGUuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
dWkvYWN0aW9ucy9Ec2ZDb21tYW5kUnVubmFibGUuamF2YQkzMCBNYXkgMjAwOCAyMjo1Nzo0MCAt
MDAwMAkxLjgNCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNm
Q29tbWFuZFJ1bm5hYmxlLmphdmEJOSBKdWwgMjAwOCAxMTo1MDoxNiAtMDAwMA0KQEAgLTE1LDgg
KzE1LDEwIEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRzZlJ1bm5h
YmxlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5JbW11dGFibGU7DQog
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCitpbXBvcnQg
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2Rl
bC5TdGVwcGluZ0NvbnRyb2xsZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5p
bnRlcm5hbC51aS5Ec2ZEZWJ1Z1VJUGx1Z2luOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
ZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRl
YnVnLnNlcnZpY2UuSVN0ZXBRdWV1ZU1hbmFnZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRz
Zi5kZWJ1Zy5zZXJ2aWNlLlN0ZXBRdWV1ZU1hbmFnZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5zZXJ2aWNlLkRzZlNlcnZpY2VzVHJhY2tlcjsNCkBAIC0z
MywxMCArMzUsMzYgQEANCiAgICAgcHVibGljIElSdW5Db250cm9sIGdldFJ1bkNvbnRyb2woKSB7
DQogICAgICAgICByZXR1cm4gZlRyYWNrZXIuZ2V0U2VydmljZShJUnVuQ29udHJvbC5jbGFzcyk7
DQogICAgIH0NCi0gICAgcHVibGljIFN0ZXBRdWV1ZU1hbmFnZXIgZ2V0U3RlcFF1ZXVlTWdyKCkg
ew0KKyAgICAvKioNCisgICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayAjZ2V0U3RlcFF1ZXVl
TWFuYWdlcigpfSBpbnN0ZWFkLg0KKyAgICAgKi8NCisgICAgQERlcHJlY2F0ZWQNCisJcHVibGlj
IFN0ZXBRdWV1ZU1hbmFnZXIgZ2V0U3RlcFF1ZXVlTWdyKCkgew0KICAgICAgICAgcmV0dXJuIGZU
cmFja2VyLmdldFNlcnZpY2UoU3RlcFF1ZXVlTWFuYWdlci5jbGFzcyk7DQogICAgIH0NCiANCisg
ICAgLyoqDQorCSAqIEBzaW5jZSAxLjENCisJICovDQorCXB1YmxpYyBJU3RlcFF1ZXVlTWFuYWdl
ciBnZXRTdGVwUXVldWVNYW5hZ2VyKCkgew0KKwkJLy8gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmls
aXR5DQorCQlJU3RlcFF1ZXVlTWFuYWdlciBtZ3I9IGdldFN0ZXBRdWV1ZU1ncigpOw0KKwkJaWYg
KG1nciAhPSBudWxsKSB7DQorCQkJcmV0dXJuIG1ncjsNCisJCX0NCisJCXJldHVybiBnZXRTdGVw
cGluZ0NvbnRyb2xsZXIoKTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisJICogQHNpbmNlIDEuMQ0K
KwkgKi8NCisgICAgcHVibGljIFN0ZXBwaW5nQ29udHJvbGxlciBnZXRTdGVwcGluZ0NvbnRyb2xs
ZXIoKSB7DQorICAgIAlpZiAoZkNvbnRleHQgIT0gbnVsbCkgew0KKyAgICAJCXJldHVybiAoU3Rl
cHBpbmdDb250cm9sbGVyKSBmQ29udGV4dC5nZXRBZGFwdGVyKFN0ZXBwaW5nQ29udHJvbGxlci5j
bGFzcyk7DQorICAgIAl9DQorICAgIAlyZXR1cm4gbnVsbDsNCisgICAgfQ0KKw0KICAgICBwdWJs
aWMgRHNmQ29tbWFuZFJ1bm5hYmxlKERzZlNlcnZpY2VzVHJhY2tlciBzZXJ2aWNlc1RyYWNrZXIs
IE9iamVjdCBlbGVtZW50LCBJRGVidWdDb21tYW5kUmVxdWVzdCByZXF1ZXN0KSB7DQogICAgICAg
ICBmVHJhY2tlciA9IHNlcnZpY2VzVHJhY2tlcjsNCiAgICAgICAgIGlmIChlbGVtZW50IGluc3Rh
bmNlb2YgSURNVk1Db250ZXh0KSB7DQpAQCAtNTYsNyArODQsNyBAQA0KICAgICAgICAgfQ0KICAg
ICAgICAgaWYgKGdldENvbnRleHQoKSA9PSBudWxsKSB7DQogICAgICAgICAgICAgZlJlcXVlc3Qu
c2V0U3RhdHVzKG1ha2VFcnJvcigiU2VsZWN0ZWQgb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgcnVu
IGNvbnRyb2wuIiwgbnVsbCkpOyAgICAgICAgICAgICAvLyROT04tTkxTLTEkDQotICAgICAgICB9
IGVsc2UgaWYgKGdldFJ1bkNvbnRyb2woKSA9PSBudWxsIHx8IGdldFN0ZXBRdWV1ZU1ncigpID09
IG51bGwpIHsNCisgICAgICAgIH0gZWxzZSBpZiAoZ2V0UnVuQ29udHJvbCgpID09IG51bGwgfHwg
Z2V0U3RlcFF1ZXVlTWFuYWdlcigpID09IG51bGwpIHsNCiAgICAgICAgICAgICBmUmVxdWVzdC5z
ZXRTdGF0dXMobWFrZUVycm9yKCJSdW4gQ29udHJvbCBub3QgYXZhaWxhYmxlIiwgbnVsbCkpOyAv
LyROT04tTkxTLTEkDQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgIGRvRXhlY3V0ZSgp
Ow0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVw
UmV0dXJuQ29tbWFuZC5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9v
cmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3Jj
L29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBSZXR1cm5Db21tYW5k
LmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgRHNmU3RlcFJl
dHVybkNvbW1hbmQuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0
aW9ucy9Ec2ZTdGVwUmV0dXJuQ29tbWFuZC5qYXZhCTMwIE1heSAyMDA4IDIyOjU3OjQwIC0wMDAw
CTEuNQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVw
UmV0dXJuQ29tbWFuZC5qYXZhCTkgSnVsIDIwMDggMTE6NTA6MTYgLTAwMDANCkBAIC00Niw3ICs0
Niw3IEBADQogICAgICAgICANCiAgICAgICAgIGZFeGVjdXRvci5zdWJtaXQobmV3IERzZkNvbW1h
bmRSdW5uYWJsZShmVHJhY2tlciwgcmVxdWVzdC5nZXRFbGVtZW50cygpWzBdLCByZXF1ZXN0KSB7
IA0KICAgICAgICAgICAgIEBPdmVycmlkZSBwdWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7DQotICAg
ICAgICAgICAgICAgIGdldFN0ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKA0KKyAgICAgICAg
ICAgIAlnZXRTdGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoDQogICAgICAgICAgICAg
ICAgICAgICBnZXRDb250ZXh0KCksIFN0ZXBUeXBlLlNURVBfUkVUVVJOLA0KICAgICAgICAgICAg
ICAgICAgICAgbmV3IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihJbW1lZGlhdGVFeGVjdXRv
ci5nZXRJbnN0YW5jZSgpLCBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJy
aWRlDQpAQCAtNjcsNyArNjcsNyBAQA0KICAgICAgICAgDQogICAgICAgICBmRXhlY3V0b3Iuc3Vi
bWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMo
KVswXSwgcmVxdWVzdCkgeyANCiAgICAgICAgICAgICBAT3ZlcnJpZGUgcHVibGljIHZvaWQgZG9F
eGVjdXRlKCkgew0KLSAgICAgICAgICAgICAgICBnZXRTdGVwUXVldWVNZ3IoKS5lbnF1ZXVlU3Rl
cChnZXRDb250ZXh0KCksIFN0ZXBUeXBlLlNURVBfUkVUVVJOKTsNCisgICAgICAgICAgICAJZ2V0
U3RlcFF1ZXVlTWFuYWdlcigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwgU3RlcFR5cGUuU1RF
UF9SRVRVUk4pOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgIH0pOw0KICAgICAgICAgcmV0dXJu
IHRydWU7DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNmRGVidWdV
SUNvbnN0YW50cy5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcu
ZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNmRGVidWdVSUNvbnN0YW50cy5qYXZhLHYNCnJl
dHJpZXZpbmcgcmV2aXNpb24gMS41DQpkaWZmIC11IC1yMS41IElEc2ZEZWJ1Z1VJQ29uc3RhbnRz
LmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL0lEc2ZEZWJ1Z1VJQ29u
c3RhbnRzLmphdmEJMjQgSnVuIDIwMDggMjA6MDI6NTYgLTAwMDAJMS41DQorKysgc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNmRGVidWdVSUNvbnN0YW50cy5qYXZhCTkgSnVsIDIw
MDggMTE6NTA6MTYgLTAwMDANCkBAIC0xMiw3ICsxMiw5IEBADQogDQogaW1wb3J0IG9yZy5lY2xp
cHNlLmRlYnVnLnVpLklEZWJ1Z1VJQ29uc3RhbnRzOw0KIA0KLQ0KKy8qKg0KKyAqIEBub2ltcGxl
bWVudCBUaGlzIGludGVyZmFjZSBpcyBub3QgaW50ZW5kZWQgdG8gYmUgaW1wbGVtZW50ZWQgYnkg
Y2xpZW50cy4NCisgKi8NCiBwdWJsaWMgaW50ZXJmYWNlIElEc2ZEZWJ1Z1VJQ29uc3RhbnRzIHsN
CiANCiAJLyoqDQpAQCAtNjAsMTUgKzYyLDMzIEBADQogCSAqIEludGVnZXIgcHJlZmVyZW5jZSB0
byBjb250cm9sIHRoZSBtYXhpbXVtIGFtb3VudCBvZiBzdGFjayBmcmFtZXMgdG8NCiAJICogcmV0
cmlldmUgZnJvbSB0aGUgYmFja2VuZC4gRGVmYXVsdCB2YWx1ZSBpcyAxMC4NCiAJICogQHNlZSB7
QGxpbmsgI1BSRUZfU1RBQ0tfRlJBTUVfTElNSVRfRU5BQkxFfQ0KKwkgKiANCisJICogQHNpbmNl
IDEuMQ0KIAkgKi8NCiAJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJFRl9TVEFDS19GUkFN
RV9MSU1JVCA9ICJzdGFja0ZyYW1lTGltaXQiOyAvLyROT04tTkxTLTEkDQogCQ0KIAkvKioNCi0J
ICogQm9vbGVhbiBwcmVmZXJlbmNlIHdoZXRoZXIgdG8gYXBwbHkgdGhlIHN0YWNrIGZyYW1lIGxp
bWl0IHByZWZlcmVuY2UuDQorCSAqIEJvb2xlYW4gcHJlZmVyZW5jZSB3aGV0aGVyIHRvIGFwcGx5
IHRoZSBzdGFjayBmcmFtZSBsaW1pdCBwcmVmZXJlbmNlLiBEZWZhdWx0IGlzIDxjb2RlPnRydWU8
L2NvZGU+Lg0KIAkgKiBAc2VlIHtAbGluayAjUFJFRl9TVEFDS19GUkFNRV9MSU1JVH0NCisJICog
DQorCSAqIEBzaW5jZSAxLjENCiAJICovDQogCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBS
RUZfU1RBQ0tfRlJBTUVfTElNSVRfRU5BQkxFID0gInN0YWNrRnJhbWVMaW1pdEVuYWJsZSI7IC8v
JE5PTi1OTFMtMSQNCiANCisJLyoqDQorCSAqIEJvb2xlYW4gcHJlZmVyZW5jZSB3aGV0aGVyIHRv
IGtlZXAgc3RlcHBpbmcgc3BlZWQgaW4gc3luYyB3aXRoIFVJIHVwZGF0ZXMuIERlZmF1bHQgaXMg
PGNvZGU+dHJ1ZTwvY29kZT4uDQorCSAqIA0KKwkgKiBAc2luY2UgMS4xDQorCSAqLw0KKwlwdWJs
aWMgc3RhdGljIGZpbmFsIFN0cmluZyBQUkVGX1NZTkNIUk9OSVpFRF9TVEVQUElOR19FTkFCTEUg
PSAic3luY2hyb25pemVkU3RlcHBpbmdFbmFibGUiOyAvLyROT04tTkxTLTEkDQorDQorCS8qKg0K
KwkgKiBJbnRlZ2VyIHByZWZlcmVuY2UgdG8gZW5mb3JjZSBhIG1pbmltdW0gdGltZSBpbnRlcnZh
bCBiZXR3ZWVuIHN0ZXBzLiBEZWZhdWx0IGlzIDxjb2RlPjA8L2NvZGU+Lg0KKwkgKiANCisJICog
QHNpbmNlIDEuMQ0KKwkgKi8NCisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJFRl9NSU5f
U1RFUF9JTlRFUlZBTD0gIm1pblN0ZXBJbnRlcnZhbCI7IC8vJE5PTi1OTFMtMSQNCisNCiAgICAg
LyoqDQogICAgICAqIEhlbHAgcHJlZml4ZXMuDQogICAgICAqLw0KQEAgLTg1LDUgKzEwNSw4IEBA
DQogICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIERFVEFJTF9QQU5FX1dPUkRfV1JBUF9B
Q1RJT04gPSBQUkVGSVggKyAiZGV0YWlsX3BhbmVfd29yZF93cmFwX2FjdGlvbl9jb250ZXh0Ijsg
Ly8kTk9OLU5MUy0xJA0KICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBERVRBSUxfUEFO
RV9NQVhfTEVOR1RIX0FDVElPTiA9IFBSRUZJWCArICJkZXRhaWxfcGFuZV9tYXhfbGVuZ3RoX2Fj
dGlvbl9jb250ZXh0IjsgLy8kTk9OLU5MUy0xJA0KIA0KKyAgICAvKioNCisJICogQHNpbmNlIDEu
MQ0KKwkgKi8NCiAgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJFRkVSRU5DRV9QQUdF
PSBQUkVGSVggKyAicHJlZmVyZW5jZV9wYWdlX2NvbnRleHQiOyAvLyROT04tTkxTLTEkDQogfQ0K
SW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvUHJlZmVyZW5jZUluaXRpYWxp
emVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNl
LmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlw
c2UvZGQvZHNmL2RlYnVnL3VpL1ByZWZlcmVuY2VJbml0aWFsaXplci5qYXZhLHYNCnJldHJpZXZp
bmcgcmV2aXNpb24gMS40DQpkaWZmIC11IC1yMS40IFByZWZlcmVuY2VJbml0aWFsaXplci5qYXZh
DQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9QcmVmZXJlbmNlSW5pdGlhbGl6
ZXIuamF2YQkyNCBKdW4gMjAwOCAyMDowMjo1NiAtMDAwMAkxLjQNCisrKyBzcmMvb3JnL2VjbGlw
c2UvZGQvZHNmL2RlYnVnL3VpL1ByZWZlcmVuY2VJbml0aWFsaXplci5qYXZhCTkgSnVsIDIwMDgg
MTE6NTA6MTYgLTAwMDANCkBAIC01OCw1ICs1OCw3IEBADQogCQkgKi8NCiAJCXByZWZzLnNldERl
ZmF1bHQoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVCwgMTApOw0K
IAkJcHJlZnMuc2V0RGVmYXVsdChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1F
X0xJTUlUX0VOQUJMRSwgdHJ1ZSk7DQotfQ0KKwkJcHJlZnMuc2V0RGVmYXVsdChJRHNmRGVidWdV
SUNvbnN0YW50cy5QUkVGX1NZTkNIUk9OSVpFRF9TVEVQUElOR19FTkFCTEUsIHRydWUpOw0KKwkJ
cHJlZnMuc2V0RGVmYXVsdChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX01JTl9TVEVQX0lOVEVS
VkFMLCAwKTsNCisJfQ0KIH0NCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2lu
dGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIuamF2YQ0K
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KUkNTIGZpbGU6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJu
YWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL1N0ZXBwaW5nQ29udHJvbGxlci5qYXZhDQpkaWZm
IC1OIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL1N0ZXBwaW5nQ29udHJvbGxlci5qYXZhDQotLS0gL2Rldi9udWxsCTEgSmFuIDE5
NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVy
bmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIuamF2YQkxIEph
biAxOTcwIDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDUzNCBAQA0KKy8qKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqDQorICogQ29weXJpZ2h0IChjKSAyMDA2LCAyMDA4IFdpbmQgUml2ZXIgU3lzdGVt
cyBhbmQgb3RoZXJzLg0KKyAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQg
dGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMNCisgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjANCisgKiB3aGljaCBh
Y2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdA0KKyAqIGh0
dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sDQorICogDQorICogQ29udHJp
YnV0b3JzOg0KKyAqICAgICBXaW5kIFJpdmVyIFN5c3RlbXMgLSBpbml0aWFsIEFQSSBhbmQgaW1w
bGVtZW50YXRpb24NCisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCitwYWNrYWdlIG9yZy5lY2xp
cHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWw7DQorDQor
aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7DQoraW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOw0K
K2ltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsNCitpbXBvcnQgamF2YS51dGlsLkxpc3Q7DQor
aW1wb3J0IGphdmEudXRpbC5NYXA7DQoraW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlNjaGVk
dWxlZEZ1dHVyZTsNCitpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVuaXQ7DQorDQor
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRhdGFSZXF1ZXN0TW9uaXRvcjsN
CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuRHNmRXhlY3V0b3I7DQoraW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRzZlJ1bm5hYmxlOw0KK2ltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5SZXF1ZXN0TW9uaXRvcjsNCitpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5BYnN0cmFjdERNRXZlbnQ7DQoraW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsNCitpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLmludGVybmFsLnVpLkRzZkRlYnVnVUlQbHVnaW47DQoraW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOw0KK2ltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RlcFF1ZXVlTWFuYWdlcjsNCitpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29u
dGV4dDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRy
b2wuSVJlc3VtZWRETUV2ZW50Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5JU3VzcGVuZGVkRE1FdmVudDsNCitpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuU3RhdGVDaGFuZ2VSZWFzb247DQoraW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLlN0ZXBUeXBl
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlRXZlbnRIYW5k
bGVyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlc1RyYWNr
ZXI7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5zZXJ2aWNlLkRzZlNlc3Npb247DQorDQor
LyoqDQorICogVGhpcyBjbGFzcyBidWlsZHMgb24gdG9wIG9mIHN0YW5kYXJkIHJ1biBjb250cm9s
IHNlcnZpY2UgdG8gcHJvdmlkZQ0KKyAqIGZ1bmN0aW9uYWxpdHkgZm9yIHN0ZXAgcXVldWluZyBh
bmQgZGVsYXlpbmcuIFN0ZXAgcXVldWluZyBlc3NlbnRpYWxseSBhbGxvd3MNCisgKiB1c2VyIHRv
IHByZXNzIGFuZCBob2xkIHRoZSBzdGVwIGtleSBhbmQgYWNoaWV2ZSBtYXhpbXVtIHN0ZXBwaW5n
IHNwZWVkLiBJZg0KKyAqIHRoaXMgY2xhc3MgaXMgdXNlZCwgb3RoZXIgc2VydmljZSBpbXBsZW1l
bnRhdGlvbnMsIHN1Y2ggYXMgc3RhY2sgYW5kDQorICogZXhwcmVzc2lvbnMsIGNhbiB1c2UgaXQg
dG8gYXZvaWQgcmVxdWVzdGluZyBkYXRhIGZyb20gZGVidWdnZXIgYmFjayBlbmQgaWYNCisgKiBh
bm90aGVyIHN0ZXAgaXMgYWJvdXQgdG8gYmUgZXhlY3V0ZWQuDQorICogDQorICogQHNpbmNlIDEu
MQ0KKyAqLw0KK3B1YmxpYyBmaW5hbCBjbGFzcyBTdGVwcGluZ0NvbnRyb2xsZXIgaW1wbGVtZW50
cyBJU3RlcFF1ZXVlTWFuYWdlcg0KK3sNCisgICAgLyoqDQorICAgICAqIEFtb3VudCBvZiB0aW1l
IGluIG1pbGxpc2Vjb25kcywgdGhhdCBpdCB0YWtlcyB0aGUgU3RlcHBpbmdUaW1lZE91dEV2ZW50
IA0KKyAgICAgKiBldmVudCB0byBiZSBpc3N1ZWQgYWZ0ZXIgYSBzdGVwIGlzIHN0YXJ0ZWQuIA0K
KyAgICAgKiBAc2VlIFN0ZXBwaW5nVGltZWRPdXRFdmVudCAgDQorICAgICAqLw0KKyAgICBwdWJs
aWMgZmluYWwgc3RhdGljIGludCBTVEVQUElOR19USU1FT1VUID0gNTAwOw0KKyAgICANCisgICAg
LyoqDQorICAgICAqIFRoZSBkZXB0aCBvZiB0aGUgc3RlcCBxdWV1ZS4gIEluIG90aGVyIHdvcmRz
LCB0aGUgbWF4aW11bSBudW1iZXIgb2Ygc3RlcHMgDQorICAgICAqIHRoYXQgYXJlIHF1ZXVlZCBi
ZWZvcmUgdGhlIHN0ZXAgcXVldWUgbWFuYWdlciBpcyB0aHJvd2luZyB0aGVtIGF3YXkuIA0KKyAg
ICAgKi8NCisgICAgcHVibGljIGZpbmFsIHN0YXRpYyBpbnQgU1RFUF9RVUVVRV9ERVBUSCA9IDE7
DQorDQorCS8qKg0KKwkgKiBUaGUgbWF4aW11bSBkZWxheSAoaW4gbWlsbGlzZWNvbmRzKSBiZXR3
ZWVuIHN0ZXBzIHdoZW4gc3luY2hyb25pemVkDQorCSAqIHN0ZXBwaW5nIGlzIGVuYWJsZWQuIFRo
aXMgYWxzbyBzZXJ2ZXMgYXMgYSBzYWZlZ3VhcmQgaW4gdGhlIGNhc2Ugc3RlcHBpbmcNCisJICog
Y29udHJvbCBwYXJ0aWNpcGFudHMgZmFpbCB0byBpbmRpY2F0ZSBjb21wbGV0aW9uIG9mIGV2ZW50
IHByb2Nlc3NpbmcuDQorCSAqLw0KKyAgICBwdWJsaWMgZmluYWwgc3RhdGljIGludCBNQVhfU1RF
UF9ERUxBWT0gMTAwMDsNCisNCisgICAgLyoqDQorICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBn
aXZlbiBjb250ZXh0IGhhcyBiZWVuIHN0ZXBwaW5nIGZvciBzb21lIHRpbWUsIA0KKyAgICAgKiBh
bmQgdGhlIFVJICh2aWV3cyBhbmQgYWN0aW9ucykgbWF5IG5lZWQgdG8gYmUgdXBkYXRlZCBhY2Nv
cmRpbmdseS4gDQorICAgICAqLw0KKwlwdWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIFN0ZXBwaW5n
VGltZWRPdXRFdmVudCBleHRlbmRzIEFic3RyYWN0RE1FdmVudDxJRXhlY3V0aW9uRE1Db250ZXh0
PiB7DQorCQlwcml2YXRlIFN0ZXBwaW5nVGltZWRPdXRFdmVudChJRXhlY3V0aW9uRE1Db250ZXh0
IGV4ZWNDdHgpIHsNCisJCQlzdXBlcihleGVjQ3R4KTsNCisJCX0NCisJfQ0KKw0KKwkvKioNCisJ
ICogSW50ZXJmYWNlIGZvciBjbGllbnRzIGludGVyZXN0ZWQgaW4gc3RlcHBpbmcgY29udHJvbC4N
CisJICovDQorCXB1YmxpYyBpbnRlcmZhY2UgSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50IHsN
CisJfQ0KKw0KKwlwcml2YXRlIHN0YXRpYyBjbGFzcyBTdGVwUmVxdWVzdCB7DQorICAgICAgICBT
dGVwVHlwZSBmU3RlcFR5cGU7DQorICAgICAgICBTdGVwUmVxdWVzdChTdGVwVHlwZSB0eXBlKSB7
DQorICAgICAgICAgICAgZlN0ZXBUeXBlID0gdHlwZTsNCisgICAgICAgIH0NCisgICAgfQ0KKw0K
Kwlwcml2YXRlIGZpbmFsIERzZlNlc3Npb24gZlNlc3Npb247DQorCXByaXZhdGUgZmluYWwgRHNm
U2VydmljZXNUcmFja2VyIGZTZXJ2aWNlc1RyYWNrZXI7DQorDQorICAgIHByaXZhdGUgSVJ1bkNv
bnRyb2wgZlJ1bkNvbnRyb2w7DQorICAgIHByaXZhdGUgaW50IGZRdWV1ZURlcHRoID0gU1RFUF9R
VUVVRV9ERVBUSDsNCisgICAgDQorICAgIHByaXZhdGUgZmluYWwgTWFwPElFeGVjdXRpb25ETUNv
bnRleHQsTGlzdDxTdGVwUmVxdWVzdD4+IGZTdGVwUXVldWVzID0gbmV3IEhhc2hNYXA8SUV4ZWN1
dGlvbkRNQ29udGV4dCxMaXN0PFN0ZXBSZXF1ZXN0Pj4oKTsNCisgICAgcHJpdmF0ZSBmaW5hbCBN
YXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxCb29sZWFuPiBmVGltZWRPdXRGbGFncyA9IG5ldyBIYXNo
TWFwPElFeGVjdXRpb25ETUNvbnRleHQsQm9vbGVhbj4oKTsNCisgICAgcHJpdmF0ZSBmaW5hbCBN
YXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxTY2hlZHVsZWRGdXR1cmU8Pz4+IGZUaW1lZE91dEZ1dHVy
ZXMgPSBuZXcgSGFzaE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LFNjaGVkdWxlZEZ1dHVyZTw/Pj4o
KTsNCisNCisJLyoqDQorCSAqIFJlY29yZHMgdGhlIHRpbWUgb2YgdGhlIGxhc3Qgc3RlcCBmb3Ig
YW4gZXhlY3V0aW9uIGNvbnRleHQuDQorCSAqLw0KKwlwcml2YXRlIGZpbmFsIE1hcDxJRXhlY3V0
aW9uRE1Db250ZXh0LCBMb25nPiBmTGFzdFN0ZXBUaW1lcz0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlv
bkRNQ29udGV4dCwgTG9uZz4oKTsNCisNCisJLyoqDQorCSAqIE1pbmltdW0gc3RlcCBpbnRlcnZh
bCBpbiBtaWxsaXNlY29uZHMuDQorCSAqLw0KKwlwcml2YXRlIGludCBmTWluU3RlcEludGVydmFs
PSAwOw0KKw0KKwkvKioNCisJICogV2hldGhlciBzeW5jaHJvbml6ZWQgc3RlcHBpbmcgaXMgZW5h
YmxlZC4NCisJICovDQorCXByaXZhdGUgYm9vbGVhbiBmU3luY2hyb25pemVkU3RlcHBpbmc7DQor
CQ0KKwkvKioNCisJICogTWFwIG9mIGV4ZWN1dGlvbiBjb250ZXh0cyBmb3Igd2hpY2ggYSBzdGVw
IGlzIGluIHByb2dyZXNzLg0KKwkgKi8NCisJcHJpdmF0ZSBmaW5hbCBNYXA8SUV4ZWN1dGlvbkRN
Q29udGV4dCwgTGlzdDxJU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQ+PiBmU3RlcEluUHJvZ3Jl
c3MgPSBuZXcgSGFzaE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LCBMaXN0PElTdGVwcGluZ0NvbnRy
b2xQYXJ0aWNpcGFudD4+KCk7DQorDQorCS8qKg0KKwkgKiBMaXN0IG9mIHJlZ2lzdGVyZWQgc3Rl
cHBpbmcgY29udHJvbCBwYXJ0aWNpcGFudHMuDQorCSAqLw0KKwlwcml2YXRlIGZpbmFsIExpc3Q8
SVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50PiBmUGFydGljaXBhbnRzID0gbmV3IEFycmF5TGlz
dDxJU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQ+KCk7DQorDQorDQorICAgIHB1YmxpYyBTdGVw
cGluZ0NvbnRyb2xsZXIoRHNmU2Vzc2lvbiBzZXNzaW9uKSB7DQorICAgICAgICBmU2Vzc2lvbiA9
IHNlc3Npb247DQorICAgICAgICBmU2VydmljZXNUcmFja2VyID0gbmV3IERzZlNlcnZpY2VzVHJh
Y2tlcihEc2ZEZWJ1Z1VJUGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKSwgc2Vzc2lvbi5nZXRJZCgp
KTsNCisgICAgfQ0KKw0KKyAgICBwdWJsaWMgdm9pZCBkaXNwb3NlKCkgew0KKyAgICAJaWYgKGZS
dW5Db250cm9sICE9IG51bGwpIHsNCisgICAgCQlnZXRTZXNzaW9uKCkucmVtb3ZlU2VydmljZUV2
ZW50TGlzdGVuZXIodGhpcyk7DQorICAgIAl9DQorICAgICAgICBmU2VydmljZXNUcmFja2VyLmRp
c3Bvc2UoKTsNCisgICAgfQ0KKw0KKw0KKyAgICAvKioNCisgICAgICogRW5hYmxlcyBvciBkaXNh
YmxlcyBzeW5jaHJvbml6ZWQgc3RlcHBpbmcgbW9kZS4NCisgICAgICogSW4gc3luY2hyb25pemVk
IG1vZGUsIGFmdGVyIGEgc3RlcCBjb21tYW5kIGlzIGlzc3VlZCwNCisgICAgICogc3Vic2VxdWVu
dCBzdGVwcyBhcmUgYmxvY2tlZCBmb3IgdGhlIGV4ZWN1dGlvbiBjb250ZXh0DQorICAgICAqIHVu
dGlsIHtAbGluayBkb25lU3RlcHBpbmcoKX0gaXMgY2FsbGVkIHRvIGluZGljYXRlIGNvbXBsZXRp
b24NCisgICAgICogb2YgdGhlIHByb2Nlc3NpbmcgZm9yIHRoZSBsYXN0IHN0ZXAuDQorICAgICAq
IA0KKyAgICAgKiBAcGFyYW0gZW5hYmxlDQorICAgICAqLw0KKyAgICBwdWJsaWMgdm9pZCBlbmFi
bGVTeW5jaHJvbml6ZWRTdGVwcGluZyhib29sZWFuIGVuYWJsZSkgew0KKyAgICAJZlN5bmNocm9u
aXplZFN0ZXBwaW5nID0gZW5hYmxlOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBDb25m
aWd1cmUgdGhlIG1pbmltdW0gdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0byB3YWl0IGJldHdlZW4g
c3RlcHMuDQorICAgICAqIA0KKyAgICAgKiBAcGFyYW0gaW50ZXJ2YWwNCisgICAgICovDQorICAg
IHB1YmxpYyB2b2lkIHNldE1pbmltdW1TdGVwSW50ZXJ2YWwoaW50IGludGVydmFsKSB7DQorICAg
IAlmTWluU3RlcEludGVydmFsID0gaW50ZXJ2YWw7DQorICAgIH0NCisgICAgDQorICAgIC8qKg0K
KyAgICAgKiBSZWdpc3RlciBnaXZlbiBzdGVwcGluZyBjb250cm9sIHBhcnRpY2lwYW50Lg0KKyAg
ICAgKiANCisgICAgICogQHBhcmFtIHBhcnRpY2lwYW50DQorICAgICAqLw0KKyAgICBwdWJsaWMg
dm9pZCBhZGRTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudChJU3RlcHBpbmdDb250cm9sUGFydGlj
aXBhbnQgcGFydGljaXBhbnQpIHsNCisgICAgCWZQYXJ0aWNpcGFudHMuYWRkKHBhcnRpY2lwYW50
KTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisgICAgICogVW5yZWdpc3RlciBnaXZlbiBzdGVwcGlu
ZyBjb250cm9sIHBhcnRpY2lwYW50Lg0KKyAgICAgKiANCisgICAgICogQHBhcmFtIHBhcnRpY2lw
YW50DQorICAgICAqLw0KKyAgICBwdWJsaWMgdm9pZCByZW1vdmVTdGVwcGluZ0NvbnRyb2xQYXJ0
aWNpcGFudChJU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQgcGFydGljaXBhbnQpIHsNCisgICAg
CWZQYXJ0aWNpcGFudHMucmVtb3ZlKHBhcnRpY2lwYW50KTsNCisgICAgCS8vIFRPRE8gcmVtb3Zl
IGZyb20gc3RlcHMgaW4gcHJvZ3Jlc3M/DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIElu
ZGljYXRlIHRoYXQgcGFydGljaXBhbnQgaGFzIGNvbXBsZXRlZCBwcm9jZXNzaW5nIG9mIHRoZSBs
YXN0IHN0ZXAuDQorICAgICAqIA0KKyAgICAgKiBAcGFyYW0gZXhlY0N0eA0KKyAgICAgKi8NCisg
ICAgcHVibGljIHZvaWQgZG9uZVN0ZXBwaW5nKGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhl
Y0N0eCwgZmluYWwgSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50IHBhcnRpY2lwYW50KSB7DQor
ICAgIAlpZiAoIWdldEV4ZWN1dG9yKCkuaXNJbkV4ZWN1dG9yVGhyZWFkKCkpIHsNCisgICAgCQkv
LyBub3QgaW4gZXhlY3V0b3IgdGhyZWFkIC0gcmVzdWJtaXQgaW4gY29ycmVjdCB0aHJlYWQNCisg
ICAgCQlnZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgew0KKwkJCQlwdWJs
aWMgdm9pZCBydW4oKSB7DQorCQkJCQlkb25lU3RlcHBpbmcoZXhlY0N0eCwgcGFydGljaXBhbnQp
Ow0KKwkJCQl9fSk7DQorICAgIAkJcmV0dXJuOw0KKyAgICAJfQ0KKyAgICAJTGlzdDxJU3RlcHBp
bmdDb250cm9sUGFydGljaXBhbnQ+IHBhcnRpY2lwYW50cyA9IGZTdGVwSW5Qcm9ncmVzcy5nZXQo
ZXhlY0N0eCk7DQorICAgIAlpZiAocGFydGljaXBhbnRzICE9IG51bGwpIHsNCisgICAgCQlwYXJ0
aWNpcGFudHMucmVtb3ZlKHBhcnRpY2lwYW50KTsNCisgICAgCQlpZiAocGFydGljaXBhbnRzLmlz
RW1wdHkoKSkgew0KKyAgICAJCQlkb25lU3RlcHBpbmcoZXhlY0N0eCk7DQorICAgIAkJfQ0KKyAg
ICAJfSBlbHNlIHsNCisgICAgCQlmb3IgKElFeGVjdXRpb25ETUNvbnRleHQgZGlzYWJsZWRDdHgg
OiBmU3RlcEluUHJvZ3Jlc3Mua2V5U2V0KCkpIHsNCisgICAgCQkJaWYgKERNQ29udGV4dHMuaXNB
bmNlc3Rvck9mKGRpc2FibGVkQ3R4LCBleGVjQ3R4KSkgew0KKyAgICAJCQkJcGFydGljaXBhbnRz
ID0gZlN0ZXBJblByb2dyZXNzLmdldChkaXNhYmxlZEN0eCk7DQorICAgIAkJICAgIAlpZiAocGFy
dGljaXBhbnRzICE9IG51bGwpIHsNCisgICAgCQkgICAgCQlwYXJ0aWNpcGFudHMucmVtb3ZlKHBh
cnRpY2lwYW50KTsNCisgICAgCQkgICAgCQlpZiAocGFydGljaXBhbnRzLmlzRW1wdHkoKSkgew0K
KyAgICAJCSAgICAJCQlkb25lU3RlcHBpbmcoZGlzYWJsZWRDdHgpOw0KKyAgICAJCSAgICAJCX0N
CisgICAgCQkgICAgCX0NCisgICAgCQkJfQ0KKyAgICAJCX0NCisgICAgCX0NCisgICAgfQ0KKw0K
Kwlwcml2YXRlIERzZlNlc3Npb24gZ2V0U2Vzc2lvbigpIHsNCisJCXJldHVybiBmU2Vzc2lvbjsN
CisJfQ0KKw0KKwlwcml2YXRlIERzZkV4ZWN1dG9yIGdldEV4ZWN1dG9yKCkgew0KKwkJcmV0dXJu
IGdldFNlc3Npb24oKS5nZXRFeGVjdXRvcigpOw0KKwl9DQorCQ0KKwlwcml2YXRlIERzZlNlcnZp
Y2VzVHJhY2tlciBnZXRTZXJ2aWNlc1RyYWNrZXIoKSB7DQorCQlyZXR1cm4gZlNlcnZpY2VzVHJh
Y2tlcjsNCisJfQ0KKw0KKwlwcml2YXRlIElSdW5Db250cm9sIGdldFJ1bkNvbnRyb2woKSB7DQor
CQlpZiAoZlJ1bkNvbnRyb2wgPT0gbnVsbCkgew0KKwkgICAgICAgIGZSdW5Db250cm9sID0gZ2V0
U2VydmljZXNUcmFja2VyKCkuZ2V0U2VydmljZShJUnVuQ29udHJvbC5jbGFzcyk7DQorCSAgICAg
ICAgZ2V0U2Vzc2lvbigpLmFkZFNlcnZpY2VFdmVudExpc3RlbmVyKHRoaXMsIG51bGwpOw0KKwkJ
fQ0KKwkJcmV0dXJuIGZSdW5Db250cm9sOw0KKwl9DQorDQorCS8qKg0KKyAgICAgKiBDaGVja3Mg
d2hldGhlciBhIHN0ZXAgY29tbWFuZCBjYW4gYmUgcXVldWVkIHVwIGZvciBnaXZlbiBjb250ZXh0
Lg0KKyAgICAgKi8NCisgICAgcHVibGljIHZvaWQgY2FuRW5xdWV1ZVN0ZXAoSUV4ZWN1dGlvbkRN
Q29udGV4dCBleGVjQ3R4LCBTdGVwVHlwZSBzdGVwVHlwZSwgRGF0YVJlcXVlc3RNb25pdG9yPEJv
b2xlYW4+IHJtKSB7DQorICAgICAgICBpZiAoZG9DYW5FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVw
VHlwZSkpIHsNCisgICAgICAgICAgICBybS5zZXREYXRhKHRydWUpOw0KKyAgICAgICAgICAgIHJt
LmRvbmUoKTsNCisgICAgICAgIH0gZWxzZSB7DQorICAgICAgICAgICAgZ2V0UnVuQ29udHJvbCgp
LmNhblN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUsIHJtKTsNCisgICAgICAgIH0NCisgICAgfQ0KKw0K
KyAgICBwcml2YXRlIGJvb2xlYW4gZG9DYW5FbnF1ZXVlU3RlcChJRXhlY3V0aW9uRE1Db250ZXh0
IGV4ZWNDdHgsIFN0ZXBUeXBlIHN0ZXBUeXBlKSB7DQorICAgICAgICByZXR1cm4gZ2V0UnVuQ29u
dHJvbCgpLmlzU3RlcHBpbmcoZXhlY0N0eCkgJiYgIWlzU3RlcHBpbmdUaW1lZE91dChleGVjQ3R4
KTsgDQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIG5leHQg
c3RlcCBvbiB0aGUgZ2l2ZW4gZXhlY3V0aW9uIGNvbnRleHQgc2hvdWxkIGJlIGRlbGF5ZWQNCisg
ICAgICogYmFzZWQgb24gdGhlIGNvbmZpZ3VyZWQgc3RlcCBkZWxheS4NCisgICAgICogDQorCSAq
IEBwYXJhbSBleGVjQ3R4DQorCSAqIEByZXR1cm4gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIHN0
ZXAgc2hvdWxkIGJlIGRlbGF5ZWQNCisJICovDQorCXByaXZhdGUgYm9vbGVhbiBzaG91bGREZWxh
eVN0ZXAoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorICAgICAgICByZXR1cm4gZ2V0
U3RlcERlbGF5KGV4ZWNDdHgpID4gMDsNCisJfQ0KKw0KKwkvKioNCisJICogQ29tcHV0ZSB0aGUg
ZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSB0aGUgbmV4dCBzdGVwIGZvciB0aGUgZ2l2ZW4g
Y29udGV4dCBtYXkgYmUgZXhlY3V0ZWQuDQorCSAqIA0KKwkgKiBAcGFyYW0gZXhlY0N0eA0KKwkg
KiBAcmV0dXJuICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZWZvcmUgdGhlIG5leHQgcG9z
c2libGUgc3RlcA0KKwkgKi8NCisJcHJpdmF0ZSBpbnQgZ2V0U3RlcERlbGF5KElFeGVjdXRpb25E
TUNvbnRleHQgZXhlY0N0eCkgew0KKwkJaWYgKGZNaW5TdGVwSW50ZXJ2YWwgPiAwKSB7DQorCSAg
ICAgICAgZm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGxhc3RTdGVwQ3R4IDogZkxhc3RTdGVwVGlt
ZXMua2V5U2V0KCkpIHsNCisJICAgICAgICAgICAgaWYgKGV4ZWNDdHguZXF1YWxzKGxhc3RTdGVw
Q3R4KSB8fCBETUNvbnRleHRzLmlzQW5jZXN0b3JPZihleGVjQ3R4LCBsYXN0U3RlcEN0eCkpIHsN
CisJICAgICAgICAgICAgICAgIGxvbmcgbm93ID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7
DQorCQkJCQlpbnQgZGVsYXk9IChpbnQpIChmTGFzdFN0ZXBUaW1lcy5nZXQobGFzdFN0ZXBDdHgp
ICsgZk1pblN0ZXBJbnRlcnZhbCAtIG5vdyk7DQorCQkJCQlyZXR1cm4gTWF0aC5tYXgoZGVsYXks
IDApOw0KKwkgICAgICAgICAgICB9DQorCSAgICAgICAgfQ0KKwkJfQ0KKyAgICAgICAgcmV0dXJu
IDA7DQorCX0NCisNCisJcHJpdmF0ZSB2b2lkIHVwZGF0ZUxhc3RTdGVwVGltZShJRXhlY3V0aW9u
RE1Db250ZXh0IGV4ZWNDdHgpIHsNCisgICAgICAgIGxvbmcgbm93ID0gU3lzdGVtLmN1cnJlbnRU
aW1lTWlsbGlzKCk7DQorCQlmTGFzdFN0ZXBUaW1lcy5wdXQoZXhlY0N0eCwgbm93KTsNCisgICAg
ICAgIGZvciAoSUV4ZWN1dGlvbkRNQ29udGV4dCBsYXN0U3RlcEN0eCA6IGZMYXN0U3RlcFRpbWVz
LmtleVNldCgpKSB7DQorICAgICAgICAgICAgaWYgKCFleGVjQ3R4LmVxdWFscyhsYXN0U3RlcEN0
eCkgJiYgRE1Db250ZXh0cy5pc0FuY2VzdG9yT2YoZXhlY0N0eCwgbGFzdFN0ZXBDdHgpKSB7DQor
CQkJCWZMYXN0U3RlcFRpbWVzLnB1dChsYXN0U3RlcEN0eCwgbm93KTsNCisgICAgICAgICAgICB9
DQorICAgICAgICB9DQorCX0NCisNCisJcHJpdmF0ZSBsb25nIGdldExhc3RTdGVwVGltZShJRXhl
Y3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsNCisJCWlmIChmTGFzdFN0ZXBUaW1lcy5jb250YWlu
c0tleShleGVjQ3R4KSkgew0KKwkJCXJldHVybiBmTGFzdFN0ZXBUaW1lcy5nZXQoZXhlY0N0eCk7
DQorCQl9DQorCQlmb3IgKElFeGVjdXRpb25ETUNvbnRleHQgbGFzdFN0ZXBDdHggOiBmTGFzdFN0
ZXBUaW1lcy5rZXlTZXQoKSkgew0KKwkJCWlmIChETUNvbnRleHRzLmlzQW5jZXN0b3JPZihleGVj
Q3R4LCBsYXN0U3RlcEN0eCkpIHsNCisJCQkJcmV0dXJuIGZMYXN0U3RlcFRpbWVzLmdldChsYXN0
U3RlcEN0eCk7DQorCQkJfQ0KKwkJfQ0KKwkJcmV0dXJuIDA7DQorCX0NCisNCisJLyoqDQorICAg
ICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBzdGVwIGNvbW1hbmRzIHRoYXQgYXJlIHF1ZXVlZCBm
b3IgZ2l2ZW4gZXhlY3V0aW9uDQorICAgICAqIGNvbnRleHQuDQorICAgICAqLw0KKyAgICBwdWJs
aWMgaW50IGdldFBlbmRpbmdTdGVwQ291bnQoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7
DQorICAgICAgICBMaXN0PFN0ZXBSZXF1ZXN0PiBzdGVwUXVldWUgPSBmU3RlcFF1ZXVlcy5nZXQo
ZXhlY0N0eCk7DQorICAgICAgICBpZiAoc3RlcFF1ZXVlID09IG51bGwpIHJldHVybiAwOw0KKyAg
ICAgICAgcmV0dXJuIHN0ZXBRdWV1ZS5zaXplKCk7DQorICAgIH0NCisNCisgICAgLyoqDQorICAg
ICAqIEFkZHMgYSBzdGVwIGNvbW1hbmQgdG8gdGhlIGV4ZWN1dGlvbiBxdWV1ZSBmb3IgZ2l2ZW4g
Y29udGV4dC4NCisgICAgICogQHBhcmFtIGV4ZWNDdHggRXhlY3V0aW9uIGNvbnRleHQgdGhhdCBz
aG91bGQgcGVyZm9ybSB0aGUgc3RlcC4gDQorICAgICAqIEBwYXJhbSBzdGVwVHlwZSBUeXBlIG9m
IHN0ZXAgdG8gZXhlY3V0ZS4NCisgICAgICovDQorICAgIHB1YmxpYyB2b2lkIGVucXVldWVTdGVw
KGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5
cGUpIHsNCisgICAgCWlmIChzaG91bGREZWxheVN0ZXAoZXhlY0N0eCkpIHsNCisgICAgCQlpZiAo
ZG9DYW5FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSkpIHsNCisJICAgICAgICAgICAgZG9F
bnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSk7DQorCSAgICAgICAgICAgIGlmICghZ2V0UnVu
Q29udHJvbCgpLmlzU3RlcHBpbmcoZXhlY0N0eCkpIHsNCisJICAgICAgICAgICAgCXByb2Nlc3NT
dGVwUXVldWUoZXhlY0N0eCk7DQorCSAgICAgICAgICAgIH0NCisgICAgCQl9DQorICAgIAl9IGVs
c2Ugew0KKwkgICAgICAgIGdldFJ1bkNvbnRyb2woKS5jYW5TdGVwKA0KKwkgICAgICAgICAgICBl
eGVjQ3R4LCBzdGVwVHlwZSwgbmV3IERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPihnZXRFeGVj
dXRvcigpLCBudWxsKSB7DQorCSAgICAgICAgICAgICAgICBAT3ZlcnJpZGUNCisJICAgICAgICAg
ICAgICAgIHByb3RlY3RlZCB2b2lkIGhhbmRsZUNvbXBsZXRlZCgpIHsNCisJICAgICAgICAgICAg
ICAgICAgICBpZiAoaXNTdWNjZXNzKCkgJiYgZ2V0RGF0YSgpKSB7DQorCSAgICAgICAgICAgICAg
ICAgICAgCWlmIChpc1N0ZXBwaW5nRGlzYWJsZWQoZXhlY0N0eCkpIHsNCisJCSAgICAgICAgICAg
ICAgICAgICAgICAgIGRvRW5xdWV1ZVN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUpOw0KKwkgICAgICAg
ICAgICAgICAgICAgIAl9IGVsc2Ugew0KKwkgICAgICAgICAgICAgICAgICAgIAkJZG9TdGVwKGV4
ZWNDdHgsIHN0ZXBUeXBlKTsNCisJICAgICAgICAgICAgICAgICAgICAJfQ0KKwkgICAgICAgICAg
ICAgICAgICAgIH0gZWxzZSBpZiAoZG9DYW5FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSkp
IHsNCisJICAgICAgICAgICAgICAgICAgICAgICAgZG9FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVw
VHlwZSk7DQorCSAgICAgICAgICAgICAgICAgICAgfQ0KKwkgICAgICAgICAgICAgICAgfQ0KKwkg
ICAgICAgICAgICB9KTsNCisgICAgCX0NCisgICAgfQ0KKw0KKwlwcml2YXRlIHZvaWQgZG9TdGVw
KGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5
cGUpIHsNCisJCWlmIChmU3luY2hyb25pemVkU3RlcHBpbmcpIHsNCisJCQlkaXNhYmxlU3RlcHBp
bmcoZXhlY0N0eCk7DQorCQl9DQorICAgICAgICB1cGRhdGVMYXN0U3RlcFRpbWUoZXhlY0N0eCk7
DQorCQlnZXRSdW5Db250cm9sKCkuc3RlcChleGVjQ3R4LCBzdGVwVHlwZSwgbmV3IFJlcXVlc3RN
b25pdG9yKGdldEV4ZWN1dG9yKCksIG51bGwpKTsNCisJfQ0KKw0KKwkvKioNCisJICogRW5xdWV1
ZSB0aGUgZ2l2ZW4gc3RlcCBmb3IgbGF0ZXIgZXhlY3V0aW9uLg0KKwkgKiANCisJICogQHBhcmFt
IGV4ZWNDdHgNCisJICogQHBhcmFtIHN0ZXBUeXBlDQorCSAqLw0KKwlwcml2YXRlIHZvaWQgZG9F
bnF1ZXVlU3RlcChmaW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgsIGZpbmFsIFN0ZXBU
eXBlIHN0ZXBUeXBlKSB7DQorCQlMaXN0PFN0ZXBSZXF1ZXN0PiBzdGVwUXVldWUgPSBmU3RlcFF1
ZXVlcy5nZXQoZXhlY0N0eCk7DQorCQlpZiAoc3RlcFF1ZXVlID09IG51bGwpIHsNCisJCSAgICBz
dGVwUXVldWUgPSBuZXcgTGlua2VkTGlzdDxTdGVwUmVxdWVzdD4oKTsNCisJCSAgICBmU3RlcFF1
ZXVlcy5wdXQoZXhlY0N0eCwgc3RlcFF1ZXVlKTsNCisJCX0NCisJCWlmIChzdGVwUXVldWUuc2l6
ZSgpIDwgZlF1ZXVlRGVwdGgpIHsNCisJCSAgICBzdGVwUXVldWUuYWRkKG5ldyBTdGVwUmVxdWVz
dChzdGVwVHlwZSkpOw0KKwkJfQ0KKwl9DQorDQorICAgIC8qKg0KKyAgICAgKiBSZXR1cm5zIHdo
ZXRoZXIgdGhlIHN0ZXAgaW5zdHJ1Y3Rpb24gZm9yIHRoZSBnaXZlbiBjb250ZXh0IGhhcyB0aW1l
ZCBvdXQuDQorICAgICAqLw0KKyAgICBwdWJsaWMgYm9vbGVhbiBpc1N0ZXBwaW5nVGltZWRPdXQo
SUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7DQorICAgICAgICBmb3IgKElFeGVjdXRpb25E
TUNvbnRleHQgdGltZWRPdXRDdHggOiBmVGltZWRPdXRGbGFncy5rZXlTZXQoKSkgew0KKyAgICAg
ICAgICAgIGlmIChleGVjQ3R4LmVxdWFscyh0aW1lZE91dEN0eCkgfHwgRE1Db250ZXh0cy5pc0Fu
Y2VzdG9yT2YoZXhlY0N0eCwgdGltZWRPdXRDdHgpKSB7DQorICAgICAgICAgICAgICAgIHJldHVy
biBmVGltZWRPdXRGbGFncy5nZXQodGltZWRPdXRDdHgpOw0KKyAgICAgICAgICAgIH0NCisgICAg
ICAgIH0NCisgICAgICAgIHJldHVybiBmYWxzZTsNCisgICAgfQ0KKyAgICANCisJLyoqDQorCSAq
IFByb2Nlc3MgbmV4dCBzdGVwIG9uIHF1ZXVlIGlmIGFueS4NCisJICogQHBhcmFtIGV4ZWNDdHgN
CisJICovDQorCXByaXZhdGUgdm9pZCBwcm9jZXNzU3RlcFF1ZXVlKGZpbmFsIElFeGVjdXRpb25E
TUNvbnRleHQgZXhlY0N0eCkgew0KKwkJaWYgKGlzU3RlcHBpbmdEaXNhYmxlZChleGVjQ3R4KSkg
ew0KKwkJCXJldHVybjsNCisJCX0NCisJCWlmIChmU3RlcFF1ZXVlcy5jb250YWluc0tleShleGVj
Q3R4KSkgew0KKwkJCWZpbmFsIGludCBzdGVwRGVsYXkgPSBnZXRTdGVwRGVsYXkoZXhlY0N0eCk7
DQorCQkJaWYgKHN0ZXBEZWxheSA+IDApIHsNCisJCQkJZ2V0RXhlY3V0b3IoKS5zY2hlZHVsZShu
ZXcgRHNmUnVubmFibGUoKSB7DQorCQkJCQlwdWJsaWMgdm9pZCBydW4oKSB7DQorCQkJCQkJcHJv
Y2Vzc1N0ZXBRdWV1ZShleGVjQ3R4KTsNCisJCQkJCX0NCisJCQkJfSwgc3RlcERlbGF5LCBUaW1l
VW5pdC5NSUxMSVNFQ09ORFMpOw0KKwkJCQlyZXR1cm47DQorCQkJfQ0KKyAgICAgICAgICAgIExp
c3Q8U3RlcFJlcXVlc3Q+IHF1ZXVlID0gZlN0ZXBRdWV1ZXMuZ2V0KGV4ZWNDdHgpOw0KKyAgICAg
ICAgICAgIGZpbmFsIFN0ZXBSZXF1ZXN0IHJlcXVlc3QgPSBxdWV1ZS5yZW1vdmUocXVldWUuc2l6
ZSgpIC0gMSk7DQorICAgICAgICAgICAgaWYgKHF1ZXVlLmlzRW1wdHkoKSkgZlN0ZXBRdWV1ZXMu
cmVtb3ZlKGV4ZWNDdHgpOw0KKyAgICAgICAgICAgIGdldFJ1bkNvbnRyb2woKS5jYW5TdGVwKA0K
KyAgICAgICAgICAgICAgICBleGVjQ3R4LCByZXF1ZXN0LmZTdGVwVHlwZSwgDQorICAgICAgICAg
ICAgICAgIG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4oZ2V0RXhlY3V0b3IoKSwgbnVs
bCkgew0KKyAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlDQorICAgICAgICAgICAgICAgICAg
ICBwcm90ZWN0ZWQgdm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7DQorICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKGlzU3VjY2VzcygpICYmIGdldERhdGEoKSkgew0KKyAgICAgICAgICAgICAgICAg
ICAgCQlkb1N0ZXAoZXhlY0N0eCwgcmVxdWVzdC5mU3RlcFR5cGUpOw0KKyAgICAgICAgICAgICAg
ICAgICAgICAgIH0gZWxzZSB7DQorICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciB3
aGF0ZXZlciByZWFzb24gd2UgY2FuJ3Qgc3RlcCBhbnltb3JlLCBzbyBjbGVhciBvdXQNCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN0ZXAgcXVldWUuDQorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGZTdGVwUXVldWVzLnJlbW92ZShleGVjQ3R4KTsNCisgICAgICAgICAg
ICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgICAg
IH0pOw0KKyAgICAgICAgfQ0KKwl9DQorDQorCS8qKg0KKwkgKiBEaXNhYmxlIHN0ZXBwaW5nIGZv
ciB0aGUgZ2l2ZW4gZXhlY3V0aW9uIGNvbnRleHQuDQorCSAqIA0KKwkgKiBAcGFyYW0gZXhlY0N0
eA0KKwkgKi8NCisJcHJpdmF0ZSB2b2lkIGRpc2FibGVTdGVwcGluZyhJRXhlY3V0aW9uRE1Db250
ZXh0IGV4ZWNDdHgpIHsNCisgICAgICAgIGZTdGVwSW5Qcm9ncmVzcy5wdXQoZXhlY0N0eCwgbmV3
IEFycmF5TGlzdDxJU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQ+KGZQYXJ0aWNpcGFudHMpKTsN
CisJfQ0KKw0KKyAgICAvKioNCisgICAgICogSW5kaWNhdGUgdGhhdCBwcm9jZXNzaW5nIG9mIHRo
ZSBsYXN0IHN0ZXAgaGFzIGNvbXBsZXRlZCBhbmQNCisgICAgICogdGhlIG5leHQgc3RlcCBjYW4g
YmUgaXNzdWVkLg0KKyAgICAgKiANCisgICAgICogQHBhcmFtIGV4ZWNDdHgNCisgICAgICovDQor
ICAgIHByaXZhdGUgdm9pZCBkb25lU3RlcHBpbmcoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBl
eGVjQ3R4KSB7DQorICAgIAlpZiAoZlN5bmNocm9uaXplZFN0ZXBwaW5nKSB7DQorICAgIAkJZ2V0
RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZSdW5uYWJsZSgpIHsNCisgICAgCQkJcHVibGljIHZv
aWQgcnVuKCkgew0KKyAgICAJCQkJZW5hYmxlU3RlcHBpbmcoZXhlY0N0eCk7DQorICAgIAkJCQlw
cm9jZXNzU3RlcFF1ZXVlKGV4ZWNDdHgpOw0KKyAgICAJCQl9DQorICAgIAkJfSk7DQorICAgIAl9
DQorICAgIH0NCisNCisJLyoqDQorCSAqIEVuYWJsZSBzdGVwcGluZyBmb3IgdGhlIGdpdmVuIGV4
ZWN1dGlvbiBjb250ZXh0Lg0KKwkgKiANCisJICogQHBhcmFtIGV4ZWNDdHgNCisJICovDQorCXBy
aXZhdGUgdm9pZCBlbmFibGVTdGVwcGluZyhmaW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWND
dHgpIHsNCisgICAgICAgIGZTdGVwSW5Qcm9ncmVzcy5yZW1vdmUoZXhlY0N0eCk7DQorCQlmb3Ig
KElFeGVjdXRpb25ETUNvbnRleHQgZGlzYWJsZWRDdHggOiBmU3RlcEluUHJvZ3Jlc3Mua2V5U2V0
KCkpIHsNCisJCQlpZiAoRE1Db250ZXh0cy5pc0FuY2VzdG9yT2YoZGlzYWJsZWRDdHgsIGV4ZWND
dHgpKSB7DQorCQkJCWZTdGVwSW5Qcm9ncmVzcy5yZW1vdmUoZGlzYWJsZWRDdHgpOw0KKwkJCX0N
CisJCX0NCisJfQ0KKw0KKwlwcml2YXRlIGJvb2xlYW4gaXNTdGVwcGluZ0Rpc2FibGVkKElFeGVj
dXRpb25ETUNvbnRleHQgZXhlY0N0eCkgew0KKwkJaWYgKGZTeW5jaHJvbml6ZWRTdGVwcGluZykg
ew0KKwkgICAgICAgIGJvb2xlYW4gZGlzYWJsZWQ9IGZTdGVwSW5Qcm9ncmVzcy5jb250YWluc0tl
eShleGVjQ3R4KTsNCisJICAgICAgICBpZiAoIWRpc2FibGVkKSB7DQorCQkgICAgICAgIGZvciAo
SUV4ZWN1dGlvbkRNQ29udGV4dCBkaXNhYmxlZEN0eCA6IGZTdGVwSW5Qcm9ncmVzcy5rZXlTZXQo
KSkgew0KKwkJCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4ZWNDdHgsIGRpc2FibGVk
Q3R4KSkgew0KKwkJCQkJCWRpc2FibGVkID0gdHJ1ZTsNCisJCQkJCQlicmVhazsNCisJCQkJCX0N
CisJCQkJfQ0KKwkgICAgICAgIH0NCisJICAgICAgICBpZiAoZGlzYWJsZWQpIHsNCisJICAgICAg
ICAJbG9uZyBub3cgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsNCisJICAgICAgICAJbG9u
ZyBsYXN0U3RlcFRpbWUgPSBnZXRMYXN0U3RlcFRpbWUoZXhlY0N0eCk7DQorCSAgICAgICAgCWlm
IChub3cgLSBsYXN0U3RlcFRpbWUgPiBNQVhfU1RFUF9ERUxBWSkgew0KKwkgICAgICAgIAkJZW5h
YmxlU3RlcHBpbmcoZXhlY0N0eCk7DQorCSAgICAgICAgCQlkaXNhYmxlZCA9IGZhbHNlOw0KKwkg
ICAgICAgIAl9DQorCSAgICAgICAgfQ0KKwkgICAgICAgIHJldHVybiBkaXNhYmxlZDsNCisJCX0N
CisgICAgICAgIHJldHVybiBmYWxzZTsNCisJfQ0KKw0KKw0KKyAgICAvLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8NCisNCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIgDQorICAgIHB1YmxpYyB2b2lkIGV2
ZW50RGlzcGF0Y2hlZChmaW5hbCBJU3VzcGVuZGVkRE1FdmVudCBlKSB7DQorICAgICAgICAvLyBU
YWtlIGNhcmUgb2YgdGhlIHN0ZXBwaW5nIHRpbWUgb3V0DQorICAgICAgICBmVGltZWRPdXRGbGFn
cy5yZW1vdmUoZS5nZXRETUNvbnRleHQoKSk7DQorICAgICAgICBTY2hlZHVsZWRGdXR1cmU8Pz4g
ZnV0dXJlID0gZlRpbWVkT3V0RnV0dXJlcy5yZW1vdmUoZS5nZXRETUNvbnRleHQoKSk7IA0KKyAg
ICAgICAgaWYgKGZ1dHVyZSAhPSBudWxsKSBmdXR1cmUuY2FuY2VsKGZhbHNlKTsNCisgICAgICAg
IA0KKyAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHN0ZXAgcGVuZGluZywgaWYgc28gZXhl
Y3V0ZSBpdA0KKyAgICAgICAgcHJvY2Vzc1N0ZXBRdWV1ZShlLmdldERNQ29udGV4dCgpKTsNCisg
ICAgfQ0KKw0KKyAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlciANCisgICAgcHVibGljIHZvaWQg
ZXZlbnREaXNwYXRjaGVkKGZpbmFsIElSZXN1bWVkRE1FdmVudCBlKSB7DQorICAgICAgICBpZiAo
ZS5nZXRSZWFzb24oKS5lcXVhbHMoU3RhdGVDaGFuZ2VSZWFzb24uU1RFUCkpIHsNCisgICAgICAg
ICAgICBmVGltZWRPdXRGbGFncy5wdXQoZS5nZXRETUNvbnRleHQoKSwgQm9vbGVhbi5GQUxTRSk7
DQorICAgICAgICAgICAgLy8gV2Ugc2hvdWxkbid0IGhhdmUgYSBzdGVwcGluZyB0aW1lb3V0IHJ1
bm5pbmcgdW5sZXNzIHdlIGdldCB0d28gDQorICAgICAgICAgICAgLy8gc3RlcHBpbmcgZXZlbnRz
IGluIGEgcm93IHdpdGhvdXQgYSBzdXNwZW5kZWQsIHdoaWNoIHdvdWxkIGJlIGEgDQorICAgICAg
ICAgICAgLy8gcHJvdG9jb2wgZXJyb3IuDQorICAgICAgICAgICAgYXNzZXJ0ICFmVGltZWRPdXRG
dXR1cmVzLmNvbnRhaW5zS2V5KGUuZ2V0RE1Db250ZXh0KCkpOw0KKyAgICAgICAgICAgIGZUaW1l
ZE91dEZ1dHVyZXMucHV0KA0KKyAgICAgICAgICAgICAgICBlLmdldERNQ29udGV4dCgpLCANCisg
ICAgICAgICAgICAgICAgZ2V0RXhlY3V0b3IoKS5zY2hlZHVsZSgNCisgICAgICAgICAgICAgICAg
ICAgIG5ldyBEc2ZSdW5uYWJsZSgpIHsgcHVibGljIHZvaWQgcnVuKCkgew0KKyAgICAgICAgICAg
ICAgICAgICAgICAgIGZUaW1lZE91dEZ1dHVyZXMucmVtb3ZlKGUuZ2V0RE1Db250ZXh0KCkpOw0K
Kw0KKyAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRTZXNzaW9uKCkuaXNBY3RpdmUoKSkg
ew0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJc3N1ZSB0aGUgc3RlcHBpbmcgdGlt
ZS1vdXQgZXZlbnQuDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFNlc3Npb24oKS5k
aXNwYXRjaEV2ZW50KA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0ZXBw
aW5nVGltZWRPdXRFdmVudChlLmdldERNQ29udGV4dCgpKSwgDQorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBudWxsKTsNCisgICAgICAgICAgICAgICAgICAgICAgICB9DQorICAgICAg
ICAgICAgICAgICAgICB9fSwNCisgICAgICAgICAgICAgICAgICAgIFNURVBQSU5HX1RJTUVPVVQs
IFRpbWVVbml0Lk1JTExJU0VDT05EUykNCisgICAgICAgICAgICAgICAgKTsNCisgICAgICAgICAg
ICANCisgICAgICAgIH0gDQorICAgIH0gICAgDQorDQorICAgIEBEc2ZTZXJ2aWNlRXZlbnRIYW5k
bGVyIA0KKyAgICBwdWJsaWMgdm9pZCBldmVudERpc3BhdGNoZWQoU3RlcHBpbmdUaW1lZE91dEV2
ZW50IGUpIHsNCisgICAgICAgIGZUaW1lZE91dEZsYWdzLnB1dChlLmdldERNQ29udGV4dCgpLCBC
b29sZWFuLlRSVUUpOw0KKyAgICAgICAgZW5hYmxlU3RlcHBpbmcoZS5nZXRETUNvbnRleHQoKSk7
DQorICAgIH0NCit9DQo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>107542</attachid>
            <date>2008-07-15 19:19:00 -0400</date>
            <delta_ts>2014-01-29 20:46:24 -0500</delta_ts>
            <desc>Updated final patch with some API reshuffling. (+committed)</desc>
            <filename>20080715-214386.patch</filename>
            <type>text/plain</type>
            <size>119320</size>
            <attacher name="Pawel Piech">pawel.1.piech</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5kZC5nZGIudWkK
SW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvdWkvdmlld21vZGVsL0dkYlZp
ZXdNb2RlbEFkYXB0ZXIuamF2YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29y
Zy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmdkYi51aS9zcmMvb3JnL2Vj
bGlwc2UvZGQvZ2RiL2ludGVybmFsL3VpL3ZpZXdtb2RlbC9HZGJWaWV3TW9kZWxBZGFwdGVyLmph
dmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuOApkaWZmIC11IC1yMS44IEdkYlZpZXdNb2RlbEFk
YXB0ZXIuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC91aS92aWV3bW9k
ZWwvR2RiVmlld01vZGVsQWRhcHRlci5qYXZhCTIgSnVuIDIwMDggMTg6Mjc6MzUgLTAwMDAJMS44
CisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2ludGVybmFsL3VpL3ZpZXdtb2RlbC9HZGJWaWV3
TW9kZWxBZGFwdGVyLmphdmEJMTUgSnVsIDIwMDggMjM6MTQ6NTcgLTAwMDAKQEAgLTExLDEyICsx
MSwxMyBAQAogcGFja2FnZSBvcmcuZWNsaXBzZS5kZC5nZGIuaW50ZXJuYWwudWkudmlld21vZGVs
OwogCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuVGhyZWFkU2FmZTsKK2lt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmll
d21vZGVsLkFic3RyYWN0RGVidWdWTUFkYXB0ZXI7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xs
ZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFs
LnVpLnZpZXdtb2RlbC5leHByZXNzaW9uLkV4cHJlc3Npb25WTVByb3ZpZGVyOwogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwu
bW9kdWxlcy5Nb2R1bGVzVk1Qcm92aWRlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLnJlZ2lzdGVyLlJlZ2lzdGVyVk1Q
cm92aWRlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlz
aW9uYWwudWkudmlld21vZGVsLnZhcmlhYmxlLlZhcmlhYmxlVk1Qcm92aWRlcjsKIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOwotaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi51aS52aWV3bW9kZWwuZGF0YW1vZGVsLkFic3RyYWN0RE1WTUFkYXB0ZXI7CiBpbXBv
cnQgb3JnLmVjbGlwc2UuZGQuZHNmLnVpLnZpZXdtb2RlbC5kYXRhbW9kZWwuQWJzdHJhY3RETVZN
UHJvdmlkZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZ2RiLmludGVybmFsLnVpLnZpZXdtb2Rl
bC5sYXVuY2guTGF1bmNoVk1Qcm92aWRlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy5pbnRl
cm5hbC51aS52aWV3ZXJzLm1vZGVsLnByb3Zpc2lvbmFsLklDb2x1bW5QcmVzZW50YXRpb25GYWN0
b3J5OwpAQCAtMjgsMTAgKzI5LDEwIEBACiAgKi8KIEBUaHJlYWRTYWZlCiBAU3VwcHJlc3NXYXJu
aW5ncygicmVzdHJpY3Rpb24iKQotcHVibGljIGNsYXNzIEdkYlZpZXdNb2RlbEFkYXB0ZXIgZXh0
ZW5kcyBBYnN0cmFjdERNVk1BZGFwdGVyCitwdWJsaWMgY2xhc3MgR2RiVmlld01vZGVsQWRhcHRl
ciBleHRlbmRzIEFic3RyYWN0RGVidWdWTUFkYXB0ZXIKIHsKLSAgICBwdWJsaWMgR2RiVmlld01v
ZGVsQWRhcHRlcihEc2ZTZXNzaW9uIHNlc3Npb24pIHsKLSAgICAgICAgc3VwZXIoc2Vzc2lvbik7
CisgICAgcHVibGljIEdkYlZpZXdNb2RlbEFkYXB0ZXIoRHNmU2Vzc2lvbiBzZXNzaW9uLCBTdGVw
cGluZ0NvbnRyb2xsZXIgY29udHJvbGxlcikgeworICAgICAgICBzdXBlcihzZXNzaW9uLCBjb250
cm9sbGVyKTsKICAgICAgICAgZ2V0U2Vzc2lvbigpLnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElDb2x1
bW5QcmVzZW50YXRpb25GYWN0b3J5LmNsYXNzLCB0aGlzKTsKICAgICB9ICAgIAogCkluZGV4OiBz
cmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2ludGVybmFsL3VpL0dkYkFkYXB0ZXJGYWN0b3J5LmphdmEK
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1
Z2lucy9vcmcuZWNsaXBzZS5kZC5nZGIudWkvc3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5h
bC91aS9HZGJBZGFwdGVyRmFjdG9yeS5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjEwCmRp
ZmYgLXUgLXIxLjEwIEdkYkFkYXB0ZXJGYWN0b3J5LmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9k
ZC9nZGIvaW50ZXJuYWwvdWkvR2RiQWRhcHRlckZhY3RvcnkuamF2YQkyOCBNYXkgMjAwOCAxODoy
NToxMiAtMDAwMAkxLjEwCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2ludGVybmFsL3VpL0dk
YkFkYXB0ZXJGYWN0b3J5LmphdmEJMTUgSnVsIDIwMDggMjM6MTQ6NTcgLTAwMDAKQEAgLTE5LDYg
KzE5LDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUuSUFkYXB0ZXJGYWN0b3J5
OwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkltbXV0YWJsZTsKIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRTYWZlOworaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwuU3Rl
cHBpbmdDb250cm9sbGVyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5h
bC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkRlZmF1bHREc2ZNb2RlbFNlbGVjdGlv
blBvbGljeUZhY3Rvcnk7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpLmFjdGlv
bnMuRHNmUmVzdW1lQ29tbWFuZDsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWku
YWN0aW9ucy5Ec2ZTdGVwSW50b0NvbW1hbmQ7CkBAIC03OSwxNSArODAsMjAgQEAKICAgICAgICAg
ZmluYWwgRHNmU3VzcGVuZFRyaWdnZXIgZlN1c3BlbmRUcmlnZ2VyOwogCQlmaW5hbCBEc2ZTdGVw
cGluZ01vZGVUYXJnZXQgZlN0ZXBwaW5nTW9kZVRhcmdldDsKIAkJZmluYWwgSU1vZGVsU2VsZWN0
aW9uUG9saWN5RmFjdG9yeSBmTW9kZWxTZWxlY3Rpb25Qb2xpY3lGYWN0b3J5OworCQlmaW5hbCBT
dGVwcGluZ0NvbnRyb2xsZXIgZlN0ZXBwaW5nQ29udHJvbGxlcjsKIAogICAgICAgICBTZXNzaW9u
QWRhcHRlclNldChHZGJMYXVuY2ggbGF1bmNoKSB7CiAgICAgICAgICAgICBmTGF1bmNoID0gbGF1
bmNoOwogICAgICAgICAgICAgRHNmU2Vzc2lvbiBzZXNzaW9uID0gbGF1bmNoLmdldFNlc3Npb24o
KTsKICAgICAgICAgICAgIAotICAgICAgICAgICAgZlZpZXdNb2RlbEFkYXB0ZXIgPSBuZXcgR2Ri
Vmlld01vZGVsQWRhcHRlcihzZXNzaW9uKTsKKyAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHN0ZXBw
aW5nIGNvbnRyb2xsZXIKKyAgICAgICAgICAgIGZTdGVwcGluZ0NvbnRyb2xsZXIgPSBuZXcgU3Rl
cHBpbmdDb250cm9sbGVyKHNlc3Npb24pOworICAgICAgICAgICAgc2Vzc2lvbi5yZWdpc3Rlck1v
ZGVsQWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MsIGZTdGVwcGluZ0NvbnRyb2xsZXIp
OworCisgICAgICAgICAgICBmVmlld01vZGVsQWRhcHRlciA9IG5ldyBHZGJWaWV3TW9kZWxBZGFw
dGVyKHNlc3Npb24sIGZTdGVwcGluZ0NvbnRyb2xsZXIpOwogCiAgICAgICAgICAgICBpZiAobGF1
bmNoLmdldFNvdXJjZUxvY2F0b3IoKSBpbnN0YW5jZW9mIElTb3VyY2VMb29rdXBEaXJlY3Rvcikg
ewotICAgICAgICAgICAgICAgIGZTb3VyY2VEaXNwbGF5QWRhcHRlciA9IG5ldyBEc2ZTb3VyY2VE
aXNwbGF5QWRhcHRlcihzZXNzaW9uLCAoSVNvdXJjZUxvb2t1cERpcmVjdG9yKWxhdW5jaC5nZXRT
b3VyY2VMb2NhdG9yKCkpOworICAgICAgICAgICAgICAgIGZTb3VyY2VEaXNwbGF5QWRhcHRlciA9
IG5ldyBEc2ZTb3VyY2VEaXNwbGF5QWRhcHRlcihzZXNzaW9uLCAoSVNvdXJjZUxvb2t1cERpcmVj
dG9yKWxhdW5jaC5nZXRTb3VyY2VMb2NhdG9yKCksIGZTdGVwcGluZ0NvbnRyb2xsZXIpOwogICAg
ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICBmU291cmNlRGlzcGxheUFkYXB0ZXIg
PSBudWxsOwogICAgICAgICAgICAgfQpAQCAtMTM3LDcgKzE0MywxMCBAQAogCiAgICAgICAgICAg
ICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSVNvdXJjZURpc3BsYXkuY2xhc3MpOwog
ICAgICAgICAgICAgaWYgKGZTb3VyY2VEaXNwbGF5QWRhcHRlciAhPSBudWxsKSBmU291cmNlRGlz
cGxheUFkYXB0ZXIuZGlzcG9zZSgpOwotICAgICAgICAgICAgCisKKyAgICAgICAgICAgIHNlc3Np
b24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MpOworICAg
ICAgICAgICAgZlN0ZXBwaW5nQ29udHJvbGxlci5kaXNwb3NlKCk7CisKICAgICAgICAgICAgIHNl
c3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJU3RlcHBpbmdNb2RlVGFyZ2V0LmNsYXNzKTsK
ICAgICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJU3RlcEludG9IYW5k
bGVyLmNsYXNzKTsKICAgICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJ
U3RlcE92ZXJIYW5kbGVyLmNsYXNzKTsKQEAgLTE0Nyw3ICsxNTYsNyBAQAogICAgICAgICAgICAg
c2Vzc2lvbi51bnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElSZXN0YXJ0LmNsYXNzKTsKICAgICAgICAg
ICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJVGVybWluYXRlSGFuZGxlci5jbGFz
cyk7CiAgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSU1vZGVsU2Vs
ZWN0aW9uUG9saWN5RmFjdG9yeS5jbGFzcyk7Ci0KKyAgICAgICAgICAgIAogICAgICAgICAgICAg
ZlN0ZXBJbnRvQ29tbWFuZC5kaXNwb3NlKCk7CiAgICAgICAgICAgICBmU3RlcE92ZXJDb21tYW5k
LmRpc3Bvc2UoKTsKICAgICAgICAgICAgIGZTdGVwUmV0dXJuQ29tbWFuZC5kaXNwb3NlKCk7CiNQ
IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1ZwpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy9zZXJ2aWNlL1N0ZXBRdWV1ZU1hbmFnZXIuamF2YQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAv
Y3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRz
Zi5kZWJ1Zy9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFu
YWdlci5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjgKZGlmZiAtdSAtcjEuOCBTdGVwUXVl
dWVNYW5hZ2VyLmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9T
dGVwUXVldWVNYW5hZ2VyLmphdmEJMzAgTWF5IDIwMDggMjI6NTc6NDQgLTAwMDAJMS44CisrKyBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvU3RlcFF1ZXVlTWFuYWdlci5qYXZh
CTE1IEp1bCAyMDA4IDIzOjE0OjU4IC0wMDAwCkBAIC00MSwxMSArNDEsMTQgQEAKICAqIGlzIHVz
ZWQsIG90aGVyIHNlcnZpY2UgaW1wbGVtZW50YXRpb25zLCBzdWNoIGFzIHN0YWNrIGFuZCBleHBy
ZXNzaW9ucywgY2FuIAogICogdXNlIGl0IHRvIGF2b2lkIHJlcXVlc3RpbmcgZGF0YSBmcm9tIGRl
YnVnZ2VyIGJhY2sgZW5kIGlmIGFub3RoZXIgc3RlcCBpcyAKICAqIGFib3V0IHRvIGJlIGV4ZWN1
dGVkLiAKKyAqIAorICogQGRlcHJlY2F0ZWQgVGhlIGZ1bmN0aW9uYWxpdHkgaGFzIGJlZW4gaW50
ZWdyYXRlZCBpbiB0aGUgVUkgbGF5ZXIuCiAgKi8KLXB1YmxpYyBjbGFzcyBTdGVwUXVldWVNYW5h
Z2VyIGV4dGVuZHMgQWJzdHJhY3REc2ZTZXJ2aWNlCitARGVwcmVjYXRlZAorcHVibGljIGNsYXNz
IFN0ZXBRdWV1ZU1hbmFnZXIgZXh0ZW5kcyBBYnN0cmFjdERzZlNlcnZpY2UgaW1wbGVtZW50cyBJ
U3RlcFF1ZXVlTWFuYWdlcgogewogICAgIC8qKgotICAgICAqIEFtb3VudCBvZiB0aW1lIGluIG1p
bGlzZWNvbmRzLCB0aGF0IGl0IHRha2VzIHRoZSBJU3RlcHBpbmdUaW1lZE91dEV2ZW50IAorICAg
ICAqIEFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kcywgdGhhdCBpdCB0YWtlcyB0aGUgSVN0
ZXBwaW5nVGltZWRPdXRFdmVudCAKICAgICAgKiBldmVudCB0byBiZSBpc3N1ZWQgYWZ0ZXIgYSBz
dGVwIGlzIHN0YXJ0ZWQuIAogICAgICAqIEBzZWUgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCAgCiAg
ICAgICovCkBAIC0xMTMsOSArMTE2LDkgQEAKICAgICAgICAgcmV0dXJuIERzZkRlYnVnUGx1Z2lu
LmdldEJ1bmRsZUNvbnRleHQoKTsKICAgICB9CiAKLSAgICAvKioKLSAgICAgKiBDaGVja3Mgd2hl
dGhlciBhIHN0ZXAgY29tbWFuZCBjYW4gYmUgcXVldWVkIHVwIGZvciBnaXZlbiBjb250ZXh0Lgot
ICAgICAqLworICAgIC8qCisJICogQHNlZSBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vydmlj
ZS5JU3RlcFF1ZXVlTWFuYWdlciNjYW5FbnF1ZXVlU3RlcChvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0LCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5TdGVwVHlwZSwgb3JnLmVjbGlwc2UuZGQu
ZHNmLmNvbmN1cnJlbnQuRGF0YVJlcXVlc3RNb25pdG9yKQorCSAqLwogICAgIHB1YmxpYyB2b2lk
IGNhbkVucXVldWVTdGVwKElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgU3RlcFR5cGUgc3Rl
cFR5cGUsIERhdGFSZXF1ZXN0TW9uaXRvcjxCb29sZWFuPiBybSkgewogICAgICAgICBpZiAoZG9D
YW5FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlwZSkpIHsKICAgICAgICAgICAgIHJtLnNldERh
dGEodHJ1ZSk7CkBAIC0xMzksMTEgKzE0Miw5IEBACiAgICAgICAgIHJldHVybiBzdGVwUXVldWUu
c2l6ZSgpOwogICAgIH0KIAotICAgIC8qKgotICAgICAqIEFkZHMgYSBzdGVwIGNvbW1hbmQgdG8g
dGhlIGV4ZWN1dGlvbiBxdWV1ZSBmb3IgZ2l2ZW4gY29udGV4dC4KLSAgICAgKiBAcGFyYW0gZXhl
Y0N0eCBFeGVjdXRpb24gY29udGV4dCB0aGF0IHNob3VsZCBwZXJmb3JtIHRoZSBzdGVwLiAKLSAg
ICAgKiBAcGFyYW0gc3RlcFR5cGUgVHlwZSBvZiBzdGVwIHRvIGV4ZWN1dGUuCi0gICAgICovCisg
ICAgLyoKKwkgKiBAc2VlIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklTdGVwUXVl
dWVNYW5hZ2VyI2VucXVldWVTdGVwKG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklS
dW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQsIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5z
ZXJ2aWNlLklSdW5Db250cm9sLlN0ZXBUeXBlKQorCSAqLwogICAgIHB1YmxpYyB2b2lkIGVucXVl
dWVTdGVwKGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUg
c3RlcFR5cGUpIHsKICAgICAgICAgZlJ1bkNvbnRyb2wuY2FuU3RlcCgKICAgICAgICAgICAgIGV4
ZWNDdHgsIHN0ZXBUeXBlLCBuZXcgRGF0YVJlcXVlc3RNb25pdG9yPEJvb2xlYW4+KGdldEV4ZWN1
dG9yKCksIG51bGwpIHsKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvc2Vydmlj
ZS9JU3RlcFF1ZXVlTWFuYWdlci5qYXZhCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvZGVidWcvc2VydmljZS9JU3RlcFF1ZXVlTWFuYWdlci5qYXZhCmRpZmYgLU4g
c3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9zZXJ2aWNlL0lTdGVwUXVldWVNYW5hZ2VyLmph
dmEKLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwCisrKyBzcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL2RlYnVnL3NlcnZpY2UvSVN0ZXBRdWV1ZU1hbmFnZXIuamF2YQkxIEphbiAx
OTcwIDAwOjAwOjAwIC0wMDAwCkBAIC0wLDAgKzEsNDIgQEAKKy8qKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqCisgKiBDb3B5cmlnaHQgKGMpIDIwMDggV2luZCBSaXZlciBTeXN0ZW1zLCBJbmMuIGFuZCBv
dGhlcnMuCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2Nv
bXBhbnlpbmcgbWF0ZXJpYWxzCisgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKKyAqIHdoaWNoIGFjY29tcGFuaWVz
IHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CisgKiBodHRwOi8vd3d3LmVj
bGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAorICoKKyAqIENvbnRyaWJ1dG9yczoKKyAqICAg
ICBXaW5kIFJpdmVyIFN5c3RlbXMgLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcu
c2VydmljZTsKKworaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkNvbmZpbmVk
VG9Ec2ZFeGVjdXRvcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5EYXRh
UmVxdWVzdE1vbml0b3I7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2Uu
SVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29udGV4dDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5TdGVwVHlwZTsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOworCisvKioKKyAqIEBzaW5jZSAxLjEKKyAqLwor
QENvbmZpbmVkVG9Ec2ZFeGVjdXRvcigiZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCkiKQorcHVi
bGljIGludGVyZmFjZSBJU3RlcFF1ZXVlTWFuYWdlciB7CisgICAgCisgICAgLyoqCisgICAgICog
UmV0dXJucyB0aGUgc2Vzc2lvbiBmb3Igd2hpY2ggdGhpcyBzdGVwIHF1ZXVlIG1hbmFnZXIgaXMg
dXNlZC4KKyAgICAgKi8KKyAgICBwdWJsaWMgRHNmU2Vzc2lvbiBnZXRTZXNzaW9uKCk7CisgICAg
CisJLyoqCisJICogQ2hlY2tzIHdoZXRoZXIgYSBzdGVwIGNvbW1hbmQgY2FuIGJlIHF1ZXVlZCB1
cCBmb3IgZ2l2ZW4gY29udGV4dC4KKwkgKi8KKwlwdWJsaWMgYWJzdHJhY3Qgdm9pZCBjYW5FbnF1
ZXVlU3RlcChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgsIFN0ZXBUeXBlIHN0ZXBUeXBlLCBE
YXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4gcm0pOworCisJLyoqCisJICogQWRkcyBhIHN0ZXAg
Y29tbWFuZCB0byB0aGUgZXhlY3V0aW9uIHF1ZXVlIGZvciBnaXZlbiBjb250ZXh0LgorCSAqIEBw
YXJhbSBleGVjQ3R4IEV4ZWN1dGlvbiBjb250ZXh0IHRoYXQgc2hvdWxkIHBlcmZvcm0gdGhlIHN0
ZXAuIAorCSAqIEBwYXJhbSBzdGVwVHlwZSBUeXBlIG9mIHN0ZXAgdG8gZXhlY3V0ZS4KKwkgKi8K
KwlwdWJsaWMgYWJzdHJhY3Qgdm9pZCBlbnF1ZXVlU3RlcChmaW5hbCBJRXhlY3V0aW9uRE1Db250
ZXh0IGV4ZWNDdHgsIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlKTsKKworfQojUCBvcmcuZWNsaXBz
ZS5kZC5kc2YudWkKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL2Rh
dGFtb2RlbC9BYnN0cmFjdERNVk1BZGFwdGVyLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2
c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2Yu
dWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvZGF0YW1vZGVsL0Fic3RyYWN0
RE1WTUFkYXB0ZXIuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4yCmRpZmYgLXUgLXIxLjIg
QWJzdHJhY3RETVZNQWRhcHRlci5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3Zp
ZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRlci5qYXZhCTIgSnVuIDIwMDggMTc6
NTQ6NDUgLTAwMDAJMS4yCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9k
YXRhbW9kZWwvQWJzdHJhY3RETVZNQWRhcHRlci5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1OjAwIC0w
MDAwCkBAIC0xMCw3ICsxMCwxMSBAQAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdl
IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWwuZGF0YW1vZGVsOwogCitpbXBvcnQgamF2
YS51dGlsLmNvbmN1cnJlbnQuUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb247CisKIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRTYWZlOworaW1wb3J0IG9yZy5lY2xp
cHNlLmRkLmRzZi5kYXRhbW9kZWwuSURNRXZlbnQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LnNlcnZpY2UuRHNmU2VydmljZUV2ZW50SGFuZGxlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2Yuc2VydmljZS5Ec2ZTZXNzaW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3
bW9kZWwuQWJzdHJhY3RWTUFkYXB0ZXI7CiAKQEAgLTIzLDYgKzI3LDEzIEBACiAgICAgcHJpdmF0
ZSBmaW5hbCBEc2ZTZXNzaW9uIGZTZXNzaW9uOwogCiAgICAgLyoqCisgICAgICogSXQgaXMgdGhl
b3JldGljYWxseSBwb3NzaWJsZSBmb3IgYSBWTSBhZGFwdGVyIHRvIGJlIGRpc3Bvc2VkIGJlZm9y
ZSBpdCAKKyAgICAgKiBoYXMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIGFzIGV2ZW50IGxp
c3RlbmVyLiAgVGhpcyBmbGFnIGlzIHVzZWQKKyAgICAgKiB0byBhdm9pZCByZW1vdmluZyBpdHNl
bGYgYXMgbGlzdGVuZXIgaW4gc3VjaCBzaXR1YXRpb24uCisgICAgICovCisgICAgcHJpdmF0ZSBi
b29sZWFuIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyID0gZmFsc2U7CisKKyAgICAvKioKICAg
ICAgKiBDb25zdHJ1Y3RvciBmb3IgdGhlIFZpZXcgTW9kZWwgc2Vzc2lvbi4gIEl0IGlzIHRlbXB0
aW5nIHRvIGhhdmUgdGhlIAogICAgICAqIGFkYXB0ZXIgcmVnaXN0ZXIgaXRzZWxmIGhlcmUgd2l0
aCB0aGUgc2Vzc2lvbiBhcyB0aGUgbW9kZWwgYWRhcHRlciwgYnV0CiAgICAgICogdGhhdCB3b3Vs
ZCBtZWFuIHRoYXQgdGhlIGFkYXB0ZXIgbWlnaHQgZ2V0IGFjY2Vzc2VkIG9uIGFub3RoZXIgdGhy
ZWFkCkBAIC0zMywxMiArNDQsNTkgQEAKICAgICBwdWJsaWMgQWJzdHJhY3RETVZNQWRhcHRlcihE
c2ZTZXNzaW9uIHNlc3Npb24pIHsKICAgICAgICAgc3VwZXIoKTsKICAgICAgICAgZlNlc3Npb24g
PSBzZXNzaW9uOworICAgICAgICAvLyBBZGQgb3Vyc2VsdmVzIGFzIGxpc3RlbmVyIGZvciBETSBl
dmVudHMgZXZlbnRzLgorICAgICAgICB0cnkgeworICAgICAgICAgICAgc2Vzc2lvbi5nZXRFeGVj
dXRvcigpLmV4ZWN1dGUobmV3IFJ1bm5hYmxlKCkgeworICAgICAgICAgICAgICAgIHB1YmxpYyB2
b2lkIHJ1bigpIHsKKyAgICAgICAgICAgICAgICAgICAgaWYgKERzZlNlc3Npb24uaXNTZXNzaW9u
QWN0aXZlKGdldFNlc3Npb24oKS5nZXRJZCgpKSkgeworICAgICAgICAgICAgICAgICAgICAgICAg
Z2V0U2Vzc2lvbigpLmFkZFNlcnZpY2VFdmVudExpc3RlbmVyKEFic3RyYWN0RE1WTUFkYXB0ZXIu
dGhpcywgbnVsbCk7CisgICAgICAgICAgICAgICAgICAgICAgICBmUmVnaXN0ZXJlZEFzRXZlbnRM
aXN0ZW5lciA9IHRydWU7CisgICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICB9
CisgICAgICAgICAgICB9KTsKKyAgICAgICAgfSBjYXRjaCAoUmVqZWN0ZWRFeGVjdXRpb25FeGNl
cHRpb24gZSkgeworICAgICAgICAgICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24sIG5vdCBtdWNoIHdl
IGNhbiBkbyBidXQgd2FpdCB0byBiZSBkaXNwb3NlZC4KKyAgICAgICAgfQogICAgIH0gICAgCiAK
KyAgICBAT3ZlcnJpZGUKKyAgICBwdWJsaWMgdm9pZCBkaXNwb3NlKCkgeworICAgICAgICB0cnkg
eworICAgICAgICAgICAgZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgUnVu
bmFibGUoKSB7CisgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgeworICAgICAgICAg
ICAgICAgICAgICBpZiAoZlJlZ2lzdGVyZWRBc0V2ZW50TGlzdGVuZXIgJiYgZ2V0U2Vzc2lvbigp
LmlzQWN0aXZlKCkpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgIGZTZXNzaW9uLnJlbW92ZVNl
cnZpY2VFdmVudExpc3RlbmVyKEFic3RyYWN0RE1WTUFkYXB0ZXIudGhpcyk7CisgICAgICAgICAg
ICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICB9CisgICAgICAgICAgICB9KTsKKyAgICAgICAg
fSBjYXRjaCAoUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb24gZSkgeworICAgICAgICAgICAgLy8g
U2Vzc2lvbiBzaHV0IGRvd24uCisgICAgICAgIH0KKyAgICAgICAgc3VwZXIuZGlzcG9zZSgpOwor
ICAgIH0KKwogICAgIC8qKgogICAgICAqIFJldHVybnMgdGhlIERTRiBzZXNzaW9uIHRoYXQgdGhp
cyBhZGFwdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC4KICAgICAgKiBAcmV0dXJuCiAgICAgICovCiAg
ICAgcHJvdGVjdGVkIERzZlNlc3Npb24gZ2V0U2Vzc2lvbigpIHsgcmV0dXJuIGZTZXNzaW9uOyB9
CiAgICAgCisgICAgLyoqCisgICAgICogSGFuZGxlICJkYXRhIG1vZGVsIGNoYW5nZWQiIGV2ZW50
IGJ5IGdlbmVyYXRpbmcgYSBkZWx0YSBvYmplY3QgZm9yIGVhY2ggCisgICAgICogdmlldyBhbmQg
cGFzc2luZyBpdCB0byB0aGUgY29ycmVzcG9uZGluZyB2aWV3IG1vZGVsIHByb3ZpZGVyLiAgVGhl
IHZpZXcKKyAgICAgKiBtb2RlbCBwcm92aWRlciBpcyB0aGVuIHJlc3BvbnNpYmxlIGZvciBmaWxs
aW5nLWluIGFuZCBzZW5kaW5nIHRoZSBkZWx0YQorICAgICAqIHRvIHRoZSB2aWV3ZXIuCisgICAg
ICogCisgICAgICogQHBhcmFtIGV2ZW50CisgICAgICogCisgICAgICogQHNpbmNlIDEuMQorICAg
ICAqLworICAgIEBEc2ZTZXJ2aWNlRXZlbnRIYW5kbGVyCisgICAgcHVibGljIGZpbmFsIHZvaWQg
ZXZlbnREaXNwYXRjaGVkKGZpbmFsIElETUV2ZW50PD8+IGV2ZW50KSB7CisgICAgCS8vIFdlJ3Jl
IGluIHNlc3Npb24ncyBleGVjdXRvciB0aHJlYWQgKHNlc3Npb24gaW4gd2hpY2ggdGhlIGV2ZW50
IG9yaWdpbmF0ZWQpLiAKKyAgICAgICAgaWYgKGlzRGlzcG9zZWQoKSkgcmV0dXJuOworCisgICAg
ICAgIGhhbmRsZUV2ZW50KGV2ZW50KTsKKyAgICB9CisKIH0KSW5kZXg6IHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvdWkvdmlld21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1Qcm92aWRlci5qYXZh
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3Bs
dWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmll
d21vZGVsL2RhdGFtb2RlbC9BYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhLHYKcmV0cmlldmluZyBy
ZXZpc2lvbiAxLjIKZGlmZiAtdSAtcjEuMiBBYnN0cmFjdERNVk1Qcm92aWRlci5qYXZhCi0tLSBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9kYXRhbW9kZWwvQWJzdHJhY3RETVZN
UHJvdmlkZXIuamF2YQkyIEp1biAyMDA4IDE3OjU0OjQ1IC0wMDAwCTEuMgorKysgc3JjL29yZy9l
Y2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvZGF0YW1vZGVsL0Fic3RyYWN0RE1WTVByb3ZpZGVy
LmphdmEJMTUgSnVsIDIwMDggMjM6MTU6MDAgLTAwMDAKQEAgLTEwLDggKzEwLDYgQEAKICAqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21v
ZGVsLmRhdGFtb2RlbDsKIAotaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlJlamVjdGVkRXhl
Y3V0aW9uRXhjZXB0aW9uOwotCiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQu
Q29uZmluZWRUb0RzZkV4ZWN1dG9yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9k
ZWwuSURNRXZlbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vydmlj
ZUV2ZW50SGFuZGxlcjsKQEAgLTQ0LDE0ICs0Miw2IEBACiBhYnN0cmFjdCBwdWJsaWMgY2xhc3Mg
QWJzdHJhY3RETVZNUHJvdmlkZXIgZXh0ZW5kcyBBYnN0cmFjdENhY2hpbmdWTVByb3ZpZGVyCiB7
CiAgICAgcHJpdmF0ZSBmaW5hbCBEc2ZTZXNzaW9uIGZTZXNzaW9uOwotCi0gICAgLyoqCi0gICAg
ICogSXQgaXMgdGhlb3JldGljYWxseSBwb3NzaWJsZSBmb3IgYSBWTVByb3ZpZGVyIHRvIGJlIGRp
c3Bvc2VkIGJlZm9yZSBpdCAKLSAgICAgKiBoYXMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxm
IGFzIGV2ZW50IGxpc3RlbmVyLiAgVGhpcyBmbGFnIGlzIHVzZWQKLSAgICAgKiB0byBhdm9pZCBy
ZW1vdmluZyBpdHNlbGYgYXMgbGlzdGVuZXIgaW4gc3VjaCBzaXR1YXRpb24uCi0gICAgICovCi0g
ICAgcHJpdmF0ZSBib29sZWFuIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyID0gZmFsc2U7Ci0K
ICAgICAvKioKICAgICAgKiBDb25zdHJ1Y3RzIHRoZSB2aWV3IG1vZGVsIHByb3ZpZGVyIGZvciBn
aXZlbiBEU0Ygc2Vzc2lvbi4gIFRoZSAKICAgICAgKiBjb25zdHJ1Y3RvciBpcyB0aHJlYWQtc2Fm
ZSB0byBhbGxvdyBWTSBwcm92aWRlciB0byBiZSBjb25zdHJ1Y3RlZApAQCAtNjEsNjQgKzUxLDE2
IEBACiAgICAgcHVibGljIEFic3RyYWN0RE1WTVByb3ZpZGVyKEFic3RyYWN0Vk1BZGFwdGVyIGFk
YXB0ZXIsICBJUHJlc2VudGF0aW9uQ29udGV4dCBwcmVzZW50YXRpb25Db250ZXh0LCBEc2ZTZXNz
aW9uIHNlc3Npb24pIHsKICAgICAgICAgc3VwZXIoYWRhcHRlciwgcHJlc2VudGF0aW9uQ29udGV4
dCk7CiAgICAgICAgIGZTZXNzaW9uID0gc2Vzc2lvbjsKLSAgICAgICAgLy8gQWRkIG91cnNlbHZl
cyBhcyBsaXN0ZW5lciBmb3IgRE0gZXZlbnRzIGV2ZW50cy4KLSAgICAgICAgdHJ5IHsKLSAgICAg
ICAgICAgIHNlc3Npb24uZ2V0RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsKLSAg
ICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7Ci0gICAgICAgICAgICAgICAgICAgIGlm
IChEc2ZTZXNzaW9uLmlzU2Vzc2lvbkFjdGl2ZShnZXRTZXNzaW9uKCkuZ2V0SWQoKSkpIHsKLSAg
ICAgICAgICAgICAgICAgICAgICAgIGdldFNlc3Npb24oKS5hZGRTZXJ2aWNlRXZlbnRMaXN0ZW5l
cihBYnN0cmFjdERNVk1Qcm92aWRlci50aGlzLCBudWxsKTsKLSAgICAgICAgICAgICAgICAgICAg
ICAgIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyID0gdHJ1ZTsKLSAgICAgICAgICAgICAgICAg
ICAgfQotICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgIH0pOwotICAgICAgICB9IGNhdGNo
IChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlvbiBlKSB7Ci0gICAgICAgICAgICAvLyBTZXNzaW9u
IHNodXQgZG93biwgbm90IG11Y2ggd2UgY2FuIGRvIGJ1dCB3YWl0IHRvIGJlIGRpc3Bvc2VkLgot
ICAgICAgICB9IAogICAgIH0gICAgCiAKLSAgICAvKiogQ2FsbGVkIHRvIGRpc3Bvc2UgdGhlIHBy
b3ZpZGVyLiAqLyAKLSAgICBAT3ZlcnJpZGUKLSAgICBwdWJsaWMgdm9pZCBkaXNwb3NlKCkgewot
ICAgICAgICB0cnkgewotICAgICAgICAgICAgZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCkuZXhl
Y3V0ZShuZXcgUnVubmFibGUoKSB7Ci0gICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkg
ewotICAgICAgICAgICAgICAgICAgICBpZiAoRHNmU2Vzc2lvbi5pc1Nlc3Npb25BY3RpdmUoZ2V0
U2Vzc2lvbigpLmdldElkKCkpICYmIGZSZWdpc3RlcmVkQXNFdmVudExpc3RlbmVyICkgewotICAg
ICAgICAgICAgICAgICAgICAgICAgZlNlc3Npb24ucmVtb3ZlU2VydmljZUV2ZW50TGlzdGVuZXIo
QWJzdHJhY3RETVZNUHJvdmlkZXIudGhpcyk7Ci0gICAgICAgICAgICAgICAgICAgIH0KLSAgICAg
ICAgICAgICAgICB9Ci0gICAgICAgICAgICB9KTsKLSAgICAgICAgfSBjYXRjaCAoUmVqZWN0ZWRF
eGVjdXRpb25FeGNlcHRpb24gZSkgewotICAgICAgICAgICAgLy8gU2Vzc2lvbiBzaHV0IGRvd24u
Ci0gICAgICAgIH0gCi0gICAgICAgIHN1cGVyLmRpc3Bvc2UoKTsKLSAgICB9Ci0KICAgICBwdWJs
aWMgRHNmU2Vzc2lvbiBnZXRTZXNzaW9uKCkgeyByZXR1cm4gZlNlc3Npb247IH0KIAogICAgIC8q
KgotICAgICAqIEhhbmRsZSAiZGF0YSBtb2RlbCBjaGFuZ2VkIiBldmVudCBieSBnZW5lcmF0aW5n
IGEgZGVsdGEgb2JqZWN0IGZvciBlYWNoIAotICAgICAqIHZpZXcgYW5kIHBhc3NpbmcgaXQgdG8g
dGhlIGNvcnJlc3BvbmRpbmcgdmlldyBtb2RlbCBwcm92aWRlci4gIFRoZSB2aWV3Ci0gICAgICog
bW9kZWwgcHJvdmlkZXIgaXMgdGhlbiByZXNwb25zaWJsZSBmb3IgZmlsbGluZy1pbiBhbmQgc2Vu
ZGluZyB0aGUgZGVsdGEKLSAgICAgKiB0byB0aGUgdmlld2VyLgotICAgICAqIEBwYXJhbSBlCisg
ICAgICogQGRlcHJlY2F0ZWQgS2VwdCBmb3IgQVBJIGNvbXBhdGliaWxpdHkgcmVhc29ucy4gCisg
ICAgICogRXZlbnRzIGFyZSBub3cgcmVjZWl2ZWQgYW5kIGRpc3BhdGNoZWQgYnkgdGhlIFZNIGFk
YXB0ZXIuCiAgICAgICovCi0gICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIKKyAgICBARGVwcmVj
YXRlZAorCUBEc2ZTZXJ2aWNlRXZlbnRIYW5kbGVyCiAgICAgcHVibGljIHZvaWQgZXZlbnREaXNw
YXRjaGVkKGZpbmFsIElETUV2ZW50PD8+IGV2ZW50KSB7Ci0gICAgICAgIC8vIFdlJ3JlIGluIHNl
c3Npb24ncyBleGVjdXRvciB0aHJlYWQgKHNlc3Npb24gaW4gd2hpY2ggdGhlIGV2ZW50IG9yaWdp
bmF0ZWQpLiAKLSAgICAgICAgLy8gUmUtZGlzcGFjaCB0byB0aGUgdmlldyBtb2RlbCBwcm92aWRl
ciBleGVjdXRvciB0aHJlYWQgYW5kIHRoZW4gY2FsbCB0aGUgCi0gICAgICAgIC8vIG1vZGVsIHBy
b3h5IHN0cmF0ZWd5IHRvIGhhbmRsZSB0aGUgZXZlbnQuCi0gICAgICAgIGlmIChpc0Rpc3Bvc2Vk
KCkpIHJldHVybjsKLQotICAgICAgICB0cnkgewotICAgICAgICAgICAgZ2V0RXhlY3V0b3IoKS5l
eGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsKLSAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4o
KSB7Ci0gICAgICAgICAgICAgICAgICAgIGlmIChpc0Rpc3Bvc2VkKCkpIHJldHVybjsKLSAgICAg
ICAgICAgICAgICAgICAgaGFuZGxlRXZlbnQoZXZlbnQpOwotICAgICAgICAgICAgICAgIH0KLSAg
ICAgICAgICAgIH0pOwotICAgICAgICB9IGNhdGNoIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlv
biBlKSB7Ci0gICAgICAgICAgICAvLyBJZ25vcmUuICBUaGlzIGV4Y2VwdGlvbiBjb3VsZCBiZSB0
aHJvd24gaWYgdGhlIHByb3ZpZGVyIGlzIGJlaW5nIAotICAgICAgICAgICAgLy8gc2h1dCBkb3du
LiAgCi0gICAgICAgIH0KICAgICB9CiB9CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3Vp
L3ZpZXdtb2RlbC9BYnN0cmFjdFZNQWRhcHRlci5qYXZhCj09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9j
dnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNm
LnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVy
LmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMTIKZGlmZiAtdSAtcjEuMTIgQWJzdHJhY3RW
TUFkYXB0ZXIuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJz
dHJhY3RWTUFkYXB0ZXIuamF2YQkyIEp1biAyMDA4IDE3OjU0OjQ1IC0wMDAwCTEuMTIKKysrIHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1BZGFwdGVyLmphdmEJ
MTUgSnVsIDIwMDggMjM6MTU6MDAgLTAwMDAKQEAgLTEwLDE0ICsxMCwyMCBAQAogICoqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWw7
CiAKK2ltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwogaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0
aW9uczsKIGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsK
IGltcG9ydCBqYXZhLnV0aWwuTWFwOworaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1
dG9yOwogaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlJlamVjdGVkRXhlY3V0aW9uRXhjZXB0
aW9uOwogCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLklTdGF0dXM7CiBpbXBvcnQg
b3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLlN0YXR1czsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5Db3VudGluZ1JlcXVlc3RNb25pdG9yOworaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5jb25jdXJyZW50LkRzZlJ1bm5hYmxlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRz
Zi5jb25jdXJyZW50LklEc2ZTdGF0dXNDb25zdGFudHM7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQu
ZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmNvbmN1cnJlbnQuVGhyZWFkU2FmZTsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuaW50ZXJu
YWwudWkuRHNmVUlQbHVnaW47CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcuaW50ZXJuYWwudWku
dmlld2Vycy5tb2RlbC5wcm92aXNpb25hbC5JQ2hpbGRyZW5Db3VudFVwZGF0ZTsKQEAgLTI4LDYg
KzM0LDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy5pbnRlcm5hbC51aS52aWV3ZXJzLm1v
ZGVsLnByb3Zpc2lvbmFsLklQcmVzZW50YXRpb25Db250ZXh0OwogaW1wb3J0IG9yZy5lY2xpcHNl
LmRlYnVnLmludGVybmFsLnVpLnZpZXdlcnMubW9kZWwucHJvdmlzaW9uYWwuSVZpZXdlcklucHV0
VXBkYXRlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRlYnVnLmludGVybmFsLnVpLnZpZXdlcnMubW9k
ZWwucHJvdmlzaW9uYWwuSVZpZXdlclVwZGF0ZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS52
aWV3ZXJzLlRyZWVQYXRoOwogCiAvKiogCiAgKiBCYXNlIGltcGxlbWVudGF0aW9uIGZvciBWaWV3
IE1vZGVsIEFkYXB0ZXJzLiAgVGhlIGltcGxlbWVudGF0aW9uIHVzZXMKQEAgLTM4LDEwICs0NSwx
NDAgQEAKIEBTdXBwcmVzc1dhcm5pbmdzKCJyZXN0cmljdGlvbiIpCiBhYnN0cmFjdCBwdWJsaWMg
Y2xhc3MgQWJzdHJhY3RWTUFkYXB0ZXIgaW1wbGVtZW50cyBJVk1BZGFwdGVyCiB7Ci0gICAgcHJp
dmF0ZSBib29sZWFuIGZEaXNwb3NlZDsKKyAKKwkvKioKKwkgKiBJbnRlcmZhY2UgZm9yIGEgdmll
d2VyIHVwZGF0ZSB3aGljaCBjYW4gYmUgIm1vbml0b3JlZCIuCisJICovCisJaW50ZXJmYWNlIElN
b25pdG9yZWRVcGRhdGUgZXh0ZW5kcyBJVmlld2VyVXBkYXRlIHsKKyAJCWJvb2xlYW4gaXNEb25l
KCk7CisgCQl2b2lkIHNldE1vbml0b3IoUmVxdWVzdE1vbml0b3IgbW9uaXRvcik7CisJfQorCisJ
LyoqCisJICogV3JhcHMgYW4gSVZpZXdlclVwZGF0ZSB0byBhZGQgYSByZXF1ZXN0IG1vbml0b3Iu
CisJICovCisJYWJzdHJhY3Qgc3RhdGljIGNsYXNzIE1vbml0b3JlZFVwZGF0ZSBpbXBsZW1lbnRz
IElNb25pdG9yZWRVcGRhdGUgeworCisJCXByb3RlY3RlZCBJVmlld2VyVXBkYXRlIGZEZWxlZ2F0
ZTsKKwkJcHJpdmF0ZSBib29sZWFuIGZJc0RvbmU7CisJCXByaXZhdGUgUmVxdWVzdE1vbml0b3Ig
Zk1vbml0b3I7CisKKwkJTW9uaXRvcmVkVXBkYXRlKElWaWV3ZXJVcGRhdGUgdXBkYXRlKSB7CisJ
CQlmRGVsZWdhdGUgPSB1cGRhdGU7CisJCX0KKworCQlwdWJsaWMgYm9vbGVhbiBpc0RvbmUoKSB7
CisJCQlyZXR1cm4gZklzRG9uZTsKKwkJfQorCisJCXB1YmxpYyB2b2lkIHNldE1vbml0b3IoUmVx
dWVzdE1vbml0b3IgbW9uaXRvcikgeworCQkJZk1vbml0b3IgPSBtb25pdG9yOworCQkJaWYgKGZJ
c0RvbmUpIHsKKwkJCQltb25pdG9yLmRvbmUoKTsKKwkJCX0KKwkJfQorCisJCXB1YmxpYyBPYmpl
Y3QgZ2V0RWxlbWVudCgpIHsKKwkJCXJldHVybiBmRGVsZWdhdGUuZ2V0RWxlbWVudCgpOworCQl9
CisKKwkJcHVibGljIFRyZWVQYXRoIGdldEVsZW1lbnRQYXRoKCkgeworCQkJcmV0dXJuIGZEZWxl
Z2F0ZS5nZXRFbGVtZW50UGF0aCgpOworCQl9CisKKwkJcHVibGljIElQcmVzZW50YXRpb25Db250
ZXh0IGdldFByZXNlbnRhdGlvbkNvbnRleHQoKSB7CisJCQlyZXR1cm4gZkRlbGVnYXRlLmdldFBy
ZXNlbnRhdGlvbkNvbnRleHQoKTsKKwkJfQorCisJCXB1YmxpYyBPYmplY3QgZ2V0Vmlld2VySW5w
dXQoKSB7CisJCQlyZXR1cm4gZkRlbGVnYXRlLmdldFZpZXdlcklucHV0KCk7CisJCX0KKworCQlw
dWJsaWMgdm9pZCBjYW5jZWwoKSB7CisJCQlmRGVsZWdhdGUuY2FuY2VsKCk7CisJCQlpZiAoIWZJ
c0RvbmUpIHsKKwkJCQlmSXNEb25lID0gdHJ1ZTsKKwkJCQlpZiAoZk1vbml0b3IgIT0gbnVsbCkg
eworCQkJCQlmTW9uaXRvci5kb25lKCk7CisJCQkJfQorCQkJfQorCQl9CisKKwkJcHVibGljIHZv
aWQgZG9uZSgpIHsKKwkJCWZEZWxlZ2F0ZS5kb25lKCk7CisJCQlpZiAoIWZJc0RvbmUpIHsKKwkJ
CQlmSXNEb25lID0gdHJ1ZTsKKwkJCQlpZiAoZk1vbml0b3IgIT0gbnVsbCkgeworCQkJCQlmTW9u
aXRvci5kb25lKCk7CisJCQkJfQorCQkJfQorCQl9CisKKwkJcHVibGljIElTdGF0dXMgZ2V0U3Rh
dHVzKCkgeworCQkJcmV0dXJuIGZEZWxlZ2F0ZS5nZXRTdGF0dXMoKTsKKwkJfQorCisJCXB1Ymxp
YyBib29sZWFuIGlzQ2FuY2VsZWQoKSB7CisJCQlyZXR1cm4gZkRlbGVnYXRlLmlzQ2FuY2VsZWQo
KTsKKwkJfQorCisJCXB1YmxpYyB2b2lkIHNldFN0YXR1cyhJU3RhdHVzIHN0YXR1cykgeworCQkJ
ZkRlbGVnYXRlLnNldFN0YXR1cyhzdGF0dXMpOworCQl9CisKKwl9CisKKwlzdGF0aWMgY2xhc3Mg
TW9uaXRvcmVkQ2hpbGRyZW5VcGRhdGUgZXh0ZW5kcyBNb25pdG9yZWRVcGRhdGUgaW1wbGVtZW50
cyBJQ2hpbGRyZW5VcGRhdGUgeworCQlwdWJsaWMgTW9uaXRvcmVkQ2hpbGRyZW5VcGRhdGUoSUNo
aWxkcmVuVXBkYXRlIHVwZGF0ZSkgeworCQkJc3VwZXIodXBkYXRlKTsKKwkJfQorCisJCXB1Ymxp
YyBpbnQgZ2V0TGVuZ3RoKCkgeworCQkJcmV0dXJuICgoSUNoaWxkcmVuVXBkYXRlKWZEZWxlZ2F0
ZSkuZ2V0TGVuZ3RoKCk7CisJCX0KKworCQlwdWJsaWMgaW50IGdldE9mZnNldCgpIHsKKwkJCXJl
dHVybiAoKElDaGlsZHJlblVwZGF0ZSlmRGVsZWdhdGUpLmdldE9mZnNldCgpOworCQl9CisKKwkJ
cHVibGljIHZvaWQgc2V0Q2hpbGQoT2JqZWN0IGNoaWxkLCBpbnQgb2Zmc2V0KSB7CisJCQkoKElD
aGlsZHJlblVwZGF0ZSlmRGVsZWdhdGUpLnNldENoaWxkKGNoaWxkLCBvZmZzZXQpOworCQl9CisJ
CQorCX0KKworCXN0YXRpYyBjbGFzcyBNb25pdG9yZWRIYXNDaGlsZHJlblVwZGF0ZSBleHRlbmRz
IE1vbml0b3JlZFVwZGF0ZSBpbXBsZW1lbnRzIElIYXNDaGlsZHJlblVwZGF0ZSB7CisJCXB1Ymxp
YyBNb25pdG9yZWRIYXNDaGlsZHJlblVwZGF0ZShJSGFzQ2hpbGRyZW5VcGRhdGUgdXBkYXRlKSB7
CisJCQlzdXBlcih1cGRhdGUpOworCQl9CisKKwkJcHVibGljIHZvaWQgc2V0SGFzQ2hpbHJlbihi
b29sZWFuIGhhc0NoaWxkcmVuKSB7CisJCQkoKElIYXNDaGlsZHJlblVwZGF0ZSlmRGVsZWdhdGUp
LnNldEhhc0NoaWxyZW4oaGFzQ2hpbGRyZW4pOworCQl9CisKKwl9CisKKwlzdGF0aWMgY2xhc3Mg
TW9uaXRvcmVkQ2hpbGRyZW5Db3VudFVwZGF0ZSBleHRlbmRzIE1vbml0b3JlZFVwZGF0ZSBpbXBs
ZW1lbnRzIElDaGlsZHJlbkNvdW50VXBkYXRlIHsKKwkJcHVibGljIE1vbml0b3JlZENoaWxkcmVu
Q291bnRVcGRhdGUoSUNoaWxkcmVuQ291bnRVcGRhdGUgdXBkYXRlKSB7CisJCQlzdXBlcih1cGRh
dGUpOworCQl9CisKKwkJcHVibGljIHZvaWQgc2V0Q2hpbGRDb3VudChpbnQgbnVtQ2hpbGRyZW4p
IHsKKwkJCSgoSUNoaWxkcmVuQ291bnRVcGRhdGUpZkRlbGVnYXRlKS5zZXRDaGlsZENvdW50KG51
bUNoaWxkcmVuKTsKKwkJfQorCisJfQorCisKKwlwcml2YXRlIGJvb2xlYW4gZkRpc3Bvc2VkOwog
CiAgICAgcHJpdmF0ZSBmaW5hbCBNYXA8SVByZXNlbnRhdGlvbkNvbnRleHQsIElWTVByb3ZpZGVy
PiBmVmlld01vZGVsUHJvdmlkZXJzID0gCi0gICAgICAgIENvbGxlY3Rpb25zLnN5bmNocm9uaXpl
ZE1hcCggbmV3IEhhc2hNYXA8SVByZXNlbnRhdGlvbkNvbnRleHQsIElWTVByb3ZpZGVyPigpICk7
IAorICAgICAgICBDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRNYXAoIG5ldyBIYXNoTWFwPElQcmVz
ZW50YXRpb25Db250ZXh0LCBJVk1Qcm92aWRlcj4oKSApOworCisJLyoqCisJICogTGlzdCBvZiBJ
Vmlld2VyVXBkYXRlcyBwZW5kaW5nIGFmdGVyIHByb2Nlc3NpbmcgYW4gZXZlbnQuCisJICovCisJ
cHJpdmF0ZSBmaW5hbCBMaXN0PElNb25pdG9yZWRVcGRhdGU+IGZQZW5kaW5nVXBkYXRlcyA9IG5l
dyBBcnJheUxpc3Q8SU1vbml0b3JlZFVwZGF0ZT4oKTsKIAogICAgIC8qKgogICAgICAqIENvbnN0
cnVjdG9yIGZvciB0aGUgVmlldyBNb2RlbCBzZXNzaW9uLiAgSXQgaXMgdGVtcHRpbmcgdG8gaGF2
ZSB0aGUgCkBAIC03MCw2ICsyMDcsMTYgQEAKICAgICAgICAgfQogICAgIH0KIAorICAgIC8qKgor
ICAgICAqIEVudW1lcmF0ZSB0aGUgVk0gcHJvdmlkZXJzLgorICAgICAqIEByZXR1cm4gQW4gaW5z
dGFuY2Ugb2Yge0BsaW5rIEl0ZXJhYmxlPElWTVByb3ZpZGVyPn0KKyAgICAgKiAKKwkgKiBAc2lu
Y2UgMS4xCisJICovCisgICAgcHJvdGVjdGVkIEl0ZXJhYmxlPElWTVByb3ZpZGVyPiBnZXRWTVBy
b3ZpZGVySXRlcmFibGUoKSB7CisgICAgCXJldHVybiBmVmlld01vZGVsUHJvdmlkZXJzLnZhbHVl
cygpOworICAgIH0KKwogICAgIHB1YmxpYyB2b2lkIGRpc3Bvc2UoKSB7CiAgICAgICAgIElWTVBy
b3ZpZGVyW10gcHJvdmlkZXJzID0gbmV3IElWTVByb3ZpZGVyWzBdOyAKICAgICAgICAgc3luY2hy
b25pemVkKGZWaWV3TW9kZWxQcm92aWRlcnMpIHsKQEAgLTkxLDMxICsyMzgsMjkgQEAKICAgICAg
ICAgfQogICAgIH0KICAgICAKKyAgICAvKioKKwkgKiBAcmV0dXJuIHdoZXRoZXIgdGhpcyBWTSBh
ZGFwdGVyIGlzIGRpc3Bvc2VkLgorCSAqIAorICAgICAqIEBzaW5jZSAxLjEKKwkgKi8KKwlwdWJs
aWMgYm9vbGVhbiBpc0Rpc3Bvc2VkKCkgeworCQlyZXR1cm4gZkRpc3Bvc2VkOworCX0KKwogICAg
IHB1YmxpYyB2b2lkIHVwZGF0ZShJSGFzQ2hpbGRyZW5VcGRhdGVbXSB1cGRhdGVzKSB7Ci0gICAg
ICAgIElWTVByb3ZpZGVyIHByb3ZpZGVyID0gZ2V0Vk1Qcm92aWRlcih1cGRhdGVzWzBdLmdldFBy
ZXNlbnRhdGlvbkNvbnRleHQoKSk7Ci0gICAgICAgIGlmIChwcm92aWRlciAhPSBudWxsKSB7Ci0g
ICAgICAgICAgICB1cGRhdGVQcm92aWRlcihwcm92aWRlciwgdXBkYXRlcyk7Ci0gICAgICAgIH0g
ZWxzZSB7Ci0gICAgICAgICAgICBmb3IgKElWaWV3ZXJVcGRhdGUgdXBkYXRlIDogdXBkYXRlcykg
ewotICAgICAgICAgICAgICAgIHVwZGF0ZS5zZXRTdGF0dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVS
Uk9SLCBEc2ZVSVBsdWdpbi5QTFVHSU5fSUQsIElEc2ZTdGF0dXNDb25zdGFudHMuSU5URVJOQUxf
RVJST1IsIAotICAgICAgICAgICAgICAgICAgICAiTm8gbW9kZWwgcHJvdmlkZXIgZm9yIHVwZGF0
ZSAiICsgdXBkYXRlLCBudWxsKSk7IC8vJE5PTi1OTFMtMSQKLSAgICAgICAgICAgIH0KLSAgICAg
ICAgfQorICAgIAloYW5kbGVVcGRhdGUodXBkYXRlcyk7CiAgICAgfQogICAgIAogICAgIHB1Ymxp
YyB2b2lkIHVwZGF0ZShJQ2hpbGRyZW5Db3VudFVwZGF0ZVtdIHVwZGF0ZXMpIHsKLSAgICAgICAg
SVZNUHJvdmlkZXIgcHJvdmlkZXIgPSBnZXRWTVByb3ZpZGVyKHVwZGF0ZXNbMF0uZ2V0UHJlc2Vu
dGF0aW9uQ29udGV4dCgpKTsKLSAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwpIHsKLSAgICAg
ICAgICAgIHVwZGF0ZVByb3ZpZGVyKHByb3ZpZGVyLCB1cGRhdGVzKTsKLSAgICAgICAgfSBlbHNl
IHsKLSAgICAgICAgICAgIGZvciAoSVZpZXdlclVwZGF0ZSB1cGRhdGUgOiB1cGRhdGVzKSB7Ci0g
ICAgICAgICAgICAgICAgdXBkYXRlLnNldFN0YXR1cyhuZXcgU3RhdHVzKElTdGF0dXMuRVJST1Is
IERzZlVJUGx1Z2luLlBMVUdJTl9JRCwgSURzZlN0YXR1c0NvbnN0YW50cy5JTlRFUk5BTF9FUlJP
UiwgCi0gICAgICAgICAgICAgICAgICAgICJObyBtb2RlbCBwcm92aWRlciBmb3IgdXBkYXRlICIg
KyB1cGRhdGUsIG51bGwpKTsgLy8kTk9OLU5MUy0xJAotICAgICAgICAgICAgfQotICAgICAgICB9
CisgICAgCWhhbmRsZVVwZGF0ZSh1cGRhdGVzKTsKICAgICB9CiAgICAgCiAgICAgcHVibGljIHZv
aWQgdXBkYXRlKGZpbmFsIElDaGlsZHJlblVwZGF0ZVtdIHVwZGF0ZXMpIHsKKyAgICAJaGFuZGxl
VXBkYXRlKHVwZGF0ZXMpOworICAgIH0KKyAgICAKKyAgICBwcml2YXRlIHZvaWQgaGFuZGxlVXBk
YXRlKElWaWV3ZXJVcGRhdGVbXSB1cGRhdGVzKSB7CisgICAgCXVwZGF0ZXMgPSB3cmFwVXBkYXRl
cyh1cGRhdGVzKTsKICAgICAgICAgSVZNUHJvdmlkZXIgcHJvdmlkZXIgPSBnZXRWTVByb3ZpZGVy
KHVwZGF0ZXNbMF0uZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpKTsKICAgICAgICAgaWYgKHByb3Zp
ZGVyICE9IG51bGwpIHsKICAgICAgICAgICAgIHVwZGF0ZVByb3ZpZGVyKHByb3ZpZGVyLCB1cGRh
dGVzKTsKQEAgLTEyMywxMCArMjY4LDExIEBACiAgICAgICAgICAgICBmb3IgKElWaWV3ZXJVcGRh
dGUgdXBkYXRlIDogdXBkYXRlcykgewogICAgICAgICAgICAgICAgIHVwZGF0ZS5zZXRTdGF0dXMo
bmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBEc2ZVSVBsdWdpbi5QTFVHSU5fSUQsIElEc2ZTdGF0
dXNDb25zdGFudHMuSU5URVJOQUxfRVJST1IsIAogICAgICAgICAgICAgICAgICAgICAiTm8gbW9k
ZWwgcHJvdmlkZXIgZm9yIHVwZGF0ZSAiICsgdXBkYXRlLCBudWxsKSk7IC8vJE5PTi1OTFMtMSQK
KyAgICAgICAgICAgICAgICB1cGRhdGUuZG9uZSgpOwogICAgICAgICAgICAgfQogICAgICAgICB9
CiAgICAgfQotICAgICAgICAgICAgCisKICAgICBwcml2YXRlIHZvaWQgdXBkYXRlUHJvdmlkZXIo
ZmluYWwgSVZNUHJvdmlkZXIgcHJvdmlkZXIsIGZpbmFsIElWaWV3ZXJVcGRhdGVbXSB1cGRhdGVz
KSB7CiAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICBwcm92aWRlci5nZXRFeGVjdXRvcigpLmV4
ZWN1dGUobmV3IFJ1bm5hYmxlKCkgewpAQCAtMTg3LDQgKzMzMywxMTMgQEAKICAgICAgKi8KICAg
ICBAVGhyZWFkU2FmZSAgICAKICAgICBhYnN0cmFjdCBwcm90ZWN0ZWQgSVZNUHJvdmlkZXIgY3Jl
YXRlVmlld01vZGVsUHJvdmlkZXIoSVByZXNlbnRhdGlvbkNvbnRleHQgY29udGV4dCk7CisKKwkv
KioKKwkgKiBEaXNwYXRjaCBnaXZlbiBldmVudCB0byBWTSBwcm92aWRlcnMgaW50ZXJlc3RlZCBp
biBldmVudHMuCisJICogCisJICogQHNpbmNlIDEuMQorCSAqLworCXByb3RlY3RlZCBmaW5hbCB2
b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCkgeworICAgIAlmaW5hbCBMaXN0PElW
TUV2ZW50TGlzdGVuZXI+IGV2ZW50TGlzdGVuZXJzID0gbmV3IEFycmF5TGlzdDxJVk1FdmVudExp
c3RlbmVyPigpOworCisgICAgCWFib3V0VG9IYW5kbGVFdmVudChldmVudCk7CisgICAgCQorCQlm
b3IgKElWTVByb3ZpZGVyIHZtUHJvdmlkZXIgOiBnZXRWTVByb3ZpZGVySXRlcmFibGUoKSkgewor
CQkJaWYgKHZtUHJvdmlkZXIgaW5zdGFuY2VvZiBJVk1FdmVudExpc3RlbmVyKSB7CisJCQkJZXZl
bnRMaXN0ZW5lcnMuYWRkKChJVk1FdmVudExpc3RlbmVyKXZtUHJvdmlkZXIpOworCQkJfQorCQl9
CisJCisJCWlmICghZXZlbnRMaXN0ZW5lcnMuaXNFbXB0eSgpKSB7CisJCQlzeW5jaHJvbml6ZWQg
KGZQZW5kaW5nVXBkYXRlcykgeworCQkJCWZQZW5kaW5nVXBkYXRlcy5jbGVhcigpOworCQkJfQor
CQkJLy8gVE9ETyB3aGljaCBleGVjdXRvciB0byB1c2U/CisJCQlmaW5hbCBFeGVjdXRvciBleGVj
dXRvcj0gZXZlbnRMaXN0ZW5lcnMuZ2V0KDApLmdldEV4ZWN1dG9yKCk7CisJCQlmaW5hbCBDb3Vu
dGluZ1JlcXVlc3RNb25pdG9yIGNybSA9IG5ldyBDb3VudGluZ1JlcXVlc3RNb25pdG9yKGV4ZWN1
dG9yLCBudWxsKSB7CisJCQkJQE92ZXJyaWRlCisJCQkJcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29t
cGxldGVkKCkgeworCQkJCQlpZiAoaXNEaXNwb3NlZCgpKSB7CisJCQkJCQlyZXR1cm47CisJCQkJ
CX0KKwkJCQkJLy8gVGhlIGV2ZW50IGxpc3RlbmVycyBoYXZlIGNvbXBsZXRlZCBwcm9jZXNzaW5n
IHRoZSBldmVudC4KKwkJCQkJLy8gTm93IG1vbml0b3IgY29tcGxldGlvbiBvZiB2aWV3ZXIgdXBk
YXRlcyBpc3N1ZWQgd2hpbGUgZGlzcGF0Y2hpbmcgdGhlIGV2ZW50CisJCQkJCWZpbmFsIENvdW50
aW5nUmVxdWVzdE1vbml0b3IgdXBkYXRlc01vbml0b3IgPSBuZXcgQ291bnRpbmdSZXF1ZXN0TW9u
aXRvcihleGVjdXRvciwgbnVsbCkgeworCQkJCQkJQE92ZXJyaWRlCisJCQkJCQlwcm90ZWN0ZWQg
dm9pZCBoYW5kbGVDb21wbGV0ZWQoKSB7CisJCQkJCQkJaWYgKGlzRGlzcG9zZWQoKSkgeworCQkJ
CQkJCQlyZXR1cm47CisJCQkJCQkJfQorCQkJCQkJCWRvbmVIYW5kbGVFdmVudChldmVudCk7CisJ
CQkJCQl9CisJCQkJCX07CisJCQkJCXN5bmNocm9uaXplZCAoZlBlbmRpbmdVcGRhdGVzKSB7CisJ
CQkJCQlpbnQgcGVuZGluZyA9IGZQZW5kaW5nVXBkYXRlcy5zaXplKCk7CisJCQkJCQl1cGRhdGVz
TW9uaXRvci5zZXREb25lQ291bnQocGVuZGluZyk7CisJCQkJCQlmb3IgKElNb25pdG9yZWRVcGRh
dGUgdXBkYXRlIDogZlBlbmRpbmdVcGRhdGVzKSB7CisJCQkJCQkJdXBkYXRlLnNldE1vbml0b3Io
dXBkYXRlc01vbml0b3IpOworCQkJCQkJfQorCQkJCQkJZlBlbmRpbmdVcGRhdGVzLmNsZWFyKCk7
CisJCQkJCX0KKwkJCQl9CisJCQl9OworCQkJY3JtLnNldERvbmVDb3VudChldmVudExpc3RlbmVy
cy5zaXplKCkpOworCSAgICAgICAgCisJCQlmb3IgKGZpbmFsIElWTUV2ZW50TGlzdGVuZXIgdm1F
dmVudExpc3RlbmVyIDogZXZlbnRMaXN0ZW5lcnMpIHsKKwkJCQl2bUV2ZW50TGlzdGVuZXIuZ2V0
RXhlY3V0b3IoKS5leGVjdXRlKG5ldyBEc2ZSdW5uYWJsZSgpIHsKKwkJCQkJcHVibGljIHZvaWQg
cnVuKCkgeworCQkJCQkJdm1FdmVudExpc3RlbmVyLmhhbmRsZUV2ZW50KGV2ZW50LCBjcm0pOwor
CQkJCQl9fSk7CisJCQl9CisJCX0KKwl9CisKKwlwcml2YXRlIElWaWV3ZXJVcGRhdGVbXSB3cmFw
VXBkYXRlcyhJVmlld2VyVXBkYXRlW10gdXBkYXRlcykgeworCQlpZiAodXBkYXRlcy5sZW5ndGgg
PT0gMCkgeworCQkJcmV0dXJuIHVwZGF0ZXM7CisJCX0KKwkJaW50IGkgPSAwOworCQlzeW5jaHJv
bml6ZWQgKGZQZW5kaW5nVXBkYXRlcykgeworCQkJZm9yIChJVmlld2VyVXBkYXRlIHVwZGF0ZSA6
IHVwZGF0ZXMpIHsKKwkJCQlJTW9uaXRvcmVkVXBkYXRlIHdyYXA9IGNyZWF0ZU1vbml0b3JlZFVw
ZGF0ZSh1cGRhdGUpOworCQkJCXVwZGF0ZXNbaSsrXSA9IHdyYXA7CisJCQkJZlBlbmRpbmdVcGRh
dGVzLmFkZCh3cmFwKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4gdXBkYXRlczsKKwl9CisKKwlwcml2
YXRlIElNb25pdG9yZWRVcGRhdGUgY3JlYXRlTW9uaXRvcmVkVXBkYXRlKElWaWV3ZXJVcGRhdGUg
dXBkYXRlKSB7CisJCWlmICh1cGRhdGUgaW5zdGFuY2VvZiBJQ2hpbGRyZW5Db3VudFVwZGF0ZSkg
eworCQkJcmV0dXJuIG5ldyBNb25pdG9yZWRDaGlsZHJlbkNvdW50VXBkYXRlKCgoSUNoaWxkcmVu
Q291bnRVcGRhdGUpdXBkYXRlKSk7CisJCX0gZWxzZSBpZiAodXBkYXRlIGluc3RhbmNlb2YgSUhh
c0NoaWxkcmVuVXBkYXRlKSB7CisJCQlyZXR1cm4gbmV3IE1vbml0b3JlZEhhc0NoaWxkcmVuVXBk
YXRlKCgoSUhhc0NoaWxkcmVuVXBkYXRlKXVwZGF0ZSkpOworCQl9IGVsc2UgaWYgKHVwZGF0ZSBp
bnN0YW5jZW9mIElDaGlsZHJlblVwZGF0ZSkgeworCQkJcmV0dXJuIG5ldyBNb25pdG9yZWRDaGls
ZHJlblVwZGF0ZSgoKElDaGlsZHJlblVwZGF0ZSl1cGRhdGUpKTsKKwkJfQorCQlyZXR1cm4gbnVs
bDsKKwl9CisKKyAgICAvKioKKyAgICAgKiBHaXZlbiBldmVudCBpcyBhYm91dCB0byBiZSBoYW5k
bGVkLgorICAgICAqIAorICAgICAqIEBwYXJhbSBldmVudAorICAgICAqIAorICAgICAqIEBzaW5j
ZSAxLjEKKyAgICAgKi8KKyAgICBwdWJsaWMgdm9pZCBhYm91dFRvSGFuZGxlRXZlbnQoZmluYWwg
T2JqZWN0IGV2ZW50KSB7CisgICAgfQorCisgICAgLyoqCisgICAgICogR2l2ZW4gZXZlbnQgaGFz
IGJlZW4gcHJvY2Vzc2VkIGJ5IGFsbCBWTSBldmVudCBsaXN0ZW5lcnMuCisgICAgICogCisgICAg
ICogQHBhcmFtIGV2ZW50CisgICAgICogCisgICAgICogQHNpbmNlIDEuMQorICAgICAqLworICAg
IC8qKgorICAgICAqIHtAaW5oZXJpdERvY30KKyAgICAgKi8KKyAgICBwdWJsaWMgdm9pZCBkb25l
SGFuZGxlRXZlbnQoZmluYWwgT2JqZWN0IGV2ZW50KSB7CisgICAgfQogfQpJbmRleDogc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvVk1EZWx0YS5qYXZhCj09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNT
IGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlw
c2UuZGQuZHNmLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL1ZNRGVsdGEu
amF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS45CmRpZmYgLXUgLXIxLjkgVk1EZWx0YS5qYXZh
Ci0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9WTURlbHRhLmphdmEJMTcg
SnVuIDIwMDggMjA6NDY6MjYgLTAwMDAJMS45CisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3Vp
L3ZpZXdtb2RlbC9WTURlbHRhLmphdmEJMTUgSnVsIDIwMDggMjM6MTU6MDAgLTAwMDAKQEAgLTIw
MCw2ICsyMDAsOCBAQAogCSAqIAogCSAqIEBwYXJhbSBlbGVtZW50IGNoaWxkIGVsZW1lbnQKIAkg
KiBAcmV0dXJuIGNvcnJlc3BvbmRpbmcgZGVsdGEgbm9kZSwgb3IgPGNvZGU+bnVsbDwvY29kZT4K
KwkgKiAKKwkgKiBAc2luY2UgMS4xCiAJICovCiAJQE92ZXJyaWRlCiAJcHVibGljIFZNRGVsdGEg
Z2V0Q2hpbGREZWx0YShPYmplY3QgZWxlbWVudCkgewpJbmRleDogc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RWTVByb3ZpZGVyLmphdmEKPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1Mg
ZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBz
ZS5kZC5kc2YudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi91aS92aWV3bW9kZWwvQWJzdHJhY3RW
TVByb3ZpZGVyLmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMjUKZGlmZiAtdSAtcjEuMjUg
QWJzdHJhY3RWTVByb3ZpZGVyLmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmll
d21vZGVsL0Fic3RyYWN0Vk1Qcm92aWRlci5qYXZhCTI0IEp1biAyMDA4IDE4OjEzOjEzIC0wMDAw
CTEuMjUKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvdWkvdmlld21vZGVsL0Fic3RyYWN0Vk1Q
cm92aWRlci5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1OjAwIC0wMDAwCkBAIC0yMCw2ICsyMCw3IEBA
CiBpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3I7CiBpbXBvcnQgamF2YS51dGls
LmNvbmN1cnJlbnQuUmVqZWN0ZWRFeGVjdXRpb25FeGNlcHRpb247CiAKK2ltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuY29uY3VycmVudC5Db3VudGluZ1JlcXVlc3RNb25pdG9yOwogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRhdGFSZXF1ZXN0TW9uaXRvcjsKIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5JRHNmU3RhdHVzQ29uc3RhbnRzOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOwpAQCAtNjAsNyAr
NjEsNyBAQAogICogQHNlZSBJVk1Ob2RlCiAgKi8KIEBTdXBwcmVzc1dhcm5pbmdzKCJyZXN0cmlj
dGlvbiIpCi1hYnN0cmFjdCBwdWJsaWMgY2xhc3MgQWJzdHJhY3RWTVByb3ZpZGVyIGltcGxlbWVu
dHMgSVZNUHJvdmlkZXIKK2Fic3RyYWN0IHB1YmxpYyBjbGFzcyBBYnN0cmFjdFZNUHJvdmlkZXIg
aW1wbGVtZW50cyBJVk1Qcm92aWRlciwgSVZNRXZlbnRMaXN0ZW5lcgogewogICAgIAogICAgIC8q
KiBSZWZlcmVuY2UgdG8gdGhlIFZNIGFkYXB0ZXIgdGhhdCBvd25zIHRoaXMgcHJvdmlkZXIgKi8K
QEAgLTIwNCw4ICsyMDUsMjAgQEAKICAgICAgKiBQcm9jZXNzZXMgdGhlIGdpdmVuIGV2ZW50IGlu
IHRoZSBnaXZlbiBwcm92aWRlciwgc2VuZGluZyBtb2RlbCAKICAgICAgKiBkZWx0YXMgaWYgbmVj
ZXNzYXJ5LgogICAgICAqLwotICAgIHB1YmxpYyB2b2lkIGhhbmRsZUV2ZW50KGZpbmFsIE9iamVj
dCBldmVudCkgewotICAgICAgICBmb3IgKGZpbmFsIElWTU1vZGVsUHJveHkgcHJveHlTdHJhdGVn
eSA6IGdldEFjdGl2ZU1vZGVsUHJveGllcygpKSB7CisJcHVibGljIHZvaWQgaGFuZGxlRXZlbnQo
ZmluYWwgT2JqZWN0IGV2ZW50KSB7CisgICAgCWhhbmRsZUV2ZW50KGV2ZW50LCBudWxsKTsKKyAg
ICB9CisJCisgICAgLyoqCisgICAgICoge0Bpbmhlcml0RG9jfQorCSAqIEBzaW5jZSAxLjEKKwkg
Ki8KKyAgICBwdWJsaWMgdm9pZCBoYW5kbGVFdmVudChmaW5hbCBPYmplY3QgZXZlbnQsIFJlcXVl
c3RNb25pdG9yIHJtKSB7CisgICAgCUNvdW50aW5nUmVxdWVzdE1vbml0b3IgY3JtID0gbmV3IENv
dW50aW5nUmVxdWVzdE1vbml0b3IoZ2V0RXhlY3V0b3IoKSwgcm0pOworICAgICAgICBmaW5hbCBM
aXN0PElWTU1vZGVsUHJveHk+IGFjdGl2ZU1vZGVsUHJveGllcz0gbmV3IEFycmF5TGlzdDxJVk1N
b2RlbFByb3h5PihnZXRBY3RpdmVNb2RlbFByb3hpZXMoKSk7CisgICAgCWNybS5zZXREb25lQ291
bnQoYWN0aXZlTW9kZWxQcm94aWVzLnNpemUoKSk7CisKKyAgICAJZm9yIChmaW5hbCBJVk1Nb2Rl
bFByb3h5IHByb3h5U3RyYXRlZ3kgOiBhY3RpdmVNb2RlbFByb3hpZXMpIHsKICAgICAgICAgICAg
IGlmIChwcm94eVN0cmF0ZWd5LmlzRGVsdGFFdmVudChldmVudCkpIHsKICAgICAgICAgICAgICAg
ICBpZiAoIWZFdmVudFF1ZXVlcy5jb250YWluc0tleShwcm94eVN0cmF0ZWd5KSkgewogICAgICAg
ICAgICAgICAgICAgICBmRXZlbnRRdWV1ZXMucHV0KHByb3h5U3RyYXRlZ3ksIG5ldyBNb2RlbFBy
b3h5RXZlbnRRdWV1ZSgpKTsKQEAgLTIyMiwxMyArMjM1LDE2IEBACiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg
ICAgICB9CisgICAgICAgICAgICAgICAgICAgIGNybS5kb25lKCk7CiAgICAgICAgICAgICAgICAg
ICAgIHF1ZXVlLmZFdmVudFF1ZXVlLmFkZChldmVudCk7CiAgICAgICAgICAgICAgICAgfSBlbHNl
IHsKLSAgICAgICAgICAgICAgICAgICAgZG9IYW5kbGVFdmVudChxdWV1ZSwgcHJveHlTdHJhdGVn
eSwgZXZlbnQpOyAKKyAgICAgICAgICAgICAgICAgICAgZG9IYW5kbGVFdmVudChxdWV1ZSwgcHJv
eHlTdHJhdGVneSwgZXZlbnQsIGNybSk7CiAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAg
fSBlbHNlIHsKKyAgICAgICAgICAgIAljcm0uZG9uZSgpOwogICAgICAgICAgICAgfQogICAgICAg
ICB9Ci0gICAgICAgIAorCiAgICAgICAgIC8vIENsZWFuIHVwIG1vZGVsIHByb3hpZXMgdGhhdCB3
ZXJlIHJlbW92ZWQuCiAgICAgICAgIExpc3Q8SVZNTW9kZWxQcm94eT4gYWN0aXZlUHJveGllcyA9
IGdldEFjdGl2ZU1vZGVsUHJveGllcygpOwogICAgICAgICBmb3IgKEl0ZXJhdG9yPElWTU1vZGVs
UHJveHk+IGl0ciA9IGZFdmVudFF1ZXVlcy5rZXlTZXQoKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4
dCgpOykgewpAQCAtMjM3LDggKzI1Myw4IEBACiAgICAgICAgICAgICB9CiAgICAgICAgIH0KICAg
ICB9Ci0gICAgIAotICAgIHByaXZhdGUgdm9pZCBkb0hhbmRsZUV2ZW50KGZpbmFsIE1vZGVsUHJv
eHlFdmVudFF1ZXVlIHF1ZXVlLCBmaW5hbCBJVk1Nb2RlbFByb3h5IHByb3h5U3RyYXRlZ3ksIGZp
bmFsIE9iamVjdCBldmVudCkgeworCisgICAgcHJpdmF0ZSB2b2lkIGRvSGFuZGxlRXZlbnQoZmlu
YWwgTW9kZWxQcm94eUV2ZW50UXVldWUgcXVldWUsIGZpbmFsIElWTU1vZGVsUHJveHkgcHJveHlT
dHJhdGVneSwgZmluYWwgT2JqZWN0IGV2ZW50LCBmaW5hbCBSZXF1ZXN0TW9uaXRvciBybSkgewog
ICAgICAgICBxdWV1ZS5mUHJvY2Vzc2luZ0V2ZW50ID0gdHJ1ZTsKICAgICAgICAgaGFuZGxlRXZl
bnQoCiAgICAgICAgICAgICBwcm94eVN0cmF0ZWd5LCBldmVudCwgCkBAIC0yNDcsOCArMjYzLDEw
IEBACiAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxldGVkKCkgewog
ICAgICAgICAgICAgICAgICAgICBxdWV1ZS5mUHJvY2Vzc2luZ0V2ZW50ID0gZmFsc2U7CiAgICAg
ICAgICAgICAgICAgICAgIGlmICghcXVldWUuZkV2ZW50UXVldWUuaXNFbXB0eSgpKSB7Ci0gICAg
ICAgICAgICAgICAgICAgICAgICBkb0hhbmRsZUV2ZW50KHF1ZXVlLCBwcm94eVN0cmF0ZWd5LCBx
dWV1ZS5mRXZlbnRRdWV1ZS5yZW1vdmUoMCkpOwotICAgICAgICAgICAgICAgICAgICB9ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCisgICAgICAgICAgICAgICAgICAgICAgICBk
b0hhbmRsZUV2ZW50KHF1ZXVlLCBwcm94eVN0cmF0ZWd5LCBxdWV1ZS5mRXZlbnRRdWV1ZS5yZW1v
dmUoMCksIHJtKTsKKyAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICAgICAg
ICAgICAgCXJtLmRvbmUoKTsKKyAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg
IH0KICAgICAgICAgICAgIH0pOwogICAgIH0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
dWkvdmlld21vZGVsL0lWTUV2ZW50TGlzdGVuZXIuamF2YQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9JVk1FdmVudExpc3RlbmVyLmphdmEK
ZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9JVk1FdmVudExpc3Rl
bmVyLmphdmEKLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwCisrKyBzcmMv
b3JnL2VjbGlwc2UvZGQvZHNmL3VpL3ZpZXdtb2RlbC9JVk1FdmVudExpc3RlbmVyLmphdmEJMSBK
YW4gMTk3MCAwMDowMDowMCAtMDAwMApAQCAtMCwwICsxLDMzIEBACisvKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKgorICogQ29weXJpZ2h0IChjKSAyMDA4IFdpbmQgUml2ZXIgU3lzdGVtcywgSW5jLiBh
bmQgb3RoZXJzLgorICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUg
YWNjb21wYW55aW5nIG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBh
bmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3
dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgKiBDb250cmlidXRvcnM6Cisg
KiAgICAgV2luZCBSaXZlciBTeXN0ZW1zIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9u
CisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKi8KK3BhY2thZ2Ugb3JnLmVjbGlwc2UuZGQuZHNmLnVp
LnZpZXdtb2RlbDsKKworaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yOworCitp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuUmVxdWVzdE1vbml0b3I7CisKKy8q
KgorICogQSBsaXN0ZW5lciBwYXJ0aWNpcGF0aW5nIGluIGV2ZW50IG5vdGlmaWNhdGlvbnMgc2Vu
dCBvdXQgZnJvbSBWTSBhZGFwdGVyLgorICogCisgKiBAc2luY2UgMS4xCisgKi8KK3B1YmxpYyBp
bnRlcmZhY2UgSVZNRXZlbnRMaXN0ZW5lciB7CisKKyAgICAvKioKKyAgICAgKiBSZXR1cm5zIHRo
ZSBleGVjdXRvciB0aGF0IG5lZWRzIHRvIGJlIHVzZWQgdG8gYWNjZXNzIHRoaXMgZXZlbnQgbGlz
dGVuZXIuIAorICAgICAqLworICAgIHB1YmxpYyBFeGVjdXRvciBnZXRFeGVjdXRvcigpOworICAg
IAorCS8qKgorCSAqIFByb2Nlc3MgdGhlIGdpdmVuIGV2ZW50IGFuZCBpbmRpY2F0ZSBjb21wbGV0
aW9uIHdpdGggcmVxdWVzdCBtb25pdG9yLgorCSAqLworCXB1YmxpYyBhYnN0cmFjdCB2b2lkIGhh
bmRsZUV2ZW50KGZpbmFsIE9iamVjdCBldmVudCwgUmVxdWVzdE1vbml0b3Igcm0pOworfQojUCBv
cmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9leGFt
cGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzSW5pdFNlcXVlbmNlLmphdmEKPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNs
aXBzZS5kZC5leGFtcGxlcy5wZGEvc3JjL29yZy9lY2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9sYXVu
Y2gvUERBU2VydmljZXNJbml0U2VxdWVuY2UuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS44
CmRpZmYgLXUgLXIxLjggUERBU2VydmljZXNJbml0U2VxdWVuY2UuamF2YQotLS0gc3JjL29yZy9l
Y2xpcHNlL2RkL2V4YW1wbGVzL3BkYS9sYXVuY2gvUERBU2VydmljZXNJbml0U2VxdWVuY2UuamF2
YQkxNiBKdW4gMjAwOCAxODozMDo1MiAtMDAwMAkxLjgKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9l
eGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzSW5pdFNlcXVlbmNlLmphdmEJMTUgSnVsIDIw
MDggMjM6MTU6MDIgLTAwMDAKQEAgLTEzLDcgKzEzLDYgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuY29uY3VycmVudC5SZXF1ZXN0TW9uaXRvcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuY29uY3VycmVudC5TZXF1ZW5jZTsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcu
c2VydmljZS5CcmVha3BvaW50c01lZGlhdG9yOwotaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
ZWJ1Zy5zZXJ2aWNlLlN0ZXBRdWV1ZU1hbmFnZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LnNlcnZpY2UuRHNmU2Vzc2lvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEu
c2VydmljZS5QREFCcmVha3BvaW50QXR0cmlidXRlVHJhbnNsYXRvcjsKIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5leGFtcGxlcy5wZGEuc2VydmljZS5QREFCcmVha3BvaW50czsKQEAgLTU2LDEzICs1
NSw2IEBACiAgICAgICAgIH0sCiAgICAgICAgIG5ldyBTdGVwKCkgeyAKICAgICAgICAgICAgIEBP
dmVycmlkZQotICAgICAgICAgICAgcHVibGljIHZvaWQgZXhlY3V0ZShSZXF1ZXN0TW9uaXRvciBy
ZXF1ZXN0TW9uaXRvcikgewotICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBzZXJ2aWNlIHRv
IG1hbmFnZSBzdGVwIGFjdGlvbnMuCi0gICAgICAgICAgICAgICAgbmV3IFN0ZXBRdWV1ZU1hbmFn
ZXIoZlNlc3Npb24pLmluaXRpYWxpemUocmVxdWVzdE1vbml0b3IpOwotICAgICAgICAgICAgfQot
ICAgICAgICB9LAotICAgICAgICBuZXcgU3RlcCgpIHsgCi0gICAgICAgICAgICBAT3ZlcnJpZGUK
ICAgICAgICAgICAgIHB1YmxpYyB2b2lkIGV4ZWN1dGUoZmluYWwgUmVxdWVzdE1vbml0b3IgcmVx
dWVzdE1vbml0b3IpIHsKICAgICAgICAgICAgICAgICAvLyBTdGFydCB0aGUgbG93LWxldmVsIGJy
ZWFrcG9pbnQgc2VydmljZSAKICAgICAgICAgICAgICAgICBuZXcgUERBQnJlYWtwb2ludHMoZlNl
c3Npb24pLmluaXRpYWxpemUobmV3IFJlcXVlc3RNb25pdG9yKGdldEV4ZWN1dG9yKCksIHJlcXVl
c3RNb25pdG9yKSk7CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5j
aC9QREFTZXJ2aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAv
Y3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmV4
YW1wbGVzLnBkYS9zcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL2xhdW5jaC9QREFTZXJ2
aWNlc1NodXRkb3duU2VxdWVuY2UuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS44CmRpZmYg
LXUgLXIxLjggUERBU2VydmljZXNTaHV0ZG93blNlcXVlbmNlLmphdmEKLS0tIHNyYy9vcmcvZWNs
aXBzZS9kZC9leGFtcGxlcy9wZGEvbGF1bmNoL1BEQVNlcnZpY2VzU2h1dGRvd25TZXF1ZW5jZS5q
YXZhCTI1IEFwciAyMDA4IDE4OjAxOjE3IC0wMDAwCTEuOAorKysgc3JjL29yZy9lY2xpcHNlL2Rk
L2V4YW1wbGVzL3BkYS9sYXVuY2gvUERBU2VydmljZXNTaHV0ZG93blNlcXVlbmNlLmphdmEJMTUg
SnVsIDIwMDggMjM6MTU6MDIgLTAwMDAKQEAgLTE3LDcgKzE3LDYgQEAKIGltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuY29uY3VycmVudC5SZXF1ZXN0TW9uaXRvcjsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuY29uY3VycmVudC5TZXF1ZW5jZTsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
ZGVidWcuc2VydmljZS5CcmVha3BvaW50c01lZGlhdG9yOwotaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLlN0ZXBRdWV1ZU1hbmFnZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZXNUcmFja2VyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5zZXJ2aWNlLklEc2ZTZXJ2aWNlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmV4YW1wbGVz
LnBkYS5QREFQbHVnaW47CkBAIC04OSwxMiArODgsNiBAQAogICAgICAgICBuZXcgU3RlcCgpIHsK
ICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgcHVibGljIHZvaWQgZXhlY3V0ZShS
ZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgewotICAgICAgICAgICAgICAgIHNodXRkb3du
U2VydmljZShTdGVwUXVldWVNYW5hZ2VyLmNsYXNzLCByZXF1ZXN0TW9uaXRvcik7Ci0gICAgICAg
ICAgICB9Ci0gICAgICAgIH0sCi0gICAgICAgIG5ldyBTdGVwKCkgewotICAgICAgICAgICAgQE92
ZXJyaWRlCi0gICAgICAgICAgICBwdWJsaWMgdm9pZCBleGVjdXRlKFJlcXVlc3RNb25pdG9yIHJl
cXVlc3RNb25pdG9yKSB7CiAgICAgICAgICAgICAgICAgc2h1dGRvd25TZXJ2aWNlKFBEQVJ1bkNv
bnRyb2wuY2xhc3MsIHJlcXVlc3RNb25pdG9yKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfSwK
I1Agb3JnLmVjbGlwc2UuZGQuZXhhbXBsZXMucGRhLnVpCkluZGV4OiBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZXhhbXBsZXMvcGRhL3VpL3ZpZXdtb2RlbC9QREFWTUFkYXB0ZXIuamF2YQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
ClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5l
Y2xpcHNlLmRkLmV4YW1wbGVzLnBkYS51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRh
L3VpL3ZpZXdtb2RlbC9QREFWTUFkYXB0ZXIuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS42
CmRpZmYgLXUgLXIxLjYgUERBVk1BZGFwdGVyLmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9l
eGFtcGxlcy9wZGEvdWkvdmlld21vZGVsL1BEQVZNQWRhcHRlci5qYXZhCTIgSnVuIDIwMDggMTg6
MDM6MTAgLTAwMDAJMS42CisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL3VpL3Zp
ZXdtb2RlbC9QREFWTUFkYXB0ZXIuamF2YQkxNSBKdWwgMjAwOCAyMzoxNTowMyAtMDAwMApAQCAt
MTEsMTEgKzExLDEyIEBACiBwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmV4YW1wbGVzLnBkYS51aS52
aWV3bW9kZWw7CiAKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRT
YWZlOworaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25h
bC51aS52aWV3bW9kZWwuQWJzdHJhY3REZWJ1Z1ZNQWRhcHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlzaW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5n
Q29udHJvbGxlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJv
dmlzaW9uYWwudWkudmlld21vZGVsLmV4cHJlc3Npb24uRXhwcmVzc2lvblZNUHJvdmlkZXI7CiBp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZp
ZXdtb2RlbC5yZWdpc3Rlci5SZWdpc3RlclZNUHJvdmlkZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC52YXJpYWJsZS5W
YXJpYWJsZVZNUHJvdmlkZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNm
U2Vzc2lvbjsKLWltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLmRhdGFtb2Rl
bC5BYnN0cmFjdERNVk1BZGFwdGVyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3
bW9kZWwuZGF0YW1vZGVsLkFic3RyYWN0RE1WTVByb3ZpZGVyOwogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmV4YW1wbGVzLnBkYS51aS52aWV3bW9kZWwubGF1bmNoLlBEQUxhdW5jaFZNUHJvdmlkZXI7
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcuaW50ZXJuYWwudWkudmlld2Vycy5tb2RlbC5wcm92
aXNpb25hbC5JQ29sdW1uUHJlc2VudGF0aW9uRmFjdG9yeTsKQEAgLTI0LDEwICsyNSwxMCBAQAog
CiBAVGhyZWFkU2FmZQogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikKLXB1YmxpYyBj
bGFzcyBQREFWTUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdERNVk1BZGFwdGVyCitwdWJsaWMgY2xh
c3MgUERBVk1BZGFwdGVyIGV4dGVuZHMgQWJzdHJhY3REZWJ1Z1ZNQWRhcHRlcgogewotICAgIHB1
YmxpYyBQREFWTUFkYXB0ZXIoRHNmU2Vzc2lvbiBzZXNzaW9uKSB7Ci0gICAgICAgIHN1cGVyKHNl
c3Npb24pOworICAgIHB1YmxpYyBQREFWTUFkYXB0ZXIoRHNmU2Vzc2lvbiBzZXNzaW9uLCBTdGVw
cGluZ0NvbnRyb2xsZXIgY29udHJvbGxlcikgeworICAgICAgICBzdXBlcihzZXNzaW9uLCBjb250
cm9sbGVyKTsKICAgICAgICAgZ2V0U2Vzc2lvbigpLnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElDb2x1
bW5QcmVzZW50YXRpb25GYWN0b3J5LmNsYXNzLCB0aGlzKTsKICAgICB9ICAgIAogCkluZGV4OiBz
cmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRhL3VpL1BEQUFkYXB0ZXJGYWN0b3J5LmphdmEK
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1
Z2lucy9vcmcuZWNsaXBzZS5kZC5leGFtcGxlcy5wZGEudWkvc3JjL29yZy9lY2xpcHNlL2RkL2V4
YW1wbGVzL3BkYS91aS9QREFBZGFwdGVyRmFjdG9yeS5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lv
biAxLjcKZGlmZiAtdSAtcjEuNyBQREFBZGFwdGVyRmFjdG9yeS5qYXZhCi0tLSBzcmMvb3JnL2Vj
bGlwc2UvZGQvZXhhbXBsZXMvcGRhL3VpL1BEQUFkYXB0ZXJGYWN0b3J5LmphdmEJMTcgSnVuIDIw
MDggMjA6NDY6MTMgLTAwMDAJMS43CisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZXhhbXBsZXMvcGRh
L3VpL1BEQUFkYXB0ZXJGYWN0b3J5LmphdmEJMTUgSnVsIDIwMDggMjM6MTU6MDMgLTAwMDAKQEAg
LTE3LDYgKzE3LDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUuSUFkYXB0ZXJG
YWN0b3J5OwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkltbXV0YWJsZTsK
IGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRTYWZlOworaW1wb3J0
IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9k
ZWwuU3RlcHBpbmdDb250cm9sbGVyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5p
bnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkRlZmF1bHREc2ZNb2RlbFNl
bGVjdGlvblBvbGljeUZhY3Rvcnk7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVp
LmFjdGlvbnMuRHNmUmVzdW1lQ29tbWFuZDsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcudWkuYWN0aW9ucy5Ec2ZTdGVwSW50b0NvbW1hbmQ7CkBAIC02Miw3ICs2Myw3IEBACiBwdWJs
aWMgY2xhc3MgUERBQWRhcHRlckZhY3RvcnkgaW1wbGVtZW50cyBJQWRhcHRlckZhY3RvcnksIElM
YXVuY2hlc0xpc3RlbmVyMgogewogICAgIC8qKgotICAgICAqIENvbnRhaW5zIHRoZSBzZXQgb2Yg
YWRhcHRlcnMgdGhhdCBhcmUgY3JlYXRlZCBmb3IgZWFjeSBsYXVuY2ggaW5zdGFuY2UuCisgICAg
ICogQ29udGFpbnMgdGhlIHNldCBvZiBhZGFwdGVycyB0aGF0IGFyZSBjcmVhdGVkIGZvciBlYWNo
IGxhdW5jaCBpbnN0YW5jZS4KICAgICAgKi8KICAgICBASW1tdXRhYmxlCiAgICAgcHJpdmF0ZSBz
dGF0aWMgY2xhc3MgTGF1bmNoQWRhcHRlclNldCB7CkBAIC04NCw2ICs4NSw4IEBACiAgICAgICAg
IGZpbmFsIElEZWJ1Z01vZGVsUHJvdmlkZXIgZkRlYnVnTW9kZWxQcm92aWRlcjsKICAgICAgICAg
ZmluYWwgUERBTGF1bmNoIGZMYXVuY2g7CiAKKwkJZmluYWwgU3RlcHBpbmdDb250cm9sbGVyIGZT
dGVwcGluZ0NvbnRyb2xsZXI7CisKIAkJcHJpdmF0ZSBJTW9kZWxTZWxlY3Rpb25Qb2xpY3lGYWN0
b3J5IGZNb2RlbFNlbGVjdGlvblBvbGljeUZhY3Rvcnk7CiAKICAgICAgICAgTGF1bmNoQWRhcHRl
clNldChQREFMYXVuY2ggbGF1bmNoKSB7CkBAIC05MSwxMSArOTQsMTUgQEAKICAgICAgICAgICAg
IGZMYXVuY2ggPSBsYXVuY2g7CiAgICAgICAgICAgICBEc2ZTZXNzaW9uIHNlc3Npb24gPSBsYXVu
Y2guZ2V0U2Vzc2lvbigpOwogICAgICAgICAgICAgCisgICAgICAgICAgICAvLyByZWdpc3RlciBz
dGVwcGluZyBjb250cm9sbGVyCisgICAgICAgICAgICBmU3RlcHBpbmdDb250cm9sbGVyID0gbmV3
IFN0ZXBwaW5nQ29udHJvbGxlcihzZXNzaW9uKTsKKyAgICAgICAgICAgIHNlc3Npb24ucmVnaXN0
ZXJNb2RlbEFkYXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzLCBmU3RlcHBpbmdDb250cm9s
bGVyKTsKKwogICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBWTQotICAgICAgICAgICAgZlZpZXdN
b2RlbEFkYXB0ZXIgPSBuZXcgUERBVk1BZGFwdGVyKHNlc3Npb24pOworICAgICAgICAgICAgZlZp
ZXdNb2RlbEFkYXB0ZXIgPSBuZXcgUERBVk1BZGFwdGVyKHNlc3Npb24sIGZTdGVwcGluZ0NvbnRy
b2xsZXIpOwogCiAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHNvdXJjZSBsb29rdXAKLSAgICAg
ICAgICAgIGZTb3VyY2VEaXNwbGF5QWRhcHRlciA9IG5ldyBEc2ZTb3VyY2VEaXNwbGF5QWRhcHRl
cihzZXNzaW9uLCAoSVNvdXJjZUxvb2t1cERpcmVjdG9yKWxhdW5jaC5nZXRTb3VyY2VMb2NhdG9y
KCkpOworICAgICAgICAgICAgZlNvdXJjZURpc3BsYXlBZGFwdGVyID0gbmV3IERzZlNvdXJjZURp
c3BsYXlBZGFwdGVyKHNlc3Npb24sIChJU291cmNlTG9va3VwRGlyZWN0b3IpbGF1bmNoLmdldFNv
dXJjZUxvY2F0b3IoKSwgZlN0ZXBwaW5nQ29udHJvbGxlcik7CiAgICAgICAgICAgICBzZXNzaW9u
LnJlZ2lzdGVyTW9kZWxBZGFwdGVyKElTb3VyY2VEaXNwbGF5LmNsYXNzLCBmU291cmNlRGlzcGxh
eUFkYXB0ZXIpOwogCiAgICAgICAgICAgICAvLyBEZWZhdWx0IHNlbGVjdGlvbiBwb2xpY3kKQEAg
LTEyOCw3ICsxMzUsNyBAQAogICAgICAgICAgICAgLy8gYW5kIGRlYnVnIG1vZGVsIElEIHdpbGwg
YmUgYXNzb2NpYXRlZCB3aXRoIGFsbCBETUNvbnRleHRzIGZyb20gdGhpcwogICAgICAgICAgICAg
Ly8gc2Vzc2lvbi4KICAgICAgICAgICAgIHNlc3Npb24ucmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSUxh
dW5jaC5jbGFzcywgZkxhdW5jaCk7Ci0gICAgICAgIH0KK30KICAgICAgICAgCiAgICAgICAgIHZv
aWQgZGlzcG9zZSgpIHsKICAgICAgICAgICAgIERzZlNlc3Npb24gc2Vzc2lvbiA9IGZMYXVuY2gu
Z2V0U2Vzc2lvbigpOwpAQCAtMTM4LDYgKzE0NSw5IEBACiAgICAgICAgICAgICBzZXNzaW9uLnVu
cmVnaXN0ZXJNb2RlbEFkYXB0ZXIoSVNvdXJjZURpc3BsYXkuY2xhc3MpOwogICAgICAgICAgICAg
aWYgKGZTb3VyY2VEaXNwbGF5QWRhcHRlciAhPSBudWxsKSBmU291cmNlRGlzcGxheUFkYXB0ZXIu
ZGlzcG9zZSgpOwogICAgICAgICAgICAgCisgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0ZXJN
b2RlbEFkYXB0ZXIoU3RlcHBpbmdDb250cm9sbGVyLmNsYXNzKTsKKyAgICAgICAgICAgIGZTdGVw
cGluZ0NvbnRyb2xsZXIuZGlzcG9zZSgpOworCiAgICAgICAgICAgICBzZXNzaW9uLnVucmVnaXN0
ZXJNb2RlbEFkYXB0ZXIoSU1vZGVsU2VsZWN0aW9uUG9saWN5RmFjdG9yeS5jbGFzcyk7CiAKICAg
ICAgICAgICAgIHNlc3Npb24udW5yZWdpc3Rlck1vZGVsQWRhcHRlcihJU3RlcEludG9IYW5kbGVy
LmNsYXNzKTsKI1Agb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpCkluZGV4OiBzcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL2RlYnVnL3VpL1ByZWZlcmVuY2VJbml0aWFsaXplci5qYXZhCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3Jn
LmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkv
UHJlZmVyZW5jZUluaXRpYWxpemVyLmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNApkaWZm
IC11IC1yMS40IFByZWZlcmVuY2VJbml0aWFsaXplci5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL2RlYnVnL3VpL1ByZWZlcmVuY2VJbml0aWFsaXplci5qYXZhCTI0IEp1biAyMDA4IDIw
OjAyOjU2IC0wMDAwCTEuNAorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9QcmVm
ZXJlbmNlSW5pdGlhbGl6ZXIuamF2YQkxNSBKdWwgMjAwOCAyMzoxNTowNyAtMDAwMApAQCAtNTgs
NSArNTgsNyBAQAogCQkgKi8KIAkJcHJlZnMuc2V0RGVmYXVsdChJRHNmRGVidWdVSUNvbnN0YW50
cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlULCAxMCk7CiAJCXByZWZzLnNldERlZmF1bHQoSURzZkRl
YnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVF9FTkFCTEUsIHRydWUpOwotfQor
CQlwcmVmcy5zZXREZWZhdWx0KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1lOQ0hST05JWkVE
X1NURVBQSU5HX0VOQUJMRSwgdHJ1ZSk7CisJCXByZWZzLnNldERlZmF1bHQoSURzZkRlYnVnVUlD
b25zdGFudHMuUFJFRl9NSU5fU1RFUF9JTlRFUlZBTCwgMCk7CisJfQogfQpJbmRleDogc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNmRGVidWdVSUNvbnN0YW50cy5qYXZhCj09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMv
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
dWkvSURzZkRlYnVnVUlDb25zdGFudHMuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS41CmRp
ZmYgLXUgLXIxLjUgSURzZkRlYnVnVUlDb25zdGFudHMuamF2YQotLS0gc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy91aS9JRHNmRGVidWdVSUNvbnN0YW50cy5qYXZhCTI0IEp1biAyMDA4IDIw
OjAyOjU2IC0wMDAwCTEuNQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9JRHNm
RGVidWdVSUNvbnN0YW50cy5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1OjA3IC0wMDAwCkBAIC0xMiw3
ICsxMiw5IEBACiAKIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy51aS5JRGVidWdVSUNvbnN0YW50
czsKIAotCisvKioKKyAqIEBub2ltcGxlbWVudCBUaGlzIGludGVyZmFjZSBpcyBub3QgaW50ZW5k
ZWQgdG8gYmUgaW1wbGVtZW50ZWQgYnkgY2xpZW50cy4KKyAqLwogcHVibGljIGludGVyZmFjZSBJ
RHNmRGVidWdVSUNvbnN0YW50cyB7CiAKIAkvKioKQEAgLTYwLDE1ICs2MiwzMyBAQAogCSAqIElu
dGVnZXIgcHJlZmVyZW5jZSB0byBjb250cm9sIHRoZSBtYXhpbXVtIGFtb3VudCBvZiBzdGFjayBm
cmFtZXMgdG8KIAkgKiByZXRyaWV2ZSBmcm9tIHRoZSBiYWNrZW5kLiBEZWZhdWx0IHZhbHVlIGlz
IDEwLgogCSAqIEBzZWUge0BsaW5rICNQUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRX0KKwkg
KiAKKwkgKiBAc2luY2UgMS4xCiAJICovCiAJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJF
Rl9TVEFDS19GUkFNRV9MSU1JVCA9ICJzdGFja0ZyYW1lTGltaXQiOyAvLyROT04tTkxTLTEkCiAJ
CiAJLyoqCi0JICogQm9vbGVhbiBwcmVmZXJlbmNlIHdoZXRoZXIgdG8gYXBwbHkgdGhlIHN0YWNr
IGZyYW1lIGxpbWl0IHByZWZlcmVuY2UuCisJICogQm9vbGVhbiBwcmVmZXJlbmNlIHdoZXRoZXIg
dG8gYXBwbHkgdGhlIHN0YWNrIGZyYW1lIGxpbWl0IHByZWZlcmVuY2UuIERlZmF1bHQgaXMgPGNv
ZGU+dHJ1ZTwvY29kZT4uCiAJICogQHNlZSB7QGxpbmsgI1BSRUZfU1RBQ0tfRlJBTUVfTElNSVR9
CisJICogCisJICogQHNpbmNlIDEuMQogCSAqLwogCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5n
IFBSRUZfU1RBQ0tfRlJBTUVfTElNSVRfRU5BQkxFID0gInN0YWNrRnJhbWVMaW1pdEVuYWJsZSI7
IC8vJE5PTi1OTFMtMSQKIAorCS8qKgorCSAqIEJvb2xlYW4gcHJlZmVyZW5jZSB3aGV0aGVyIHRv
IGtlZXAgc3RlcHBpbmcgc3BlZWQgaW4gc3luYyB3aXRoIFVJIHVwZGF0ZXMuIERlZmF1bHQgaXMg
PGNvZGU+dHJ1ZTwvY29kZT4uCisJICogCisJICogQHNpbmNlIDEuMQorCSAqLworCXB1YmxpYyBz
dGF0aWMgZmluYWwgU3RyaW5nIFBSRUZfU1lOQ0hST05JWkVEX1NURVBQSU5HX0VOQUJMRSA9ICJz
eW5jaHJvbml6ZWRTdGVwcGluZ0VuYWJsZSI7IC8vJE5PTi1OTFMtMSQKKworCS8qKgorCSAqIElu
dGVnZXIgcHJlZmVyZW5jZSB0byBlbmZvcmNlIGEgbWluaW11bSB0aW1lIGludGVydmFsIGJldHdl
ZW4gc3RlcHMuIERlZmF1bHQgaXMgPGNvZGU+MDwvY29kZT4uCisJICogCisJICogQHNpbmNlIDEu
MQorCSAqLworCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBSRUZfTUlOX1NURVBfSU5URVJW
QUw9ICJtaW5TdGVwSW50ZXJ2YWwiOyAvLyROT04tTkxTLTEkCisKICAgICAvKioKICAgICAgKiBI
ZWxwIHByZWZpeGVzLgogICAgICAqLwpAQCAtODUsNSArMTA1LDggQEAKICAgICBwdWJsaWMgc3Rh
dGljIGZpbmFsIFN0cmluZyBERVRBSUxfUEFORV9XT1JEX1dSQVBfQUNUSU9OID0gUFJFRklYICsg
ImRldGFpbF9wYW5lX3dvcmRfd3JhcF9hY3Rpb25fY29udGV4dCI7IC8vJE5PTi1OTFMtMSQKICAg
ICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBERVRBSUxfUEFORV9NQVhfTEVOR1RIX0FDVElP
TiA9IFBSRUZJWCArICJkZXRhaWxfcGFuZV9tYXhfbGVuZ3RoX2FjdGlvbl9jb250ZXh0IjsgLy8k
Tk9OLU5MUy0xJAogCisgICAgLyoqCisJICogQHNpbmNlIDEuMQorCSAqLwogICAgIHB1YmxpYyBz
dGF0aWMgZmluYWwgU3RyaW5nIFBSRUZFUkVOQ0VfUEFHRT0gUFJFRklYICsgInByZWZlcmVuY2Vf
cGFnZV9jb250ZXh0IjsgLy8kTk9OLU5MUy0xJAogfQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBJbnRvQ29tbWFuZC5qYXZhCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0K
UkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0
aW9ucy9Ec2ZTdGVwSW50b0NvbW1hbmQuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS41CmRp
ZmYgLXUgLXIxLjUgRHNmU3RlcEludG9Db21tYW5kLmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9k
ZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwSW50b0NvbW1hbmQuamF2YQk3IE1heSAyMDA4
IDE3OjQwOjQ3IC0wMDAwCTEuNQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9h
Y3Rpb25zL0RzZlN0ZXBJbnRvQ29tbWFuZC5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1OjA3IC0wMDAw
CkBAIC00OSw3ICs0OSw3IEBACiAgICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRT
dGVwVHlwZSgpOwogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFi
bGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgewogICAgICAg
ICAgICAgQE92ZXJyaWRlIHB1YmxpYyB2b2lkIGRvRXhlY3V0ZSgpIHsKLSAgICAgICAgICAgICAg
ICBnZXRTdGVwUXVldWVNZ3IoKS5jYW5FbnF1ZXVlU3RlcCgKKyAgICAgICAgICAgICAgICBnZXRT
dGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1ZVN0ZXAoCiAgICAgICAgICAgICAgICAgICAgIGdl
dENvbnRleHQoKSwgc3RlcFR5cGUsCiAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhUmVxdWVz
dE1vbml0b3I8Qm9vbGVhbj4oSW1tZWRpYXRlRXhlY3V0b3IuZ2V0SW5zdGFuY2UoKSwgbnVsbCkg
ewogICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCkBAIC03MSw3ICs3MSw3IEBACiAg
ICAgICAgIGZpbmFsIFN0ZXBUeXBlIHN0ZXBUeXBlPSBnZXRTdGVwVHlwZSgpOwogICAgICAgICBm
RXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3Qu
Z2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgewogICAgICAgICAgICAgQE92ZXJyaWRlIHB1Ymxp
YyB2b2lkIGRvRXhlY3V0ZSgpIHsKLQkJCQlnZXRTdGVwUXVldWVNZ3IoKS5lbnF1ZXVlU3RlcChn
ZXRDb250ZXh0KCksIHN0ZXBUeXBlKTsKKyAgICAgICAgICAgIAlnZXRTdGVwUXVldWVNYW5hZ2Vy
KCkuZW5xdWV1ZVN0ZXAoZ2V0Q29udGV4dCgpLCBzdGVwVHlwZSk7CiAgICAgICAgICAgICB9CiAg
ICAgICAgIH0pOwogICAgICAgICByZXR1cm4gdHJ1ZTsKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9k
ZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwT3ZlckNvbW1hbmQuamF2YQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
ClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2Fj
dGlvbnMvRHNmU3RlcE92ZXJDb21tYW5kLmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNQpk
aWZmIC11IC1yMS41IERzZlN0ZXBPdmVyQ29tbWFuZC5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL2RlYnVnL3VpL2FjdGlvbnMvRHNmU3RlcE92ZXJDb21tYW5kLmphdmEJNyBNYXkgMjAw
OCAxNzo0MDo0NyAtMDAwMAkxLjUKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkv
YWN0aW9ucy9Ec2ZTdGVwT3ZlckNvbW1hbmQuamF2YQkxNSBKdWwgMjAwOCAyMzoxNTowNyAtMDAw
MApAQCAtNDksNyArNDksNyBAQAogICAgICAgICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21t
YW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVlc3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkg
ewogICAgICAgICAgICAgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGU9IGdldFN0ZXBUeXBlKCk7CiAg
ICAgICAgICAgICBAT3ZlcnJpZGUgcHVibGljIHZvaWQgZG9FeGVjdXRlKCkgewotCQkJCWdldFN0
ZXBRdWV1ZU1ncigpLmNhbkVucXVldWVTdGVwKAorICAgICAgICAgICAgCWdldFN0ZXBRdWV1ZU1h
bmFnZXIoKS5jYW5FbnF1ZXVlU3RlcCgKICAgICAgICAgICAgICAgICAgICAgZ2V0Q29udGV4dCgp
LCBzdGVwVHlwZSwKICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGFSZXF1ZXN0TW9uaXRvcjxC
b29sZWFuPihJbW1lZGlhdGVFeGVjdXRvci5nZXRJbnN0YW5jZSgpLCBudWxsKSB7CiAgICAgICAg
ICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKQEAgLTcxLDcgKzcxLDcgQEAKICAgICAgICAgZmlu
YWwgU3RlcFR5cGUgc3RlcFR5cGU9IGdldFN0ZXBUeXBlKCk7CiAgICAgICAgIGZFeGVjdXRvci5z
dWJtaXQobmV3IERzZkNvbW1hbmRSdW5uYWJsZShmVHJhY2tlciwgcmVxdWVzdC5nZXRFbGVtZW50
cygpWzBdLCByZXF1ZXN0KSB7CiAgICAgICAgICAgICBAT3ZlcnJpZGUgcHVibGljIHZvaWQgZG9F
eGVjdXRlKCkgewotICAgICAgICAgICAgICAgIGdldFN0ZXBRdWV1ZU1ncigpLmVucXVldWVTdGVw
KGdldENvbnRleHQoKSwgc3RlcFR5cGUpOworICAgICAgICAgICAgCWdldFN0ZXBRdWV1ZU1hbmFn
ZXIoKS5lbnF1ZXVlU3RlcChnZXRDb250ZXh0KCksIHN0ZXBUeXBlKTsKICAgICAgICAgICAgIH0K
ICAgICAgICAgfSk7CiAgICAgICAgIHJldHVybiB0cnVlOwpJbmRleDogc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBSZXR1cm5Db21tYW5kLmphdmEKPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9v
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91
aS9hY3Rpb25zL0RzZlN0ZXBSZXR1cm5Db21tYW5kLmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9u
IDEuNQpkaWZmIC11IC1yMS41IERzZlN0ZXBSZXR1cm5Db21tYW5kLmphdmEKLS0tIHNyYy9vcmcv
ZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvYWN0aW9ucy9Ec2ZTdGVwUmV0dXJuQ29tbWFuZC5qYXZh
CTMwIE1heSAyMDA4IDIyOjU3OjQwIC0wMDAwCTEuNQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy91aS9hY3Rpb25zL0RzZlN0ZXBSZXR1cm5Db21tYW5kLmphdmEJMTUgSnVsIDIwMDgg
MjM6MTU6MDcgLTAwMDAKQEAgLTQ2LDcgKzQ2LDcgQEAKICAgICAgICAgCiAgICAgICAgIGZFeGVj
dXRvci5zdWJtaXQobmV3IERzZkNvbW1hbmRSdW5uYWJsZShmVHJhY2tlciwgcmVxdWVzdC5nZXRF
bGVtZW50cygpWzBdLCByZXF1ZXN0KSB7IAogICAgICAgICAgICAgQE92ZXJyaWRlIHB1YmxpYyB2
b2lkIGRvRXhlY3V0ZSgpIHsKLSAgICAgICAgICAgICAgICBnZXRTdGVwUXVldWVNZ3IoKS5jYW5F
bnF1ZXVlU3RlcCgKKyAgICAgICAgICAgIAlnZXRTdGVwUXVldWVNYW5hZ2VyKCkuY2FuRW5xdWV1
ZVN0ZXAoCiAgICAgICAgICAgICAgICAgICAgIGdldENvbnRleHQoKSwgU3RlcFR5cGUuU1RFUF9S
RVRVUk4sCiAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVh
bj4oSW1tZWRpYXRlRXhlY3V0b3IuZ2V0SW5zdGFuY2UoKSwgbnVsbCkgewogICAgICAgICAgICAg
ICAgICAgICAgICAgQE92ZXJyaWRlCkBAIC02Nyw3ICs2Nyw3IEBACiAgICAgICAgIAogICAgICAg
ICBmRXhlY3V0b3Iuc3VibWl0KG5ldyBEc2ZDb21tYW5kUnVubmFibGUoZlRyYWNrZXIsIHJlcXVl
c3QuZ2V0RWxlbWVudHMoKVswXSwgcmVxdWVzdCkgeyAKICAgICAgICAgICAgIEBPdmVycmlkZSBw
dWJsaWMgdm9pZCBkb0V4ZWN1dGUoKSB7Ci0gICAgICAgICAgICAgICAgZ2V0U3RlcFF1ZXVlTWdy
KCkuZW5xdWV1ZVN0ZXAoZ2V0Q29udGV4dCgpLCBTdGVwVHlwZS5TVEVQX1JFVFVSTik7CisgICAg
ICAgICAgICAJZ2V0U3RlcFF1ZXVlTWFuYWdlcigpLmVucXVldWVTdGVwKGdldENvbnRleHQoKSwg
U3RlcFR5cGUuU1RFUF9SRVRVUk4pOwogICAgICAgICAgICAgfQogICAgICAgICB9KTsKICAgICAg
ICAgcmV0dXJuIHRydWU7CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL2Fj
dGlvbnMvRHNmQ29tbWFuZFJ1bm5hYmxlLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jv
b3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZkNvbW1hbmRS
dW5uYWJsZS5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjgKZGlmZiAtdSAtcjEuOCBEc2ZD
b21tYW5kUnVubmFibGUuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9h
Y3Rpb25zL0RzZkNvbW1hbmRSdW5uYWJsZS5qYXZhCTMwIE1heSAyMDA4IDIyOjU3OjQwIC0wMDAw
CTEuOAorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9hY3Rpb25zL0RzZkNvbW1h
bmRSdW5uYWJsZS5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1OjA3IC0wMDAwCkBAIC0xNSw4ICsxNSwx
MCBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRzZlJ1bm5hYmxlOwog
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkltbXV0YWJsZTsKIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7CitpbXBvcnQgb3JnLmVjbGlw
c2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGlu
Z0NvbnRyb2xsZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnVp
LkRzZkRlYnVnVUlQbHVnaW47CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZp
Y2UuSVJ1bkNvbnRyb2w7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2Uu
SVN0ZXBRdWV1ZU1hbmFnZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZp
Y2UuU3RlcFF1ZXVlTWFuYWdlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0OwogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5zZXJ2aWNlLkRzZlNlcnZpY2VzVHJhY2tlcjsKQEAgLTMzLDEwICszNSwzNiBAQAog
ICAgIHB1YmxpYyBJUnVuQ29udHJvbCBnZXRSdW5Db250cm9sKCkgewogICAgICAgICByZXR1cm4g
ZlRyYWNrZXIuZ2V0U2VydmljZShJUnVuQ29udHJvbC5jbGFzcyk7CiAgICAgfQotICAgIHB1Ymxp
YyBTdGVwUXVldWVNYW5hZ2VyIGdldFN0ZXBRdWV1ZU1ncigpIHsKKyAgICAvKioKKyAgICAgKiBA
ZGVwcmVjYXRlZCBVc2Uge0BsaW5rICNnZXRTdGVwUXVldWVNYW5hZ2VyKCl9IGluc3RlYWQuCisg
ICAgICovCisgICAgQERlcHJlY2F0ZWQKKwlwdWJsaWMgU3RlcFF1ZXVlTWFuYWdlciBnZXRTdGVw
UXVldWVNZ3IoKSB7CiAgICAgICAgIHJldHVybiBmVHJhY2tlci5nZXRTZXJ2aWNlKFN0ZXBRdWV1
ZU1hbmFnZXIuY2xhc3MpOwogICAgIH0KIAorICAgIC8qKgorCSAqIEBzaW5jZSAxLjEKKwkgKi8K
KwlwdWJsaWMgSVN0ZXBRdWV1ZU1hbmFnZXIgZ2V0U3RlcFF1ZXVlTWFuYWdlcigpIHsKKwkJLy8g
Zm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CisJCUlTdGVwUXVldWVNYW5hZ2VyIG1ncj0gZ2V0
U3RlcFF1ZXVlTWdyKCk7CisJCWlmIChtZ3IgIT0gbnVsbCkgeworCQkJcmV0dXJuIG1ncjsKKwkJ
fQorCQlyZXR1cm4gZ2V0U3RlcHBpbmdDb250cm9sbGVyKCk7CisgICAgfQorCisgICAgLyoqCisJ
ICogQHNpbmNlIDEuMQorCSAqLworICAgIHB1YmxpYyBTdGVwcGluZ0NvbnRyb2xsZXIgZ2V0U3Rl
cHBpbmdDb250cm9sbGVyKCkgeworICAgIAlpZiAoZkNvbnRleHQgIT0gbnVsbCkgeworICAgIAkJ
cmV0dXJuIChTdGVwcGluZ0NvbnRyb2xsZXIpIGZDb250ZXh0LmdldEFkYXB0ZXIoU3RlcHBpbmdD
b250cm9sbGVyLmNsYXNzKTsKKyAgICAJfQorICAgIAlyZXR1cm4gbnVsbDsKKyAgICB9CisKICAg
ICBwdWJsaWMgRHNmQ29tbWFuZFJ1bm5hYmxlKERzZlNlcnZpY2VzVHJhY2tlciBzZXJ2aWNlc1Ry
YWNrZXIsIE9iamVjdCBlbGVtZW50LCBJRGVidWdDb21tYW5kUmVxdWVzdCByZXF1ZXN0KSB7CiAg
ICAgICAgIGZUcmFja2VyID0gc2VydmljZXNUcmFja2VyOwogICAgICAgICBpZiAoZWxlbWVudCBp
bnN0YW5jZW9mIElETVZNQ29udGV4dCkgewpAQCAtNTYsNyArODQsNyBAQAogICAgICAgICB9CiAg
ICAgICAgIGlmIChnZXRDb250ZXh0KCkgPT0gbnVsbCkgewogICAgICAgICAgICAgZlJlcXVlc3Qu
c2V0U3RhdHVzKG1ha2VFcnJvcigiU2VsZWN0ZWQgb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgcnVu
IGNvbnRyb2wuIiwgbnVsbCkpOyAgICAgICAgICAgICAvLyROT04tTkxTLTEkCi0gICAgICAgIH0g
ZWxzZSBpZiAoZ2V0UnVuQ29udHJvbCgpID09IG51bGwgfHwgZ2V0U3RlcFF1ZXVlTWdyKCkgPT0g
bnVsbCkgeworICAgICAgICB9IGVsc2UgaWYgKGdldFJ1bkNvbnRyb2woKSA9PSBudWxsIHx8IGdl
dFN0ZXBRdWV1ZU1hbmFnZXIoKSA9PSBudWxsKSB7CiAgICAgICAgICAgICBmUmVxdWVzdC5zZXRT
dGF0dXMobWFrZUVycm9yKCJSdW4gQ29udHJvbCBub3QgYXZhaWxhYmxlIiwgbnVsbCkpOyAvLyRO
T04tTkxTLTEkCiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICBkb0V4ZWN1dGUoKTsKSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkv
dmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZhCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZp
bGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZhLHYKcmV0
cmlldmluZyByZXZpc2lvbiAxLjE0CmRpZmYgLXUgLXIxLjE0IFN0YWNrRnJhbWVzVk1Ob2RlLmph
dmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwv
dWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZhCTI0IEp1biAyMDA4IDE3
OjM0OjQwIC0wMDAwCTEuMTQKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJu
YWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9TdGFja0ZyYW1lc1ZNTm9kZS5qYXZh
CTE1IEp1bCAyMDA4IDIzOjE1OjA2IC0wMDAwCkBAIC0yMiwxMCArMjIsMTEgQEAKIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5SZXF1ZXN0TW9uaXRvcjsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLkRNQ29udGV4dHM7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLmRhdGFtb2RlbC5JRE1Db250ZXh0OworaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5k
ZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwuU3RlcHBpbmdDb250cm9sbGVy
OworaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51
aS52aWV3bW9kZWwuU3RlcHBpbmdDb250cm9sbGVyLlN0ZXBwaW5nVGltZWRPdXRFdmVudDsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsKIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2s7CiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrMjsKLWltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGVidWcuc2VydmljZS5TdGVwUXVldWVNYW5hZ2VyOwogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklDb250YWluZXJETUNvbnRleHQ7CiBp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRyb2wuSUNvbnRh
aW5lclN1c3BlbmRlZERNRXZlbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNl
cnZpY2UuSVJ1bkNvbnRyb2wuSUV4ZWN1dGlvbkRNQ29udGV4dDsKQEAgLTMzLDYgKzM0LDcgQEAK
IGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JU3Vz
cGVuZGVkRE1FdmVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5J
U3RhY2suSUZyYW1lRE1Db250ZXh0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5z
ZXJ2aWNlLklTdGFjay5JRnJhbWVETURhdGE7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRl
YnVnLnNlcnZpY2UuU3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91dEV2ZW50OwogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS5JRHNmRGVidWdVSUNvbnN0YW50czsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXNzaW9uOwogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi51aS5jb25jdXJyZW50LlZpZXdlckRhdGFSZXF1ZXN0TW9uaXRvcjsKQEAg
LTY1LDYgKzY3LDggQEAKICAgICAKIAkvKioKIAkgKiBWaWV3IG1vZGVsIGNvbnRleHQgcmVwcmVz
ZW50aW5nIHRoZSBlbmQgb2YgYW4gaW5jb21wbGV0ZSBzdGFjay4KKwkgKiAKKwkgKiBAc2luY2Ug
MS4xCiAJICovCiAJcHVibGljIGNsYXNzIEluY29tcGxldGVTdGFja1ZNQ29udGV4dCBleHRlbmRz
IEFic3RyYWN0Vk1Db250ZXh0IHsKIAkJcHJpdmF0ZSBmaW5hbCBpbnQgZkxldmVsOwpAQCAtMzIw
LDEzICszMjQsMTYgQEAKICAgICAgICAgaWYgKGlkeCAhPSAwKSByZXR1cm47CiAgICAgICAgIAog
ICAgICAgICBmaW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNEbWMgPSBmaW5kRG1jSW5QYXRo
KHVwZGF0ZS5nZXRWaWV3ZXJJbnB1dCgpLCB1cGRhdGUuZ2V0RWxlbWVudFBhdGgoKSwgSUV4ZWN1
dGlvbkRNQ29udGV4dC5jbGFzcyk7CisgICAgICAgIGlmIChleGVjRG1jID09IG51bGwpIHsKKyAg
ICAgICAgCXJldHVybjsKKyAgICAgICAgfQogICAgICAgICBJUnVuQ29udHJvbCBydW5Db250cm9s
U2VydmljZSA9IGdldFNlcnZpY2VzVHJhY2tlcigpLmdldFNlcnZpY2UoSVJ1bkNvbnRyb2wuY2xh
c3MpOyAKLSAgICAgICAgU3RlcFF1ZXVlTWFuYWdlciBzdGVwUXVldWVNZ3JTZXJ2aWNlID0gZ2V0
U2VydmljZXNUcmFja2VyKCkuZ2V0U2VydmljZShTdGVwUXVldWVNYW5hZ2VyLmNsYXNzKTsgCi0g
ICAgICAgIGlmIChleGVjRG1jID09IG51bGwgfHwgcnVuQ29udHJvbFNlcnZpY2UgPT0gbnVsbCB8
fCBzdGVwUXVldWVNZ3JTZXJ2aWNlID09IG51bGwpIHJldHVybjsKKyAgICAgICAgU3RlcHBpbmdD
b250cm9sbGVyIHN0ZXBRdWV1ZU1nciA9IChTdGVwcGluZ0NvbnRyb2xsZXIpIGV4ZWNEbWMuZ2V0
QWRhcHRlcihTdGVwcGluZ0NvbnRyb2xsZXIuY2xhc3MpOyAKKyAgICAgICAgaWYgKHJ1bkNvbnRy
b2xTZXJ2aWNlID09IG51bGwgfHwgc3RlcFF1ZXVlTWdyID09IG51bGwpIHJldHVybjsKICAgICAg
ICAgCiAgICAgICAgIFN0cmluZyBpbWFnZUtleSA9IG51bGw7CiAgICAgICAgIGlmIChydW5Db250
cm9sU2VydmljZS5pc1N1c3BlbmRlZChleGVjRG1jKSB8fCAKLSAgICAgICAgICAgIChydW5Db250
cm9sU2VydmljZS5pc1N0ZXBwaW5nKGV4ZWNEbWMpICYmICFzdGVwUXVldWVNZ3JTZXJ2aWNlLmlz
U3RlcHBpbmdUaW1lZE91dChleGVjRG1jKSkpCisgICAgICAgICAgICAocnVuQ29udHJvbFNlcnZp
Y2UuaXNTdGVwcGluZyhleGVjRG1jKSAmJiAhc3RlcFF1ZXVlTWdyLmlzU3RlcHBpbmdUaW1lZE91
dChleGVjRG1jKSkpCiAgICAgICAgIHsKICAgICAgICAgICAgIGltYWdlS2V5ID0gSURlYnVnVUlD
b25zdGFudHMuSU1HX09CSlNfU1RBQ0tGUkFNRTsKICAgICAgICAgfSBlbHNlIHsKQEAgLTQwOSw3
ICs0MTYsOSBAQAogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQgfCBJTW9k
ZWxEZWx0YS5FWFBBTkQgfCBJTW9kZWxEZWx0YS5TRUxFQ1Q7CiAgICAgICAgIH0gZWxzZSBpZiAo
ZSBpbnN0YW5jZW9mIEZ1bGxTdGFja1JlZnJlc2hFdmVudCkgewogICAgICAgICAJcmV0dXJuIElN
b2RlbERlbHRhLkNPTlRFTlQgfCBJTW9kZWxEZWx0YS5FWFBBTkQ7Ci0gICAgICAgIH0gZWxzZSBp
ZiAoZSBpbnN0YW5jZW9mIFN0ZXBRdWV1ZU1hbmFnZXIuSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkg
eworICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQp
IHsKKyAgICAgICAgICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOworICAgICAgICB9IGVs
c2UgaWYgKGUgaW5zdGFuY2VvZiBJU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7CiAgICAgICAgICAg
ICByZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVDsKICAgICAgICAgfSBlbHNlIGlmIChlIGluc3Rh
bmNlb2YgTW9kZWxQcm94eUluc3RhbGxlZEV2ZW50KSB7CiAgICAgICAgICAgICByZXR1cm4gSU1v
ZGVsRGVsdGEuU0VMRUNUIHwgSU1vZGVsRGVsdGEuRVhQQU5EOwpAQCAtNDYxLDggKzQ3MCwxMCBA
QAogICAgICAgICAgICAgY2xlYXJTdGFja0ZyYW1lTGltaXQoICgoSVN1c3BlbmRlZERNRXZlbnQp
ZSkuZ2V0RE1Db250ZXh0KCkgKTsKICAgICAgICAgICAgIElFeGVjdXRpb25ETUNvbnRleHQgZXhl
Y0RtYyA9ICgoSVN1c3BlbmRlZERNRXZlbnQpZSkuZ2V0RE1Db250ZXh0KCk7CiAgICAgICAgICAg
ICBidWlsZERlbHRhRm9yU3VzcGVuZGVkRXZlbnQoZXhlY0RtYywgZXhlY0RtYywgcGFyZW50LCBu
b2RlT2Zmc2V0LCBybSk7Ci0gICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBRdWV1
ZU1hbmFnZXIuSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgewotICAgICAgICAgICAgYnVpbGREZWx0
YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudCgoU3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1l
ZE91dEV2ZW50KWUsIHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOworICAgICAgICB9IGVsc2UgaWYg
KGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsKKyAgICAgICAgICAgIGJ1aWxk
RGVsdGFGb3JTdGVwcGluZ1RpbWVkT3V0RXZlbnQoKFN0ZXBwaW5nVGltZWRPdXRFdmVudCllLCBw
YXJlbnQsIG5vZGVPZmZzZXQsIHJtKTsKKyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2Yg
SVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgeworICAgICAgICAgICAgYnVpbGREZWx0YUZvclN0ZXBw
aW5nVGltZWRPdXRFdmVudCgoSVN0ZXBwaW5nVGltZWRPdXRFdmVudCllLCBwYXJlbnQsIG5vZGVP
ZmZzZXQsIHJtKTsKICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgTW9kZWxQcm94eUlu
c3RhbGxlZEV2ZW50KSB7CiAgICAgICAgICAgICBidWlsZERlbHRhRm9yTW9kZWxQcm94eUluc3Rh
bGxlZEV2ZW50KHBhcmVudCwgbm9kZU9mZnNldCwgcm0pOwogICAgICAgICB9IGVsc2UgaWYgKGUg
aW5zdGFuY2VvZiBFeHBhbmRTdGFja0V2ZW50KSB7CkBAIC01NDcsNyArNTU4LDEzIEBACiAgICAg
ICAgIHJtLmRvbmUoKTsKIAl9CiAJCi0gICAgcHJpdmF0ZSB2b2lkIGJ1aWxkRGVsdGFGb3JTdGVw
cGluZ1RpbWVkT3V0RXZlbnQoZmluYWwgU3RlcFF1ZXVlTWFuYWdlci5JU3RlcHBpbmdUaW1lZE91
dEV2ZW50IGUsIGZpbmFsIFZNRGVsdGEgcGFyZW50RGVsdGEsIGZpbmFsIGludCBub2RlT2Zmc2V0
LCBmaW5hbCBSZXF1ZXN0TW9uaXRvciBybSkgeworICAgIHByaXZhdGUgdm9pZCBidWlsZERlbHRh
Rm9yU3RlcHBpbmdUaW1lZE91dEV2ZW50KGZpbmFsIFN0ZXBwaW5nVGltZWRPdXRFdmVudCBlLCBm
aW5hbCBWTURlbHRhIHBhcmVudERlbHRhLCBmaW5hbCBpbnQgbm9kZU9mZnNldCwgZmluYWwgUmVx
dWVzdE1vbml0b3Igcm0pIHsKKyAgICAgICAgLy8gUmVwYWludCB0aGUgc3RhY2sgZnJhbWUgaW1h
Z2VzIHRvIGhhdmUgdGhlIHJ1bm5pbmcgc3ltYm9sLgorICAgICAgICAvL3BhcmVudERlbHRhLnNl
dEZsYWdzKHBhcmVudERlbHRhLmdldEZsYWdzKCkgfCBJTW9kZWxEZWx0YS5DT05URU5UKTsKKyAg
ICAgICAgcm0uZG9uZSgpOworICAgIH0KKyAgICAKKyAgICBwcml2YXRlIHZvaWQgYnVpbGREZWx0
YUZvclN0ZXBwaW5nVGltZWRPdXRFdmVudChmaW5hbCBJU3RlcHBpbmdUaW1lZE91dEV2ZW50IGUs
IGZpbmFsIFZNRGVsdGEgcGFyZW50RGVsdGEsIGZpbmFsIGludCBub2RlT2Zmc2V0LCBmaW5hbCBS
ZXF1ZXN0TW9uaXRvciBybSkgewogICAgICAgICAvLyBSZXBhaW50IHRoZSBzdGFjayBmcmFtZSBp
bWFnZXMgdG8gaGF2ZSB0aGUgcnVubmluZyBzeW1ib2wuCiAgICAgICAgIC8vcGFyZW50RGVsdGEu
c2V0RmxhZ3MocGFyZW50RGVsdGEuZ2V0RmxhZ3MoKSB8IElNb2RlbERlbHRhLkNPTlRFTlQpOwog
ICAgICAgICBybS5kb25lKCk7CkBAIC02NjAsNiArNjc3LDggQEAKIAkgKiBHZXQgdGhlIGN1cnJl
bnQgYWN0aXZlIHN0YWNrIGZyYW1lIGxpbWl0LiBJZiBubyBsaW1pdCBpcyBhcHBsaWNhYmxlIHtA
bGluayBJbnRlZ2VyLk1BWF9WQUxVRX0gaXMgcmV0dXJuZWQuCiAJICogCiAJICogQHJldHVybiB0
aGUgY3VycmVudCBzdGFjayBmcmFtZSBsaW1pdAorCSAqIAorCSAqIEBzaW5jZSAxLjEKIAkgKi8K
IAlwdWJsaWMgaW50IGdldFN0YWNrRnJhbWVMaW1pdChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWND
dHgpIHsKIAkJaWYgKGZUZW1wb3JhcnlMaW1pdHMuY29udGFpbnNLZXkoZXhlY0N0eCkpIHsKQEAg
LTY4OSw2ICs3MDgsOCBAQAogCS8qKgogCSAqIEluY3JlbWVudCB0aGUgc3RhY2sgZnJhbWUgbGlt
aXQgYnkgdGhlIGRlZmF1bHQgaW5jcmVtZW50LgogCSAqIFRoaXMgaW1wbGVtZW50YXRpb24gZG91
YmxlcyB0aGUgY3VycmVudCBsaW1pdC4KKwkgKiAKKwkgKiBAc2luY2UgMS4xCiAJICovCiAJcHVi
bGljIHZvaWQgaW5jcmVtZW50U3RhY2tGcmFtZUxpbWl0KElFeGVjdXRpb25ETUNvbnRleHQgZXhl
Y0N0eCkgewogCQlmaW5hbCBpbnQgc3RhY2tGcmFtZUxpbWl0PSBnZXRTdGFja0ZyYW1lTGltaXQo
ZXhlY0N0eCk7CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3By
b3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvRXhwYW5kU3RhY2tFdmVudC5qYXZhCj09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMv
b3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
aW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9FeHBhbmRTdGFja0V2ZW50
LmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQpkaWZmIC11IC1yMS4xIEV4cGFuZFN0YWNr
RXZlbnQuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92
aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0V4cGFuZFN0YWNrRXZlbnQuamF2YQkyNCBKdW4g
MjAwOCAxNzozNDo0MCAtMDAwMAkxLjEKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcv
aW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9FeHBhbmRTdGFja0V2ZW50
LmphdmEJMTUgSnVsIDIwMDggMjM6MTU6MDUgLTAwMDAKQEAgLTE1LDYgKzE1LDggQEAKIAogLyoq
CiAgKiBFdmVudCB0byBpbmNyZWFzZSB0aGUgc3RhY2sgZnJhbWUgbGltaXQgZm9yIGFuIGV4ZWN1
dGlvbiBjb250ZXh0LgorICogCisgKiBAc2luY2UgMS4xCiAgKi8KIHB1YmxpYyBjbGFzcyBFeHBh
bmRTdGFja0V2ZW50IGV4dGVuZHMgQWJzdHJhY3RETUV2ZW50PElFeGVjdXRpb25ETUNvbnRleHQ+
IHsKICAgICAKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZh
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3Bs
dWdpbnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2Yv
ZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdENv
bnRhaW5lclZNTm9kZS5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjQKZGlmZiAtdSAtcjEu
NCBBYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvQWJzdHJhY3RD
b250YWluZXJWTU5vZGUuamF2YQkxNiBKdW4gMjAwOCAxODozMDo1NCAtMDAwMAkxLjQKKysrIHNy
Yy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21v
ZGVsL2xhdW5jaC9BYnN0cmFjdENvbnRhaW5lclZNTm9kZS5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1
OjA0IC0wMDAwCkBAIC0xOCw2ICsxOCw3IEBACiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRh
dGFtb2RlbC5ETUNvbnRleHRzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwu
SURNQ29udGV4dDsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50
OworaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51
aS52aWV3bW9kZWwuU3RlcHBpbmdDb250cm9sbGVyLlN0ZXBwaW5nVGltZWRPdXRFdmVudDsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsKIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVy
RE1Db250ZXh0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5D
b250cm9sLklDb250YWluZXJSZXN1bWVkRE1FdmVudDsKQEAgLTM3LDYgKzM4LDggQEAKIC8qKgog
ICogQWJzdHJhY3QgaW1wbGVtZW50YXRpb24gb2YgYSBjb250YWluZXIgdmlldyBtb2RlbCBub2Rl
LgogICogQ2xpZW50cyBuZWVkIHRvIGltcGxlbWVudCB7QGxpbmsgI3VwZGF0ZUxhYmVsSW5TZXNz
aW9uVGhyZWFkKElMYWJlbFVwZGF0ZVtdKX0uCisgKiAKKyAqIEBzaW5jZSAxLjEKICAqLwogQFN1
cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikKIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0
cmFjdENvbnRhaW5lclZNTm9kZSBleHRlbmRzIEFic3RyYWN0RE1WTU5vZGUgaW1wbGVtZW50cyBJ
RWxlbWVudExhYmVsUHJvdmlkZXIgewpAQCAtODcsNiArOTAsMTEgQEAKICAgICAgICAgICAgIGlm
IChkbWMgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSB7CiAgICAgICAgICAgICAgICAg
cmV0dXJuIElNb2RlbERlbHRhLkNPTlRFTlQ7CiAgICAgICAgICAgICB9CisJICAgIH0gZWxzZSBp
ZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkgeworCSAgICAgICAgaWYgKGRt
YyBpbnN0YW5jZW9mIElDb250YWluZXJETUNvbnRleHQpIAorCSAgICAgICAgeworCSAgICAgICAg
ICAgIHJldHVybiBJTW9kZWxEZWx0YS5DT05URU5UOworCSAgICAgICAgfQogCSAgICB9IGVsc2Ug
aWYgKGUgaW5zdGFuY2VvZiBJU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7CiAJICAgICAgICBpZiAo
ZG1jIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4dCkgCiAJICAgICAgICB7CkBAIC0xMjks
NiArMTM3LDE1IEBACiAJCSAgICBpZiAoZG1jIGluc3RhbmNlb2YgSUNvbnRhaW5lckRNQ29udGV4
dCkgewogCQkgICAgICAgIHBhcmVudERlbHRhLmFkZE5vZGUoY3JlYXRlVk1Db250ZXh0KGRtYyks
IElNb2RlbERlbHRhLkNPTlRFTlQpOwogCQkgICAgfQorCQl9IGVsc2UgaWYgKGUgaW5zdGFuY2Vv
ZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsKKwkJICAgIC8vIFN0ZXBwaW5nIHRpbWUtb3V0IGlu
ZGljYXRlcyB0aGF0IGEgc3RlcCBvcGVyYXRpb24gaXMgdGFraW5nIAorCQkgICAgLy8gYSBsb25n
IHRpbWUsIGFuZCB0aGUgdmlldyBuZWVkcyB0byBiZSByZWZyZXNoZWQgdG8gc2hvdyAKKwkJICAg
IC8vIHRoZSB1c2VyIHRoYXQgdGhlIHByb2dyYW0gaXMgcnVubmluZy4KKwkJICAgIC8vIElmIHRo
ZSBzdGVwIHdhcyBpc3N1ZWQgZm9yIHRoZSB3aG9sZSBjb250YWluZXIgcmVmcmVzaAorCQkgICAg
Ly8gdGhlIHdob2xlIGNvbnRhaW5lci4KKwkJICAgIGlmIChkbWMgaW5zdGFuY2VvZiBJQ29udGFp
bmVyRE1Db250ZXh0KSB7CisJICAgICAgICAgICAgcGFyZW50RGVsdGEuYWRkTm9kZShjcmVhdGVW
TUNvbnRleHQoZG1jKSwgSU1vZGVsRGVsdGEuQ09OVEVOVCk7CisJCSAgICB9CiAJCX0gZWxzZSBp
ZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQpIHsKIAkJICAgIC8vIFN0ZXBw
aW5nIHRpbWUtb3V0IGluZGljYXRlcyB0aGF0IGEgc3RlcCBvcGVyYXRpb24gaXMgdGFraW5nIAog
CQkgICAgLy8gYSBsb25nIHRpbWUsIGFuZCB0aGUgdmlldyBuZWVkcyB0byBiZSByZWZyZXNoZWQg
dG8gc2hvdyAKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdp
bnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9BYnN0cmFjdFRocmVh
ZFZNTm9kZS5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjUKZGlmZiAtdSAtcjEuNSBBYnN0
cmFjdFRocmVhZFZNTm9kZS5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2lu
dGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvQWJzdHJhY3RUaHJlYWRWTU5v
ZGUuamF2YQkxNyBKdW4gMjAwOCAyMDo0NjoxMSAtMDAwMAkxLjUKKysrIHNyYy9vcmcvZWNsaXBz
ZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9B
YnN0cmFjdFRocmVhZFZNTm9kZS5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1OjA1IC0wMDAwCkBAIC0y
Myw2ICsyMyw3IEBACiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5ETUNvbnRl
eHRzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kYXRhbW9kZWwuSURNQ29udGV4dDsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGF0YW1vZGVsLklETUV2ZW50OworaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52aWV3bW9kZWwuU3Rl
cHBpbmdDb250cm9sbGVyLlN0ZXBwaW5nVGltZWRPdXRFdmVudDsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsKIGltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JQ29udGFpbmVyRE1Db250ZXh0OwogaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklDb250YWlu
ZXJSZXN1bWVkRE1FdmVudDsKQEAgLTUwLDYgKzUxLDggQEAKIC8qKgogICogQWJzdHJhY3QgaW1w
bGVtZW50YXRpb24gb2YgYSB0aHJlYWQgdmlldyBtb2RlbCBub2RlLgogICogQ2xpZW50cyBuZWVk
IHRvIGltcGxlbWVudCB7QGxpbmsgI3VwZGF0ZUxhYmVsSW5TZXNzaW9uVGhyZWFkKElMYWJlbFVw
ZGF0ZVtdKX0uCisgKiAKKyAqIEBzaW5jZSAxLjEKICAqLwogQFN1cHByZXNzV2FybmluZ3MoInJl
c3RyaWN0aW9uIikKIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFRocmVhZFZNTm9kZSBl
eHRlbmRzIEFic3RyYWN0RE1WTU5vZGUKQEAgLTExMiw2ICsxMTUsMTUgQEAKICAgICAgICAgICAg
ICAgICBybS5kb25lKCk7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgfQor
ICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBTdGVwcGluZ1RpbWVkT3V0RXZlbnQgJiYg
CisgICAgICAgICAgICAgICAgKChTdGVwcGluZ1RpbWVkT3V0RXZlbnQpZSkuZ2V0RE1Db250ZXh0
KCkgaW5zdGFuY2VvZiBJQ29udGFpbmVyRE1Db250ZXh0KSAKKyAgICAgeworICAgICAgICAgIC8v
IFRoZSB0aW1lZCBvdXQgZXZlbnQgb2NjdXJlZCBvbiBhIGNvbnRhaW5lciBhbmQgbm90IG9uIGEg
dGhyZWFkLiAgRG8gbm90CisgICAgICAgICAgLy8gcmV0dXJuIGEgY29udGV4dCBmb3IgdGhpcyBl
dmVudCwgd2hpY2ggd2lsbCBmb3JjZSB0aGUgdmlldyBtb2RlbCB0byBnZW5lcmF0ZQorICAgICAg
ICAgIC8vIGEgZGVsdGEgZm9yIGFsbCB0aGUgdGhyZWFkcy4KKyAgICAgICAgICBybS5zZXRTdGF0
dXMobmV3IFN0YXR1cyhJU3RhdHVzLkVSUk9SLCBEc2ZVSVBsdWdpbi5QTFVHSU5fSUQsIElEc2ZT
dGF0dXNDb25zdGFudHMuTk9UX1NVUFBPUlRFRCwgIiIsIG51bGwpKTsgLy8kTk9OLU5MUy0xJAor
ICAgICAgICAgIHJtLmRvbmUoKTsKKyAgICAgICAgICByZXR1cm47CiAgICAgICAgIH0gZWxzZSBp
ZiAoZSBpbnN0YW5jZW9mIElTdGVwcGluZ1RpbWVkT3V0RXZlbnQgJiYgCiAgICAgICAgICAgICAg
ICAgICAgKChJU3RlcHBpbmdUaW1lZE91dEV2ZW50KWUpLmdldERNQ29udGV4dCgpIGluc3RhbmNl
b2YgSUNvbnRhaW5lckRNQ29udGV4dCkgCiAgICAgICAgIHsKQEAgLTIzMiw2ICsyNDQsOCBAQAog
ICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRhLk5PX0NIQU5HRTsKICAgICAgICAgfSBlbHNl
IGlmIChlIGluc3RhbmNlb2YgRnVsbFN0YWNrUmVmcmVzaEV2ZW50KSB7CiAgICAgICAgICAgICBy
ZXR1cm4gSU1vZGVsRGVsdGEuQ09OVEVOVDsKKyAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNl
b2YgU3RlcHBpbmdUaW1lZE91dEV2ZW50KSB7CisgICAgICAgICAgICByZXR1cm4gSU1vZGVsRGVs
dGEuQ09OVEVOVDsgICAgICAgICAgICAKICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2Yg
SVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgewogICAgICAgICAgICAgcmV0dXJuIElNb2RlbERlbHRh
LkNPTlRFTlQ7ICAgICAgICAgICAgCiAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE1v
ZGVsUHJveHlJbnN0YWxsZWRFdmVudCkgewpAQCAtMjcxLDYgKzI4NSwxMiBAQAogICAgICAgICAg
ICAgLy8gYW5kIGEgZml4ZWQgZGVsYXkuICBSZWZyZXNoIHRoZSB3aG9sZSB0aHJlYWQgdXBvbiB0
aGlzIGV2ZW50LgogICAgICAgICAgICAgcGFyZW50RGVsdGEuYWRkTm9kZShjcmVhdGVWTUNvbnRl
eHQoZG1jKSwgSU1vZGVsRGVsdGEuQ09OVEVOVCk7CiAgICAgICAgICAgICBybS5kb25lKCk7Cisg
ICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFN0ZXBwaW5nVGltZWRPdXRFdmVudCkgewor
ICAgICAgICAgICAgLy8gU3RlcHBpbmcgdGltZS1vdXQgaW5kaWNhdGVzIHRoYXQgYSBzdGVwIG9w
ZXJhdGlvbiBpcyB0YWtpbmcgCisgICAgICAgICAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2
aWV3IG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byBzaG93IAorICAgICAgICAgICAgLy8gdGhlIHVz
ZXIgdGhhdCB0aGUgcHJvZ3JhbSBpcyBydW5uaW5nLiAgCisgICAgICAgICAgICBwYXJlbnREZWx0
YS5hZGROb2RlKGNyZWF0ZVZNQ29udGV4dChkbWMpLCBJTW9kZWxEZWx0YS5DT05URU5UKTsKKyAg
ICAgICAgICAgIHJtLmRvbmUoKTsgICAgICAgICAgICAKICAgICAgICAgfSBlbHNlIGlmIChlIGlu
c3RhbmNlb2YgSVN0ZXBwaW5nVGltZWRPdXRFdmVudCkgewogICAgICAgICAgICAgLy8gU3RlcHBp
bmcgdGltZS1vdXQgaW5kaWNhdGVzIHRoYXQgYSBzdGVwIG9wZXJhdGlvbiBpcyB0YWtpbmcgCiAg
ICAgICAgICAgICAvLyBhIGxvbmcgdGltZSwgYW5kIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHJlZnJl
c2hlZCB0byBzaG93IApJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5h
bC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0xhdW5jaFZNVXBkYXRlTWVzc2FnZXMu
amF2YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRz
Zi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvTGF1bmNo
Vk1VcGRhdGVNZXNzYWdlcy5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjEKZGlmZiAtdSAt
cjEuMSBMYXVuY2hWTVVwZGF0ZU1lc3NhZ2VzLmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9MYXVuY2hW
TVVwZGF0ZU1lc3NhZ2VzLmphdmEJMTcgSnVuIDIwMDggMjA6NDY6MTEgLTAwMDAJMS4xCisrKyBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdt
b2RlbC9sYXVuY2gvTGF1bmNoVk1VcGRhdGVNZXNzYWdlcy5qYXZhCTE1IEp1bCAyMDA4IDIzOjE1
OjA1IC0wMDAwCkBAIC0xMiw2ICsxMiw5IEBACiAKIGltcG9ydCBvcmcuZWNsaXBzZS5vc2dpLnV0
aWwuTkxTOwogCisvKioKKyAqIEBzaW5jZSAxLjEKKyAqLwogcHVibGljIGNsYXNzIExhdW5jaFZN
VXBkYXRlTWVzc2FnZXMgZXh0ZW5kcyBOTFMgewogCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3Ry
aW5nIEJVTkRMRV9OQU1FID0gIm9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92
aXNpb25hbC51aS52aWV3bW9kZWwubGF1bmNoLkxhdW5jaFZNVXBkYXRlTWVzc2FnZXMiOy8vJE5P
Ti1OTFMtMSQKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJv
dmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5jaC9GdWxsU3RhY2tSZWZyZXNoRXZlbnQuamF2YQo9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09ClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVn
aW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2Rl
YnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvRnVsbFN0YWNrUmVm
cmVzaEV2ZW50LmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQpkaWZmIC11IC1yMS4xIEZ1
bGxTdGFja1JlZnJlc2hFdmVudC5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVn
L2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvRnVsbFN0YWNrUmVmcmVz
aEV2ZW50LmphdmEJMyBKdW4gMjAwOCAwNDo1NjoyMiAtMDAwMAkxLjEKKysrIHNyYy9vcmcvZWNs
aXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xhdW5j
aC9GdWxsU3RhY2tSZWZyZXNoRXZlbnQuamF2YQkxNSBKdWwgMjAwOCAyMzoxNTowNSAtMDAwMApA
QCAtMTYsNiArMTYsOCBAQAogLyoqCiAgKiBJbmRpY2F0ZXMgdGhlIGVuZCBvZiBhIHNlcXVlbmNl
IG9mIHN0ZXBzLiBTaG91bGQgYmUgaGFuZGxlZCBsaWtlIGEgc3VzcGVuZGVkCiAgKiBldmVudCB0
byB0cmlnZ2VyIGEgZnVsbCByZWZyZXNoIG9mIHN0YWNrIGZyYW1lcy4KKyAqIAorICogQHNpbmNl
IDEuMQogICovCiBwdWJsaWMgY2xhc3MgRnVsbFN0YWNrUmVmcmVzaEV2ZW50IGV4dGVuZHMgQWJz
dHJhY3RETUV2ZW50PElFeGVjdXRpb25ETUNvbnRleHQ+IHsKICAgICAKSW5kZXg6IHNyYy9vcmcv
ZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL2xh
dW5jaC9EZWxheWVkU3RhY2tSZWZyZXNoVXBkYXRlUG9saWN5LmphdmEKPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1Mg
ZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9w
cm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0RlbGF5ZWRTdGFja1JlZnJlc2hVcGRhdGVQ
b2xpY3kuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4zCmRpZmYgLXUgLXIxLjMgRGVsYXll
ZFN0YWNrUmVmcmVzaFVwZGF0ZVBvbGljeS5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvRGVsYXllZFN0
YWNrUmVmcmVzaFVwZGF0ZVBvbGljeS5qYXZhCTE3IEp1biAyMDA4IDIxOjAwOjMyIC0wMDAwCTEu
MworKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91
aS92aWV3bW9kZWwvbGF1bmNoL0RlbGF5ZWRTdGFja1JlZnJlc2hVcGRhdGVQb2xpY3kuamF2YQkx
NSBKdWwgMjAwOCAyMzoxNTowNSAtMDAwMApAQCAtMzEsNiArMzEsOCBAQAogICogVGhlIHVuZGVy
bHlpbmcgYmFzZSB1cGRhdGUgcG9saWN5IGlzIGNvbnNpZGVyZWQgZm9yIGNvbnRhaW5lciBjb250
ZXh0cyBvbmx5LgogICogSW4gb3RoZXIgY2FzZXMgdGhlIGNhY2hlIGRhdGEgaXMgYWx3YXlzIGZs
dXNoZWQuCiAgKiA8L3A+CisgKiAKKyAqIEBzaW5jZSAxLjEKICAqLwogcHVibGljIGNsYXNzIERl
bGF5ZWRTdGFja1JlZnJlc2hVcGRhdGVQb2xpY3kgZXh0ZW5kcyBVcGRhdGVQb2xpY3lEZWNvcmF0
b3IgewogCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zp
c2lvbmFsL3VpL3ZpZXdtb2RlbC9sYXVuY2gvQWJzdHJhY3RMYXVuY2hWTVByb3ZpZGVyLmphdmEK
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1
Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9k
ZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1
bmNoVk1Qcm92aWRlci5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjMKZGlmZiAtdSAtcjEu
MyBBYnN0cmFjdExhdW5jaFZNUHJvdmlkZXIuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2Rz
Zi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvbGF1bmNoL0Fic3RyYWN0
TGF1bmNoVk1Qcm92aWRlci5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQwIC0wMDAwCTEuMworKysg
c3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3
bW9kZWwvbGF1bmNoL0Fic3RyYWN0TGF1bmNoVk1Qcm92aWRlci5qYXZhCTE1IEp1bCAyMDA4IDIz
OjE1OjA0IC0wMDAwCkBAIC01NCw3ICs1NCw3IEBACiAKIAogLyoqCi0gKiAKKyAqIEBzaW5jZSAx
LjEKICAqLwogQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9uIikKIHB1YmxpYyBjbGFzcyBB
YnN0cmFjdExhdW5jaFZNUHJvdmlkZXIgZXh0ZW5kcyBBYnN0cmFjdERNVk1Qcm92aWRlciAKQEAg
LTgxLDIwICs4MSw3IEBACiAgICAgICAgIAogICAgICAgICBmUHJlZmVyZW5jZXNMaXN0ZW5lciA9
IG5ldyBJUHJvcGVydHlDaGFuZ2VMaXN0ZW5lcigpIHsKIAkJCXB1YmxpYyB2b2lkIHByb3BlcnR5
Q2hhbmdlKGZpbmFsIFByb3BlcnR5Q2hhbmdlRXZlbnQgZXZlbnQpIHsKLQkJCQlTdHJpbmcgcHJv
cGVydHkgPSBldmVudC5nZXRQcm9wZXJ0eSgpOwotCQkJCWlmIChJRHNmRGVidWdVSUNvbnN0YW50
cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUX0VOQUJMRS5lcXVhbHMocHJvcGVydHkpCi0JCQkJCQl8
fCBJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlULmVxdWFscyhwcm9w
ZXJ0eSkpIHsKLQkJCQkJaWYgKHN0b3JlLmdldEJvb2xlYW4oSURzZkRlYnVnVUlDb25zdGFudHMu
UFJFRl9TVEFDS19GUkFNRV9MSU1JVF9FTkFCTEUpKSB7Ci0JCQkgICAgICAgIAlnZXRQcmVzZW50
YXRpb25Db250ZXh0KCkuc2V0UHJvcGVydHkoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFD
S19GUkFNRV9MSU1JVCwgc3RvcmUuZ2V0SW50KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RB
Q0tfRlJBTUVfTElNSVQpKTsKLQkJCQkJfSBlbHNlIHsKLQkJCSAgICAgICAgCWdldFByZXNlbnRh
dGlvbkNvbnRleHQoKS5zZXRQcm9wZXJ0eShJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNL
X0ZSQU1FX0xJTUlULCBudWxsKTsKLQkJCQkJfQotCQkJCQlnZXRFeGVjdXRvcigpLmV4ZWN1dGUo
bmV3IERzZlJ1bm5hYmxlKCkgewotCQkJCQkgICAgcHVibGljIHZvaWQgcnVuKCkgewotCQkJCQkg
ICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KTsKLQkJCQkJICAgIH0KLQkJCQkJfSk7Ci0JCQkJfQor
CQkJCWhhbmRsZVByb3BlcnR5Q2hhbmdlZChzdG9yZSwgZXZlbnQpOwogCQkJfX07CiAgICAgICAg
IHN0b3JlLmFkZFByb3BlcnR5Q2hhbmdlTGlzdGVuZXIoZlByZWZlcmVuY2VzTGlzdGVuZXIpOwog
ICAgIH0KQEAgLTEyOCwzMCArMTE1LDMzIEBACiAgICAgfQogCiAgICAgQE92ZXJyaWRlCi0gICAg
cHVibGljIHZvaWQgaGFuZGxlRXZlbnQoT2JqZWN0IGV2ZW50KSB7CisgICAgcHVibGljIHZvaWQg
aGFuZGxlRXZlbnQoT2JqZWN0IGV2ZW50LCBmaW5hbCBSZXF1ZXN0TW9uaXRvciBybSkgewogICAg
ICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBEb3VibGVDbGlja0V2ZW50ICYmICFpc0Rpc3Bvc2Vk
KCkpIHsKICAgICAgICAgICAgIGZpbmFsIElTZWxlY3Rpb24gc2VsZWN0aW9uPSAoKERvdWJsZUNs
aWNrRXZlbnQpIGV2ZW50KS5nZXRTZWxlY3Rpb24oKTsKICAgICAgICAgICAgIGlmIChzZWxlY3Rp
b24gaW5zdGFuY2VvZiBJU3RydWN0dXJlZFNlbGVjdGlvbikgewogICAgICAgICAgICAgICAgIE9i
amVjdCBlbGVtZW50PSAoKElTdHJ1Y3R1cmVkU2VsZWN0aW9uKSBzZWxlY3Rpb24pLmdldEZpcnN0
RWxlbWVudCgpOwogICAgICAgICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSW5jb21w
bGV0ZVN0YWNrVk1Db250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgIEluY29tcGxldGVTdGFj
a1ZNQ29udGV4dCBpbmNTdGFja1ZtYyA9ICgoSW5jb21wbGV0ZVN0YWNrVk1Db250ZXh0KSBlbGVt
ZW50KTsgCi0gICAgICAgICAgICAgICAgICAgIElWTU5vZGUgbm9kZSA9ICgoSW5jb21wbGV0ZVN0
YWNrVk1Db250ZXh0KSBlbGVtZW50KS5nZXRWTU5vZGUoKTsKLSAgICAgICAgICAgICAgICAgICAg
aWYgKGluY1N0YWNrVm1jLmdldFZNTm9kZSgpIGluc3RhbmNlb2YgU3RhY2tGcmFtZXNWTU5vZGUp
IHsKKyAgICAgICAgICAgICAgICAgICAgSVZNTm9kZSBub2RlID0gaW5jU3RhY2tWbWMuZ2V0Vk1O
b2RlKCk7CisgICAgICAgICAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgU3RhY2tGcmFt
ZXNWTU5vZGUgJiYgbm9kZS5nZXRWTVByb3ZpZGVyKCkgPT0gdGhpcykgewogICAgICAgICAgICAg
ICAgICAgICAgICAgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVDdHg9IGluY1N0YWNrVm1jLmdldEV4
ZWN1dGlvbkRNQ29udGV4dCgpOwogCQkJCQkJKChTdGFja0ZyYW1lc1ZNTm9kZSkgbm9kZSkuaW5j
cmVtZW50U3RhY2tGcmFtZUxpbWl0KGV4ZUN0eCk7CiAJCQkJCQkvLyByZXBsYWNlIGRvdWJsZSBj
bGljayBldmVudCB3aXRoIGV4cGFuZCBzdGFjayBldmVudAogCQkJCQkJZmluYWwgRXhwYW5kU3Rh
Y2tFdmVudCBleHBhbmRTdGFja0V2ZW50ID0gbmV3IEV4cGFuZFN0YWNrRXZlbnQoZXhlQ3R4KTsK
IAkJCQkJCWdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVubmFibGUoKSB7CiAJCQkJCQkg
ICAgcHVibGljIHZvaWQgcnVuKCkgewotCQkJCQkJICAgICAgICBoYW5kbGVFdmVudChleHBhbmRT
dGFja0V2ZW50KTsKKwkJCQkJCSAgICAgICAgaGFuZGxlRXZlbnQoZXhwYW5kU3RhY2tFdmVudCwg
bnVsbCk7CiAJCQkJCQkgICAgfQogCQkJCQkJfSk7CiAgICAgICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9CisgICAgICAgICAgICBpZiAocm0gIT0gbnVs
bCkgeworICAgICAgICAgICAgCXJtLmRvbmUoKTsKKyAgICAgICAgICAgIH0KICAgICAgICAgICAg
IHJldHVybjsKICAgICAgICAgfQotICAgIAlzdXBlci5oYW5kbGVFdmVudChldmVudCk7CisgICAg
CXN1cGVyLmhhbmRsZUV2ZW50KGV2ZW50LCBybSk7CiAgICAgfQogCiAgICAgQE92ZXJyaWRlCkBA
IC0xNzcsNyArMTY3LDcgQEAKIAkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjaGVk
dWxlZEZ1dHVyZTw/PiBmdXR1cmU9IGZSZWZyZXNoU3RhY2tGcmFtZXNGdXR1cmVzLmdldChleGVD
b250ZXh0KTsKIAkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdXR1cmUgIT0g
bnVsbCAmJiAhaXNEaXNwb3NlZCgpKSB7CiAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZlJlZnJlc2hTdGFja0ZyYW1lc0Z1dHVyZXMucmVtb3ZlKGV4ZUNvbnRleHQpOwotCSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KG5ldyBGdWxsU3Rh
Y2tSZWZyZXNoRXZlbnQoZXhlQ29udGV4dCkpOworCSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGhhbmRsZUV2ZW50KG5ldyBGdWxsU3RhY2tSZWZyZXNoRXZlbnQoZXhlQ29udGV4
dCksIG51bGwpOwogCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogCSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB9fSk7CiAJICAgICAgICAgICAgICAgICAgICB9CkBAIC0yNzYs
NCArMjY2LDIxIEBACiAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICB9CiAKKwlwcm90ZWN0ZWQg
dm9pZCBoYW5kbGVQcm9wZXJ0eUNoYW5nZWQoZmluYWwgSVByZWZlcmVuY2VTdG9yZSBzdG9yZSwg
ZmluYWwgUHJvcGVydHlDaGFuZ2VFdmVudCBldmVudCkgeworCQlTdHJpbmcgcHJvcGVydHkgPSBl
dmVudC5nZXRQcm9wZXJ0eSgpOworCQlpZiAoSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFD
S19GUkFNRV9MSU1JVF9FTkFCTEUuZXF1YWxzKHByb3BlcnR5KQorCQkJCXx8IElEc2ZEZWJ1Z1VJ
Q29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQuZXF1YWxzKHByb3BlcnR5KSkgeworCQkJ
aWYgKHN0b3JlLmdldEJvb2xlYW4oSURzZkRlYnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFN
RV9MSU1JVF9FTkFCTEUpKSB7CisJCSAgICAJZ2V0UHJlc2VudGF0aW9uQ29udGV4dCgpLnNldFBy
b3BlcnR5KElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIHN0b3Jl
LmdldEludChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlUKSk7CisJ
CQl9IGVsc2UgeworCQkgICAgCWdldFByZXNlbnRhdGlvbkNvbnRleHQoKS5zZXRQcm9wZXJ0eShJ
RHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX1NUQUNLX0ZSQU1FX0xJTUlULCBudWxsKTsKKwkJCX0K
KwkJCWdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVubmFibGUoKSB7CisJCQkgICAgcHVi
bGljIHZvaWQgcnVuKCkgeworCQkJICAgICAgICBoYW5kbGVFdmVudChldmVudCk7CisJCQkgICAg
fQorCQkJfSk7CisJCX0KKwl9CisKIH0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2RzZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdp
bnMvb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnVpL3NyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVi
dWcvaW50ZXJuYWwvdWkvcHJlZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhLHYK
cmV0cmlldmluZyByZXZpc2lvbiAxLjEKZGlmZiAtdSAtcjEuMSBNZXNzYWdlc0ZvclByZWZlcmVu
Y2VzLmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvdWkvcHJl
ZmVyZW5jZXMvTWVzc2FnZXNGb3JQcmVmZXJlbmNlcy5qYXZhCTI0IEp1biAyMDA4IDE3OjM0OjQw
IC0wMDAwCTEuMQorKysgc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9w
cmVmZXJlbmNlcy9NZXNzYWdlc0ZvclByZWZlcmVuY2VzLmphdmEJMTUgSnVsIDIwMDggMjM6MTU6
MDYgLTAwMDAKQEAgLTIwLDggKzIwLDEyIEBACiAKIAlwdWJsaWMgc3RhdGljIFN0cmluZyBEc2ZE
ZWJ1Z1ByZWZlcmVuY2VQYWdlX2Rlc2NyaXB0aW9uOwogCXB1YmxpYyBzdGF0aWMgU3RyaW5nIERz
ZkRlYnVnUHJlZmVyZW5jZVBhZ2VfbGltaXRTdGFja0ZyYW1lc19sYWJlbDsKKworCXB1YmxpYyBz
dGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfbWluU3RlcEludGVydmFsX2xhYmVs
OwogCXB1YmxpYyBzdGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfcGVyZm9ybWFu
Y2VHcm91cF9sYWJlbDsKIAorCXB1YmxpYyBzdGF0aWMgU3RyaW5nIERzZkRlYnVnUHJlZmVyZW5j
ZVBhZ2Vfc3luY1N0ZXBwaW5nX2xhYmVsOworCiAJc3RhdGljIHsKIAkJLy8gaW5pdGlhbGl6ZSBy
ZXNvdXJjZSBidW5kbGUKIAkJTkxTLmluaXRpYWxpemVNZXNzYWdlcyhCVU5ETEVfTkFNRSwgTWVz
c2FnZXNGb3JQcmVmZXJlbmNlcy5jbGFzcyk7CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2
YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9w
bHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2
YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4xCmRpZmYgLXUgLXIxLjEgRHNmRGVidWdQcmVmZXJl
bmNlUGFnZS5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Vp
L3ByZWZlcmVuY2VzL0RzZkRlYnVnUHJlZmVyZW5jZVBhZ2UuamF2YQkyNCBKdW4gMjAwOCAxNzoz
NDo0MCAtMDAwMAkxLjEKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwv
dWkvcHJlZmVyZW5jZXMvRHNmRGVidWdQcmVmZXJlbmNlUGFnZS5qYXZhCTE1IEp1bCAyMDA4IDIz
OjE1OjA2IC0wMDAwCkBAIC0xMiw2ICsxMiw3IEBACiAKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5kZC5kc2YuZGVidWcudWkuSURzZkRlYnVnVUlDb25zdGFudHM7CitpbXBvcnQgb3JnLmVjbGlw
c2UuamZhY2UucHJlZmVyZW5jZS5Cb29sZWFuRmllbGRFZGl0b3I7CiBpbXBvcnQgb3JnLmVjbGlw
c2UuamZhY2UucHJlZmVyZW5jZS5GaWVsZEVkaXRvclByZWZlcmVuY2VQYWdlOwogaW1wb3J0IG9y
Zy5lY2xpcHNlLmpmYWNlLnByZWZlcmVuY2UuSVByZWZlcmVuY2VTdG9yZTsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZmFjZS5wcmVmZXJlbmNlLkludGVnZXJGaWVsZEVkaXRvcjsKQEAgLTMzLDcgKzM0
LDcgQEAKIAkgKiBNYW5kYXRvcnkgZGVmYXVsdCBjb25zdHJ1Y3RvciAoZXhlY3V0YWJsZSBleHRl
bnNpb24pLgogCSAqLwogCXB1YmxpYyBEc2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlKCkgewotCQlzdXBl
cihHUklEKTsKKwkJc3VwZXIoRkxBVCk7CiAJCUlQcmVmZXJlbmNlU3RvcmUgc3RvcmU9IERzZkRl
YnVnVUlQbHVnaW4uZ2V0RGVmYXVsdCgpLmdldFByZWZlcmVuY2VTdG9yZSgpOwogCQlzZXRQcmVm
ZXJlbmNlU3RvcmUoc3RvcmUpOwogCQlzZXREZXNjcmlwdGlvbihNZXNzYWdlc0ZvclByZWZlcmVu
Y2VzLkRzZkRlYnVnUHJlZmVyZW5jZVBhZ2VfZGVzY3JpcHRpb24pOyAKQEAgLTUzLDI2ICs1NCw1
NCBAQAogCiAJQE92ZXJyaWRlCiAJcHJvdGVjdGVkIHZvaWQgY3JlYXRlRmllbGRFZGl0b3JzKCkg
ewotCQlHcm91cCBwZXJmb3JtYW5jZUdyb3VwPSBuZXcgR3JvdXAoZ2V0RmllbGRFZGl0b3JQYXJl
bnQoKSwgU1dULk5PTkUpOwotCQlwZXJmb3JtYW5jZUdyb3VwLnNldFRleHQoTWVzc2FnZXNGb3JQ
cmVmZXJlbmNlcy5Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFiZWwp
OwotCQlwZXJmb3JtYW5jZUdyb3VwLnNldExheW91dChuZXcgR3JpZExheW91dCgpKTsKLQkJR3Jp
ZERhdGEgZ2Q9IG5ldyBHcmlkRGF0YShHcmlkRGF0YS5GSUxMX0hPUklaT05UQUwpOwotCQlnZC52
ZXJ0aWNhbEluZGVudD0gNTsKLQkJcGVyZm9ybWFuY2VHcm91cC5zZXRMYXlvdXREYXRhKGdkKTsK
LQkJCi0JCUNvbXBvc2l0ZSBpbm5lclBhcmVudD0gbmV3IENvbXBvc2l0ZShwZXJmb3JtYW5jZUdy
b3VwLCBTV1QuTk9ORSk7Ci0JCWlubmVyUGFyZW50LnNldExheW91dChuZXcgR3JpZExheW91dCgp
KTsKLQkJaW5uZXJQYXJlbnQuc2V0TGF5b3V0RGF0YShnZCk7CisJCWZpbmFsIENvbXBvc2l0ZSBw
YXJlbnQ9IGdldEZpZWxkRWRpdG9yUGFyZW50KCk7CisJCWZpbmFsIEdyaWRMYXlvdXQgbGF5b3V0
PSBuZXcgR3JpZExheW91dCgpOworCQlsYXlvdXQubWFyZ2luV2lkdGg9IDA7CisJCXBhcmVudC5z
ZXRMYXlvdXQobGF5b3V0KTsKIAkJCisJCUdyb3VwIHBlcmZvcm1hbmNlR3JvdXA9IG5ldyBHcm91
cChwYXJlbnQsIFNXVC5OT05FKTsKKwkJcGVyZm9ybWFuY2VHcm91cC5zZXRUZXh0KE1lc3NhZ2Vz
Rm9yUHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9wZXJmb3JtYW5jZUdyb3VwX2xh
YmVsKTsKKwkJR3JpZExheW91dCBncm91cExheW91dD0gbmV3IEdyaWRMYXlvdXQoMywgZmFsc2Up
OworCQlwZXJmb3JtYW5jZUdyb3VwLnNldExheW91dChncm91cExheW91dCk7CisJCXBlcmZvcm1h
bmNlR3JvdXAuc2V0TGF5b3V0RGF0YShuZXcgR3JpZERhdGEoR3JpZERhdGEuRklMTF9IT1JJWk9O
VEFMKSk7CisKKwkJLy8gc3RhY2sgZnJhbWUgbGltaXQKIAkJSW50ZWdlckZpZWxkRWRpdG9yIGxp
bWl0RWRpdG9yPSBuZXcgSW50ZWdlcldpdGhCb29sZWFuRmllbGRFZGl0b3IoCiAJCQkJSURzZkRl
YnVnVUlDb25zdGFudHMuUFJFRl9TVEFDS19GUkFNRV9MSU1JVF9FTkFCTEUsIAogCQkJCUlEc2ZE
ZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1RBQ0tfRlJBTUVfTElNSVQsIAogCQkJCU1lc3NhZ2VzRm9y
UHJlZmVyZW5jZXMuRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9saW1pdFN0YWNrRnJhbWVzX2xhYmVs
LCAKLQkJCQlpbm5lclBhcmVudCk7CisJCQkJcGVyZm9ybWFuY2VHcm91cCk7CiAKIAkJbGltaXRF
ZGl0b3Iuc2V0VmFsaWRSYW5nZSgxLCBJbnRlZ2VyLk1BWF9WQUxVRSk7Ci0JCWxpbWl0RWRpdG9y
LmZpbGxJbnRvR3JpZChpbm5lclBhcmVudCwgMyk7CisJCWxpbWl0RWRpdG9yLmZpbGxJbnRvR3Jp
ZChwZXJmb3JtYW5jZUdyb3VwLCAzKTsKIAkJYWRkRmllbGQobGltaXRFZGl0b3IpOworCisJCS8v
IHN5bmMgc3RlcHBpbmcgc3BlZWQKKwkJQm9vbGVhbkZpZWxkRWRpdG9yIHN5bmNTdGVwcGluZ0Vk
aXRvcj0gbmV3IEJvb2xlYW5GaWVsZEVkaXRvcigKKwkJCQlJRHNmRGVidWdVSUNvbnN0YW50cy5Q
UkVGX1NZTkNIUk9OSVpFRF9TVEVQUElOR19FTkFCTEUsCisJCQkJTWVzc2FnZXNGb3JQcmVmZXJl
bmNlcy5Ec2ZEZWJ1Z1ByZWZlcmVuY2VQYWdlX3N5bmNTdGVwcGluZ19sYWJlbCwKKwkJCQlwZXJm
b3JtYW5jZUdyb3VwKTsKKworCQlzeW5jU3RlcHBpbmdFZGl0b3IuZmlsbEludG9HcmlkKHBlcmZv
cm1hbmNlR3JvdXAsIDMpOworCQlhZGRGaWVsZChzeW5jU3RlcHBpbmdFZGl0b3IpOworCisJCS8v
IG1pbmltdW0gc3RlcCBpbnRlcnZhbAorCQlJbnRlZ2VyRmllbGRFZGl0b3IgbWluSW50ZXJ2YWxF
ZGl0b3I9IG5ldyBJbnRlZ2VyRmllbGRFZGl0b3IoCisJCQkJSURzZkRlYnVnVUlDb25zdGFudHMu
UFJFRl9NSU5fU1RFUF9JTlRFUlZBTCwKKwkJCQlNZXNzYWdlc0ZvclByZWZlcmVuY2VzLkRzZkRl
YnVnUHJlZmVyZW5jZVBhZ2VfbWluU3RlcEludGVydmFsX2xhYmVsLAorCQkJCXBlcmZvcm1hbmNl
R3JvdXApOworCisJCW1pbkludGVydmFsRWRpdG9yLnNldFZhbGlkUmFuZ2UoMCwgMTAwMDApOwor
CQltaW5JbnRlcnZhbEVkaXRvci5maWxsSW50b0dyaWQocGVyZm9ybWFuY2VHcm91cCwgMyk7CisJ
CWFkZEZpZWxkKG1pbkludGVydmFsRWRpdG9yKTsKKworCQkvLyBuZWVkIHRvIHNldCBsYXlvdXQg
YWdhaW4KKwkJcGVyZm9ybWFuY2VHcm91cC5zZXRMYXlvdXQoZ3JvdXBMYXlvdXQpOworfQorCisJ
QE92ZXJyaWRlCisJcHJvdGVjdGVkIHZvaWQgYWRqdXN0R3JpZExheW91dCgpIHsKKwkJLy8gZG8g
bm90aGluZwogCX0KIAogfQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRl
cm5hbC91aS9wcmVmZXJlbmNlcy9TdHJpbmdXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmEKPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBzZS5kZC5kc2YvcGx1Z2lu
cy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1
Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9TdHJpbmdXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmph
dmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQpkaWZmIC11IC1yMS4xIFN0cmluZ1dpdGhCb29s
ZWFuRmllbGRFZGl0b3IuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRl
cm5hbC91aS9wcmVmZXJlbmNlcy9TdHJpbmdXaXRoQm9vbGVhbkZpZWxkRWRpdG9yLmphdmEJMjQg
SnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2Rl
YnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL1N0cmluZ1dpdGhCb29sZWFuRmllbGRFZGl0b3Iu
amF2YQkxNSBKdWwgMjAwOCAyMzoxNTowNiAtMDAwMApAQCAtMTQsOCArMTQsMTAgQEAKIGltcG9y
dCBvcmcuZWNsaXBzZS5zd3QuU1dUOwogaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ldmVudHMuU2Vs
ZWN0aW9uQWRhcHRlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5zd3QuZXZlbnRzLlNlbGVjdGlvbkV2
ZW50OworaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5sYXlvdXQuR3JpZExheW91dDsKIGltcG9ydCBv
cmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5CdXR0b247CiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0Lndp
ZGdldHMuQ29tcG9zaXRlOworaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkxhYmVsOwog
CiAvKioKICAqIEEgc3RyaW5nIGZpZWxkIGVkaXRvciB3aXRoIGFuIGVuYWJsZW1lbnQgY2hlY2sg
Ym94LgpAQCAtNDcsMjAgKzQ5LDE0IEBACiAJCXN1cGVyLmRvRmlsbEludG9HcmlkKHBhcmVudCwg
bnVtQ29sdW1ucyk7CiAJfQogCi0JQE92ZXJyaWRlCi0JcHVibGljIGludCBnZXROdW1iZXJPZkNv
bnRyb2xzKCkgewotCQlyZXR1cm4gc3VwZXIuZ2V0TnVtYmVyT2ZDb250cm9scygpICsgMTsKLQl9
Ci0KLSAgICBAT3ZlcnJpZGUKLQlwcm90ZWN0ZWQgdm9pZCBhZGp1c3RGb3JOdW1Db2x1bW5zKGlu
dCBudW1Db2x1bW5zKSB7Ci0gICAgCS8vIHRoZSBjaGVja2JveCB1c2VzIG9uZSBjb2x1bW4KLSAg
ICAJc3VwZXIuYWRqdXN0Rm9yTnVtQ29sdW1ucyhudW1Db2x1bW5zIC0gMSk7Ci0gICAgfQotCiAJ
cHJpdmF0ZSBCdXR0b24gZ2V0Q2hlY2tib3hDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsKIAkJ
aWYgKGZDaGVja2JveCA9PSBudWxsKSB7Ci0JCQlmQ2hlY2tib3g9IG5ldyBCdXR0b24ocGFyZW50
LCBTV1QuQ0hFQ0spOworCQkJQ29tcG9zaXRlIGlubmVyPSBuZXcgQ29tcG9zaXRlKHBhcmVudCwg
U1dULk5VTEwpOworCQkJZmluYWwgR3JpZExheW91dCBsYXlvdXQ9IG5ldyBHcmlkTGF5b3V0KDIs
IGZhbHNlKTsKKwkJCWxheW91dC5tYXJnaW5XaWR0aCA9IDA7CisJCQlpbm5lci5zZXRMYXlvdXQo
bGF5b3V0KTsKKwkJCWZDaGVja2JveD0gbmV3IEJ1dHRvbihpbm5lciwgU1dULkNIRUNLKTsKKwkJ
CWdldExhYmVsQ29udHJvbChpbm5lcik7CiAJCQlmQ2hlY2tib3guYWRkU2VsZWN0aW9uTGlzdGVu
ZXIobmV3IFNlbGVjdGlvbkFkYXB0ZXIoKSB7CiAJCQkJQE92ZXJyaWRlCiAJCQkJcHVibGljIHZv
aWQgd2lkZ2V0U2VsZWN0ZWQoU2VsZWN0aW9uRXZlbnQgZSkgewpAQCAtNzAsMTEgKzY2LDIyIEBA
CiAJCQkJfQogCQkJfSk7CiAJCX0gZWxzZSB7Ci0JCQljaGVja1BhcmVudChmQ2hlY2tib3gsIHBh
cmVudCk7CisJCQljaGVja1BhcmVudChmQ2hlY2tib3guZ2V0UGFyZW50KCksIHBhcmVudCk7CiAJ
CX0KIAkJcmV0dXJuIGZDaGVja2JveDsKIAl9CiAKKwlAT3ZlcnJpZGUKKwlwdWJsaWMgTGFiZWwg
Z2V0TGFiZWxDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsKKwkJZmluYWwgTGFiZWwgbGFiZWw9
IGdldExhYmVsQ29udHJvbCgpOworCQlpZiAobGFiZWwgPT0gbnVsbCkgeworCQkJcmV0dXJuIHN1
cGVyLmdldExhYmVsQ29udHJvbChwYXJlbnQpOworCQl9IGVsc2UgeworCQkJY2hlY2tQYXJlbnQo
bGFiZWwuZ2V0UGFyZW50KCksIHBhcmVudCk7CisJCX0KKwkJcmV0dXJuIGxhYmVsOworCX0KKwog
CXByb3RlY3RlZCB2b2lkIHZhbHVlQ2hhbmdlZChib29sZWFuIG9sZFZhbHVlLCBib29sZWFuIG5l
d1ZhbHVlKSB7CiAgICAgICAgIHNldFByZXNlbnRzRGVmYXVsdFZhbHVlKGZhbHNlKTsKICAgICAg
ICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVlKSB7CkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZGQv
ZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0ludGVnZXJXaXRoQm9vbGVhbkZpZWxk
RWRpdG9yLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcuZWNsaXBz
ZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9JbnRlZ2VyV2l0aEJvb2xl
YW5GaWVsZEVkaXRvci5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjEKZGlmZiAtdSAtcjEu
MSBJbnRlZ2VyV2l0aEJvb2xlYW5GaWVsZEVkaXRvci5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0ludGVnZXJXaXRoQm9vbGVhbkZp
ZWxkRWRpdG9yLmphdmEJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAwMDAJMS4xCisrKyBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL0ludGVnZXJXaXRo
Qm9vbGVhbkZpZWxkRWRpdG9yLmphdmEJMTUgSnVsIDIwMDggMjM6MTU6MDYgLTAwMDAKQEAgLTE0
LDggKzE0LDEwIEBACiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LlNXVDsKIGltcG9ydCBvcmcuZWNs
aXBzZS5zd3QuZXZlbnRzLlNlbGVjdGlvbkFkYXB0ZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0
LmV2ZW50cy5TZWxlY3Rpb25FdmVudDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5zd3QubGF5b3V0Lkdy
aWRMYXlvdXQ7CiBpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQnV0dG9uOwogaW1wb3J0
IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkNvbXBvc2l0ZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5z
d3Qud2lkZ2V0cy5MYWJlbDsKIAogLyoqCiAgKiBBbiBpbnRlZ2VyIGZpZWxkIGVkaXRvciB3aXRo
IGFuIGVuYWJsZW1lbnQgY2hlY2sgYm94LgpAQCAtNDIsMjAgKzQ0LDE0IEBACiAJCXN1cGVyLmRv
RmlsbEludG9HcmlkKHBhcmVudCwgbnVtQ29sdW1ucyk7CiAJfQogCi0JQE92ZXJyaWRlCi0JcHVi
bGljIGludCBnZXROdW1iZXJPZkNvbnRyb2xzKCkgewotCQlyZXR1cm4gc3VwZXIuZ2V0TnVtYmVy
T2ZDb250cm9scygpICsgMTsKLQl9Ci0KLSAgICBAT3ZlcnJpZGUKLQlwcm90ZWN0ZWQgdm9pZCBh
ZGp1c3RGb3JOdW1Db2x1bW5zKGludCBudW1Db2x1bW5zKSB7Ci0gICAgCS8vIHRoZSBjaGVja2Jv
eCB1c2VzIG9uZSBjb2x1bW4KLSAgICAJc3VwZXIuYWRqdXN0Rm9yTnVtQ29sdW1ucyhudW1Db2x1
bW5zIC0gMSk7Ci0gICAgfQotCiAJcHJpdmF0ZSBCdXR0b24gZ2V0Q2hlY2tib3hDb250cm9sKENv
bXBvc2l0ZSBwYXJlbnQpIHsKIAkJaWYgKGZDaGVja2JveCA9PSBudWxsKSB7Ci0JCQlmQ2hlY2ti
b3g9IG5ldyBCdXR0b24ocGFyZW50LCBTV1QuQ0hFQ0spOworCQkJQ29tcG9zaXRlIGlubmVyPSBu
ZXcgQ29tcG9zaXRlKHBhcmVudCwgU1dULk5VTEwpOworCQkJZmluYWwgR3JpZExheW91dCBsYXlv
dXQ9IG5ldyBHcmlkTGF5b3V0KDIsIGZhbHNlKTsKKwkJCWxheW91dC5tYXJnaW5XaWR0aCA9IDA7
CisJCQlpbm5lci5zZXRMYXlvdXQobGF5b3V0KTsKKwkJCWZDaGVja2JveD0gbmV3IEJ1dHRvbihp
bm5lciwgU1dULkNIRUNLKTsKKwkJCWdldExhYmVsQ29udHJvbChpbm5lcik7CiAJCQlmQ2hlY2ti
b3guYWRkU2VsZWN0aW9uTGlzdGVuZXIobmV3IFNlbGVjdGlvbkFkYXB0ZXIoKSB7CiAJCQkJQE92
ZXJyaWRlCiAJCQkJcHVibGljIHZvaWQgd2lkZ2V0U2VsZWN0ZWQoU2VsZWN0aW9uRXZlbnQgZSkg
ewpAQCAtNjUsMTEgKzYxLDIyIEBACiAJCQkJfQogCQkJfSk7CiAJCX0gZWxzZSB7Ci0JCQljaGVj
a1BhcmVudChmQ2hlY2tib3gsIHBhcmVudCk7CisJCQljaGVja1BhcmVudChmQ2hlY2tib3guZ2V0
UGFyZW50KCksIHBhcmVudCk7CiAJCX0KIAkJcmV0dXJuIGZDaGVja2JveDsKIAl9CiAKKwlAT3Zl
cnJpZGUKKwlwdWJsaWMgTGFiZWwgZ2V0TGFiZWxDb250cm9sKENvbXBvc2l0ZSBwYXJlbnQpIHsK
KwkJZmluYWwgTGFiZWwgbGFiZWw9IGdldExhYmVsQ29udHJvbCgpOworCQlpZiAobGFiZWwgPT0g
bnVsbCkgeworCQkJcmV0dXJuIHN1cGVyLmdldExhYmVsQ29udHJvbChwYXJlbnQpOworCQl9IGVs
c2UgeworCQkJY2hlY2tQYXJlbnQobGFiZWwuZ2V0UGFyZW50KCksIHBhcmVudCk7CisJCX0KKwkJ
cmV0dXJuIGxhYmVsOworCX0KKwogCXByb3RlY3RlZCB2b2lkIHZhbHVlQ2hhbmdlZChib29sZWFu
IG9sZFZhbHVlLCBib29sZWFuIG5ld1ZhbHVlKSB7CiAgICAgICAgIHNldFByZXNlbnRzRGVmYXVs
dFZhbHVlKGZhbHNlKTsKICAgICAgICAgaWYgKG9sZFZhbHVlICE9IG5ld1ZhbHVlKSB7CkluZGV4
OiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZlcmVuY2VzL21l
c3NhZ2VzLnByb3BlcnRpZXMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZHNkcC9vcmcu
ZWNsaXBzZS5kZC5kc2YvcGx1Z2lucy9vcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcudWkvc3JjL29y
Zy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC91aS9wcmVmZXJlbmNlcy9tZXNzYWdlcy5w
cm9wZXJ0aWVzLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjEKZGlmZiAtdSAtcjEuMSBtZXNzYWdl
cy5wcm9wZXJ0aWVzCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Vp
L3ByZWZlcmVuY2VzL21lc3NhZ2VzLnByb3BlcnRpZXMJMjQgSnVuIDIwMDggMTc6MzQ6NDAgLTAw
MDAJMS4xCisrKyBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3VpL3ByZWZl
cmVuY2VzL21lc3NhZ2VzLnByb3BlcnRpZXMJMTUgSnVsIDIwMDggMjM6MTU6MDYgLTAwMDAKQEAg
LTExLDQgKzExLDYgQEAKIAogRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9kZXNjcmlwdGlvbj1HZW5l
cmFsIHNldHRpbmdzIGZvciBkZWJ1Z2dpbmcgd2l0aCBEU0Y6CiBEc2ZEZWJ1Z1ByZWZlcmVuY2VQ
YWdlX2xpbWl0U3RhY2tGcmFtZXNfbGFiZWw9TGltaXQgbnVtYmVyIG9mIHN0YWNrIGZyYW1lcyB0
bworRHNmRGVidWdQcmVmZXJlbmNlUGFnZV9taW5TdGVwSW50ZXJ2YWxfbGFiZWw9TWluaW11bSBp
bnRlcnZhbCBiZXR3ZWVuIHN0ZXBzIChpbiBtaWxsaXNlY29uZHMpCiBEc2ZEZWJ1Z1ByZWZlcmVu
Y2VQYWdlX3BlcmZvcm1hbmNlR3JvdXBfbGFiZWw9UGVyZm9ybWFuY2UKK0RzZkRlYnVnUHJlZmVy
ZW5jZVBhZ2Vfc3luY1N0ZXBwaW5nX2xhYmVsPVN5bmNocm9uaXplIHN0ZXBwaW5nIHNwZWVkIHdp
dGggVUkgdXBkYXRlcwpJbmRleDogc3JjL29yZy9lY2xpcHNlL2RkL2RzZi9kZWJ1Zy91aS9zb3Vy
Y2Vsb29rdXAvRHNmU291cmNlRGlzcGxheUFkYXB0ZXIuamF2YQo9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxl
OiAvY3Zzcm9vdC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1
cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZhLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjUK
ZGlmZiAtdSAtcjEuNSBEc2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZhCi0tLSBzcmMvb3JnL2Vj
bGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRl
ci5qYXZhCTMgSnVuIDIwMDggMjA6MTc6MTMgLTAwMDAJMS41CisrKyBzcmMvb3JnL2VjbGlwc2Uv
ZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9Ec2ZTb3VyY2VEaXNwbGF5QWRhcHRlci5qYXZh
CTE1IEp1bCAyMDA4IDIzOjE1OjA3IC0wMDAwCkBAIC0zMywxMCArMzMsMTQgQEAKIGltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5UaHJlYWRTYWZlOwogaW1wb3J0IG9yZy5lY2xp
cHNlLmRkLmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGF0YW1vZGVsLklETUNvbnRleHQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVn
LmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXI7Citp
bXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZp
ZXdtb2RlbC5TdGVwcGluZ0NvbnRyb2xsZXIuSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50Owor
aW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51aS52
aWV3bW9kZWwuU3RlcHBpbmdDb250cm9sbGVyLlN0ZXBwaW5nVGltZWRPdXRFdmVudDsKIGltcG9y
dCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsK
IGltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JU3RhY2s7CiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuU3RlcFF1ZXVlTWFuYWdlcjsKK2ltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1D
b250ZXh0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250
cm9sLlN0YXRlQ2hhbmdlUmVhc29uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5z
ZXJ2aWNlLklTdGFjay5JRnJhbWVETUNvbnRleHQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNm
LmRlYnVnLnNlcnZpY2UuSVN0YWNrLklGcmFtZURNRGF0YTsKQEAgLTg2LDcgKzkwLDcgQEAKICAq
IGRpc3BhdGNoIHRocmVhZCB0byBzeW5jaHJvbml6ZSBhY2Nlc3MgdG8gdGhlIHN0YXRlIGRhdGEg
b2YgdGhlIHJ1bm5pbmcgam9icy4KICAqLwogQFRocmVhZFNhZmUKLXB1YmxpYyBjbGFzcyBEc2ZT
b3VyY2VEaXNwbGF5QWRhcHRlciBpbXBsZW1lbnRzIElTb3VyY2VEaXNwbGF5IAorcHVibGljIGNs
YXNzIERzZlNvdXJjZURpc3BsYXlBZGFwdGVyIGltcGxlbWVudHMgSVNvdXJjZURpc3BsYXksIElT
dGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudAogewogICAgIC8qKgogCSAqIEEgam9iIHRvIHBlcmZv
cm0gc291cmNlIGxvb2t1cCBvbiB0aGUgZ2l2ZW4gRE1DLgpAQCAtNDEyLDggKzQxNiwxNiBAQAog
ICAgIHByaXZhdGUgRGlzcGxheUpvYiBmUGVuZGluZ0Rpc3BsYXlKb2I7CiAgICAgcHJpdmF0ZSBD
bGVhcmluZ0pvYiBmUnVubmluZ0NsZWFyaW5nSm9iOwogICAgIHByaXZhdGUgTGlzdDxJUnVuQ29u
dHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0PiBmUGVuZGluZ0V4ZWNEbWNzVG9DbGVhciA9IG5ldyBM
aW5rZWRMaXN0PElSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQ+KCk7Ci0gICAgCisJcHJp
dmF0ZSBTdGVwcGluZ0NvbnRyb2xsZXIgZkNvbnRyb2xsZXI7CisgCiAgICAgcHVibGljIERzZlNv
dXJjZURpc3BsYXlBZGFwdGVyKERzZlNlc3Npb24gc2Vzc2lvbiwgSVNvdXJjZUxvb2t1cERpcmVj
dG9yIHNvdXJjZUxvY2F0b3IpIHsKKyAgICAJdGhpcyhzZXNzaW9uLCBzb3VyY2VMb2NhdG9yLCBu
dWxsKTsKKyAgICB9CisKKyAgICAvKioKKwkgKiBAc2luY2UgMS4xCisJICovCisgICAgcHVibGlj
IERzZlNvdXJjZURpc3BsYXlBZGFwdGVyKERzZlNlc3Npb24gc2Vzc2lvbiwgSVNvdXJjZUxvb2t1
cERpcmVjdG9yIHNvdXJjZUxvY2F0b3IsIFN0ZXBwaW5nQ29udHJvbGxlciBjb250cm9sbGVyKSB7
CiAgICAgICAgIGZTZXNzaW9uID0gc2Vzc2lvbjsKICAgICAgICAgZkV4ZWN1dG9yID0gc2Vzc2lv
bi5nZXRFeGVjdXRvcigpOwogICAgICAgICBmU2VydmljZXNUcmFja2VyID0gbmV3IERzZlNlcnZp
Y2VzVHJhY2tlcihEc2ZEZWJ1Z1VJUGx1Z2luLmdldEJ1bmRsZUNvbnRleHQoKSwgc2Vzc2lvbi5n
ZXRJZCgpKTsKQEAgLTQyNCw5ICs0MzYsMTggQEAKICAgICAgICAgZklQTWFuYWdlciA9IG5ldyBJ
bnN0cnVjdGlvblBvaW50ZXJNYW5hZ2VyKCk7CiAgICAgICAgIAogICAgICAgICBmU2Vzc2lvbi5h
ZGRTZXJ2aWNlRXZlbnRMaXN0ZW5lcih0aGlzLCBudWxsKTsKKworICAgICAgICBmQ29udHJvbGxl
ciA9IGNvbnRyb2xsZXI7CisJCWlmIChmQ29udHJvbGxlciAhPSBudWxsKSB7CisJCQlmQ29udHJv
bGxlci5hZGRTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudCh0aGlzKTsKKwkJfQogICAgIH0KICAg
ICAKICAgICBwdWJsaWMgdm9pZCBkaXNwb3NlKCkgeworCQlpZiAoZkNvbnRyb2xsZXIgIT0gbnVs
bCkgeworCQkJZkNvbnRyb2xsZXIucmVtb3ZlU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQodGhp
cyk7CisJCQlmQ29udHJvbGxlciA9IG51bGw7CisJCX0KICAgICAgICAgZlNlc3Npb24ucmVtb3Zl
U2VydmljZUV2ZW50TGlzdGVuZXIodGhpcyk7CiAgICAgICAgIGZTZXJ2aWNlc1RyYWNrZXIuZGlz
cG9zZSgpOwogICAgICAgICBmU291cmNlTG9va3VwLnJlbW92ZVBhcnRpY2lwYW50cyhuZXcgSVNv
dXJjZUxvb2t1cFBhcnRpY2lwYW50W10ge2ZTb3VyY2VMb29rdXBQYXJ0aWNpcGFudH0pOwpAQCAt
NTAwLDYgKzUyMSwxNiBAQAogICAgICAgICAgICAgZlJ1bm5pbmdEaXNwbGF5Sm9iID0gbmV4dERp
c3BsYXlKb2I7CiAgICAgICAgICAgICBmUnVubmluZ0Rpc3BsYXlKb2Iuc2NoZWR1bGUoKTsgICAg
ICAgIAogICAgICAgICB9CisgICAgICAgIGlmIChmQ29udHJvbGxlciAhPSBudWxsKSB7CisgICAg
ICAgIAlmaW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGRtYyA9IERNQ29udGV4dHMuZ2V0QW5jZXN0
b3JPZlR5cGUobG9va3VwUmVzdWx0LmdldERtYygpLCBJRXhlY3V0aW9uRE1Db250ZXh0LmNsYXNz
KTsKKyAgICAgICAgCWlmIChkbWMgIT0gbnVsbCkgeworICAgICAgICAJICAgIGZDb250cm9sbGVy
LmdldFNlc3Npb24oKS5nZXRFeGVjdXRvcigpLmV4ZWN1dGUobmV3IERzZlJ1bm5hYmxlKCkgewor
ICAgICAgICAJICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CisgICAgICAgICAgICAgICAgICAg
ICAgICBmQ29udHJvbGxlci5kb25lU3RlcHBpbmcoZG1jLCBEc2ZTb3VyY2VEaXNwbGF5QWRhcHRl
ci50aGlzKTsKKyAgICAgICAgCSAgICAgICAgfTsKKyAgICAgICAgCSAgICB9KTsKKyAgICAgICAg
CX0KKyAgICAgICAgfQogICAgIH0KIAogICAgIApAQCAtNTU4LDE1ICs1ODksMTcgQEAKICAgICB9
CiAKICAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlcgorICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlz
cGF0Y2hlZChTdGVwcGluZ1RpbWVkT3V0RXZlbnQgZSkgeworICAgICAgICBzdGFydEFubm90YXRp
b25DbGVhcmluZ0pvYihlLmdldERNQ29udGV4dCgpKTsgICAgICAgIAorICAgIH0KKyAgICAKKyAg
ICBARHNmU2VydmljZUV2ZW50SGFuZGxlcgogICAgIHB1YmxpYyB2b2lkIGV2ZW50RGlzcGF0Y2hl
ZChTdGVwUXVldWVNYW5hZ2VyLklTdGVwcGluZ1RpbWVkT3V0RXZlbnQgZSkgewogICAgICAgICBz
dGFydEFubm90YXRpb25DbGVhcmluZ0pvYihlLmdldERNQ29udGV4dCgpKTsgICAgICAgIAotICAg
IH0gICAgCisgICAgfQogICAgIAogICAgIEBEc2ZTZXJ2aWNlRXZlbnRIYW5kbGVyCiAgICAgcHVi
bGljIHZvaWQgZXZlbnREaXNwYXRjaGVkKElSdW5Db250cm9sLklTdXNwZW5kZWRETUV2ZW50IGUp
IHsKLSAgICAgICAgaWYgKGUuZ2V0UmVhc29uKCkgPT0gU3RhdGVDaGFuZ2VSZWFzb24uU1RFUCkg
ewotICAgICAgICAgICAgc3RhcnRBbm5vdGF0aW9uQ2xlYXJpbmdKb2IoZS5nZXRETUNvbnRleHQo
KSk7Ci0gICAgICAgIH0KICAgICAgICAgZlByZXZNb2RlbENvbnRleHQgPSBudWxsOwogICAgIH0K
IH0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvdWkvc291cmNlbG9va3VwL0lu
c3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3Zzcm9v
dC9kc2RwL29yZy5lY2xpcHNlLmRkLmRzZi9wbHVnaW5zL29yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1
Zy51aS9zcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL3VpL3NvdXJjZWxvb2t1cC9JbnN0cnVj
dGlvblBvaW50ZXJNYW5hZ2VyLmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMgpkaWZmIC11
IC1yMS4yIEluc3RydWN0aW9uUG9pbnRlck1hbmFnZXIuamF2YQotLS0gc3JjL29yZy9lY2xpcHNl
L2RkL2RzZi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAvSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlci5q
YXZhCTMwIE1heSAyMDA4IDIyOjU3OjM5IC0wMDAwCTEuMgorKysgc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy91aS9zb3VyY2Vsb29rdXAvSW5zdHJ1Y3Rpb25Qb2ludGVyTWFuYWdlci5qYXZh
CTE1IEp1bCAyMDA4IDIzOjE1OjA3IC0wMDAwCkBAIC0yMSw2ICsyMSw3IEBACiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZHNmLmRhdGFtb2RlbC5ETUNvbnRleHRzOwogaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOwogaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLklTdGFjazsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0OwogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRlYnVnLnVpLkRlYnVnVUlUb29sczsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZWJ1Zy51
aS5JRGVidWdVSUNvbnN0YW50czsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS50ZXh0LlBvc2l0
aW9uOwpAQCAtMzcsNyArMzgsMTcgQEAKIEBUaHJlYWRTYWZlCiBjbGFzcyBJbnN0cnVjdGlvblBv
aW50ZXJNYW5hZ2VyIHsKIAorCS8qKgorCSAqIEN1cnJlbnQgaW5zdHJ1Y3Rpb24gcG9pbnRlciBh
bm5vdGF0aW9uIHR5cGUuCisJICovCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIElEX0NV
UlJFTlRfSVA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5jdXJyZW50SVAiOyAvLyROT04tTkxTLTEk
CisJCiAgICAgLyoqCisJICogU2Vjb25kYXJ5IGluc3RydWN0aW9uIHBvaW50ZXIgYW5ub3RhdGlv
biB0eXBlLgorCSAqLworCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBJRF9TRUNPTkRBUllf
SVA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5zZWNvbmRhcnlJUCI7IC8vJE5PTi1OTFMtMSQKKwor
CS8qKgogICAgICAqIEVkaXRvciBhbm5vdGF0aW9uIG9iamVjdCBmb3IgaW5zdHJ1Y3Rpb24gcG9p
bnRlcnMuCiAgICAgICovCiAgICAgc3RhdGljIGNsYXNzIElQQW5ub3RhdGlvbiBleHRlbmRzIEFu
bm90YXRpb24gewpAQCAtNjEsNyArNzIsNyBAQAogICAgICAgICAgICAgZkZyYW1lID0gZnJhbWU7
CiAgICAgICAgICAgICBmSW1hZ2UgPSBpbWFnZTsKICAgICAgICAgfQotICAgICAgICAgICAgCisg
ICAgICAgIAogICAgICAgICAvKioKICAgICAgICAgICogUmV0dXJucyB0aGlzIGFubm90YXRpb24n
cyBpbWFnZS4KICAgICAgICAgICogCkBAIC0xNzAsMTUgKzE4MSwxOSBAQAogICAgICAgICBTdHJp
bmcgdGV4dDsKICAgICAgICAgSW1hZ2UgaW1hZ2U7CiAgICAgICAgIGlmIChpc1RvcEZyYW1lKSB7
Ci0gICAgICAgICAgICBpZCA9ICJvcmcuZWNsaXBzZS5kZC5kZWJ1Zy5jdXJyZW50SVAiOyAvLyRO
T04tTkxTLTEkCisgICAgICAgICAgICBpZCA9IElEX0NVUlJFTlRfSVA7CiAgICAgICAgICAgICB0
ZXh0ID0gIkRlYnVnIEN1cnJlbnQgSW5zdHJ1Y3Rpb24gUG9pbnRlciI7IC8vJE5PTi1OTFMtMSQK
ICAgICAgICAgICAgIGltYWdlID0gRGVidWdVSVRvb2xzLmdldEltYWdlKElEZWJ1Z1VJQ29uc3Rh
bnRzLklNR19PQkpTX0lOU1RSVUNUSU9OX1BPSU5URVJfVE9QKTsKICAgICAgICAgfSBlbHNlIHsK
LSAgICAgICAgICAgIGlkID0gIm9yZy5lY2xpcHNlLmRkLmRlYnVnLnNlY29uZGFyeUlQIjsgLy8k
Tk9OLU5MUy0xJAorICAgICAgICAgICAgaWQgPSBJRF9TRUNPTkRBUllfSVA7CiAgICAgICAgICAg
ICB0ZXh0ID0gIkRlYnVnIENhbGwgU3RhY2siOyAvLyROT04tTkxTLTEkCiAgICAgICAgICAgICBp
bWFnZSA9IERlYnVnVUlUb29scy5nZXRJbWFnZShJRGVidWdVSUNvbnN0YW50cy5JTUdfT0JKU19J
TlNUUlVDVElPTl9QT0lOVEVSKTsKICAgICAgICAgfQogCisgICAgICAgIGlmIChpc1RvcEZyYW1l
KSB7CisgICAgICAgIAkvLyByZW1vdmUgb3RoZXIgdG9wLWZyYW1lIElQIGFubm90YXRpb24ocykg
Zm9yIHRoaXMgZXhlY3V0aW9uLWNvbnRleHQKKyAgICAgICAgCXJlbW92ZUFubm90YXRpb25zKERN
Q29udGV4dHMuZ2V0QW5jZXN0b3JPZlR5cGUoZnJhbWUuZ2V0UGFyZW50cygpWzBdLCBJRXhlY3V0
aW9uRE1Db250ZXh0LmNsYXNzKSk7CisgICAgICAgIH0KICAgICAgICAgQW5ub3RhdGlvbiBhbm5v
dGF0aW9uID0gbmV3IElQQW5ub3RhdGlvbihmcmFtZSwgaWQsIHRleHQsIGltYWdlKTsgCiAgICAg
ICAgIAogCQkvLyBBZGQgdGhlIGFubm90YXRpb24gYXQgdGhlIHBvc2l0aW9uIHRvIHRoZSBlZGl0
b3IncyBhbm5vdGF0aW9uIG1vZGVsLgpAQCAtMjAyLDEwICsyMTcsMjggQEAKICAgICAgICAgICAg
ICAgICAgICAgcmVtb3ZlQW5ub3RhdGlvbih3cmFwcGVyLmdldFRleHRFZGl0b3IoKSwgd3JhcHBl
ci5nZXRBbm5vdGF0aW9uKCkpOwogICAgICAgICAgICAgICAgICAgICB3cmFwcGVySXRyLnJlbW92
ZSgpOwogICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgIH0gICAgICAgICAgICAKKyAgICAg
ICAgICAgIH0KICAgICAgICAgfQogCX0KLQkKKworCS8qKgorCSAqIFJlbW92ZSBhbGwgdG9wLWZy
YW1lIGFubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGRlYnVnIHRhcmdl
dCB0aGF0IHRoaXMgY2xhc3MKKwkgKiBpcyB0cmFja2luZy4KKwkgKi8KKwlwdWJsaWMgdm9pZCBy
ZW1vdmVUb3BGcmFtZUFubm90YXRpb25zKElSdW5Db250cm9sLklFeGVjdXRpb25ETUNvbnRleHQg
ZXhlY0RtYykgeworCQkvLyBSZXRyaWV2ZSB0aGUgbWFwcGluZyBvZiB0aHJlYWRzIHRvIGNvbnRl
eHQgbGlzdHMKKyAgICAgICAgc3luY2hyb25pemVkKGZBbm5vdGF0aW9uV3JhcHBlcnMpIHsKKyAg
ICAgICAgICAgIGZvciAoSXRlcmF0b3I8QW5ub3RhdGlvbldyYXBwZXI+IHdyYXBwZXJJdHIgPSBm
QW5ub3RhdGlvbldyYXBwZXJzLml0ZXJhdG9yKCk7IHdyYXBwZXJJdHIuaGFzTmV4dCgpOykgewor
ICAgICAgICAgICAgICAgIEFubm90YXRpb25XcmFwcGVyIHdyYXBwZXIgPSB3cmFwcGVySXRyLm5l
eHQoKTsKKyAgICAgICAgICAgICAgICBpZiAoRE1Db250ZXh0cy5pc0FuY2VzdG9yT2Yod3JhcHBl
ci5nZXRGcmFtZURNQygpLCBleGVjRG1jKSAKKyAgICAgICAgICAgICAgICAJCSYmIElEX0NVUlJF
TlRfSVAuZXF1YWxzKHdyYXBwZXIuZ2V0QW5ub3RhdGlvbigpLmdldFR5cGUoKSkpIHsKKyAgICAg
ICAgICAgICAgICAgICAgcmVtb3ZlQW5ub3RhdGlvbih3cmFwcGVyLmdldFRleHRFZGl0b3IoKSwg
d3JhcHBlci5nZXRBbm5vdGF0aW9uKCkpOworICAgICAgICAgICAgICAgICAgICB3cmFwcGVySXRy
LnJlbW92ZSgpOworICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgIH0KKyAgICAgICAgfQor
CX0KKwogICAgIC8qKiBSZW1vdmVzIGFsbCBhbm5vdGF0aW9ucyB0cmFja2VkIGJ5IHRoaXMgbWFu
YWdlciAqLwogICAgIHB1YmxpYyB2b2lkIHJlbW92ZUFsbEFubm90YXRpb25zKCkgewogICAgICAg
ICBzeW5jaHJvbml6ZWQoZkFubm90YXRpb25XcmFwcGVycykgewpJbmRleDogc3JjL29yZy9lY2xp
cHNlL2RkL2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvU3RlcHBp
bmdDb250cm9sbGVyLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2Rk
L2RzZi9kZWJ1Zy9pbnRlcm5hbC9wcm92aXNpb25hbC91aS92aWV3bW9kZWwvU3RlcHBpbmdDb250
cm9sbGVyLmphdmEKZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFs
L3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9TdGVwcGluZ0NvbnRyb2xsZXIuamF2YQotLS0gL2Rl
di9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDAKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9k
c2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVsL1N0ZXBwaW5nQ29udHJv
bGxlci5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDAKQEAgLTAsMCArMSw1NjAgQEAKKy8q
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIwMDYsIDIwMDggV2luZCBS
aXZlciBTeXN0ZW1zIGFuZCBvdGhlcnMuCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCisgKiBhcmUgbWFkZSBhdmFpbGFi
bGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKKyAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAorICogCisgKiBD
b250cmlidXRvcnM6CisgKiAgICAgV2luZCBSaXZlciBTeXN0ZW1zIC0gaW5pdGlhbCBBUEkgYW5k
IGltcGxlbWVudGF0aW9uCisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KK3BhY2thZ2Ugb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLmludGVybmFsLnByb3Zpc2lvbmFsLnVpLnZpZXdtb2RlbDsKKwor
aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CitpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7Citp
bXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CitpbXBvcnQgamF2YS51dGlsLkxpc3Q7CitpbXBv
cnQgamF2YS51dGlsLk1hcDsKK2ltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TY2hlZHVsZWRG
dXR1cmU7CitpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVuaXQ7CisKK2ltcG9ydCBv
cmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5Db25maW5lZFRvRHNmRXhlY3V0b3I7CitpbXBv
cnQgb3JnLmVjbGlwc2UuZGQuZHNmLmNvbmN1cnJlbnQuRGF0YVJlcXVlc3RNb25pdG9yOworaW1w
b3J0IG9yZy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRzZkV4ZWN1dG9yOworaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5jb25jdXJyZW50LkRzZlJ1bm5hYmxlOworaW1wb3J0IG9yZy5lY2xp
cHNlLmRkLmRzZi5jb25jdXJyZW50LlJlcXVlc3RNb25pdG9yOworaW1wb3J0IG9yZy5lY2xpcHNl
LmRkLmRzZi5kYXRhbW9kZWwuQWJzdHJhY3RETUV2ZW50OworaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kYXRhbW9kZWwuRE1Db250ZXh0czsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVi
dWcuaW50ZXJuYWwudWkuRHNmRGVidWdVSVBsdWdpbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2Yu
ZGVidWcuc2VydmljZS5JU3RlcFF1ZXVlTWFuYWdlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5k
c2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5JRXhlY3V0aW9uRE1Db250ZXh0OworaW1wb3J0
IG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sLklSZXN1bWVkRE1F
dmVudDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJv
bC5JU3VzcGVuZGVkRE1FdmVudDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuc2Vy
dmljZS5JUnVuQ29udHJvbC5TdGF0ZUNoYW5nZVJlYXNvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5k
ZC5kc2YuZGVidWcuc2VydmljZS5JUnVuQ29udHJvbC5TdGVwVHlwZTsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5kZC5kc2YuZGVidWcudWkuSURzZkRlYnVnVUlDb25zdGFudHM7CitpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2VydmljZUV2ZW50SGFuZGxlcjsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5kZC5kc2Yuc2VydmljZS5Ec2ZTZXJ2aWNlc1RyYWNrZXI7CitpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLnNlcnZpY2UuRHNmU2Vzc2lvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZmFj
ZS5wcmVmZXJlbmNlLklQcmVmZXJlbmNlU3RvcmU7CitpbXBvcnQgb3JnLmVjbGlwc2UuamZhY2Uu
dXRpbC5JUHJvcGVydHlDaGFuZ2VMaXN0ZW5lcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS51
dGlsLlByb3BlcnR5Q2hhbmdlRXZlbnQ7CisKKy8qKgorICogVGhpcyBjbGFzcyBidWlsZHMgb24g
dG9wIG9mIHN0YW5kYXJkIHJ1biBjb250cm9sIHNlcnZpY2UgdG8gcHJvdmlkZQorICogZnVuY3Rp
b25hbGl0eSBmb3Igc3RlcCBxdWV1aW5nIGFuZCBkZWxheWluZy4gU3RlcCBxdWV1aW5nIGVzc2Vu
dGlhbGx5IGFsbG93cworICogdXNlciB0byBwcmVzcyBhbmQgaG9sZCB0aGUgc3RlcCBrZXkgYW5k
IGFjaGlldmUgbWF4aW11bSBzdGVwcGluZyBzcGVlZC4gSWYKKyAqIHRoaXMgY2xhc3MgaXMgdXNl
ZCwgb3RoZXIgc2VydmljZSBpbXBsZW1lbnRhdGlvbnMsIHN1Y2ggYXMgc3RhY2sgYW5kCisgKiBl
eHByZXNzaW9ucywgY2FuIHVzZSBpdCB0byBhdm9pZCByZXF1ZXN0aW5nIGRhdGEgZnJvbSBkZWJ1
Z2dlciBiYWNrIGVuZCBpZgorICogYW5vdGhlciBzdGVwIGlzIGFib3V0IHRvIGJlIGV4ZWN1dGVk
LgorICogCisgKiBAc2luY2UgMS4xCisgKi8KK3B1YmxpYyBmaW5hbCBjbGFzcyBTdGVwcGluZ0Nv
bnRyb2xsZXIgaW1wbGVtZW50cyBJU3RlcFF1ZXVlTWFuYWdlcgoreworICAgIC8qKgorICAgICAq
IEFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kcywgdGhhdCBpdCB0YWtlcyB0aGUgU3RlcHBp
bmdUaW1lZE91dEV2ZW50IAorICAgICAqIGV2ZW50IHRvIGJlIGlzc3VlZCBhZnRlciBhIHN0ZXAg
aXMgc3RhcnRlZC4gCisgICAgICogQHNlZSBTdGVwcGluZ1RpbWVkT3V0RXZlbnQgIAorICAgICAq
LworICAgIHB1YmxpYyBmaW5hbCBzdGF0aWMgaW50IFNURVBQSU5HX1RJTUVPVVQgPSA1MDA7Cisg
ICAgCisgICAgLyoqCisgICAgICogVGhlIGRlcHRoIG9mIHRoZSBzdGVwIHF1ZXVlLiAgSW4gb3Ro
ZXIgd29yZHMsIHRoZSBtYXhpbXVtIG51bWJlciBvZiBzdGVwcyAKKyAgICAgKiB0aGF0IGFyZSBx
dWV1ZWQgYmVmb3JlIHRoZSBzdGVwIHF1ZXVlIG1hbmFnZXIgaXMgdGhyb3dpbmcgdGhlbSBhd2F5
LiAKKyAgICAgKi8KKyAgICBwdWJsaWMgZmluYWwgc3RhdGljIGludCBTVEVQX1FVRVVFX0RFUFRI
ID0gMTsKKworCS8qKgorCSAqIFRoZSBtYXhpbXVtIGRlbGF5IChpbiBtaWxsaXNlY29uZHMpIGJl
dHdlZW4gc3RlcHMgd2hlbiBzeW5jaHJvbml6ZWQKKwkgKiBzdGVwcGluZyBpcyBlbmFibGVkLiBU
aGlzIGFsc28gc2VydmVzIGFzIGEgc2FmZWd1YXJkIGluIHRoZSBjYXNlIHN0ZXBwaW5nCisJICog
Y29udHJvbCBwYXJ0aWNpcGFudHMgZmFpbCB0byBpbmRpY2F0ZSBjb21wbGV0aW9uIG9mIGV2ZW50
IHByb2Nlc3NpbmcuCisJICovCisgICAgcHVibGljIGZpbmFsIHN0YXRpYyBpbnQgTUFYX1NURVBf
REVMQVk9IDEwMDA7CisKKyAgICAvKioKKyAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgZ2l2ZW4g
Y29udGV4dCBoYXMgYmVlbiBzdGVwcGluZyBmb3Igc29tZSB0aW1lLCAKKyAgICAgKiBhbmQgdGhl
IFVJICh2aWV3cyBhbmQgYWN0aW9ucykgbWF5IG5lZWQgdG8gYmUgdXBkYXRlZCBhY2NvcmRpbmds
eS4gCisgICAgICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBjbGFzcyBTdGVwcGluZ1RpbWVkT3V0
RXZlbnQgZXh0ZW5kcyBBYnN0cmFjdERNRXZlbnQ8SUV4ZWN1dGlvbkRNQ29udGV4dD4geworCQlw
cml2YXRlIFN0ZXBwaW5nVGltZWRPdXRFdmVudChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgp
IHsKKwkJCXN1cGVyKGV4ZWNDdHgpOworCQl9CisJfQorCisJLyoqCisJICogSW50ZXJmYWNlIGZv
ciBjbGllbnRzIGludGVyZXN0ZWQgaW4gc3RlcHBpbmcgY29udHJvbC4KKwkgKi8KKwlwdWJsaWMg
aW50ZXJmYWNlIElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudCB7CisJfQorCisJcHJpdmF0ZSBz
dGF0aWMgY2xhc3MgU3RlcFJlcXVlc3QgeworICAgICAgICBTdGVwVHlwZSBmU3RlcFR5cGU7Cisg
ICAgICAgIFN0ZXBSZXF1ZXN0KFN0ZXBUeXBlIHR5cGUpIHsKKyAgICAgICAgICAgIGZTdGVwVHlw
ZSA9IHR5cGU7CisgICAgICAgIH0KKyAgICB9CisKKwlwcml2YXRlIGZpbmFsIERzZlNlc3Npb24g
ZlNlc3Npb247CisJcHJpdmF0ZSBmaW5hbCBEc2ZTZXJ2aWNlc1RyYWNrZXIgZlNlcnZpY2VzVHJh
Y2tlcjsKKworICAgIHByaXZhdGUgSVJ1bkNvbnRyb2wgZlJ1bkNvbnRyb2w7CisgICAgcHJpdmF0
ZSBpbnQgZlF1ZXVlRGVwdGggPSBTVEVQX1FVRVVFX0RFUFRIOworICAgIAorICAgIHByaXZhdGUg
ZmluYWwgTWFwPElFeGVjdXRpb25ETUNvbnRleHQsTGlzdDxTdGVwUmVxdWVzdD4+IGZTdGVwUXVl
dWVzID0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxMaXN0PFN0ZXBSZXF1ZXN0Pj4o
KTsKKyAgICBwcml2YXRlIGZpbmFsIE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LEJvb2xlYW4+IGZU
aW1lZE91dEZsYWdzID0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlvbkRNQ29udGV4dCxCb29sZWFuPigp
OworICAgIHByaXZhdGUgZmluYWwgTWFwPElFeGVjdXRpb25ETUNvbnRleHQsU2NoZWR1bGVkRnV0
dXJlPD8+PiBmVGltZWRPdXRGdXR1cmVzID0gbmV3IEhhc2hNYXA8SUV4ZWN1dGlvbkRNQ29udGV4
dCxTY2hlZHVsZWRGdXR1cmU8Pz4+KCk7CisKKwkvKioKKwkgKiBSZWNvcmRzIHRoZSB0aW1lIG9m
IHRoZSBsYXN0IHN0ZXAgZm9yIGFuIGV4ZWN1dGlvbiBjb250ZXh0LgorCSAqLworCXByaXZhdGUg
ZmluYWwgTWFwPElFeGVjdXRpb25ETUNvbnRleHQsIExvbmc+IGZMYXN0U3RlcFRpbWVzPSBuZXcg
SGFzaE1hcDxJRXhlY3V0aW9uRE1Db250ZXh0LCBMb25nPigpOworCisJLyoqCisJICogTWluaW11
bSBzdGVwIGludGVydmFsIGluIG1pbGxpc2Vjb25kcy4KKwkgKi8KKwlwcml2YXRlIGludCBmTWlu
U3RlcEludGVydmFsPSAwOworCisJLyoqCisJICogV2hldGhlciBzeW5jaHJvbml6ZWQgc3RlcHBp
bmcgaXMgZW5hYmxlZC4KKwkgKi8KKwlwcml2YXRlIGJvb2xlYW4gZlN5bmNocm9uaXplZFN0ZXBw
aW5nOworCQorCS8qKgorCSAqIE1hcCBvZiBleGVjdXRpb24gY29udGV4dHMgZm9yIHdoaWNoIGEg
c3RlcCBpcyBpbiBwcm9ncmVzcy4KKwkgKi8KKwlwcml2YXRlIGZpbmFsIE1hcDxJRXhlY3V0aW9u
RE1Db250ZXh0LCBMaXN0PElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudD4+IGZTdGVwSW5Qcm9n
cmVzcyA9IG5ldyBIYXNoTWFwPElFeGVjdXRpb25ETUNvbnRleHQsIExpc3Q8SVN0ZXBwaW5nQ29u
dHJvbFBhcnRpY2lwYW50Pj4oKTsKKworCS8qKgorCSAqIExpc3Qgb2YgcmVnaXN0ZXJlZCBzdGVw
cGluZyBjb250cm9sIHBhcnRpY2lwYW50cy4KKwkgKi8KKwlwcml2YXRlIGZpbmFsIExpc3Q8SVN0
ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50PiBmUGFydGljaXBhbnRzID0gbmV3IEFycmF5TGlzdDxJ
U3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQ+KCk7CisKKwkvKioKKwkgKiBQcm9wZXJ0eSBjaGFu
Z2UgbGlzdGVuZXIuICBJdCB1cGRhdGVzIHRoZSBzdGVwcGluZyBjb250cm9sIHNldHRpbmdzLgor
CSAqLworCXByaXZhdGUgSVByb3BlcnR5Q2hhbmdlTGlzdGVuZXIgZlByZWZlcmVuY2VzTGlzdGVu
ZXI7CisKKyAgICBwdWJsaWMgU3RlcHBpbmdDb250cm9sbGVyKERzZlNlc3Npb24gc2Vzc2lvbikg
eworICAgICAgICBmU2Vzc2lvbiA9IHNlc3Npb247CisgICAgICAgIGZTZXJ2aWNlc1RyYWNrZXIg
PSBuZXcgRHNmU2VydmljZXNUcmFja2VyKERzZkRlYnVnVUlQbHVnaW4uZ2V0QnVuZGxlQ29udGV4
dCgpLCBzZXNzaW9uLmdldElkKCkpOworICAgICAgICAKKyAgICAgICAgZmluYWwgSVByZWZlcmVu
Y2VTdG9yZSBzdG9yZT0gRHNmRGVidWdVSVBsdWdpbi5nZXREZWZhdWx0KCkuZ2V0UHJlZmVyZW5j
ZVN0b3JlKCk7CisKKyAgICAgICAgZlByZWZlcmVuY2VzTGlzdGVuZXIgPSBuZXcgSVByb3BlcnR5
Q2hhbmdlTGlzdGVuZXIoKSB7CisgICAgICAgICAgICBwdWJsaWMgdm9pZCBwcm9wZXJ0eUNoYW5n
ZShmaW5hbCBQcm9wZXJ0eUNoYW5nZUV2ZW50IGV2ZW50KSB7CisgICAgICAgICAgICAgICAgaGFu
ZGxlUHJvcGVydHlDaGFuZ2VkKHN0b3JlLCBldmVudCk7CisgICAgICAgICAgICB9fTsKKyAgICAg
ICAgc3RvcmUuYWRkUHJvcGVydHlDaGFuZ2VMaXN0ZW5lcihmUHJlZmVyZW5jZXNMaXN0ZW5lcik7
CisgICAgICAgIAorICAgICAgICBlbmFibGVTeW5jaHJvbml6ZWRTdGVwcGluZyhzdG9yZS5nZXRC
b29sZWFuKElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1lOQ0hST05JWkVEX1NURVBQSU5HX0VO
QUJMRSkpOworICAgICAgICBzZXRNaW5pbXVtU3RlcEludGVydmFsKHN0b3JlLmdldEludChJRHNm
RGVidWdVSUNvbnN0YW50cy5QUkVGX01JTl9TVEVQX0lOVEVSVkFMKSk7CisgICAgfQorCisgICAg
cHVibGljIHZvaWQgZGlzcG9zZSgpIHsKKyAgICAJaWYgKGZSdW5Db250cm9sICE9IG51bGwpIHsK
KyAgICAJCWdldFNlc3Npb24oKS5yZW1vdmVTZXJ2aWNlRXZlbnRMaXN0ZW5lcih0aGlzKTsKKyAg
ICAJfQorICAgIAkKKyAgICAgICAgSVByZWZlcmVuY2VTdG9yZSBzdG9yZT0gRHNmRGVidWdVSVBs
dWdpbi5nZXREZWZhdWx0KCkuZ2V0UHJlZmVyZW5jZVN0b3JlKCk7CisgICAgICAgIHN0b3JlLnJl
bW92ZVByb3BlcnR5Q2hhbmdlTGlzdGVuZXIoZlByZWZlcmVuY2VzTGlzdGVuZXIpOworCisgICAg
ICAgIGZTZXJ2aWNlc1RyYWNrZXIuZGlzcG9zZSgpOworICAgIH0KKworICAgIC8qKgorICAgICAq
IEVuYWJsZXMgb3IgZGlzYWJsZXMgc3luY2hyb25pemVkIHN0ZXBwaW5nIG1vZGUuCisgICAgICog
SW4gc3luY2hyb25pemVkIG1vZGUsIGFmdGVyIGEgc3RlcCBjb21tYW5kIGlzIGlzc3VlZCwKKyAg
ICAgKiBzdWJzZXF1ZW50IHN0ZXBzIGFyZSBibG9ja2VkIGZvciB0aGUgZXhlY3V0aW9uIGNvbnRl
eHQKKyAgICAgKiB1bnRpbCB7QGxpbmsgZG9uZVN0ZXBwaW5nKCl9IGlzIGNhbGxlZCB0byBpbmRp
Y2F0ZSBjb21wbGV0aW9uCisgICAgICogb2YgdGhlIHByb2Nlc3NpbmcgZm9yIHRoZSBsYXN0IHN0
ZXAuCisgICAgICogCisgICAgICogQHBhcmFtIGVuYWJsZQorICAgICAqLworICAgIHB1YmxpYyB2
b2lkIGVuYWJsZVN5bmNocm9uaXplZFN0ZXBwaW5nKGJvb2xlYW4gZW5hYmxlKSB7CisgICAgCWZT
eW5jaHJvbml6ZWRTdGVwcGluZyA9IGVuYWJsZTsKKyAgICB9CisKKyAgICAvKioKKyAgICAgKiBD
b25maWd1cmUgdGhlIG1pbmltdW0gdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0byB3YWl0IGJldHdl
ZW4gc3RlcHMuCisgICAgICogCisgICAgICogQHBhcmFtIGludGVydmFsCisgICAgICovCisgICAg
cHVibGljIHZvaWQgc2V0TWluaW11bVN0ZXBJbnRlcnZhbChpbnQgaW50ZXJ2YWwpIHsKKyAgICAJ
Zk1pblN0ZXBJbnRlcnZhbCA9IGludGVydmFsOworICAgIH0KKyAgICAKKyAgICAvKioKKyAgICAg
KiBSZWdpc3RlciBnaXZlbiBzdGVwcGluZyBjb250cm9sIHBhcnRpY2lwYW50LgorICAgICAqIAor
ICAgICAqIEBwYXJhbSBwYXJ0aWNpcGFudAorICAgICAqLworICAgIHB1YmxpYyB2b2lkIGFkZFN0
ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50KElTdGVwcGluZ0NvbnRyb2xQYXJ0aWNpcGFudCBwYXJ0
aWNpcGFudCkgeworICAgIAlmUGFydGljaXBhbnRzLmFkZChwYXJ0aWNpcGFudCk7CisgICAgfQor
CisgICAgLyoqCisgICAgICogVW5yZWdpc3RlciBnaXZlbiBzdGVwcGluZyBjb250cm9sIHBhcnRp
Y2lwYW50LgorICAgICAqIAorICAgICAqIEBwYXJhbSBwYXJ0aWNpcGFudAorICAgICAqLworICAg
IHB1YmxpYyB2b2lkIHJlbW92ZVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50KElTdGVwcGluZ0Nv
bnRyb2xQYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCkgeworICAgIAlmUGFydGljaXBhbnRzLnJlbW92
ZShwYXJ0aWNpcGFudCk7CisgICAgCS8vIFRPRE8gcmVtb3ZlIGZyb20gc3RlcHMgaW4gcHJvZ3Jl
c3M/CisgICAgfQorCisgICAgLyoqCisgICAgICogSW5kaWNhdGUgdGhhdCBwYXJ0aWNpcGFudCBo
YXMgY29tcGxldGVkIHByb2Nlc3Npbmcgb2YgdGhlIGxhc3Qgc3RlcC4KKyAgICAgKiAKKyAgICAg
KiBAcGFyYW0gZXhlY0N0eAorICAgICAqLworICAgIHB1YmxpYyB2b2lkIGRvbmVTdGVwcGluZyhm
aW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgsIGZpbmFsIElTdGVwcGluZ0NvbnRyb2xQ
YXJ0aWNpcGFudCBwYXJ0aWNpcGFudCkgeworICAgIAlMaXN0PElTdGVwcGluZ0NvbnRyb2xQYXJ0
aWNpcGFudD4gcGFydGljaXBhbnRzID0gZlN0ZXBJblByb2dyZXNzLmdldChleGVjQ3R4KTsKKyAg
ICAJaWYgKHBhcnRpY2lwYW50cyAhPSBudWxsKSB7CisgICAgCQlwYXJ0aWNpcGFudHMucmVtb3Zl
KHBhcnRpY2lwYW50KTsKKyAgICAJCWlmIChwYXJ0aWNpcGFudHMuaXNFbXB0eSgpKSB7CisgICAg
CQkJZG9uZVN0ZXBwaW5nKGV4ZWNDdHgpOworICAgIAkJfQorICAgIAl9IGVsc2UgeworICAgIAkJ
Zm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGRpc2FibGVkQ3R4IDogZlN0ZXBJblByb2dyZXNzLmtl
eVNldCgpKSB7CisgICAgCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGRpc2FibGVkQ3R4
LCBleGVjQ3R4KSkgeworICAgIAkJCQlwYXJ0aWNpcGFudHMgPSBmU3RlcEluUHJvZ3Jlc3MuZ2V0
KGRpc2FibGVkQ3R4KTsKKyAgICAJCSAgICAJaWYgKHBhcnRpY2lwYW50cyAhPSBudWxsKSB7Cisg
ICAgCQkgICAgCQlwYXJ0aWNpcGFudHMucmVtb3ZlKHBhcnRpY2lwYW50KTsKKyAgICAJCSAgICAJ
CWlmIChwYXJ0aWNpcGFudHMuaXNFbXB0eSgpKSB7CisgICAgCQkgICAgCQkJZG9uZVN0ZXBwaW5n
KGRpc2FibGVkQ3R4KTsKKyAgICAJCSAgICAJCX0KKyAgICAJCSAgICAJfQorICAgIAkJCX0KKyAg
ICAJCX0KKyAgICAJfQorICAgIH0KKworCXB1YmxpYyBEc2ZTZXNzaW9uIGdldFNlc3Npb24oKSB7
CisJCXJldHVybiBmU2Vzc2lvbjsKKwl9CisKKwlwcml2YXRlIERzZkV4ZWN1dG9yIGdldEV4ZWN1
dG9yKCkgeworCQlyZXR1cm4gZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCk7CisJfQorCQorCXBy
aXZhdGUgRHNmU2VydmljZXNUcmFja2VyIGdldFNlcnZpY2VzVHJhY2tlcigpIHsKKwkJcmV0dXJu
IGZTZXJ2aWNlc1RyYWNrZXI7CisJfQorCisJcHJpdmF0ZSBJUnVuQ29udHJvbCBnZXRSdW5Db250
cm9sKCkgeworCQlpZiAoZlJ1bkNvbnRyb2wgPT0gbnVsbCkgeworCSAgICAgICAgZlJ1bkNvbnRy
b2wgPSBnZXRTZXJ2aWNlc1RyYWNrZXIoKS5nZXRTZXJ2aWNlKElSdW5Db250cm9sLmNsYXNzKTsK
KwkgICAgICAgIGdldFNlc3Npb24oKS5hZGRTZXJ2aWNlRXZlbnRMaXN0ZW5lcih0aGlzLCBudWxs
KTsKKwkJfQorCQlyZXR1cm4gZlJ1bkNvbnRyb2w7CisJfQorCisJLyoqCisgICAgICogQ2hlY2tz
IHdoZXRoZXIgYSBzdGVwIGNvbW1hbmQgY2FuIGJlIHF1ZXVlZCB1cCBmb3IgZ2l2ZW4gY29udGV4
dC4KKyAgICAgKi8KKyAgICBwdWJsaWMgdm9pZCBjYW5FbnF1ZXVlU3RlcChJRXhlY3V0aW9uRE1D
b250ZXh0IGV4ZWNDdHgsIFN0ZXBUeXBlIHN0ZXBUeXBlLCBEYXRhUmVxdWVzdE1vbml0b3I8Qm9v
bGVhbj4gcm0pIHsKKyAgICAgICAgaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAoZXhlY0N0eCwgc3RlcFR5
cGUpKSB7CisgICAgICAgICAgICBybS5zZXREYXRhKHRydWUpOworICAgICAgICAgICAgcm0uZG9u
ZSgpOworICAgICAgICB9IGVsc2UgeworICAgICAgICAgICAgZ2V0UnVuQ29udHJvbCgpLmNhblN0
ZXAoZXhlY0N0eCwgc3RlcFR5cGUsIHJtKTsKKyAgICAgICAgfQorICAgIH0KKworICAgIHByaXZh
dGUgYm9vbGVhbiBkb0NhbkVucXVldWVTdGVwKElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwg
U3RlcFR5cGUgc3RlcFR5cGUpIHsKKyAgICAgICAgcmV0dXJuIGdldFJ1bkNvbnRyb2woKS5pc1N0
ZXBwaW5nKGV4ZWNDdHgpICYmICFpc1N0ZXBwaW5nVGltZWRPdXQoZXhlY0N0eCk7IAorICAgIH0K
KworICAgIC8qKgorICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIG5leHQgc3RlcCBvbiB0aGUgZ2l2
ZW4gZXhlY3V0aW9uIGNvbnRleHQgc2hvdWxkIGJlIGRlbGF5ZWQKKyAgICAgKiBiYXNlZCBvbiB0
aGUgY29uZmlndXJlZCBzdGVwIGRlbGF5LgorICAgICAqIAorCSAqIEBwYXJhbSBleGVjQ3R4CisJ
ICogQHJldHVybiA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgc3RlcCBzaG91bGQgYmUgZGVsYXll
ZAorCSAqLworCXByaXZhdGUgYm9vbGVhbiBzaG91bGREZWxheVN0ZXAoSUV4ZWN1dGlvbkRNQ29u
dGV4dCBleGVjQ3R4KSB7CisgICAgICAgIHJldHVybiBnZXRTdGVwRGVsYXkoZXhlY0N0eCkgPiAw
OworCX0KKworCS8qKgorCSAqIENvbXB1dGUgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyBiZWZv
cmUgdGhlIG5leHQgc3RlcCBmb3IgdGhlIGdpdmVuIGNvbnRleHQgbWF5IGJlIGV4ZWN1dGVkLgor
CSAqIAorCSAqIEBwYXJhbSBleGVjQ3R4CisJICogQHJldHVybiAgdGhlIG51bWJlciBvZiBtaWxs
aXNlY29uZHMgYmVmb3JlIHRoZSBuZXh0IHBvc3NpYmxlIHN0ZXAKKwkgKi8KKwlwcml2YXRlIGlu
dCBnZXRTdGVwRGVsYXkoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7CisJCWlmIChmTWlu
U3RlcEludGVydmFsID4gMCkgeworCSAgICAgICAgZm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IGxh
c3RTdGVwQ3R4IDogZkxhc3RTdGVwVGltZXMua2V5U2V0KCkpIHsKKwkgICAgICAgICAgICBpZiAo
ZXhlY0N0eC5lcXVhbHMobGFzdFN0ZXBDdHgpIHx8IERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4
ZWNDdHgsIGxhc3RTdGVwQ3R4KSkgeworCSAgICAgICAgICAgICAgICBsb25nIG5vdyA9IFN5c3Rl
bS5jdXJyZW50VGltZU1pbGxpcygpOworCQkJCQlpbnQgZGVsYXk9IChpbnQpIChmTGFzdFN0ZXBU
aW1lcy5nZXQobGFzdFN0ZXBDdHgpICsgZk1pblN0ZXBJbnRlcnZhbCAtIG5vdyk7CisJCQkJCXJl
dHVybiBNYXRoLm1heChkZWxheSwgMCk7CisJICAgICAgICAgICAgfQorCSAgICAgICAgfQorCQl9
CisgICAgICAgIHJldHVybiAwOworCX0KKworCXByaXZhdGUgdm9pZCB1cGRhdGVMYXN0U3RlcFRp
bWUoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7CisgICAgICAgIGxvbmcgbm93ID0gU3lz
dGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CisJCWZMYXN0U3RlcFRpbWVzLnB1dChleGVjQ3R4LCBu
b3cpOworICAgICAgICBmb3IgKElFeGVjdXRpb25ETUNvbnRleHQgbGFzdFN0ZXBDdHggOiBmTGFz
dFN0ZXBUaW1lcy5rZXlTZXQoKSkgeworICAgICAgICAgICAgaWYgKCFleGVjQ3R4LmVxdWFscyhs
YXN0U3RlcEN0eCkgJiYgRE1Db250ZXh0cy5pc0FuY2VzdG9yT2YoZXhlY0N0eCwgbGFzdFN0ZXBD
dHgpKSB7CisJCQkJZkxhc3RTdGVwVGltZXMucHV0KGxhc3RTdGVwQ3R4LCBub3cpOworICAgICAg
ICAgICAgfQorICAgICAgICB9CisJfQorCisJcHJpdmF0ZSBsb25nIGdldExhc3RTdGVwVGltZShJ
RXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsKKwkJaWYgKGZMYXN0U3RlcFRpbWVzLmNvbnRh
aW5zS2V5KGV4ZWNDdHgpKSB7CisJCQlyZXR1cm4gZkxhc3RTdGVwVGltZXMuZ2V0KGV4ZWNDdHgp
OworCQl9CisJCWZvciAoSUV4ZWN1dGlvbkRNQ29udGV4dCBsYXN0U3RlcEN0eCA6IGZMYXN0U3Rl
cFRpbWVzLmtleVNldCgpKSB7CisJCQlpZiAoRE1Db250ZXh0cy5pc0FuY2VzdG9yT2YoZXhlY0N0
eCwgbGFzdFN0ZXBDdHgpKSB7CisJCQkJcmV0dXJuIGZMYXN0U3RlcFRpbWVzLmdldChsYXN0U3Rl
cEN0eCk7CisJCQl9CisJCX0KKwkJcmV0dXJuIDA7CisJfQorCisJLyoqCisgICAgICogUmV0dXJu
cyB0aGUgbnVtYmVyIG9mIHN0ZXAgY29tbWFuZHMgdGhhdCBhcmUgcXVldWVkIGZvciBnaXZlbiBl
eGVjdXRpb24KKyAgICAgKiBjb250ZXh0LgorICAgICAqLworICAgIHB1YmxpYyBpbnQgZ2V0UGVu
ZGluZ1N0ZXBDb3VudChJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsKKyAgICAgICAgTGlz
dDxTdGVwUmVxdWVzdD4gc3RlcFF1ZXVlID0gZlN0ZXBRdWV1ZXMuZ2V0KGV4ZWNDdHgpOworICAg
ICAgICBpZiAoc3RlcFF1ZXVlID09IG51bGwpIHJldHVybiAwOworICAgICAgICByZXR1cm4gc3Rl
cFF1ZXVlLnNpemUoKTsKKyAgICB9CisKKyAgICAvKioKKyAgICAgKiBBZGRzIGEgc3RlcCBjb21t
YW5kIHRvIHRoZSBleGVjdXRpb24gcXVldWUgZm9yIGdpdmVuIGNvbnRleHQuCisgICAgICogQHBh
cmFtIGV4ZWNDdHggRXhlY3V0aW9uIGNvbnRleHQgdGhhdCBzaG91bGQgcGVyZm9ybSB0aGUgc3Rl
cC4gCisgICAgICogQHBhcmFtIHN0ZXBUeXBlIFR5cGUgb2Ygc3RlcCB0byBleGVjdXRlLgorICAg
ICAqLworICAgIHB1YmxpYyB2b2lkIGVucXVldWVTdGVwKGZpbmFsIElFeGVjdXRpb25ETUNvbnRl
eHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUgc3RlcFR5cGUpIHsKKyAgICAJaWYgKHNob3VsZERl
bGF5U3RlcChleGVjQ3R4KSkgeworICAgIAkJaWYgKGRvQ2FuRW5xdWV1ZVN0ZXAoZXhlY0N0eCwg
c3RlcFR5cGUpKSB7CisJICAgICAgICAgICAgZG9FbnF1ZXVlU3RlcChleGVjQ3R4LCBzdGVwVHlw
ZSk7CisJICAgICAgICAgICAgaWYgKCFnZXRSdW5Db250cm9sKCkuaXNTdGVwcGluZyhleGVjQ3R4
KSkgeworCSAgICAgICAgICAgIAlwcm9jZXNzU3RlcFF1ZXVlKGV4ZWNDdHgpOworCSAgICAgICAg
ICAgIH0KKyAgICAJCX0KKyAgICAJfSBlbHNlIHsKKwkgICAgICAgIGdldFJ1bkNvbnRyb2woKS5j
YW5TdGVwKAorCSAgICAgICAgICAgIGV4ZWNDdHgsIHN0ZXBUeXBlLCBuZXcgRGF0YVJlcXVlc3RN
b25pdG9yPEJvb2xlYW4+KGdldEV4ZWN1dG9yKCksIG51bGwpIHsKKwkgICAgICAgICAgICAgICAg
QE92ZXJyaWRlCisJICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2b2lkIGhhbmRsZUNvbXBsZXRl
ZCgpIHsKKwkgICAgICAgICAgICAgICAgICAgIGlmIChpc1N1Y2Nlc3MoKSAmJiBnZXREYXRhKCkp
IHsKKwkgICAgICAgICAgICAgICAgICAgIAlpZiAoaXNTdGVwcGluZ0Rpc2FibGVkKGV4ZWNDdHgp
KSB7CisJCSAgICAgICAgICAgICAgICAgICAgICAgIGRvRW5xdWV1ZVN0ZXAoZXhlY0N0eCwgc3Rl
cFR5cGUpOworCSAgICAgICAgICAgICAgICAgICAgCX0gZWxzZSB7CisJICAgICAgICAgICAgICAg
ICAgICAJCWRvU3RlcChleGVjQ3R4LCBzdGVwVHlwZSk7CisJICAgICAgICAgICAgICAgICAgICAJ
fQorCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb0NhbkVucXVldWVTdGVwKGV4ZWND
dHgsIHN0ZXBUeXBlKSkgeworCSAgICAgICAgICAgICAgICAgICAgICAgIGRvRW5xdWV1ZVN0ZXAo
ZXhlY0N0eCwgc3RlcFR5cGUpOworCSAgICAgICAgICAgICAgICAgICAgfQorCSAgICAgICAgICAg
ICAgICB9CisJICAgICAgICAgICAgfSk7CisgICAgCX0KKyAgICB9CisKKwlwcml2YXRlIHZvaWQg
ZG9TdGVwKGZpbmFsIElFeGVjdXRpb25ETUNvbnRleHQgZXhlY0N0eCwgZmluYWwgU3RlcFR5cGUg
c3RlcFR5cGUpIHsKKwkJaWYgKGZTeW5jaHJvbml6ZWRTdGVwcGluZykgeworCQkJZGlzYWJsZVN0
ZXBwaW5nKGV4ZWNDdHgpOworCQl9CisgICAgICAgIHVwZGF0ZUxhc3RTdGVwVGltZShleGVjQ3R4
KTsKKwkJZ2V0UnVuQ29udHJvbCgpLnN0ZXAoZXhlY0N0eCwgc3RlcFR5cGUsIG5ldyBSZXF1ZXN0
TW9uaXRvcihnZXRFeGVjdXRvcigpLCBudWxsKSk7CisJfQorCisJLyoqCisJICogRW5xdWV1ZSB0
aGUgZ2l2ZW4gc3RlcCBmb3IgbGF0ZXIgZXhlY3V0aW9uLgorCSAqIAorCSAqIEBwYXJhbSBleGVj
Q3R4CisJICogQHBhcmFtIHN0ZXBUeXBlCisJICovCisJcHJpdmF0ZSB2b2lkIGRvRW5xdWV1ZVN0
ZXAoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4LCBmaW5hbCBTdGVwVHlwZSBzdGVw
VHlwZSkgeworCQlMaXN0PFN0ZXBSZXF1ZXN0PiBzdGVwUXVldWUgPSBmU3RlcFF1ZXVlcy5nZXQo
ZXhlY0N0eCk7CisJCWlmIChzdGVwUXVldWUgPT0gbnVsbCkgeworCQkgICAgc3RlcFF1ZXVlID0g
bmV3IExpbmtlZExpc3Q8U3RlcFJlcXVlc3Q+KCk7CisJCSAgICBmU3RlcFF1ZXVlcy5wdXQoZXhl
Y0N0eCwgc3RlcFF1ZXVlKTsKKwkJfQorCQlpZiAoc3RlcFF1ZXVlLnNpemUoKSA8IGZRdWV1ZURl
cHRoKSB7CisJCSAgICBzdGVwUXVldWUuYWRkKG5ldyBTdGVwUmVxdWVzdChzdGVwVHlwZSkpOwor
CQl9CisJfQorCisgICAgLyoqCisgICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzdGVwIGluc3Ry
dWN0aW9uIGZvciB0aGUgZ2l2ZW4gY29udGV4dCBoYXMgdGltZWQgb3V0LgorICAgICAqLworICAg
IHB1YmxpYyBib29sZWFuIGlzU3RlcHBpbmdUaW1lZE91dChJRXhlY3V0aW9uRE1Db250ZXh0IGV4
ZWNDdHgpIHsKKyAgICAgICAgZm9yIChJRXhlY3V0aW9uRE1Db250ZXh0IHRpbWVkT3V0Q3R4IDog
ZlRpbWVkT3V0RmxhZ3Mua2V5U2V0KCkpIHsKKyAgICAgICAgICAgIGlmIChleGVjQ3R4LmVxdWFs
cyh0aW1lZE91dEN0eCkgfHwgRE1Db250ZXh0cy5pc0FuY2VzdG9yT2YoZXhlY0N0eCwgdGltZWRP
dXRDdHgpKSB7CisgICAgICAgICAgICAgICAgcmV0dXJuIGZUaW1lZE91dEZsYWdzLmdldCh0aW1l
ZE91dEN0eCk7CisgICAgICAgICAgICB9CisgICAgICAgIH0KKyAgICAgICAgcmV0dXJuIGZhbHNl
OworICAgIH0KKyAgICAKKwkvKioKKwkgKiBQcm9jZXNzIG5leHQgc3RlcCBvbiBxdWV1ZSBpZiBh
bnkuCisJICogQHBhcmFtIGV4ZWNDdHgKKwkgKi8KKwlwcml2YXRlIHZvaWQgcHJvY2Vzc1N0ZXBR
dWV1ZShmaW5hbCBJRXhlY3V0aW9uRE1Db250ZXh0IGV4ZWNDdHgpIHsKKwkJaWYgKGlzU3RlcHBp
bmdEaXNhYmxlZChleGVjQ3R4KSkgeworCQkJcmV0dXJuOworCQl9CisJCWlmIChmU3RlcFF1ZXVl
cy5jb250YWluc0tleShleGVjQ3R4KSkgeworCQkJZmluYWwgaW50IHN0ZXBEZWxheSA9IGdldFN0
ZXBEZWxheShleGVjQ3R4KTsKKwkJCWlmIChzdGVwRGVsYXkgPiAwKSB7CisJCQkJZ2V0RXhlY3V0
b3IoKS5zY2hlZHVsZShuZXcgRHNmUnVubmFibGUoKSB7CisJCQkJCXB1YmxpYyB2b2lkIHJ1bigp
IHsKKwkJCQkJCXByb2Nlc3NTdGVwUXVldWUoZXhlY0N0eCk7CisJCQkJCX0KKwkJCQl9LCBzdGVw
RGVsYXksIFRpbWVVbml0Lk1JTExJU0VDT05EUyk7CisJCQkJcmV0dXJuOworCQkJfQorICAgICAg
ICAgICAgTGlzdDxTdGVwUmVxdWVzdD4gcXVldWUgPSBmU3RlcFF1ZXVlcy5nZXQoZXhlY0N0eCk7
CisgICAgICAgICAgICBmaW5hbCBTdGVwUmVxdWVzdCByZXF1ZXN0ID0gcXVldWUucmVtb3ZlKHF1
ZXVlLnNpemUoKSAtIDEpOworICAgICAgICAgICAgaWYgKHF1ZXVlLmlzRW1wdHkoKSkgZlN0ZXBR
dWV1ZXMucmVtb3ZlKGV4ZWNDdHgpOworICAgICAgICAgICAgZ2V0UnVuQ29udHJvbCgpLmNhblN0
ZXAoCisgICAgICAgICAgICAgICAgZXhlY0N0eCwgcmVxdWVzdC5mU3RlcFR5cGUsIAorICAgICAg
ICAgICAgICAgIG5ldyBEYXRhUmVxdWVzdE1vbml0b3I8Qm9vbGVhbj4oZ2V0RXhlY3V0b3IoKSwg
bnVsbCkgeworICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKKyAgICAgICAgICAgICAgICAg
ICAgcHJvdGVjdGVkIHZvaWQgaGFuZGxlQ29tcGxldGVkKCkgeworICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKGlzU3VjY2VzcygpICYmIGdldERhdGEoKSkgeworICAgICAgICAgICAgICAgICAg
ICAJCWRvU3RlcChleGVjQ3R4LCByZXF1ZXN0LmZTdGVwVHlwZSk7CisgICAgICAgICAgICAgICAg
ICAgICAgICB9IGVsc2UgeworICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciB3aGF0
ZXZlciByZWFzb24gd2UgY2FuJ3Qgc3RlcCBhbnltb3JlLCBzbyBjbGVhciBvdXQKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc3RlcCBxdWV1ZS4KKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmU3RlcFF1ZXVlcy5yZW1vdmUoZXhlY0N0eCk7CisgICAgICAgICAgICAgICAg
ICAgICAgICB9CisgICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICB9KTsKKyAg
ICAgICAgfQorCX0KKworCS8qKgorCSAqIERpc2FibGUgc3RlcHBpbmcgZm9yIHRoZSBnaXZlbiBl
eGVjdXRpb24gY29udGV4dC4KKwkgKiAKKwkgKiBAcGFyYW0gZXhlY0N0eAorCSAqLworCXByaXZh
dGUgdm9pZCBkaXNhYmxlU3RlcHBpbmcoSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7Cisg
ICAgICAgIGZTdGVwSW5Qcm9ncmVzcy5wdXQoZXhlY0N0eCwgbmV3IEFycmF5TGlzdDxJU3RlcHBp
bmdDb250cm9sUGFydGljaXBhbnQ+KGZQYXJ0aWNpcGFudHMpKTsKKwl9CisKKyAgICAvKioKKyAg
ICAgKiBJbmRpY2F0ZSB0aGF0IHByb2Nlc3Npbmcgb2YgdGhlIGxhc3Qgc3RlcCBoYXMgY29tcGxl
dGVkIGFuZAorICAgICAqIHRoZSBuZXh0IHN0ZXAgY2FuIGJlIGlzc3VlZC4KKyAgICAgKiAKKyAg
ICAgKiBAcGFyYW0gZXhlY0N0eAorICAgICAqLworICAgIHByaXZhdGUgdm9pZCBkb25lU3RlcHBp
bmcoZmluYWwgSUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7CisgICAgCWlmIChmU3luY2hy
b25pemVkU3RlcHBpbmcpIHsKKyAgICAJCWdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVu
bmFibGUoKSB7CisgICAgCQkJcHVibGljIHZvaWQgcnVuKCkgeworICAgIAkJCQllbmFibGVTdGVw
cGluZyhleGVjQ3R4KTsKKyAgICAJCQkJcHJvY2Vzc1N0ZXBRdWV1ZShleGVjQ3R4KTsKKyAgICAJ
CQl9CisgICAgCQl9KTsKKyAgICAJfQorICAgIH0KKworCS8qKgorCSAqIEVuYWJsZSBzdGVwcGlu
ZyBmb3IgdGhlIGdpdmVuIGV4ZWN1dGlvbiBjb250ZXh0LgorCSAqIAorCSAqIEBwYXJhbSBleGVj
Q3R4CisJICovCisJcHJpdmF0ZSB2b2lkIGVuYWJsZVN0ZXBwaW5nKGZpbmFsIElFeGVjdXRpb25E
TUNvbnRleHQgZXhlY0N0eCkgeworICAgICAgICBmU3RlcEluUHJvZ3Jlc3MucmVtb3ZlKGV4ZWND
dHgpOworCQlmb3IgKElFeGVjdXRpb25ETUNvbnRleHQgZGlzYWJsZWRDdHggOiBmU3RlcEluUHJv
Z3Jlc3Mua2V5U2V0KCkpIHsKKwkJCWlmIChETUNvbnRleHRzLmlzQW5jZXN0b3JPZihkaXNhYmxl
ZEN0eCwgZXhlY0N0eCkpIHsKKwkJCQlmU3RlcEluUHJvZ3Jlc3MucmVtb3ZlKGRpc2FibGVkQ3R4
KTsKKwkJCX0KKwkJfQorCX0KKworCXByaXZhdGUgYm9vbGVhbiBpc1N0ZXBwaW5nRGlzYWJsZWQo
SUV4ZWN1dGlvbkRNQ29udGV4dCBleGVjQ3R4KSB7CisJCWlmIChmU3luY2hyb25pemVkU3RlcHBp
bmcpIHsKKwkgICAgICAgIGJvb2xlYW4gZGlzYWJsZWQ9IGZTdGVwSW5Qcm9ncmVzcy5jb250YWlu
c0tleShleGVjQ3R4KTsKKwkgICAgICAgIGlmICghZGlzYWJsZWQpIHsKKwkJICAgICAgICBmb3Ig
KElFeGVjdXRpb25ETUNvbnRleHQgZGlzYWJsZWRDdHggOiBmU3RlcEluUHJvZ3Jlc3Mua2V5U2V0
KCkpIHsKKwkJCQkJaWYgKERNQ29udGV4dHMuaXNBbmNlc3Rvck9mKGV4ZWNDdHgsIGRpc2FibGVk
Q3R4KSkgeworCQkJCQkJZGlzYWJsZWQgPSB0cnVlOworCQkJCQkJYnJlYWs7CisJCQkJCX0KKwkJ
CQl9CisJICAgICAgICB9CisJICAgICAgICBpZiAoZGlzYWJsZWQpIHsKKwkgICAgICAgIAlsb25n
IG5vdyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOworCSAgICAgICAgCWxvbmcgbGFzdFN0
ZXBUaW1lID0gZ2V0TGFzdFN0ZXBUaW1lKGV4ZWNDdHgpOworCSAgICAgICAgCWlmIChub3cgLSBs
YXN0U3RlcFRpbWUgPiBNQVhfU1RFUF9ERUxBWSkgeworCSAgICAgICAgCQllbmFibGVTdGVwcGlu
ZyhleGVjQ3R4KTsKKwkgICAgICAgIAkJZGlzYWJsZWQgPSBmYWxzZTsKKwkgICAgICAgIAl9CisJ
ICAgICAgICB9CisJICAgICAgICByZXR1cm4gZGlzYWJsZWQ7CisJCX0KKyAgICAgICAgcmV0dXJu
IGZhbHNlOworCX0KKworCSAgIHByb3RlY3RlZCB2b2lkIGhhbmRsZVByb3BlcnR5Q2hhbmdlZChm
aW5hbCBJUHJlZmVyZW5jZVN0b3JlIHN0b3JlLCBmaW5hbCBQcm9wZXJ0eUNoYW5nZUV2ZW50IGV2
ZW50KSB7CisJICAgICAgICBTdHJpbmcgcHJvcGVydHkgPSBldmVudC5nZXRQcm9wZXJ0eSgpOwor
CSAgICAgICAgaWYgKElEc2ZEZWJ1Z1VJQ29uc3RhbnRzLlBSRUZfU1lOQ0hST05JWkVEX1NURVBQ
SU5HX0VOQUJMRS5lcXVhbHMocHJvcGVydHkpKSB7CisJICAgICAgICAgICAgZW5hYmxlU3luY2hy
b25pemVkU3RlcHBpbmcoc3RvcmUuZ2V0Qm9vbGVhbihwcm9wZXJ0eSkpOworCSAgICAgICAgfSBl
bHNlIGlmIChJRHNmRGVidWdVSUNvbnN0YW50cy5QUkVGX01JTl9TVEVQX0lOVEVSVkFMLmVxdWFs
cyhwcm9wZXJ0eSkpIHsKKwkgICAgICAgICAgICBzZXRNaW5pbXVtU3RlcEludGVydmFsKHN0b3Jl
LmdldEludChwcm9wZXJ0eSkpOworCSAgICAgICAgfQorCSAgICB9CisKKworICAgIC8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLworCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIgCisgICAgcHVibGljIHZv
aWQgZXZlbnREaXNwYXRjaGVkKGZpbmFsIElTdXNwZW5kZWRETUV2ZW50IGUpIHsKKyAgICAgICAg
Ly8gVGFrZSBjYXJlIG9mIHRoZSBzdGVwcGluZyB0aW1lIG91dAorICAgICAgICBmVGltZWRPdXRG
bGFncy5yZW1vdmUoZS5nZXRETUNvbnRleHQoKSk7CisgICAgICAgIFNjaGVkdWxlZEZ1dHVyZTw/
PiBmdXR1cmUgPSBmVGltZWRPdXRGdXR1cmVzLnJlbW92ZShlLmdldERNQ29udGV4dCgpKTsgCisg
ICAgICAgIGlmIChmdXR1cmUgIT0gbnVsbCkgZnV0dXJlLmNhbmNlbChmYWxzZSk7CisgICAgICAg
IAorICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGEgc3RlcCBwZW5kaW5nLCBpZiBzbyBleGVj
dXRlIGl0CisgICAgICAgIHByb2Nlc3NTdGVwUXVldWUoZS5nZXRETUNvbnRleHQoKSk7CisgICAg
fQorCisgICAgQERzZlNlcnZpY2VFdmVudEhhbmRsZXIgCisgICAgcHVibGljIHZvaWQgZXZlbnRE
aXNwYXRjaGVkKGZpbmFsIElSZXN1bWVkRE1FdmVudCBlKSB7CisgICAgICAgIGlmIChlLmdldFJl
YXNvbigpLmVxdWFscyhTdGF0ZUNoYW5nZVJlYXNvbi5TVEVQKSkgeworICAgICAgICAgICAgZlRp
bWVkT3V0RmxhZ3MucHV0KGUuZ2V0RE1Db250ZXh0KCksIEJvb2xlYW4uRkFMU0UpOworICAgICAg
ICAgICAgLy8gV2Ugc2hvdWxkbid0IGhhdmUgYSBzdGVwcGluZyB0aW1lb3V0IHJ1bm5pbmcgdW5s
ZXNzIHdlIGdldCB0d28gCisgICAgICAgICAgICAvLyBzdGVwcGluZyBldmVudHMgaW4gYSByb3cg
d2l0aG91dCBhIHN1c3BlbmRlZCwgd2hpY2ggd291bGQgYmUgYSAKKyAgICAgICAgICAgIC8vIHBy
b3RvY29sIGVycm9yLgorICAgICAgICAgICAgYXNzZXJ0ICFmVGltZWRPdXRGdXR1cmVzLmNvbnRh
aW5zS2V5KGUuZ2V0RE1Db250ZXh0KCkpOworICAgICAgICAgICAgZlRpbWVkT3V0RnV0dXJlcy5w
dXQoCisgICAgICAgICAgICAgICAgZS5nZXRETUNvbnRleHQoKSwgCisgICAgICAgICAgICAgICAg
Z2V0RXhlY3V0b3IoKS5zY2hlZHVsZSgKKyAgICAgICAgICAgICAgICAgICAgbmV3IERzZlJ1bm5h
YmxlKCkgeyBwdWJsaWMgdm9pZCBydW4oKSB7CisgICAgICAgICAgICAgICAgICAgICAgICBmVGlt
ZWRPdXRGdXR1cmVzLnJlbW92ZShlLmdldERNQ29udGV4dCgpKTsKKworICAgICAgICAgICAgICAg
ICAgICAgICAgaWYgKGdldFNlc3Npb24oKS5pc0FjdGl2ZSgpKSB7CisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgLy8gSXNzdWUgdGhlIHN0ZXBwaW5nIHRpbWUtb3V0IGV2ZW50LgorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGdldFNlc3Npb24oKS5kaXNwYXRjaEV2ZW50KAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RlcHBpbmdUaW1lZE91dEV2ZW50KGUuZ2V0
RE1Db250ZXh0KCkpLCAKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCk7Cisg
ICAgICAgICAgICAgICAgICAgICAgICB9CisgICAgICAgICAgICAgICAgICAgIH19LAorICAgICAg
ICAgICAgICAgICAgICBTVEVQUElOR19USU1FT1VULCBUaW1lVW5pdC5NSUxMSVNFQ09ORFMpCisg
ICAgICAgICAgICAgICAgKTsKKyAgICAgICAgICAgIAorICAgICAgICB9IAorICAgIH0gICAgCisK
KyAgICBARHNmU2VydmljZUV2ZW50SGFuZGxlciAKKyAgICBwdWJsaWMgdm9pZCBldmVudERpc3Bh
dGNoZWQoU3RlcHBpbmdUaW1lZE91dEV2ZW50IGUpIHsKKyAgICAgICAgZlRpbWVkT3V0RmxhZ3Mu
cHV0KGUuZ2V0RE1Db250ZXh0KCksIEJvb2xlYW4uVFJVRSk7CisgICAgICAgIGVuYWJsZVN0ZXBw
aW5nKGUuZ2V0RE1Db250ZXh0KCkpOworICAgIH0KKyAgICAKKyAgICAKK30KSW5kZXg6IHNyYy9v
cmcvZWNsaXBzZS9kZC9kc2YvZGVidWcvaW50ZXJuYWwvcHJvdmlzaW9uYWwvdWkvdmlld21vZGVs
L0Fic3RyYWN0RGVidWdWTUFkYXB0ZXIuamF2YQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiBzcmMvb3Jn
L2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9B
YnN0cmFjdERlYnVnVk1BZGFwdGVyLmphdmEKZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2UvZGQvZHNm
L2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdtb2RlbC9BYnN0cmFjdERlYnVnVk1B
ZGFwdGVyLmphdmEKLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwCisrKyBz
cmMvb3JnL2VjbGlwc2UvZGQvZHNmL2RlYnVnL2ludGVybmFsL3Byb3Zpc2lvbmFsL3VpL3ZpZXdt
b2RlbC9BYnN0cmFjdERlYnVnVk1BZGFwdGVyLmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAw
MApAQCAtMCwwICsxLDY0IEBACisvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgorICogQ29weXJpZ2h0
IChjKSAyMDA4IFdpbmQgUml2ZXIgU3lzdGVtcyBhbmQgb3RoZXJzLgorICogQWxsIHJpZ2h0cyBy
ZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscworICog
YXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMg
TGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5k
IGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEw
Lmh0bWwKKyAqIAorICogQ29udHJpYnV0b3JzOgorICogICAgIFdpbmQgUml2ZXIgU3lzdGVtcyAt
IGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiov
CitwYWNrYWdlIG9yZy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5pbnRlcm5hbC5wcm92aXNpb25hbC51
aS52aWV3bW9kZWw7CisKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuY29uY3VycmVudC5Ec2ZS
dW5uYWJsZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YuZGVidWcuaW50ZXJuYWwucHJvdmlz
aW9uYWwudWkudmlld21vZGVsLlN0ZXBwaW5nQ29udHJvbGxlci5JU3RlcHBpbmdDb250cm9sUGFy
dGljaXBhbnQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNv
bnRyb2w7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVJ1bkNvbnRy
b2wuSVN1c3BlbmRlZERNRXZlbnQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGQuZHNmLnNlcnZpY2Uu
RHNmU2Vzc2lvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5kZC5kc2YudWkudmlld21vZGVsLklWTVBy
b3ZpZGVyOworaW1wb3J0IG9yZy5lY2xpcHNlLmRkLmRzZi51aS52aWV3bW9kZWwuZGF0YW1vZGVs
LkFic3RyYWN0RE1WTUFkYXB0ZXI7CitpbXBvcnQgb3JnLmVjbGlwc2UuZGVidWcuaW50ZXJuYWwu
dWkudmlld2Vycy5tb2RlbC5wcm92aXNpb25hbC5JUHJlc2VudGF0aW9uQ29udGV4dDsKKworLyoq
CisgKiBCYXNlIGNsYXNzIGZvciBWTSBhZGFwdGVycyB1c2VkIGZvciBpbXBsZW1lbnRpbmcgYSBk
ZWJ1Z2dlciBpbnRlZ3JhdGlvbi4KKyAqLworQFN1cHByZXNzV2FybmluZ3MoInJlc3RyaWN0aW9u
IikKK3B1YmxpYyBjbGFzcyBBYnN0cmFjdERlYnVnVk1BZGFwdGVyIGV4dGVuZHMgQWJzdHJhY3RE
TVZNQWRhcHRlcgorICAgIGltcGxlbWVudHMgSVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50IAor
eworICAgIAorICAgIHB1YmxpYyBBYnN0cmFjdERlYnVnVk1BZGFwdGVyKERzZlNlc3Npb24gc2Vz
c2lvbiwgU3RlcHBpbmdDb250cm9sbGVyIGNvbnRyb2xsZXIpIHsKKyAgICAgICAgc3VwZXIoc2Vz
c2lvbik7CisgICAgICAgIGZDb250cm9sbGVyID0gY29udHJvbGxlcjsKKyAgICAgICAgZkNvbnRy
b2xsZXIuYWRkU3RlcHBpbmdDb250cm9sUGFydGljaXBhbnQodGhpcyk7CisgICAgfQorCisgICAg
cHJpdmF0ZSBTdGVwcGluZ0NvbnRyb2xsZXIgZkNvbnRyb2xsZXI7CisKKyAgICBAT3ZlcnJpZGUK
KyAgICBwcm90ZWN0ZWQgSVZNUHJvdmlkZXIgY3JlYXRlVmlld01vZGVsUHJvdmlkZXIoSVByZXNl
bnRhdGlvbkNvbnRleHQgY29udGV4dCkgeworICAgICAgICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVk
IG1ldGhvZCBzdHViCisgICAgICAgIHJldHVybiBudWxsOworICAgIH0KKworICAgIEBPdmVycmlk
ZQorICAgIHB1YmxpYyB2b2lkIGRvbmVIYW5kbGVFdmVudChPYmplY3QgZXZlbnQpIHsKKyAgICAg
ICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgSVJ1bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQpIHsK
KyAgICAgICAgICAgIGZpbmFsIElTdXNwZW5kZWRETUV2ZW50IHN1c3BlbmRlZEV2ZW50PSAoSVJ1
bkNvbnRyb2wuSVN1c3BlbmRlZERNRXZlbnQpIGV2ZW50OworICAgICAgICAgICAgZkNvbnRyb2xs
ZXIuZ2V0U2Vzc2lvbigpLmdldEV4ZWN1dG9yKCkuZXhlY3V0ZShuZXcgRHNmUnVubmFibGUoKSB7
CisgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgeworICAgICAgICAgICAgICAgICAg
ICBmQ29udHJvbGxlci5kb25lU3RlcHBpbmcoc3VzcGVuZGVkRXZlbnQuZ2V0RE1Db250ZXh0KCks
IEFic3RyYWN0RGVidWdWTUFkYXB0ZXIudGhpcyk7CisgICAgICAgICAgICAgICAgfTsKKyAgICAg
ICAgICAgIH0pOworICAgICAgICB9CisgICAgfQorCisgICAgQE92ZXJyaWRlCisgICAgcHVibGlj
IHZvaWQgZGlzcG9zZSgpIHsKKyAgICAgICAgaWYgKGZDb250cm9sbGVyICE9IG51bGwpIHsKKyAg
ICAgICAgICAgIGZDb250cm9sbGVyLnJlbW92ZVN0ZXBwaW5nQ29udHJvbFBhcnRpY2lwYW50KHRo
aXMpOworICAgICAgICAgICAgZkNvbnRyb2xsZXIgPSBudWxsOworICAgICAgICB9CisgICAgICAg
IHN1cGVyLmRpc3Bvc2UoKTsKKyAgICB9Cit9CiNQIG9yZy5lY2xpcHNlLmRkLmdkYgpJbmRleDog
c3JjL29yZy9lY2xpcHNlL2RkL2dkYi9pbnRlcm5hbC9wcm92aXNpb25hbC9sYXVuY2hpbmcvU2Vy
dmljZXNMYXVuY2hTZXF1ZW5jZS5qYXZhCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2Rz
ZHAvb3JnLmVjbGlwc2UuZGQuZHNmL3BsdWdpbnMvb3JnLmVjbGlwc2UuZGQuZ2RiL3NyYy9vcmcv
ZWNsaXBzZS9kZC9nZGIvaW50ZXJuYWwvcHJvdmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZpY2VzTGF1
bmNoU2VxdWVuY2UuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS45CmRpZmYgLXUgLXIxLjkg
U2VydmljZXNMYXVuY2hTZXF1ZW5jZS5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2UvZGQvZ2RiL2lu
dGVybmFsL3Byb3Zpc2lvbmFsL2xhdW5jaGluZy9TZXJ2aWNlc0xhdW5jaFNlcXVlbmNlLmphdmEJ
MyBKdWwgMjAwOCAxOTowNToyMCAtMDAwMAkxLjkKKysrIHNyYy9vcmcvZWNsaXBzZS9kZC9nZGIv
aW50ZXJuYWwvcHJvdmlzaW9uYWwvbGF1bmNoaW5nL1NlcnZpY2VzTGF1bmNoU2VxdWVuY2UuamF2
YQkxNSBKdWwgMjAwOCAyMzoxNTowOSAtMDAwMApAQCAtMjQsNyArMjQsNiBAQAogaW1wb3J0IG9y
Zy5lY2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklSdW5Db250cm9sOwogaW1wb3J0IG9yZy5l
Y2xpcHNlLmRkLmRzZi5kZWJ1Zy5zZXJ2aWNlLklTb3VyY2VMb29rdXA7CiBpbXBvcnQgb3JnLmVj
bGlwc2UuZGQuZHNmLmRlYnVnLnNlcnZpY2UuSVN0YWNrOwotaW1wb3J0IG9yZy5lY2xpcHNlLmRk
LmRzZi5kZWJ1Zy5zZXJ2aWNlLlN0ZXBRdWV1ZU1hbmFnZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
ZGQuZHNmLnNlcnZpY2UuRHNmU2Vzc2lvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5kZC5nZGIuaW50
ZXJuYWwucHJvdmlzaW9uYWwuc2VydmljZS5jb21tYW5kLkdEQkNvbnRyb2w7CiBpbXBvcnQgb3Jn
LmVjbGlwc2UuZGQuZ2RiLmludGVybmFsLnByb3Zpc2lvbmFsLnNlcnZpY2UuY29tbWFuZC5HREJD
b250cm9sLlNlc3Npb25UeXBlOwpAQCAtNTYsMTAgKzU1LDYgQEAKICAgICAgICAgfX0sCiAgICAg
ICAgIG5ldyBTdGVwKCkgeyBAT3ZlcnJpZGUKICAgICAgICAgcHVibGljIHZvaWQgZXhlY3V0ZShS
ZXF1ZXN0TW9uaXRvciByZXF1ZXN0TW9uaXRvcikgewotICAgICAgICAgICAgbmV3IFN0ZXBRdWV1
ZU1hbmFnZXIoZlNlc3Npb24pLmluaXRpYWxpemUocmVxdWVzdE1vbml0b3IpOwotICAgICAgICB9
fSwKLSAgICAgICAgbmV3IFN0ZXAoKSB7IEBPdmVycmlkZQotICAgICAgICBwdWJsaWMgdm9pZCBl
eGVjdXRlKFJlcXVlc3RNb25pdG9yIHJlcXVlc3RNb25pdG9yKSB7CiAgICAgICAgIAlmTGF1bmNo
LmdldFNlcnZpY2VGYWN0b3J5KCkuY3JlYXRlU2VydmljZShmU2Vzc2lvbiwgSU1lbW9yeS5jbGFz
cykuaW5pdGlhbGl6ZShyZXF1ZXN0TW9uaXRvcik7CiAgICAgICAgIH19LAogICAgICAgICBuZXcg
U3RlcCgpIHsgQE92ZXJyaWRlCg==
</data>
<flag name="iplog"
          id="60958"
          type_id="7"
          status="-"
          setter="dschaefer"
    />
          </attachment>
      

    </bug>

</bugzilla>