<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214286</bug_id>
          
          <creation_ts>2008-01-03 18:23:00 -0500</creation_ts>
          <short_desc>Improve validation status message</short_desc>
          <delta_ts>2008-01-22 18:53:33 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>8</classification_id>
          <classification>WebTools</classification>
          <product>WTP Common Tools</product>
          <component>wst.validation</component>
          <version>3.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.0 M5</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Keith Chong">kchong</reporter>
          <assigned_to name="wst.validation">wst.validation-inbox</assigned_to>
          <cc>jesper</cc>
    
    <cc>karasiuk</cc>
    
    <cc>nitind</cc>
    
    <cc>valentinbaciu</cc>
          <qa_contact name="Chuck Bridgham">cbridgha</qa_contact>
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1125379</commentid>
    <comment_count>0</comment_count>
    <who name="Keith Chong">kchong</who>
    <bug_when>2008-01-03 18:23:15 -0500</bug_when>
    <thetext>The validation status message that appears when validating a file should be more user-friendly.

Currently it&apos;s:

Validation results, Errors=1, Warnings=0, Information=0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1125635</commentid>
    <comment_count>1</comment_count>
    <who name="Nitin Dahyabhai">nitind</who>
    <bug_when>2008-01-04 06:40:38 -0500</bug_when>
    <thetext>Suggestions?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1128532</commentid>
    <comment_count>2</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2008-01-09 17:14:15 -0500</bug_when>
    <thetext>A customized dialog would be best for this. If should have a general heading with a large icon, and three (optional) sections below.

The general heading would show a overall text like &quot;Validation successful&quot; (with some &quot;green light&quot; icon), of there were no messages. Otherwise it would show &quot;Validation complete&quot; with an icon matching the severity of the worst result message.

The three sections would be for errors, warnings and information. They should show brief yet specific  results if at all possible: If there are no mesages of that severity, the section is hidden. They should show smaller icons representing their severity.

* If there is exactly one message, show it directly (make it a clickable link!)
* If there is more than one message, check if they are all from the same resource, and if so, show the name/path of the resource and a text saying &quot;xxx errors found in MyProject/theResource.xml&quot; or whatever. Again, it should be clickable.
* If there is more than one message and they are not from the same resource, but from the same project, show a text saying &quot;xxx errors found in the project MyProject&quot; or similar.
* If there is more than one message (from multiple projects), just show the number of messages. 

In any case, the sections could also have a &quot;show all&quot; functionality which could grow the section and display all the messages directly.

If there aren&apos;t any messages, the dialog will be very tidy.

Too complex? How about a fifth section containing the proverbial kitchen sink? ;-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1131607</commentid>
    <comment_count>3</comment_count>
      <attachid>86956</attachid>
    <who name="Gary Karasiuk">karasiuk</who>
    <bug_when>2008-01-15 12:07:38 -0500</bug_when>
    <thetext>Created attachment 86956
new status dialog plus cleanup

This patch adds a new dialog, that is a bit nicer than the one that was there, but doesn&apos;t implement all your suggestions. 

It does use different icons to show the overall status, and it also indicates how many things were validated and how long it took.

This patch also includes some clean up of the old code, in my attempt to get rid of most of the Java 5 warnings.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1131646</commentid>
    <comment_count>4</comment_count>
    <who name="Chuck Bridgham">cbridgha</who>
    <bug_when>2008-01-15 12:51:33 -0500</bug_when>
    <thetext>dropped to build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1134681</commentid>
    <comment_count>5</comment_count>
    <who name="Valentin Baciu">valentinbaciu</who>
    <bug_when>2008-01-21 00:13:03 -0500</bug_when>
    <thetext>Chuck, I assume this was dropped for M5 so I&apos;m just updating the target. Please correct it if I&apos;m wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1136333</commentid>
    <comment_count>6</comment_count>
    <who name="Keith Chong">kchong</who>
    <bug_when>2008-01-22 18:27:01 -0500</bug_when>
    <thetext>Verified using WTP3.0 M5 build I20080122113125.

However, the message that reports the total validation time should be shifted over to the right and aligned with the text above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1136341</commentid>
    <comment_count>7</comment_count>
    <who name="Keith Chong">kchong</who>
    <bug_when>2008-01-22 18:36:46 -0500</bug_when>
    <thetext>See bug 216208</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1136349</commentid>
    <comment_count>8</comment_count>
    <who name="Keith Chong">kchong</who>
    <bug_when>2008-01-22 18:53:33 -0500</bug_when>
    <thetext>Closing bug.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>86956</attachid>
            <date>2008-01-15 12:07:00 -0500</date>
            <delta_ts>2008-01-15 12:07:38 -0500</delta_ts>
            <desc>new status dialog plus cleanup</desc>
            <filename>vf.patch</filename>
            <type>text/plain</type>
            <size>107259</size>
            <attacher name="Gary Karasiuk">karasiuk</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2Uud3N0LnZhbGlk
YXRpb24NCkluZGV4OiB2ZjIvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vUmVwb3J0ZXJIZWxw
ZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L3dlYnRvb2xzL2NvbW1vbi9w
bHVnaW5zL29yZy5lY2xpcHNlLndzdC52YWxpZGF0aW9uL3ZmMi9vcmcvZWNsaXBzZS93c3QvdmFs
aWRhdGlvbi9SZXBvcnRlckhlbHBlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xDQpk
aWZmIC11IC1yMS4xIFJlcG9ydGVySGVscGVyLmphdmENCi0tLSB2ZjIvb3JnL2VjbGlwc2Uvd3N0
L3ZhbGlkYXRpb24vUmVwb3J0ZXJIZWxwZXIuamF2YQkxOSBEZWMgMjAwNyAxNTo1NDo1NSAtMDAw
MAkxLjENCisrKyB2ZjIvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vUmVwb3J0ZXJIZWxwZXIu
amF2YQkxNSBKYW4gMjAwOCAxNzowMjoxOSAtMDAwMA0KQEAgLTUwLDEzICs1MCwxMSBAQA0KIAl9
DQogDQogCXB1YmxpYyB2b2lkIHJlbW92ZUFsbE1lc3NhZ2VzKElWYWxpZGF0b3Igb3JpZ2luLCBP
YmplY3Qgb2JqZWN0KSB7DQotCQkvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIG1ldGhvZCBzdHViDQot
DQorCQlfbGlzdC5jbGVhcigpOw0KIAl9DQogDQogCXB1YmxpYyB2b2lkIHJlbW92ZU1lc3NhZ2VT
dWJzZXQoSVZhbGlkYXRvciB2YWxpZGF0b3IsIE9iamVjdCBvYmosIFN0cmluZyBncm91cE5hbWUp
IHsNCi0JCS8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgbWV0aG9kIHN0dWINCi0NCisJCV9saXN0LmNs
ZWFyKCk7DQogCX0NCiAJDQogCXB1YmxpYyB2b2lkIG1ha2VNYXJrZXJzKCl7DQpJbmRleDogdmYy
L29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL1ZhbGlkYXRpb25GcmFtZXdvcmsuamF2YQ0KPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L3dlYnRvb2xzL2NvbW1vbi9wbHVnaW5zL29yZy5l
Y2xpcHNlLndzdC52YWxpZGF0aW9uL3ZmMi9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9WYWxp
ZGF0aW9uRnJhbWV3b3JrLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjINCmRpZmYgLXUg
LXIxLjIgVmFsaWRhdGlvbkZyYW1ld29yay5qYXZhDQotLS0gdmYyL29yZy9lY2xpcHNlL3dzdC92
YWxpZGF0aW9uL1ZhbGlkYXRpb25GcmFtZXdvcmsuamF2YQkyMSBEZWMgMjAwNyAxODoxNDozMiAt
MDAwMAkxLjINCisrKyB2ZjIvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vVmFsaWRhdGlvbkZy
YW1ld29yay5qYXZhCTE1IEphbiAyMDA4IDE3OjAyOjE5IC0wMDAwDQpAQCAtMTMxLDcgKzEzMSw2
IEBADQogCSAqLw0KIAlwdWJsaWMgVmFsaWRhdGlvblJlc3VsdHMgdmFsaWRhdGUoSVByb2plY3Rb
XSBwcm9qZWN0cywgZmluYWwgYm9vbGVhbiBpc01hbnVhbCwgZmluYWwgYm9vbGVhbiBpc0J1aWxk
LA0KIAkJSVByb2dyZXNzTW9uaXRvciBtb25pdG9yKSB0aHJvd3MgQ29yZUV4Y2VwdGlvbnsNCi0J
CS8vRklYTUUgbXVzdCBoYW5kbGUgdGhlIG9sZCB2YWxpZGF0b3JzIGFzIHdlbGwNCiAJCVZhbE9w
ZXJhdGlvbiB2byA9IFZhbGlkYXRpb25SdW5uZXIudmFsaWRhdGUoY3JlYXRlTWFwKHByb2plY3Rz
KSwgaXNNYW51YWwsIGlzQnVpbGQsIG1vbml0b3IpOw0KIAkJcmV0dXJuIHZvLmdldFJlc3VsdHMo
KTsNCiAJfQ0KSW5kZXg6IHZmMi9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9WYWxpZGF0aW9u
UmVzdWx0LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21t
b24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi92ZjIvb3JnL2VjbGlwc2Uvd3N0
L3ZhbGlkYXRpb24vVmFsaWRhdGlvblJlc3VsdC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24g
MS4xDQpkaWZmIC11IC1yMS4xIFZhbGlkYXRpb25SZXN1bHQuamF2YQ0KLS0tIHZmMi9vcmcvZWNs
aXBzZS93c3QvdmFsaWRhdGlvbi9WYWxpZGF0aW9uUmVzdWx0LmphdmEJMTkgRGVjIDIwMDcgMTU6
NTQ6NTUgLTAwMDAJMS4xDQorKysgdmYyL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL1ZhbGlk
YXRpb25SZXN1bHQuamF2YQkxNSBKYW4gMjAwOCAxNzowMjoyMCAtMDAwMA0KQEAgLTExLDcgKzEx
LDcgQEANCiAgKiBAYXV0aG9yIGthcmFzaXVrDQogICoNCiAgKi8NCi1wdWJsaWMgY2xhc3MgVmFs
aWRhdGlvblJlc3VsdCB7DQorcHVibGljIGZpbmFsIGNsYXNzIFZhbGlkYXRpb25SZXN1bHQgew0K
IAkNCiAJcHJpdmF0ZSBMaXN0PFZhbGlkYXRvck1lc3NhZ2U+IF9tZXNzYWdlczsNCiAJDQpAQCAt
MzYsNiArMzYsOSBAQA0KIAlwcml2YXRlIGludAkJCV9zZXZlcml0eVdhcm5pbmc7DQogCXByaXZh
dGUgaW50CQkJX3NldmVyaXR5SW5mbzsNCiAJDQorCS8qKiBBIGNvdW50IG9mIHRoZSBudW1iZXIg
b2YgcmVzb3VyY2VzIHRoYXQgd2VyZSB2YWxpZGF0ZWQuICovDQorCXByaXZhdGUgaW50CQkJX251
bWJlck9mVmFsaWRhdGVkUmVzb3VyY2VzOw0KKwkNCiAJLyoqDQogCSAqIFRoaXMgaXMgYW4gb3B0
aW9uYWwgbWV0aG9kLCB0aGF0IGEgdmFsaWRhdG9yIGNhbiB1c2UgdG8gcmV0dXJuIGVycm9yIG1l
c3NhZ2VzLiBXaGVuIHRoZSB2YWxpZGF0aW9uIGZyYW1ld29yaw0KIAkgKiBpcyBpbnZva2luZyB0
aGUgdmFsaWRhdG9yIHRoZXNlIHdpbGwgYmUgY29udmVydGVkIGludG8gSU1hcmtlcnMuIElmIHRo
ZSB2YWxpZGF0b3IgaXMgYmVpbmcgY2FsbGVkIGRpcmVjdGx5IHRoZW4NCkBAIC04NCw2ICs4Nyw5
IEBADQogCQlpbmNyZW1lbnRXYXJuaW5nKHJlc3VsdC5nZXRTZXZlcml0eVdhcm5pbmcoKSk7DQog
CQlpbmNyZW1lbnRJbmZvKHJlc3VsdC5nZXRTZXZlcml0eUluZm8oKSk7DQogCQkNCisJCV9udW1i
ZXJPZlZhbGlkYXRlZFJlc291cmNlcysrOw0KKwkJaWYgKHJlc3VsdC5nZXRWYWxpZGF0ZWQoKSAh
PSBudWxsKV9udW1iZXJPZlZhbGlkYXRlZFJlc291cmNlcyArPSByZXN1bHQuZ2V0VmFsaWRhdGVk
KCkubGVuZ3RoOw0KKwkJDQogCX0NCiANCiANCkBAIC0yNDgsNCArMjU0LDExIEBADQogCQlfY2Fu
Y2VsZWQgPSBjYW5jZWxlZDsNCiAJfQ0KIA0KKwkvKioNCisJICogQW5zd2VyIHRoZSBudW1iZXIg
b2YgcmVzb3VyY2VzIHRoYXQgaGF2ZSBiZWVuIHZhbGlkYXRlZC4NCisJICovDQorCXB1YmxpYyBp
bnQgZ2V0TnVtYmVyT2ZWYWxpZGF0ZWRSZXNvdXJjZXMoKSB7DQorCQlyZXR1cm4gX251bWJlck9m
VmFsaWRhdGVkUmVzb3VyY2VzOw0KKwl9DQorDQogfQ0KSW5kZXg6IHZhbGlkYXRlL29yZy9lY2xp
cHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMvVmFsaWRhdG9yU3Vic2V0T3Bl
cmF0aW9uLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21t
b24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9vcmcvZWNsaXBz
ZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1ZhbGlkYXRvclN1YnNldE9wZXJh
dGlvbi5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS44DQpkaWZmIC11IC1yMS44IFZhbGlk
YXRvclN1YnNldE9wZXJhdGlvbi5qYXZhDQotLS0gdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3Zh
bGlkYXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9WYWxpZGF0b3JTdWJzZXRPcGVyYXRpb24uamF2
YQk3IEp1biAyMDA3IDE5OjI4OjM3IC0wMDAwCTEuOA0KKysrIHZhbGlkYXRlL29yZy9lY2xpcHNl
L3dzdC92YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMvVmFsaWRhdG9yU3Vic2V0T3BlcmF0
aW9uLmphdmEJMTUgSmFuIDIwMDggMTc6MDI6MTkgLTAwMDANCkBAIC0yNDksNyArMjQ5LDcgQEAN
CiAJCX0NCiANCiAJCWlmICgoY2hhbmdlZFJlc291cmNlcyAhPSBudWxsKSAmJiAoY2hhbmdlZFJl
c291cmNlcy5sZW5ndGggPiAwKSkgew0KLQkJCVNldCB0ZW1wU2V0ID0gbmV3IEhhc2hTZXQoKTsN
CisJCQlTZXQ8SVByb2plY3Q+IHRlbXBTZXQgPSBuZXcgSGFzaFNldDxJUHJvamVjdD4oKTsNCiAJ
CQlmb3IgKGludCBpID0gMDsgaSA8IGNoYW5nZWRSZXNvdXJjZXMubGVuZ3RoOyBpKyspIHsNCiAJ
CQkJSVByb2plY3QgcCA9IGNoYW5nZWRSZXNvdXJjZXNbaV0uZ2V0UHJvamVjdCgpOw0KIAkJCQlp
ZiAoIXAuaXNPcGVuKCkpIHsNCkBAIC0yNjYsOSArMjY2LDkgQEANCiAJCQl9DQogCQkJaWYgKHRl
bXBTZXQuc2l6ZSgpICE9IDEpIHsNCiAJCQkJU3RyaW5nQnVmZmVyIGJ1ZmZlciA9IG5ldyBTdHJp
bmdCdWZmZXIoIlxuIik7IC8vJE5PTi1OTFMtMSQNCi0JCQkJSXRlcmF0b3IgaXRlcmF0b3IgPSB0
ZW1wU2V0Lml0ZXJhdG9yKCk7DQorCQkJCUl0ZXJhdG9yPElQcm9qZWN0PiBpdGVyYXRvciA9IHRl
bXBTZXQuaXRlcmF0b3IoKTsNCiAJCQkJd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkgew0KLQkJ
CQkJSVByb2plY3QgcCA9IChJUHJvamVjdCkgaXRlcmF0b3IubmV4dCgpOw0KKwkJCQkJSVByb2pl
Y3QgcCA9IGl0ZXJhdG9yLm5leHQoKTsNCiAJCQkJCWJ1ZmZlci5hcHBlbmQoIlx0Iik7IC8vJE5P
Ti1OTFMtMSQNCiAJCQkJCWJ1ZmZlci5hcHBlbmQocC5nZXROYW1lKCkpOw0KIAkJCQkJaWYgKGl0
ZXJhdG9yLmhhc05leHQoKSkgew0KQEAgLTI4OCwyMiArMjg4LDcgQEANCiANCiAJCXNldEVuYWJs
ZWRWYWxpZGF0b3JzKEludGVybmFsVmFsaWRhdG9yTWFuYWdlci53cmFwSW5TZXQodm1kcykpOw0K
IAkJc2V0RmlsZURlbHRhcyhGaWx0ZXJVdGlsLmdldEZpbGVEZWx0YXMoZ2V0RW5hYmxlZFZhbGlk
YXRvcnMoKSwgY2hhbmdlZFJlc291cmNlcywgaWZpbGVEZWx0YVR5cGUpKTsgLy8gY29uc3RydWN0
DQotCQkvLyBhbg0KLQkJLy8gYXJyYXkNCi0JCS8vIG9mDQotCQkvLyBJRmlsZURlbHRhW10NCi0J
CS8vIHRvDQotCQkvLyB3cmFwDQotCQkvLyB0aGUNCi0JCS8vIElSZXNvdXJjZVtdOw0KLQkJLy8g
b25lDQotCQkvLyBJRmlsZURlbHRhDQotCQkvLyBmb3INCi0JCS8vIGVhY2gNCi0JCS8vIElSZXNv
dXJjZQ0KLQkJLy8gaW4NCi0JCS8vIHRoZQ0KLQkJLy8gYXJyYXkNCisJCS8vIGFuIGFycmF5IG9m
IElGaWxlRGVsdGFbXSB0byB3cmFwIHRoZSBJUmVzb3VyY2VbXTsgb25lIElGaWxlRGVsdGEgZm9y
IGVhY2ggSVJlc291cmNlIGluIHRoZSBhcnJheQ0KIAl9DQogDQogCS8qKg0KQEAgLTMxMywxNCAr
Mjk4LDE0IEBADQogCSAqIG9mIElQcm9qZWN0LikNCiAJICovDQogCXB1YmxpYyB2b2lkIHNldFZh
bGlkYXRvcnMoU3RyaW5nW10gdmFsaWRhdG9yTmFtZXMpIHRocm93cyBJbGxlZ2FsQXJndW1lbnRF
eGNlcHRpb24gew0KLQkJU2V0IGVuYWJsZWQgPSBuZXcgSGFzaFNldCgpOw0KLQkJZm9yIChpbnQg
aSA9IDA7IGkgPCB2YWxpZGF0b3JOYW1lcy5sZW5ndGg7IGkrKykgew0KLQkJCVZhbGlkYXRvck1l
dGFEYXRhIHZtZCA9IFZhbGlkYXRpb25SZWdpc3RyeVJlYWRlci5nZXRSZWFkZXIoKS5nZXRWYWxp
ZGF0b3JNZXRhRGF0YSh2YWxpZGF0b3JOYW1lc1tpXSk7DQorCQlTZXQ8VmFsaWRhdG9yTWV0YURh
dGE+IGVuYWJsZWQgPSBuZXcgSGFzaFNldDxWYWxpZGF0b3JNZXRhRGF0YT4oKTsNCisJCWZvciAo
U3RyaW5nIG5hbWUgOiB2YWxpZGF0b3JOYW1lcykgew0KKwkJCVZhbGlkYXRvck1ldGFEYXRhIHZt
ZCA9IFZhbGlkYXRpb25SZWdpc3RyeVJlYWRlci5nZXRSZWFkZXIoKS5nZXRWYWxpZGF0b3JNZXRh
RGF0YShuYW1lKTsNCiAJCQlpZiAodm1kID09IG51bGwpIHsNCiAJCQkJLy8gTm8gdmFsaWRhdG9y
LCB3aXRoIHRoYXQgcGx1Z2luIGlkLCBjYW4gYmUgcnVuIG9uIHRoYXQgcHJvamVjdC4NCiAJCQkJ
Ly8gRWl0aGVyIHRoZSB2YWxpZGF0b3IgaXNuJ3QgaW5zdGFsbGVkLCBvciB0aGUgSVByb2plY3Qg
cGFzc2VkIGluDQogCQkJCS8vIGRvZXNuJ3QgaGF2ZSB0aGUgbmVjZXNzYXJ5IG5hdHVyZS4NCi0J
CQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbih2YWxpZGF0b3JOYW1lc1tpXSk7
DQorCQkJCXRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24obmFtZSk7DQogCQkJfQ0K
IAkJCWVuYWJsZWQuYWRkKHZtZCk7DQogCQl9DQpJbmRleDogdmFsaWRhdGUvb3JnL2VjbGlwc2Uv
d3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9PbmVWYWxpZGF0b3JPcGVyYXRpb24u
amF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L3dlYnRvb2xzL2NvbW1vbi9wbHVn
aW5zL29yZy5lY2xpcHNlLndzdC52YWxpZGF0aW9uL3ZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92
YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMvT25lVmFsaWRhdG9yT3BlcmF0aW9uLmphdmEs
dg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMNCmRpZmYgLXUgLXIxLjMgT25lVmFsaWRhdG9yT3Bl
cmF0aW9uLmphdmENCi0tLSB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRl
cm5hbC9vcGVyYXRpb25zL09uZVZhbGlkYXRvck9wZXJhdGlvbi5qYXZhCTI0IE5vdiAyMDA0IDEz
OjE4OjI1IC0wMDAwCTEuMw0KKysrIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9u
L2ludGVybmFsL29wZXJhdGlvbnMvT25lVmFsaWRhdG9yT3BlcmF0aW9uLmphdmEJMTUgSmFuIDIw
MDggMTc6MDI6MTYgLTAwMDANCkBAIC0xMTcsNyArMTE3LDcgQEANCiAJCQl0aHJvdyBuZXcgSWxs
ZWdhbEFyZ3VtZW50RXhjZXB0aW9uKHZhbGlkYXRvcklkKTsNCiAJCX0NCiANCi0JCVNldCBlbmFi
bGVkID0gbmV3IEhhc2hTZXQoKTsNCisJCVNldDxWYWxpZGF0b3JNZXRhRGF0YT4gZW5hYmxlZCA9
IG5ldyBIYXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIAkJZW5hYmxlZC5hZGQodm1kKTsN
CiAJCXNldEVuYWJsZWRWYWxpZGF0b3JzKGVuYWJsZWQpOw0KIAl9DQpJbmRleDogdmFsaWRhdGUv
b3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9WYWxpZGF0aW9u
VXRpbGl0eS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qvd2VidG9vbHMvY29t
bW9uL3BsdWdpbnMvb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24vdmFsaWRhdGUvb3JnL2VjbGlw
c2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9WYWxpZGF0aW9uVXRpbGl0eS5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS45DQpkaWZmIC11IC1yMS45IFZhbGlkYXRpb25V
dGlsaXR5LmphdmENCi0tLSB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRl
cm5hbC9vcGVyYXRpb25zL1ZhbGlkYXRpb25VdGlsaXR5LmphdmEJMjEgRGVjIDIwMDcgMTg6MTQ6
MzEgLTAwMDAJMS45DQorKysgdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50
ZXJuYWwvb3BlcmF0aW9ucy9WYWxpZGF0aW9uVXRpbGl0eS5qYXZhCTE1IEphbiAyMDA4IDE3OjAy
OjE4IC0wMDAwDQpAQCAtNDUsNyArNDUsNyBAQA0KIAkJCXJldHVybiBuZXcgU3RyaW5nWzBdOw0K
IAkJfQ0KIA0KLQkJU2V0IHRlbXBTZXQgPSBuZXcgSGFzaFNldCgpOw0KKwkJU2V0PFN0cmluZz4g
dGVtcFNldCA9IG5ldyBIYXNoU2V0PFN0cmluZz4oKTsNCiAJCWZvciAoaW50IGkgPSAwOyBpIDwg
bWFya2Vycy5sZW5ndGg7IGkrKykgew0KIAkJCUlNYXJrZXIgbWFya2VyID0gbWFya2Vyc1tpXTsN
CiAJCQl0cnkgew0KQEAgLTU0LDcgKzU0LDcgQEANCiAJCQkJCS8vIFRoZSBWYWxpZGF0aW9uTWln
cmF0b3Igd2lsbCByZW1vdmUgYW55ICJ1bm93bmVkIiB2YWxpZGF0aW9uIG1hcmtlcnMuDQogCQkJ
CQljb250aW51ZTsNCiAJCQkJfQ0KLQkJCQl0ZW1wU2V0LmFkZChvd25lcik7DQorCQkJCXRlbXBT
ZXQuYWRkKChTdHJpbmcpb3duZXIpOw0KIAkJCX0gY2F0Y2ggKENvcmVFeGNlcHRpb24gZXhjKSB7
DQogCQkJCUxvZ2dlciBsb2dnZXIgPSBWYWxpZGF0aW9uUGx1Z2luLmdldFBsdWdpbigpLmdldE1z
Z0xvZ2dlcigpOw0KIAkJCQlpZiAobG9nZ2VyLmlzTG9nZ2luZ0xldmVsKExldmVsLlNFVkVSRSkp
IHsNCkluZGV4OiB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9v
cGVyYXRpb25zL1JlZmVyZW5jaWFsRmlsZVZhbGlkYXRvci5qYXZhDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1Mg
ZmlsZTogL2N2c3Jvb3Qvd2VidG9vbHMvY29tbW9uL3BsdWdpbnMvb3JnLmVjbGlwc2Uud3N0LnZh
bGlkYXRpb24vdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3Bl
cmF0aW9ucy9SZWZlcmVuY2lhbEZpbGVWYWxpZGF0b3IuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlz
aW9uIDEuMw0KZGlmZiAtdSAtcjEuMyBSZWZlcmVuY2lhbEZpbGVWYWxpZGF0b3IuamF2YQ0KLS0t
IHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMv
UmVmZXJlbmNpYWxGaWxlVmFsaWRhdG9yLmphdmEJNyBKdW4gMjAwNyAxOToyODozNyAtMDAwMAkx
LjMNCisrKyB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVy
YXRpb25zL1JlZmVyZW5jaWFsRmlsZVZhbGlkYXRvci5qYXZhCTE1IEphbiAyMDA4IDE3OjAyOjE2
IC0wMDAwDQpAQCAtMTgsNiArMTgsOCBAQA0KIA0KIGltcG9ydCBqYXZhLnV0aWwuTGlzdDsNCiAN
CitpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5yZXNvdXJjZXMuSUZpbGU7DQorDQogLyoqDQogICog
QGF1dGhvciB2aWpheWINCiAgKi8NCkBAIC0yOSw1ICszMSw1IEBADQogCSAqIEBwYXJhbSBpbnB1
dEZpbGVzDQogCSAqIEByZXR1cm4gYSBsaXN0IG9mIElGaWxlJ3MuDQogCSAqLw0KLQlwdWJsaWMg
TGlzdCBnZXRSZWZlcmVuY2VkRmlsZShMaXN0IGlucHV0RmlsZXMpOw0KKwlwdWJsaWMgTGlzdDxJ
RmlsZT4gZ2V0UmVmZXJlbmNlZEZpbGUoTGlzdCBpbnB1dEZpbGVzKTsNCiB9DQpJbmRleDogdmFs
aWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9WYWxp
ZGF0aW9uT3BlcmF0aW9uLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0
b29scy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9v
cmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1ZhbGlkYXRpb25P
cGVyYXRpb24uamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNTENCmRpZmYgLXUgLXIxLjUx
IFZhbGlkYXRpb25PcGVyYXRpb24uamF2YQ0KLS0tIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92
YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMvVmFsaWRhdGlvbk9wZXJhdGlvbi5qYXZhCTIw
IERlYyAyMDA3IDE1OjI4OjIyIC0wMDAwCTEuNTENCisrKyB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93
c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1ZhbGlkYXRpb25PcGVyYXRpb24uamF2
YQkxNSBKYW4gMjAwOCAxNzowMjoxOCAtMDAwMA0KQEAgLTEyLDkgKzEyLDkgQEANCiANCiBpbXBv
cnQgamF2YS50ZXh0Lk1lc3NhZ2VGb3JtYXQ7DQogaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7
DQotaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsNCiBpbXBvcnQgamF2YS51dGlsLkhhc2hT
ZXQ7DQogaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsNCitpbXBvcnQgamF2YS51dGlsLkxpbmtl
ZExpc3Q7DQogaW1wb3J0IGphdmEudXRpbC5MaXN0Ow0KIGltcG9ydCBqYXZhLnV0aWwuTWFwOw0K
IGltcG9ydCBqYXZhLnV0aWwuU2V0Ow0KQEAgLTYxLDcgKzYxLDYgQEANCiBpbXBvcnQgb3JnLmVj
bGlwc2Uud3N0LnZhbGlkYXRpb24uaW50ZXJuYWwucHJvdmlzaW9uYWwuY29yZS5JVmFsaWRhdGlv
bkNvbnRleHQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLndzdC52YWxpZGF0aW9uLmludGVybmFsLnBy
b3Zpc2lvbmFsLmNvcmUuSVZhbGlkYXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uud3N0LnZhbGlk
YXRpb24uaW50ZXJuYWwucHJvdmlzaW9uYWwuY29yZS5JVmFsaWRhdG9ySm9iOw0KLWltcG9ydCBv
cmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi5pbnRlcm5hbC5wcm92aXNpb25hbC5jb3JlLk1lc3Nh
Z2VMaW1pdEV4Y2VwdGlvbjsNCiANCiAvKioNCiAgKiBJbXBsZW1lbnRlZCBWYWxpZGF0b3JzIG1l
dGhvZHMgbXVzdCBub3QgYmUgY2FsbGVkIGRpcmVjdGx5IGJ5IGFueW9uZSBvdGhlciB0aGFuIHRo
aXMgY2xhc3MsIHNpbmNlDQpAQCAtMTAwLDI5ICs5OSwyMyBAQA0KIAkgKiBAZGVwcmVjYXRlZCBX
aWxsIGJlIHJlbW92ZWQgaW4gTWlsZXN0b25lIDMuIFVzZSBERUZBVUxUX0FTWU5DDQogCSAqLw0K
IAlwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIGJvb2xlYW4gREVGQVVMVF9GT1JLID0gZmFsc2U7IC8v
IEBkZXByZWNhdGVkDQotCXByaXZhdGUgSVByb2plY3QgX3Byb2plY3QgPSBudWxsOyAvLyBwcm9q
ZWN0IHRvIGJlIHZhbGlkYXRlZA0KLQlwcml2YXRlIGludCBfcnVsZUdyb3VwID0gUmVnaXN0cnlD
b25zdGFudHMuQVRUX1JVTEVfR1JPVVBfREVGQVVMVDsgLy8gd2hpY2gNCi0JLy8gcGFzcw0KLQkv
LyBzaG91bGQNCi0JLy8gdGhlDQotCS8vIHZhbGlkYXRpb24NCi0JLy8gaW52b2tlDQorCXByaXZh
dGUgSVByb2plY3QgCQlfcHJvamVjdDsgLy8gcHJvamVjdCB0byBiZSB2YWxpZGF0ZWQNCisJcHJp
dmF0ZSBpbnQgCQkJX3J1bGVHcm91cCA9IFJlZ2lzdHJ5Q29uc3RhbnRzLkFUVF9SVUxFX0dST1VQ
X0RFRkFVTFQ7DQogCXByaXZhdGUgYm9vbGVhbiBfZm9yayA9IERFRkFVTFRfQVNZTkM7IC8vIGRv
IG5vdCBmb3JrIHRoZSB2YWxpZGF0aW9uIGludG8gYQ0KIAkvLyBkaWZmZXJlbnQgdGhyZWFkIGJ5
IGRlZmF1bHQNCi0JcHJpdmF0ZSBNYXAgX2ZpbGVEZWx0YXMgPSBudWxsOyAvLyBUbyByZWR1Y2Ug
b2JqZWN0IGNyZWF0aW9uLA0KLQlwcml2YXRlIElSZXNvdXJjZURlbHRhIF9kZWx0YSA9IG51bGw7
DQorCXByaXZhdGUgTWFwPFZhbGlkYXRvck1ldGFEYXRhLCBTZXQ8SUZpbGVEZWx0YT4+IF9maWxl
RGVsdGFzOyAvLyBUbyByZWR1Y2Ugb2JqZWN0IGNyZWF0aW9uLA0KKwlwcml2YXRlIElSZXNvdXJj
ZURlbHRhIF9kZWx0YTsNCisJDQogCS8vIHRoZSByZXNvdXJjZSBkZWx0YSB0cmVlIHRvIGJlIHBy
b2Nlc3NlZCwgb3IgbnVsbCBpZiBhIGZ1bGwgYnVpbGQvbWVudQ0KIAkvLyBvcHRpb24gd2FzIHRy
aWdnZXJlZC4gVGhpcyB2YWx1ZSBpcyBjYWNoZWQgc28gdGhhdCB2YWxpZGF0aW9uIGNhbiBiZSBy
dW4NCiAJLy8gZWl0aGVyIGZyb20gYSBidWlsZGVyLCBvciBmcm9tIGEgbWVudSBpdGVtLiAoVGhl
IE9wZXJhdGlvbiBpbnRlcmZhY2UNCiAJLy8gZG9lc24ndCBhbGxvdyBhbnkgcGFyYW1ldGVyIG9u
IGV4ZWN1dGUgZXhjZXB0IHRoZSBJUHJvZ3Jlc3NNb25pdG9yLikNCi0JcHJpdmF0ZSBTZXQgX2Vu
YWJsZWRWYWxpZGF0b3JzID0gbnVsbDsNCi0JcHJpdmF0ZSBib29sZWFuIF9mb3JjZSA9IERFRkFV
TFRfRk9SQ0U7IC8vIGZvcmNlIHRoaXMgb3BlcmF0aW9uIHRvIHJ1biBldmVuDQotCS8vIGlmIGl0
IGRvZXNuJ3QgbmVlZCB0bz8NCi0JcHJpdmF0ZSBib29sZWFuIF9pc0Z1bGxWYWxpZGF0ZSA9IGZh
bHNlOyAvLyBSdW4gYSBmdWxsIHZhbGlkYXRpb24gb3IgYW4NCi0JLy8gaW5jcmVtZW50YWw/ICh0
cnVlID0gZnVsbCkNCi0JcHJpdmF0ZSBCb29sZWFuIF9pc0F1dG9CdWlsZCA9IG51bGw7IC8vIElz
IHRoZSBnbG9iYWwgYXV0by1idWlsZCBwcmVmZXJlbmNlDQotCS8vIGVuYWJsZWQ/DQotCXByaXZh
dGUgU2V0IF9sYXVuY2hlZFZhbGlkYXRvcnMgPSBudWxsOyAvLyBBIGxpc3Qgb2YgdGhlIHZhbGlk
YXRvcnMgdGhhdA0KKwlwcml2YXRlIFNldDxWYWxpZGF0b3JNZXRhRGF0YT4gX2VuYWJsZWRWYWxp
ZGF0b3JzOw0KKwkNCisJcHJpdmF0ZSBib29sZWFuIF9mb3JjZSA9IERFRkFVTFRfRk9SQ0U7IC8v
IGZvcmNlIHRoaXMgb3BlcmF0aW9uIHRvIHJ1biBldmVuIGlmIGl0IGRvZXNuJ3QgbmVlZCB0bz8N
CisJcHJpdmF0ZSBib29sZWFuIF9pc0Z1bGxWYWxpZGF0ZTsgCS8vIFJ1biBhIGZ1bGwgdmFsaWRh
dGlvbiBvciBhbiBpbmNyZW1lbnRhbD8gKHRydWUgPSBmdWxsKQ0KKwlwcml2YXRlIEJvb2xlYW4g
X2lzQXV0b0J1aWxkOyAJCS8vIElzIHRoZSBnbG9iYWwgYXV0by1idWlsZCBwcmVmZXJlbmNlIGVu
YWJsZWQ/DQorCXByaXZhdGUgU2V0PFZhbGlkYXRvck1ldGFEYXRhPiBfbGF1bmNoZWRWYWxpZGF0
b3JzOw0KIAkNCiAJcHJvdGVjdGVkIElXb3JrYmVuY2hDb250ZXh0IGNvbnRleHQ7DQogDQpAQCAt
MjA4LDcgKzIwMSw3IEBADQogCQlfcnVsZUdyb3VwID0gcnVsZUdyb3VwOw0KIAkJX2ZvcmsgPSBm
b3JrOw0KIAkJX2ZvcmNlID0gZm9yY2U7DQotCQlfZW5hYmxlZFZhbGlkYXRvcnMgPSBuZXcgSGFz
aFNldCgpOw0KKwkJX2VuYWJsZWRWYWxpZGF0b3JzID0gbmV3IEhhc2hTZXQ8VmFsaWRhdG9yTWV0
YURhdGE+KCk7DQogCX0NCiAJDQogCS8qKg0KQEAgLTIyMiw3ICsyMTUsNyBAQA0KIAkJX3J1bGVH
cm91cCA9IHJ1bGVHcm91cDsNCiAJCV9mb3JrID0gZm9yazsNCiAJCV9mb3JjZSA9IGZvcmNlOw0K
LQkJX2VuYWJsZWRWYWxpZGF0b3JzID0gbmV3IEhhc2hTZXQoKTsNCisJCV9lbmFibGVkVmFsaWRh
dG9ycyA9IG5ldyBIYXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIAkJY29udGV4dCA9IGFD
b250ZXh0Ow0KIAl9DQogDQpAQCAtNDY4LDE5ICs0NjEsOCBAQA0KIAkgKiBydW4gYXV0b21hdGlj
YWxseS4pDQogCSAqLw0KIAlwcml2YXRlIGJvb2xlYW4gaXNWYWxpZGF0aW9uTmVjZXNzYXJ5KFZh
bGlkYXRvck1ldGFEYXRhIHZtZCwgSUZpbGVEZWx0YVtdIGRlbHRhKSB7DQotCQkvLyBWYWxpZGF0
aW9uIGlzIG5vdCBuZWNlc3NhcnkgaWY6DQotCQkvLyAgICAxLiBhdXRvLXZhbGlkYXRpb24gaGFz
IHJ1biBhbmQgdGhlIHZhbGlkYXRvciBpcyBpbmNyZW1lbnRhbCwNCi0JCS8vICAgIDIuIFRoZXJl
IGFyZSBubyBmaWxlcyBmb3IgdGhlIHZhbGlkYXRvciB0byB2YWxpZGF0ZS4NCi0JCS8vIFRoZXJl
IGFyZSBmaWxlcyB0byB2YWxpZGF0ZSBpZiB0aGlzIGlzIGEgZnVsbCB2YWxpZGF0aW9uIG9yIGlm
IHRoZQ0KLQkJLy8gdmFsaWRhdG9yIGZpbHRlcmVkIGluIHNvbWUgb2YgdGhlIGRlbHRhcy4NCi0J
CWJvb2xlYW4gYXV0b1ZhbGlkYXRlUmFuID0gZmFsc2U7DQotCQlpZiAoX2lzQXV0b0J1aWxkICE9
IG51bGwpIHsNCi0JCQkvLyBVc2VyIHNldCB0aGUgYXV0b0J1aWxkIGRlZmF1bHQsIHNvIGNoZWNr
IGlmIHZhbGlkYXRpb24gaXMNCi0JCQkvLyBuZWNlc3Nhcnkgb3Igbm90Lg0KLQkJCWF1dG9WYWxp
ZGF0ZVJhbiA9IFZhbGlkYXRvck1hbmFnZXIuZ2V0TWFuYWdlcigpLmlzQXV0b1ZhbGlkYXRlKGdl
dFByb2plY3QoKSwgX2lzQXV0b0J1aWxkLmJvb2xlYW5WYWx1ZSgpKSAmJiB2bWQuaXNJbmNyZW1l
bnRhbCgpOw0KLQkJfQ0KLQkJYm9vbGVhbiBoYXNGaWxlcyA9IChpc0Z1bGxWYWxpZGF0ZSgpIHx8
IChkZWx0YS5sZW5ndGggPiAwKSk7DQotCQlyZXR1cm4gKCFhdXRvVmFsaWRhdGVSYW4gJiYgaGFz
RmlsZXMpOw0KKwkJLy8gVmFsaWRhdGlvbiBpcyBub3QgbmVjZXNzYXJ5IGlmIHRoZXJlIGFyZSBu
byBmaWxlcyBmb3IgdGhlIHZhbGlkYXRvciB0byB2YWxpZGF0ZS4NCisJCXJldHVybiBpc0Z1bGxW
YWxpZGF0ZSgpIHx8IChkZWx0YS5sZW5ndGggPiAwKTsNCiAJfQ0KIA0KIAkvKioNCkBAIC01MDUs
MTggKzQ4NywxNSBAQA0KIAkJcmV0dXJuIGZhbHNlOw0KIAl9DQogDQotCXByaXZhdGUgTWFwIGdl
dEZpbGVEZWx0YXMoSVByb2dyZXNzTW9uaXRvciBtb25pdG9yKSB0aHJvd3MgQ29yZUV4Y2VwdGlv
biB7DQotCQlpZiAoX2ZpbGVEZWx0YXMgPT0gbnVsbCkgew0KLQkJCWxvYWRGaWxlRGVsdGFzKG1v
bml0b3IpOw0KLQkJfQ0KKwlwcml2YXRlIE1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxl
RGVsdGE+PiBnZXRGaWxlRGVsdGFzKElQcm9ncmVzc01vbml0b3IgbW9uaXRvcikgdGhyb3dzIENv
cmVFeGNlcHRpb24gew0KKwkJaWYgKF9maWxlRGVsdGFzID09IG51bGwpbG9hZEZpbGVEZWx0YXMo
bW9uaXRvcik7DQogCQlyZXR1cm4gX2ZpbGVEZWx0YXM7DQogCX0NCiANCiAJcHJpdmF0ZSBJRmls
ZURlbHRhW10gZ2V0RmlsZURlbHRhcyhJUHJvZ3Jlc3NNb25pdG9yIG1vbml0b3IsIFZhbGlkYXRv
ck1ldGFEYXRhIHZtZCkgdGhyb3dzIENvcmVFeGNlcHRpb24gew0KLQkJU2V0IHJlc3VsdCA9IChT
ZXQpIGdldEZpbGVEZWx0YXMobW9uaXRvcikuZ2V0KHZtZCk7DQotCQlpZiAocmVzdWx0ID09IG51
bGwpIHsNCi0JCQlyZXR1cm4gbmV3IElGaWxlRGVsdGFbMF07DQotCQl9DQorCQlTZXQ8SUZpbGVE
ZWx0YT4gcmVzdWx0ID0gZ2V0RmlsZURlbHRhcyhtb25pdG9yKS5nZXQodm1kKTsNCisJCWlmIChy
ZXN1bHQgPT0gbnVsbClyZXR1cm4gbmV3IElGaWxlRGVsdGFbMF07DQorCQkNCiAJCUlGaWxlRGVs
dGFbXSB0ZW1wID0gbmV3IElGaWxlRGVsdGFbcmVzdWx0LnNpemUoKV07DQogCQlyZXN1bHQudG9B
cnJheSh0ZW1wKTsNCiAJCXJldHVybiB0ZW1wOw0KQEAgLTU0Miw3ICs1MjEsNyBAQA0KIAkJfQ0K
IAl9DQogDQotCXByb3RlY3RlZCB2b2lkIHNldEZpbGVEZWx0YXMoTWFwIGRlbHRhcykgew0KKwlw
cm90ZWN0ZWQgdm9pZCBzZXRGaWxlRGVsdGFzKE1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElG
aWxlRGVsdGE+PiBkZWx0YXMpIHsNCiAJCV9maWxlRGVsdGFzID0gZGVsdGFzOw0KIAl9DQogDQpA
QCAtNTYyLDcgKzU0MSw3IEBADQogCSAqIFJldHVybiB0aGUgdmFsaWRhdG9ycyB3aGljaCBhcmUg
Ym90aCBjb25maWd1cmVkIG9uIHRoaXMgdHlwZSBvZiBwcm9qZWN0LCAoYXMgc3RvcmVkIGluDQog
CSAqIGdldFByb2plY3QoKSksIGFuZCBlbmFibGVkIGJ5IHRoZSB1c2VyIG9uIHRoaXMgcHJvamVj
dC4NCiAJICovDQotCXB1YmxpYyBTZXQgZ2V0RW5hYmxlZFZhbGlkYXRvcnMoKSB7DQorCXB1Ymxp
YyBTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IGdldEVuYWJsZWRWYWxpZGF0b3JzKCkgew0KIAkJcmV0
dXJuIF9lbmFibGVkVmFsaWRhdG9yczsNCiAJfQ0KIA0KQEAgLTU3MCw5ICs1NDksOSBAQA0KIAkg
KiBUaGlzIGlzIGFuIGludGVybmFsIG1ldGhvZCwgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBu
b3RpY2UuIEl0IGlzIHByb3ZpZGVkIG9ubHkgZm9yIHRoZQ0KIAkgKiBhdXRvbWF0ZWQgdmFsaWRh
dGlvbiBmcmFtZXdvcmsgdGVzdHMuDQogCSAqLw0KLQlwdWJsaWMgU2V0IGdldExhdW5jaGVkVmFs
aWRhdG9ycygpIHsNCisJcHVibGljIFNldDxWYWxpZGF0b3JNZXRhRGF0YT4gZ2V0TGF1bmNoZWRW
YWxpZGF0b3JzKCkgew0KIAkJaWYgKF9sYXVuY2hlZFZhbGlkYXRvcnMgPT0gbnVsbCkgew0KLQkJ
CV9sYXVuY2hlZFZhbGlkYXRvcnMgPSBuZXcgSGFzaFNldCgpOw0KKwkJCV9sYXVuY2hlZFZhbGlk
YXRvcnMgPSBuZXcgSGFzaFNldDxWYWxpZGF0b3JNZXRhRGF0YT4oKTsNCiAJCX0NCiAJCXJldHVy
biBfbGF1bmNoZWRWYWxpZGF0b3JzOw0KIAl9DQpAQCAtNjk0LDEwICs2NzMsOSBAQA0KIAkgKi8N
CiAJcHJpdmF0ZSB2b2lkIHJlZkZpbGVWYWxpZGF0ZUZpbGVEZWx0YShXb3JrYmVuY2hSZXBvcnRl
ciByZXBvcnRlciwgUmVmZXJlbmNpYWxGaWxlVmFsaWRhdG9yIHJlZkZpbGVWYWxpZGF0b3IpIHsN
CiAJCUlSZXNvdXJjZURlbHRhW10gcmVzb3VyY2VEZWx0YSA9IF9kZWx0YS5nZXRBZmZlY3RlZENo
aWxkcmVuKElSZXNvdXJjZURlbHRhLkFEREVEIHwgSVJlc291cmNlRGVsdGEuQ0hBTkdFRCB8IElS
ZXNvdXJjZURlbHRhLlJFTU9WRUQpOw0KLQkJTGlzdCBpbnB1dEZpbGVzID0gbmV3IEFycmF5TGlz
dCgpOw0KKwkJTGlzdDxJUmVzb3VyY2U+IGlucHV0RmlsZXMgPSBuZXcgQXJyYXlMaXN0PElSZXNv
dXJjZT4oKTsNCiAJCQ0KLQkJLy8gQSBsaXN0IG9mIElGaWxlJ3MNCi0JCUxpc3QgcmVmZXJlbmNp
bmdGaWxlcyA9IG5ldyBBcnJheUxpc3QoKTsNCisJCUxpc3Q8SUZpbGU+IHJlZmVyZW5jaW5nRmls
ZXMgPSBuZXcgQXJyYXlMaXN0PElGaWxlPigpOw0KIAkJaWYgKHJlc291cmNlRGVsdGEgIT0gbnVs
bCAmJiByZXNvdXJjZURlbHRhLmxlbmd0aCA+IDApIHsNCiAJCQlmb3IgKGludCBpID0gMDsgaSA8
IHJlc291cmNlRGVsdGEubGVuZ3RoOyBpKyspIHsNCiAJCQkJSVJlc291cmNlIHJlc291cmNlID0g
cmVzb3VyY2VEZWx0YVtpXS5nZXRSZXNvdXJjZSgpOw0KQEAgLTcwNiw3ICs2ODQsNyBAQA0KIAkJ
CQl9IGVsc2UgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgSUZpbGUpDQogCQkJCQlpbnB1dEZpbGVz
LmFkZChyZXNvdXJjZSk7DQogCQkJfQ0KLQkJCUxpc3QgckZpbGVzVG9WYWxpZGF0ZSA9IHJlZkZp
bGVWYWxpZGF0b3IuZ2V0UmVmZXJlbmNlZEZpbGUoaW5wdXRGaWxlcyk7DQorCQkJTGlzdDxJRmls
ZT4gckZpbGVzVG9WYWxpZGF0ZSA9IHJlZkZpbGVWYWxpZGF0b3IuZ2V0UmVmZXJlbmNlZEZpbGUo
aW5wdXRGaWxlcyk7DQogCQkJaWYgKHJGaWxlc1RvVmFsaWRhdGUgIT0gbnVsbCAmJiAhckZpbGVz
VG9WYWxpZGF0ZS5pc0VtcHR5KCkpDQogCQkJCXJlZmVyZW5jaW5nRmlsZXMuYWRkQWxsKHJGaWxl
c1RvVmFsaWRhdGUpOw0KIAkJCXRyeSB7DQpAQCAtNzIyLDE0ICs3MDAsMTIgQEANCiAJICogQHBh
cmFtIGRlbHRhDQogCSAqIEByZXR1cm4NCiAJICovDQotCXByaXZhdGUgdm9pZCBnZXRGaWxlUmVz
b3VyY2VEZWx0YUluRm9sZGVyKElSZXNvdXJjZURlbHRhIGRlbHRhLCBMaXN0IGlucHV0RmlsZXMp
IHsNCisJcHJpdmF0ZSB2b2lkIGdldEZpbGVSZXNvdXJjZURlbHRhSW5Gb2xkZXIoSVJlc291cmNl
RGVsdGEgZGVsdGEsIExpc3Q8SVJlc291cmNlPiBpbnB1dEZpbGVzKSB7DQogCQlJUmVzb3VyY2VE
ZWx0YVtdIHJlc291cmNlRGVsdGEgPSBkZWx0YS5nZXRBZmZlY3RlZENoaWxkcmVuKCk7DQogCQlm
b3IgKGludCBpID0gMDsgaSA8IHJlc291cmNlRGVsdGEubGVuZ3RoOyBpKyspIHsNCiAJCQlJUmVz
b3VyY2UgcmVzb3VyY2UgPSByZXNvdXJjZURlbHRhW2ldLmdldFJlc291cmNlKCk7DQotCQkJaWYg
KHJlc291cmNlIGluc3RhbmNlb2YgSUZpbGUpIHsNCi0JCQkJaW5wdXRGaWxlcy5hZGQocmVzb3Vy
Y2UpOw0KLQkJCX0gZWxzZSBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBJRm9sZGVyKQ0KLQkJCQln
ZXRGaWxlUmVzb3VyY2VEZWx0YUluRm9sZGVyKHJlc291cmNlRGVsdGFbaV0sIGlucHV0RmlsZXMp
Ow0KKwkJCWlmIChyZXNvdXJjZSBpbnN0YW5jZW9mIElGaWxlKWlucHV0RmlsZXMuYWRkKHJlc291
cmNlKTsNCisJCQllbHNlIGlmIChyZXNvdXJjZSBpbnN0YW5jZW9mIElGb2xkZXIpZ2V0RmlsZVJl
c291cmNlRGVsdGFJbkZvbGRlcihyZXNvdXJjZURlbHRhW2ldLCBpbnB1dEZpbGVzKTsNCiAJCX0N
CiAJfQ0KIA0KQEAgLTc0NSw3ICs3MjEsNyBAQA0KIAkJCUxpc3QgZmlsdGVycyA9IGRhdGEuZ2V0
TmFtZUZpbHRlcnMoKTsNCiAJCQlMaXN0IGZpbGVzID0gZ2V0QWxsRmlsZXNGb3JGaWx0ZXIoZmls
dGVycyk7DQogCQkJaWYgKCFmaWxlcy5pc0VtcHR5KCkpIHsNCi0JCQkJTGlzdCBmaWxlRm9yVmFs
aWRhdGlvbiA9IHJlZkZpbGVWYWxpZGF0b3IuZ2V0UmVmZXJlbmNlZEZpbGUoZmlsZXMpOw0KKwkJ
CQlMaXN0PElGaWxlPiBmaWxlRm9yVmFsaWRhdGlvbiA9IHJlZkZpbGVWYWxpZGF0b3IuZ2V0UmVm
ZXJlbmNlZEZpbGUoZmlsZXMpOw0KIAkJCQl0cnkgew0KIAkJCQkJdmFsaWRhdGVSZWZlcmVuY2lu
Z0ZpbGVzKHJlcG9ydGVyLCBmaWxlRm9yVmFsaWRhdGlvbik7DQogCQkJCX0gY2F0Y2ggKEV4Y2Vw
dGlvbiBlKSB7DQpAQCAtNzU5LDEwICs3MzUsMTAgQEANCiAJICogQHBhcmFtIGZpbHRlcnMNCiAJ
ICogQHJldHVybg0KIAkgKi8NCi0JcHJpdmF0ZSBMaXN0IGdldEFsbEZpbGVzRm9yRmlsdGVyKExp
c3QgZmlsdGVycykgew0KKwlwcml2YXRlIExpc3Q8SUZpbGU+IGdldEFsbEZpbGVzRm9yRmlsdGVy
KExpc3QgZmlsdGVycykgew0KIAkJaWYgKCFmaWx0ZXJzLmlzRW1wdHkoKSkgew0KIAkJCUxpc3Qg
YWxsUHJvamVjdEZpbGVzID0gUmVmZXJlbmNpYWxGaWxlVmFsaWRhdG9ySGVscGVyLmdldEFsbFBy
b2plY3RGaWxlcyhfcHJvamVjdCk7DQotCQkJTGlzdCBmaWx0ZXJGaWxlcyA9IG5ldyBBcnJheUxp
c3QoKTsNCisJCQlMaXN0PElGaWxlPiBmaWx0ZXJGaWxlcyA9IG5ldyBBcnJheUxpc3Q8SUZpbGU+
KCk7DQogCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBmaWx0ZXJzLnNpemUoKTsgaSsrKSB7DQogCQkJ
CVN0cmluZyBmaWxlTmFtZSA9IChTdHJpbmcpIGZpbHRlcnMuZ2V0KGkpOw0KIAkJCQlpZiAoZmls
ZU5hbWUgPT0gbnVsbCkNCkBAIC03ODEsMTMgKzc1NywxMiBAQA0KIAkJCX0NCiAJCQlyZXR1cm4g
ZmlsdGVyRmlsZXM7DQogCQl9DQotCQlyZXR1cm4gQ29sbGVjdGlvbnMuRU1QVFlfTElTVDsNCisJ
CXJldHVybiBuZXcgTGlua2VkTGlzdDxJRmlsZT4oKTsNCiAJfQ0KIA0KLQlwcml2YXRlIHZvaWQg
dmFsaWRhdGVSZWZlcmVuY2luZ0ZpbGVzKElSZXBvcnRlciByZXBvcnRlciwgTGlzdCByZWZlcmVu
Y2luZ0ZpbGVzKSB0aHJvd3MgRXhjZXB0aW9uIHsNCi0JCUhhc2hTZXQgdmFsaWRhdGVkRmlsZXMg
PSBuZXcgSGFzaFNldCgpOw0KLQkJZm9yIChpbnQgaSA9IDA7IGkgPCByZWZlcmVuY2luZ0ZpbGVz
LnNpemUoKTsgaSsrKSB7DQotCQkJSUZpbGUgcmVmRmlsZSA9IChJRmlsZSkgcmVmZXJlbmNpbmdG
aWxlcy5nZXQoaSk7DQorCXByaXZhdGUgdm9pZCB2YWxpZGF0ZVJlZmVyZW5jaW5nRmlsZXMoSVJl
cG9ydGVyIHJlcG9ydGVyLCBMaXN0PElGaWxlPiByZWZlcmVuY2luZ0ZpbGVzKSB0aHJvd3MgRXhj
ZXB0aW9uIHsNCisJCVNldDxJRmlsZT4gdmFsaWRhdGVkRmlsZXMgPSBuZXcgSGFzaFNldDxJRmls
ZT4oKTsNCisJCWZvciAoSUZpbGUgcmVmRmlsZSA6IHJlZmVyZW5jaW5nRmlsZXMpIHsNCiAJCQlp
ZiAoIXZhbGlkYXRlZEZpbGVzLmNvbnRhaW5zKHJlZkZpbGUpKSB7DQogCQkJCUlSZXNvdXJjZSBy
ZXNvdXJjZSA9IHJlZkZpbGUuZ2V0UGFyZW50KCk7DQogCQkJCUlQcm9qZWN0IHByb2plY3QgPSBu
dWxsOw0KQEAgLTg0MSw4ICs4MTYsOCBAQA0KIAkJZmluYWwgTG9nZ2VyIGxvZ2dlciA9IFZhbGlk
YXRpb25QbHVnaW4uZ2V0UGx1Z2luKCkuZ2V0TXNnTG9nZ2VyKCk7DQogCQlJRmlsZURlbHRhW10g
ZGVsdGEgPSBudWxsOw0KIAkJDQotCQlIYXNoU2V0IGpvYlZhbGlkYXRvcnMgPSBuZXcgSGFzaFNl
dCgpOw0KLQkJSGFzaFNldCB2YWxpZGF0b3JzID0gbmV3IEhhc2hTZXQoKTsNCisJCVNldDxWYWxp
ZGF0b3JNZXRhRGF0YT4gam9iVmFsaWRhdG9ycyA9IG5ldyBIYXNoU2V0PFZhbGlkYXRvck1ldGFE
YXRhPigpOw0KKwkJU2V0PFZhbGlkYXRvck1ldGFEYXRhPiB2YWxpZGF0b3JzID0gbmV3IEhhc2hT
ZXQ8VmFsaWRhdG9yTWV0YURhdGE+KCk7DQogCQkNCiAJCQ0KIAkJaXRlcmF0b3IgPSBnZXRFbmFi
bGVkVmFsaWRhdG9ycygpLml0ZXJhdG9yKCk7DQpAQCAtODY2LDkgKzg0MSw3IEBADQogCQkJCQkJ
CWUucHJpbnRTdGFja1RyYWNlKCk7DQogCQkJCQkJfQ0KIAkJCQkJCWJvb2xlYW4gd2lsbFJ1biA9
IChpc0ZvcmNlKCkgfHwgaXNWYWxpZGF0aW9uTmVjZXNzYXJ5KHZtZCwgZGVsdGEpKTsNCi0JCQkJ
CQlpZiggd2lsbFJ1biApew0KLQkJCQkJCQlqb2JWYWxpZGF0b3JzLmFkZCggdm1kICk7DQotCQkJ
CQkJfQ0KKwkJCQkJCWlmKCB3aWxsUnVuIClqb2JWYWxpZGF0b3JzLmFkZCggdm1kICk7DQogCQkJ
CQl9ZWxzZSBpZiAodmFsSW5zdGFuY2UgIT0gbnVsbCl7DQogCQkJCQkJdmFsaWRhdG9ycy5hZGQo
IHZtZCApOw0KIAkJCQl9DQpAQCAtOTE1LDggKzg4OCw2IEBADQogCQkJCQkJYnVmZmVyLmFwcGVu
ZChfaXNBdXRvQnVpbGQpOw0KIAkJCQkJCWJ1ZmZlci5hcHBlbmQoIiAgIik7IC8vJE5PTi1OTFMt
MSQNCiAJCQkJCQlidWZmZXIuYXBwZW5kKCJpc0F1dG9WYWxpZGF0ZT8gIik7IC8vJE5PTi1OTFMt
MSQNCi0JCQkJCQlib29sZWFuIGF1dG9CdWlsZCA9IChfaXNBdXRvQnVpbGQgPT0gbnVsbCkgPyBW
YWxpZGF0b3JNYW5hZ2VyLmdldE1hbmFnZXIoKS5pc0dsb2JhbEF1dG9CdWlsZEVuYWJsZWQoKSA6
IF9pc0F1dG9CdWlsZC5ib29sZWFuVmFsdWUoKTsNCi0JCQkJCQlidWZmZXIuYXBwZW5kKFZhbGlk
YXRvck1hbmFnZXIuZ2V0TWFuYWdlcigpLmlzQXV0b1ZhbGlkYXRlKGdldFByb2plY3QoKSwgYXV0
b0J1aWxkKSk7DQogCQkJCQkJYnVmZmVyLmFwcGVuZCgiICAiKTsgLy8kTk9OLU5MUy0xJA0KIAkJ
CQkJCWJ1ZmZlci5hcHBlbmQoImlzSW5jcmVtZW50YWw/ICIpOyAvLyROT04tTkxTLTEkDQogCQkJ
CQkJYnVmZmVyLmFwcGVuZCh2bWQuaXNJbmNyZW1lbnRhbCgpKTsNCkBAIC0xMDEwLDkgKzk4MSw4
IEBADQogDQogCXByaXZhdGUgdm9pZCBpbml0VmFsaWRhdGVDb250ZXh0KElGaWxlRGVsdGFbXSBk
ZWx0YSkgew0KIAkJIGlmIChjb250ZXh0IGluc3RhbmNlb2YgV29ya2JlbmNoQ29udGV4dCkgew0K
LQkJCSAoKFdvcmtiZW5jaENvbnRleHQpY29udGV4dCkuc2V0VmFsaWRhdGlvbkZpbGVVUklzKG5l
dyBBcnJheUxpc3QoKSk7DQotCQkJIGZvcihpbnQgaSA9IDA7IGkgPCBkZWx0YS5sZW5ndGg7IGkr
Kykgew0KLQkJCQkgSUZpbGVEZWx0YSBmaWxlID0gZGVsdGFbaV07DQorCQkJICgoV29ya2JlbmNo
Q29udGV4dCljb250ZXh0KS5zZXRWYWxpZGF0aW9uRmlsZVVSSXMobmV3IEFycmF5TGlzdDxTdHJp
bmc+KCkpOw0KKwkJCSBmb3IoSUZpbGVEZWx0YSBmaWxlIDogZGVsdGEpIHsNCiAJCQkJIGlmKGZp
bGUuZ2V0RGVsdGFUeXBlKCkgIT0gSUZpbGVEZWx0YS5ERUxFVEVEICkgew0KIAkJCQkJICgoV29y
a2JlbmNoQ29udGV4dCljb250ZXh0KS5nZXRWYWxpZGF0aW9uRmlsZVVSSXMoKS5hZGQoZmlsZS5n
ZXRGaWxlTmFtZSgpKTsNCiAJCQkJIH0NCkBAIC0xMjc0LDggKzEyNDQsNyBAQA0KIAkJCVN0cmlu
ZyBtZXNzYWdlID0gUmVzb3VyY2VIYW5kbGVyLmdldEV4dGVybmFsaXplZE1lc3NhZ2UoUmVzb3Vy
Y2VDb25zdGFudHMuVkJGX1NUQVRVU19TVEFSVElOR19WQUxJREFUSU9OLCBuZXcgU3RyaW5nW117
Z2V0UHJvamVjdCgpLmdldE5hbWUoKSwgdm1kLmdldFZhbGlkYXRvckRpc3BsYXlOYW1lKCl9KTsN
CiAJCQlyZXBvcnRlci5kaXNwbGF5U3VidGFzayhtZXNzYWdlKTsNCiAJCQlpZiAobG9nZ2VyLmlz
TG9nZ2luZ0xldmVsKExldmVsLkZJTkVTVCkpIHsNCi0JCQkJLy8gVGhpcyBpbnRlcm5hbCAibGF1
bmNoZWQgdmFsaWRhdG9ycyIgdmFsdWUgaXMgdXNlZCBvbmx5IGluDQotCQkJCS8vIHRlc3RzLg0K
KwkJCQkvLyBUaGlzIGludGVybmFsICJsYXVuY2hlZCB2YWxpZGF0b3JzIiB2YWx1ZSBpcyB1c2Vk
IG9ubHkgaW4gdGVzdHMuDQogCQkJCWdldExhdW5jaGVkVmFsaWRhdG9ycygpLmFkZCh2bWQpOw0K
IAkJCX0NCiAJCQkvL2luaXRWYWxpZGF0ZUNvbnRleHQoZGVsdGEpOw0KQEAgLTEzMDQsOCArMTI3
Myw2IEBADQogCQkJfQ0KIAkJCW1lc3NhZ2UgPSBSZXNvdXJjZUhhbmRsZXIuZ2V0RXh0ZXJuYWxp
emVkTWVzc2FnZShSZXNvdXJjZUNvbnN0YW50cy5WQkZfU1RBVFVTX0VORElOR19WQUxJREFUSU9O
LCBuZXcgU3RyaW5nW117Z2V0UHJvamVjdCgpLmdldE5hbWUoKSwgdm1kLmdldFZhbGlkYXRvckRp
c3BsYXlOYW1lKCl9KTsNCiAJCQlyZXBvcnRlci5kaXNwbGF5U3VidGFzayhtZXNzYWdlKTsNCi0J
CX0gY2F0Y2ggKE1lc3NhZ2VMaW1pdEV4Y2VwdGlvbiBleGMpIHsNCi0JCQl0aHJvdyBleGM7DQog
CQl9IGNhdGNoIChPcGVyYXRpb25DYW5jZWxlZEV4Y2VwdGlvbiBleGMpIHsNCiAJCQl0aHJvdyBl
eGM7DQogCQl9IGNhdGNoIChWYWxpZGF0aW9uRXhjZXB0aW9uIGV4Yykgew0KQEAgLTEzMTMsNDgg
KzEyODAsMTYgQEANCiAJCQkvLyBhY2NpZGVudGFsbHkgd3JhcHBlZCBhIE1lc3NhZ2VMaW1pdEV4
Y2VwdGlvbiBpbnN0ZWFkIG9mDQogCQkJLy8gcHJvcGFnYXRpbmcgaXQuDQogCQkJaWYgKGV4Yy5n
ZXRBc3NvY2lhdGVkRXhjZXB0aW9uKCkgIT0gbnVsbCkgew0KLQkJCQlpZiAoZXhjLmdldEFzc29j
aWF0ZWRFeGNlcHRpb24oKSBpbnN0YW5jZW9mIE1lc3NhZ2VMaW1pdEV4Y2VwdGlvbikgew0KLQkJ
CQkJTWVzc2FnZUxpbWl0RXhjZXB0aW9uIG1zc2dFeGMgPSAoTWVzc2FnZUxpbWl0RXhjZXB0aW9u
KSBleGMuZ2V0QXNzb2NpYXRlZEV4Y2VwdGlvbigpOw0KLQkJCQkJdGhyb3cgbXNzZ0V4YzsNCi0J
CQkJfSBlbHNlIGlmIChleGMuZ2V0QXNzb2NpYXRlZEV4Y2VwdGlvbigpIGluc3RhbmNlb2YgVmFs
aWRhdGlvbkV4Y2VwdGlvbikgew0KKwkJCQlpZiAoZXhjLmdldEFzc29jaWF0ZWRFeGNlcHRpb24o
KSBpbnN0YW5jZW9mIFZhbGlkYXRpb25FeGNlcHRpb24pIHsNCiAJCQkJCVZhbGlkYXRpb25FeGNl
cHRpb24gdmV4YyA9IChWYWxpZGF0aW9uRXhjZXB0aW9uKSBleGMuZ2V0QXNzb2NpYXRlZEV4Y2Vw
dGlvbigpOw0KIAkJCQkJdmV4Yy5zZXRDbGFzc0xvYWRlcih2YWxpZGF0b3IuZ2V0Q2xhc3MoKS5n
ZXRDbGFzc0xvYWRlcigpKTsgLy8gZmlyc3QsDQotCQkJCQkvLyBzZXQNCi0JCQkJCS8vIHRoZQ0K
LQkJCQkJLy8gY2xhc3MNCi0JCQkJCS8vIGxvYWRlciwNCi0JCQkJCS8vIHNvDQotCQkJCQkvLyB0
aGF0DQotCQkJCQkvLyB0aGUNCi0JCQkJCS8vIGV4Y2VwdGlvbidzDQotCQkJCQkvLyBnZXRNZXNz
YWdlKCkNCi0JCQkJCS8vIG1ldGhvZA0KLQkJCQkJLy8gY2FuDQotCQkJCQkvLyByZXRyaWV2ZQ0K
LQkJCQkJLy8gdGhlDQotCQkJCQkvLyByZXNvdXJjZQ0KLQkJCQkJLy8gYnVuZGxlDQorCQkJCQkv
LyBzZXQgdGhlIGNsYXNzIGxvYWRlciwgc28gdGhhdCB0aGUgZXhjZXB0aW9uJ3MgZ2V0TWVzc2Fn
ZSgpIG1ldGhvZA0KKwkJCQkJLy8gY2FuIHJldHJpZXZlIHRoZSByZXNvdXJjZSBidW5kbGUNCiAJ
CQkJfQ0KIAkJCX0NCiAJCQkvLyBJZiB0aGVyZSBpcyBhIHByb2JsZW0gd2l0aCB0aGlzIHBhcnRp
Y3VsYXIgdmFsaWRhdG9yLCBsb2cgdGhlDQotCQkJLy8gZXJyb3IgYW5kIGNvbnRpbnVlDQotCQkJ
Ly8gd2l0aCB0aGUgbmV4dCB2YWxpZGF0b3IuDQorCQkJLy8gZXJyb3IgYW5kIGNvbnRpbnVlIHdp
dGggdGhlIG5leHQgdmFsaWRhdG9yLg0KIAkJCWV4Yy5zZXRDbGFzc0xvYWRlcih2YWxpZGF0b3Iu
Z2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpKTsgLy8gZmlyc3QsDQotCQkJLy8gc2V0DQotCQkJ
Ly8gdGhlDQotCQkJLy8gY2xhc3MNCi0JCQkvLyBsb2FkZXIsDQotCQkJLy8gc28NCi0JCQkvLyB0
aGF0DQotCQkJLy8gdGhlDQotCQkJLy8gZXhjZXB0aW9uJ3MNCi0JCQkvLyBnZXRNZXNzYWdlKCkN
Ci0JCQkvLyBtZXRob2QNCi0JCQkvLyBjYW4NCi0JCQkvLyByZXRyaWV2ZQ0KLQkJCS8vIHRoZQ0K
LQkJCS8vIHJlc291cmNlDQotCQkJLy8gYnVuZGxlDQogCQkJaWYgKGxvZ2dlci5pc0xvZ2dpbmdM
ZXZlbChMZXZlbC5TRVZFUkUpKSB7DQogCQkJCUxvZ0VudHJ5IGVudHJ5ID0gVmFsaWRhdGlvblBs
dWdpbi5nZXRMb2dFbnRyeSgpOw0KIAkJCQllbnRyeS5zZXRTb3VyY2VJRCgiVmFsaWRhdGlvbk9w
ZXJhdGlvbi52YWxpZGF0ZShXb3JrYmVuY2hNb25pdG9yKSIpOyAvLyROT04tTkxTLTEkDQpAQCAt
MTM3MSwxNCArMTMwNiwxMSBAQA0KIAkJCQlyZXBvcnRlci5hZGRNZXNzYWdlKHZhbGlkYXRvciwg
ZXhjLmdldEFzc29jaWF0ZWRNZXNzYWdlKCkpOw0KIAkJCX0NCiAJCX0gY2F0Y2ggKEV4Y2VwdGlv
biBleGMpIHsNCi0JCQkvLyBJZiB0aGVyZSBpcyBhIHByb2JsZW0gd2l0aCB0aGlzIHBhcnRpY3Vs
YXIgdmFsaWRhdG9yLCBsb2cgdGhlDQotCQkJLy8gZXJyb3IgYW5kIGNvbnRpbnVlDQorCQkJLy8g
SWYgdGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggdGhpcyBwYXJ0aWN1bGFyIHZhbGlkYXRvciwgbG9n
IHRoZSBlcnJvciBhbmQgY29udGludWUNCiAJCQkvLyB3aXRoIHRoZSBuZXh0IHZhbGlkYXRvci4N
CiAJCQkvLyBJZiBhIHJ1bnRpbWUgZXhjZXB0aW9uIGhhcyBvY2N1cmVkLCBlLmcuIE51bGxQb2lu
dGVyIG9yDQotCQkJLy8gQ2xhc3NDYXN0LCBkaXNwbGF5IGl0IHdpdGggdGhlICJBIHJ1bnRpbWUg
ZXhjZXB0aW9uIGhhcyBvY2N1cnJlZA0KLQkJCS8vICIgbWVzc3NhZ2UuDQotCQkJLy8gVGhpcyB3
aWxsIHByb3ZpZGUgbW9yZSBpbmZvcm1hdGlvbiB0byB0aGUgdXNlciB3aGVuIGhlL3NoZSBjYWxs
cw0KLQkJCS8vIElCTSBTZXJ2aWNlLg0KKwkJCS8vIENsYXNzQ2FzdCwgZGlzcGxheSBpdCB3aXRo
IHRoZSAiQSBydW50aW1lIGV4Y2VwdGlvbiBoYXMgb2NjdXJyZWQiIG1lc3NzYWdlLiANCisJCQkv
LyBUaGlzIHdpbGwgcHJvdmlkZSBtb3JlIGluZm9ybWF0aW9uIHRvIHRoZSB1c2VyIHdoZW4gaGUv
c2hlIGNhbGxzIFNlcnZpY2UuDQogCQkJaWYgKGxvZ2dlci5pc0xvZ2dpbmdMZXZlbChMZXZlbC5T
RVZFUkUpKSB7DQogCQkJCUxvZ0VudHJ5IGVudHJ5ID0gVmFsaWRhdGlvblBsdWdpbi5nZXRMb2dF
bnRyeSgpOw0KIAkJCQllbnRyeS5zZXRTb3VyY2VJRCgiVmFsaWRhdGlvbk9wZXJhdGlvbi52YWxp
ZGF0ZShXb3JrYmVuY2hNb25pdG9yKSIpOyAvLyROT04tTkxTLTEkDQpAQCAtMTQwNCw4ICsxMzM2
LDYgQEANCiAJCX0gZmluYWxseSB7DQogCQkJdHJ5IHsNCiAJCQkJdmFsaWRhdG9yLmNsZWFudXAo
cmVwb3J0ZXIpOw0KLQkJCX0gY2F0Y2ggKE1lc3NhZ2VMaW1pdEV4Y2VwdGlvbiBlKSB7DQotCQkJ
CXRocm93IGU7DQogCQkJfSBjYXRjaCAoT3BlcmF0aW9uQ2FuY2VsZWRFeGNlcHRpb24gZSkgew0K
IAkJCQl0aHJvdyBlOw0KIAkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiBleGMpIHsNCkBAIC0xNDQxLDgg
KzEzNzEsNiBAQA0KIAkJCX0NCiAJCQl0cnkgew0KIAkJCQloZWxwZXIuY2xlYW51cChyZXBvcnRl
cik7DQotCQkJfSBjYXRjaCAoTWVzc2FnZUxpbWl0RXhjZXB0aW9uIGUpIHsNCi0JCQkJdGhyb3cg
ZTsNCiAJCQl9IGNhdGNoIChPcGVyYXRpb25DYW5jZWxlZEV4Y2VwdGlvbiBlKSB7DQogCQkJCXRo
cm93IGU7DQogCQkJfSBjYXRjaCAoRXhjZXB0aW9uIGV4Yykgew0KQEAgLTE1NjIsNyArMTQ5MCw3
IEBADQogCQl0aGlzLmNvbnRleHQgPSBjb250ZXh0Ow0KIAl9DQogCQ0KLQl2b2lkIGxhdW5jaEpv
YnMoSGFzaFNldCB2YWxpZGF0b3JzLCBmaW5hbCBXb3JrYmVuY2hSZXBvcnRlciByZXBvcnRlcikg
dGhyb3dzIE9wZXJhdGlvbkNhbmNlbGVkRXhjZXB0aW9uew0KKwl2b2lkIGxhdW5jaEpvYnMoU2V0
PFZhbGlkYXRvck1ldGFEYXRhPiB2YWxpZGF0b3JzLCBmaW5hbCBXb3JrYmVuY2hSZXBvcnRlciBy
ZXBvcnRlcikgdGhyb3dzIE9wZXJhdGlvbkNhbmNlbGVkRXhjZXB0aW9uew0KIAkJDQogCQlmaW5h
bCBMb2dnZXIgbG9nZ2VyID0gVmFsaWRhdGlvblBsdWdpbi5nZXRQbHVnaW4oKS5nZXRNc2dMb2dn
ZXIoKTsNCiAJCUl0ZXJhdG9yIGl0ZXJhdG9yID0gdmFsaWRhdG9ycy5pdGVyYXRvcigpOw0KQEAg
LTE2ODEsOSArMTYwOSw4IEBADQogCQ0KIAlwcml2YXRlIHZvaWQgaW5pdFZhbGlkYXRlQ29udGV4
dChJRmlsZURlbHRhW10gZGVsdGEsIElXb3JrYmVuY2hDb250ZXh0IGNvbnRleHQgKSB7DQogCQkg
aWYgKGNvbnRleHQgaW5zdGFuY2VvZiBXb3JrYmVuY2hDb250ZXh0KSB7DQotCQkJICgoV29ya2Jl
bmNoQ29udGV4dCljb250ZXh0KS5zZXRWYWxpZGF0aW9uRmlsZVVSSXMobmV3IEFycmF5TGlzdCgp
KTsNCi0JCQkgZm9yKGludCBpID0gMDsgaSA8IGRlbHRhLmxlbmd0aDsgaSsrKSB7DQotCQkJCSBJ
RmlsZURlbHRhIGZpbGUgPSBkZWx0YVtpXTsNCisJCQkgKChXb3JrYmVuY2hDb250ZXh0KWNvbnRl
eHQpLnNldFZhbGlkYXRpb25GaWxlVVJJcyhuZXcgQXJyYXlMaXN0PFN0cmluZz4oKSk7DQorCQkJ
IGZvcihJRmlsZURlbHRhIGZpbGUgOiBkZWx0YSkgew0KIAkJCQkgaWYoZmlsZS5nZXREZWx0YVR5
cGUoKSAhPSBJRmlsZURlbHRhLkRFTEVURUQgKSB7DQogCQkJCQkgKChXb3JrYmVuY2hDb250ZXh0
KWNvbnRleHQpLmdldFZhbGlkYXRpb25GaWxlVVJJcygpLmFkZChmaWxlLmdldEZpbGVOYW1lKCkp
Ow0KIAkJCQkgfQ0KQEAgLTE3MjcsNyArMTY1NCw3IEBADQogCQkJCQkJCVF1YWxpZmllZE5hbWUg
dmFsaWRhdG9yS2V5ID0gbmV3IFF1YWxpZmllZE5hbWUobnVsbCwgIlZhbGlkYXRvciIpOyAvLyRO
T04tTkxTLTEkDQogCQkJCQkJCUlWYWxpZGF0b3JKb2IgdmFsaWRhdG9yID0gKElWYWxpZGF0b3JK
b2Ipam9iLmdldFByb3BlcnR5KCB2YWxpZGF0b3JLZXkgKTsNCiAJCQkJCQkJVmFsaWRhdG9yTWFu
YWdlciBtZ3IgPSBWYWxpZGF0b3JNYW5hZ2VyLmdldE1hbmFnZXIoKTsNCi0JCQkJCQkJZmluYWwg
QXJyYXlMaXN0IGxpc3QgPSBtZ3IuZ2V0TWVzc2FnZXModmFsaWRhdG9yKTsJCQkJCQkJDQorCQkJ
CQkJCWZpbmFsIExpc3QgbGlzdCA9IG1nci5nZXRNZXNzYWdlcyh2YWxpZGF0b3IpOwkJCQkJCQkN
CiAJCQkJCQkJDQogCQkJCQkJCUlXb3Jrc3BhY2VSdW5uYWJsZSBydW5uYWJsZSA9IG5ldyBJV29y
a3NwYWNlUnVubmFibGUoKSB7DQogCQkJCQkJCSAgICBwdWJsaWMgdm9pZCBydW4oSVByb2dyZXNz
TW9uaXRvciBtb25pdG9yKSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiB7DQpJbmRleDogdmFsaWRhdGUv
b3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9WYWxpZGF0b3JN
YW5hZ2VyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21t
b24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9vcmcvZWNsaXBz
ZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1ZhbGlkYXRvck1hbmFnZXIuamF2
YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMjINCmRpZmYgLXUgLXIxLjIyIFZhbGlkYXRvck1h
bmFnZXIuamF2YQ0KLS0tIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVy
bmFsL29wZXJhdGlvbnMvVmFsaWRhdG9yTWFuYWdlci5qYXZhCTE5IERlYyAyMDA3IDE1OjU0OjU1
IC0wMDAwCTEuMjINCisrKyB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRl
cm5hbC9vcGVyYXRpb25zL1ZhbGlkYXRvck1hbmFnZXIuamF2YQkxNSBKYW4gMjAwOCAxNzowMjox
OCAtMDAwMA0KQEAgLTU3LDE5ICs1NywyMSBAQA0KIAkvLyBNT0Ygb2JqZWN0cy4NCiAJcHJpdmF0
ZSBzdGF0aWMgZmluYWwgQ2xhc3MgUkVTT1VSQ0VVVElMX0RFRkFVTFRDTEFTUyA9IG9yZy5lY2xp
cHNlLndzdC52YWxpZGF0aW9uLmludGVybmFsLm9wZXJhdGlvbnMuRGVmYXVsdFJlc291cmNlVXRp
bC5jbGFzczsNCiAJcHJpdmF0ZSBzdGF0aWMgQ2xhc3MgX3Jlc291cmNlVXRpbENsYXNzID0gUkVT
T1VSQ0VVVElMX0RFRkFVTFRDTEFTUzsNCi0JcHJpdmF0ZSBzdGF0aWMgZmluYWwgU2V0IEVNUFRZ
X1NFVCA9IENvbGxlY3Rpb25zLkVNUFRZX1NFVDsgLy8gYW4gZW1wdHkgc2V0LCBwcm92aWRlZCBm
b3INCi0JLy8gY29udmVuaWVuY2UsIHNvIHRoYXQgd2Ugb25seQ0KLQkvLyBjb25zdHJ1Y3Qgb25l
IGVtcHR5IHNldCBvbmNlLg0KLQlwcml2YXRlIFNldCBfc3VzcGVuZGVkUHJvamVjdHM7DQotCXBy
aXZhdGUgYm9vbGVhbiBfc3VzcGVuZEFsbFZhbGlkYXRpb24gPSBmYWxzZTsNCi0JcHJpdmF0ZSBz
dGF0aWMgQ2xhc3MgX21lc3NhZ2VMaW1pdE93bmVyOw0KLQlwcml2YXRlIFN0cmluZ1tdIF9pbnRl
cm5hbE93bmVyczsNCi0JcHJpdmF0ZSBNYXAgdmFsaWRhdG9yTXNncyA9IENvbGxlY3Rpb25zLnN5
bmNocm9uaXplZE1hcCggbmV3IEhhc2hNYXAoKSApOwkNCi0JcHJpdmF0ZSBTZXQgcHJvYmxlbVZh
bGlkYXRvcnMgPSBuZXcgSGFzaFNldCgpOwkNCisJCQ0KKwkvLyBhbiBlbXB0eSBzZXQsIHByb3Zp
ZGVkIGZvciBjb252ZW5pZW5jZSwgc28gdGhhdCB3ZSBvbmx5IGNvbnN0cnVjdCBvbmUgZW1wdHkg
c2V0IG9uY2UuDQorCXByaXZhdGUgc3RhdGljIGZpbmFsIFNldDxWYWxpZGF0b3JNZXRhRGF0YT4g
RU1QVFlfU0VUID0gbmV3IEhhc2hTZXQ8VmFsaWRhdG9yTWV0YURhdGE+KCk7DQorCQ0KKwlwcml2
YXRlIFNldDxJUHJvamVjdD4gCV9zdXNwZW5kZWRQcm9qZWN0czsNCisJcHJpdmF0ZSBib29sZWFu
IAkJX3N1c3BlbmRBbGxWYWxpZGF0aW9uID0gZmFsc2U7DQorCXByaXZhdGUgc3RhdGljIENsYXNz
IAlfbWVzc2FnZUxpbWl0T3duZXI7DQorCXByaXZhdGUgU3RyaW5nW10gCQlfaW50ZXJuYWxPd25l
cnM7DQorCXByaXZhdGUgTWFwPElWYWxpZGF0b3JKb2IsIExpc3Q8TWVzc2FnZUluZm8+PiBfdmFs
aWRhdG9yTXNncyA9IA0KKwkJQ29sbGVjdGlvbnMuc3luY2hyb25pemVkTWFwKCBuZXcgSGFzaE1h
cDxJVmFsaWRhdG9ySm9iLCBMaXN0PE1lc3NhZ2VJbmZvPj4oKSApOwkNCisJcHJpdmF0ZSBTZXQ8
VmFsaWRhdG9yTWV0YURhdGE+IF9wcm9ibGVtVmFsaWRhdG9ycyA9IG5ldyBIYXNoU2V0PFZhbGlk
YXRvck1ldGFEYXRhPigpOwkNCiAJDQogCXByaXZhdGUgVmFsaWRhdG9yTWFuYWdlcigpIHsNCiAJ
CXN1cGVyKCk7DQotCQlfc3VzcGVuZGVkUHJvamVjdHMgPSBuZXcgSGFzaFNldCgpOw0KKwkJX3N1
c3BlbmRlZFByb2plY3RzID0gbmV3IEhhc2hTZXQ8SVByb2plY3Q+KCk7DQogCQlfaW50ZXJuYWxP
d25lcnMgPSBuZXcgU3RyaW5nWzBdOw0KIA0KIAkJYWRkSW50ZXJuYWxPd25lcihnZXRNZXNzYWdl
TGltaXRPd25lcigpKTsNCkBAIC00NzUsMTIgKzQ3NywxMCBAQA0KIAkvKioNCiAJICogQGRlcHJl
Y2F0ZWQgRm9yIHVzZSBieSB0aGUgdmFsaWRhdGlvbiBmcmFtZXdvcmsgb25seS4NCiAJICovDQot
CXB1YmxpYyBTZXQgZ2V0SW5jcmVtZW50YWxWYWxpZGF0b3JzKENvbGxlY3Rpb24gdm1kcykgew0K
LQkJaWYgKHZtZHMgPT0gbnVsbCkgew0KLQkJCXJldHVybiBDb2xsZWN0aW9ucy5FTVBUWV9TRVQ7
DQotCQl9DQorCXB1YmxpYyBTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IGdldEluY3JlbWVudGFsVmFs
aWRhdG9ycyhDb2xsZWN0aW9uIHZtZHMpIHsNCisJCWlmICh2bWRzID09IG51bGwpcmV0dXJuIG5l
dyBIYXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIA0KLQkJU2V0IHJlc3VsdCA9IG5ldyBI
YXNoU2V0KCk7DQorCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHJlc3VsdCA9IG5ldyBIYXNoU2V0
PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIAkJSXRlcmF0b3IgaXRlcmF0b3IgPSB2bWRzLml0ZXJh
dG9yKCk7DQogCQl3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7DQogCQkJVmFsaWRhdG9yTWV0
YURhdGEgdm1kID0gKFZhbGlkYXRvck1ldGFEYXRhKSBpdGVyYXRvci5uZXh0KCk7DQpAQCAtNjI1
LDIxICs2MjUsMTggQEANCiAJICogR2l2ZW4gYSBjaGVja2VkIGxpc3Qgb2YgZW5hYmxlZCB2YWxp
ZGF0b3JzLCByZXR1cm4gYSBzZXQgb2YgdGhlIG9uZXMgd2hpY2ggYXJlIGNvbmZpZ3VyZWQgb24N
CiAJICogdGhlIHByb2plY3QgYW5kLCBpZiBnZXRJbmNyZW1lbnRhbCBpcyB0cnVlLCB3aGljaCBh
bHNvIHJ1biBpbmNyZW1lbnRhbGx5Lg0KIAkgKi8NCi0JcHVibGljIFNldCBnZXRQcm9qZWN0Q29u
ZmlndXJlZFZhbGlkYXRvcnMoSVByb2plY3QgcHJvamVjdCwgT2JqZWN0W10gZW5hYmxlZFZhbCwg
Ym9vbGVhbiBnZXRJbmNyZW1lbnRhbCkgew0KKwlwdWJsaWMgU2V0PFZhbGlkYXRvck1ldGFEYXRh
PiBnZXRQcm9qZWN0Q29uZmlndXJlZFZhbGlkYXRvcnMoSVByb2plY3QgcHJvamVjdCwgT2JqZWN0
W10gZW5hYmxlZFZhbCwgDQorCQkJYm9vbGVhbiBnZXRJbmNyZW1lbnRhbCkgew0KIAkJaWYgKChw
cm9qZWN0ID09IG51bGwpIHx8IChlbmFibGVkVmFsID09IG51bGwpIHx8IChlbmFibGVkVmFsLmxl
bmd0aCA9PSAwKSkgew0KLQkJCXJldHVybiBDb2xsZWN0aW9ucy5FTVBUWV9TRVQ7DQorCQkJcmV0
dXJuIG5ldyBIYXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIAkJfQ0KIA0KLQkJU2V0IHZh
bCA9IG5ldyBIYXNoU2V0KCk7DQorCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHZhbCA9IG5ldyBI
YXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIAkJZm9yIChpbnQgaSA9IDA7IGkgPCBlbmFi
bGVkVmFsLmxlbmd0aDsgaSsrKSB7DQogCQkJVmFsaWRhdG9yTWV0YURhdGEgdm1kID0gKFZhbGlk
YXRvck1ldGFEYXRhKSBlbmFibGVkVmFsW2ldOw0KLQkJCWlmICghdm1kLmlzQ29uZmlndXJlZE9u
UHJvamVjdChwcm9qZWN0KSkgew0KLQkJCQljb250aW51ZTsNCi0JCQl9DQorCQkJaWYgKCF2bWQu
aXNDb25maWd1cmVkT25Qcm9qZWN0KHByb2plY3QpKWNvbnRpbnVlOw0KIA0KLQkJCWlmICghZ2V0
SW5jcmVtZW50YWwgfHwgdm1kLmlzSW5jcmVtZW50YWwoKSkgew0KLQkJCQl2YWwuYWRkKHZtZCk7
DQotCQkJfQ0KKwkJCWlmICghZ2V0SW5jcmVtZW50YWwgfHwgdm1kLmlzSW5jcmVtZW50YWwoKSl2
YWwuYWRkKHZtZCk7DQogCQl9DQogCQlyZXR1cm4gdmFsOw0KIAl9DQpAQCAtNjkwLDIyICs2ODcs
MjEgQEANCiAJfQ0KIA0KIAlwcml2YXRlIFZhbGlkYXRvck1ldGFEYXRhW10gZ2V0U3RhdGVPZlBy
b2plY3RMZXZlbFZhbGlkYXRvcnNGcm9tR2xvYmFsKFByb2plY3RDb25maWd1cmF0aW9uIHByanAp
IHRocm93cyBJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uIHsNCi0JCUxpc3QgZW5hYmxlZEdsb2Jh
bFZhbGlkYXRvcnNGb3JQcm9qZWN0ID0gbmV3IEFycmF5TGlzdCgpOw0KKwkJTGlzdDxWYWxpZGF0
b3JNZXRhRGF0YT4gZW5hYmxlZEdsb2JhbFZhbGlkYXRvcnNGb3JQcm9qZWN0ID0gbmV3IEFycmF5
TGlzdDxWYWxpZGF0b3JNZXRhRGF0YT4oKTsNCiAJCUdsb2JhbENvbmZpZ3VyYXRpb24gZ2YgPSBD
b25maWd1cmF0aW9uTWFuYWdlci5nZXRNYW5hZ2VyKCkuZ2V0R2xvYmFsQ29uZmlndXJhdGlvbigp
Ow0KIAkJTGlzdCBhbGxQcm9qZWN0VmFsaWRhdG9yID0gZ2V0QWxsVmFsaWRhdG9yVW5pcXVlTmFt
ZXMocHJqcC5nZXRWYWxpZGF0b3JzKCkpOw0KLQkJVmFsaWRhdG9yTWV0YURhdGFbXSB2bWQgPSBn
Zi5nZXRCdWlsZEVuYWJsZWRWYWxpZGF0b3JzKCk7DQotCQlmb3IoaW50IGkgPSAwOyBpIDwgdm1k
Lmxlbmd0aDsgaSsrKSB7DQotCQkJaWYoYWxsUHJvamVjdFZhbGlkYXRvci5jb250YWlucyh2bWRb
aV0uZ2V0VmFsaWRhdG9yVW5pcXVlTmFtZSgpKSkgew0KLQkJCQllbmFibGVkR2xvYmFsVmFsaWRh
dG9yc0ZvclByb2plY3QuYWRkKHZtZFtpXSk7DQorCQlmb3IoVmFsaWRhdG9yTWV0YURhdGEgdm1k
IDogZ2YuZ2V0QnVpbGRFbmFibGVkVmFsaWRhdG9ycygpKSB7DQorCQkJaWYoYWxsUHJvamVjdFZh
bGlkYXRvci5jb250YWlucyh2bWQuZ2V0VmFsaWRhdG9yVW5pcXVlTmFtZSgpKSkgew0KKwkJCQll
bmFibGVkR2xvYmFsVmFsaWRhdG9yc0ZvclByb2plY3QuYWRkKHZtZCk7DQogCQkJfQ0KIAkgICB9
DQogCQlyZXR1cm4gKFZhbGlkYXRvck1ldGFEYXRhW10pIGVuYWJsZWRHbG9iYWxWYWxpZGF0b3Jz
Rm9yUHJvamVjdC50b0FycmF5KG5ldyBWYWxpZGF0b3JNZXRhRGF0YVtlbmFibGVkR2xvYmFsVmFs
aWRhdG9yc0ZvclByb2plY3Quc2l6ZSgpXSk7DQogCX0NCiAJDQotCXByaXZhdGUgTGlzdCBnZXRB
bGxWYWxpZGF0b3JVbmlxdWVOYW1lcyhWYWxpZGF0b3JNZXRhRGF0YVtdIG1ldGFEYXRhKSB7DQot
CQlMaXN0IG5hbWVzID0gbmV3IEFycmF5TGlzdCgpOw0KLQkJZm9yKGludCBpID0gMDsgaSA8IG1l
dGFEYXRhLmxlbmd0aDsgaSsrKSB7DQotCQkJbmFtZXMuYWRkKG1ldGFEYXRhW2ldLmdldFZhbGlk
YXRvclVuaXF1ZU5hbWUoKSk7DQorCXByaXZhdGUgTGlzdDxTdHJpbmc+IGdldEFsbFZhbGlkYXRv
clVuaXF1ZU5hbWVzKFZhbGlkYXRvck1ldGFEYXRhW10gbWV0YURhdGEpIHsNCisJCUxpc3Q8U3Ry
aW5nPiBuYW1lcyA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOw0KKwkJZm9yKFZhbGlkYXRvck1l
dGFEYXRhIHZtZCA6IG1ldGFEYXRhKSB7DQorCQkJbmFtZXMuYWRkKHZtZC5nZXRWYWxpZGF0b3JV
bmlxdWVOYW1lKCkpOw0KIAkJfQ0KIAkJcmV0dXJuIG5hbWVzOw0KIAl9DQpAQCAtOTQ2LDEzICs5
NDIsOSBAQA0KIAkgKiBvcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi5pbnRlcm5hbC5wcm92aXNp
b25hbC5jb3JlLmNvcmUucHJvcCBwbHVnaW4pLiBJZiB5b3UgZG9uJ3QsIHZhbGlkYXRpb24gbWF5
IG5vdCBiZSBzdXNwZW5kZWQuDQogCSAqLw0KIAlwdWJsaWMgdm9pZCBzdXNwZW5kVmFsaWRhdGlv
bihJUHJvamVjdCBwcm9qZWN0LCBib29sZWFuIHN1c3BlbmQpIHsNCi0JCWlmIChwcm9qZWN0ID09
IG51bGwpIHsNCi0JCQlyZXR1cm47DQotCQl9DQorCQlpZiAocHJvamVjdCA9PSBudWxsKXJldHVy
bjsNCiANCi0JCWlmICghcHJvamVjdC5leGlzdHMoKSkgew0KLQkJCXJldHVybjsNCi0JCX0NCisJ
CWlmICghcHJvamVjdC5leGlzdHMoKSlyZXR1cm47DQogDQogCQkvLyBJZ25vcmUgd2hldGhlciBv
ciBub3QgdGhlIHByb2plY3QgaXMgY2xvc2VkLiBJZiBpdCdzIGNsb3NlZCB0aGVuIGl0IHdpbGwg
bm90IGJlIGJ1aWx0DQogCQkvLyBhbmQgdGhlICJSdW4gVmFsaWRhdGlvbiIgb3B0aW9uIHdpbGwg
bm90IGJlIGF2YWlsYWJsZS4NCkBAIC05OTQsMTQgKzk4Niw4IEBADQogCSAqIHdpbGwgcmV0dXJu
IHRydWUgZXZlbiB0aG91Z2ggdmFsaWRhdGlvbiB3aWxsIG5vdCBydW4uDQogCSAqLw0KIAlwdWJs
aWMgYm9vbGVhbiBpc1N1c3BlbmRlZChJUHJvamVjdCBwcm9qZWN0KSB7DQotCQlpZiAocHJvamVj
dCA9PSBudWxsKSB7DQotCQkJcmV0dXJuIGZhbHNlOw0KLQkJfQ0KLQ0KLQkJaWYgKF9zdXNwZW5k
QWxsVmFsaWRhdGlvbikgew0KLQkJCXJldHVybiB0cnVlOw0KLQkJfQ0KLQ0KKwkJaWYgKHByb2pl
Y3QgPT0gbnVsbClyZXR1cm4gZmFsc2U7DQorCQlpZiAoX3N1c3BlbmRBbGxWYWxpZGF0aW9uKXJl
dHVybiB0cnVlOw0KIAkJcmV0dXJuIF9zdXNwZW5kZWRQcm9qZWN0cy5jb250YWlucyhwcm9qZWN0
KTsNCiAJfQ0KIA0KQEAgLTEwMjgsNyArMTAxNCw3IEBADQogCSAqIEdpdmVuIGEgbGlzdCBvZiB2
YWxpZGF0b3JzJyBwbHVnaW4gaWRzLCBtYWtlIHRob3NlIHZhbGlkYXRvcnMgZW5hYmxlZCBmb3Ig
dGhpcyBwcm9qZWN0LiBBbGwNCiAJICogb3RoZXJzLCBkaXNhYmxlIGZvciB0aGlzIHByb2plY3Qu
DQogCSAqLw0KLQlwdWJsaWMgdm9pZCBzZXRFbmFibGVkVmFsaWRhdG9ycyhJUHJvamVjdCBwcm9q
ZWN0LCBTZXQgdm1kc1NldCwgSVByb2dyZXNzTW9uaXRvciBtb25pdG9yKSB7DQorCXB1YmxpYyB2
b2lkIHNldEVuYWJsZWRWYWxpZGF0b3JzKElQcm9qZWN0IHByb2plY3QsIFNldDxWYWxpZGF0b3JN
ZXRhRGF0YT4gdm1kc1NldCwgSVByb2dyZXNzTW9uaXRvciBtb25pdG9yKSB7DQogCQl0cnkgew0K
IAkJCVByb2plY3RDb25maWd1cmF0aW9uIHByanAgPSBDb25maWd1cmF0aW9uTWFuYWdlci5nZXRN
YW5hZ2VyKCkuZ2V0UHJvamVjdENvbmZpZ3VyYXRpb24ocHJvamVjdCk7DQogCQkJVmFsaWRhdG9y
TWV0YURhdGFbXSB2bWRzID0gbnVsbDsNCkBAIC0xMjA4LDMyICsxMTk0LDMxIEBADQogCX0NCiAJ
DQogCXB1YmxpYyB2b2lkIGNhY2hlTWVzc2FnZShJVmFsaWRhdG9ySm9iIHZhbGlkYXRvciwgTWVz
c2FnZUluZm8gaW5mbyl7DQotCQlBcnJheUxpc3QgbGlzdCA9IChBcnJheUxpc3QpIHZhbGlkYXRv
ck1zZ3MuZ2V0KHZhbGlkYXRvcik7DQorCQlMaXN0PE1lc3NhZ2VJbmZvPiBsaXN0ID0gX3ZhbGlk
YXRvck1zZ3MuZ2V0KHZhbGlkYXRvcik7DQogCQlpZiggbGlzdCA9PSBudWxsICl7DQotCQkJbGlz
dCA9IG5ldyBBcnJheUxpc3QoKTsNCi0JCQl2YWxpZGF0b3JNc2dzLnB1dCh2YWxpZGF0b3IsIGxp
c3QpOw0KKwkJCWxpc3QgPSBuZXcgQXJyYXlMaXN0PE1lc3NhZ2VJbmZvPigpOw0KKwkJCV92YWxp
ZGF0b3JNc2dzLnB1dCh2YWxpZGF0b3IsIGxpc3QpOw0KIAkJfQ0KIAkJbGlzdC5hZGQoaW5mbyk7
DQogCX0NCiAJDQotCXB1YmxpYyBBcnJheUxpc3QgZ2V0TWVzc2FnZXMoSVZhbGlkYXRvckpvYiB2
YWxpZGF0b3Ipew0KLQkJQXJyYXlMaXN0IGxpc3QgPSAoQXJyYXlMaXN0KSB2YWxpZGF0b3JNc2dz
LmdldCh2YWxpZGF0b3IpOw0KLQkJaWYoIGxpc3QgPT0gbnVsbCApDQotCQkJbGlzdCA9IG5ldyBB
cnJheUxpc3QoKTsJCQ0KKwlwdWJsaWMgTGlzdCBnZXRNZXNzYWdlcyhJVmFsaWRhdG9ySm9iIHZh
bGlkYXRvcil7DQorCQlMaXN0PE1lc3NhZ2VJbmZvPiBsaXN0ID0gX3ZhbGlkYXRvck1zZ3MuZ2V0
KHZhbGlkYXRvcik7DQorCQlpZiggbGlzdCA9PSBudWxsIClsaXN0ID0gbmV3IEFycmF5TGlzdDxN
ZXNzYWdlSW5mbz4oKTsJCQ0KIAkJcmV0dXJuIGxpc3Q7DQogCX0NCiAJDQogCXB1YmxpYyB2b2lk
IGNsZWFyTWVzc2FnZXMoSVZhbGlkYXRvckpvYiB2YWxpZGF0b3Ipew0KLQkJQXJyYXlMaXN0IGxp
c3QgPSAoQXJyYXlMaXN0KSB2YWxpZGF0b3JNc2dzLmdldCh2YWxpZGF0b3IpOw0KKwkJTGlzdDxN
ZXNzYWdlSW5mbz4gbGlzdCA9IF92YWxpZGF0b3JNc2dzLmdldCh2YWxpZGF0b3IpOw0KIAkJaWYo
IGxpc3QgIT0gbnVsbCApew0KIAkJCWxpc3QuY2xlYXIoKTsNCiAJCX0NCi0JCXZhbGlkYXRvck1z
Z3MucmVtb3ZlKCB2YWxpZGF0b3IgKTsNCisJCV92YWxpZGF0b3JNc2dzLnJlbW92ZSggdmFsaWRh
dG9yICk7DQogCX0NCiANCiAJDQotCXB1YmxpYyBTZXQgZ2V0UHJvYmxlbVZhbGlkYXRvcnMoKSB7
DQotCQlyZXR1cm4gcHJvYmxlbVZhbGlkYXRvcnM7DQorCXB1YmxpYyBTZXQ8VmFsaWRhdG9yTWV0
YURhdGE+IGdldFByb2JsZW1WYWxpZGF0b3JzKCkgew0KKwkJcmV0dXJuIF9wcm9ibGVtVmFsaWRh
dG9yczsNCiAJfQ0KIAkNCiB9DQpJbmRleDogdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlk
YXRpb24vaW50ZXJuYWwvb3BlcmF0aW9ucy9Xb3JrYmVuY2hDb250ZXh0LmphdmENCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBz
ZS53c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRl
cm5hbC9vcGVyYXRpb25zL1dvcmtiZW5jaENvbnRleHQuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlz
aW9uIDEuOQ0KZGlmZiAtdSAtcjEuOSBXb3JrYmVuY2hDb250ZXh0LmphdmENCi0tLSB2YWxpZGF0
ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1dvcmtiZW5j
aENvbnRleHQuamF2YQk3IEp1biAyMDA3IDE5OjI4OjM3IC0wMDAwCTEuOQ0KKysrIHZhbGlkYXRl
L29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMvV29ya2JlbmNo
Q29udGV4dC5qYXZhCTE1IEphbiAyMDA4IDE3OjAyOjE5IC0wMDAwDQpAQCAtMzcsMTAgKzM3LDEw
IEBADQogICogc3ltYm9saWMgbW9kZWwgbmFtZS4NCiAgKi8NCiBwdWJsaWMgY2xhc3MgV29ya2Jl
bmNoQ29udGV4dCBpbXBsZW1lbnRzIElXb3JrYmVuY2hDb250ZXh0IHsNCi0JcHJpdmF0ZSBJUHJv
amVjdCBfcHJvamVjdDsNCi0JcHJpdmF0ZSBIYXNodGFibGUgX21vZGVsUmVnaXN0cnk7DQotCXBy
aXZhdGUgaW50IF9ydWxlR3JvdXAgPSBSZWdpc3RyeUNvbnN0YW50cy5BVFRfUlVMRV9HUk9VUF9E
RUZBVUxUOw0KLQlwdWJsaWMgTGlzdCB2YWxpZGF0aW9uRmlsZVVSSXM7IA0KKwlwcml2YXRlIElQ
cm9qZWN0IAlfcHJvamVjdDsNCisJcHJpdmF0ZSBIYXNodGFibGU8U3RyaW5nLE1ldGhvZD4gCV9t
b2RlbFJlZ2lzdHJ5Ow0KKwlwcml2YXRlIGludCAJCV9ydWxlR3JvdXAgPSBSZWdpc3RyeUNvbnN0
YW50cy5BVFRfUlVMRV9HUk9VUF9ERUZBVUxUOw0KKwlwdWJsaWMgTGlzdDxTdHJpbmc+IHZhbGlk
YXRpb25GaWxlVVJJczsgDQogCXB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEdFVF9QUk9KRUNU
X0ZJTEVTID0gImdldEFsbEZpbGVzIjsgLy8kTk9OLU5MUy0xJA0KIAlwdWJsaWMgc3RhdGljIGZp
bmFsIFN0cmluZyBHRVRfRklMRSA9ICJnZXRGaWxlIjsgLy8kTk9OLU5MUy0xJA0KIAlwdWJsaWMg
c3RhdGljIGZpbmFsIFN0cmluZyBWQUxJREFUSU9OX01BUktFUiA9ICJjb20uaWJtLmV0b29scy52
YWxpZGF0aW9uLnByb2JsZW1tYXJrZXIiOyAvLyROT04tTkxTLTEkDQpAQCAtNDgsNyArNDgsNyBA
QA0KIA0KIAlwdWJsaWMgV29ya2JlbmNoQ29udGV4dCgpIHsNCiAJCXN1cGVyKCk7DQotCQlfbW9k
ZWxSZWdpc3RyeSA9IG5ldyBIYXNodGFibGUoKTsNCisJCV9tb2RlbFJlZ2lzdHJ5ID0gbmV3IEhh
c2h0YWJsZTxTdHJpbmcsIE1ldGhvZD4oKTsNCiANCiAJCXJlZ2lzdGVyTW9kZWwoSVJ1bGVHcm91
cC5QQVNTX0xFVkVMLCAibG9hZFJ1bGVHcm91cCIpOyAvLyROT04tTkxTLTEkDQogCQkNCkBAIC0z
ODgsMTAgKzM4OCwxMCBAQA0KIAkgICAqIEBwYXJhbSB2YWxpZGF0b3JDbGFzc05hbWUgVGhlIG5h
bWUgb2YgdGhlIHZhbGlkYXRvciBjbGFzcy4NCiAJICAgKiBAcmV0dXJuIFRoZSBjb2xsZWN0aW9u
IG9mIGZpbGVzIHJlbGV2YW50IGZvciB0aGUgdmFsaWRhdG9yIGNsYXNzIHNwZWNpZmllZC4NCiAJ
ICAgKi8NCi0JICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRGaWxlcyhTdHJpbmcgdmFsaWRhdG9yQ2xh
c3NOYW1lKQ0KKwkgIHB1YmxpYyBDb2xsZWN0aW9uPElGaWxlPiBnZXRGaWxlcyhTdHJpbmcgdmFs
aWRhdG9yQ2xhc3NOYW1lKQ0KIAkgIHsNCiAJICAgIElQcm9qZWN0IHByb2plY3QgPSBnZXRQcm9q
ZWN0KCk7DQotCSAgICBMaXN0IGZpbGVzID0gbmV3IEFycmF5TGlzdCgpOw0KKwkgICAgTGlzdDxJ
RmlsZT4gZmlsZXMgPSBuZXcgQXJyYXlMaXN0PElGaWxlPigpOw0KIAkgICAgZ2V0RmlsZXMoZmls
ZXMsIHByb2plY3QsIHZhbGlkYXRvckNsYXNzTmFtZSk7DQogCSAgICByZXR1cm4gZmlsZXM7DQog
CSAgfQ0KQEAgLTQwNCw3ICs0MDQsNyBAQA0KIAkgICAqIEBwYXJhbSByZXNvdXJjZSBUaGUgcmVz
b3VyY2UgdG8gbG9vayBmb3IgZmlsZXMgaW4uDQogCSAgICogQHBhcmFtIHZhbGlkYXRvckNsYXNz
TmFtZSBUaGUgbmFtZSBvZiB0aGUgdmFsaWRhdG9yIGNsYXNzLg0KIAkgICAqLw0KLQkgIHByb3Rl
Y3RlZCB2b2lkIGdldEZpbGVzKENvbGxlY3Rpb24gZmlsZXMsIElDb250YWluZXIgcmVzb3VyY2Us
IFN0cmluZyB2YWxpZGF0b3JDbGFzc05hbWUpDQorCSAgcHJvdGVjdGVkIHZvaWQgZ2V0RmlsZXMo
Q29sbGVjdGlvbjxJRmlsZT4gZmlsZXMsIElDb250YWluZXIgcmVzb3VyY2UsIFN0cmluZyB2YWxp
ZGF0b3JDbGFzc05hbWUpDQogCSAgew0KIAkgICAgdHJ5DQogCSAgICB7DQpAQCAtNDE0LDcgKzQx
NCw3IEBADQogCSAgICAgICAgaWYgKFZhbGlkYXRvck1hbmFnZXIuZ2V0TWFuYWdlcigpLmlzQXBw
bGljYWJsZVRvKHZhbGlkYXRvckNsYXNzTmFtZSwgcmVzb3VyY2VBcnJheVtpXSkpIA0KIAkgICAg
ICAgIHsNCiAJICAgICAgICAgIGlmIChyZXNvdXJjZUFycmF5W2ldIGluc3RhbmNlb2YgSUZpbGUp
IA0KLQkJCQkgIGZpbGVzLmFkZChyZXNvdXJjZUFycmF5W2ldKTsNCisJCQkJICBmaWxlcy5hZGQo
KElGaWxlKXJlc291cmNlQXJyYXlbaV0pOw0KIAkgICAgICAgIH0NCiAJICAgICAgICBpZiAocmVz
b3VyY2VBcnJheVtpXS5nZXRUeXBlKCkgPT0gSVJlc291cmNlLkZPTERFUikNCiAJICAgICAgICAg
Z2V0RmlsZXMoZmlsZXMsKElDb250YWluZXIpcmVzb3VyY2VBcnJheVtpXSwgdmFsaWRhdG9yQ2xh
c3NOYW1lKSA7DQpAQCAtNTQ3LDkgKzU0Nyw3IEBADQogCSAqICJyZWdpc3Rlck1vZGVsIiBtZXRo
b2QuDQogCSAqLw0KIAlwdWJsaWMgZmluYWwgYm9vbGVhbiBpc1JlZ2lzdGVyZWQoU3RyaW5nIHN5
bWJvbGljTmFtZSkgew0KLQkJaWYgKHN5bWJvbGljTmFtZSA9PSBudWxsKSB7DQotCQkJcmV0dXJu
IGZhbHNlOw0KLQkJfQ0KKwkJaWYgKHN5bWJvbGljTmFtZSA9PSBudWxsKXJldHVybiBmYWxzZTsN
CiAJCXJldHVybiBfbW9kZWxSZWdpc3RyeS5jb250YWluc0tleShzeW1ib2xpY05hbWUpOw0KIAl9
DQogDQpAQCAtNTc1LDEwICs1NzMsOCBAQA0KIAkgKi8NCiAJcHVibGljIE9iamVjdCBsb2FkTW9k
ZWwoU3RyaW5nIHN5bWJvbGljTmFtZSwgT2JqZWN0W10gcGFybXMpIHsNCiAJCXRyeSB7DQotCQkJ
TWV0aG9kIGxvYWRlciA9IChNZXRob2QpIF9tb2RlbFJlZ2lzdHJ5LmdldChzeW1ib2xpY05hbWUp
Ow0KLQkJCWlmIChsb2FkZXIgPT0gbnVsbCkgew0KLQkJCQlyZXR1cm4gbnVsbDsNCi0JCQl9DQor
CQkJTWV0aG9kIGxvYWRlciA9IF9tb2RlbFJlZ2lzdHJ5LmdldChzeW1ib2xpY05hbWUpOw0KKwkJ
CWlmIChsb2FkZXIgPT0gbnVsbClyZXR1cm4gbnVsbDsNCiANCiAJCQlyZXR1cm4gbG9hZGVyLmlu
dm9rZSh0aGlzLCBwYXJtcyk7DQogCQl9IGNhdGNoIChJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGV4
Yykgew0KQEAgLTc2MSwyOCArNzU3LDI2IEBADQogCX0NCiANCiAJcHVibGljIFN0cmluZyBnZXRU
YXJnZXRPYmplY3ROYW1lKE9iamVjdCBvYmplY3QpIHsNCi0JCS8vIFRPRE8gQXV0by1nZW5lcmF0
ZWQgbWV0aG9kIHN0dWINCiAJCXJldHVybiBudWxsOw0KIAl9DQogDQogCXB1YmxpYyBTdHJpbmdb
XSBnZXRVUklzKCkgew0KIAkJU3RyaW5nW10gdXJpcyA9IG5ldyBTdHJpbmdbdmFsaWRhdGlvbkZp
bGVVUklzLnNpemUoKV07DQotCQlmb3IoaW50IGkgPSAwOyBpIDwgdmFsaWRhdGlvbkZpbGVVUklz
LnNpemUoKTsgaSsrKSANCi0JCQl1cmlzW2ldID0gKFN0cmluZykgdmFsaWRhdGlvbkZpbGVVUklz
LmdldChpKTsNCisJCXZhbGlkYXRpb25GaWxlVVJJcy50b0FycmF5KHVyaXMpOw0KIAkJcmV0dXJu
IHVyaXM7DQogCX0NCiANCiAJLyoqDQogCSAqIEByZXR1cm4gUmV0dXJucyB0aGUgdmFsaWRhdGlv
bkZpbGVVUklzLg0KIAkgKi8NCi0JcHVibGljIExpc3QgZ2V0VmFsaWRhdGlvbkZpbGVVUklzKCkg
ew0KKwlwdWJsaWMgTGlzdDxTdHJpbmc+IGdldFZhbGlkYXRpb25GaWxlVVJJcygpIHsNCiAJCXJl
dHVybiB2YWxpZGF0aW9uRmlsZVVSSXM7DQogCX0NCiANCiAJLyoqDQogCSAqIEBwYXJhbSB2YWxp
ZGF0aW9uRmlsZVVSSXMgVGhlIHZhbGlkYXRpb25GaWxlVVJJcyB0byBzZXQuDQogCSAqLw0KLQlw
dWJsaWMgdm9pZCBzZXRWYWxpZGF0aW9uRmlsZVVSSXMoTGlzdCB2YWxpZGF0aW9uRmlsZVVSSXMp
IHsNCisJcHVibGljIHZvaWQgc2V0VmFsaWRhdGlvbkZpbGVVUklzKExpc3Q8U3RyaW5nPiB2YWxp
ZGF0aW9uRmlsZVVSSXMpIHsNCiAJCXRoaXMudmFsaWRhdGlvbkZpbGVVUklzID0gdmFsaWRhdGlv
bkZpbGVVUklzOw0KIAl9DQogfQ0KSW5kZXg6IHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxp
ZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMvVmFsaWRhdGlvbkJ1aWxkZXIuamF2YQ0KPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L3dlYnRvb2xzL2NvbW1vbi9wbHVnaW5zL29yZy5lY2xp
cHNlLndzdC52YWxpZGF0aW9uL3ZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2lu
dGVybmFsL29wZXJhdGlvbnMvVmFsaWRhdGlvbkJ1aWxkZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJl
dmlzaW9uIDEuMjANCmRpZmYgLXUgLXIxLjIwIFZhbGlkYXRpb25CdWlsZGVyLmphdmENCi0tLSB2
YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1Zh
bGlkYXRpb25CdWlsZGVyLmphdmEJMTkgRGVjIDIwMDcgMTU6NTQ6NTUgLTAwMDAJMS4yMA0KKysr
IHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL29wZXJhdGlvbnMv
VmFsaWRhdGlvbkJ1aWxkZXIuamF2YQkxNSBKYW4gMjAwOCAxNzowMjoxNyAtMDAwMA0KQEAgLTQ4
LDIyICs0OCwxOSBAQA0KICAqLw0KIHB1YmxpYyBjbGFzcyBWYWxpZGF0aW9uQnVpbGRlciBleHRl
bmRzIEluY3JlbWVudGFsUHJvamVjdEJ1aWxkZXIgew0KIAlwdWJsaWMgc3RhdGljIGZpbmFsIGlu
dCBOT19ERUxUQV9DSEFOR0UgPSAtMTsNCi0JcHJvdGVjdGVkIExpc3QgcmVmZXJlbmNlZFByb2pl
Y3RzOw0KKwlwcm90ZWN0ZWQgTGlzdDxJUHJvamVjdD4gcmVmZXJlbmNlZFByb2plY3RzOw0KIAlw
cm90ZWN0ZWQgSVdvcmtiZW5jaENvbnRleHQgd29ya2JlbmNoQ29udGV4dCA9IG51bGw7DQogDQog
CXB1YmxpYyBWYWxpZGF0aW9uQnVpbGRlcigpIHsNCiAJCXN1cGVyKCk7DQogCX0NCiANCi0JcHJp
dmF0ZSBJUHJvamVjdFtdIGdldEFsbFJlZmVyZW5jZWRQcm9qZWN0cyhJUHJvamVjdCBwcm9qZWN0
LCBTZXQgdmlzaXRlZFByb2plY3RzKSB7DQotCQlpZiAodmlzaXRlZFByb2plY3RzID09IG51bGwp
DQotCQkJdmlzaXRlZFByb2plY3RzID0gbmV3IEhhc2hTZXQoKTsNCi0JCWVsc2UgaWYgKHZpc2l0
ZWRQcm9qZWN0cy5jb250YWlucyhwcm9qZWN0KSkNCi0JCQlyZXR1cm4gZ2V0UmVmZXJlbmNlZFBy
b2plY3RzKCk7DQotCQllbHNlDQotCQkJdmlzaXRlZFByb2plY3RzLmFkZChwcm9qZWN0KTsNCisJ
cHJpdmF0ZSBJUHJvamVjdFtdIGdldEFsbFJlZmVyZW5jZWRQcm9qZWN0cyhJUHJvamVjdCBwcm9q
ZWN0LCBTZXQ8SVByb2plY3Q+IHZpc2l0ZWRQcm9qZWN0cykgew0KKwkJaWYgKHZpc2l0ZWRQcm9q
ZWN0cyA9PSBudWxsKXZpc2l0ZWRQcm9qZWN0cyA9IG5ldyBIYXNoU2V0PElQcm9qZWN0PigpOw0K
KwkJZWxzZSBpZiAodmlzaXRlZFByb2plY3RzLmNvbnRhaW5zKHByb2plY3QpKXJldHVybiBnZXRS
ZWZlcmVuY2VkUHJvamVjdHMoKTsNCisJCWVsc2UgdmlzaXRlZFByb2plY3RzLmFkZChwcm9qZWN0
KTsNCiAJCWlmIChyZWZlcmVuY2VkUHJvamVjdHMgPT0gbnVsbCkNCi0JCQlyZWZlcmVuY2VkUHJv
amVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7DQorCQkJcmVmZXJlbmNlZFByb2plY3RzID0gbmV3IEFy
cmF5TGlzdDxJUHJvamVjdD4oKTsNCiAJCXRyeSB7DQogCQkJaWYgKHByb2plY3QuaXNBY2Nlc3Np
YmxlKCkpIHsNCiAJCQkJSVByb2plY3RbXSByZWZQcm9qQXJyYXkgPSBwcm9qZWN0LmdldFJlZmVy
ZW5jZWRQcm9qZWN0cygpOw0KQEAgLTEzOCwxMCArMTM1LDcgQEANCiANCiAJcHJpdmF0ZSBJUHJv
amVjdFtdIGdldFJlZmVyZW5jZWRQcm9qZWN0cygpIHsNCiAJCUlQcm9qZWN0W10gcmVmUHJvakFy
cmF5ID0gbmV3IElQcm9qZWN0W3JlZmVyZW5jZWRQcm9qZWN0cy5zaXplKCldOw0KLQkJZm9yIChp
bnQgaSA9IDA7IGkgPCByZWZlcmVuY2VkUHJvamVjdHMuc2l6ZSgpOyBpKyspIHsNCi0JCQlyZWZQ
cm9qQXJyYXlbaV0gPSAoSVByb2plY3QpIHJlZmVyZW5jZWRQcm9qZWN0cy5nZXQoaSk7DQotCQl9
DQotCQlyZXR1cm4gcmVmUHJvakFycmF5Ow0KKwkJcmV0dXJuIHJlZmVyZW5jZWRQcm9qZWN0cy50
b0FycmF5KHJlZlByb2pBcnJheSk7DQogCX0NCiANCiAJcHVibGljIElQcm9qZWN0W10gYnVpbGQo
aW50IGtpbmQsIE1hcCBwYXJhbWV0ZXJzLCBJUHJvZ3Jlc3NNb25pdG9yIG1vbml0b3IpIHsNCklu
ZGV4OiB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9vcGVyYXRp
b25zL1JlZmVyZW5jaWFsRmlsZVZhbGlkYXRvckhlbHBlci5qYXZhDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1Mg
ZmlsZTogL2N2c3Jvb3Qvd2VidG9vbHMvY29tbW9uL3BsdWdpbnMvb3JnLmVjbGlwc2Uud3N0LnZh
bGlkYXRpb24vdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvb3Bl
cmF0aW9ucy9SZWZlcmVuY2lhbEZpbGVWYWxpZGF0b3JIZWxwZXIuamF2YSx2DQpyZXRyaWV2aW5n
IHJldmlzaW9uIDEuNQ0KZGlmZiAtdSAtcjEuNSBSZWZlcmVuY2lhbEZpbGVWYWxpZGF0b3JIZWxw
ZXIuamF2YQ0KLS0tIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFs
L29wZXJhdGlvbnMvUmVmZXJlbmNpYWxGaWxlVmFsaWRhdG9ySGVscGVyLmphdmEJNyBKdW4gMjAw
NyAxOToyODozNyAtMDAwMAkxLjUNCisrKyB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRh
dGlvbi9pbnRlcm5hbC9vcGVyYXRpb25zL1JlZmVyZW5jaWFsRmlsZVZhbGlkYXRvckhlbHBlci5q
YXZhCTE1IEphbiAyMDA4IDE3OjAyOjE2IC0wMDAwDQpAQCAtMzAsMTYgKzMwLDE1IEBADQogICov
DQogcHVibGljIGNsYXNzIFJlZmVyZW5jaWFsRmlsZVZhbGlkYXRvckhlbHBlciB7DQogCXB1Ymxp
YyBSZWZlcmVuY2lhbEZpbGVWYWxpZGF0b3JIZWxwZXIoKSB7DQotCQlzdXBlcigpOw0KIAl9DQog
DQogCS8qKg0KIAkgKiBSZXR1cm4gYSBsaXN0IG9mIGFsbCBmaWxlcyBjb250YWluZWQgaW4gcHJv
amVjdCB0byBpbmZpbml0ZSBkZXB0aA0KIAkgKi8NCiAJcHVibGljIHN0YXRpYyBMaXN0IGdldEFs
bFByb2plY3RGaWxlcyhJUHJvamVjdCBwcm9qZWN0KSB7DQotCQlMaXN0IHJlc3VsdCA9IG5ldyBB
cnJheUxpc3QoKTsNCi0JCWlmIChwcm9qZWN0ID09IG51bGwpDQotCQkJcmV0dXJuIHJlc3VsdDsN
CisJCUxpc3Q8SUZpbGU+IHJlc3VsdCA9IG5ldyBBcnJheUxpc3Q8SUZpbGU+KCk7DQorCQlpZiAo
cHJvamVjdCA9PSBudWxsKXJldHVybiByZXN1bHQ7DQorCQkNCiAJCXRyeSB7DQogCQkJcmVzdWx0
ID0gY29sbGVjdEZpbGVzKHByb2plY3QubWVtYmVycygpLCByZXN1bHQpOw0KIAkJfSBjYXRjaCAo
Q29yZUV4Y2VwdGlvbiBlKSB7DQpAQCAtNDgsMTUgKzQ3LDExIEBADQogCQlyZXR1cm4gcmVzdWx0
Ow0KIAl9DQogDQotCXByaXZhdGUgc3RhdGljIExpc3QgY29sbGVjdEZpbGVzKElSZXNvdXJjZVtd
IG1lbWJlcnMsIExpc3QgcmVzdWx0KSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiB7DQorCXByaXZhdGUg
c3RhdGljIExpc3Q8SUZpbGU+IGNvbGxlY3RGaWxlcyhJUmVzb3VyY2VbXSBtZW1iZXJzLCBMaXN0
PElGaWxlPiByZXN1bHQpIHRocm93cyBDb3JlRXhjZXB0aW9uIHsNCiAJCS8vIHJlY3Vyc2l2ZWx5
IGNvbGxlY3QgZmlsZXMgZm9yIHRoZSBnaXZlbiBtZW1iZXJzDQotCQlmb3IgKGludCBpID0gMDsg
aSA8IG1lbWJlcnMubGVuZ3RoOyBpKyspIHsNCi0JCQlJUmVzb3VyY2UgcmVzID0gbWVtYmVyc1tp
XTsNCi0JCQlpZiAocmVzIGluc3RhbmNlb2YgSUZvbGRlcikgew0KLQkJCQljb2xsZWN0RmlsZXMo
KChJRm9sZGVyKSByZXMpLm1lbWJlcnMoKSwgcmVzdWx0KTsNCi0JCQl9IGVsc2UgaWYgKHJlcyBp
bnN0YW5jZW9mIElGaWxlKSB7DQotCQkJCXJlc3VsdC5hZGQocmVzKTsNCi0JCQl9DQorCQlmb3Ig
KElSZXNvdXJjZSByZXMgOiBtZW1iZXJzKSB7DQorCQkJaWYgKHJlcyBpbnN0YW5jZW9mIElGb2xk
ZXIpY29sbGVjdEZpbGVzKCgoSUZvbGRlcikgcmVzKS5tZW1iZXJzKCksIHJlc3VsdCk7DQorCQkJ
ZWxzZSBpZiAocmVzIGluc3RhbmNlb2YgSUZpbGUpcmVzdWx0LmFkZCgoSUZpbGUpcmVzKTsNCiAJ
CX0NCiAJCXJldHVybiByZXN1bHQ7DQogCX0NCkluZGV4OiB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93
c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9wbHVnaW4vVmFsaWRhdGlvbkhlbHBlclJlZ2lzdHJ5UmVh
ZGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21tb24v
cGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9vcmcvZWNsaXBzZS93
c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9wbHVnaW4vVmFsaWRhdGlvbkhlbHBlclJlZ2lzdHJ5UmVh
ZGVyLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjUNCmRpZmYgLXUgLXIxLjUgVmFsaWRh
dGlvbkhlbHBlclJlZ2lzdHJ5UmVhZGVyLmphdmENCi0tLSB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93
c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9wbHVnaW4vVmFsaWRhdGlvbkhlbHBlclJlZ2lzdHJ5UmVh
ZGVyLmphdmEJNyBKdW4gMjAwNyAxOToyODozOCAtMDAwMAkxLjUNCisrKyB2YWxpZGF0ZS9vcmcv
ZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9wbHVnaW4vVmFsaWRhdGlvbkhlbHBlclJl
Z2lzdHJ5UmVhZGVyLmphdmEJMTUgSmFuIDIwMDggMTc6MDI6MTkgLTAwMDANCkBAIC0yOCw3ICsy
OCw3IEBADQogCXN0YXRpYyBmaW5hbCBTdHJpbmcgQVRUX0hFTFBFUl9DTEFTUyA9ICJoZWxwZXJD
bGFzcyI7IC8vJE5PTi1OTFMtMSQNCiAJDQogCXByaXZhdGUgc3RhdGljIFZhbGlkYXRpb25IZWxw
ZXJSZWdpc3RyeVJlYWRlciBJTlNUQU5DRSA9IG51bGw7DQotCXByaXZhdGUgTGlzdCB2YWxpZGF0
aW9uSGVscGVycyA9IG51bGw7DQorCXByaXZhdGUgTGlzdDxJUHJvamVjdFZhbGlkYXRpb25IZWxw
ZXI+IF92YWxpZGF0aW9uSGVscGVyczsNCiAJDQogCXB1YmxpYyBWYWxpZGF0aW9uSGVscGVyUmVn
aXN0cnlSZWFkZXIoKSB7DQogCQlzdXBlcihWYWxpZGF0aW9uUGx1Z2luLlBMVUdJTl9JRCwgVkFM
SURBVElPTl9IRUxQRVIpOw0KQEAgLTQyLDEwICs0MiwxMCBAQA0KIAkJcmV0dXJuIElOU1RBTkNF
Ow0KIAl9DQogCQ0KLQlwcml2YXRlIExpc3QgZ2V0VmFsaWRhdGlvbkhlbHBlcnMoKSB7DQotCQlp
ZiAodmFsaWRhdGlvbkhlbHBlcnMgPT0gbnVsbCkNCi0JCQl2YWxpZGF0aW9uSGVscGVycyA9IG5l
dyBBcnJheUxpc3QoKTsNCi0JCXJldHVybiB2YWxpZGF0aW9uSGVscGVyczsNCisJcHJpdmF0ZSBM
aXN0PElQcm9qZWN0VmFsaWRhdGlvbkhlbHBlcj4gZ2V0VmFsaWRhdGlvbkhlbHBlcnMoKSB7DQor
CQlpZiAoX3ZhbGlkYXRpb25IZWxwZXJzID09IG51bGwpDQorCQkJX3ZhbGlkYXRpb25IZWxwZXJz
ID0gbmV3IEFycmF5TGlzdDxJUHJvamVjdFZhbGlkYXRpb25IZWxwZXI+KCk7DQorCQlyZXR1cm4g
X3ZhbGlkYXRpb25IZWxwZXJzOw0KIAl9DQogDQogCXB1YmxpYyBib29sZWFuIHJlYWRFbGVtZW50
KElDb25maWd1cmF0aW9uRWxlbWVudCBlbGVtZW50KSB7DQpAQCAtNjMsOSArNjMsOCBAQA0KIAl9
DQogCQ0KIAlwdWJsaWMgSVByb2plY3RWYWxpZGF0aW9uSGVscGVyIGdldFZhbGlkYXRpb25IZWxw
ZXIoKSB7DQotCQlpZiAoZ2V0VmFsaWRhdGlvbkhlbHBlcnMoKS5pc0VtcHR5KCkpDQotCQkJcmV0
dXJuIG51bGw7DQotCQlyZXR1cm4gKElQcm9qZWN0VmFsaWRhdGlvbkhlbHBlcikgZ2V0VmFsaWRh
dGlvbkhlbHBlcnMoKS5nZXQoMCk7DQorCQlpZiAoZ2V0VmFsaWRhdGlvbkhlbHBlcnMoKS5pc0Vt
cHR5KCkpcmV0dXJuIG51bGw7DQorCQlyZXR1cm4gZ2V0VmFsaWRhdGlvbkhlbHBlcnMoKS5nZXQo
MCk7DQogCX0NCiANCiB9DQpJbmRleDogdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRp
b24vaW50ZXJuYWwvVmFsaWRhdG9yTWV0YURhdGEuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6
IC9jdnNyb290L3dlYnRvb2xzL2NvbW1vbi9wbHVnaW5zL29yZy5lY2xpcHNlLndzdC52YWxpZGF0
aW9uL3ZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL1ZhbGlkYXRv
ck1ldGFEYXRhLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMxDQpkaWZmIC11IC1yMS4z
MSBWYWxpZGF0b3JNZXRhRGF0YS5qYXZhDQotLS0gdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3Zh
bGlkYXRpb24vaW50ZXJuYWwvVmFsaWRhdG9yTWV0YURhdGEuamF2YQkzMCBKdWwgMjAwNyAxOToy
OTo0MSAtMDAwMAkxLjMxDQorKysgdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24v
aW50ZXJuYWwvVmFsaWRhdG9yTWV0YURhdGEuamF2YQkxNSBKYW4gMjAwOCAxNzowMjoxNiAtMDAw
MA0KQEAgLTQ1LDM3ICs0NSwzNyBAQA0KICAqIFZhbGlkYXRvck1ldGFEYXRhOyBpdCBpcyBmb3Ig
dXNlIGJ5IHRoZSBiYXNlIGZyYW1ld29yayBvbmx5Lg0KICAqLw0KIHB1YmxpYyBjbGFzcyBWYWxp
ZGF0b3JNZXRhRGF0YSB7DQotCXByaXZhdGUgVmFsaWRhdG9yRmlsdGVyW10gX2ZpbHRlcnM7DQot
CXByaXZhdGUgVmFsaWRhdG9yTmFtZUZpbHRlcltdIF9wcm9qZWN0TmF0dXJlRmlsdGVyczsNCi0J
cHJpdmF0ZSBTdHJpbmdbXSBmYWNldEZpbHRlcnM7DQotCXByaXZhdGUgSVZhbGlkYXRvciBfdmFs
aWRhdG9yOw0KLQlwcml2YXRlIElXb3JrYmVuY2hDb250ZXh0IF9oZWxwZXI7DQotCXByaXZhdGUg
U3RyaW5nIF92YWxpZGF0b3JEaXNwbGF5TmFtZTsNCi0JcHJpdmF0ZSBTdHJpbmcgX3ZhbGlkYXRv
clVuaXF1ZU5hbWU7DQotCXByaXZhdGUgU3RyaW5nW10gX2FnZ3JlZ2F0ZWRWYWxpZGF0b3JzOw0K
LSAgICBwcml2YXRlIFN0cmluZ1tdIGNvbnRlbnRUeXBlSWRzID0gbnVsbDsNCi0JcHJpdmF0ZSBT
dHJpbmdbXSBfdmFsaWRhdG9yTmFtZXM7DQotCXByaXZhdGUgU3RyaW5nIF9wbHVnaW5JZDsNCi0J
cHJpdmF0ZSBib29sZWFuIF9zdXBwb3J0c0luY3JlbWVudGFsID0gUmVnaXN0cnlDb25zdGFudHMu
QVRUX0lOQ1JFTUVOVEFMX0RFRkFVTFQ7DQotCXByaXZhdGUgYm9vbGVhbiBfc3VwcG9ydHNGdWxs
QnVpbGQgPSBSZWdpc3RyeUNvbnN0YW50cy5BVFRfRlVMTEJVSUxEX0RFRkFVTFQ7DQotCXByaXZh
dGUgTG9nZ2VyIF9sb2dnZXI7DQotCXByaXZhdGUgYm9vbGVhbiBfaXNFbmFibGVkQnlEZWZhdWx0
ID0gUmVnaXN0cnlDb25zdGFudHMuQVRUX0VOQUJMRURfREVGQVVMVDsNCisJcHJpdmF0ZSBWYWxp
ZGF0b3JGaWx0ZXJbXSAJCV9maWx0ZXJzOw0KKwlwcml2YXRlIFZhbGlkYXRvck5hbWVGaWx0ZXJb
XSAJX3Byb2plY3ROYXR1cmVGaWx0ZXJzOw0KKwlwcml2YXRlIFN0cmluZ1tdIAkJCQlfZmFjZXRG
aWx0ZXJzOw0KKwlwcml2YXRlIElWYWxpZGF0b3IgCQkJCV92YWxpZGF0b3I7DQorCXByaXZhdGUg
SVdvcmtiZW5jaENvbnRleHQgCQlfaGVscGVyOw0KKwlwcml2YXRlIFN0cmluZyAJCQkJCV92YWxp
ZGF0b3JEaXNwbGF5TmFtZTsNCisJcHJpdmF0ZSBTdHJpbmcgCQkJX3ZhbGlkYXRvclVuaXF1ZU5h
bWU7DQorCXByaXZhdGUgU3RyaW5nW10gCQlfYWdncmVnYXRlZFZhbGlkYXRvcnM7DQorICAgIHBy
aXZhdGUgU3RyaW5nW10gCQlfY29udGVudFR5cGVJZHMgPSBudWxsOw0KKwlwcml2YXRlIFN0cmlu
Z1tdIAkJX3ZhbGlkYXRvck5hbWVzOw0KKwlwcml2YXRlIFN0cmluZyAJCQlfcGx1Z2luSWQ7DQor
CXByaXZhdGUgYm9vbGVhbiAJCV9zdXBwb3J0c0luY3JlbWVudGFsID0gUmVnaXN0cnlDb25zdGFu
dHMuQVRUX0lOQ1JFTUVOVEFMX0RFRkFVTFQ7DQorCXByaXZhdGUgYm9vbGVhbiAJCV9zdXBwb3J0
c0Z1bGxCdWlsZCA9IFJlZ2lzdHJ5Q29uc3RhbnRzLkFUVF9GVUxMQlVJTERfREVGQVVMVDsNCisJ
cHJpdmF0ZSBMb2dnZXIgCQkJX2xvZ2dlcjsNCisJcHJpdmF0ZSBib29sZWFuIAkJX2lzRW5hYmxl
ZEJ5RGVmYXVsdCA9IFJlZ2lzdHJ5Q29uc3RhbnRzLkFUVF9FTkFCTEVEX0RFRkFVTFQ7DQogCXBy
aXZhdGUgTWlncmF0aW9uTWV0YURhdGEgX21pZ3JhdGlvbk1ldGFEYXRhOw0KLQlwcml2YXRlIGlu
dCBfcnVsZUdyb3VwID0gUmVnaXN0cnlDb25zdGFudHMuQVRUX1JVTEVfR1JPVVBfREVGQVVMVDsN
Ci0JcHJpdmF0ZSBib29sZWFuIF9hc3luYyA9IFJlZ2lzdHJ5Q29uc3RhbnRzLkFUVF9BU1lOQ19E
RUZBVUxUOw0KLQlwcml2YXRlIGJvb2xlYW4gZGVwZW5kZW50VmFsaWRhdG9yID0gUmVnaXN0cnlD
b25zdGFudHMuREVQX1ZBTF9WQUxVRV9ERUZBVUxUOw0KLQlwcml2YXRlIFN0cmluZ1tdIG1hcmtl
cklkczsNCi0JcHJpdmF0ZSBTdHJpbmcgX2hlbHBlckNsYXNzTmFtZTsNCisJcHJpdmF0ZSBpbnQg
CQkJX3J1bGVHcm91cCA9IFJlZ2lzdHJ5Q29uc3RhbnRzLkFUVF9SVUxFX0dST1VQX0RFRkFVTFQ7
DQorCXByaXZhdGUgYm9vbGVhbiAJCV9hc3luYyA9IFJlZ2lzdHJ5Q29uc3RhbnRzLkFUVF9BU1lO
Q19ERUZBVUxUOw0KKwlwcml2YXRlIGJvb2xlYW4gCQlfZGVwZW5kZW50VmFsaWRhdG9yID0gUmVn
aXN0cnlDb25zdGFudHMuREVQX1ZBTF9WQUxVRV9ERUZBVUxUOw0KKwlwcml2YXRlIFN0cmluZ1td
IAkJX21hcmtlcklkczsNCisJcHJpdmF0ZSBTdHJpbmcgCQkJX2hlbHBlckNsYXNzTmFtZTsNCiAJ
cHJpdmF0ZSBJQ29uZmlndXJhdGlvbkVsZW1lbnQgX2hlbHBlckNsYXNzRWxlbWVudDsNCiAJcHJp
dmF0ZSBJQ29uZmlndXJhdGlvbkVsZW1lbnQgX3ZhbGlkYXRvckNsYXNzRWxlbWVudDsNCi0JcHJp
dmF0ZSBib29sZWFuIF9jYW5ub3RMb2FkID0gZmFsc2U7DQotCXByaXZhdGUgYm9vbGVhbiBtYW51
YWxWYWxpZGF0aW9uID0gdHJ1ZTsNCi0JcHJpdmF0ZSBib29sZWFuIGJ1aWxkVmFsaWRhdGlvbiA9
IHRydWU7DQotCXByaXZhdGUgTWFwIGhlbHBlcnMgPSBDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRN
YXAoIG5ldyBIYXNoTWFwKCkgKTsNCi0JcHJpdmF0ZSBFeHByZXNzaW9uIGVuYWJsZW1lbnRFeHBy
ZXNzaW9uOw0KKwlwcml2YXRlIGJvb2xlYW4gCQlfY2Fubm90TG9hZDsNCisJcHJpdmF0ZSBib29s
ZWFuIAkJX21hbnVhbFZhbGlkYXRpb24gPSB0cnVlOw0KKwlwcml2YXRlIGJvb2xlYW4gCQlfYnVp
bGRWYWxpZGF0aW9uID0gdHJ1ZTsNCisJcHJpdmF0ZSBNYXA8SVZhbGlkYXRvckpvYiwgSVdvcmti
ZW5jaENvbnRleHQ+IF9oZWxwZXJzID0gDQorCQlDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRNYXAo
IG5ldyBIYXNoTWFwPElWYWxpZGF0b3JKb2IsIElXb3JrYmVuY2hDb250ZXh0PigpICk7DQorCXBy
aXZhdGUgRXhwcmVzc2lvbiAJCV9lbmFibGVtZW50RXhwcmVzc2lvbjsNCiANCiAJVmFsaWRhdG9y
TWV0YURhdGEoKSB7DQotCQkvL2RlZmF1bHQNCiAJfQ0KIA0KIAkvKioNCkBAIC0xMDUsMjMgKzEw
NSwyMSBAQA0KIAkgKiBBZGQgdGhlIGZhY2V0ICBmaWx0ZXIocykuDQogCSAqLw0KIAlwcm90ZWN0
ZWQgdm9pZCBhZGRGYWNldEZpbHRlcnMoU3RyaW5nW10gZmlsdGVycykgew0KLQkJZmFjZXRGaWx0
ZXJzID0gZmlsdGVyczsNCisJCV9mYWNldEZpbHRlcnMgPSBmaWx0ZXJzOw0KIAl9DQogCQ0KIAlw
cm90ZWN0ZWQgU3RyaW5nW10gZ2V0RmFjZXRGaWx0ZXJzKCkgew0KLQkJcmV0dXJuIGZhY2V0Rmls
dGVyczsNCisJCXJldHVybiBfZmFjZXRGaWx0ZXJzOw0KIAl9DQogDQotCXB1YmxpYyBMaXN0IGdl
dE5hbWVGaWx0ZXJzKCkgew0KLQkJTGlzdCBuYW1lRmlsdGVycyA9IG5ldyBBcnJheUxpc3QoKTsN
CisJcHVibGljIExpc3Q8U3RyaW5nPiBnZXROYW1lRmlsdGVycygpIHsNCisJCUxpc3Q8U3RyaW5n
PiBuYW1lRmlsdGVycyA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOw0KIAkJaWYgKF9maWx0ZXJz
ICE9IG51bGwgJiYgX2ZpbHRlcnMubGVuZ3RoID4gMCkgew0KLQkJCWZvciAoaW50IGkgPSAwOyBp
IDwgX2ZpbHRlcnMubGVuZ3RoOyBpKyspIHsNCi0JCQkJVmFsaWRhdG9yRmlsdGVyIGZpbHRlciA9
IF9maWx0ZXJzW2ldOw0KKwkJCWZvciAoVmFsaWRhdG9yRmlsdGVyIGZpbHRlciA6IF9maWx0ZXJz
KSB7DQogCQkJCVZhbGlkYXRvck5hbWVGaWx0ZXIgbmFtZUZpbHRlciA9IGZpbHRlci5nZXRfbmFt
ZUZpbHRlcigpOw0KIAkJCQlpZiAobmFtZUZpbHRlciAhPSBudWxsKSB7DQogCQkJCQluYW1lRmls
dGVycy5hZGQobmFtZUZpbHRlci5nZXROYW1lRmlsdGVyKCkpOw0KIAkJCQl9DQotDQogCQkJfQ0K
IAkJfQ0KIAkJcmV0dXJuIG5hbWVGaWx0ZXJzOw0KQEAgLTQ5Myw1MSArNDkxLDM2IEBADQogCQlw
cml2YXRlIFNldCBfaWRzID0gbnVsbDsNCiANCiAJCXB1YmxpYyBNaWdyYXRpb25NZXRhRGF0YSgp
IHsNCi0JCQkvL2RlZmF1bHQNCiAJCX0NCiANCisJCUBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNr
ZWQiKQ0KIAkJcHVibGljIHZvaWQgYWRkSWQoU3RyaW5nIG9sZElkLCBTdHJpbmcgbmV3SWQpIHsN
Ci0JCQlpZiAob2xkSWQgPT0gbnVsbCkgew0KLQkJCQkvLyBsb2cNCi0JCQkJcmV0dXJuOw0KLQkJ
CX0NCi0NCi0JCQlpZiAobmV3SWQgPT0gbnVsbCkgew0KLQkJCQkvLyBsb2cNCi0JCQkJcmV0dXJu
Ow0KLQkJCX0NCisJCQlpZiAob2xkSWQgPT0gbnVsbClyZXR1cm47DQorCQkJaWYgKG5ld0lkID09
IG51bGwpcmV0dXJuOw0KIA0KIAkJCVN0cmluZ1tdIGlkcyA9IG5ldyBTdHJpbmdbXXtvbGRJZCwg
bmV3SWR9Ow0KIAkJCWdldElkcygpLmFkZChpZHMpOw0KIAkJfQ0KIA0KIAkJcHVibGljIFNldCBn
ZXRJZHMoKSB7DQotCQkJaWYgKF9pZHMgPT0gbnVsbCkgew0KLQkJCQlfaWRzID0gbmV3IEhhc2hT
ZXQoKTsNCi0JCQl9DQorCQkJaWYgKF9pZHMgPT0gbnVsbClfaWRzID0gbmV3IEhhc2hTZXQoKTsN
CiAJCQlyZXR1cm4gX2lkczsNCiAJCX0NCiAJfQ0KIA0KLQkvKioNCi0JICogQHBhcmFtIGINCi0J
ICovDQogCXB1YmxpYyB2b2lkIGFkZERlcGVuZGVudFZhbGlkYXRvcihib29sZWFuIGIpIHsNCi0J
CWRlcGVuZGVudFZhbGlkYXRvciA9IGI7DQorCQlfZGVwZW5kZW50VmFsaWRhdG9yID0gYjsNCiAJ
fQ0KIA0KLQkvKioNCi0JICogQHBhcmFtIGINCi0JICovDQogCXB1YmxpYyBib29sZWFuIGlzRGVw
ZW5kZW50VmFsaWRhdG9yKCkgew0KLQkJcmV0dXJuIGRlcGVuZGVudFZhbGlkYXRvcjsNCisJCXJl
dHVybiBfZGVwZW5kZW50VmFsaWRhdG9yOw0KIAl9DQogDQogCS8qKg0KIAkgKiBAcmV0dXJuIFJl
dHVybnMgdGhlIG1hcmtlcklkLg0KIAkgKi8NCiAJcHVibGljIFN0cmluZ1tdIGdldE1hcmtlcklk
cygpIHsNCi0JCXJldHVybiBtYXJrZXJJZHM7DQorCQlyZXR1cm4gX21hcmtlcklkczsNCiAJfQ0K
IA0KIAkvKioNCkBAIC01NDUsMjMgKzUyOCwyMyBAQA0KIAkgKiAgICAgICAgICAgIFRoZSBtYXJr
ZXJJZCB0byBzZXQuDQogCSAqLw0KIAlwdWJsaWMgdm9pZCBzZXRNYXJrZXJJZHMoU3RyaW5nW10g
bWFya2VySWQpIHsNCi0JCXRoaXMubWFya2VySWRzID0gbWFya2VySWQ7DQorCQl0aGlzLl9tYXJr
ZXJJZHMgPSBtYXJrZXJJZDsNCiAJfQ0KIA0KIAlwdWJsaWMgYm9vbGVhbiBpc0J1aWxkVmFsaWRh
dGlvbigpIHsNCi0JCXJldHVybiBidWlsZFZhbGlkYXRpb247DQorCQlyZXR1cm4gX2J1aWxkVmFs
aWRhdGlvbjsNCiAJfQ0KIA0KIAlwdWJsaWMgdm9pZCBzZXRCdWlsZFZhbGlkYXRpb24oYm9vbGVh
biBidWlsZFZhbGlkYXRpb24pIHsNCi0JCXRoaXMuYnVpbGRWYWxpZGF0aW9uID0gYnVpbGRWYWxp
ZGF0aW9uOw0KKwkJdGhpcy5fYnVpbGRWYWxpZGF0aW9uID0gYnVpbGRWYWxpZGF0aW9uOw0KIAl9
DQogDQogCXB1YmxpYyBib29sZWFuIGlzTWFudWFsVmFsaWRhdGlvbigpIHsNCi0JCXJldHVybiBt
YW51YWxWYWxpZGF0aW9uOw0KKwkJcmV0dXJuIF9tYW51YWxWYWxpZGF0aW9uOw0KIAl9DQogDQog
CXB1YmxpYyB2b2lkIHNldE1hbnVhbFZhbGlkYXRpb24oYm9vbGVhbiBtYW51YWxWYWxpZGF0aW9u
KSB7DQotCQl0aGlzLm1hbnVhbFZhbGlkYXRpb24gPSBtYW51YWxWYWxpZGF0aW9uOw0KKwkJdGhp
cy5fbWFudWFsVmFsaWRhdGlvbiA9IG1hbnVhbFZhbGlkYXRpb247DQogCX0NCiAgIA0KIAkvKioN
CkBAIC01ODgsMTUgKzU3MSwxNSBAQA0KIAl9CSAgDQogCQ0KICAgIHB1YmxpYyB2b2lkIGFkZEhl
bHBlciggSVZhbGlkYXRvckpvYiB2YWxpZGF0b3IsIElXb3JrYmVuY2hDb250ZXh0IGhlbHBlciAp
ew0KLQkgICBoZWxwZXJzLnB1dCggdmFsaWRhdG9yLCBoZWxwZXIgKTsNCisJICAgX2hlbHBlcnMu
cHV0KCB2YWxpZGF0b3IsIGhlbHBlciApOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCBy
ZW1vdmVIZWxwZXIoIElWYWxpZGF0b3JKb2IgdmFsaWRhdG9yICl7DQotCSAgIGhlbHBlcnMucmVt
b3ZlKCB2YWxpZGF0b3IgKTsNCisJICAgX2hlbHBlcnMucmVtb3ZlKCB2YWxpZGF0b3IgKTsNCiAg
ICB9DQogICAgDQogICAgcHJpdmF0ZSBJV29ya2JlbmNoQ29udGV4dCBnZXRIZWxwZXIoIElWYWxp
ZGF0b3JKb2IgdmFsaWRhdG9yICl7DQotCSAgIHJldHVybiAoSVdvcmtiZW5jaENvbnRleHQpaGVs
cGVycy5nZXQoIHZhbGlkYXRvciApOw0KKwkgICByZXR1cm4gX2hlbHBlcnMuZ2V0KCB2YWxpZGF0
b3IgKTsNCiAgICB9ICAgDQogICAgDQogICAgcHVibGljIElXb3JrYmVuY2hDb250ZXh0IGdldEhl
bHBlciggSVByb2plY3QgcHJvamVjdCwgSVZhbGlkYXRvciB2YWxpZGF0b3IgKXsNCkBAIC02MjYs
MTkgKzYwOSwxOSBAQA0KICAgIH0gICANCiAgICANCiAgICBwdWJsaWMgRXhwcmVzc2lvbiBnZXRF
bmFibGVtZW50RXhwcmVzaW9uKCkgew0KLQkJcmV0dXJuIGVuYWJsZW1lbnRFeHByZXNzaW9uOw0K
KwkJcmV0dXJuIF9lbmFibGVtZW50RXhwcmVzc2lvbjsNCiAJfQ0KIA0KICAgIHB1YmxpYyB2b2lk
IHNldEVuYWJsZW1lbnRFbGVtZW50KEV4cHJlc3Npb24gZW5hYmxlbWVudEVsZW1lbnQpIHsNCi0J
IGVuYWJsZW1lbnRFeHByZXNzaW9uID0gZW5hYmxlbWVudEVsZW1lbnQ7DQorCSBfZW5hYmxlbWVu
dEV4cHJlc3Npb24gPSBlbmFibGVtZW50RWxlbWVudDsNCiAJfQ0KIA0KIHB1YmxpYyBTdHJpbmdb
XSBnZXRDb250ZW50VHlwZUlkcygpIHsNCi0JcmV0dXJuIGNvbnRlbnRUeXBlSWRzOw0KKwlyZXR1
cm4gX2NvbnRlbnRUeXBlSWRzOw0KIH0NCiANCiBwdWJsaWMgdm9pZCBzZXRDb250ZW50VHlwZUlk
cyhTdHJpbmdbXSBjb250ZW50VHlwZUlkcykgew0KLQl0aGlzLmNvbnRlbnRUeXBlSWRzID0gY29u
dGVudFR5cGVJZHM7DQorCXRoaXMuX2NvbnRlbnRUeXBlSWRzID0gY29udGVudFR5cGVJZHM7DQog
fQ0KIA0KICANCkluZGV4OiB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRl
cm5hbC9WVGhyZWFkTWFuYWdlci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qv
d2VidG9vbHMvY29tbW9uL3BsdWdpbnMvb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24vdmFsaWRh
dGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvVlRocmVhZE1hbmFnZXIuamF2
YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMTANCmRpZmYgLXUgLXIxLjEwIFZUaHJlYWRNYW5h
Z2VyLmphdmENCi0tLSB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5h
bC9WVGhyZWFkTWFuYWdlci5qYXZhCTcgSnVuIDIwMDcgMTk6Mjg6MzYgLTAwMDAJMS4xMA0KKysr
IHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL1ZUaHJlYWRNYW5h
Z2VyLmphdmEJMTUgSmFuIDIwMDggMTc6MDI6MTUgLTAwMDANCkBAIC0xMTEsMTEgKzExMSwxMSBA
QA0KIAl9DQogDQogCXByaXZhdGUgY2xhc3MgSm9icyB7DQotCQlwcml2YXRlIFZlY3RvciBfX2pv
YnMgPSBudWxsOyAvLyBUaGUgcXVldWVkIFJ1bm5hYmxlcyB0aGF0IG5lZWQgdG8gYmUgcnVuLg0K
LQkJcHJpdmF0ZSBib29sZWFuIF9pc0FjdGl2ZSA9IGZhbHNlOyAvLyBJcyBhIGpvYiBiZWluZyBy
dW4gaW4gdGhlIHZhbGlkYXRpb24gdGhyZWFkPw0KKwkJcHJpdmF0ZSBWZWN0b3I8UnVubmFibGU+
IF9xdWV1ZWRKb2JzOyAvLyBUaGUgcXVldWVkIFJ1bm5hYmxlcyB0aGF0IG5lZWQgdG8gYmUgcnVu
Lg0KKwkJcHJpdmF0ZSBib29sZWFuIF9pc0FjdGl2ZTsgLy8gSXMgYSBqb2IgYmVpbmcgcnVuIGlu
IHRoZSB2YWxpZGF0aW9uIHRocmVhZD8NCiANCiAJCXB1YmxpYyBKb2JzKCkgew0KLQkJCV9fam9i
cyA9IG5ldyBWZWN0b3IoKTsNCisJCQlfcXVldWVkSm9icyA9IG5ldyBWZWN0b3I8UnVubmFibGU+
KCk7DQogCQl9DQogDQogCQlwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgcXVldWUoUnVubmFibGUg
cnVubmFibGUpIHsNCkBAIC0xMjUsNyArMTI1LDcgQEANCiAJCQkvLyBpbnN0ZWFkIG9mIHRoZSBs
YXN0IHN0YXRlIG9mIGNoYW5nZXMuDQogDQogCQkJLy8gSGF2ZSB0byB3YWl0IGZvciB0aGUgY3Vy
cmVudCBSdW5uYWJsZSB0byBmaW5pc2gsIHNvIGFkZCB0aGlzIHRvIHRoZSBlbmQgb2YgdGhlIHF1
ZXVlDQotCQkJX19qb2JzLmFkZChydW5uYWJsZSk7DQorCQkJX3F1ZXVlZEpvYnMuYWRkKHJ1bm5h
YmxlKTsNCiAJCQlub3RpZnlBbGwoKTsNCiAJCX0NCiANCkBAIC0xMzMsNyArMTMzLDcgQEANCiAJ
CSAqIFBvcCB0aGUgUnVubmFibGUgb2ZmIG9mIHRoZSBoZWFkIG9mIHRoZSBxdWV1ZS4NCiAJCSAq
Lw0KIAkJc3luY2hyb25pemVkIFJ1bm5hYmxlIGRlcXVldWUoKSB7DQotCQkJd2hpbGUgKF9fam9i
cy5zaXplKCkgPT0gMCkgew0KKwkJCXdoaWxlIChfcXVldWVkSm9icy5zaXplKCkgPT0gMCkgew0K
IAkJCQl0cnkgew0KIAkJCQkJd2FpdCgpOw0KIAkJCQl9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2Vw
dGlvbiBleGMpIHsNCkBAIC0xNDIsMTAgKzE0MiwxMCBAQA0KIAkJCX0gLy8gQmxvY2sgb24gdGhl
IHNlbWFwaG9yZTsgYnJlYWsgd2hlbiBhIGpvYiBoYXMgYmVlbiBhZGRlZCB0byB0aGUgcXVldWUu
DQogDQogCQkJUnVubmFibGUgam9iID0gbnVsbDsNCi0JCQlpZiAoX19qb2JzLnNpemUoKSA+IDAp
IHsNCi0JCQkJam9iID0gKFJ1bm5hYmxlKSBfX2pvYnMuZ2V0KDApOw0KKwkJCWlmIChfcXVldWVk
Sm9icy5zaXplKCkgPiAwKSB7DQorCQkJCWpvYiA9IF9xdWV1ZWRKb2JzLmdldCgwKTsNCiAJCQkJ
aWYgKGpvYiAhPSBudWxsKSB7DQotCQkJCQlfX2pvYnMucmVtb3ZlKDApOw0KKwkJCQkJX3F1ZXVl
ZEpvYnMucmVtb3ZlKDApOw0KIAkJCQl9DQogCQkJfQ0KIAkJCXJldHVybiBqb2I7DQpAQCAtMTYz
LDcgKzE2Myw3IEBADQogCQkgKiBSZXR1cm4gdHJ1ZSBpZiBhbGwgb2YgdGhlIFJ1bm5hYmxlcyBo
YXZlIGJlZW4gcnVuLg0KIAkJICovDQogCQlwdWJsaWMgc3luY2hyb25pemVkIGJvb2xlYW4gaXNE
b25lKCkgew0KLQkJCXJldHVybiAoKF9fam9icy5zaXplKCkgPT0gMCkgJiYgIWlzQWN0aXZlKCkp
Ow0KKwkJCXJldHVybiAoKF9xdWV1ZWRKb2JzLnNpemUoKSA9PSAwKSAmJiAhaXNBY3RpdmUoKSk7
DQogCQl9DQogCX0NCiB9DQpJbmRleDogdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRp
b24vaW50ZXJuYWwvVGFza0xpc3RVdGlsaXR5LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAv
Y3Zzcm9vdC93ZWJ0b29scy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlv
bi92YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9UYXNrTGlzdFV0
aWxpdHkuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMTMNCmRpZmYgLXUgLXIxLjEzIFRh
c2tMaXN0VXRpbGl0eS5qYXZhDQotLS0gdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRp
b24vaW50ZXJuYWwvVGFza0xpc3RVdGlsaXR5LmphdmEJMzAgSnVsIDIwMDcgMTk6Mjk6NDEgLTAw
MDAJMS4xMw0KKysrIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFs
L1Rhc2tMaXN0VXRpbGl0eS5qYXZhCTE1IEphbiAyMDA4IDE3OjAyOjE1IC0wMDAwDQpAQCAtNDgs
NiArNDgsNyBAQA0KIAkgKiBUaGlzIG1ldGhvZCBpcyBoZXJlIGZvciB1c2UgYnkgdGhlIFNBQkVS
IHZhbGlkYXRvcidzIHJlcG9ydGVyIGluc3RhbmNlIE9OTFkuIERvIG5vdCB1c2UuIFNlZQ0KIAkg
KiBkZWZlY3QgMjYwMTQ0IGZvciBkZXRhaWxzLg0KIAkgKi8NCisJQFN1cHByZXNzV2FybmluZ3Mo
InVuY2hlY2tlZCIpDQogCXB1YmxpYyBzdGF0aWMgSU1hcmtlciBzZXRQcmlvcml0eShJTWFya2Vy
IGl0ZW0sIGludCBwcmlvcml0eSkgdGhyb3dzIENvcmVFeGNlcHRpb24gew0KIAkJTWFwIGF0dHJp
YiA9IGl0ZW0uZ2V0QXR0cmlidXRlcygpOw0KIAkJYXR0cmliLnB1dChJTWFya2VyLlBSSU9SSVRZ
LCBuZXcgSW50ZWdlcihwcmlvcml0eSkpOw0KSW5kZXg6IHZhbGlkYXRlL29yZy9lY2xpcHNlL3dz
dC92YWxpZGF0aW9uL2ludGVybmFsL1ZhbGlkYXRpb25SZWdpc3RyeVJlYWRlci5qYXZhDQo9PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qvd2VidG9vbHMvY29tbW9uL3BsdWdpbnMvb3JnLmVj
bGlwc2Uud3N0LnZhbGlkYXRpb24vdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24v
aW50ZXJuYWwvVmFsaWRhdGlvblJlZ2lzdHJ5UmVhZGVyLmphdmEsdg0KcmV0cmlldmluZyByZXZp
c2lvbiAxLjQzDQpkaWZmIC11IC1yMS40MyBWYWxpZGF0aW9uUmVnaXN0cnlSZWFkZXIuamF2YQ0K
LS0tIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL1ZhbGlkYXRp
b25SZWdpc3RyeVJlYWRlci5qYXZhCTIwIERlYyAyMDA3IDE1OjI4OjIzIC0wMDAwCTEuNDMNCisr
KyB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9WYWxpZGF0aW9u
UmVnaXN0cnlSZWFkZXIuamF2YQkxNSBKYW4gMjAwOCAxNzowMjoxNiAtMDAwMA0KQEAgLTE0LDEw
ICsxNCwxMCBAQA0KIGltcG9ydCBqYXZhLnRleHQuTWVzc2FnZUZvcm1hdDsNCiBpbXBvcnQgamF2
YS51dGlsLkFycmF5czsNCiBpbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247DQotaW1wb3J0IGph
dmEudXRpbC5Db2xsZWN0aW9uczsNCiBpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7DQogaW1wb3J0
IGphdmEudXRpbC5IYXNoU2V0Ow0KIGltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7DQoraW1wb3J0
IGphdmEudXRpbC5NYXA7DQogaW1wb3J0IGphdmEudXRpbC5TZXQ7DQogaW1wb3J0IGphdmEudXRp
bC5TdHJpbmdUb2tlbml6ZXI7DQogaW1wb3J0IGphdmEudXRpbC5sb2dnaW5nLkxldmVsOw0KQEAg
LTczLDE0ICs3MywxOSBAQA0KICAqLw0KIHB1YmxpYyBmaW5hbCBjbGFzcyBWYWxpZGF0aW9uUmVn
aXN0cnlSZWFkZXIgaW1wbGVtZW50cyBSZWdpc3RyeUNvbnN0YW50cyB7DQogCXByaXZhdGUgc3Rh
dGljIFZhbGlkYXRpb25SZWdpc3RyeVJlYWRlciBpbnN0Ow0KLQlwcml2YXRlIEhhc2hNYXAgX3Zh
bGlkYXRvcnM7IC8vIGxpc3Qgb2YgYWxsIHZhbGlkYXRvcnMgcmVnaXN0ZXJlZCwgd2l0aCB0aGVp
ciBhc3NvY2lhdGVkDQotCS8vIFZhbGlkYXRvck1ldGFEYXRhLCBpbmRleGVkIGJ5IHByb2plY3Qg
bmF0dXJlIGlkDQotCXByaXZhdGUgSGFzaE1hcCBfaW5kZXhlZFZhbGlkYXRvcnM7IC8vIGxpc3Qg
b2YgYWxsIHZhbGlkYXRvcnMsIGluZGV4ZWQgYnkgdmFsaWRhdG9yIGNsYXNzIG5hbWUsDQorCQ0K
KwkvKiogbGlzdCBvZiBhbGwgdmFsaWRhdG9ycyByZWdpc3RlcmVkLCB3aXRoIHRoZWlyIGFzc29j
aWF0ZWQgVmFsaWRhdG9yTWV0YURhdGEsIGluZGV4ZWQgYnkgcHJvamVjdCBuYXR1cmUgaWQgKi8N
CisJcHJpdmF0ZSBNYXA8U3RyaW5nLFNldDxWYWxpZGF0b3JNZXRhRGF0YT4+IF92YWxpZGF0b3Jz
Ow0KKwkNCisJLy8gbGlzdCBvZiBhbGwgdmFsaWRhdG9ycywgaW5kZXhlZCBieSB2YWxpZGF0b3Ig
Y2xhc3MgbmFtZSwNCiAJLy8gd2l0aCB0aGUgdmFsaWRhdG9yJ3MgVmFsaWRhdG9yTWV0YURhdGEg
YXMgdGhlIHZhbHVlLg0KIAkvLyBOZWVkZWQgYnkgdGhlIFdvcmtiZW5jaFJlcG9ydGVyLCBiZWNh
dXNlIHNvbWV0aW1lcyB0aGUNCiAJLy8gSVZhbGlkYXRvciBpcyBub3QgZW5vdWdoIHRvIHJlbW92
ZSBhbGwgbWVzc2FnZXMgZnJvbSB0aGUNCiAJLy8gdGFzayBsaXN0Lg0KLQlwcml2YXRlIFNldCBf
ZGVmYXVsdEVuYWJsZWRWYWxpZGF0b3JzOw0KKwlwcml2YXRlIE1hcDxTdHJpbmcsIFZhbGlkYXRv
ck1ldGFEYXRhPiBfaW5kZXhlZFZhbGlkYXRvcnM7IA0KKwkNCisJcHJpdmF0ZSBTZXQ8VmFsaWRh
dG9yTWV0YURhdGE+IF9kZWZhdWx0RW5hYmxlZFZhbGlkYXRvcnM7DQorCQ0KIAkvLyBTaW5jZSBJ
UHJvamVjdCdzIGNvbnRlbnRzIGFyZSBhbGwgaW5zdGFuY2VzIG9mIElSZXNvdXJjZSwgZXZlcnkg
dHlwZSBmaWx0ZXIgZm9yIGEgdmFsaWRhdG9yDQogCS8vIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2Yg
SVJlc291cmNlLiBUaGlzIGFwcGxpZXMgdG8gYm90aCB0aGUgcmVidWlsZENhY2hlIHBhc3MgYW5k
IHRvIHRoZQ0KIAkvLyB2YWxpZGF0aW9uIHBhc3MuDQpAQCAtODksNyArOTQsNyBAQA0KIAlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVU5LTk9XTl9QUk9KRUNUID0gIlVOS05PV04iOyAvLyRO
T04tTkxTLTEkIC8vIFRoaXMgJ3Byb2plY3QgbmF0dXJlIGlkJyBpcyB1c2VkIGFzIGEga2V5IHRv
IGdldCB0aGUgdmFsaWRhdG9ycyB3aGljaCBjYW4gcnVuIG9uIGEgcHJvamVjdCB0eXBlIHdoaWNo
IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgZmlsdGVyZWQgaW4gb3Igb3V0IGJ5IGFueSB2YWxpZGF0
b3IuDQogCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBFWENMVURFRF9QUk9KRUNUID0gIkVY
Q0xVREVEIjsgLy8kTk9OLU5MUy0xJCAvLyBUaGlzICdwcm9qZWN0IG5hdHVyZSBpZCcgaXMgdXNl
ZCBhcyBhIGtleSB0byBnZXQgdGhlIHZhbGlkYXRvcnMgd2hpY2ggYXJlIGV4Y2x1ZGVkIG9uIGNl
cnRhaW4gcHJvamVjdHMuDQogCQ0KLQlwdWJsaWMgSGFzaE1hcCBwcm9qZWN0VmFsaWRhdGlvbk1l
dGFEYXRhOw0KKwlwdWJsaWMgSGFzaE1hcDxJUHJvamVjdCwgU2V0PFZhbGlkYXRvck1ldGFEYXRh
Pj4gcHJvamVjdFZhbGlkYXRpb25NZXRhRGF0YTsNCiANCiAJLyoqDQogCSAqIFRoZSByZWdpc3Ry
eSBpcyByZWFkIG9uY2UgLSB3aGVuIHRoaXMgY2xhc3MgaXMgaW5zdGFudGlhdGVkLg0KQEAgLTk4
LDkgKzEwMyw5IEBADQogCQlzdXBlcigpOw0KIA0KIAkJdHJ5IHsNCi0JCQlfdmFsaWRhdG9ycyA9
IG5ldyBIYXNoTWFwKCk7DQotCQkJX2luZGV4ZWRWYWxpZGF0b3JzID0gbmV3IEhhc2hNYXAoKTsN
Ci0JCQlfZGVmYXVsdEVuYWJsZWRWYWxpZGF0b3JzID0gbmV3IEhhc2hTZXQoKTsNCisJCQlfdmFs
aWRhdG9ycyA9IG5ldyBIYXNoTWFwPFN0cmluZyxTZXQ8VmFsaWRhdG9yTWV0YURhdGE+PigpOw0K
KwkJCV9pbmRleGVkVmFsaWRhdG9ycyA9IG5ldyBIYXNoTWFwPFN0cmluZywgVmFsaWRhdG9yTWV0
YURhdGE+KCk7DQorCQkJX2RlZmF1bHRFbmFibGVkVmFsaWRhdG9ycyA9IG5ldyBIYXNoU2V0PFZh
bGlkYXRvck1ldGFEYXRhPigpOw0KIA0KIAkJCS8vIFJlYWQgdGhlIHJlZ2lzdHJ5IGFuZCBidWls
ZCBhIG1hcCBvZiB2YWxpZGF0b3JzLiBUaGUga2V5IGludG8NCiAJCQkvLyB0aGUgbWFwIGlzIHRo
ZSBJVmFsaWRhdG9yIGluc3RhbmNlIGFuZCB0aGUgdmFsdWUgaXMgdGhlIFZhbGlkYXRvck1ldGFE
YXRhDQpAQCAtMTI2LDkgKzEzMSw3IEBADQogCSAqIGNyZWF0ZWQgdG8gaW5jcmVhc2UgcnVudGlt
ZSBwZXJmb3JtYW5jZS4NCiAJICovDQogCXByaXZhdGUgdm9pZCBidWlsZENhY2hlKCkgew0KLQkJ
SXRlcmF0b3IgaXRlcmF0b3IgPSBfaW5kZXhlZFZhbGlkYXRvcnMudmFsdWVzKCkuaXRlcmF0b3Io
KTsNCi0JCXdoaWxlIChpdGVyYXRvci5oYXNOZXh0KCkpIHsNCi0JCQlWYWxpZGF0b3JNZXRhRGF0
YSB2bWQgPSAoVmFsaWRhdG9yTWV0YURhdGEpIGl0ZXJhdG9yLm5leHQoKTsNCisJCWZvciAoVmFs
aWRhdG9yTWV0YURhdGEgdm1kIDogX2luZGV4ZWRWYWxpZGF0b3JzLnZhbHVlcygpKSB7DQogCQkJ
YnVpbGRQcm9qZWN0TmF0dXJlQ2FjaGUodm1kKTsNCiAJCQlidWlsZERlZmF1bHRFbmFibGVkQ2Fj
aGUodm1kKTsNCiAJCX0NCkBAIC0xMzgsNyArMTQxLDcgQEANCiAJCWFkZFJlbWFpbmRlcigpOw0K
IA0KIAkJLy8gdGhpcyB0ZW1wb3JhcnkgbGlzdCBpc24ndCBuZWVkZWQgYW55IG1vcmUuIEFsbCBv
ZiB0aGUgZXhjbHVkZWQNCi0JCS8vIHByb2plY3RzIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgcHJv
amVjdCBuYXR1cmVzIHdoaWNoIHRoZXkgZG9uJ3QgZXhsY3VkZS4NCisJCS8vIHByb2plY3RzIGhh
dmUgYmVlbiBhZGRlZCB0byB0aGUgcHJvamVjdCBuYXR1cmVzIHdoaWNoIHRoZXkgZG9uJ3QgZXhj
bHVkZS4NCiAJCV92YWxpZGF0b3JzLnJlbW92ZShFWENMVURFRF9QUk9KRUNUKTsNCiANCiAJCUxv
Z2dlciBsb2dnZXIgPSBWYWxpZGF0aW9uUGx1Z2luLmdldFBsdWdpbigpLmdldE1zZ0xvZ2dlcigp
Ow0KQEAgLTE4OSwxMyArMTkyLDkgQEANCiAJICogQnVpbGQgdGhlIGxpc3Qgb2YgdmFsaWRhdG9y
cyB3aGljaCBhcmUgZW5hYmxlZCBieSBkZWZhdWx0Lg0KIAkgKi8NCiAJcHJpdmF0ZSB2b2lkIGJ1
aWxkRGVmYXVsdEVuYWJsZWRDYWNoZShWYWxpZGF0b3JNZXRhRGF0YSB2bWQpIHsNCi0JCWlmICh2
bWQgPT0gbnVsbCkgew0KLQkJCXJldHVybjsNCi0JCX0NCisJCWlmICh2bWQgPT0gbnVsbClyZXR1
cm47DQogDQotCQlpZiAodm1kLmlzRW5hYmxlZEJ5RGVmYXVsdCgpKSB7DQotCQkJX2RlZmF1bHRF
bmFibGVkVmFsaWRhdG9ycy5hZGQodm1kKTsNCi0JCX0NCisJCWlmICh2bWQuaXNFbmFibGVkQnlE
ZWZhdWx0KCkpX2RlZmF1bHRFbmFibGVkVmFsaWRhdG9ycy5hZGQodm1kKTsNCiAJfQ0KIA0KIAkv
KioNCkBAIC0yMjksMjMgKzIyOCwyMCBAQA0KIAl9DQogDQogCXByaXZhdGUgdm9pZCBhZGRFeGNs
dWRlZFJlbWFpbmRlcigpIHsNCi0JCVNldCBleGNsdWRlZFByb2pWbWRzID0gKFNldCkgX3ZhbGlk
YXRvcnMuZ2V0KEVYQ0xVREVEX1BST0pFQ1QpOw0KKwkJU2V0PFZhbGlkYXRvck1ldGFEYXRhPiBl
eGNsdWRlZFByb2pWbWRzID0gX3ZhbGlkYXRvcnMuZ2V0KEVYQ0xVREVEX1BST0pFQ1QpOw0KIAkJ
aWYgKGV4Y2x1ZGVkUHJvalZtZHMgPT0gbnVsbCkgew0KIAkJCS8vIG5vIGV4Y2x1ZGVkIHByb2pl
Y3QgbmF0dXJlcw0KIAkJCXJldHVybjsNCiAJCX0NCiANCi0JCUl0ZXJhdG9yIGV4SXRlcmF0b3Ig
PSBleGNsdWRlZFByb2pWbWRzLml0ZXJhdG9yKCk7DQotCQl3aGlsZSAoZXhJdGVyYXRvci5oYXNO
ZXh0KCkpIHsNCi0JCQlWYWxpZGF0b3JNZXRhRGF0YSB2bWQgPSAoVmFsaWRhdG9yTWV0YURhdGEp
IGV4SXRlcmF0b3IubmV4dCgpOw0KKwkJZm9yIChWYWxpZGF0b3JNZXRhRGF0YSB2bWQgOiBleGNs
dWRlZFByb2pWbWRzKSB7DQogDQotCQkJYm9vbGVhbiBub25lSW5jbHVkZWQgPSB0cnVlOyAvLyBh
c3N1bWUgdGhhdCwgYnkgZGVmYXVsdCwgaWYgc29tZW9uZSBleHBsaWNpdGx5IGV4Y2x1ZGVzDQot
CQkJLy8gYSBwcm9qZWN0IG5hdHVyZSB0aGVuIHRoZXkgZG9uJ3QgaW5jbHVkZSBhbnkgcHJvamVj
dA0KLQkJCS8vIG5hdHVyZXMNCi0JCQlTZXQga2V5cyA9IF92YWxpZGF0b3JzLmtleVNldCgpOw0K
LQkJCUl0ZXJhdG9yIGl0ZXJhdG9yID0ga2V5cy5pdGVyYXRvcigpOw0KLQkJCXdoaWxlIChpdGVy
YXRvci5oYXNOZXh0KCkpIHsNCi0JCQkJU3RyaW5nIHByb2pJZCA9IChTdHJpbmcpIGl0ZXJhdG9y
Lm5leHQoKTsNCisJCQkvLyBhc3N1bWUgdGhhdCwgYnkgZGVmYXVsdCwgaWYgc29tZW9uZSBleHBs
aWNpdGx5IGV4Y2x1ZGVzDQorCQkJLy8gYSBwcm9qZWN0IG5hdHVyZSB0aGVuIHRoZXkgZG9uJ3Qg
aW5jbHVkZSBhbnkgcHJvamVjdCBuYXR1cmVzDQorCQkJYm9vbGVhbiBub25lSW5jbHVkZWQgPSB0
cnVlOw0KKwkJCQ0KKwkJCS8vIGEgcHJvamVjdCBuYXR1cmUgdGhlbiB0aGV5IGRvbid0IGluY2x1
ZGUgYW55IHByb2plY3QgbmF0dXJlcw0KKwkJCWZvciAoU3RyaW5nIHByb2pJZCA6IF92YWxpZGF0
b3JzLmtleVNldCgpKSB7DQogCQkJCWlmIChwcm9qSWQuZXF1YWxzKFVOS05PV05fUFJPSkVDVCkg
fHwgcHJvaklkLmVxdWFscyhFWENMVURFRF9QUk9KRUNUKSkgew0KIAkJCQkJLy8gRG9uJ3QgYWRk
IGxpc3QgdG8gYSBwcm9qZWN0IG5hdHVyZSB3aGljaCBpcyBleGNsdWRlZCBvciBhcHBsaWNhYmxl
IHRvIGFsbC4NCiAJCQkJCWNvbnRpbnVlOw0KQEAgLTI3OCwxNiArMjc0LDEzIEBADQogCX0NCiAN
CiAJcHJpdmF0ZSB2b2lkIGFkZEFueVJlbWFpbmRlcigpIHsNCi0JCVNldCBhbnlQcm9qVm1kcyA9
IChTZXQpIF92YWxpZGF0b3JzLmdldChVTktOT1dOX1BST0pFQ1QpOw0KKwkJU2V0PFZhbGlkYXRv
ck1ldGFEYXRhPiBhbnlQcm9qVm1kcyA9IF92YWxpZGF0b3JzLmdldChVTktOT1dOX1BST0pFQ1Qp
Ow0KIAkJaWYgKGFueVByb2pWbWRzID09IG51bGwpIHsNCiAJCQkvLyBubyB2YWxpZGF0b3JzIHJ1
biBvbiBhbGwgcHJvamVjdHMNCiAJCQlyZXR1cm47DQogCQl9DQogDQotCQlTZXQga2V5cyA9IF92
YWxpZGF0b3JzLmtleVNldCgpOw0KLQkJSXRlcmF0b3IgaXRlcmF0b3IgPSBrZXlzLml0ZXJhdG9y
KCk7DQotCQl3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7DQotCQkJU3RyaW5nIHByb2pJZCA9
IChTdHJpbmcpIGl0ZXJhdG9yLm5leHQoKTsNCisJCWZvciAoU3RyaW5nIHByb2pJZCA6IF92YWxp
ZGF0b3JzLmtleVNldCgpKSB7DQogCQkJaWYgKHByb2pJZC5lcXVhbHMoVU5LTk9XTl9QUk9KRUNU
KSB8fCBwcm9qSWQuZXF1YWxzKEVYQ0xVREVEX1BST0pFQ1QpKSB7DQogCQkJCS8vIERvbid0IGFk
ZCBsaXN0IHRvIGl0c2VsZiBvciB0byBhIHByb2plY3QgbmF0dXJlIHdoaWNoIGlzIGV4Y2x1ZGVk
Lg0KIAkJCQljb250aW51ZTsNCkBAIC0yOTcsMjYgKzI5MCwyMiBAQA0KIAkJfQ0KIAl9DQogDQot
CXByaXZhdGUgdm9pZCBhZGQoU3RyaW5nIHByb2plY3ROYXR1cmVJZCwgU2V0IHZtZExpc3QpIHsN
Ci0JCWlmICgodm1kTGlzdCA9PSBudWxsKSB8fCAodm1kTGlzdC5zaXplKCkgPT0gMCkpIHsNCi0J
CQlyZXR1cm47DQotCQl9DQorCXByaXZhdGUgdm9pZCBhZGQoU3RyaW5nIHByb2plY3ROYXR1cmVJ
ZCwgU2V0PFZhbGlkYXRvck1ldGFEYXRhPiB2bWRMaXN0KSB7DQorCQlpZiAoKHZtZExpc3QgPT0g
bnVsbCkgfHwgKHZtZExpc3Quc2l6ZSgpID09IDApKXJldHVybjsNCiANCi0JCVNldCBwblZhbCA9
IGNyZWF0ZVNldChwcm9qZWN0TmF0dXJlSWQpOyAvLyB3aGV0aGVyIHRoZSB2YWxpZGF0b3IgaW5j
bHVkZXMgb3IgZXhjbHVkZXMgdGhpcw0KLQkJLy8gcHJvamVjdCBuYXR1cmUgaWQsIG1ha2Ugc3Vy
ZSB0aGF0IGFuIGVudHJ5IGlzDQotCQkvLyBjcmVhdGVkIGZvciBpdCBpbiB0aGUgdGFibGUNCisJ
CS8vIHdoZXRoZXIgdGhlIHZhbGlkYXRvciBpbmNsdWRlcyBvciBleGNsdWRlcyB0aGlzDQorCQkv
LyBwcm9qZWN0IG5hdHVyZSBpZCwgbWFrZSBzdXJlIHRoYXQgYW4gZW50cnkgaXMgY3JlYXRlZCBm
b3IgaXQgaW4gdGhlIHRhYmxlDQorCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHBuVmFsID0gY3Jl
YXRlU2V0KHByb2plY3ROYXR1cmVJZCk7IA0KIAkJcG5WYWwuYWRkQWxsKHZtZExpc3QpOw0KIAkJ
X3ZhbGlkYXRvcnMucHV0KHByb2plY3ROYXR1cmVJZCwgcG5WYWwpOw0KIAl9DQogDQogCXByaXZh
dGUgdm9pZCBhZGQoU3RyaW5nIHByb2plY3ROYXR1cmVJZCwgVmFsaWRhdG9yTWV0YURhdGEgdm1k
KSB7DQotCQlpZiAodm1kID09IG51bGwpIHsNCi0JCQlyZXR1cm47DQotCQl9DQorCQlpZiAodm1k
ID09IG51bGwpcmV0dXJuOw0KIA0KLQkJU2V0IHBuVmFsID0gY3JlYXRlU2V0KHByb2plY3ROYXR1
cmVJZCk7IC8vIHdoZXRoZXIgdGhlIHZhbGlkYXRvciBpbmNsdWRlcyBvciBleGNsdWRlcyB0aGlz
DQotCQkvLyBwcm9qZWN0IG5hdHVyZSBpZCwgbWFrZSBzdXJlIHRoYXQgYW4gZW50cnkgaXMNCi0J
CS8vIGNyZWF0ZWQgZm9yIGl0IGluIHRoZSB0YWJsZQ0KKwkJLy8gd2hldGhlciB0aGUgdmFsaWRh
dG9yIGluY2x1ZGVzIG9yIGV4Y2x1ZGVzIHRoaXMNCisJCS8vIHByb2plY3QgbmF0dXJlIGlkLCBt
YWtlIHN1cmUgdGhhdCBhbiBlbnRyeSBpcyBjcmVhdGVkIGZvciBpdCBpbiB0aGUgdGFibGUNCisJ
CVNldDxWYWxpZGF0b3JNZXRhRGF0YT4gcG5WYWwgPSBjcmVhdGVTZXQocHJvamVjdE5hdHVyZUlk
KTsgDQogCQlwblZhbC5hZGQodm1kKTsNCiAJCV92YWxpZGF0b3JzLnB1dChwcm9qZWN0TmF0dXJl
SWQsIHBuVmFsKTsNCiAJfQ0KQEAgLTMzNCwyNSArMzIzLDIxIEBADQogCQkvLyBhIGxvdCBvZiBw
cm9jZXNzaW5nIHRpbWUuLi4gSW5zdGVhZCwgdHJhdmVyc2UgdGhlIGxpc3Qgb2YgcHJvaiBuYXR1
cmUgaWRzLA0KIAkJLy8gYW5kIHNlYXJjaCB0aGUgU2V0IG9mIHRoYXQgcHJvaiBuYXR1cmUgaWQs
IGFuZCByZW1vdmUgdGhlIHZtZCBpZiBpdCdzIGluIHRoZQ0KIAkJLy8gU2V0Lg0KLQkJT2JqZWN0
W10ga2V5cyA9IF92YWxpZGF0b3JzLmtleVNldCgpLnRvQXJyYXkoKTsNCi0JCWZvciAoaW50IGkg
PSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgew0KLQkJCU9iamVjdCBrZXkgPSBrZXlzW2ldOw0K
LQkJCVNldCB2YWx1ZSA9IChTZXQpIF92YWxpZGF0b3JzLmdldChrZXkpOw0KLQkJCWlmICh2YWx1
ZSA9PSBudWxsKSB7DQotCQkJCWNvbnRpbnVlOw0KLQkJCX0NCisJCWZvciAoU3RyaW5nIHByb2pJ
ZCA6IF92YWxpZGF0b3JzLmtleVNldCgpKSB7DQorCQkJU2V0PFZhbGlkYXRvck1ldGFEYXRhPiB2
YWx1ZSA9IF92YWxpZGF0b3JzLmdldChwcm9qSWQpOw0KKwkJCWlmICh2YWx1ZSA9PSBudWxsKWNv
bnRpbnVlOw0KIA0KIAkJCWlmICh2YWx1ZS5jb250YWlucyh2bWQpKSB7DQogCQkJCXZhbHVlLnJl
bW92ZSh2bWQpOw0KLQkJCQlfdmFsaWRhdG9ycy5wdXQoa2V5LCB2YWx1ZSk7DQorCQkJCV92YWxp
ZGF0b3JzLnB1dChwcm9qSWQsIHZhbHVlKTsNCiAJCQl9DQogCQl9DQogCX0NCiANCi0JcHJpdmF0
ZSBTZXQgY3JlYXRlU2V0KFN0cmluZyBwcm9qTmF0dXJlKSB7DQotCQlTZXQgdiA9IChTZXQpIF92
YWxpZGF0b3JzLmdldChwcm9qTmF0dXJlKTsNCisJcHJpdmF0ZSBTZXQ8VmFsaWRhdG9yTWV0YURh
dGE+IGNyZWF0ZVNldChTdHJpbmcgcHJvak5hdHVyZSkgew0KKwkJU2V0PFZhbGlkYXRvck1ldGFE
YXRhPiB2ID0gX3ZhbGlkYXRvcnMuZ2V0KHByb2pOYXR1cmUpOw0KIAkJaWYgKHYgPT0gbnVsbCkg
ew0KLQkJCXYgPSBuZXcgSGFzaFNldCgpOw0KKwkJCXYgPSBuZXcgSGFzaFNldDxWYWxpZGF0b3JN
ZXRhRGF0YT4oKTsNCiAJCX0NCiAJCXJldHVybiB2Ow0KIAl9DQpAQCAtNTA1LDEyICs0OTAsMTAg
QEANCiAJCQlpZiAobG9nZ2VyLmlzTG9nZ2luZ0xldmVsKExldmVsLlNFVkVSRSkpIHsNCiAJCQkJ
TG9nRW50cnkgZW50cnkgPSBWYWxpZGF0aW9uUGx1Z2luLmdldExvZ0VudHJ5KCk7DQogCQkJCWVu
dHJ5LnNldFNvdXJjZUlEKCJWYWxpZGF0aW9uUmVnaXN0cnlSZWFkZXIuY3JlYXRlSGVscGVyKElD
b25maWd1cmF0aW9uRWxlbWVudCwgU3RyaW5nKSIpOyAvLyROT04tTkxTLTEkDQotCQkJCWVudHJ5
LnNldE1lc3NhZ2VUeXBlSWRlbnRpZmllcihSZXNvdXJjZUNvbnN0YW50cy5WQkZfRVhDX1NZTlRB
WF9OT19IRUxQRVJfVEhST1dBQkxFKTsNCiAJCQkJZW50cnkuc2V0VGFyZ2V0RXhjZXB0aW9uKGV4
Yyk7DQogCQkJCVN0cmluZyByZXN1bHQgPSBNZXNzYWdlRm9ybWF0LmZvcm1hdChSZXNvdXJjZUhh
bmRsZXIuZ2V0RXh0ZXJuYWxpemVkTWVzc2FnZShSZXNvdXJjZUNvbnN0YW50cy5WQkZfRVhDX1NZ
TlRBWF9OT19IRUxQRVJfVEhST1dBQkxFKSwgDQogCQkJCQluZXcgT2JqZWN0W117aGVscGVyQ2xh
c3NOYW1lfSk7DQogCQkJCWVudHJ5LnNldFRleHQocmVzdWx0KTsJCQkJDQotCQkJCS8vZW50cnku
c2V0VG9rZW5zKG5ldyBTdHJpbmdbXXtoZWxwZXJDbGFzc05hbWV9KTsNCiAJCQkJbG9nZ2VyLndy
aXRlKExldmVsLlNFVkVSRSwgZW50cnkpOw0KIAkJCX0NCiAJCQlyZXR1cm4gbnVsbDsNCkBAIC01
MjcsOCArNTEwLDYgQEANCiAJCQlpZiAobG9nZ2VyLmlzTG9nZ2luZ0xldmVsKExldmVsLlNFVkVS
RSkpIHsNCiAJCQkJTG9nRW50cnkgZW50cnkgPSBWYWxpZGF0aW9uUGx1Z2luLmdldExvZ0VudHJ5
KCk7DQogCQkJCWVudHJ5LnNldFNvdXJjZUlEKCJWYWxpZGF0aW9uUmVnaXN0cnlSZWFkZXIuY3Jl
YXRlVmFsaWRhdG9yKElDb25maWd1cmF0aW9uRWxlbWVudCwgU3RyaW5nLCBTdHJpbmcpIik7IC8v
JE5PTi1OTFMtMSQNCi0JCQkJZW50cnkuc2V0TWVzc2FnZVR5cGVJRChSZXNvdXJjZUNvbnN0YW50
cy5WQkZfRVhDX1NZTlRBWF9OT19WQUxfVEhST1dBQkxFKTsNCi0JCQkJLy9lbnRyeS5zZXRUb2tl
bnMobmV3IFN0cmluZ1tde3ZhbGlkYXRvckNsYXNzTmFtZX0pOw0KIAkJCQlTdHJpbmcgcmVzdWx0
ID0gTWVzc2FnZUZvcm1hdC5mb3JtYXQoUmVzb3VyY2VIYW5kbGVyLmdldEV4dGVybmFsaXplZE1l
c3NhZ2UoUmVzb3VyY2VDb25zdGFudHMuVkJGX0VYQ19TWU5UQVhfTk9fVkFMX1RIUk9XQUJMRSks
IA0KIAkJCQkJbmV3IE9iamVjdFtde3ZhbGlkYXRvckNsYXNzTmFtZX0pOw0KIAkJCQllbnRyeS5z
ZXRUZXh0KHJlc3VsdCk7CQkJCQ0KQEAgLTc5Myw4ICs3NzQsNiBAQA0KIAkJCWlmIChsb2dnZXIu
aXNMb2dnaW5nTGV2ZWwoTGV2ZWwuRklORSkpIHsNCiAJCQkJTG9nRW50cnkgZW50cnkgPSBWYWxp
ZGF0aW9uUGx1Z2luLmdldExvZ0VudHJ5KCk7DQogCQkJCWVudHJ5LnNldFNvdXJjZUlEKCJWYWxp
ZGF0aW9uUmVnaXN0cnlSZWFkZXIuZ2V0VmFsaWRhdG9yRXh0ZW5zaW9uUG9pbnQoKSIpOyAvLyRO
T04tTkxTLTEkDQotCQkJCWVudHJ5LnNldE1lc3NhZ2VUeXBlSUQoUmVzb3VyY2VDb25zdGFudHMu
VkJGX0VYQ19NSVNTSU5HX1ZBTElEQVRPUl9FUCk7DQotCQkJCS8vZW50cnkuc2V0VG9rZW5zKG5l
dyBTdHJpbmdbXXtWYWxpZGF0aW9uUGx1Z2luLlBMVUdJTl9JRCArICIuIiArIFZBTElEQVRPUl9F
WFRfUFRfSUR9KTsgLy8kTk9OLU5MUy0xJA0KIAkJCQlTdHJpbmcgcmVzdWx0ID0gTWVzc2FnZUZv
cm1hdC5mb3JtYXQoUmVzb3VyY2VIYW5kbGVyLmdldEV4dGVybmFsaXplZE1lc3NhZ2UoUmVzb3Vy
Y2VDb25zdGFudHMuVkJGX0VYQ19NSVNTSU5HX1ZBTElEQVRPUl9FUCksDQogCQkJCQkJbmV3IE9i
amVjdFtde1ZhbGlkYXRpb25QbHVnaW4uUExVR0lOX0lEICsgIi4iICsgVkFMSURBVE9SX0VYVF9Q
VF9JRH0pOyAvLyROT04tTkxTLTEkDQogCQkJCWVudHJ5LnNldFRleHQocmVzdWx0KTsJCQ0KQEAg
LTg1Miw4ICs4MzEsOCBAQA0KIAkgKiANCiAJICogVGhpcyBpcyBhIGxvbmctcnVubmluZyBwcm9j
ZXNzLiBJZiB5b3UgY2FuLCBjYWNoZSB0aGUgcmVzdWx0Lg0KIAkgKi8NCi0JcHVibGljIFNldCBn
ZXRWYWxpZGF0b3JNZXRhRGF0YShJUHJvamVjdCBwcm9qZWN0KSB7DQotCQlTZXQgY29weSA9IG5l
dyBIYXNoU2V0KCk7DQorCXB1YmxpYyBTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IGdldFZhbGlkYXRv
ck1ldGFEYXRhKElQcm9qZWN0IHByb2plY3QpIHsNCisJCVNldDxWYWxpZGF0b3JNZXRhRGF0YT4g
Y29weSA9IG5ldyBIYXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KIAkJZ2V0VmFsaWRhdG9y
TWV0YURhdGEocHJvamVjdCwgY29weSk7DQogCQlyZXR1cm4gY29weTsNCiAJfQ0KQEAgLTg2MSwx
MCArODQwLDggQEANCiAJLyoqDQogCSAqIENvcHkgdGhlIHNldCBvZiBjb25maWd1cmVkIHZhbGlk
YXRvciBtZXRhZGF0YSBpbnRvIHRoZSBTZXQuDQogCSAqLw0KLQlwdWJsaWMgdm9pZCBnZXRWYWxp
ZGF0b3JNZXRhRGF0YShJUHJvamVjdCBwcm9qZWN0LCBTZXQgdm1kcykgew0KLQkJaWYgKHZtZHMg
PT0gbnVsbCkgew0KLQkJCXJldHVybjsNCi0JCX0NCisJcHVibGljIHZvaWQgZ2V0VmFsaWRhdG9y
TWV0YURhdGEoSVByb2plY3QgcHJvamVjdCwgU2V0PFZhbGlkYXRvck1ldGFEYXRhPiB2bWRzKSB7
DQorCQlpZiAodm1kcyA9PSBudWxsKXJldHVybjsNCiAJCXZtZHMuY2xlYXIoKTsNCiAJCWludCBl
eGVjdXRpb25NYXAgPSAweDA7DQogCQlMb2dnZXIgbG9nZ2VyID0gVmFsaWRhdGlvblBsdWdpbi5n
ZXRQbHVnaW4oKS5nZXRNc2dMb2dnZXIoKTsNCkBAIC05MTIsMTAgKzg4OSw4IEBADQogCQkgICAg
ICAgIC8vICA8dGVzdCBmb3JjZVBsdWdpbkFjdGl2YXRpb249InRydWUiIHByb3BlcnR5PSJmb28u
dGVzdFByb3BlcnR5Ii8+DQogCQkgICAgICAgIC8vIDwvZW5hYmxlbWVudD4gDQogCQkJCQ0KLQkJ
CQlTZXQgdmFsaWRhdG9yc1dpdGhFbmFibGVtZW50RXhwcmVzc2lvbiA9IG5ldyBIYXNoU2V0KCk7
DQotCQkJCUl0ZXJhdG9yIGFsbFZhbGlkYXRvcnMgPSBnZXRBbGxWYWxpZGF0b3JzKCkuaXRlcmF0
b3IoKTsNCi0JCQkJd2hpbGUgKGFsbFZhbGlkYXRvcnMuaGFzTmV4dCgpKSB7DQotCQkJCQlWYWxp
ZGF0b3JNZXRhRGF0YSB2bWQgPSAoVmFsaWRhdG9yTWV0YURhdGEpIGFsbFZhbGlkYXRvcnMubmV4
dCgpOw0KKwkJCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHZhbGlkYXRvcnNXaXRoRW5hYmxlbWVu
dEV4cHJlc3Npb24gPSBuZXcgSGFzaFNldDxWYWxpZGF0b3JNZXRhRGF0YT4oKTsNCisJCQkJZm9y
IChWYWxpZGF0b3JNZXRhRGF0YSB2bWQgOiBnZXRBbGxWYWxpZGF0b3JzKCkpIHsNCiAJCQkJCWlm
IChpc0ZhY2V0RW5hYmxlZCh2bWQsIHByb2plY3QpKSB7DQogCQkJCQkJdmFsaWRhdG9yc1dpdGhF
bmFibGVtZW50RXhwcmVzc2lvbi5hZGQodm1kKTsNCiAJCQkJCX0NCkBAIC05NjksMzEgKzk0NCwy
MiBAQA0KIAkgKiBAcGFyYW0gdm1kcw0KIAkgKiBAcGFyYW0gcHJvamVjdE5hdHVyZXMNCiAJICov
DQotCXByaXZhdGUgdm9pZCBjYWxjdWxhdGVWbWRzRm9yTmF0dXJlQW5kRmFjZXRzKFNldCB2bWRz
LCBTdHJpbmdbXSBwcm9qZWN0TmF0dXJlcywgSVByb2plY3QgcHJvamVjdCkgew0KLQkJU2V0IHBy
b2pWbWRzOw0KKwlwcml2YXRlIHZvaWQgY2FsY3VsYXRlVm1kc0Zvck5hdHVyZUFuZEZhY2V0cyhT
ZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHZtZHMsIFN0cmluZ1tdIHByb2plY3ROYXR1cmVzLCBJUHJv
amVjdCBwcm9qZWN0KSB7DQorCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHByb2pWbWRzOw0KIAkJ
U3RyaW5nW10gcHJvamVjdEZhY2V0SWRzID0gZ2V0UHJvamVjdEZhY2V0SWRzKHByb2plY3QpOw0K
LQkJSXRlcmF0b3IgYWxsVmFsaWRhdG9ycyA9IGdldEFsbFZhbGlkYXRvcnMoKS5pdGVyYXRvcigp
Ow0KLQkJd2hpbGUgKGFsbFZhbGlkYXRvcnMuaGFzTmV4dCgpKSB7DQotCQkJVmFsaWRhdG9yTWV0
YURhdGEgdm1kID0gKFZhbGlkYXRvck1ldGFEYXRhKSBhbGxWYWxpZGF0b3JzLm5leHQoKTsNCisJ
CWZvciAoVmFsaWRhdG9yTWV0YURhdGEgdm1kIDogZ2V0QWxsVmFsaWRhdG9ycygpKSB7DQogCQkJ
aWYgKGNvbnRhaW5zUHJvamVjdEZhY2V0KHZtZCwgcHJvamVjdEZhY2V0SWRzKSB8fCBpc0ZhY2V0
RW5hYmxlZCh2bWQsIHByb2plY3QpKSB7DQogCQkJCXZtZHMuYWRkKHZtZCk7DQogCQkJfQ0KIAkJ
fQ0KLQkJZm9yIChpbnQgaSA9IDA7IGkgPCBwcm9qZWN0TmF0dXJlcy5sZW5ndGg7IGkrKykgew0K
LQkJCVN0cmluZyBwcm9qZWN0TmF0dXJlSWQgPSBwcm9qZWN0TmF0dXJlc1tpXTsNCi0JCQlwcm9q
Vm1kcyA9IChTZXQpIF92YWxpZGF0b3JzLmdldChwcm9qZWN0TmF0dXJlSWQpOw0KLQkJCWlmIChw
cm9qVm1kcyA9PSBudWxsKQ0KLQkJCQljb250aW51ZTsNCisJCWZvciAoU3RyaW5nIHByb2plY3RO
YXR1cmVJZCA6IHByb2plY3ROYXR1cmVzKSB7DQorCQkJcHJvalZtZHMgPSBfdmFsaWRhdG9ycy5n
ZXQocHJvamVjdE5hdHVyZUlkKTsNCisJCQlpZiAocHJvalZtZHMgPT0gbnVsbCljb250aW51ZTsN
CiANCi0JCQlJdGVyYXRvciBpdGVyYXRvciA9IHByb2pWbWRzLml0ZXJhdG9yKCk7DQotCQkJd2hp
bGUgKGl0ZXJhdG9yLmhhc05leHQoKSkgew0KLQkJCQlWYWxpZGF0b3JNZXRhRGF0YSB2bWQgPSAo
VmFsaWRhdG9yTWV0YURhdGEpIGl0ZXJhdG9yLm5leHQoKTsNCisJCQlmb3IgKFZhbGlkYXRvck1l
dGFEYXRhIHZtZCA6IHByb2pWbWRzKSB7DQogCQkJCWlmICghdm1kcy5jb250YWlucyh2bWQpICYm
ICh2bWQuZ2V0RmFjZXRGaWx0ZXJzKCkgPT0gbnVsbCB8fCB2bWQuZ2V0RmFjZXRGaWx0ZXJzKCku
bGVuZ3RoID09IDApKSB7DQotCQkJCQlpZiAodm1kLmdldEVuYWJsZW1lbnRFeHByZXNpb24oKSA9
PSBudWxsKQ0KLQkJCQkJCXZtZHMuYWRkKHZtZCk7DQotCQkJCQllbHNlIGlmIChpc0ZhY2V0RW5h
YmxlZCh2bWQsIHByb2plY3QpKQ0KLQkJCQkJCXZtZHMuYWRkKHZtZCk7DQotDQorCQkJCQlpZiAo
dm1kLmdldEVuYWJsZW1lbnRFeHByZXNpb24oKSA9PSBudWxsKXZtZHMuYWRkKHZtZCk7DQorCQkJ
CQllbHNlIGlmIChpc0ZhY2V0RW5hYmxlZCh2bWQsIHByb2plY3QpKXZtZHMuYWRkKHZtZCk7DQog
CQkJCX0NCiAJCQl9DQogCQl9DQpAQCAtMTEyMSwxNCArMTA4Nyw5IEBADQogCQl9DQogCX0NCiAN
CisJQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpDQogCXByaXZhdGUgQ29sbGVjdGlvbiBj
bG9uZShDb2xsZWN0aW9uIGlucHV0LCBDb2xsZWN0aW9uIGNvcHkpIHsNCi0JCWlmIChpbnB1dCA9
PSBudWxsKSB7DQotCQkJcmV0dXJuIG51bGw7DQotCQl9DQotDQotCQlpZiAoY29weSA9PSBudWxs
KSB7DQotCQkJcmV0dXJuIG51bGw7DQotCQl9DQorCQlpZiAoaW5wdXQgPT0gbnVsbCB8fCBjb3B5
ID09IG51bGwpcmV0dXJuIG51bGw7DQogCQljb3B5LmNsZWFyKCk7DQogCQljb3B5LmFkZEFsbChp
bnB1dCk7DQogCQlyZXR1cm4gY29weTsNCkBAIC0xMTM4LDE2ICsxMDk5LDEyIEBADQogCQlTdHJp
bmdCdWZmZXIgYnVmZmVyID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KIAkJYnVmZmVyLmFwcGVuZCgi
UHJvamVjdCBuYXR1cmUgPT4gdmFsaWRhdG9ycyBjb25maWd1cmVkIik7IC8vJE5PTi1OTFMtMSQN
CiAJCWJ1ZmZlci5hcHBlbmQoIlxuIik7IC8vJE5PTi1OTFMtMSQNCi0JCUl0ZXJhdG9yIHZpdGVy
YXRvciA9IF92YWxpZGF0b3JzLmtleVNldCgpLml0ZXJhdG9yKCk7DQotCQl3aGlsZSAodml0ZXJh
dG9yLmhhc05leHQoKSkgew0KLQkJCVN0cmluZyBwcm9qSWQgPSAoU3RyaW5nKSB2aXRlcmF0b3Iu
bmV4dCgpOw0KKwkJZm9yIChTdHJpbmcgcHJvaklkIDogX3ZhbGlkYXRvcnMua2V5U2V0KCkpIHsN
CiAJCQlidWZmZXIuYXBwZW5kKCJwcm9qSWQ6ICIpOyAvLyROT04tTkxTLTEkDQogCQkJYnVmZmVy
LmFwcGVuZChwcm9qSWQpOw0KIAkJCWJ1ZmZlci5hcHBlbmQoIlxuIik7IC8vJE5PTi1OTFMtMSQN
Ci0JCQlTZXQgdmFsaWRhdG9ycyA9IChTZXQpIF92YWxpZGF0b3JzLmdldChwcm9qSWQpOw0KLQkJ
CUl0ZXJhdG9yIGlubmVySXRlcmF0b3IgPSB2YWxpZGF0b3JzLml0ZXJhdG9yKCk7DQotCQkJd2hp
bGUgKGlubmVySXRlcmF0b3IuaGFzTmV4dCgpKSB7DQotCQkJCVZhbGlkYXRvck1ldGFEYXRhIHZt
ZCA9IChWYWxpZGF0b3JNZXRhRGF0YSkgaW5uZXJJdGVyYXRvci5uZXh0KCk7DQorCQkJU2V0PFZh
bGlkYXRvck1ldGFEYXRhPiB2YWxpZGF0b3JzID0gX3ZhbGlkYXRvcnMuZ2V0KHByb2pJZCk7DQor
CQkJZm9yIChWYWxpZGF0b3JNZXRhRGF0YSB2bWQgOiB2YWxpZGF0b3JzKSB7DQogCQkJCWJ1ZmZl
ci5hcHBlbmQoIlx0Iik7IC8vJE5PTi1OTFMtMSQNCiAJCQkJYnVmZmVyLmFwcGVuZCh2bWQuZ2V0
VmFsaWRhdG9yVW5pcXVlTmFtZSgpKTsNCiAJCQkJYnVmZmVyLmFwcGVuZCgiXG4iKTsgLy8kTk9O
LU5MUy0xJA0KQEAgLTExNTcsOSArMTExNCw3IEBADQogDQogCQlidWZmZXIuYXBwZW5kKCJFbmFi
bGUvZGlzYWJsZSB2YWxpZGF0b3IgYnkgZGVmYXVsdCIpOyAvLyROT04tTkxTLTEkDQogCQlidWZm
ZXIuYXBwZW5kKCJcbiIpOyAvLyROT04tTkxTLTEkDQotCQl2aXRlcmF0b3IgPSBfaW5kZXhlZFZh
bGlkYXRvcnMudmFsdWVzKCkuaXRlcmF0b3IoKTsNCi0JCXdoaWxlICh2aXRlcmF0b3IuaGFzTmV4
dCgpKSB7DQotCQkJVmFsaWRhdG9yTWV0YURhdGEgdm1kID0gKFZhbGlkYXRvck1ldGFEYXRhKSB2
aXRlcmF0b3IubmV4dCgpOw0KKwkJZm9yIChWYWxpZGF0b3JNZXRhRGF0YSB2bWQgOiBfaW5kZXhl
ZFZhbGlkYXRvcnMudmFsdWVzKCkpIHsNCiAJCQlidWZmZXIuYXBwZW5kKHZtZC5nZXRWYWxpZGF0
b3JVbmlxdWVOYW1lKCkpOw0KIAkJCWJ1ZmZlci5hcHBlbmQoIiBlbmFibGVkPyAiKTsgLy8kTk9O
LU5MUy0xJA0KIAkJCWJ1ZmZlci5hcHBlbmQodm1kLmlzRW5hYmxlZEJ5RGVmYXVsdCgpKTsNCkBA
IC0xMTcxLDIxICsxMTI2LDE0IEBADQogDQogCXB1YmxpYyBib29sZWFuIGlzQ29uZmlndXJlZE9u
UHJvamVjdChWYWxpZGF0b3JNZXRhRGF0YSB2bWQsIElQcm9qZWN0IHByb2plY3QpIHsNCiAJCWlm
IChwcm9qZWN0VmFsaWRhdGlvbk1ldGFEYXRhID09IG51bGwpDQotCQkJcHJvamVjdFZhbGlkYXRp
b25NZXRhRGF0YSA9IG5ldyBIYXNoTWFwKCk7DQorCQkJcHJvamVjdFZhbGlkYXRpb25NZXRhRGF0
YSA9IG5ldyBIYXNoTWFwPElQcm9qZWN0LCBTZXQ8VmFsaWRhdG9yTWV0YURhdGE+PigpOw0KIA0K
LQkJT2JqZWN0IHZtZHMgPSBwcm9qZWN0VmFsaWRhdGlvbk1ldGFEYXRhLmdldChwcm9qZWN0KTsN
CisJCVNldDxWYWxpZGF0b3JNZXRhRGF0YT4gdm1kcyA9IHByb2plY3RWYWxpZGF0aW9uTWV0YURh
dGEuZ2V0KHByb2plY3QpOw0KIAkJaWYgKHZtZHMgIT0gbnVsbCkgew0KLQkJCVNldCBwdm1kcyA9
IChTZXQpIHZtZHM7DQotCQkJcmV0dXJuIHB2bWRzLmNvbnRhaW5zKHZtZCk7DQorCQkJcmV0dXJu
IHZtZHMuY29udGFpbnModm1kKTsNCiAJCX0gZWxzZSB7DQotCQkJU2V0IHByalZtZHMgPSBnZXRW
YWxpZGF0b3JNZXRhRGF0YShwcm9qZWN0KTsNCi0JCQlpZiAocHJqVm1kcyA9PSBudWxsKSB7DQot
CQkJCXJldHVybiBmYWxzZTsNCi0JCQl9DQotDQotCQkJaWYgKHByalZtZHMuc2l6ZSgpID09IDAp
IHsNCi0JCQkJcmV0dXJuIGZhbHNlOw0KLQkJCX0NCisJCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+
IHByalZtZHMgPSBnZXRWYWxpZGF0b3JNZXRhRGF0YShwcm9qZWN0KTsNCisJCQlpZiAocHJqVm1k
cyA9PSBudWxsIHx8IHByalZtZHMuc2l6ZSgpID09IDApcmV0dXJuIGZhbHNlOw0KIAkJCXByb2pl
Y3RWYWxpZGF0aW9uTWV0YURhdGEucHV0KHByb2plY3QsIHByalZtZHMpOw0KIAkJCXJldHVybiBw
cmpWbWRzLmNvbnRhaW5zKHZtZCk7DQogCQl9DQpAQCAtMTE5OSwxMCArMTE0NywxMCBAQA0KIAkg
KiANCiAJICogQHNlZSBhZGRFeGNsdWRlZFJlbWFpbmRlcigpDQogCSAqLw0KLQlwcml2YXRlIFNl
dCBnZXRWYWxpZGF0b3JNZXRhRGF0YVVua25vd25Qcm9qZWN0KCkgew0KLQkJU2V0IHByb2pWbWRz
ID0gKFNldCkgX3ZhbGlkYXRvcnMuZ2V0KFVOS05PV05fUFJPSkVDVCk7DQorCXByaXZhdGUgU2V0
PFZhbGlkYXRvck1ldGFEYXRhPiBnZXRWYWxpZGF0b3JNZXRhRGF0YVVua25vd25Qcm9qZWN0KCkg
ew0KKwkJU2V0PFZhbGlkYXRvck1ldGFEYXRhPiBwcm9qVm1kcyA9IF92YWxpZGF0b3JzLmdldChV
TktOT1dOX1BST0pFQ1QpOw0KIAkJaWYgKHByb2pWbWRzID09IG51bGwpIHsNCi0JCQlwcm9qVm1k
cyA9IENvbGxlY3Rpb25zLkVNUFRZX1NFVDsNCisJCQlwcm9qVm1kcyA9IG5ldyBIYXNoU2V0PFZh
bGlkYXRvck1ldGFEYXRhPigpOw0KIAkJfQ0KIAkJcmV0dXJuIHByb2pWbWRzOw0KIAl9DQpAQCAt
MTIzNywxOCArMTE4NSwxMiBAQA0KIAkJCXJldHVybiBudWxsOw0KIAkJfQ0KIA0KLQkJVmFsaWRh
dG9yTWV0YURhdGEgdm1kID0gKFZhbGlkYXRvck1ldGFEYXRhKSBfaW5kZXhlZFZhbGlkYXRvcnMu
Z2V0KHZhbGlkYXRvckNsYXNzTmFtZSk7DQotCQlpZiAodm1kICE9IG51bGwpIHsNCi0JCQlyZXR1
cm4gdm1kOw0KLQkJfQ0KKwkJVmFsaWRhdG9yTWV0YURhdGEgdm1kMiA9IF9pbmRleGVkVmFsaWRh
dG9ycy5nZXQodmFsaWRhdG9yQ2xhc3NOYW1lKTsNCisJCWlmICh2bWQyICE9IG51bGwpcmV0dXJu
IHZtZDI7DQogDQogCQkvLyBDaGVjayBmb3IgYW4gYWdncmVnYXRlIHZhbGlkYXRvcg0KLQkJSXRl
cmF0b3IgaXRlcmF0b3IgPSBfaW5kZXhlZFZhbGlkYXRvcnMudmFsdWVzKCkuaXRlcmF0b3IoKTsN
Ci0JCXdoaWxlIChpdGVyYXRvci5oYXNOZXh0KCkpIHsNCi0JCQl2bWQgPSAoVmFsaWRhdG9yTWV0
YURhdGEpIGl0ZXJhdG9yLm5leHQoKTsNCi0JCQlpZiAodm1kID09IG51bGwpIHsNCi0JCQkJY29u
dGludWU7DQotCQkJfQ0KKwkJZm9yIChWYWxpZGF0b3JNZXRhRGF0YSB2bWQgOiBfaW5kZXhlZFZh
bGlkYXRvcnMudmFsdWVzKCkpIHsNCisJCQlpZiAodm1kID09IG51bGwpY29udGludWU7DQogDQog
CQkJaWYgKHZtZC5nZXRWYWxpZGF0b3JVbmlxdWVOYW1lKCkuZXF1YWxzKHZhbGlkYXRvckNsYXNz
TmFtZSkpIHsNCiAJCQkJcmV0dXJuIHZtZDsNCkBAIC0xMzIyLDcgKzEyNjQsNiBAQA0KIAkJCWlm
IChsb2dnZXIuaXNMb2dnaW5nTGV2ZWwoTGV2ZWwuRklORSkpIHsNCiAJCQkJTG9nRW50cnkgZW50
cnkgPSBWYWxpZGF0aW9uUGx1Z2luLmdldExvZ0VudHJ5KCk7DQogCQkJCWVudHJ5LnNldFNvdXJj
ZUlEKCJWYWxpZGF0aW9uUmVnaXN0cnlSZWFkZXIuaW5pdGlhbGl6ZVZhbGlkYXRvcihJQ29uZmln
dXJhdGlvbkVsZW1lbnQsIFN0cmluZywgU3RyaW5nKSIpOyAvLyROT04tTkxTLTEkDQotCQkJCWVu
dHJ5LnNldE1lc3NhZ2VUeXBlSUQoUmVzb3VyY2VDb25zdGFudHMuVkJGX0VYQ19TWU5UQVhfTk9f
VkFMX1JVTik7DQogCQkJCS8vZW50cnkuc2V0VG9rZW5zKG5ldyBTdHJpbmdbXXt2YWxpZGF0b3JO
YW1lfSk7DQogCQkJCVN0cmluZyByZXN1bHQgPSBNZXNzYWdlRm9ybWF0LmZvcm1hdChSZXNvdXJj
ZUhhbmRsZXIuZ2V0RXh0ZXJuYWxpemVkTWVzc2FnZShSZXNvdXJjZUNvbnN0YW50cy5WQkZfRVhD
X1NZTlRBWF9OT19WQUxfUlVOKSwNCiAJCQkJCQluZXcgT2JqZWN0W117dmFsaWRhdG9yTmFtZX0p
Ow0KQEAgLTE0NzYsOCArMTQxNyw2IEBADQogCQkJCQlTdHJpbmdbXSBtc2dQYXJtID0ge2V4dGVu
c2lvbi5nZXRVbmlxdWVJZGVudGlmaWVyKCl9Ow0KIAkJCQkJTG9nRW50cnkgZW50cnkgPSBWYWxp
ZGF0aW9uUGx1Z2luLmdldExvZ0VudHJ5KCk7DQogCQkJCQllbnRyeS5zZXRTb3VyY2VJRCgiVmFs
aWRhdGlvblJlZ2lzdHJ5UmVhZGVyLnJlYWRFeHRlbnNpb24oSUV4dGVuc2lvbikiKTsgLy8kTk9O
LU5MUy0xJA0KLQkJCQkJZW50cnkuc2V0TWVzc2FnZVR5cGVJRChSZXNvdXJjZUNvbnN0YW50cy5W
QkZfRVhDX1ZBTElEQVRPUk5BTUVfSVNfTlVMTCk7DQotCQkJCQkvL2VudHJ5LnNldFRva2Vucyht
c2dQYXJtKTsNCiAJCQkJCVN0cmluZyByZXN1bHQgPSBNZXNzYWdlRm9ybWF0LmZvcm1hdChSZXNv
dXJjZUhhbmRsZXIuZ2V0RXh0ZXJuYWxpemVkTWVzc2FnZShSZXNvdXJjZUNvbnN0YW50cy5WQkZf
RVhDX1ZBTElEQVRPUk5BTUVfSVNfTlVMTCksDQogCQkJCQkJCShPYmplY3RbXSltc2dQYXJtKTsN
CiAJCQkJCWVudHJ5LnNldFRleHQocmVzdWx0KTsJCQkJCQ0KQEAgLTE1MjUsNyArMTQ2NCw3IEBA
DQogCX0NCiANCiAJcHVibGljIElWYWxpZGF0b3IgZ2V0VmFsaWRhdG9yKFN0cmluZyB2YWxpZGF0
b3JDbGFzc05hbWUpIHRocm93cyBJbnN0YW50aWF0aW9uRXhjZXB0aW9uIHsNCi0JCVZhbGlkYXRv
ck1ldGFEYXRhIHZtZCA9IChWYWxpZGF0b3JNZXRhRGF0YSkgX2luZGV4ZWRWYWxpZGF0b3JzLmdl
dCh2YWxpZGF0b3JDbGFzc05hbWUpOw0KKwkJVmFsaWRhdG9yTWV0YURhdGEgdm1kID0gX2luZGV4
ZWRWYWxpZGF0b3JzLmdldCh2YWxpZGF0b3JDbGFzc05hbWUpOw0KIAkJaWYodm1kICE9IG51bGwp
DQogCQkJcmV0dXJuIHZtZC5nZXRWYWxpZGF0b3IoKTsNCiAJCXJldHVybiBudWxsOw0KSW5kZXg6
IHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL1ZhbGlkYXRpb25T
ZWxlY3Rpb25IYW5kbGVyUmVnaXN0cnlSZWFkZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6
IC9jdnNyb290L3dlYnRvb2xzL2NvbW1vbi9wbHVnaW5zL29yZy5lY2xpcHNlLndzdC52YWxpZGF0
aW9uL3ZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL1ZhbGlkYXRp
b25TZWxlY3Rpb25IYW5kbGVyUmVnaXN0cnlSZWFkZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlz
aW9uIDEuNQ0KZGlmZiAtdSAtcjEuNSBWYWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlclJlZ2lzdHJ5
UmVhZGVyLmphdmENCi0tLSB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRl
cm5hbC9WYWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlclJlZ2lzdHJ5UmVhZGVyLmphdmEJNyBKdW4g
MjAwNyAxOToyODozNiAtMDAwMAkxLjUNCisrKyB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFs
aWRhdGlvbi9pbnRlcm5hbC9WYWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlclJlZ2lzdHJ5UmVhZGVy
LmphdmEJMTUgSmFuIDIwMDggMTc6MDI6MTYgLTAwMDANCkBAIC0yNyw3ICsyNyw3IEBADQogCQ0K
IAlzdGF0aWMgZmluYWwgU3RyaW5nIEFUVF9TRUxFQ1RJT05fVFlQRSA9ICJzZWxlY3Rpb25UeXBl
IjsgLy8kTk9OLU5MUy0xJA0KIAlwcml2YXRlIHN0YXRpYyBWYWxpZGF0aW9uU2VsZWN0aW9uSGFu
ZGxlclJlZ2lzdHJ5UmVhZGVyIElOU1RBTkNFOw0KLQlwcml2YXRlIExpc3QgdmFsaWRhdGlvblNl
bGVjdGlvbkhhbmRsZXJzOw0KKwlwcml2YXRlIExpc3Q8SVZhbGlkYXRpb25TZWxlY3Rpb25IYW5k
bGVyPiBfdmFsaWRhdGlvblNlbGVjdGlvbkhhbmRsZXJzOw0KIAkNCiAJcHVibGljIFZhbGlkYXRp
b25TZWxlY3Rpb25IYW5kbGVyUmVnaXN0cnlSZWFkZXIoKSB7DQogCQlzdXBlcihWYWxpZGF0aW9u
UGx1Z2luLlBMVUdJTl9JRCwgVkFMSURBVElPTl9TRUxFQ1RJT05fSEFORExFUik7DQpAQCAtNjUs
MTkgKzY1LDE3IEBADQogCSAgIHJldHVybiBmYWxzZTsNCiAJfQ0KIAkNCi0JcHJpdmF0ZSBMaXN0
IGdldFZhbGlkYXRpb25TZWxlY3Rpb25IYW5kbGVycygpIHsNCi0JCWlmICh2YWxpZGF0aW9uU2Vs
ZWN0aW9uSGFuZGxlcnMgPT0gbnVsbCkNCi0JCQl2YWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlcnMg
PSBuZXcgQXJyYXlMaXN0KCk7DQotCQlyZXR1cm4gdmFsaWRhdGlvblNlbGVjdGlvbkhhbmRsZXJz
Ow0KKwlwcml2YXRlIExpc3Q8SVZhbGlkYXRpb25TZWxlY3Rpb25IYW5kbGVyPiBnZXRWYWxpZGF0
aW9uU2VsZWN0aW9uSGFuZGxlcnMoKSB7DQorCQlpZiAoX3ZhbGlkYXRpb25TZWxlY3Rpb25IYW5k
bGVycyA9PSBudWxsKQ0KKwkJCV92YWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlcnMgPSBuZXcgQXJy
YXlMaXN0PElWYWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlcj4oKTsNCisJCXJldHVybiBfdmFsaWRh
dGlvblNlbGVjdGlvbkhhbmRsZXJzOw0KIAl9DQogCQ0KIAlwdWJsaWMgT2JqZWN0IGdldEV4dGVu
ZGVkVHlwZShPYmplY3Qgc2VsZWN0aW9uKSB7DQogCQlPYmplY3QgcmVzdWx0ID0gbnVsbDsNCi0J
CWZvciAoaW50IGk9MDsgaTxnZXRWYWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlcnMoKS5zaXplKCk7
IGkrKyApIHsNCi0JCQlJVmFsaWRhdGlvblNlbGVjdGlvbkhhbmRsZXIgaGFuZGxlciA9IChJVmFs
aWRhdGlvblNlbGVjdGlvbkhhbmRsZXIpIGdldFZhbGlkYXRpb25TZWxlY3Rpb25IYW5kbGVycygp
LmdldChpKTsNCisJCWZvciAoSVZhbGlkYXRpb25TZWxlY3Rpb25IYW5kbGVyIGhhbmRsZXIgOiBn
ZXRWYWxpZGF0aW9uU2VsZWN0aW9uSGFuZGxlcnMoKSkgew0KIAkJCXJlc3VsdCA9IGhhbmRsZXIu
Z2V0QmFzZVZhbGlkYXRpb25UeXBlKHNlbGVjdGlvbik7DQotCQkJaWYgKHJlc3VsdCAhPSBudWxs
KQ0KLQkJCQlicmVhazsNCisJCQlpZiAocmVzdWx0ICE9IG51bGwpYnJlYWs7DQogCQl9DQogCQly
ZXR1cm4gcmVzdWx0Ow0KIAl9DQpJbmRleDogdmFsaWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlk
YXRpb24vaW50ZXJuYWwvSW50ZXJuYWxWYWxpZGF0b3JNYW5hZ2VyLmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBzZS53
c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5h
bC9JbnRlcm5hbFZhbGlkYXRvck1hbmFnZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEu
MTgNCmRpZmYgLXUgLXIxLjE4IEludGVybmFsVmFsaWRhdG9yTWFuYWdlci5qYXZhDQotLS0gdmFs
aWRhdGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvSW50ZXJuYWxWYWxpZGF0
b3JNYW5hZ2VyLmphdmEJNyBKdW4gMjAwNyAxOToyODozNiAtMDAwMAkxLjE4DQorKysgdmFsaWRh
dGUvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvSW50ZXJuYWxWYWxpZGF0b3JN
YW5hZ2VyLmphdmEJMTUgSmFuIDIwMDggMTc6MDI6MTUgLTAwMDANCkBAIC0xNCw3ICsxNCw2IEBA
DQogaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0Lkludm9jYXRpb25UYXJnZXRFeGNlcHRpb247DQog
aW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOw0KIGltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsN
Ci1pbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOw0KIGltcG9ydCBqYXZhLnV0aWwuU2V0Ow0KIGlt
cG9ydCBqYXZhLnV0aWwubG9nZ2luZy5MZXZlbDsNCiANCkBAIC01NywxNSArNTYsMTEgQEANCiAJ
LyoqDQogCSAqIFJldHVybiBhIG5ldyBTZXQgdGhhdCBjb250YWlucyBhbGwgb2YgdGhlIGVsZW1l
bnRzIGZyb20gdGhlIGFycmF5Lg0KIAkgKi8NCi0JcHVibGljIHN0YXRpYyBTZXQgd3JhcEluU2V0
KE9iamVjdFtdIG9iaikgew0KLQkJU2V0IHJlc3VsdCA9IG5ldyBIYXNoU2V0KCk7DQotCQlpZiAo
KG9iaiA9PSBudWxsKSB8fCAob2JqLmxlbmd0aCA9PSAwKSkgew0KLQkJCXJldHVybiByZXN1bHQ7
DQotCQl9DQorCXB1YmxpYyBzdGF0aWMgU2V0PFZhbGlkYXRvck1ldGFEYXRhPiB3cmFwSW5TZXQo
VmFsaWRhdG9yTWV0YURhdGFbXSB2bWRzKSB7DQorCQlTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHJl
c3VsdCA9IG5ldyBIYXNoU2V0PFZhbGlkYXRvck1ldGFEYXRhPigpOw0KKwkJaWYgKCh2bWRzID09
IG51bGwpIHx8ICh2bWRzLmxlbmd0aCA9PSAwKSlyZXR1cm4gcmVzdWx0Ow0KIA0KLQkJZm9yIChp
bnQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHsNCi0JCQlyZXN1bHQuYWRkKG9ialtpXSk7
DQotCQl9DQorCQlmb3IgKFZhbGlkYXRvck1ldGFEYXRhIHZtZCA6IHZtZHMpcmVzdWx0LmFkZCh2
bWQpOw0KIA0KIAkJcmV0dXJuIHJlc3VsdDsNCiAJfQ0KQEAgLTExMSwxMSArMTA2LDEwIEBADQog
CSAqIFJldHVybiBhbiBhcnJheSBvZiB0aGUgZnVsbHktcXVhbGlmaWVkIG5hbWVzIG9mIHRoZSB2
YWxpZGF0b3IgY2xhc3Nlcy4NCiAJICovDQogCXB1YmxpYyBTdHJpbmdbXSBnZXRWYWxpZGF0b3JO
YW1lcyhWYWxpZGF0b3JNZXRhRGF0YVtdIHZtZHMpIHsNCi0JCVNldCB0ZW1wID0gbmV3IEhhc2hT
ZXQoKTsNCi0JCWZvciAoaW50IGkgPSAwOyBpIDwgdm1kcy5sZW5ndGg7IGkrKykgew0KLQkJCVN0
cmluZ1tdIG5hbWVzID0gdm1kc1tpXS5nZXRWYWxpZGF0b3JOYW1lcygpOw0KLQkJCWZvciAoaW50
IGogPSAwOyBqIDwgbmFtZXMubGVuZ3RoOyBqKyspIHsNCi0JCQkJdGVtcC5hZGQobmFtZXNbal0p
Ow0KKwkJU2V0PFN0cmluZz4gdGVtcCA9IG5ldyBIYXNoU2V0PFN0cmluZz4oKTsNCisJCWZvciAo
VmFsaWRhdG9yTWV0YURhdGEgdm1kIDogdm1kcykgew0KKwkJCWZvciAoU3RyaW5nIG5hbWUgOiB2
bWQuZ2V0VmFsaWRhdG9yTmFtZXMoKSkgew0KKwkJCQl0ZW1wLmFkZChuYW1lKTsNCiAJCQl9DQog
CQl9DQogDQpAQCAtMTI3LDE0ICsxMjEsMTEgQEANCiAJLyoqDQogCSAqIFJldHVybiBhbiBhcnJh
eSBvZiB0aGUgZnVsbHktcXVhbGlmaWVkIG5hbWVzIG9mIHRoZSB2YWxpZGF0b3IgY2xhc3Nlcy4N
CiAJICovDQotCXB1YmxpYyBTdHJpbmdbXSBnZXRWYWxpZGF0b3JOYW1lcyhDb2xsZWN0aW9uIHZt
ZHMpIHsNCi0JCVNldCB0ZW1wID0gbmV3IEhhc2hTZXQoKTsNCi0JCUl0ZXJhdG9yIGl0ZXJhdG9y
ID0gdm1kcy5pdGVyYXRvcigpOw0KLQkJd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkgew0KLQkJ
CVZhbGlkYXRvck1ldGFEYXRhIHZtZCA9IChWYWxpZGF0b3JNZXRhRGF0YSkgaXRlcmF0b3IubmV4
dCgpOw0KLQkJCVN0cmluZ1tdIG5hbWVzID0gdm1kLmdldFZhbGlkYXRvck5hbWVzKCk7DQotCQkJ
Zm9yIChpbnQgaiA9IDA7IGogPCBuYW1lcy5sZW5ndGg7IGorKykgew0KLQkJCQl0ZW1wLmFkZChu
YW1lc1tqXSk7DQorCXB1YmxpYyBTdHJpbmdbXSBnZXRWYWxpZGF0b3JOYW1lcyhDb2xsZWN0aW9u
PFZhbGlkYXRvck1ldGFEYXRhPiB2bWRzKSB7DQorCQlTZXQ8U3RyaW5nPiB0ZW1wID0gbmV3IEhh
c2hTZXQ8U3RyaW5nPigpOw0KKwkJZm9yIChWYWxpZGF0b3JNZXRhRGF0YSB2bWQgOiB2bWRzKSB7
DQorCQkJZm9yIChTdHJpbmcgbmFtZSA6IHZtZC5nZXRWYWxpZGF0b3JOYW1lcygpKSB7DQorCQkJ
CXRlbXAuYWRkKG5hbWUpOw0KIAkJCX0NCiAJCX0NCiANCkluZGV4OiB2YWxpZGF0ZS9vcmcvZWNs
aXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9GaWx0ZXJVdGlsLmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBzZS53
c3QudmFsaWRhdGlvbi92YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5h
bC9GaWx0ZXJVdGlsLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjE3DQpkaWZmIC11IC1y
MS4xNyBGaWx0ZXJVdGlsLmphdmENCi0tLSB2YWxpZGF0ZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRh
dGlvbi9pbnRlcm5hbC9GaWx0ZXJVdGlsLmphdmEJMjAgRGVjIDIwMDcgMTU6Mjg6MjMgLTAwMDAJ
MS4xNw0KKysrIHZhbGlkYXRlL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL0Zp
bHRlclV0aWwuamF2YQkxNSBKYW4gMjAwOCAxNzowMjoxNCAtMDAwMA0KQEAgLTQ1LDkgKzQ1LDkg
QEANCiAJcHJpdmF0ZSBzdGF0aWMgVk1EUmVzb3VyY2VWaXNpdG9yIF9yZXNvdXJjZVZpc2l0b3Ig
PSBudWxsOw0KIA0KIAlwcml2YXRlIGludGVyZmFjZSBWTURSZWNvcmRlciB7DQotCQlwdWJsaWMg
TWFwIGdldFJlc3VsdCgpOw0KKwkJcHVibGljIE1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElG
aWxlRGVsdGE+PiBnZXRSZXN1bHQoKTsNCiANCi0JCXB1YmxpYyB2b2lkIHNldEVuYWJsZWRWYWxp
ZGF0b3JzKFNldCBlbmFibGVkVmFsaWRhdG9ycyk7DQorCQlwdWJsaWMgdm9pZCBzZXRFbmFibGVk
VmFsaWRhdG9ycyhTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IGVuYWJsZWRWYWxpZGF0b3JzKTsNCiAN
CiAJCXB1YmxpYyB2b2lkIHNldFByb2dyZXNzTW9uaXRvcihJUHJvZ3Jlc3NNb25pdG9yIG1vbml0
b3IpOw0KIA0KQEAgLTU1LDUzICs1NSw0MCBAQA0KIAl9DQogDQogCXByaXZhdGUgaW50ZXJmYWNl
IFZNRERlbHRhVmlzaXRvciBleHRlbmRzIFZNRFJlY29yZGVyLCBJUmVzb3VyY2VEZWx0YVZpc2l0
b3Igew0KLQkJLy9jb25zdHJ1Y3Rvcg0KIAl9DQogDQogCXByaXZhdGUgaW50ZXJmYWNlIFZNRFJl
c291cmNlVmlzaXRvciBleHRlbmRzIFZNRFJlY29yZGVyLCBJUmVzb3VyY2VWaXNpdG9yIHsNCi0J
CS8vY29uc3RydWN0b3INCiAJfQ0KIA0KLQkvKioNCi0JICogRG9uJ3QgbGV0IGFueW9uZSBjcmVh
dGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy4NCi0JICovDQogCXByaXZhdGUgRmlsdGVyVXRp
bCgpIHsNCi0JCS8vZGVmYXVsdA0KIAl9DQogDQogCS8qKg0KIAkgKiBHaXZlbiBhIFNldCBvZiBl
bmFibGVkIFZhbGlkYXRvck1ldGFEYXRhLCBjcmVhdGUgYSBNYXAgd2l0aCBlYWNoIFZhbGlkYXRv
ck1ldGFEYXRhIGFzIGEga2V5DQogCSAqIHdpdGggYW4gYXNzb2NpYXRlZCBudWxsIHZhbHVlLg0K
IAkgKi8NCi0Jc3RhdGljIE1hcCB3cmFwSW5NYXAoU2V0IGVuYWJsZWRWYWxpZGF0b3JzKSB7DQot
CQlNYXAgcmVzdWx0ID0gbmV3IEhhc2hNYXAoKTsNCi0JCWlmICgoZW5hYmxlZFZhbGlkYXRvcnMg
PT0gbnVsbCkgfHwgKGVuYWJsZWRWYWxpZGF0b3JzLnNpemUoKSA9PSAwKSkgew0KLQkJCXJldHVy
biByZXN1bHQ7DQotCQl9DQorCXN0YXRpYyBNYXA8VmFsaWRhdG9yTWV0YURhdGEsIFNldDxJRmls
ZURlbHRhPj4gd3JhcEluTWFwKFNldDxWYWxpZGF0b3JNZXRhRGF0YT4gZW5hYmxlZFZhbGlkYXRv
cnMpIHsNCisJCU1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxlRGVsdGE+PiByZXN1bHQg
PSBuZXcgSGFzaE1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxlRGVsdGE+PigpOw0KKwkJ
aWYgKChlbmFibGVkVmFsaWRhdG9ycyA9PSBudWxsKSB8fCAoZW5hYmxlZFZhbGlkYXRvcnMuc2l6
ZSgpID09IDApKXJldHVybiByZXN1bHQ7DQogDQotCQlJdGVyYXRvciBpdGVyYXRvciA9IGVuYWJs
ZWRWYWxpZGF0b3JzLml0ZXJhdG9yKCk7DQotCQl3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7
DQotCQkJcmVzdWx0LnB1dChpdGVyYXRvci5uZXh0KCksIG51bGwpOw0KLQkJfQ0KKwkJZm9yIChW
YWxpZGF0b3JNZXRhRGF0YSB2bWQgOiBlbmFibGVkVmFsaWRhdG9ycylyZXN1bHQucHV0KHZtZCwg
bnVsbCk7DQogCQlyZXR1cm4gcmVzdWx0Ow0KIAl9DQogDQogCXN0YXRpYyB2b2lkIGNoZWNrQ2Fu
Y2VsZWQoSVByb2dyZXNzTW9uaXRvciBtb25pdG9yKSB0aHJvd3MgT3BlcmF0aW9uQ2FuY2VsZWRF
eGNlcHRpb24gew0KLQkJaWYgKG1vbml0b3IgPT0gbnVsbCkgew0KLQkJCXJldHVybjsNCi0JCX0g
ZWxzZSBpZiAobW9uaXRvci5pc0NhbmNlbGVkKCkpIHsNCi0JCQl0aHJvdyBuZXcgT3BlcmF0aW9u
Q2FuY2VsZWRFeGNlcHRpb24oIiIpOyAvLyROT04tTkxTLTEkDQotCQl9DQorCQlpZiAobW9uaXRv
ciA9PSBudWxsKXJldHVybjsNCisJCWVsc2UgaWYgKG1vbml0b3IuaXNDYW5jZWxlZCgpKXRocm93
IG5ldyBPcGVyYXRpb25DYW5jZWxlZEV4Y2VwdGlvbigiIik7IC8vJE5PTi1OTFMtMSQNCiAJfQ0K
IA0KIAkvKioNCiAJICogR2l2ZW4gYSBNYXAgb2YgVk1EIDw9PlNldChJRmlsZURlbHRhKSwgZWl0
aGVyIHJldHVybiB0aGUgZXhpc3RpbmcgU2V0IG9yIGNyZWF0ZSBhIFNldCBhbmQNCiAJICogcmV0
dXJuIGl0Lg0KIAkgKi8NCi0JcHJpdmF0ZSBzdGF0aWMgU2V0IGdldFJlc291cmNlRGVsdGFzKE1h
cCBlbmFibGVkVmFsaWRhdG9ycywgVmFsaWRhdG9yTWV0YURhdGEgdm1kKSB7DQotCQlTZXQgZmls
ZURlbHRhcyA9IChTZXQpIGVuYWJsZWRWYWxpZGF0b3JzLmdldCh2bWQpOw0KKwlwcml2YXRlIHN0
YXRpYyBTZXQ8SUZpbGVEZWx0YT4gZ2V0UmVzb3VyY2VEZWx0YXMoTWFwPFZhbGlkYXRvck1ldGFE
YXRhLCBTZXQ8SUZpbGVEZWx0YT4+IGVuYWJsZWRWYWxpZGF0b3JzLCANCisJCQlWYWxpZGF0b3JN
ZXRhRGF0YSB2bWQpIHsNCisJCVNldDxJRmlsZURlbHRhPiBmaWxlRGVsdGFzID0gZW5hYmxlZFZh
bGlkYXRvcnMuZ2V0KHZtZCk7DQogCQlpZiAoZmlsZURlbHRhcyA9PSBudWxsKSB7DQotCQkJZmls
ZURlbHRhcyA9IG5ldyBIYXNoU2V0KCk7DQorCQkJZmlsZURlbHRhcyA9IG5ldyBIYXNoU2V0PElG
aWxlRGVsdGE+KCk7DQogCQkJZW5hYmxlZFZhbGlkYXRvcnMucHV0KHZtZCwgZmlsZURlbHRhcyk7
DQogCQl9DQogCQlyZXR1cm4gZmlsZURlbHRhczsNCkBAIC0xNjgsOCArMTU1LDkgQEANCiAJICog
UmV0dXJuIHRoZSB2YWxpZGF0b3JzIHdoaWNoIGFyZSBib3RoIGNvbmZpZ3VyZWQgb24gdGhpcyB0
eXBlIG9mIHByb2plY3QsIChhcyBzdG9yZWQgaW4NCiAJICogZ2V0UHJvamVjdCgpKSwgYW5kIGVu
YWJsZWQgYnkgdGhlIHVzZXIgb24gdGhpcyBwcm9qZWN0Lg0KIAkgKi8NCi0Jc3RhdGljIHZvaWQg
YWRkRmlsZURlbHRhKE1hcCBlbmFibGVkVmFsaWRhdG9ycywgVmFsaWRhdG9yTWV0YURhdGEgdm1k
LCBXb3JrYmVuY2hGaWxlRGVsdGEgZmlsZURlbHRhKSB7DQotCQlTZXQgZmlsZURlbHRhcyA9IGdl
dFJlc291cmNlRGVsdGFzKGVuYWJsZWRWYWxpZGF0b3JzLCB2bWQpOw0KKwlzdGF0aWMgdm9pZCBh
ZGRGaWxlRGVsdGEoTWFwPFZhbGlkYXRvck1ldGFEYXRhLCBTZXQ8SUZpbGVEZWx0YT4+IGVuYWJs
ZWRWYWxpZGF0b3JzLCANCisJCQlWYWxpZGF0b3JNZXRhRGF0YSB2bWQsIFdvcmtiZW5jaEZpbGVE
ZWx0YSBmaWxlRGVsdGEpIHsNCisJCVNldDxJRmlsZURlbHRhPiBmaWxlRGVsdGFzID0gZ2V0UmVz
b3VyY2VEZWx0YXMoZW5hYmxlZFZhbGlkYXRvcnMsIHZtZCk7DQogCQlmaWxlRGVsdGFzLmFkZChm
aWxlRGVsdGEpOw0KIAkJZW5hYmxlZFZhbGlkYXRvcnMucHV0KHZtZCwgZmlsZURlbHRhcyk7DQog
CX0NCkBAIC0xODEsNyArMTY5LDggQEANCiAJICogSWYgZmlsdGVySW4gaXMgdHJ1ZSwgZG8gbm90
IGNoZWNrIGlmIHRoZSByZXNvdXJjZXMgYXJlIGZpbHRlcmVkIGluIGJ5IHRoZSB2YWxpZGF0b3Iu
IElmDQogCSAqIGZpbHRlckluIGlzIGZhbHNlLCBjaGVjayBpZiB0aGUgcmVzb3VyY2VzIGFyZSBm
aWx0ZXJlZCBpbiBieSB0aGUgdmFsaWRhdG9yIChyZWNvbW1lbmRlZCkuDQogCSAqLw0KLQlwdWJs
aWMgc3RhdGljIE1hcCBnZXRGaWxlRGVsdGFzKFNldCBlbmFibGVkVmFsaWRhdG9ycywgT2JqZWN0
W10gY2hhbmdlZFJlc291cmNlcywgYm9vbGVhbiBmaWx0ZXJJbikgew0KKwlwdWJsaWMgc3RhdGlj
IE1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxlRGVsdGE+PiANCisJCWdldEZpbGVEZWx0
YXMoU2V0IGVuYWJsZWRWYWxpZGF0b3JzLCBPYmplY3RbXSBjaGFuZ2VkUmVzb3VyY2VzLCBib29s
ZWFuIGZpbHRlckluKSB7DQogCQkvLyBieSBkZWZhdWx0IGFzc3VtZSB0aGF0IHRoZSByZXNvdXJj
ZXMgaGF2ZSBjaGFuZ2VkLCBpLmUuIG5vdCBhZGRlZCBvciBkZWxldGVkDQogCQlyZXR1cm4gZ2V0
RmlsZURlbHRhcyhlbmFibGVkVmFsaWRhdG9ycywgY2hhbmdlZFJlc291cmNlcywgSUZpbGVEZWx0
YS5DSEFOR0VELCBmaWx0ZXJJbik7IA0KIAl9DQpAQCAtMTkwLDcgKzE3OSw4IEBADQogCSAqIFJl
dHVybiBhIE1hcCB3cmFwcGVyLCB3aXRoIGVhY2ggVk1EIGZyb20gZW5hYmxlZFZhbGlkYXRvcnMg
YXMgdGhlIGtleSwgYW5kIHRoZSB2YWx1ZSBhIFNldCBvZg0KIAkgKiBJRmlsZURlbHRhIHdyYXBw
ZXIgYXJvdW5kIHRoZSBjaGFuZ2VkIE9iamVjdFtdLCB3aXRoIGVhY2ggZGVsdGEgb2YgdHlwZSBk
ZWx0YVR5cGUuDQogCSAqLw0KLQlwdWJsaWMgc3RhdGljIE1hcCBnZXRGaWxlRGVsdGFzKFNldCBl
bmFibGVkVmFsaWRhdG9ycywgT2JqZWN0W10gY2hhbmdlZFJlc291cmNlcywgaW50IGlmaWxlRGVs
dGFUeXBlKSB7DQorCXB1YmxpYyBzdGF0aWMgTWFwPFZhbGlkYXRvck1ldGFEYXRhLCBTZXQ8SUZp
bGVEZWx0YT4+IA0KKwkJZ2V0RmlsZURlbHRhcyhTZXQgZW5hYmxlZFZhbGlkYXRvcnMsIE9iamVj
dFtdIGNoYW5nZWRSZXNvdXJjZXMsIGludCBpZmlsZURlbHRhVHlwZSkgew0KIAkJLy8gYnkgZGVm
YXVsdCBjaGVjayBpZiB0aGUgT2JqZWN0cyBhcmUgZmlsdGVyZWQgaW4gYnkgdGhlIHZhbGlkYXRv
cg0KIAkJcmV0dXJuIGdldEZpbGVEZWx0YXMoZW5hYmxlZFZhbGlkYXRvcnMsIGNoYW5nZWRSZXNv
dXJjZXMsIGlmaWxlRGVsdGFUeXBlLCBmYWxzZSk7IA0KIAl9DQpAQCAtMTk4LDEzICsxODgsMTMg
QEANCiAJLyoqDQogCSAqIFJldHVybiBhIE1hcCB3cmFwcGVyLCB3aXRoIGVhY2ggVk1EIGZyb20g
ZW5hYmxlZFZhbGlkYXRvcnMgYXMgdGhlIGtleSwgYW5kIHRoZSB2YWx1ZSBhIFNldCBvZg0KIAkg
KiBJRmlsZURlbHRhIHdyYXBwZXIgYXJvdW5kIHRoZSBjaGFuZ2VkIE9iamVjdFtdLg0KLQkgKiAN
CisJICogPHA+DQogCSAqIElmICJmb3JjZSIgaXMgdHJ1ZSwgdGhlbiBkb24ndCBjaGVjayBpZiB0
aGUgb2JqZWN0IGlzIGZpbHRlcmVkIGluIGJ5IHRoZSB2YWxpZGF0b3Igb3Igbm90Lg0KIAkgKiBW
YWxpZGF0b3JTdWJzZXRPcGVyYXRpb24gY2FuIHVzZSB2YWxpZGF0b3JzIHRoYXQgZG9uJ3QgZmls
dGVyIGluIHRoZXNlIHBhcnRpY3VsYXIgcmVzb3VyY2VzLA0KIAkgKiBidXQgY2FuIHVzZSBhIGRl
ZmF1bHRFeHRlbnNpb24ncyB2YWxpZGF0b3JzIGluc3RlYWQuDQogCSAqLw0KLQlwdWJsaWMgc3Rh
dGljIE1hcCBnZXRGaWxlRGVsdGFzKFNldCBlbmFibGVkVmFsaWRhdG9ycywgT2JqZWN0W10gY2hh
bmdlZFJlc291cmNlcywgaW50IGlmaWxlRGVsdGFUeXBlLCBib29sZWFuIGZvcmNlKSB7DQotCQlN
YXAgcmVzdWx0ID0gbmV3IEhhc2hNYXAoKTsNCisJcHVibGljIHN0YXRpYyBNYXA8VmFsaWRhdG9y
TWV0YURhdGEsIFNldDxJRmlsZURlbHRhPj4gZ2V0RmlsZURlbHRhcyhTZXQgZW5hYmxlZFZhbGlk
YXRvcnMsIE9iamVjdFtdIGNoYW5nZWRSZXNvdXJjZXMsIGludCBpZmlsZURlbHRhVHlwZSwgYm9v
bGVhbiBmb3JjZSkgew0KKwkJTWFwPFZhbGlkYXRvck1ldGFEYXRhLCBTZXQ8SUZpbGVEZWx0YT4+
IHJlc3VsdCA9IG5ldyBIYXNoTWFwPFZhbGlkYXRvck1ldGFEYXRhLCBTZXQ8SUZpbGVEZWx0YT4+
KCk7DQogCQlpZiAoKGVuYWJsZWRWYWxpZGF0b3JzID09IG51bGwpIHx8IChlbmFibGVkVmFsaWRh
dG9ycy5zaXplKCkgPT0gMCkpIHsNCiAJCQlyZXR1cm4gcmVzdWx0Ow0KIAkJfQ0KQEAgLTIxNSw3
ICsyMDUsNyBAQA0KIAkJd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkgew0KIAkJCVZhbGlkYXRv
ck1ldGFEYXRhIHZtZCA9IChWYWxpZGF0b3JNZXRhRGF0YSkgaXRlcmF0b3IubmV4dCgpOw0KIAkJ
CXRyeSB7DQotCQkJCVNldCBkZWx0YXMgPSBuZXcgSGFzaFNldCgpOw0KKwkJCQlTZXQ8SUZpbGVE
ZWx0YT4gZGVsdGFzID0gbmV3IEhhc2hTZXQ8SUZpbGVEZWx0YT4oKTsNCiAJCQkJSVByb2dyZXNz
TW9uaXRvciBtb25pdG9yID0gbmV3IE51bGxQcm9ncmVzc01vbml0b3IoKTsNCiAJCQkJZm9yIChp
bnQgaSA9IDA7IGkgPCBjaGFuZ2VkUmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7DQogCQkJCQlPYmpl
Y3Qgb2JqID0gY2hhbmdlZFJlc291cmNlc1tpXTsNCkBAIC0yNjcsNyArMjU3LDYgQEANCiAJCQl9
DQogCQl9DQogDQotDQogCQlyZXR1cm4gcmVzdWx0Ow0KIAl9DQogDQpAQCAtMjgxLDcgKzI3MCw2
IEBADQogCQkJaWYgKGxvZ2dlci5pc0xvZ2dpbmdMZXZlbChMZXZlbC5TRVZFUkUpKSB7DQogCQkJ
CUxvZ0VudHJ5IGVudHJ5ID0gVmFsaWRhdGlvblBsdWdpbi5nZXRMb2dFbnRyeSgpOw0KIAkJCQll
bnRyeS5zZXRTb3VyY2VJRCgiRmlsdGVyVXRpbDo6Z2V0RmlsZURlbHRhKElXb3JrYmVuY2hDb250
ZXh0LCBWYWxpZGF0b3JNZXRhRGF0YSwgSVJlc291cmNlLCBpbnQpIik7IC8vJE5PTi1OTFMtMSQN
Ci0JCQkJZW50cnkuc2V0TWVzc2FnZVR5cGVJRChSZXNvdXJjZUNvbnN0YW50cy5WQkZfRVhDX1NZ
TlRBWF9OVUxMX05BTUUpOw0KIAkJCQlTdHJpbmcgcmVzdWx0ID0gTWVzc2FnZUZvcm1hdC5mb3Jt
YXQoUmVzb3VyY2VIYW5kbGVyLmdldEV4dGVybmFsaXplZE1lc3NhZ2UoUmVzb3VyY2VDb25zdGFu
dHMuVkJGX0VYQ19TWU5UQVhfTlVMTF9OQU1FKSwgDQogCQkJCQluZXcgT2JqZWN0W117cmVzb3Vy
Y2UuZ2V0TmFtZSgpLCB2bWQuZ2V0VmFsaWRhdG9yRGlzcGxheU5hbWUoKX0pOw0KIAkJCQllbnRy
eS5zZXRUZXh0KHJlc3VsdCk7DQpAQCAtMzE0LDcgKzMwMiw3IEBADQogCSAqIEFkZCB0aGUgSVJl
c291cmNlIHRvIHRoZSB2bWQncyBsaXN0IG9mIHJlc291cmNlcyB0byB2YWxpZGF0ZS4gUmV0dXJu
IHRydWUgaWYgdGhlIGFkZCB3YXMNCiAJICogc3VjY2Vzc2Z1bCBvciBmYWxzZSBpZiB0aGUgYWRk
IHdhcyBub3Qgc3VjY2Vzc2Z1bC4NCiAJICovDQotCXN0YXRpYyBib29sZWFuIGFkZFRvRmlsZUxp
c3QoTWFwIGVuYWJsZWRWYWxpZGF0b3JzLCBJV29ya2JlbmNoQ29udGV4dCBoZWxwZXIsIFZhbGlk
YXRvck1ldGFEYXRhIHZtZCwgSVJlc291cmNlIHJlc291cmNlLCBpbnQgcmVzb3VyY2VEZWx0YSwg
Ym9vbGVhbiBpc0Z1bGxCdWlsZCkgew0KKwlzdGF0aWMgYm9vbGVhbiBhZGRUb0ZpbGVMaXN0KE1h
cDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxlRGVsdGE+PiBlbmFibGVkVmFsaWRhdG9ycywg
SVdvcmtiZW5jaENvbnRleHQgaGVscGVyLCBWYWxpZGF0b3JNZXRhRGF0YSB2bWQsIElSZXNvdXJj
ZSByZXNvdXJjZSwgaW50IHJlc291cmNlRGVsdGEsIGJvb2xlYW4gaXNGdWxsQnVpbGQpIHsNCiAJ
CWlmICgodm1kID09IG51bGwpIHx8IChyZXNvdXJjZSA9PSBudWxsKSkgew0KIAkJCXJldHVybiBm
YWxzZTsNCiAJCX0NCkBAIC0zOTcsMTAgKzM4NSw4IEBADQogCSAqIGNvbXBsZXRpb24gb2YgdGhl
IDxjb2RlPnZhbGlkYXRlPC9jb2RlPiksIGluY3JlbWVudCB0aGUgSVByb2dyZXNzTW9uaXRvcidz
IHN0YXR1cyBieSBvbmUNCiAJICogKGkuZS4sIG9uZSByZXNvdXJjZSBoYXMgYmVlbiBwcm9jZXNz
ZWQuKQ0KIAkgKi8NCi0Jc3RhdGljIHZvaWQgZmlsdGVyT3V0KElQcm9ncmVzc01vbml0b3IgbW9u
aXRvciwgTWFwIGVuYWJsZWRWYWxpZGF0b3JzLCBJUmVzb3VyY2UgcmVzb3VyY2UsIGludCByZXNv
dXJjZURlbHRhLCBib29sZWFuIGlzRnVsbEJ1aWxkKSB7DQotCQlpZiAobW9uaXRvciA9PSBudWxs
KSB7DQotCQkJcmV0dXJuOw0KLQkJfQ0KKwlzdGF0aWMgdm9pZCBmaWx0ZXJPdXQoSVByb2dyZXNz
TW9uaXRvciBtb25pdG9yLCBNYXA8VmFsaWRhdG9yTWV0YURhdGEsIFNldDxJRmlsZURlbHRhPj4g
ZW5hYmxlZFZhbGlkYXRvcnMsIElSZXNvdXJjZSByZXNvdXJjZSwgaW50IHJlc291cmNlRGVsdGEs
IGJvb2xlYW4gaXNGdWxsQnVpbGQpIHsNCisJCWlmIChtb25pdG9yID09IG51bGwpcmV0dXJuOw0K
IA0KIAkJY2hlY2tDYW5jZWxlZChtb25pdG9yKTsNCiANCkBAIC00NzAsMTIgKzQ1NiwxMiBAQA0K
IAkgKiBjb21wbGV0aW9uIG9mIHRoZSA8Y29kZT52YWxpZGF0ZTwvY29kZT4pLCBpbmNyZW1lbnQg
dGhlIElQcm9ncmVzc01vbml0b3IncyBzdGF0dXMgYnkgb25lDQogCSAqIChpLmUuLCBvbmUgcmVz
b3VyY2UgaGFzIGJlZW4gcHJvY2Vzc2VkLikNCiAJICovDQotCXN0YXRpYyB2b2lkIGZpbHRlck91
dChJUHJvZ3Jlc3NNb25pdG9yIG1vbml0b3IsIE1hcCBlbmFibGVkVmFsaWRhdG9ycywgSVJlc291
cmNlIHJlc291cmNlLCBJUmVzb3VyY2VEZWx0YSBkZWx0YSkgew0KKwlzdGF0aWMgdm9pZCBmaWx0
ZXJPdXQoSVByb2dyZXNzTW9uaXRvciBtb25pdG9yLCBNYXA8VmFsaWRhdG9yTWV0YURhdGEsIFNl
dDxJRmlsZURlbHRhPj4gZW5hYmxlZFZhbGlkYXRvcnMsIA0KKwkJCUlSZXNvdXJjZSByZXNvdXJj
ZSwgSVJlc291cmNlRGVsdGEgZGVsdGEpIHsNCiAJCS8vIGZpbHRlciBpbiBvbmx5IHJlc291cmNl
cyB3aGljaCBoYXZlIGJlZW4gYWRkZWQsIGRlbGV0ZWQsIG9yIGl0cyBjb250ZW50IGNoYW5nZWQu
DQogCQkvLyBtb3ZlcyB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYW4gYWRkICYgZGVsZXRlIGNvbWJp
bmF0aW9uDQotCQlpZiAoZmlsdGVyT3V0KGRlbHRhKSkgew0KLQkJCXJldHVybjsNCi0JCX0NCisJ
CWlmIChmaWx0ZXJPdXQoZGVsdGEpKXJldHVybjsNCisJCQ0KIAkJZmlsdGVyT3V0KG1vbml0b3Is
IGVuYWJsZWRWYWxpZGF0b3JzLCByZXNvdXJjZSwgZGVsdGEuZ2V0S2luZCgpLCBmYWxzZSk7IC8v
IGZhbHNlID0NCiAJCS8vIGluY3JlbWVudGFsDQogCQkvLyBidWlsZA0KQEAgLTU5MSwxNyArNTc3
LDE3IEBADQogCQlyZXR1cm4gdHJ1ZTsNCiAJfQ0KIA0KLQlwcml2YXRlIHN0YXRpYyBWTURSZXNv
dXJjZVZpc2l0b3IgZ2V0UmVzb3VyY2VWaXNpdG9yKElQcm9ncmVzc01vbml0b3IgbW9uaXRvciwg
U2V0IGVuYWJsZWRWYWxpZGF0b3JzKSB7DQorCXByaXZhdGUgc3RhdGljIFZNRFJlc291cmNlVmlz
aXRvciBnZXRSZXNvdXJjZVZpc2l0b3IoSVByb2dyZXNzTW9uaXRvciBtb25pdG9yLCBTZXQ8VmFs
aWRhdG9yTWV0YURhdGE+IGVuYWJsZWRWYWxpZGF0b3JzKSB7DQogCQlpZiAoX3Jlc291cmNlVmlz
aXRvciA9PSBudWxsKSB7DQogCQkJX3Jlc291cmNlVmlzaXRvciA9IG5ldyBWTURSZXNvdXJjZVZp
c2l0b3IoKSB7DQotCQkJCXByaXZhdGUgTWFwIF92bWREZWx0YXMgPSBudWxsOw0KKwkJCQlwcml2
YXRlIE1hcDxWYWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxlRGVsdGE+PiBfdm1kRGVsdGFzID0g
bnVsbDsNCiAJCQkJcHJpdmF0ZSBJUHJvZ3Jlc3NNb25pdG9yIF9wcm9ncmVzc01vbml0b3IgPSBu
dWxsOw0KIA0KLQkJCQlwdWJsaWMgTWFwIGdldFJlc3VsdCgpIHsNCisJCQkJcHVibGljIE1hcDxW
YWxpZGF0b3JNZXRhRGF0YSwgU2V0PElGaWxlRGVsdGE+PiBnZXRSZXN1bHQoKSB7DQogCQkJCQly
ZXR1cm4gX3ZtZERlbHRhczsNCiAJCQkJfQ0KIA0KLQkJCQlwdWJsaWMgdm9pZCBzZXRFbmFibGVk
VmFsaWRhdG9ycyhTZXQgdmFsaWRhdG9ycykgew0KKwkJCQlwdWJsaWMgdm9pZCBzZXRFbmFibGVk
VmFsaWRhdG9ycyhTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IHZhbGlkYXRvcnMpIHsNCiAJCQkJCV92
bWREZWx0YXMgPSB3cmFwSW5NYXAodmFsaWRhdG9ycyk7DQogCQkJCX0NCiANCkBAIC02MzAsMTcg
KzYxNiwxNyBAQA0KIAkJcmV0dXJuIF9yZXNvdXJjZVZpc2l0b3I7DQogCX0NCiANCi0JcHJpdmF0
ZSBzdGF0aWMgVk1ERGVsdGFWaXNpdG9yIGdldERlbHRhVmlzaXRvcihJUHJvZ3Jlc3NNb25pdG9y
IG1vbml0b3IsIFNldCBlbmFibGVkVmFsaWRhdG9ycykgew0KKwlwcml2YXRlIHN0YXRpYyBWTURE
ZWx0YVZpc2l0b3IgZ2V0RGVsdGFWaXNpdG9yKElQcm9ncmVzc01vbml0b3IgbW9uaXRvciwgU2V0
PFZhbGlkYXRvck1ldGFEYXRhPiBlbmFibGVkVmFsaWRhdG9ycykgew0KIAkJaWYgKF9kZWx0YVZp
c2l0b3IgPT0gbnVsbCkgew0KIAkJCV9kZWx0YVZpc2l0b3IgPSBuZXcgVk1ERGVsdGFWaXNpdG9y
KCkgew0KLQkJCQlwcml2YXRlIE1hcCBfdm1kRGVsdGFzID0gbnVsbDsNCisJCQkJcHJpdmF0ZSBN
YXA8VmFsaWRhdG9yTWV0YURhdGEsIFNldDxJRmlsZURlbHRhPj4gX3ZtZERlbHRhcyA9IG51bGw7
DQogCQkJCXByaXZhdGUgSVByb2dyZXNzTW9uaXRvciBfcHJvZ3Jlc3NNb25pdG9yID0gbnVsbDsN
CiANCi0JCQkJcHVibGljIE1hcCBnZXRSZXN1bHQoKSB7DQorCQkJCXB1YmxpYyBNYXA8VmFsaWRh
dG9yTWV0YURhdGEsIFNldDxJRmlsZURlbHRhPj4gZ2V0UmVzdWx0KCkgew0KIAkJCQkJcmV0dXJu
IF92bWREZWx0YXM7DQogCQkJCX0NCiANCi0JCQkJcHVibGljIHZvaWQgc2V0RW5hYmxlZFZhbGlk
YXRvcnMoU2V0IHZhbGlkYXRvcnMpIHsNCisJCQkJcHVibGljIHZvaWQgc2V0RW5hYmxlZFZhbGlk
YXRvcnMoU2V0PFZhbGlkYXRvck1ldGFEYXRhPiB2YWxpZGF0b3JzKSB7DQogCQkJCQlfdm1kRGVs
dGFzID0gd3JhcEluTWFwKHZhbGlkYXRvcnMpOw0KIAkJCQl9DQogDQpAQCAtNjk1LDEzICs2ODEs
MTUgQEANCiAJCXJldHVybiBfZGVsdGFWaXNpdG9yOw0KIAl9DQogDQotCXB1YmxpYyBzdGF0aWMg
TWFwIGxvYWREZWx0YXMoZmluYWwgSVByb2dyZXNzTW9uaXRvciBtb25pdG9yLCBmaW5hbCBTZXQg
ZW5hYmxlZFZhbGlkYXRvcnMsIElSZXNvdXJjZURlbHRhIGRlbHRhKSB0aHJvd3MgQ29yZUV4Y2Vw
dGlvbiB7DQorCXB1YmxpYyBzdGF0aWMgTWFwPFZhbGlkYXRvck1ldGFEYXRhLCBTZXQ8SUZpbGVE
ZWx0YT4+IGxvYWREZWx0YXMoZmluYWwgSVByb2dyZXNzTW9uaXRvciBtb25pdG9yLCANCisJCQlm
aW5hbCBTZXQ8VmFsaWRhdG9yTWV0YURhdGE+IGVuYWJsZWRWYWxpZGF0b3JzLAlJUmVzb3VyY2VE
ZWx0YSBkZWx0YSkgdGhyb3dzIENvcmVFeGNlcHRpb24gew0KIAkJVk1ERGVsdGFWaXNpdG9yIHZp
c2l0b3IgPSBnZXREZWx0YVZpc2l0b3IobW9uaXRvciwgZW5hYmxlZFZhbGlkYXRvcnMpOw0KIAkJ
ZGVsdGEuYWNjZXB0KHZpc2l0b3IsIHRydWUpOyAvLyB0cnVlIG1lYW5zIGluY2x1ZGUgcGhhbnRv
bSByZXNvdXJjZXMNCiAJCXJldHVybiB2aXNpdG9yLmdldFJlc3VsdCgpOw0KIAl9DQogDQotCXB1
YmxpYyBzdGF0aWMgTWFwIGxvYWREZWx0YXMoZmluYWwgSVByb2dyZXNzTW9uaXRvciBtb25pdG9y
LCBmaW5hbCBTZXQgZW5hYmxlZFZhbGlkYXRvcnMsIElQcm9qZWN0IHByb2plY3QpIHRocm93cyBD
b3JlRXhjZXB0aW9uIHsNCisJcHVibGljIHN0YXRpYyBNYXA8VmFsaWRhdG9yTWV0YURhdGEsIFNl
dDxJRmlsZURlbHRhPj4gbG9hZERlbHRhcyhmaW5hbCBJUHJvZ3Jlc3NNb25pdG9yIG1vbml0b3Is
IA0KKwkJCWZpbmFsIFNldDxWYWxpZGF0b3JNZXRhRGF0YT4gZW5hYmxlZFZhbGlkYXRvcnMsCUlQ
cm9qZWN0IHByb2plY3QpIHRocm93cyBDb3JlRXhjZXB0aW9uIHsNCiAJCVZNRFJlc291cmNlVmlz
aXRvciB2aXNpdG9yID0gZ2V0UmVzb3VyY2VWaXNpdG9yKG1vbml0b3IsIGVuYWJsZWRWYWxpZGF0
b3JzKTsNCiAJCXByb2plY3QuYWNjZXB0KHZpc2l0b3IsIElSZXNvdXJjZS5ERVBUSF9JTkZJTklU
RSwgdHJ1ZSk7IC8vIHRydWUgbWVhbnMgaW5jbHVkZSBwaGFudG9tDQogCQkvLyByZXNvdXJjZXMN
CkluZGV4OiByZW1pbmRlcnMudHh0DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qvd2Vi
dG9vbHMvY29tbW9uL3BsdWdpbnMvb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24vcmVtaW5kZXJz
LnR4dCx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQ0KZGlmZiAtdSAtcjEuMSByZW1pbmRlcnMu
dHh0DQotLS0gcmVtaW5kZXJzLnR4dAkxOSBEZWMgMjAwNyAxNTo1NDo1NCAtMDAwMAkxLjENCisr
KyByZW1pbmRlcnMudHh0CTE1IEphbiAyMDA4IDE3OjAyOjE0IC0wMDAwDQpAQCAtMywxMiArMyw2
IEBADQogDQogNCkgQWRkaW5nIGEgbmV3IHZhbGlkYXRvciBoYWQgbm8gZmlsdGVycywgdW50aWwg
YSByZXN0b3JlIGRlZmF1bHRzIHdhcyBmb3JjZWQuDQogNSkgSG93IGRvIHlvdSBnZXQgeW91ciBi
dWlsZGVyIGFkZGVkIHRvIGEgbmV3IHByb2plY3Q/DQotNikgU2luY2UgSSBoaWphY2tlZCBjb2x1
bW4gMywgd2hhdCBzaG91bGQgSSBkbyBhYm91dCBkZWxlZ2F0aW5nIHZhbGlkYXRvcnM/DQotLSBJ
ZiBpdCBpcyBhbiBvbGQgdmFsaWRhdG9yIGNhbGwgdGhlIG9sZCBkaWFsb2cNCi0tIElmIGl0IGlz
IGEgbmV3IHZhbGlkYXRvciwgYWRkIGEgY29tYm8gYm94IHRvIHRoZSBzZXR0aW5ncyBwYWdlDQot
LSBOb3RlIC0gdGhlIGRlbGVnYXRpbmcgRVAgaGFzIGEgdGFyZ2V0LCB3aGljaCBpcyByZWFsbHkg
bm8gbW9yZSB0aGFuIGEgbmFtZSwgYW5kIGEgY2xhc3Mgd2hpY2ggaXMgd2hhdCByZWFsbHkgZ2V0
cw0KLXNlbGVjdGVkLCBhbmQgdGhlbiBjYWxsZWQuIEluIHRoZSBjYXNlIG9mIHRoZSBYU0QgdmFs
aWRhdG9yLCB0aGUgdGFyZ2V0IGlzIFhTRERlbGVnYXRpbmdWYWxpZGF0b3IuIChUaGlzIHBob25l
eQ0KLXRhcmdldCBpcyB3aGF0IHlvdSBhZGQgeW91ciBmaWx0ZXJzIHRvKQ0KIA0KIFJlbWVtYmVy
IHRvIGRlbGV0ZSB0aGlzIGZpbGUgd2hlbiB5b3UgYXJlIGRvbmUuDQogDQpAQCAtMTksMyArMTMs
OSBAQA0KIDEpIEkgY2hhbmdlZCB0aGUgcGx1Zy1pbiB0byB1c2UgdGhlIG5ldyBFUA0KIDIpIEkg
a2VlcCB0aGUgdmFsaWRhdG9yIGFzIGltcGxlbWVudGluZyBhbiBJVmFsaWRhdG9yICh0byBtYWtl
IHNvbWUgb2YgdGhlIG90aGVyIGNhbGxzIGVhc2llcikNCiAzKSBBZGQgcHJvamVjdCBsZXZlbCBv
cHRpb25zDQorNikgU2luY2UgSSBoaWphY2tlZCBjb2x1bW4gMywgd2hhdCBzaG91bGQgSSBkbyBh
Ym91dCBkZWxlZ2F0aW5nIHZhbGlkYXRvcnM/DQorLSBJZiBpdCBpcyBhbiBvbGQgdmFsaWRhdG9y
IGNhbGwgdGhlIG9sZCBkaWFsb2cNCistIElmIGl0IGlzIGEgbmV3IHZhbGlkYXRvciwgYWRkIGEg
Y29tYm8gYm94IHRvIHRoZSBzZXR0aW5ncyBwYWdlDQorLSBOb3RlIC0gdGhlIGRlbGVnYXRpbmcg
RVAgaGFzIGEgdGFyZ2V0LCB3aGljaCBpcyByZWFsbHkgbm8gbW9yZSB0aGFuIGEgbmFtZSwgYW5k
IGEgY2xhc3Mgd2hpY2ggaXMgd2hhdCByZWFsbHkgZ2V0cw0KK3NlbGVjdGVkLCBhbmQgdGhlbiBj
YWxsZWQuIEluIHRoZSBjYXNlIG9mIHRoZSBYU0QgdmFsaWRhdG9yLCB0aGUgdGFyZ2V0IGlzIFhT
RERlbGVnYXRpbmdWYWxpZGF0b3IuIChUaGlzIHBob25leQ0KK3RhcmdldCBpcyB3aGF0IHlvdSBh
ZGQgeW91ciBmaWx0ZXJzIHRvKQ0KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlDQpJbmRleDog
dmFsaWRhdGVfY29yZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9wcm92aXNp
b25hbC9jb3JlL0lSZXBvcnRlci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qv
d2VidG9vbHMvY29tbW9uL3BsdWdpbnMvb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24vdmFsaWRh
dGVfY29yZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9wcm92aXNpb25hbC9j
b3JlL0lSZXBvcnRlci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS42DQpkaWZmIC11IC1y
MS42IElSZXBvcnRlci5qYXZhDQotLS0gdmFsaWRhdGVfY29yZS9vcmcvZWNsaXBzZS93c3QvdmFs
aWRhdGlvbi9pbnRlcm5hbC9wcm92aXNpb25hbC9jb3JlL0lSZXBvcnRlci5qYXZhCTIwIERlYyAy
MDA3IDE1OjI4OjIzIC0wMDAwCTEuNg0KKysrIHZhbGlkYXRlX2NvcmUvb3JnL2VjbGlwc2Uvd3N0
L3ZhbGlkYXRpb24vaW50ZXJuYWwvcHJvdmlzaW9uYWwvY29yZS9JUmVwb3J0ZXIuamF2YQkxNSBK
YW4gMjAwOCAxNzowMjoxOSAtMDAwMA0KQEAgLTUzLDEyICs1Myw2IEBADQogCSAqICAgICAgICAg
ICAgVGhlIHZhbGlkYXRvciB3aGljaCBpcyB0aGUgc291cmNlIG9mIHRoZSBtZXNzYWdlLg0KIAkg
KiBAcGFyYW0gbWVzc2FnZQ0KIAkgKiAgICAgICAgICAgIEEgbWVzc2FnZSB0byBiZSByZXBvcnRl
ZA0KLQkgKiBAZXhjZXB0aW9uIE1lc3NhZ2VMaW1pdEV4Y2VwdGlvbg0KLQkgKiAgICAgICAgICAg
ICAgICBpcyB0aHJvd24gd2hlbiB0aGUgdG90YWwgbnVtYmVyIG9mIG1lc3NhZ2VzIHJlcG9ydGVk
IGV4Y2VlZHMgdGhlIG1heGltdW0NCi0JICogICAgICAgICAgICAgICAgYWxsb3dlZC4NCi0JICog
W2lzc3VlOiBMTSAtIFRoaXMgZXhjZXB0aW9uIHNlZW1zIHF1ZXN0aW9uYWJsZSB0byBtZS4gV2h5
IGRvIHZhbGlkYXRvcnMgbmVlZCB0byBrbm93IGhvdw0KLQkgKiAgdG8gaGFuZGxlIGEgTWVzc2Fn
ZUxpbWl0RXhjZXB0aW9uPyBTZWVtcyB0byBtZSB0aGF0IHRoaXMgaXMgYSB2YWxpZGF0aW9uIGZy
YW1ld29yaw0KLQkgKiAgc3BlY2lmaWMgaXNzdWUgYW5kIHRoYXQgY2xpZW50IHZhbGlkYXRvcnMg
c2hvdWxkbid0IGtub3cgYWJvdXQgdGhpcyBhdCBhbGwuIF0NCiAJICovDQogCXZvaWQgYWRkTWVz
c2FnZShJVmFsaWRhdG9yIG9yaWdpbiwgSU1lc3NhZ2UgbWVzc2FnZSk7DQogDQpJbmRleDogdmFs
aWRhdGVfY29yZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC9jb3JlL1ZhbGlk
YXRvckxhdW5jaGVyLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29s
cy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi92YWxpZGF0ZV9jb3Jl
L29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL2NvcmUvVmFsaWRhdG9yTGF1bmNo
ZXIuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNw0KZGlmZiAtdSAtcjEuNyBWYWxpZGF0
b3JMYXVuY2hlci5qYXZhDQotLS0gdmFsaWRhdGVfY29yZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRh
dGlvbi9pbnRlcm5hbC9jb3JlL1ZhbGlkYXRvckxhdW5jaGVyLmphdmEJMjEgRGVjIDIwMDcgMTg6
MTQ6MzMgLTAwMDAJMS43DQorKysgdmFsaWRhdGVfY29yZS9vcmcvZWNsaXBzZS93c3QvdmFsaWRh
dGlvbi9pbnRlcm5hbC9jb3JlL1ZhbGlkYXRvckxhdW5jaGVyLmphdmEJMTUgSmFuIDIwMDggMTc6
MDI6MTkgLTAwMDANCkBAIC0xMCw4ICsxMCw4IEBADQogICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiov
DQogcGFja2FnZSBvcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi5pbnRlcm5hbC5jb3JlOw0KIA0K
LWltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0Ow0KIGltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7
DQoraW1wb3J0IGphdmEudXRpbC5MaXN0Ow0KIGltcG9ydCBqYXZhLnV0aWwubG9nZ2luZy5MZXZl
bDsNCiANCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLkNvcmVFeGNlcHRpb247DQpA
QCAtODYsNyArODYsNyBAQA0KIAkJCS8vdGhlICB2YWxpZGF0b3JzIHdobyBoYXZlIGltcGxlbWVu
dGVkIElWYWxpZGF0b3JKb2IgYnV0IGFyZSBydW5uaW5nIHN5bmNocm9ub3VzbHkNCiAJCQkvL3dv
dWxkIGxvZyBtZXNzYWdlcyBub3cgLi4uDQogCQkJVmFsaWRhdG9yTWFuYWdlciBtZ3IgPSBWYWxp
ZGF0b3JNYW5hZ2VyLmdldE1hbmFnZXIoKTsNCi0JCQlmaW5hbCBBcnJheUxpc3QgbGlzdCA9IG1n
ci5nZXRNZXNzYWdlcygoSVZhbGlkYXRvckpvYil2YWxpZGF0b3IpOw0KKwkJCWZpbmFsIExpc3Qg
bGlzdCA9IG1nci5nZXRNZXNzYWdlcygoSVZhbGlkYXRvckpvYil2YWxpZGF0b3IpOw0KIA0KIAkg
ICAgCUl0ZXJhdG9yIGl0ID0gbGlzdC5pdGVyYXRvcigpOw0KIAkJCXdoaWxlKCBpdC5oYXNOZXh0
KCkgKXsNCiNQIG9yZy5lY2xpcHNlLndzdC52YWxpZGF0aW9uLnVpDQpJbmRleDogcHJvcGVydHlf
ZmlsZXMvdmFsaWRhdGVfdWkucHJvcGVydGllcw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNy
b290L3dlYnRvb2xzL2NvbW1vbi9wbHVnaW5zL29yZy5lY2xpcHNlLndzdC52YWxpZGF0aW9uLnVp
L3Byb3BlcnR5X2ZpbGVzL3ZhbGlkYXRlX3VpLnByb3BlcnRpZXMsdg0KcmV0cmlldmluZyByZXZp
c2lvbiAxLjExDQpkaWZmIC11IC1yMS4xMSB2YWxpZGF0ZV91aS5wcm9wZXJ0aWVzDQotLS0gcHJv
cGVydHlfZmlsZXMvdmFsaWRhdGVfdWkucHJvcGVydGllcwk3IEp1biAyMDA3IDE5OjI4OjUwIC0w
MDAwCTEuMTENCisrKyBwcm9wZXJ0eV9maWxlcy92YWxpZGF0ZV91aS5wcm9wZXJ0aWVzCTE1IEph
biAyMDA4IDE3OjAyOjIwIC0wMDAwDQpAQCAtODMsNyArODMsNyBAQA0KIFZCRl9FWENfSU5URVJO
QUw9SVdBRTAwMDNFIEFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHZhbGlkYXRp
b24uIFJlYWQgdGhlIGxvZyBmaWxlLg0KIFZCRl9FWENfSU5URVJOQUxfUFJPSkVDVD1JV0FFMDAw
NEUgQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdmFsaWRhdGlvbiBvZiBwcm9q
ZWN0IHswfS4gUmVhZCB0aGUgbG9nIGZpbGUuDQogVkJGX0VYQ19JTlRFUk5BTF9USVRMRT1JV0FF
MDAwNUUgSW50ZXJuYWwgZXJyb3INCi1WQkZfRVhDX0lOVEVSTkFMX1BBR0U9SVdBRTAwMDZFIEFu
IHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJlZDsgY2xpY2sgQ2FuY2VsIHRvIGNsb3NlIHRoZSB3aXph
cmQuDQorVkJGX0VYQ19JTlRFUk5BTF9QQUdFPUlXQUUwMDA2RSBBbiB1bmV4cGVjdGVkIGVycm9y
IG9jY3VycmVkOyBjbGljayBDYW5jZWwgdG8gY2xvc2UgdGhlIHdpemFyZC4NCiANCiBWQkZfRVhD
X0lOVkFMSURfUkVHSVNURVI9SVdBRTAwMDdFIFZhbGlkYXRvcnMgY2FuIHJ1biBvbmx5IG9uIG9w
ZW4gcmVzb3VyY2VzLg0KIA0KSW5kZXg6IHZmMi9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi91
aS9pbnRlcm5hbC9NYW51YWxWYWxpZGF0aW9uUnVubmVyLmphdmENCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBm
aWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21tb24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFs
aWRhdGlvbi51aS92ZjIvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vdWkvaW50ZXJuYWwvTWFu
dWFsVmFsaWRhdGlvblJ1bm5lci5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4yDQpkaWZm
IC11IC1yMS4yIE1hbnVhbFZhbGlkYXRpb25SdW5uZXIuamF2YQ0KLS0tIHZmMi9vcmcvZWNsaXBz
ZS93c3QvdmFsaWRhdGlvbi91aS9pbnRlcm5hbC9NYW51YWxWYWxpZGF0aW9uUnVubmVyLmphdmEJ
MjEgRGVjIDIwMDcgMTg6MTQ6MjIgLTAwMDAJMS4yDQorKysgdmYyL29yZy9lY2xpcHNlL3dzdC92
YWxpZGF0aW9uL3VpL2ludGVybmFsL01hbnVhbFZhbGlkYXRpb25SdW5uZXIuamF2YQkxNSBKYW4g
MjAwOCAxNzowMjoyMCAtMDAwMA0KQEAgLTExLDEyICsxMSwxMSBAQA0KIGltcG9ydCBvcmcuZWNs
aXBzZS5jb3JlLnJ1bnRpbWUuSVByb2dyZXNzTW9uaXRvcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
Y29yZS5ydW50aW1lLklTdGF0dXM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5T
dGF0dXM7DQotaW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLmRpYWxvZ3MuTWVzc2FnZURpYWxvZzsN
Ci1pbXBvcnQgb3JnLmVjbGlwc2Uub3NnaS51dGlsLk5MUzsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
c3d0LndpZGdldHMuRGlzcGxheTsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24u
VmFsaWRhdGlvblJlc3VsdDsNCiBpbXBvcnQgb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24uaW50
ZXJuYWwuVmFsT3BlcmF0aW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi5p
bnRlcm5hbC5WYWxpZGF0aW9uUnVubmVyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS53c3QudmFsaWRh
dGlvbi51aS5pbnRlcm5hbC5kaWFsb2cuUmVzdWx0c0RpYWxvZzsNCiANCiAvKioNCiAgKiBSdW4g
YSBtYW51YWwgdmFsaWRhdGlvbi4gDQpAQCAtNTksNyArNTgsMTQgQEANCiANCiAJcHVibGljIElT
dGF0dXMgcnVuSW5Xb3Jrc3BhY2UoSVByb2dyZXNzTW9uaXRvciBtb25pdG9yKSB0aHJvd3MgQ29y
ZUV4Y2VwdGlvbiB7DQogCQkNCisJCWxvbmcgc3RhcnQgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxs
aXMoKTsNCiAJCWZpbmFsIFZhbE9wZXJhdGlvbiB2byA9IFZhbGlkYXRpb25SdW5uZXIudmFsaWRh
dGUoX3Byb2plY3RzLCBfaXNNYW51YWwsIF9pc0J1aWxkLCBtb25pdG9yKTsNCisJCWZpbmFsIGxv
bmcgdGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gc3RhcnQ7DQorCQlpbnQgcmVz
b3VyY2VDb3VudCA9IDA7DQorCQlmb3IgKFNldCBzIDogX3Byb2plY3RzLnZhbHVlcygpKXsNCisJ
CQlyZXNvdXJjZUNvdW50ICs9IHMuc2l6ZSgpOw0KKwkJfQ0KKwkJZmluYWwgaW50IGZpbmFsUmVz
b3VyY2VDb3VudCA9IHJlc291cmNlQ291bnQ7DQogCQlpZiAodm8uZ2V0UmVzdWx0KCkuaXNDYW5j
ZWxlZCgpKXJldHVybiBTdGF0dXMuQ0FOQ0VMX1NUQVRVUzsNCiAJCQ0KIAkJaWYgKF9zaG93UmVz
dWx0cyl7DQpAQCAtNjksMTggKzc1LDIwIEBADQogCQkJCXB1YmxpYyB2b2lkIHJ1bigpIHsNCiAJ
CQkJCVN0cmluZyBtZXNzYWdlID0gbnVsbDsNCiAJCQkJCVZhbGlkYXRpb25SZXN1bHQgdnIgPSB2
by5nZXRSZXN1bHQoKTsNCi0JCQkJCWlmICh2ci5nZXRTZXZlcml0eUVycm9yKCkgKyB2ci5nZXRT
ZXZlcml0eVdhcm5pbmcoKSArIHZyLmdldFNldmVyaXR5SW5mbygpID09IDApew0KLQkJCQkJCW1l
c3NhZ2UgPSBWYWxVSU1lc3NhZ2VzLlZhbGlkYXRpb25TdWNjZXNzZnVsOw0KLQkJCQkJfQ0KLQkJ
CQkJZWxzZSB7DQotCQkJCQkJDQotCQkJCQkJU3RyaW5nW10gcGFybXMgPSBuZXcgU3RyaW5nWzNd
Ow0KLQkJCQkJCXBhcm1zWzBdID0gX25mLmZvcm1hdCh2ci5nZXRTZXZlcml0eUVycm9yKCkpOw0K
LQkJCQkJCXBhcm1zWzFdID0gX25mLmZvcm1hdCh2ci5nZXRTZXZlcml0eVdhcm5pbmcoKSk7DQot
CQkJCQkJcGFybXNbMl0gPSBfbmYuZm9ybWF0KHZyLmdldFNldmVyaXR5SW5mbygpKTsNCi0JCQkJ
CQltZXNzYWdlID0gTkxTLmJpbmQoVmFsVUlNZXNzYWdlcy5FcnJTdW1tYXJ5LCBwYXJtcyk7IA0K
LQkJCQkJfQ0KLQkJCQkJTWVzc2FnZURpYWxvZy5vcGVuSW5mb3JtYXRpb24obnVsbCwgVmFsVUlN
ZXNzYWdlcy5WYWxpZGF0aW9uU3RhdHVzLCBtZXNzYWdlKTsJCQkJCQ0KKwkJCQkJUmVzdWx0c0Rp
YWxvZyByZCA9IG5ldyBSZXN1bHRzRGlhbG9nKG51bGwsIHZyLCB0aW1lLCBmaW5hbFJlc291cmNl
Q291bnQpOw0KKwkJCQkJcmQub3BlbigpOw0KKy8vCQkJCQlpZiAodnIuZ2V0U2V2ZXJpdHlFcnJv
cigpICsgdnIuZ2V0U2V2ZXJpdHlXYXJuaW5nKCkgKyB2ci5nZXRTZXZlcml0eUluZm8oKSA9PSAw
KXsNCisvLwkJCQkJCW1lc3NhZ2UgPSBWYWxVSU1lc3NhZ2VzLlZhbGlkYXRpb25TdWNjZXNzZnVs
Ow0KKy8vCQkJCQl9DQorLy8JCQkJCWVsc2Ugew0KKy8vCQkJCQkJDQorLy8JCQkJCQlTdHJpbmdb
XSBwYXJtcyA9IG5ldyBTdHJpbmdbM107DQorLy8JCQkJCQlwYXJtc1swXSA9IF9uZi5mb3JtYXQo
dnIuZ2V0U2V2ZXJpdHlFcnJvcigpKTsNCisvLwkJCQkJCXBhcm1zWzFdID0gX25mLmZvcm1hdCh2
ci5nZXRTZXZlcml0eVdhcm5pbmcoKSk7DQorLy8JCQkJCQlwYXJtc1syXSA9IF9uZi5mb3JtYXQo
dnIuZ2V0U2V2ZXJpdHlJbmZvKCkpOw0KKy8vCQkJCQkJbWVzc2FnZSA9IE5MUy5iaW5kKFZhbFVJ
TWVzc2FnZXMuRXJyU3VtbWFyeSwgcGFybXMpOyANCisvLwkJCQkJfQ0KKy8vCQkJCQlNZXNzYWdl
RGlhbG9nLm9wZW5JbmZvcm1hdGlvbihudWxsLCBWYWxVSU1lc3NhZ2VzLlZhbGlkYXRpb25TdGF0
dXMsIG1lc3NhZ2UpOwkJCQkJDQogCQkJCX0NCiAJCQkJDQogCQkJfTsNCkluZGV4OiB2YWxpZGF0
ZXVpL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL3VpL1ZhbGlkYXRpb25VSU1l
c3NhZ2VzLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC93ZWJ0b29scy9jb21t
b24vcGx1Z2lucy9vcmcuZWNsaXBzZS53c3QudmFsaWRhdGlvbi51aS92YWxpZGF0ZXVpL29yZy9l
Y2xpcHNlL3dzdC92YWxpZGF0aW9uL2ludGVybmFsL3VpL1ZhbGlkYXRpb25VSU1lc3NhZ2VzLmph
dmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjQNCmRpZmYgLXUgLXIxLjQgVmFsaWRhdGlvblVJ
TWVzc2FnZXMuamF2YQ0KLS0tIHZhbGlkYXRldWkvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24v
aW50ZXJuYWwvdWkvVmFsaWRhdGlvblVJTWVzc2FnZXMuamF2YQkyMSBEZWMgMjAwNyAxODoxNDoy
MiAtMDAwMAkxLjQNCisrKyB2YWxpZGF0ZXVpL29yZy9lY2xpcHNlL3dzdC92YWxpZGF0aW9uL2lu
dGVybmFsL3VpL1ZhbGlkYXRpb25VSU1lc3NhZ2VzLmphdmEJMTUgSmFuIDIwMDggMTc6MDI6MjAg
LTAwMDANCkBAIC0yNiw2ICsyNiwyMiBAQA0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBQcmVmUGFn
ZV9hbHdheXNfc2F2ZTsNCiAJcHVibGljIHN0YXRpYyBTdHJpbmcgUnVuVmFsaWRhdGlvbkRpYWxv
Z1RpdGxlOw0KIAlwdWJsaWMgc3RhdGljIFN0cmluZyBVbmFibGVUb1NhdmU7DQorCQ0KKwlwdWJs
aWMgc3RhdGljIFN0cmluZyBWYWxSZXN1bHRzU3RhdHVzOw0KKwlwdWJsaWMgc3RhdGljIFN0cmlu
ZyBWYWxFcnJvcnMxOw0KKwlwdWJsaWMgc3RhdGljIFN0cmluZyBWYWxFcnJvcnM7DQorCXB1Ymxp
YyBzdGF0aWMgU3RyaW5nIFZhbFdhcm4xOw0KKwlwdWJsaWMgc3RhdGljIFN0cmluZyBWYWxXYXJu
Ow0KKwlwdWJsaWMgc3RhdGljIFN0cmluZyBWYWxJbmZvMTsNCisJcHVibGljIHN0YXRpYyBTdHJp
bmcgVmFsSW5mbzsNCisJcHVibGljIHN0YXRpYyBTdHJpbmcgVmFsVGltZTE7DQorCXB1YmxpYyBz
dGF0aWMgU3RyaW5nIFZhbFRpbWU7DQorCXB1YmxpYyBzdGF0aWMgU3RyaW5nIFZhbFN1Y2Nlc3M7
DQorCQ0KKwlwdWJsaWMgc3RhdGljIFN0cmluZyBUaW1lVW5kZXI7DQorCXB1YmxpYyBzdGF0aWMg
U3RyaW5nIFRpbWVTZWM7DQorCXB1YmxpYyBzdGF0aWMgU3RyaW5nIFRpbWVNaW47DQorCQ0KIA0K
IAlzdGF0aWMgew0KIAkJLy8gbG9hZCBtZXNzYWdlIHZhbHVlcyBmcm9tIGJ1bmRsZSBmaWxlDQpJ
bmRleDogdmFsaWRhdGV1aS9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi9pbnRlcm5hbC91aS92
YWxpZGF0aW9udWkucHJvcGVydGllcw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L3dl
YnRvb2xzL2NvbW1vbi9wbHVnaW5zL29yZy5lY2xpcHNlLndzdC52YWxpZGF0aW9uLnVpL3ZhbGlk
YXRldWkvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vaW50ZXJuYWwvdWkvdmFsaWRhdGlvbnVp
LnByb3BlcnRpZXMsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMNCmRpZmYgLXUgLXIxLjMgdmFs
aWRhdGlvbnVpLnByb3BlcnRpZXMNCi0tLSB2YWxpZGF0ZXVpL29yZy9lY2xpcHNlL3dzdC92YWxp
ZGF0aW9uL2ludGVybmFsL3VpL3ZhbGlkYXRpb251aS5wcm9wZXJ0aWVzCTIxIERlYyAyMDA3IDE4
OjE0OjIyIC0wMDAwCTEuMw0KKysrIHZhbGlkYXRldWkvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRp
b24vaW50ZXJuYWwvdWkvdmFsaWRhdGlvbnVpLnByb3BlcnRpZXMJMTUgSmFuIDIwMDggMTc6MDI6
MjAgLTAwMDANCkBAIC0xOSwzICsxOSwxOSBAQA0KIFJ1blZhbGlkYXRpb25EaWFsb2dUaXRsZT1S
dW5uaW5nIFZhbGlkYXRpb24NCiBVbmFibGVUb1NhdmU9VW5hYmxlIHRvIHNldCBzYXZlIGF1dG9t
YXRpY2FsbHkgcHJlZmVyZW5jZSBpbiBzYXZlIGZpbGVzIGZvciB2YWxpZGF0aW9uIGRpYWxvZzoN
CiANCitWYWxSZXN1bHRzU3RhdHVzPVZhbGlkYXRpb24gU3RhdHVzDQorVmFsRXJyb3JzMT1UaGUg
dmFsaWRhdGlvbiB3YXMgbm90IHN1Y2Nlc3NmdWwsIG9uZSBlcnJvciB3YXMgZW5jb3VudGVyZWQu
IA0KK1ZhbEVycm9ycz1UaGUgdmFsaWRhdGlvbiB3YXMgbm90IHN1Y2Nlc3NmdWwsIHswfSBlcnJv
cnMgd2VyZSBlbmNvdW50ZXJlZC4NCitWYWxXYXJuMT1UaGUgdmFsaWRhdGlvbiBjb21wbGV0ZWQg
d2l0aCBvbmUgd2FybmluZy4NCitWYWxXYXJuPVRoZSB2YWxpZGF0aW9uIGNvbXBsZXRlZCB3aXRo
IHswfSB3YXJuaW5ncy4NCitWYWxJbmZvMT1UaGUgdmFsaWRhdGlvbiBjb21wbGV0ZWQgd2l0aCBv
bmUgaW5mb3JtYXRpb25hbCBtZXNzYWdlLg0KK1ZhbEluZm89VGhlIHZhbGlkYXRpb24gY29tcGxl
dGVkIHdpdGggezB9IGluZm9ybWF0aW9uYWwgbWVzc2FnZXMuDQorVmFsU3VjY2Vzcz1UaGUgdmFs
aWRhdGlvbiBjb21wbGV0ZWQgd2l0aCBubyBlcnJvcnMgb3Igd2FybmluZ3MuDQorVmFsVGltZTE9
T25lIHJlc291cmNlIHdhcyB2YWxpZGF0ZWQgaW4gezB9Lg0KK1ZhbFRpbWU9ezB9IHJlc291cmNl
cyB3ZXJlIHZhbGlkYXRlZCBpbiB7MX0uDQorDQorVGltZVVuZGVyPXVuZGVyIGEgc2Vjb25kDQor
VGltZVNlYz17MH0gc2Vjb25kcw0KK1RpbWVNaW49ezB9IG1pbnV0ZXMNCisNCisNCkluZGV4OiB2
ZjIvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vdWkvaW50ZXJuYWwvZGlhbG9nL1Jlc3VsdHNE
aWFsb2cuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHZmMi9vcmcvZWNsaXBzZS93c3QvdmFs
aWRhdGlvbi91aS9pbnRlcm5hbC9kaWFsb2cvUmVzdWx0c0RpYWxvZy5qYXZhDQpkaWZmIC1OIHZm
Mi9vcmcvZWNsaXBzZS93c3QvdmFsaWRhdGlvbi91aS9pbnRlcm5hbC9kaWFsb2cvUmVzdWx0c0Rp
YWxvZy5qYXZhDQotLS0gL2Rldi9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyB2
ZjIvb3JnL2VjbGlwc2Uvd3N0L3ZhbGlkYXRpb24vdWkvaW50ZXJuYWwvZGlhbG9nL1Jlc3VsdHNE
aWFsb2cuamF2YQkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDEwNiBAQA0K
K3BhY2thZ2Ugb3JnLmVjbGlwc2Uud3N0LnZhbGlkYXRpb24udWkuaW50ZXJuYWwuZGlhbG9nOw0K
Kw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5qZmFjZS5kaWFsb2dzLklEaWFsb2dDb25zdGFudHM7DQor
aW1wb3J0IG9yZy5lY2xpcHNlLmpmYWNlLmRpYWxvZ3MuSWNvbkFuZE1lc3NhZ2VEaWFsb2c7DQor
aW1wb3J0IG9yZy5lY2xpcHNlLm9zZ2kudXRpbC5OTFM7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3
dC5TV1Q7DQoraW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ncmFwaGljcy5JbWFnZTsNCitpbXBvcnQg
b3JnLmVjbGlwc2Uuc3d0LmxheW91dC5HcmlkRGF0YTsNCitpbXBvcnQgb3JnLmVjbGlwc2Uuc3d0
LndpZGdldHMuQ29tcG9zaXRlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5Db250
cm9sOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5MYWJlbDsNCitpbXBvcnQgb3Jn
LmVjbGlwc2Uuc3d0LndpZGdldHMuU2hlbGw7DQoraW1wb3J0IG9yZy5lY2xpcHNlLndzdC52YWxp
ZGF0aW9uLlZhbGlkYXRpb25SZXN1bHQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLndzdC52YWxpZGF0
aW9uLmludGVybmFsLnVpLlZhbGlkYXRpb25VSU1lc3NhZ2VzOw0KKw0KKy8qKg0KKyAqIEEgZGlh
bG9nIGZvciBkaXNwbGF5aW5nIHRoZSByZXN1bHRzIG9mIGEgbWFudWFsIHZhbGlkYXRpb24uDQor
ICogQGF1dGhvciBrYXJhc2l1aw0KKyAqDQorICovDQorcHVibGljIGNsYXNzIFJlc3VsdHNEaWFs
b2cgZXh0ZW5kcyBJY29uQW5kTWVzc2FnZURpYWxvZyB7DQorCQ0KKwlwcml2YXRlIFZhbGlkYXRp
b25SZXN1bHQgCV9yZXN1bHQ7DQorCXByaXZhdGUgbG9uZwkJCQlfdGltZTsNCisJcHJpdmF0ZSBp
bnQJCQkJCV9yZXNvdXJjZUNvdW50Ow0KKw0KKwkvKioNCisJICogQ3JlYXRlIGEgZGlhbG9nIGZv
ciBkaXNwbGF5aW5nIHZhbGlkYXRpb24gcmVzdWx0cy4NCisJICogDQorCSAqIEBwYXJhbSBwYXJl
bnRTaGVsbCB0aGlzIGNhbiBiZSBudWxsDQorCSAqIEBwYXJhbSByZXN1bHRzIHRoZSByZXN1bHRz
IG9mIHRoZSB2YWxpZGF0aW9uDQorCSAqIEBwYXJhbSB0aW1lIHRoZSB0aW1lIHRoYXQgdGhlIHZh
bGlkYXRpb24gdG9vayBpbiBtaWxsaXNlY29uZHMNCisJICogQHBhcmFtIHJlc291cmNlQ291bnQg
dGhlIG51bWJlciBvZiByZXNvdXJjZXMgdGhhdCB3ZXJlIHZhbGlkYXRlZA0KKwkgKi8NCisJcHVi
bGljIFJlc3VsdHNEaWFsb2coU2hlbGwgcGFyZW50U2hlbGwsIFZhbGlkYXRpb25SZXN1bHQgcmVz
dWx0cywgbG9uZyB0aW1lLCBpbnQgcmVzb3VyY2VDb3VudCkgew0KKwkJc3VwZXIocGFyZW50U2hl
bGwpOw0KKwkJX3Jlc3VsdCA9IHJlc3VsdHM7DQorCQlfdGltZSA9IHRpbWU7DQorCQlfcmVzb3Vy
Y2VDb3VudCA9IHJlc291cmNlQ291bnQ7DQorCX0NCisJDQorCUBPdmVycmlkZQ0KKwlwcm90ZWN0
ZWQgSW1hZ2UgZ2V0SW1hZ2UoKSB7DQorCQlpZiAoX3Jlc3VsdC5nZXRTZXZlcml0eUVycm9yKCkg
PiAwKXJldHVybiBnZXRFcnJvckltYWdlKCk7DQorCQlpZiAoX3Jlc3VsdC5nZXRTZXZlcml0eVdh
cm5pbmcoKSA+IDApcmV0dXJuIGdldFdhcm5pbmdJbWFnZSgpOw0KKwkJcmV0dXJuIGdldEluZm9J
bWFnZSgpOw0KKwl9DQorCQ0KKwlAT3ZlcnJpZGUNCisJcHJvdGVjdGVkIENvbnRyb2wgY3JlYXRl
RGlhbG9nQXJlYShDb21wb3NpdGUgcGFyZW50KSB7DQorCQltZXNzYWdlID0gZ2V0TWVzc2FnZSgp
Ow0KKwkJY3JlYXRlTWVzc2FnZUFyZWEocGFyZW50KTsNCisJCQ0KKwkJU3RyaW5nQnVmZmVyIGIg
PSBuZXcgU3RyaW5nQnVmZmVyKDIwMCk7DQorCQlTdHJpbmcgaW5mb01lc3NhZ2UgPSBnZXRJbmZv
TWVzc2FnZSgpOw0KKwkJaWYgKGluZm9NZXNzYWdlICE9IG51bGwpew0KKwkJCWIuYXBwZW5kKGlu
Zm9NZXNzYWdlKTsNCisJCQliLmFwcGVuZCgnICcpOw0KKwkJfQ0KKwkJDQorCQlpZiAoX3Jlc291
cmNlQ291bnQgPiAwKXsNCisJCQlpZiAoX3Jlc291cmNlQ291bnQgPT0gMSliLmFwcGVuZChOTFMu
YmluZChWYWxpZGF0aW9uVUlNZXNzYWdlcy5WYWxUaW1lMSwgZ2V0VGltZShfdGltZSkpKTsNCisJ
CQllbHNlIGIuYXBwZW5kKE5MUy5iaW5kKFZhbGlkYXRpb25VSU1lc3NhZ2VzLlZhbFRpbWUsIF9y
ZXNvdXJjZUNvdW50LCBnZXRUaW1lKF90aW1lKSkpOw0KKwkJfQ0KKwkJCQkNCisJCUxhYmVsIG1z
ZyA9IG5ldyBMYWJlbChwYXJlbnQsIFNXVC5OT05FKTsNCisJCW1zZy5zZXRUZXh0KGIudG9TdHJp
bmcoKSk7DQorCQlHcmlkRGF0YSBnZCA9IG5ldyBHcmlkRGF0YSgpOw0KKwkJZ2QuaG9yaXpvbnRh
bFNwYW4gPSAyOw0KKwkJbXNnLnNldExheW91dERhdGEoZ2QpOw0KKwkJQ29udHJvbCBjID0gc3Vw
ZXIuY3JlYXRlRGlhbG9nQXJlYShwYXJlbnQpOw0KKwkJcmV0dXJuIGM7DQorCX0NCisJDQorCUBP
dmVycmlkZQ0KKwlwcm90ZWN0ZWQgdm9pZCBjb25maWd1cmVTaGVsbChTaGVsbCBuZXdTaGVsbCkg
ew0KKwkJc3VwZXIuY29uZmlndXJlU2hlbGwobmV3U2hlbGwpOw0KKwkJbmV3U2hlbGwuc2V0VGV4
dChWYWxpZGF0aW9uVUlNZXNzYWdlcy5WYWxSZXN1bHRzU3RhdHVzKTsNCisJfQ0KKwkNCisJQE92
ZXJyaWRlDQorCXByb3RlY3RlZCB2b2lkIGNyZWF0ZUJ1dHRvbnNGb3JCdXR0b25CYXIoQ29tcG9z
aXRlIHBhcmVudCkgew0KKwkJY3JlYXRlQnV0dG9uKHBhcmVudCwgSURpYWxvZ0NvbnN0YW50cy5D
QU5DRUxfSUQsIElEaWFsb2dDb25zdGFudHMuQ0FOQ0VMX0xBQkVMLCBmYWxzZSk7DQorCX0NCisJ
DQorCXByaXZhdGUgU3RyaW5nIGdldFRpbWUobG9uZyB0aW1lKSB7DQorCQlpZiAoX3RpbWUgPD0g
MTAwMClyZXR1cm4gVmFsaWRhdGlvblVJTWVzc2FnZXMuVGltZVVuZGVyOw0KKwkJaWYgKF90aW1l
IDw9IDYwMDAwKXJldHVybiBOTFMuYmluZChWYWxpZGF0aW9uVUlNZXNzYWdlcy5UaW1lU2VjLCBf
dGltZS8xMDAwKTsNCisJCXJldHVybiBOTFMuYmluZChWYWxpZGF0aW9uVUlNZXNzYWdlcy5UaW1l
TWluLCBfdGltZS82MDAwMCk7DQorCX0NCisNCisJcHJpdmF0ZSBTdHJpbmcgZ2V0SW5mb01lc3Nh
Z2UoKSB7DQorCQlpbnQgbiA9IF9yZXN1bHQuZ2V0U2V2ZXJpdHlJbmZvKCk7DQorCQlpZiAobiA9
PSAwKXJldHVybiBudWxsOw0KKwkJaWYgKG4gPT0gMSlyZXR1cm4gVmFsaWRhdGlvblVJTWVzc2Fn
ZXMuVmFsSW5mbzE7DQorCQlyZXR1cm4gTkxTLmJpbmQoVmFsaWRhdGlvblVJTWVzc2FnZXMuVmFs
SW5mbywgbik7DQorCX0NCisNCisJcHJpdmF0ZSBTdHJpbmcgZ2V0TWVzc2FnZSgpew0KKwkJaWYg
KF9yZXN1bHQuZ2V0U2V2ZXJpdHlFcnJvcigpID4gMSlyZXR1cm4gTkxTLmJpbmQoVmFsaWRhdGlv
blVJTWVzc2FnZXMuVmFsRXJyb3JzLCBfcmVzdWx0LmdldFNldmVyaXR5RXJyb3IoKSk7DQorCQlp
ZiAoX3Jlc3VsdC5nZXRTZXZlcml0eUVycm9yKCkgPT0gMSlyZXR1cm4gVmFsaWRhdGlvblVJTWVz
c2FnZXMuVmFsRXJyb3JzMTsNCisJCWlmIChfcmVzdWx0LmdldFNldmVyaXR5V2FybmluZygpID4g
MSlyZXR1cm4gTkxTLmJpbmQoVmFsaWRhdGlvblVJTWVzc2FnZXMuVmFsV2FybiwgX3Jlc3VsdC5n
ZXRTZXZlcml0eVdhcm5pbmcoKSk7DQorCQlpZiAoX3Jlc3VsdC5nZXRTZXZlcml0eVdhcm5pbmco
KSA9PSAxKXJldHVybiBWYWxpZGF0aW9uVUlNZXNzYWdlcy5WYWxXYXJuMTsNCisJCXJldHVybiBW
YWxpZGF0aW9uVUlNZXNzYWdlcy5WYWxTdWNjZXNzOw0KKwl9DQorfQ0K
</data>

          </attachment>
      

    </bug>

</bugzilla>