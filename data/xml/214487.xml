<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214487</bug_id>
          
          <creation_ts>2008-01-07 10:09:00 -0500</creation_ts>
          <short_desc>[DB] Use prepared statements if appropriate</short_desc>
          <delta_ts>2010-06-29 04:19:15 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>11</classification_id>
          <classification>Modeling</classification>
          <product>EMF</product>
          <component>cdo.db</component>
          <version>2.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows Vista</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>Lighter, Faster and Better</status_whiteboard>
          <keywords>readme</keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>M3</target_milestone>
          <dependson>253664</dependson>
    
    <dependson>255322</dependson>
          <blocked>217255</blocked>
    
    <blocked>244290</blocked>
    
    <blocked>249681</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Eike Stepper">stepper</reporter>
          <assigned_to name="Eike Stepper">stepper</assigned_to>
          <cc>stefan</cc>
          
          <votes>0</votes>

      

      

      <flag name="galileo"
          id="12362"
          type_id="9"
          status="+"
          setter="stepper"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1126602</commentid>
    <comment_count>0</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-01-07 10:09:29 -0500</bug_when>
    <thetext>Advantages:
- Possible higher performance with many executes
- Automatic data type conversion
- BLOB, CLOB, ...

Disadvantages:
- Runtime overhead
- Additional state to be managed when cached
- Caching expensive since associated with a dedicated connection
- Unclear if connection/datasource implementation already uses caching</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1265238</commentid>
    <comment_count>1</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-06-10 02:30:04 -0400</bug_when>
    <thetext>Reversioned due to graduation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1348272</commentid>
    <comment_count>2</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-10-12 05:26:29 -0400</bug_when>
    <thetext>Stefan, is this an enhancement of the DBStore you&apos;d like to work on?
See also the relation to bug #249681 ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1351726</commentid>
    <comment_count>3</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-10-17 04:06:50 -0400</bug_when>
    <thetext>http://www.javaworld.com/javaworld/jw-01-2002/jw-0125-overpower.html
http://www.theserverside.com/tt/articles/article.tss?l=Prepared-Statments
http://en.wikipedia.org/wiki/Sql_injection
http://www.onjava.com/lpt/a/1480

exerpt from http://www.oreilly.com/catalog/joraj...pter/ch19.html

&quot;Statement Versus PreparedStatement

There&apos;s a popular belief that using a PreparedStatement object is
faster than using a Statement object. After all, a prepared statement
has to verify its metadata against the database only once, while a
statement has to do it every time. So how could it be any other way?
Well, the truth of the matter is that it takes about 65 iterations of
a prepared statement before its total time for execution catches up
with a statement. This has performance implications for your
application, and exploring these issues is what this section is all
about.

When it comes to which SQL statement object performs better under
typical use, a Statement or a PreparedStatement, the truth is that the
Statement object yields the best performance. When you consider how
SQL statements are typically used in an application--1 or 2 here,
maybe 10-20 (rarely more) per transaction--you realize that a
Statement object will perform them in less time than a
PreparedStatement object.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1364560</commentid>
    <comment_count>4</comment_count>
      <attachid>116930</attachid>
    <who name="Stefan Winkler">stefan</who>
    <bug_when>2008-11-04 08:19:12 -0500</bug_when>
    <thetext>Created attachment 116930
Patch v1

Patch implementing JDBC delegate interface in patch-v1 attached to Bug 253664.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1368523</commentid>
    <comment_count>5</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-11-09 05:59:44 -0500</bug_when>
    <thetext>Patch v1 needs remerge with HEAD ;-(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1369665</commentid>
    <comment_count>6</comment_count>
      <attachid>117547</attachid>
    <who name="Stefan Winkler">stefan</who>
    <bug_when>2008-11-11 09:30:24 -0500</bug_when>
    <thetext>Created attachment 117547
New patch based on current HEAD</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1372131</commentid>
    <comment_count>7</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-11-14 04:12:19 -0500</bug_when>
    <thetext>Committed to HEAD.

Stefan, should we change the default in the cdo-server.xml file to &quot;preparedStatement&quot;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1372137</commentid>
    <comment_count>8</comment_count>
    <who name="Stefan Winkler">stefan</who>
    <bug_when>2008-11-14 04:22:57 -0500</bug_when>
    <thetext>&gt; Stefan, should we change the default in the cdo-server.xml file to
&gt; &quot;preparedStatement&quot;?

mhhh ... actually that&apos;s a good question.(In reply to comment #7)
For the long term: yes, for the short term: I don&apos;t know.

Arguments:
+ all test cases that passed before also pass with PreparedStatement
+ preparedStatement fixes Bugs 244290 (Quote escaping) and 249681 (storing date)
  (these issues still remain with the non-prepared case - if someone wants them 
  fixed, please REOPEN the respective bugs!)

- preparedStatements have not been thoroughly performance-measured with different databases and JDBC drivers. I am also still not sure about JDBC-level preparedStatement caching. So while the two bugs above are not an issue anymore with preparedStatements, I can not as of now guarantee that preparedStatements may be even slower than non-prepared in some cases.

So maybe set is as default, but document the possible issues which have not yet been evaluated.





 

</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1372140</commentid>
    <comment_count>9</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-11-14 04:26:31 -0500</bug_when>
    <thetext>Because of bug #255322 I&apos;ll postpone the change of the default...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1373015</commentid>
    <comment_count>10</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2008-11-17 04:44:41 -0500</bug_when>
    <thetext>Fix available in CDO 2.0.0M3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1533551</commentid>
    <comment_count>11</comment_count>
    <who name="Eike Stepper">stepper</who>
    <bug_when>2009-06-27 11:51:49 -0400</bug_when>
    <thetext>Generally available.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>116930</attachid>
            <date>2008-11-04 08:19:00 -0500</date>
            <delta_ts>2008-11-04 08:19:12 -0500</delta_ts>
            <desc>Patch v1</desc>
            <filename>patch-v1.patch</filename>
            <type>text/plain</type>
            <size>23864</size>
            <attacher name="Stefan Winkler">stefan</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZW1mLmNkby5z
ZXJ2ZXIuZGINCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwv
ZGIvamRiYy9QcmVwYXJlZFN0YXRlbWVudEpEQkNXcmFwcGVyLmphdmENCj09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJD
UyBmaWxlOiBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9Q
cmVwYXJlZFN0YXRlbWVudEpEQkNXcmFwcGVyLmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNl
L2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2RiL2pkYmMvUHJlcGFyZWRTdGF0ZW1lbnRKREJDV3Jh
cHBlci5qYXZhDQotLS0gL2Rldi9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBz
cmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9QcmVwYXJlZFN0
YXRlbWVudEpEQkNXcmFwcGVyLmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAs
MCArMSwyNDUgQEANCisvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQorICogQ29weXJpZ2h0IChjKSAyMDA0
IC0gMjAwOCBFaWtlIFN0ZXBwZXIsIEdlcm1hbnkuDQorICogQWxsIHJpZ2h0cyByZXNlcnZlZC4g
VGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscw0KKyAqIGFyZSBtYWRl
IGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2Ug
djEuMA0KKyAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZh
aWxhYmxlIGF0DQorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwN
CisgKiANCisgKiBDb250cmlidXRvcnM6DQorICogICAgRWlrZSBTdGVwcGVyIC0gaW5pdGlhbCBB
UEkgYW5kIGltcGxlbWVudGF0aW9uDQorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KK3BhY2thZ2Ugb3Jn
LmVjbGlwc2UuZW1mLmNkby5zZXJ2ZXIuaW50ZXJuYWwuZGIuamRiYzsNCisNCitpbXBvcnQgb3Jn
LmVjbGlwc2UuZW1mLmNkby5jb21tb24uaWQuQ0RPSUQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVt
Zi5jZG8uY29tbW9uLmlkLkNET0lEVXRpbDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNkby5z
ZXJ2ZXIuZGIuSUF0dHJpYnV0ZU1hcHBpbmc7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5jZG8u
c2VydmVyLmludGVybmFsLmRiLkNET0RCU2NoZW1hOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYu
Y2RvLnNlcnZlci5pbnRlcm5hbC5kYi5TZXJ2ZXJJbmZvOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5l
bWYuY2RvLnNlcnZlci5pbnRlcm5hbC5kYi5idW5kbGUuT007DQoraW1wb3J0IG9yZy5lY2xpcHNl
LmVtZi5jZG8uc3BpLmNvbW1vbi5JbnRlcm5hbENET1JldmlzaW9uOw0KKw0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5uZXQ0ai5kYi5EQkV4Y2VwdGlvbjsNCitpbXBvcnQgb3JnLmVjbGlwc2UubmV0NGou
ZGIuREJVdGlsOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5uZXQ0ai51dGlsLm9tLnRyYWNlLkNvbnRl
eHRUcmFjZXI7DQorDQoraW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247DQoraW1wb3J0IGphdmEu
c3FsLlByZXBhcmVkU3RhdGVtZW50Ow0KK2ltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247DQor
aW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsNCitpbXBvcnQgamF2YS51dGlsLkxpc3Q7DQor
DQorLyoqDQorICogQGF1dGhvciBTdGVmYW4gV0lua2xlcg0KKyAqIEBzaW5jZSAyLjANCisgKi8N
CitwdWJsaWMgY2xhc3MgUHJlcGFyZWRTdGF0ZW1lbnRKREJDV3JhcHBlciBleHRlbmRzIEFic3Ry
YWN0SkRCQ0RlbGVnYXRlDQorew0KKyAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgQ29udGV4dFRyYWNl
ciBUUkFDRVIgPSBuZXcgQ29udGV4dFRyYWNlcihPTS5ERUJVRywgUHJlcGFyZWRTdGF0ZW1lbnRK
REJDV3JhcHBlci5jbGFzcyk7DQorDQorICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgU1FM
X1VQREFURV9SRVZJU0VfVkVSU0lPTiA9ICIgU0VUICIgKyBDRE9EQlNjaGVtYS5BVFRSSUJVVEVT
X1JFVklTRUQgKyAiID0gPyBXSEVSRSAiDQorICAgICAgKyBDRE9EQlNjaGVtYS5BVFRSSUJVVEVT
X0lEICsgIiA9ID8gQU5EICIgKyBDRE9EQlNjaGVtYS5BVFRSSUJVVEVTX1ZFUlNJT04gKyAiID0g
PyI7DQorDQorICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgU1FMX1VQREFURV9SRVZJU0Vf
VU5SRVZJU0VEID0gIiBTRVQgIiArIENET0RCU2NoZW1hLkFUVFJJQlVURVNfUkVWSVNFRCArICIg
PSA/IFdIRVJFICINCisgICAgICArIENET0RCU2NoZW1hLkFUVFJJQlVURVNfSUQgKyAiID0gPyBB
TkQgIiArIENET0RCU2NoZW1hLkFUVFJJQlVURVNfUkVWSVNFRCArICIgPSAwIjsNCisNCisgIHBy
aXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBTUUxfSU5TRVJUX1JFRkVSRU5DRV9XSVRIX0RCSUQg
PSAiIFZBTFVFUyAoPywgPywgPywgPywgPykiOw0KKw0KKyAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg
U3RyaW5nIFNRTF9JTlNFUlRfUkVGRVJFTkNFID0gIiBWQUxVRVMgKD8sID8sID8sID8pIjsNCisN
CisgIEBPdmVycmlkZQ0KKyAgcHJvdGVjdGVkIHZvaWQgZG9JbnNlcnRBdHRyaWJ1dGVzKENvbm5l
Y3Rpb24gY29ubmVjdGlvbiwgU3RyaW5nIHRhYmxlTmFtZSwgSW50ZXJuYWxDRE9SZXZpc2lvbiBy
ZXZpc2lvbiwNCisgICAgICBMaXN0PElBdHRyaWJ1dGVNYXBwaW5nPiBhdHRyaWJ1dGVNYXBwaW5n
cywgYm9vbGVhbiB3aXRoRnVsbFJldmlzaW9uSW5mbykNCisgIHsNCisgICAgUHJlcGFyZWRTdGF0
ZW1lbnQgc3RtdCA9IG51bGw7DQorICAgIFN0cmluZ0J1aWxkZXIgc3FsID0gbmV3IFN0cmluZ0J1
aWxkZXIoKTsNCisNCisgICAgaWYgKGF0dHJpYnV0ZU1hcHBpbmdzID09IG51bGwpDQorICAgIHsN
CisgICAgICBhdHRyaWJ1dGVNYXBwaW5ncyA9IENvbGxlY3Rpb25zLmVtcHR5TGlzdCgpOw0KKyAg
ICB9DQorDQorICAgIHNxbC5hcHBlbmQoIklOU0VSVCBJTlRPICIpOw0KKyAgICBzcWwuYXBwZW5k
KHRhYmxlTmFtZSk7DQorICAgIHNxbC5hcHBlbmQoIiBWQUxVRVMgKD8sID8sICIpOw0KKyAgICBp
ZiAod2l0aEZ1bGxSZXZpc2lvbkluZm8pDQorICAgIHsNCisgICAgICBzcWwuYXBwZW5kKCI/LCA/
LCA/LCA/LCA/LCA/Iik7DQorICAgIH0NCisgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhdHRyaWJ1
dGVNYXBwaW5ncy5zaXplKCk7IGkrKykNCisgICAgew0KKyAgICAgIHNxbC5hcHBlbmQoIiwgPyIp
Ow0KKyAgICB9DQorICAgIHNxbC5hcHBlbmQoIikiKTsNCisNCisgICAgaW50IGNvbCA9IDE7DQor
DQorICAgIHRyeQ0KKyAgICB7DQorICAgICAgaWYgKFRSQUNFUi5pc0VuYWJsZWQoKSkNCisgICAg
ICB7DQorICAgICAgICBUUkFDRVIuZm9ybWF0KCJ7MH0gKHsxfSkiLCBzcWwudG9TdHJpbmcoKSwg
cmV2aXNpb24udG9TdHJpbmcoKSk7DQorICAgICAgfQ0KKyAgICAgIHN0bXQgPSBjb25uZWN0aW9u
LnByZXBhcmVTdGF0ZW1lbnQoc3FsLnRvU3RyaW5nKCkpOw0KKyAgICAgIHN0bXQuc2V0TG9uZyhj
b2wrKywgQ0RPSURVdGlsLmdldExvbmcocmV2aXNpb24uZ2V0SUQoKSkpOw0KKyAgICAgIHN0bXQu
c2V0SW50KGNvbCsrLCByZXZpc2lvbi5nZXRWZXJzaW9uKCkpOw0KKw0KKyAgICAgIGlmICh3aXRo
RnVsbFJldmlzaW9uSW5mbykNCisgICAgICB7DQorICAgICAgICBzdG10LnNldEludChjb2wrKywg
U2VydmVySW5mby5nZXREQklEKHJldmlzaW9uLmdldENET0NsYXNzKCkpKTsNCisgICAgICAgIHN0
bXQuc2V0TG9uZyhjb2wrKywgcmV2aXNpb24uZ2V0Q3JlYXRlZCgpKTsNCisgICAgICAgIHN0bXQu
c2V0TG9uZyhjb2wrKywgcmV2aXNpb24uZ2V0UmV2aXNlZCgpKTsNCisgICAgICAgIHN0bXQuc2V0
TG9uZyhjb2wrKywgQ0RPSURVdGlsLmdldExvbmcocmV2aXNpb24uZ2V0UmVzb3VyY2VJRCgpKSk7
DQorICAgICAgICBzdG10LnNldExvbmcoY29sKyssIENET0lEVXRpbC5nZXRMb25nKChDRE9JRCly
ZXZpc2lvbi5nZXRDb250YWluZXJJRCgpKSk7DQorICAgICAgICBzdG10LnNldEludChjb2wrKywg
cmV2aXNpb24uZ2V0Q29udGFpbmluZ0ZlYXR1cmVJRCgpKTsNCisgICAgICB9DQorDQorICAgICAg
Zm9yIChJQXR0cmlidXRlTWFwcGluZyBhdHRyaWJ1dGVNYXBwaW5nIDogYXR0cmlidXRlTWFwcGlu
Z3MpDQorICAgICAgew0KKyAgICAgICAgT2JqZWN0IHZhbHVlID0gYXR0cmlidXRlTWFwcGluZy5n
ZXRSZXZpc2lvblZhbHVlKHJldmlzaW9uKTsNCisgICAgICAgIHN0bXQuc2V0T2JqZWN0KGNvbCsr
LCB2YWx1ZSk7DQorICAgICAgfQ0KKyAgICAgIHN0bXQuZXhlY3V0ZSgpOw0KKyAgICB9DQorICAg
IGNhdGNoIChTUUxFeGNlcHRpb24gZSkNCisgICAgew0KKyAgICAgIHRocm93IG5ldyBEQkV4Y2Vw
dGlvbihlKTsNCisgICAgfQ0KKyAgICBmaW5hbGx5DQorICAgIHsNCisgICAgICBEQlV0aWwuY2xv
c2Uoc3RtdCk7DQorICAgIH0NCisgIH0NCisNCisgIEBPdmVycmlkZQ0KKyAgcHJvdGVjdGVkIHZv
aWQgZG9JbnNlcnRSZWZlcmVuY2UoQ29ubmVjdGlvbiBjb25uZWN0aW9uLCBTdHJpbmcgdGFibGVO
YW1lLCBsb25nIHNvdXJjZSwgaW50IHZlcnNpb24sIGludCBpLCBsb25nIHRhcmdldCkNCisgIHsN
CisgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7DQorDQorICAgIHRyeQ0KKyAgICB7
DQorICAgICAgU3RyaW5nQnVpbGRlciBzcWwgPSBuZXcgU3RyaW5nQnVpbGRlcigiSU5TRVJUIElO
VE8gIik7DQorICAgICAgc3FsLmFwcGVuZCh0YWJsZU5hbWUpOw0KKyAgICAgIHNxbC5hcHBlbmQo
U1FMX0lOU0VSVF9SRUZFUkVOQ0UpOw0KKw0KKyAgICAgIHN0bXQgPSBjb25uZWN0aW9uLnByZXBh
cmVTdGF0ZW1lbnQoc3FsLnRvU3RyaW5nKCkpOw0KKyAgICAgIHN0bXQuc2V0TG9uZygxLCBzb3Vy
Y2UpOw0KKyAgICAgIHN0bXQuc2V0SW50KDIsIHZlcnNpb24pOw0KKyAgICAgIHN0bXQuc2V0SW50
KDMsIGkpOw0KKyAgICAgIHN0bXQuc2V0TG9uZyg0LCB0YXJnZXQpOw0KKyAgICAgIGlmIChUUkFD
RVIuaXNFbmFibGVkKCkpDQorICAgICAgew0KKyAgICAgICAgVFJBQ0VSLmZvcm1hdCgiezB9ICh7
MX0sezJ9LHszfSx7NH0pIiwgc3FsLnRvU3RyaW5nKCksIHNvdXJjZSwgdmVyc2lvbiwgaSwgdGFy
Z2V0KTsNCisgICAgICB9DQorICAgICAgc3RtdC5leGVjdXRlKCk7DQorICAgIH0NCisgICAgY2F0
Y2ggKFNRTEV4Y2VwdGlvbiBlKQ0KKyAgICB7DQorICAgICAgdGhyb3cgbmV3IERCRXhjZXB0aW9u
KGUpOw0KKyAgICB9DQorICAgIGZpbmFsbHkNCisgICAgew0KKyAgICAgIERCVXRpbC5jbG9zZShz
dG10KTsNCisgICAgfQ0KKyAgfQ0KKw0KKyAgQE92ZXJyaWRlDQorICBwcm90ZWN0ZWQgdm9pZCBk
b0luc2VydFJlZmVyZW5jZShDb25uZWN0aW9uIGNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUs
IGludCBkYklkLCBsb25nIHNvdXJjZSwgaW50IHZlcnNpb24sIGludCBpLA0KKyAgICAgIGxvbmcg
dGFyZ2V0KQ0KKyAgew0KKyAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDsNCisNCisg
ICAgdHJ5DQorICAgIHsNCisgICAgICBTdHJpbmdCdWlsZGVyIHNxbCA9IG5ldyBTdHJpbmdCdWls
ZGVyKCJJTlNFUlQgSU5UTyAiKTsNCisgICAgICBzcWwuYXBwZW5kKHRhYmxlTmFtZSk7DQorICAg
ICAgc3FsLmFwcGVuZChTUUxfSU5TRVJUX1JFRkVSRU5DRV9XSVRIX0RCSUQpOw0KKw0KKyAgICAg
IHN0bXQgPSBjb25uZWN0aW9uLnByZXBhcmVTdGF0ZW1lbnQoc3FsLnRvU3RyaW5nKCkpOw0KKyAg
ICAgIHN0bXQuc2V0SW50KDEsIGRiSWQpOw0KKyAgICAgIHN0bXQuc2V0TG9uZygyLCBzb3VyY2Up
Ow0KKyAgICAgIHN0bXQuc2V0SW50KDMsIHZlcnNpb24pOw0KKyAgICAgIHN0bXQuc2V0SW50KDQs
IGkpOw0KKyAgICAgIHN0bXQuc2V0TG9uZyg1LCB0YXJnZXQpOw0KKw0KKyAgICAgIGlmIChUUkFD
RVIuaXNFbmFibGVkKCkpDQorICAgICAgew0KKyAgICAgICAgVFJBQ0VSLmZvcm1hdCgiezB9ICh7
MX0sezJ9LHszfSx7NH0sezV9KSIsIHNxbC50b1N0cmluZygpLCBkYklkLCBzb3VyY2UsIHZlcnNp
b24sIGksIHRhcmdldCk7DQorICAgICAgfQ0KKw0KKyAgICAgIHN0bXQuZXhlY3V0ZSgpOw0KKyAg
ICB9DQorICAgIGNhdGNoIChTUUxFeGNlcHRpb24gZSkNCisgICAgew0KKyAgICAgIHRocm93IG5l
dyBEQkV4Y2VwdGlvbihlKTsNCisgICAgfQ0KKyAgICBmaW5hbGx5DQorICAgIHsNCisgICAgICBE
QlV0aWwuY2xvc2Uoc3RtdCk7DQorICAgIH0NCisgIH0NCisNCisgIEBPdmVycmlkZQ0KKyAgcHJv
dGVjdGVkIHZvaWQgZG9VcGRhdGVSZXZpc2VkKENvbm5lY3Rpb24gY29ubmVjdGlvbiwgU3RyaW5n
IHRhYmxlTmFtZSwgbG9uZyByZXZpc2VkU3RhbXAsIGxvbmcgY2RvaWQsIGludCB2ZXJzaW9uKQ0K
KyAgew0KKyAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDsNCisNCisgICAgdHJ5DQor
ICAgIHsNCisgICAgICBTdHJpbmdCdWlsZGVyIHNxbCA9IG5ldyBTdHJpbmdCdWlsZGVyKCJVUERB
VEUgIik7DQorICAgICAgc3FsLmFwcGVuZCh0YWJsZU5hbWUpOw0KKyAgICAgIHNxbC5hcHBlbmQo
U1FMX1VQREFURV9SRVZJU0VfVkVSU0lPTik7DQorDQorICAgICAgc3RtdCA9IGNvbm5lY3Rpb24u
cHJlcGFyZVN0YXRlbWVudChzcWwudG9TdHJpbmcoKSk7DQorICAgICAgc3RtdC5zZXRMb25nKDEs
IHJldmlzZWRTdGFtcCk7DQorICAgICAgc3RtdC5zZXRMb25nKDIsIGNkb2lkKTsNCisgICAgICBz
dG10LnNldEludCgzLCB2ZXJzaW9uKTsNCisNCisgICAgICBpZiAoVFJBQ0VSLmlzRW5hYmxlZCgp
KQ0KKyAgICAgIHsNCisgICAgICAgIFRSQUNFUi5mb3JtYXQoInswfSAoezF9LHsyfSx7M30pIiwg
c3FsLnRvU3RyaW5nKCksIHJldmlzZWRTdGFtcCwgY2RvaWQsIHZlcnNpb24pOw0KKyAgICAgIH0N
CisNCisgICAgICBzdG10LmV4ZWN1dGUoKTsNCisgICAgfQ0KKyAgICBjYXRjaCAoU1FMRXhjZXB0
aW9uIGUpDQorICAgIHsNCisgICAgICB0aHJvdyBuZXcgREJFeGNlcHRpb24oZSk7DQorICAgIH0N
CisgICAgZmluYWxseQ0KKyAgICB7DQorICAgICAgREJVdGlsLmNsb3NlKHN0bXQpOw0KKyAgICB9
DQorICB9DQorDQorICBAT3ZlcnJpZGUNCisgIHByb3RlY3RlZCB2b2lkIGRvVXBkYXRlUmV2aXNl
ZChDb25uZWN0aW9uIGNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgcmV2aXNlZFN0
YW1wLCBsb25nIGNkb2lkKQ0KKyAgew0KKyAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVs
bDsNCisNCisgICAgdHJ5DQorICAgIHsNCisgICAgICBTdHJpbmdCdWlsZGVyIHNxbCA9IG5ldyBT
dHJpbmdCdWlsZGVyKCJVUERBVEUgIik7DQorICAgICAgc3FsLmFwcGVuZCh0YWJsZU5hbWUpOw0K
KyAgICAgIHNxbC5hcHBlbmQoU1FMX1VQREFURV9SRVZJU0VfVU5SRVZJU0VEKTsNCisNCisgICAg
ICBzdG10ID0gY29ubmVjdGlvbi5wcmVwYXJlU3RhdGVtZW50KHNxbC50b1N0cmluZygpKTsNCisg
ICAgICBzdG10LnNldExvbmcoMSwgcmV2aXNlZFN0YW1wKTsNCisgICAgICBzdG10LnNldExvbmco
MiwgY2RvaWQpOw0KKw0KKyAgICAgIGlmIChUUkFDRVIuaXNFbmFibGVkKCkpDQorICAgICAgew0K
KyAgICAgICAgVFJBQ0VSLmZvcm1hdCgiezB9ICh7MX0sezJ9KSIsIHNxbC50b1N0cmluZygpLCBy
ZXZpc2VkU3RhbXAsIGNkb2lkKTsNCisgICAgICB9DQorDQorICAgICAgc3RtdC5leGVjdXRlKCk7
DQorICAgIH0NCisgICAgY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKQ0KKyAgICB7DQorICAgICAgdGhy
b3cgbmV3IERCRXhjZXB0aW9uKGUpOw0KKyAgICB9DQorICAgIGZpbmFsbHkNCisgICAgew0KKyAg
ICAgIERCVXRpbC5jbG9zZShzdG10KTsNCisgICAgfQ0KKyAgfQ0KK30NCkluZGV4OiBzcmMvb3Jn
L2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9KREJDUGVyZm9ybWFuY2VN
ZWFzdXJlbWVudFdyYXBwZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHNyYy9vcmcvZWNs
aXBzZS9lbWYvY2RvL3NlcnZlci9pbnRlcm5hbC9kYi9qZGJjL0pEQkNQZXJmb3JtYW5jZU1lYXN1
cmVtZW50V3JhcHBlci5qYXZhDQpkaWZmIC1OIHNyYy9vcmcvZWNsaXBzZS9lbWYvY2RvL3NlcnZl
ci9pbnRlcm5hbC9kYi9qZGJjL0pEQkNQZXJmb3JtYW5jZU1lYXN1cmVtZW50V3JhcHBlci5qYXZh
DQotLS0gL2Rldi9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2Vj
bGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9KREJDUGVyZm9ybWFuY2VNZWFz
dXJlbWVudFdyYXBwZXIuamF2YQkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsx
LDE0NSBAQA0KKy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCisgKiBDb3B5cmlnaHQgKGMpIDIwMDQgLSAy
MDA4IEVpa2UgU3RlcHBlciwgR2VybWFueS4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlz
IHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZh
aWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4w
DQorICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFi
bGUgYXQNCisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAq
IA0KKyAqIENvbnRyaWJ1dG9yczoNCisgKiAgICBFaWtlIFN0ZXBwZXIgLSBpbml0aWFsIEFQSSBh
bmQgaW1wbGVtZW50YXRpb24NCisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQorcGFja2FnZSBvcmcuZWNs
aXBzZS5lbWYuY2RvLnNlcnZlci5pbnRlcm5hbC5kYi5qZGJjOw0KKw0KK2ltcG9ydCBvcmcuZWNs
aXBzZS5lbWYuY2RvLmNvbW1vbi5pZC5DRE9JRDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNk
by5jb21tb24ucmV2aXNpb24uQ0RPUmV2aXNpb247DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5j
ZG8uc2VydmVyLmRiLklBdHRyaWJ1dGVNYXBwaW5nOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYu
Y2RvLnNlcnZlci5kYi5JSkRCQ0RlbGVnYXRlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2Rv
LnNlcnZlci5pbnRlcm5hbC5kYi5idW5kbGUuT007DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5j
ZG8uc3BpLmNvbW1vbi5JbnRlcm5hbENET1JldmlzaW9uOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5uZXQ0ai51dGlsLm9tLnRyYWNlLkNvbnRleHRUcmFjZXI7DQorDQoraW1wb3J0IGphdmEuc3Fs
LkNvbm5lY3Rpb247DQoraW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOw0KK2ltcG9ydCBqYXZhLnV0
aWwuTGlzdDsNCisNCisvKioNCisgKiBAYXV0aG9yIFN0ZWZhbiBXaW5rbGVyDQorICogQHNpbmNl
IDIuMA0KKyAqLw0KK3B1YmxpYyBjbGFzcyBKREJDUGVyZm9ybWFuY2VNZWFzdXJlbWVudFdyYXBw
ZXIgaW1wbGVtZW50cyBJSkRCQ0RlbGVnYXRlDQorew0KKw0KKyAgcHJpdmF0ZSBjbGFzcyBUaW1l
RGF0YQ0KKyAgew0KKyAgICBwcml2YXRlIFN0cmluZyBtZXRob2Q7DQorDQorICAgIHByaXZhdGUg
bG9uZyB0aW1lTWluID0gSW50ZWdlci5NQVhfVkFMVUU7DQorDQorICAgIHByaXZhdGUgbG9uZyB0
aW1lTWF4ID0gSW50ZWdlci5NSU5fVkFMVUU7DQorDQorICAgIHByaXZhdGUgbG9uZyB0aW1lVG90
YWwgPSAwOw0KKw0KKyAgICBwcml2YXRlIGxvbmcgbnVtYmVyT2ZDYWxscyA9IDA7DQorDQorICAg
IHB1YmxpYyBUaW1lRGF0YShTdHJpbmcgbWV0aG9kKQ0KKyAgICB7DQorICAgICAgdGhpcy5tZXRo
b2QgPSBtZXRob2Q7DQorICAgIH0NCisNCisgICAgcHVibGljIHZvaWQgcmVnaXN0ZXJDYWxsKGxv
bmcgdGltZSkNCisgICAgew0KKyAgICAgIGlmICh0aW1lTWluID4gdGltZSkNCisgICAgICB7DQor
ICAgICAgICB0aW1lTWluID0gdGltZTsNCisgICAgICB9DQorICAgICAgaWYgKHRpbWVNYXggPCB0
aW1lKQ0KKyAgICAgIHsNCisgICAgICAgIHRpbWVNYXggPSB0aW1lOw0KKyAgICAgIH0NCisNCisg
ICAgICBudW1iZXJPZkNhbGxzKys7DQorICAgICAgdGltZVRvdGFsICs9IHRpbWU7DQorICAgIH0N
CisNCisgICAgcHVibGljIHZvaWQgcmVwb3J0KENvbnRleHRUcmFjZXIgdHJhY2VyKQ0KKyAgICB7
DQorICAgICAgdHJhY2VyLmZvcm1hdCgiezB9OiB7MX0gY2FsbHMsIHsyfSBhdmcsIHszfSBtaW4s
IHs0fSBtYXgiLCBtZXRob2QsIG51bWJlck9mQ2FsbHMsIHRpbWVUb3RhbCAvIG51bWJlck9mQ2Fs
bHMsDQorICAgICAgICAgIHRpbWVNaW4sIHRpbWVNYXgpOw0KKyAgICB9DQorICB9DQorDQorICBw
dWJsaWMgSkRCQ1BlcmZvcm1hbmNlTWVhc3VyZW1lbnRXcmFwcGVyKElKREJDRGVsZWdhdGUgZGVs
ZWdhdGUpDQorICB7DQorICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTsNCisgIH0NCisNCisg
IHByaXZhdGUgSUpEQkNEZWxlZ2F0ZSBkZWxlZ2F0ZTsNCisNCisgIHByaXZhdGUgSGFzaE1hcDxT
dHJpbmcsIFRpbWVEYXRhPiB0aW1lRGF0YSA9IG5ldyBIYXNoTWFwPFN0cmluZywgVGltZURhdGE+
KCk7DQorDQorICBwcml2YXRlIHN0YXRpYyBmaW5hbCBDb250ZXh0VHJhY2VyIFRSQUNFUiA9IG5l
dyBDb250ZXh0VHJhY2VyKE9NLkRFQlVHLCBOb25QcmVwYXJlZFN0YXRlbWVudEpEQkNXcmFwcGVy
LmNsYXNzKTsNCisNCisgIHB1YmxpYyBmaW5hbCB2b2lkIGluc2VydEF0dHJpYnV0ZXMoQ29ubmVj
dGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIEludGVybmFsQ0RPUmV2aXNpb24g
cmV2aXNpb24sDQorICAgICAgTGlzdDxJQXR0cmlidXRlTWFwcGluZz4gYXR0cmlidXRlTWFwcGlu
Z3MsIGJvb2xlYW4gd2l0aEZ1bGxSZXZpc2lvbkluZm8pDQorICB7DQorICAgIGxvbmcgdGltZSA9
IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOw0KKyAgICBkZWxlZ2F0ZS5pbnNlcnRBdHRyaWJ1
dGVzKGRiQ29ubmVjdGlvbiwgdGFibGVOYW1lLCByZXZpc2lvbiwgYXR0cmlidXRlTWFwcGluZ3Ms
IHdpdGhGdWxsUmV2aXNpb25JbmZvKTsNCisgICAgdGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1p
bGxpcygpIC0gdGltZTsNCisNCisgICAgcmVnaXN0ZXJDYWxsKCJpbnNlcnRBdHRyaWJ1dGVzIiwg
dGltZSk7DQorICB9DQorDQorICBwdWJsaWMgZmluYWwgdm9pZCBpbnNlcnRSZWZlcmVuY2UoQ29u
bmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIGludCBkYklkLCBDRE9SZXZp
c2lvbiBzb3VyY2VSZXZpc2lvbiwNCisgICAgICBpbnQgaWR4LCBDRE9JRCB0YXJnZXRJZCkNCisg
IHsNCisgICAgbG9uZyB0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7DQorICAgIGRl
bGVnYXRlLmluc2VydFJlZmVyZW5jZShkYkNvbm5lY3Rpb24sIHRhYmxlTmFtZSwgZGJJZCwgc291
cmNlUmV2aXNpb24sIGlkeCwgdGFyZ2V0SWQpOw0KKyAgICB0aW1lID0gU3lzdGVtLmN1cnJlbnRU
aW1lTWlsbGlzKCkgLSB0aW1lOw0KKyAgICByZWdpc3RlckNhbGwoImluc2VydFJlZmVyZW5jZURi
SWQiLCB0aW1lKTsNCisgIH0NCisNCisgIHB1YmxpYyBmaW5hbCB2b2lkIGluc2VydFJlZmVyZW5j
ZShDb25uZWN0aW9uIGRiQ29ubmVjdGlvbiwgU3RyaW5nIHRhYmxlTmFtZSwgQ0RPUmV2aXNpb24g
c291cmNlUmV2aXNpb24sIGludCBpZHgsDQorICAgICAgQ0RPSUQgdGFyZ2V0SWQpDQorICB7DQor
ICAgIGxvbmcgdGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOw0KKyAgICBkZWxlZ2F0
ZS5pbnNlcnRSZWZlcmVuY2UoZGJDb25uZWN0aW9uLCB0YWJsZU5hbWUsIHNvdXJjZVJldmlzaW9u
LCBpZHgsIHRhcmdldElkKTsNCisgICAgdGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygp
IC0gdGltZTsNCisgICAgcmVnaXN0ZXJDYWxsKCJpbnNlcnRSZWZlcmVuY2UiLCB0aW1lKTsNCisg
IH0NCisNCisgIHB1YmxpYyBmaW5hbCB2b2lkIHVwZGF0ZVJldmlzZWQoQ29ubmVjdGlvbiBkYkNv
bm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIENET1JldmlzaW9uIHJldmlzaW9uKQ0KKyAgew0K
KyAgICBsb25nIHRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsNCisgICAgZGVsZWdh
dGUudXBkYXRlUmV2aXNlZChkYkNvbm5lY3Rpb24sIHRhYmxlTmFtZSwgcmV2aXNpb24pOw0KKyAg
ICB0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSB0aW1lOw0KKyAgICByZWdpc3Rl
ckNhbGwoInVwZGF0ZVJldmlzZWRSZXZpc2lvbiIsIHRpbWUpOw0KKyAgfQ0KKw0KKyAgcHVibGlj
IGZpbmFsIHZvaWQgdXBkYXRlUmV2aXNlZChDb25uZWN0aW9uIGRiQ29ubmVjdGlvbiwgU3RyaW5n
IHRhYmxlTmFtZSwgbG9uZyByZXZpc2VkLCBDRE9JRCBjZG9pZCkNCisgIHsNCisgICAgbG9uZyB0
aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7DQorICAgIGRlbGVnYXRlLnVwZGF0ZVJl
dmlzZWQoZGJDb25uZWN0aW9uLCB0YWJsZU5hbWUsIHJldmlzZWQsIGNkb2lkKTsNCisgICAgdGlt
ZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGltZTsNCisgICAgcmVnaXN0ZXJDYWxs
KCJ1cGRhdGVSZXZpc2VkSUQiLCB0aW1lKTsNCisgIH0NCisNCisgIHByaXZhdGUgdm9pZCByZWdp
c3RlckNhbGwoU3RyaW5nIG1ldGhvZCwgbG9uZyB0aW1lKQ0KKyAgew0KKyAgICBUaW1lRGF0YSBk
YXRhID0gdGltZURhdGEuZ2V0KG1ldGhvZCk7DQorICAgIGlmIChkYXRhID09IG51bGwpDQorICAg
IHsNCisgICAgICBkYXRhID0gbmV3IFRpbWVEYXRhKG1ldGhvZCk7DQorICAgICAgdGltZURhdGEu
cHV0KG1ldGhvZCwgZGF0YSk7DQorICAgIH0NCisgICAgZGF0YS5yZWdpc3RlckNhbGwodGltZSk7
DQorICB9DQorDQorICBwdWJsaWMgdm9pZCByZXBvcnQoKQ0KKyAgew0KKyAgICBmb3IgKFRpbWVE
YXRhIHRkIDogdGltZURhdGEudmFsdWVzKCkpDQorICAgIHsNCisgICAgICB0ZC5yZXBvcnQoVFJB
Q0VSKTsNCisgICAgfQ0KKyAgfQ0KK30NCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9z
ZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9BYnN0cmFjdEpEQkNEZWxlZ2F0ZS5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2Ri
L2pkYmMvQWJzdHJhY3RKREJDRGVsZWdhdGUuamF2YQ0KZGlmZiAtTiBzcmMvb3JnL2VjbGlwc2Uv
ZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9BYnN0cmFjdEpEQkNEZWxlZ2F0ZS5qYXZh
DQotLS0gL2Rldi9udWxsCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2Vj
bGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRiYy9BYnN0cmFjdEpEQkNEZWxlZ2F0
ZS5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCkBAIC0wLDAgKzEsNzggQEANCisvKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqDQorICogQ29weXJpZ2h0IChjKSAyMDA0IC0gMjAwOCBFaWtlIFN0ZXBw
ZXIsIEdlcm1hbnkuDQorICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0
aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscw0KKyAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMA0KKyAqIHdoaWNoIGFj
Y29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0DQorICogaHR0
cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwNCisgKiANCisgKiBDb250cmli
dXRvcnM6DQorICogICAgRWlrZSBTdGVwcGVyIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0
aW9uDQorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqLw0KK3BhY2thZ2Ugb3JnLmVjbGlwc2UuZW1mLmNkby5z
ZXJ2ZXIuaW50ZXJuYWwuZGIuamRiYzsNCisNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNkby5j
b21tb24uaWQuQ0RPSUQ7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5jZG8uY29tbW9uLmlkLkNE
T0lEVXRpbDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNkby5jb21tb24ucmV2aXNpb24uQ0RP
UmV2aXNpb247DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5jZG8uc2VydmVyLmRiLklBdHRyaWJ1
dGVNYXBwaW5nOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5kYi5JSkRCQ0Rl
bGVnYXRlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5pbnRlcm5hbC5kYi5i
dW5kbGUuT007DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5jZG8uc3BpLmNvbW1vbi5JbnRlcm5h
bENET1JldmlzaW9uOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5uZXQ0ai51dGlsLm9tLnRyYWNl
LkNvbnRleHRUcmFjZXI7DQorDQoraW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247DQoraW1wb3J0
IGphdmEudXRpbC5MaXN0Ow0KKw0KKy8qKg0KKyAqIEBhdXRob3IgRWlrZSBTdGVwcGVyDQorICov
DQorcHVibGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0SkRCQ0RlbGVnYXRlIGltcGxlbWVudHMg
SUpEQkNEZWxlZ2F0ZQ0KK3sNCisgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgQ29udGV4dFRyYWNl
ciBUUkFDRVIgPSBuZXcgQ29udGV4dFRyYWNlcihPTS5ERUJVRywgQWJzdHJhY3RKREJDRGVsZWdh
dGUuY2xhc3MpOw0KKw0KKyAgcHJvdGVjdGVkIGFic3RyYWN0IHZvaWQgZG9JbnNlcnRBdHRyaWJ1
dGVzKENvbm5lY3Rpb24gZGJDb25uZWN0aW9uLCBTdHJpbmcgdGFibGVOYW1lLCBJbnRlcm5hbENE
T1JldmlzaW9uIHJldmlzaW9uLA0KKyAgICAgIExpc3Q8SUF0dHJpYnV0ZU1hcHBpbmc+IGF0dHJp
YnV0ZU1hcHBpbmdzLCBib29sZWFuIHdpdGhGdWxsUmV2aXNpb25JbmZvKTsNCisNCisgIHByb3Rl
Y3RlZCBhYnN0cmFjdCB2b2lkIGRvSW5zZXJ0UmVmZXJlbmNlKENvbm5lY3Rpb24gZGJDb25uZWN0
aW9uLCBTdHJpbmcgdGFibGVOYW1lLCBpbnQgZGJJZCwgbG9uZyBzb3VyY2UsDQorICAgICAgaW50
IHZlcnNpb24sIGludCBpLCBsb25nIHRhcmdldCk7DQorDQorICBwcm90ZWN0ZWQgYWJzdHJhY3Qg
dm9pZCBkb0luc2VydFJlZmVyZW5jZShDb25uZWN0aW9uIGRiQ29ubmVjdGlvbiwgU3RyaW5nIHRh
YmxlTmFtZSwgbG9uZyBzb3VyY2UsIGludCB2ZXJzaW9uLCBpbnQgaSwNCisgICAgICBsb25nIHRh
cmdldCk7DQorDQorICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBkb1VwZGF0ZVJldmlzZWQoQ29u
bmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgcmV2aXNlZCwgbG9u
ZyBjZG9pZCk7DQorDQorICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBkb1VwZGF0ZVJldmlzZWQo
Q29ubmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgcmV2aXNlZFN0
YW1wLCBsb25nIGNkb2lkLA0KKyAgICAgIGludCB2ZXJzaW9uKTsNCisNCisgIHB1YmxpYyBmaW5h
bCB2b2lkIGluc2VydEF0dHJpYnV0ZXMoQ29ubmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0
YWJsZU5hbWUsIEludGVybmFsQ0RPUmV2aXNpb24gcmV2aXNpb24sDQorICAgICAgTGlzdDxJQXR0
cmlidXRlTWFwcGluZz4gYXR0cmlidXRlTWFwcGluZ3MsIGJvb2xlYW4gd2l0aEZ1bGxSZXZpc2lv
bkluZm8pDQorICB7DQorICAgIGRvSW5zZXJ0QXR0cmlidXRlcyhkYkNvbm5lY3Rpb24sIHRhYmxl
TmFtZSwgcmV2aXNpb24sIGF0dHJpYnV0ZU1hcHBpbmdzLCB3aXRoRnVsbFJldmlzaW9uSW5mbyk7
DQorICB9DQorDQorICBwdWJsaWMgZmluYWwgdm9pZCBpbnNlcnRSZWZlcmVuY2UoQ29ubmVjdGlv
biBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIENET1JldmlzaW9uIHNvdXJjZVJldmlz
aW9uLCBpbnQgaWR4LA0KKyAgICAgIENET0lEIHRhcmdldElkKQ0KKyAgew0KKyAgICBkb0luc2Vy
dFJlZmVyZW5jZShkYkNvbm5lY3Rpb24sIHRhYmxlTmFtZSwgQ0RPSURVdGlsLmdldExvbmcoc291
cmNlUmV2aXNpb24uZ2V0SUQoKSksIHNvdXJjZVJldmlzaW9uLmdldFZlcnNpb24oKSwNCisgICAg
ICAgIGlkeCwgQ0RPSURVdGlsLmdldExvbmcodGFyZ2V0SWQpKTsNCisgIH0NCisNCisgIHB1Ymxp
YyBmaW5hbCB2b2lkIGluc2VydFJlZmVyZW5jZShDb25uZWN0aW9uIGRiQ29ubmVjdGlvbiwgU3Ry
aW5nIHRhYmxlTmFtZSwgaW50IGRiSWQsIENET1JldmlzaW9uIHNvdXJjZVJldmlzaW9uLA0KKyAg
ICAgIGludCBpZHgsIENET0lEIHRhcmdldElkKQ0KKyAgew0KKyAgICBkb0luc2VydFJlZmVyZW5j
ZShkYkNvbm5lY3Rpb24sIHRhYmxlTmFtZSwgZGJJZCwgQ0RPSURVdGlsLmdldExvbmcoc291cmNl
UmV2aXNpb24uZ2V0SUQoKSksIHNvdXJjZVJldmlzaW9uDQorICAgICAgICAuZ2V0VmVyc2lvbigp
LCBpZHgsIENET0lEVXRpbC5nZXRMb25nKHRhcmdldElkKSk7DQorICB9DQorDQorICBwdWJsaWMg
ZmluYWwgdm9pZCB1cGRhdGVSZXZpc2VkKENvbm5lY3Rpb24gZGJDb25uZWN0aW9uLCBTdHJpbmcg
dGFibGVOYW1lLCBDRE9SZXZpc2lvbiByZXZpc2lvbikNCisgIHsNCisgICAgZG9VcGRhdGVSZXZp
c2VkKGRiQ29ubmVjdGlvbiwgdGFibGVOYW1lLCByZXZpc2lvbi5nZXRDcmVhdGVkKCkgLSAxLCBD
RE9JRFV0aWwuZ2V0TG9uZyhyZXZpc2lvbi5nZXRJRCgpKSwgcmV2aXNpb24NCisgICAgICAgIC5n
ZXRWZXJzaW9uKCkgLSAxKTsNCisgIH0NCisNCisgIHB1YmxpYyBmaW5hbCB2b2lkIHVwZGF0ZVJl
dmlzZWQoQ29ubmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgcmV2
aXNlZCwgQ0RPSUQgaWQpDQorICB7DQorICAgIGRvVXBkYXRlUmV2aXNlZChkYkNvbm5lY3Rpb24s
IHRhYmxlTmFtZSwgcmV2aXNlZCwgQ0RPSURVdGlsLmdldExvbmcoaWQpKTsNCisgIH0NCisNCit9
DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2RiL2pkYmMv
Tm9uUHJlcGFyZWRTdGF0ZW1lbnRKREJDV3JhcHBlci5qYXZhDQo9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmls
ZTogc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2RiL2pkYmMvTm9uUHJl
cGFyZWRTdGF0ZW1lbnRKREJDV3JhcHBlci5qYXZhDQpkaWZmIC1OIHNyYy9vcmcvZWNsaXBzZS9l
bWYvY2RvL3NlcnZlci9pbnRlcm5hbC9kYi9qZGJjL05vblByZXBhcmVkU3RhdGVtZW50SkRCQ1dy
YXBwZXIuamF2YQ0KLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysg
c3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2RiL2pkYmMvTm9uUHJlcGFy
ZWRTdGF0ZW1lbnRKREJDV3JhcHBlci5qYXZhCTEgSmFuIDE5NzAgMDA6MDA6MDAgLTAwMDANCkBA
IC0wLDAgKzEsMTkwIEBADQorLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykg
MjAwNCAtIDIwMDggRWlrZSBTdGVwcGVyLCBHZXJtYW55Lg0KKyAqIEFsbCByaWdodHMgcmVzZXJ2
ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMNCisgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjANCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlz
IGF2YWlsYWJsZSBhdA0KKyAqIGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5o
dG1sDQorICogDQorICogQ29udHJpYnV0b3JzOg0KKyAqICAgIEVpa2UgU3RlcHBlciAtIGluaXRp
YWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbg0KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCitwYWNrYWdl
IG9yZy5lY2xpcHNlLmVtZi5jZG8uc2VydmVyLmludGVybmFsLmRiLmpkYmM7DQorDQoraW1wb3J0
IG9yZy5lY2xpcHNlLmVtZi5jZG8uY29tbW9uLmlkLkNET0lEOw0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5lbWYuY2RvLmNvbW1vbi5pZC5DRE9JRFV0aWw7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5j
ZG8uc2VydmVyLmRiLklBdHRyaWJ1dGVNYXBwaW5nOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYu
Y2RvLnNlcnZlci5pbnRlcm5hbC5kYi5DRE9EQlNjaGVtYTsNCitpbXBvcnQgb3JnLmVjbGlwc2Uu
ZW1mLmNkby5zZXJ2ZXIuaW50ZXJuYWwuZGIuU2VydmVySW5mbzsNCitpbXBvcnQgb3JnLmVjbGlw
c2UuZW1mLmNkby5zcGkuY29tbW9uLkludGVybmFsQ0RPUmV2aXNpb247DQorDQoraW1wb3J0IG9y
Zy5lY2xpcHNlLm5ldDRqLmRiLkRCRXhjZXB0aW9uOw0KKw0KK2ltcG9ydCBqYXZhLnNxbC5Db25u
ZWN0aW9uOw0KK2ltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247DQoraW1wb3J0IGphdmEuc3Fs
LlN0YXRlbWVudDsNCitpbXBvcnQgamF2YS51dGlsLkxpc3Q7DQorDQorLyoqDQorICogQGF1dGhv
ciBTdGVmYW4gV2lua2xlcg0KKyAqIEBzaW5jZSAyLjANCisgKi8NCitwdWJsaWMgY2xhc3MgTm9u
UHJlcGFyZWRTdGF0ZW1lbnRKREJDV3JhcHBlciBleHRlbmRzIEFic3RyYWN0SkRCQ0RlbGVnYXRl
DQorew0KKw0KKyAgQE92ZXJyaWRlDQorICBwcm90ZWN0ZWQgdm9pZCBkb0luc2VydEF0dHJpYnV0
ZXMoQ29ubmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZSwgSW50ZXJuYWxDRE9SZXZp
c2lvbiByZXZpc2lvbiwNCisgICAgICBMaXN0PElBdHRyaWJ1dGVNYXBwaW5nPiBhdHRyaWJ1dGVN
YXBwaW5ncywgYm9vbGVhbiB3aXRoRnVsbFJldmlzaW9uSW5mbykNCisgIHsNCisgICAgU3RyaW5n
QnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsNCisgICAgYnVpbGRlci5hcHBl
bmQoIklOU0VSVCBJTlRPICIpOw0KKyAgICBidWlsZGVyLmFwcGVuZCh0YWJsZSk7DQorICAgIGJ1
aWxkZXIuYXBwZW5kKCIgVkFMVUVTICgiKTsNCisNCisgICAgYnVpbGRlci5hcHBlbmQoQ0RPSURV
dGlsLmdldExvbmcocmV2aXNpb24uZ2V0SUQoKSkpOw0KKyAgICBidWlsZGVyLmFwcGVuZCgiLCAi
KTsNCisgICAgYnVpbGRlci5hcHBlbmQocmV2aXNpb24uZ2V0VmVyc2lvbigpKTsNCisNCisgICAg
aWYgKHdpdGhGdWxsUmV2aXNpb25JbmZvKQ0KKyAgICB7DQorICAgICAgYnVpbGRlci5hcHBlbmQo
IiwgIik7DQorICAgICAgYnVpbGRlci5hcHBlbmQoU2VydmVySW5mby5nZXREQklEKHJldmlzaW9u
LmdldENET0NsYXNzKCkpKTsNCisgICAgICBidWlsZGVyLmFwcGVuZCgiLCAiKTsNCisgICAgICBi
dWlsZGVyLmFwcGVuZChyZXZpc2lvbi5nZXRDcmVhdGVkKCkpOw0KKyAgICAgIGJ1aWxkZXIuYXBw
ZW5kKCIsICIpOw0KKyAgICAgIGJ1aWxkZXIuYXBwZW5kKHJldmlzaW9uLmdldFJldmlzZWQoKSk7
DQorICAgICAgYnVpbGRlci5hcHBlbmQoIiwgIik7DQorICAgICAgYnVpbGRlci5hcHBlbmQoQ0RP
SURVdGlsLmdldExvbmcocmV2aXNpb24uZ2V0UmVzb3VyY2VJRCgpKSk7DQorICAgICAgYnVpbGRl
ci5hcHBlbmQoIiwgIik7DQorICAgICAgYnVpbGRlci5hcHBlbmQoQ0RPSURVdGlsLmdldExvbmco
KENET0lEKXJldmlzaW9uLmdldENvbnRhaW5lcklEKCkpKTsNCisgICAgICBidWlsZGVyLmFwcGVu
ZCgiLCAiKTsNCisgICAgICBidWlsZGVyLmFwcGVuZChyZXZpc2lvbi5nZXRDb250YWluaW5nRmVh
dHVyZUlEKCkpOw0KKyAgICB9DQorDQorICAgIGlmIChhdHRyaWJ1dGVNYXBwaW5ncyAhPSBudWxs
KQ0KKyAgICB7DQorICAgICAgZm9yIChJQXR0cmlidXRlTWFwcGluZyBhdHRyaWJ1dGVNYXBwaW5n
IDogYXR0cmlidXRlTWFwcGluZ3MpDQorICAgICAgew0KKyAgICAgICAgYnVpbGRlci5hcHBlbmQo
IiwgIik7DQorICAgICAgICBPYmplY3QgdmFsdWUgPSBhdHRyaWJ1dGVNYXBwaW5nLmdldFJldmlz
aW9uVmFsdWUocmV2aXNpb24pOw0KKyAgICAgICAgYXR0cmlidXRlTWFwcGluZy5nZXRGaWVsZCgp
LmFwcGVuZFZhbHVlKGJ1aWxkZXIsIHZhbHVlKTsNCisgICAgICB9DQorICAgIH0NCisNCisgICAg
YnVpbGRlci5hcHBlbmQoIikiKTsNCisgICAgc3FsVXBkYXRlKGRiQ29ubmVjdGlvbiwgYnVpbGRl
ci50b1N0cmluZygpKTsNCisgIH0NCisNCisgIEBPdmVycmlkZQ0KKyAgcHJvdGVjdGVkIHZvaWQg
ZG9VcGRhdGVSZXZpc2VkKENvbm5lY3Rpb24gZGJDb25uZWN0aW9uLCBTdHJpbmcgdGFibGUsIGxv
bmcgcmV2aXNlZFN0YW1wLCBsb25nIGNkb2lkLCBpbnQgdmVyc2lvbikNCisgIHsNCisgICAgU3Ry
aW5nQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsNCisgICAgYnVpbGRlci5h
cHBlbmQoIlVQREFURSAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQodGFibGUpOw0KKyAgICBidWls
ZGVyLmFwcGVuZCgiIFNFVCAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQoQ0RPREJTY2hlbWEuQVRU
UklCVVRFU19SRVZJU0VEKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIj0iKTsNCisgICAgYnVpbGRl
ci5hcHBlbmQocmV2aXNlZFN0YW1wKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIiBXSEVSRSAiKTsN
CisgICAgYnVpbGRlci5hcHBlbmQoQ0RPREJTY2hlbWEuQVRUUklCVVRFU19JRCk7DQorICAgIGJ1
aWxkZXIuYXBwZW5kKCI9Iik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKGNkb2lkKTsNCisgICAgYnVp
bGRlci5hcHBlbmQoIiBBTkQgIik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKENET0RCU2NoZW1hLkFU
VFJJQlVURVNfVkVSU0lPTik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCI9Iik7DQorICAgIGJ1aWxk
ZXIuYXBwZW5kKHZlcnNpb24pOw0KKyAgICBzcWxVcGRhdGUoZGJDb25uZWN0aW9uLCBidWlsZGVy
LnRvU3RyaW5nKCkpOw0KKyAgfQ0KKw0KKyAgQE92ZXJyaWRlDQorICBwcm90ZWN0ZWQgdm9pZCBk
b1VwZGF0ZVJldmlzZWQoQ29ubmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0cmluZyB0YWJsZSwgbG9u
ZyByZXZpc2VkU3RhbXAsIGxvbmcgY2RvaWQpDQorICB7DQorICAgIFN0cmluZ0J1aWxkZXIgYnVp
bGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCJVUERBVEUg
Iik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKHRhYmxlKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIiBT
RVQgIik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKENET0RCU2NoZW1hLkFUVFJJQlVURVNfUkVWSVNF
RCk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCI9Iik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKHJldmlz
ZWRTdGFtcCk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCIgV0hFUkUgIik7DQorICAgIGJ1aWxkZXIu
YXBwZW5kKENET0RCU2NoZW1hLkFUVFJJQlVURVNfSUQpOw0KKyAgICBidWlsZGVyLmFwcGVuZCgi
PSIpOw0KKyAgICBidWlsZGVyLmFwcGVuZChjZG9pZCk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCIg
QU5EICIpOw0KKyAgICBidWlsZGVyLmFwcGVuZChDRE9EQlNjaGVtYS5BVFRSSUJVVEVTX1JFVklT
RUQpOw0KKyAgICBidWlsZGVyLmFwcGVuZCgiPTAiKTsNCisgICAgc3FsVXBkYXRlKGRiQ29ubmVj
dGlvbiwgYnVpbGRlci50b1N0cmluZygpKTsNCisgIH0NCisNCisgIEBPdmVycmlkZQ0KKyAgcHJv
dGVjdGVkIHZvaWQgZG9JbnNlcnRSZWZlcmVuY2UoQ29ubmVjdGlvbiBkYkNvbm5lY3Rpb24sIFN0
cmluZyB0YWJsZSwgbG9uZyBzb3VyY2UsIGludCB2ZXJzaW9uLCBpbnQgaSwgbG9uZyB0YXJnZXQp
DQorICB7DQorICAgIFN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7
DQorICAgIGJ1aWxkZXIuYXBwZW5kKCJJTlNFUlQgSU5UTyAiKTsNCisgICAgYnVpbGRlci5hcHBl
bmQodGFibGUpOw0KKyAgICBidWlsZGVyLmFwcGVuZCgiIFZBTFVFUyAoIik7DQorICAgIGJ1aWxk
ZXIuYXBwZW5kKHNvdXJjZSk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCIsICIpOw0KKyAgICBidWls
ZGVyLmFwcGVuZCh2ZXJzaW9uKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIiwgIik7DQorICAgIGJ1
aWxkZXIuYXBwZW5kKGkpOw0KKyAgICBidWlsZGVyLmFwcGVuZCgiLCAiKTsNCisgICAgYnVpbGRl
ci5hcHBlbmQodGFyZ2V0KTsNCisgICAgYnVpbGRlci5hcHBlbmQoIikiKTsNCisgICAgc3FsVXBk
YXRlKGRiQ29ubmVjdGlvbiwgYnVpbGRlci50b1N0cmluZygpKTsNCisgIH0NCisNCisgIEBPdmVy
cmlkZQ0KKyAgcHJvdGVjdGVkIHZvaWQgZG9JbnNlcnRSZWZlcmVuY2UoQ29ubmVjdGlvbiBkYkNv
bm5lY3Rpb24sIFN0cmluZyB0YWJsZSwgaW50IGRiSWQsIGxvbmcgc291cmNlLCBpbnQgdmVyc2lv
biwgaW50IGksDQorICAgICAgbG9uZyB0YXJnZXQpDQorICB7DQorICAgIFN0cmluZ0J1aWxkZXIg
YnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCJJTlNF
UlQgSU5UTyAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQodGFibGUpOw0KKyAgICBidWlsZGVyLmFw
cGVuZCgiIFZBTFVFUyAoIik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKGRiSWQpOw0KKyAgICBidWls
ZGVyLmFwcGVuZCgiLCAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQoc291cmNlKTsNCisgICAgYnVp
bGRlci5hcHBlbmQoIiwgIik7DQorICAgIGJ1aWxkZXIuYXBwZW5kKHZlcnNpb24pOw0KKyAgICBi
dWlsZGVyLmFwcGVuZCgiLCAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQoaSk7DQorICAgIGJ1aWxk
ZXIuYXBwZW5kKCIsICIpOw0KKyAgICBidWlsZGVyLmFwcGVuZCh0YXJnZXQpOw0KKyAgICBidWls
ZGVyLmFwcGVuZCgiKSIpOw0KKyAgICBzcWxVcGRhdGUoZGJDb25uZWN0aW9uLCBidWlsZGVyLnRv
U3RyaW5nKCkpOw0KKyAgfQ0KKw0KKyAgcHJpdmF0ZSBpbnQgc3FsVXBkYXRlKENvbm5lY3Rpb24g
ZGJDb25uZWN0aW9uLCBTdHJpbmcgc3FsKSB0aHJvd3MgREJFeGNlcHRpb24NCisgIHsNCisgICAg
aWYgKFRSQUNFUi5pc0VuYWJsZWQoKSkNCisgICAgew0KKyAgICAgIFRSQUNFUi50cmFjZShzcWwp
Ow0KKyAgICB9DQorDQorICAgIFN0YXRlbWVudCBzdGF0ZW1lbnQgPSBudWxsOw0KKyAgICB0cnkN
CisgICAgew0KKyAgICAgIHN0YXRlbWVudCA9IGRiQ29ubmVjdGlvbi5jcmVhdGVTdGF0ZW1lbnQo
KTsNCisgICAgICByZXR1cm4gc3RhdGVtZW50LmV4ZWN1dGVVcGRhdGUoc3FsKTsNCisgICAgfQ0K
KyAgICBjYXRjaCAoU1FMRXhjZXB0aW9uIGV4KQ0KKyAgICB7DQorICAgICAgdGhyb3cgbmV3IERC
RXhjZXB0aW9uKGV4KTsNCisgICAgfQ0KKyAgICBmaW5hbGx5DQorICAgIHsNCisgICAgICB0cnkN
CisgICAgICB7DQorICAgICAgICBzdGF0ZW1lbnQuY2xvc2UoKTsNCisgICAgICB9DQorICAgICAg
Y2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKQ0KKyAgICAgIHsNCisgICAgICAgIGlmIChUUkFDRVIuaXNF
bmFibGVkKCkpDQorICAgICAgICB7DQorICAgICAgICAgIFRSQUNFUi50cmFjZShlKTsNCisgICAg
ICAgIH0NCisgICAgICB9DQorICAgIH0NCisgIH0NCisNCit9DQo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>117547</attachid>
            <date>2008-11-11 09:30:00 -0500</date>
            <delta_ts>2008-11-11 09:30:24 -0500</delta_ts>
            <desc>New patch based on current HEAD</desc>
            <filename>preparedStatements-v2.patch</filename>
            <type>text/plain</type>
            <size>17675</size>
            <attacher name="Stefan Winkler">stefan</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuZW1mLmNkby50
ZXN0cw0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9lbWYvY2RvL3Rlc3RzL2NvbmZpZy9pbXBsL1Jl
cG9zaXRvcnlDb25maWcuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L21vZGVs
aW5nL29yZy5lY2xpcHNlLmVtZi9vcmcuZWNsaXBzZS5lbWYuY2RvL3Rlc3RzL29yZy5lY2xpcHNl
LmVtZi5jZG8udGVzdHMvc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vdGVzdHMvY29uZmlnL2ltcGwv
UmVwb3NpdG9yeUNvbmZpZy5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4yDQpkaWZmIC11
IC1yMS4yIFJlcG9zaXRvcnlDb25maWcuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9lbWYvY2Rv
L3Rlc3RzL2NvbmZpZy9pbXBsL1JlcG9zaXRvcnlDb25maWcuamF2YQk5IE5vdiAyMDA4IDEwOjU2
OjMwIC0wMDAwCTEuMg0KKysrIHNyYy9vcmcvZWNsaXBzZS9lbWYvY2RvL3Rlc3RzL2NvbmZpZy9p
bXBsL1JlcG9zaXRvcnlDb25maWcuamF2YQkxMSBOb3YgMjAwOCAxNDoyODo0OSAtMDAwMA0KQEAg
LTMzNyw2ICszMzcsMjQgQEANCiAgICAgfQ0KICAgfQ0KIA0KKyAgcHVibGljIHN0YXRpYyBjbGFz
cyBEQkhzcWxkYlByZXBTdG10IGV4dGVuZHMgREJIc3FsZGINCisgIHsNCisgICAgcHJpdmF0ZSBz
dGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7DQorDQorICAgIHB1YmxpYyBz
dGF0aWMgZmluYWwgREJIc3FsZGJQcmVwU3RtdCBIU1FMREJfSE9SSVpPTlRBTF9QUkVQU1RNVCA9
IG5ldyBEQkhzcWxkYlByZXBTdG10KCJIc3FsZGJIb3Jpem9udGFsUHJlcFN0bXQiKTsNCisNCisg
ICAgcHVibGljIERCSHNxbGRiUHJlcFN0bXQoU3RyaW5nIG5hbWUpDQorICAgIHsNCisgICAgICBz
dXBlcihuYW1lKTsNCisgICAgfQ0KKw0KKyAgICBAT3ZlcnJpZGUNCisgICAgcHJvdGVjdGVkIElK
REJDRGVsZWdhdGVQcm92aWRlciBjcmVhdGVEZWxlZ2F0ZVByb3ZpZGVyKCkNCisgICAgew0KKyAg
ICAgIHJldHVybiBDRE9EQlV0aWwuY3JlYXRlUHJlcGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGVQ
cm92aWRlcigpOw0KKyAgICB9DQorICB9DQorDQogICAvKioNCiAgICAqIEBhdXRob3IgRWlrZSBT
dGVwcGVyDQogICAgKi8NCkBAIC00MDgsNiArNDI2LDI0IEBADQogICAgIH0NCiAgIH0NCiANCisg
IHB1YmxpYyBzdGF0aWMgY2xhc3MgREJEZXJieVByZXBTdG10IGV4dGVuZHMgREJEZXJieQ0KKyAg
ew0KKyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDsN
CisNCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBEQkRlcmJ5UHJlcFN0bXQgREVSQllfSE9SSVpP
TlRBTF9QUkVQU1RNVCA9IG5ldyBEQkRlcmJ5UHJlcFN0bXQoIkRlcmJ5SG9yaXpvbnRhbFByZXBT
dG10Iik7DQorDQorICAgIHB1YmxpYyBEQkRlcmJ5UHJlcFN0bXQoU3RyaW5nIG5hbWUpDQorICAg
IHsNCisgICAgICBzdXBlcihuYW1lKTsNCisgICAgfQ0KKw0KKyAgICBAT3ZlcnJpZGUNCisgICAg
cHJvdGVjdGVkIElKREJDRGVsZWdhdGVQcm92aWRlciBjcmVhdGVEZWxlZ2F0ZVByb3ZpZGVyKCkN
CisgICAgew0KKyAgICAgIHJldHVybiBDRE9EQlV0aWwuY3JlYXRlUHJlcGFyZWRTdGF0ZW1lbnRK
REJDRGVsZWdhdGVQcm92aWRlcigpOw0KKyAgICB9DQorICB9DQorDQogICAvKioNCiAgICAqIEBh
dXRob3IgU2ltb24gTWNEdWZmDQogICAgKi8NCkBAIC01MjEsNCArNTU3LDIzIEBADQogICAgICAg
cmV0dXJuIENET0RCVXRpbC5jcmVhdGVOb25QcmVwYXJlZFN0YXRlbWVudEpEQkNEZWxlZ2F0ZVBy
b3ZpZGVyKCk7DQogICAgIH0NCiAgIH0NCisNCisgIHB1YmxpYyBzdGF0aWMgY2xhc3MgREJNeXNx
bFByZXBTdG10IGV4dGVuZHMgREJNeXNxbA0KKyAgew0KKyAgICBwcml2YXRlIHN0YXRpYyBmaW5h
bCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDsNCisNCisgICAgcHVibGljIHN0YXRpYyBmaW5h
bCBEQk15c3FsUHJlcFN0bXQgTVlTUUxfSE9SSVpPTlRBTF9QUkVQU1RNVCA9IG5ldyBEQk15c3Fs
UHJlcFN0bXQoIk15c3FsSG9yaXpvbnRhbFByZXBTdG10Iik7DQorDQorICAgIHB1YmxpYyBEQk15
c3FsUHJlcFN0bXQoU3RyaW5nIG5hbWUpDQorICAgIHsNCisgICAgICBzdXBlcihuYW1lKTsNCisg
ICAgfQ0KKw0KKyAgICBAT3ZlcnJpZGUNCisgICAgcHJvdGVjdGVkIElKREJDRGVsZWdhdGVQcm92
aWRlciBjcmVhdGVEZWxlZ2F0ZVByb3ZpZGVyKCkNCisgICAgew0KKyAgICAgIHJldHVybiBDRE9E
QlV0aWwuY3JlYXRlUHJlcGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGVQcm92aWRlcigpOw0KKyAg
ICB9DQorICB9DQorDQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9lbWYvY2RvL3Rlc3RzL2Nv
bmZpZy9JQ29uc3RhbnRzLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9tb2Rl
bGluZy9vcmcuZWNsaXBzZS5lbWYvb3JnLmVjbGlwc2UuZW1mLmNkby90ZXN0cy9vcmcuZWNsaXBz
ZS5lbWYuY2RvLnRlc3RzL3NyYy9vcmcvZWNsaXBzZS9lbWYvY2RvL3Rlc3RzL2NvbmZpZy9JQ29u
c3RhbnRzLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjMNCmRpZmYgLXUgLXIxLjMgSUNv
bnN0YW50cy5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vdGVzdHMvY29uZmlnL0lD
b25zdGFudHMuamF2YQk5IE5vdiAyMDA4IDEwOjU2OjMwIC0wMDAwCTEuMw0KKysrIHNyYy9vcmcv
ZWNsaXBzZS9lbWYvY2RvL3Rlc3RzL2NvbmZpZy9JQ29uc3RhbnRzLmphdmEJMTEgTm92IDIwMDgg
MTQ6Mjg6NDkgLTAwMDANCkBAIC0zNSwxMCArMzUsMTYgQEANCiANCiAgIHB1YmxpYyBzdGF0aWMg
ZmluYWwgUmVwb3NpdG9yeUNvbmZpZyBEQl9IU1FMX0hPUklaT05UQUwgPSBSZXBvc2l0b3J5Q29u
ZmlnLkRCSHNxbGRiTm9uUHJlcFN0bXQuSFNRTERCX0hPUklaT05UQUw7DQogDQorICBwdWJsaWMg
c3RhdGljIGZpbmFsIFJlcG9zaXRvcnlDb25maWcgREJfSFNRTF9IT1JJWk9OVEFMX1BSRVBTVE1U
ID0gUmVwb3NpdG9yeUNvbmZpZy5EQkhzcWxkYlByZXBTdG10LkhTUUxEQl9IT1JJWk9OVEFMX1BS
RVBTVE1UOw0KKw0KICAgcHVibGljIHN0YXRpYyBmaW5hbCBSZXBvc2l0b3J5Q29uZmlnIERCX0RF
UkJZX0hPUklaT05UQUwgPSBSZXBvc2l0b3J5Q29uZmlnLkRCRGVyYnlOb25QcmVwU3RtdC5ERVJC
WV9IT1JJWk9OVEFMOw0KIA0KKyAgcHVibGljIHN0YXRpYyBmaW5hbCBSZXBvc2l0b3J5Q29uZmln
IERCX0RFUkJZX0hPUklaT05UQUxfUFJFUFNUTVQgPSBSZXBvc2l0b3J5Q29uZmlnLkRCRGVyYnlQ
cmVwU3RtdC5ERVJCWV9IT1JJWk9OVEFMX1BSRVBTVE1UOw0KKw0KICAgcHVibGljIHN0YXRpYyBm
aW5hbCBSZXBvc2l0b3J5Q29uZmlnIERCX01ZU1FMX0hPUklaT05UQUwgPSBSZXBvc2l0b3J5Q29u
ZmlnLkRCTXlzcWxOb25QcmVwU3RtdC5NWVNRTF9IT1JJWk9OVEFMOw0KIA0KKyAgcHVibGljIHN0
YXRpYyBmaW5hbCBSZXBvc2l0b3J5Q29uZmlnIERCX01ZU1FMX0hPUklaT05UQUxfUFJFUFNUTVQg
PSBSZXBvc2l0b3J5Q29uZmlnLkRCTXlzcWxQcmVwU3RtdC5NWVNRTF9IT1JJWk9OVEFMX1BSRVBT
VE1UOw0KKw0KICAgcHVibGljIHN0YXRpYyBmaW5hbCBTZXNzaW9uQ29uZmlnIEpWTSA9IFNlc3Np
b25Db25maWcuSlZNLklOU1RBTkNFOw0KIA0KICAgcHVibGljIHN0YXRpYyBmaW5hbCBTZXNzaW9u
Q29uZmlnIFRDUCA9IFNlc3Npb25Db25maWcuVENQLklOU1RBTkNFOw0KI1Agb3JnLmVjbGlwc2Uu
ZW1mLmNkby5zZXJ2ZXIuZGINCkluZGV4OiBwbHVnaW4ueG1sDQo9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmls
ZTogL2N2c3Jvb3QvbW9kZWxpbmcvb3JnLmVjbGlwc2UuZW1mL29yZy5lY2xpcHNlLmVtZi5jZG8v
cGx1Z2lucy9vcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5kYi9wbHVnaW4ueG1sLHYNCnJldHJp
ZXZpbmcgcmV2aXNpb24gMS4xMA0KZGlmZiAtdSAtcjEuMTAgcGx1Z2luLnhtbA0KLS0tIHBsdWdp
bi54bWwJOSBOb3YgMjAwOCAxMDo1NjozNCAtMDAwMAkxLjEwDQorKysgcGx1Z2luLnhtbAkxMSBO
b3YgMjAwOCAxNDoyODo1MCAtMDAwMA0KQEAgLTQ2LDYgKzQ2LDEwIEBADQogICAgICAgICAgICAg
Y2xhc3M9Im9yZy5lY2xpcHNlLmVtZi5jZG8uc2VydmVyLmludGVybmFsLmRiLmpkYmMuTm9uUHJl
cGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGVQcm92aWRlciINCiAgICAgICAgICAgICB0eXBlPSJu
b25QcmVwYXJlZFN0YXRlbWVudCI+DQogICAgICAgPC9qZGJjRGVsZWdhdGVQcm92aWRlcj4NCisg
ICAgICA8amRiY0RlbGVnYXRlUHJvdmlkZXINCisgICAgICAgICAgICBjbGFzcz0ib3JnLmVjbGlw
c2UuZW1mLmNkby5zZXJ2ZXIuaW50ZXJuYWwuZGIuamRiYy5QcmVwYXJlZFN0YXRlbWVudEpEQkNE
ZWxlZ2F0ZVByb3ZpZGVyIg0KKyAgICAgICAgICAgIHR5cGU9InByZXBhcmVkU3RhdGVtZW50Ij4N
CisgICAgICA8L2pkYmNEZWxlZ2F0ZVByb3ZpZGVyPg0KICAgIDwvZXh0ZW5zaW9uPg0KIA0KIDwv
cGx1Z2luPg0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9lbWYvY2RvL3NlcnZlci9kYi9DRE9EQlV0
aWwuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L21vZGVsaW5nL29yZy5lY2xp
cHNlLmVtZi9vcmcuZWNsaXBzZS5lbWYuY2RvL3BsdWdpbnMvb3JnLmVjbGlwc2UuZW1mLmNkby5z
ZXJ2ZXIuZGIvc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2RiL0NET0RCVXRpbC5qYXZh
LHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xMQ0KZGlmZiAtdSAtcjEuMTEgQ0RPREJVdGlsLmph
dmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvZGIvQ0RPREJVdGlsLmphdmEJ
OSBOb3YgMjAwOCAxMDo1NjozMyAtMDAwMAkxLjExDQorKysgc3JjL29yZy9lY2xpcHNlL2VtZi9j
ZG8vc2VydmVyL2RiL0NET0RCVXRpbC5qYXZhCTExIE5vdiAyMDA4IDE0OjI4OjUwIC0wMDAwDQpA
QCAtMTQsNiArMTQsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5pbnRl
cm5hbC5kYi5Ib3Jpem9udGFsTWFwcGluZ1N0cmF0ZWd5Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5l
bWYuY2RvLnNlcnZlci5pbnRlcm5hbC5kYi5idW5kbGUuT007DQogaW1wb3J0IG9yZy5lY2xpcHNl
LmVtZi5jZG8uc2VydmVyLmludGVybmFsLmRiLmpkYmMuTm9uUHJlcGFyZWRTdGF0ZW1lbnRKREJD
RGVsZWdhdGVQcm92aWRlcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNkby5zZXJ2ZXIuaW50
ZXJuYWwuZGIuamRiYy5QcmVwYXJlZFN0YXRlbWVudEpEQkNEZWxlZ2F0ZVByb3ZpZGVyOw0KIA0K
IGltcG9ydCBvcmcuZWNsaXBzZS5uZXQ0ai5kYi5JREJBZGFwdGVyOw0KIGltcG9ydCBvcmcuZWNs
aXBzZS5uZXQ0ai5kYi5JREJDb25uZWN0aW9uUHJvdmlkZXI7DQpAQCAtNzMsNiArNzQsMTQgQEAN
CiAgIH0NCiANCiAgIC8qKg0KKyAgICogQHNpbmNlIDIuMA0KKyAgICovDQorICBwdWJsaWMgc3Rh
dGljIElKREJDRGVsZWdhdGVQcm92aWRlciBjcmVhdGVQcmVwYXJlZFN0YXRlbWVudEpEQkNEZWxl
Z2F0ZVByb3ZpZGVyKCkNCisgIHsNCisgICAgcmV0dXJuIG5ldyBQcmVwYXJlZFN0YXRlbWVudEpE
QkNEZWxlZ2F0ZVByb3ZpZGVyKCk7DQorICB9DQorDQorICAvKioNCiAgICAqIENhbiBvbmx5IGJl
IHVzZWQgd2hlbiBFY2xpcHNlIGlzIHJ1bm5pbmcuIEluIHN0YW5kYWxvbmUgc2NlbmFyaW9zIGNy
ZWF0ZSB0aGUgbWFwcGluZyBzdHJhdGVneSBpbnN0YW5jZSBieSBkaXJlY3RseQ0KICAgICogY2Fs
bGluZyB0aGUgY29uc3RydWN0b3Igb2YgdGhlIG1hcHBpbmcgc3RyYXRlZ3kgY2xhc3MuDQogICAg
KiANCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRi
Yy9QcmVwYXJlZFN0YXRlbWVudEpEQkNEZWxlZ2F0ZVByb3ZpZGVyLmphdmENCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0N
ClJDUyBmaWxlOiBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJuYWwvZGIvamRi
Yy9QcmVwYXJlZFN0YXRlbWVudEpEQkNEZWxlZ2F0ZVByb3ZpZGVyLmphdmENCmRpZmYgLU4gc3Jj
L29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2RiL2pkYmMvUHJlcGFyZWRTdGF0
ZW1lbnRKREJDRGVsZWdhdGVQcm92aWRlci5qYXZhDQotLS0gL2Rldi9udWxsCTEgSmFuIDE5NzAg
MDA6MDA6MDAgLTAwMDANCisrKyBzcmMvb3JnL2VjbGlwc2UvZW1mL2Nkby9zZXJ2ZXIvaW50ZXJu
YWwvZGIvamRiYy9QcmVwYXJlZFN0YXRlbWVudEpEQkNEZWxlZ2F0ZVByb3ZpZGVyLmphdmEJMSBK
YW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSwyNyBAQA0KKy8qKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioNCisgKiBDb3B5cmlnaHQgKGMpIDIwMDQgLSAyMDA4IEVpa2UgU3RlcHBlciwgR2VybWFu
eS4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBh
bnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5pZXMg
dGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3LmVj
bGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqIA0KKyAqIENvbnRyaWJ1dG9yczoNCisg
KiAgICBFaWtlIFN0ZXBwZXIgLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisgKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKiovDQorcGFja2FnZSBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5pbnRl
cm5hbC5kYi5qZGJjOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5kYi5J
SkRCQ0RlbGVnYXRlOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5kYi5JSkRC
Q0RlbGVnYXRlUHJvdmlkZXI7DQorDQorLyoqDQorICogQGF1dGhvciBFaWtlIFN0ZXBwZXINCisg
Ki8NCitwdWJsaWMgY2xhc3MgUHJlcGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGVQcm92aWRlciBp
bXBsZW1lbnRzIElKREJDRGVsZWdhdGVQcm92aWRlcg0KK3sNCisNCisgIHB1YmxpYyBJSkRCQ0Rl
bGVnYXRlIGdldEpEQkNEZWxlZ2F0ZSgpDQorICB7DQorICAgIHJldHVybiBuZXcgUHJlcGFyZWRT
dGF0ZW1lbnRKREJDRGVsZWdhdGUoKTsNCisgIH0NCisNCit9DQpJbmRleDogc3JjL29yZy9lY2xp
cHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2RiL2pkYmMvUHJlcGFyZWRTdGF0ZW1lbnRKREJD
RGVsZWdhdGUuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IHNyYy9vcmcvZWNsaXBzZS9lbWYv
Y2RvL3NlcnZlci9pbnRlcm5hbC9kYi9qZGJjL1ByZXBhcmVkU3RhdGVtZW50SkRCQ0RlbGVnYXRl
LmphdmENCmRpZmYgLU4gc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2VydmVyL2ludGVybmFsL2Ri
L2pkYmMvUHJlcGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGUuamF2YQ0KLS0tIC9kZXYvbnVsbAkx
IEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQorKysgc3JjL29yZy9lY2xpcHNlL2VtZi9jZG8vc2Vy
dmVyL2ludGVybmFsL2RiL2pkYmMvUHJlcGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGUuamF2YQkx
IEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQpAQCAtMCwwICsxLDMxNiBAQA0KKy8qKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioNCisgKiBDb3B5cmlnaHQgKGMpIDIwMDQgLSAyMDA4IEVpa2UgU3RlcHBlciwgR2Vy
bWFueS4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2Nv
bXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5p
ZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3
LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbA0KKyAqIA0KKyAqIENvbnRyaWJ1dG9yczoN
CisgKiAgICBFaWtlIFN0ZXBwZXIgLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisg
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKiovDQorcGFja2FnZSBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5p
bnRlcm5hbC5kYi5qZGJjOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLmNvbW1vbi5p
ZC5DRE9JRDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNkby5jb21tb24uaWQuQ0RPSURVdGls
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLmNvbW1vbi5yZXZpc2lvbi5DRE9SZXZpc2lv
bjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmNkby5zZXJ2ZXIuZGIuSUF0dHJpYnV0ZU1hcHBp
bmc7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5jZG8uc2VydmVyLmludGVybmFsLmRiLkNET0RC
U2NoZW1hOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5pbnRlcm5hbC5kYi5T
ZXJ2ZXJJbmZvOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5lbWYuY2RvLnNlcnZlci5pbnRlcm5hbC5k
Yi5idW5kbGUuT007DQoraW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5jZG8uc3BpLmNvbW1vbi5JbnRl
cm5hbENET1JldmlzaW9uOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5uZXQ0ai5kYi5EQkV4Y2Vw
dGlvbjsNCitpbXBvcnQgb3JnLmVjbGlwc2UubmV0NGouZGIuREJVdGlsOw0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5uZXQ0ai51dGlsLm9tLnRyYWNlLkNvbnRleHRUcmFjZXI7DQorDQoraW1wb3J0IGph
dmEuc3FsLlByZXBhcmVkU3RhdGVtZW50Ow0KK2ltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7DQor
aW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsNCitpbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rp
b25zOw0KK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsNCisNCisvKioNCisgKiBAYXV0aG9yIFN0ZWZh
biBXSW5rbGVyDQorICogQHNpbmNlIDIuMA0KKyAqLw0KK3B1YmxpYyBjbGFzcyBQcmVwYXJlZFN0
YXRlbWVudEpEQkNEZWxlZ2F0ZSBleHRlbmRzIEFic3RyYWN0SkRCQ0RlbGVnYXRlDQorew0KKyAg
cHJpdmF0ZSBzdGF0aWMgZmluYWwgQ29udGV4dFRyYWNlciBUUkFDRVIgPSBuZXcgQ29udGV4dFRy
YWNlcihPTS5ERUJVRywgUHJlcGFyZWRTdGF0ZW1lbnRKREJDRGVsZWdhdGUuY2xhc3MpOw0KKw0K
KyAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFNRTF9VUERBVEVfUkVWSVNFX1ZFUlNJT04g
PSAiIFNFVCAiICsgQ0RPREJTY2hlbWEuQVRUUklCVVRFU19SRVZJU0VEICsgIiA9ID8gV0hFUkUg
Ig0KKyAgICAgICsgQ0RPREJTY2hlbWEuQVRUUklCVVRFU19JRCArICIgPSA/IEFORCAiICsgQ0RP
REJTY2hlbWEuQVRUUklCVVRFU19WRVJTSU9OICsgIiA9ID8iOw0KKw0KKyAgcHJpdmF0ZSBzdGF0
aWMgZmluYWwgU3RyaW5nIFNRTF9VUERBVEVfUkVWSVNFX1VOUkVWSVNFRCA9ICIgU0VUICIgKyBD
RE9EQlNjaGVtYS5BVFRSSUJVVEVTX1JFVklTRUQgKyAiID0gPyBXSEVSRSAiDQorICAgICAgKyBD
RE9EQlNjaGVtYS5BVFRSSUJVVEVTX0lEICsgIiA9ID8gQU5EICIgKyBDRE9EQlNjaGVtYS5BVFRS
SUJVVEVTX1JFVklTRUQgKyAiID0gMCI7DQorDQorICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJp
bmcgU1FMX0lOU0VSVF9SRUZFUkVOQ0VfV0lUSF9EQklEID0gIiBWQUxVRVMgKD8sID8sID8sID8s
ID8pIjsNCisNCisgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBTUUxfSU5TRVJUX1JFRkVS
RU5DRSA9ICIgVkFMVUVTICg/LCA/LCA/LCA/KSI7DQorDQorICBAT3ZlcnJpZGUNCisgIHByb3Rl
Y3RlZCB2b2lkIGRvSW5zZXJ0QXR0cmlidXRlcyhTdHJpbmcgdGFibGVOYW1lLCBDRE9SZXZpc2lv
biByZXYsIExpc3Q8SUF0dHJpYnV0ZU1hcHBpbmc+IGF0dHJpYnV0ZU1hcHBpbmdzLA0KKyAgICAg
IGJvb2xlYW4gd2l0aEZ1bGxSZXZpc2lvbkluZm8pDQorICB7DQorICAgIFByZXBhcmVkU3RhdGVt
ZW50IHN0bXQgPSBudWxsOw0KKyAgICBTdHJpbmdCdWlsZGVyIHNxbCA9IG5ldyBTdHJpbmdCdWls
ZGVyKCk7DQorICAgIEludGVybmFsQ0RPUmV2aXNpb24gcmV2aXNpb24gPSAoSW50ZXJuYWxDRE9S
ZXZpc2lvbilyZXY7DQorDQorICAgIGlmIChhdHRyaWJ1dGVNYXBwaW5ncyA9PSBudWxsKQ0KKyAg
ICB7DQorICAgICAgYXR0cmlidXRlTWFwcGluZ3MgPSBDb2xsZWN0aW9ucy5lbXB0eUxpc3QoKTsN
CisgICAgfQ0KKw0KKyAgICBzcWwuYXBwZW5kKCJJTlNFUlQgSU5UTyAiKTsNCisgICAgc3FsLmFw
cGVuZCh0YWJsZU5hbWUpOw0KKyAgICBzcWwuYXBwZW5kKCIgVkFMVUVTICg/LCA/LCAiKTsNCisg
ICAgaWYgKHdpdGhGdWxsUmV2aXNpb25JbmZvKQ0KKyAgICB7DQorICAgICAgc3FsLmFwcGVuZCgi
PywgPywgPywgPywgPywgPyIpOw0KKyAgICB9DQorICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYXR0
cmlidXRlTWFwcGluZ3Muc2l6ZSgpOyBpKyspDQorICAgIHsNCisgICAgICBzcWwuYXBwZW5kKCIs
ID8iKTsNCisgICAgfQ0KKyAgICBzcWwuYXBwZW5kKCIpIik7DQorDQorICAgIGludCBjb2wgPSAx
Ow0KKw0KKyAgICB0cnkNCisgICAgew0KKyAgICAgIGlmIChUUkFDRVIuaXNFbmFibGVkKCkpDQor
ICAgICAgew0KKyAgICAgICAgVFJBQ0VSLmZvcm1hdCgiezB9ICh7MX0pIiwgc3FsLnRvU3RyaW5n
KCksIHJldmlzaW9uLnRvU3RyaW5nKCkpOw0KKyAgICAgIH0NCisgICAgICBzdG10ID0gZ2V0Q29u
bmVjdGlvbigpLnByZXBhcmVTdGF0ZW1lbnQoc3FsLnRvU3RyaW5nKCkpOw0KKyAgICAgIHN0bXQu
c2V0TG9uZyhjb2wrKywgQ0RPSURVdGlsLmdldExvbmcocmV2aXNpb24uZ2V0SUQoKSkpOw0KKyAg
ICAgIHN0bXQuc2V0SW50KGNvbCsrLCByZXZpc2lvbi5nZXRWZXJzaW9uKCkpOw0KKw0KKyAgICAg
IGlmICh3aXRoRnVsbFJldmlzaW9uSW5mbykNCisgICAgICB7DQorICAgICAgICBzdG10LnNldElu
dChjb2wrKywgU2VydmVySW5mby5nZXREQklEKHJldmlzaW9uLmdldENET0NsYXNzKCkpKTsNCisg
ICAgICAgIHN0bXQuc2V0TG9uZyhjb2wrKywgcmV2aXNpb24uZ2V0Q3JlYXRlZCgpKTsNCisgICAg
ICAgIHN0bXQuc2V0TG9uZyhjb2wrKywgcmV2aXNpb24uZ2V0UmV2aXNlZCgpKTsNCisgICAgICAg
IHN0bXQuc2V0TG9uZyhjb2wrKywgQ0RPSURVdGlsLmdldExvbmcocmV2aXNpb24uZ2V0UmVzb3Vy
Y2VJRCgpKSk7DQorICAgICAgICBzdG10LnNldExvbmcoY29sKyssIENET0lEVXRpbC5nZXRMb25n
KChDRE9JRClyZXZpc2lvbi5nZXRDb250YWluZXJJRCgpKSk7DQorICAgICAgICBzdG10LnNldElu
dChjb2wrKywgcmV2aXNpb24uZ2V0Q29udGFpbmluZ0ZlYXR1cmVJRCgpKTsNCisgICAgICB9DQor
DQorICAgICAgZm9yIChJQXR0cmlidXRlTWFwcGluZyBhdHRyaWJ1dGVNYXBwaW5nIDogYXR0cmli
dXRlTWFwcGluZ3MpDQorICAgICAgew0KKyAgICAgICAgT2JqZWN0IHZhbHVlID0gYXR0cmlidXRl
TWFwcGluZy5nZXRSZXZpc2lvblZhbHVlKHJldmlzaW9uKTsNCisgICAgICAgIHN0bXQuc2V0T2Jq
ZWN0KGNvbCsrLCB2YWx1ZSk7DQorICAgICAgfQ0KKyAgICAgIHN0bXQuZXhlY3V0ZSgpOw0KKyAg
ICB9DQorICAgIGNhdGNoIChTUUxFeGNlcHRpb24gZSkNCisgICAgew0KKyAgICAgIHRocm93IG5l
dyBEQkV4Y2VwdGlvbihlKTsNCisgICAgfQ0KKyAgICBmaW5hbGx5DQorICAgIHsNCisgICAgICBE
QlV0aWwuY2xvc2Uoc3RtdCk7DQorICAgIH0NCisgIH0NCisNCisgIEBPdmVycmlkZQ0KKyAgcHJv
dGVjdGVkIHZvaWQgZG9JbnNlcnRSZWZlcmVuY2UoU3RyaW5nIHRhYmxlTmFtZSwgaW50IGRiSWQs
IGxvbmcgc291cmNlLCBpbnQgdmVyc2lvbiwgaW50IGksIGxvbmcgdGFyZ2V0KQ0KKyAgew0KKyAg
ICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDsNCisNCisgICAgdHJ5DQorICAgIHsNCisg
ICAgICBTdHJpbmdCdWlsZGVyIHNxbCA9IG5ldyBTdHJpbmdCdWlsZGVyKCJJTlNFUlQgSU5UTyAi
KTsNCisgICAgICBzcWwuYXBwZW5kKHRhYmxlTmFtZSk7DQorICAgICAgc3FsLmFwcGVuZChkYklk
ICE9IDAgPyBTUUxfSU5TRVJUX1JFRkVSRU5DRV9XSVRIX0RCSUQgOiBTUUxfSU5TRVJUX1JFRkVS
RU5DRSk7DQorDQorICAgICAgaW50IGlkeCA9IDE7DQorDQorICAgICAgc3RtdCA9IGdldENvbm5l
Y3Rpb24oKS5wcmVwYXJlU3RhdGVtZW50KHNxbC50b1N0cmluZygpKTsNCisNCisgICAgICBpZiAo
ZGJJZCAhPSAwKQ0KKyAgICAgIHsNCisgICAgICAgIHN0bXQuc2V0SW50KGlkeCsrLCBkYklkKTsN
CisgICAgICB9DQorICAgICAgc3RtdC5zZXRMb25nKGlkeCsrLCBzb3VyY2UpOw0KKyAgICAgIHN0
bXQuc2V0SW50KGlkeCsrLCB2ZXJzaW9uKTsNCisgICAgICBzdG10LnNldEludChpZHgrKywgaSk7
DQorICAgICAgc3RtdC5zZXRMb25nKGlkeCsrLCB0YXJnZXQpOw0KKw0KKyAgICAgIGlmIChUUkFD
RVIuaXNFbmFibGVkKCkpDQorICAgICAgew0KKyAgICAgICAgVFJBQ0VSLmZvcm1hdCgiezB9ICh7
MX0sezJ9LHszfSx7NH0sezV9KSIsIHNxbC50b1N0cmluZygpLCBkYklkLCBzb3VyY2UsIHZlcnNp
b24sIGksIHRhcmdldCk7DQorICAgICAgfQ0KKw0KKyAgICAgIHN0bXQuZXhlY3V0ZSgpOw0KKyAg
ICB9DQorICAgIGNhdGNoIChTUUxFeGNlcHRpb24gZSkNCisgICAgew0KKyAgICAgIHRocm93IG5l
dyBEQkV4Y2VwdGlvbihlKTsNCisgICAgfQ0KKyAgICBmaW5hbGx5DQorICAgIHsNCisgICAgICBE
QlV0aWwuY2xvc2Uoc3RtdCk7DQorICAgIH0NCisgIH0NCisNCisgIEBPdmVycmlkZQ0KKyAgcHJv
dGVjdGVkIHZvaWQgZG9VcGRhdGVSZXZpc2VkKFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgcmV2aXNl
ZFN0YW1wLCBsb25nIGNkb2lkLCBpbnQgdmVyc2lvbikNCisgIHsNCisgICAgUHJlcGFyZWRTdGF0
ZW1lbnQgc3RtdCA9IG51bGw7DQorDQorICAgIHRyeQ0KKyAgICB7DQorICAgICAgU3RyaW5nQnVp
bGRlciBzcWwgPSBuZXcgU3RyaW5nQnVpbGRlcigiVVBEQVRFICIpOw0KKyAgICAgIHNxbC5hcHBl
bmQodGFibGVOYW1lKTsNCisgICAgICBzcWwuYXBwZW5kKFNRTF9VUERBVEVfUkVWSVNFX1ZFUlNJ
T04pOw0KKw0KKyAgICAgIHN0bXQgPSBnZXRDb25uZWN0aW9uKCkucHJlcGFyZVN0YXRlbWVudChz
cWwudG9TdHJpbmcoKSk7DQorICAgICAgc3RtdC5zZXRMb25nKDEsIHJldmlzZWRTdGFtcCk7DQor
ICAgICAgc3RtdC5zZXRMb25nKDIsIGNkb2lkKTsNCisgICAgICBzdG10LnNldEludCgzLCB2ZXJz
aW9uKTsNCisNCisgICAgICBpZiAoVFJBQ0VSLmlzRW5hYmxlZCgpKQ0KKyAgICAgIHsNCisgICAg
ICAgIFRSQUNFUi5mb3JtYXQoInswfSAoezF9LHsyfSx7M30pIiwgc3FsLnRvU3RyaW5nKCksIHJl
dmlzZWRTdGFtcCwgY2RvaWQsIHZlcnNpb24pOw0KKyAgICAgIH0NCisNCisgICAgICBzdG10LmV4
ZWN1dGUoKTsNCisgICAgfQ0KKyAgICBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpDQorICAgIHsNCisg
ICAgICB0aHJvdyBuZXcgREJFeGNlcHRpb24oZSk7DQorICAgIH0NCisgICAgZmluYWxseQ0KKyAg
ICB7DQorICAgICAgREJVdGlsLmNsb3NlKHN0bXQpOw0KKyAgICB9DQorICB9DQorDQorICBAT3Zl
cnJpZGUNCisgIHByb3RlY3RlZCB2b2lkIGRvVXBkYXRlUmV2aXNlZChTdHJpbmcgdGFibGVOYW1l
LCBsb25nIHJldmlzZWRTdGFtcCwgbG9uZyBjZG9pZCkNCisgIHsNCisgICAgUHJlcGFyZWRTdGF0
ZW1lbnQgc3RtdCA9IG51bGw7DQorDQorICAgIHRyeQ0KKyAgICB7DQorICAgICAgU3RyaW5nQnVp
bGRlciBzcWwgPSBuZXcgU3RyaW5nQnVpbGRlcigiVVBEQVRFICIpOw0KKyAgICAgIHNxbC5hcHBl
bmQodGFibGVOYW1lKTsNCisgICAgICBzcWwuYXBwZW5kKFNRTF9VUERBVEVfUkVWSVNFX1VOUkVW
SVNFRCk7DQorDQorICAgICAgc3RtdCA9IGdldENvbm5lY3Rpb24oKS5wcmVwYXJlU3RhdGVtZW50
KHNxbC50b1N0cmluZygpKTsNCisgICAgICBzdG10LnNldExvbmcoMSwgcmV2aXNlZFN0YW1wKTsN
CisgICAgICBzdG10LnNldExvbmcoMiwgY2RvaWQpOw0KKw0KKyAgICAgIGlmIChUUkFDRVIuaXNF
bmFibGVkKCkpDQorICAgICAgew0KKyAgICAgICAgVFJBQ0VSLmZvcm1hdCgiezB9ICh7MX0sezJ9
KSIsIHNxbC50b1N0cmluZygpLCByZXZpc2VkU3RhbXAsIGNkb2lkKTsNCisgICAgICB9DQorDQor
ICAgICAgc3RtdC5leGVjdXRlKCk7DQorICAgIH0NCisgICAgY2F0Y2ggKFNRTEV4Y2VwdGlvbiBl
KQ0KKyAgICB7DQorICAgICAgdGhyb3cgbmV3IERCRXhjZXB0aW9uKGUpOw0KKyAgICB9DQorICAg
IGZpbmFsbHkNCisgICAgew0KKyAgICAgIERCVXRpbC5jbG9zZShzdG10KTsNCisgICAgfQ0KKyAg
fQ0KKw0KKyAgQE92ZXJyaWRlDQorICBwcm90ZWN0ZWQgUmVzdWx0U2V0IGRvU2VsZWN0UmV2aXNp
b25BdHRyaWJ1dGVzKFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgcmV2aXNpb25JZCwNCisgICAgICBM
aXN0PElBdHRyaWJ1dGVNYXBwaW5nPiBhdHRyaWJ1dGVNYXBwaW5ncywgYm9vbGVhbiBoYXNGdWxs
UmV2aXNpb25JbmZvLCBTdHJpbmcgd2hlcmUpIHRocm93cyBTUUxFeGNlcHRpb24NCisgIHsNCisg
ICAgU3RyaW5nQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsNCisgICAgYnVp
bGRlci5hcHBlbmQoIlNFTEVDVCAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQoQ0RPREJTY2hlbWEu
QVRUUklCVVRFU19WRVJTSU9OKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIiwgIik7DQorICAgIGJ1
aWxkZXIuYXBwZW5kKENET0RCU2NoZW1hLkFUVFJJQlVURVNfQ1JFQVRFRCk7DQorDQorICAgIGlm
IChoYXNGdWxsUmV2aXNpb25JbmZvKQ0KKyAgICB7DQorICAgICAgYnVpbGRlci5hcHBlbmQoIiwg
Iik7DQorICAgICAgYnVpbGRlci5hcHBlbmQoQ0RPREJTY2hlbWEuQVRUUklCVVRFU19SRVZJU0VE
KTsNCisgICAgICBidWlsZGVyLmFwcGVuZCgiLCAiKTsNCisgICAgICBidWlsZGVyLmFwcGVuZChD
RE9EQlNjaGVtYS5BVFRSSUJVVEVTX1JFU09VUkNFKTsNCisgICAgICBidWlsZGVyLmFwcGVuZCgi
LCAiKTsNCisgICAgICBidWlsZGVyLmFwcGVuZChDRE9EQlNjaGVtYS5BVFRSSUJVVEVTX0NPTlRB
SU5FUik7DQorICAgICAgYnVpbGRlci5hcHBlbmQoIiwgIik7DQorICAgICAgYnVpbGRlci5hcHBl
bmQoQ0RPREJTY2hlbWEuQVRUUklCVVRFU19GRUFUVVJFKTsNCisgICAgfQ0KKw0KKyAgICBmb3Ig
KElBdHRyaWJ1dGVNYXBwaW5nIGF0dHJpYnV0ZU1hcHBpbmcgOiBhdHRyaWJ1dGVNYXBwaW5ncykN
CisgICAgew0KKyAgICAgIGJ1aWxkZXIuYXBwZW5kKCIsICIpOw0KKyAgICAgIGJ1aWxkZXIuYXBw
ZW5kKGF0dHJpYnV0ZU1hcHBpbmcuZ2V0RmllbGQoKSk7DQorICAgIH0NCisNCisgICAgYnVpbGRl
ci5hcHBlbmQoIiBGUk9NICIpOw0KKyAgICBidWlsZGVyLmFwcGVuZCh0YWJsZU5hbWUpOw0KKyAg
ICBidWlsZGVyLmFwcGVuZCgiIFdIRVJFICIpOw0KKyAgICBidWlsZGVyLmFwcGVuZChDRE9EQlNj
aGVtYS5BVFRSSUJVVEVTX0lEKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIj0gPyBBTkQgKCIpOw0K
KyAgICBidWlsZGVyLmFwcGVuZCh3aGVyZSk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCIpIik7DQor
ICAgIFN0cmluZyBzcWwgPSBidWlsZGVyLnRvU3RyaW5nKCk7DQorICAgIGlmIChUUkFDRVIuaXNF
bmFibGVkKCkpDQorICAgIHsNCisgICAgICBUUkFDRVIuZm9ybWF0KCJ7MH0gKHsxfSkiLCBzcWws
IHJldmlzaW9uSWQpOw0KKyAgICB9DQorDQorICAgIFByZXBhcmVkU3RhdGVtZW50IHBzdG10ID0g
Z2V0Q29ubmVjdGlvbigpLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTsNCisgICAgcHN0bXQuc2V0TG9u
ZygxLCByZXZpc2lvbklkKTsNCisgICAgcmV0dXJuIHBzdG10LmV4ZWN1dGVRdWVyeSgpOw0KKyAg
fQ0KKw0KKyAgQE92ZXJyaWRlDQorICBwcm90ZWN0ZWQgUmVzdWx0U2V0IGRvU2VsZWN0UmV2aXNp
b25SZWZlcmVuY2VzKFN0cmluZyB0YWJsZU5hbWUsIGxvbmcgc291cmNlSWQsIGludCB2ZXJzaW9u
LCBpbnQgZGJGZWF0dXJlSUQsDQorICAgICAgU3RyaW5nIHdoZXJlKSB0aHJvd3MgU1FMRXhjZXB0
aW9uDQorICB7DQorICAgIFN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVy
KCk7DQorICAgIGJ1aWxkZXIuYXBwZW5kKCJTRUxFQ1QgIik7DQorICAgIGJ1aWxkZXIuYXBwZW5k
KENET0RCU2NoZW1hLlJFRkVSRU5DRVNfVEFSR0VUKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIiBG
Uk9NICIpOw0KKyAgICBidWlsZGVyLmFwcGVuZCh0YWJsZU5hbWUpOw0KKyAgICBidWlsZGVyLmFw
cGVuZCgiIFdIRVJFICIpOw0KKyAgICBpZiAoZGJGZWF0dXJlSUQgIT0gMCkNCisgICAgew0KKyAg
ICAgIGJ1aWxkZXIuYXBwZW5kKENET0RCU2NoZW1hLlJFRkVSRU5DRVNfRkVBVFVSRSk7DQorICAg
ICAgYnVpbGRlci5hcHBlbmQoIj0gPyBBTkQgIik7DQorICAgIH0NCisNCisgICAgYnVpbGRlci5h
cHBlbmQoQ0RPREJTY2hlbWEuUkVGRVJFTkNFU19TT1VSQ0UpOw0KKyAgICBidWlsZGVyLmFwcGVu
ZCgiPSA/IEFORCAiKTsNCisgICAgYnVpbGRlci5hcHBlbmQoQ0RPREJTY2hlbWEuUkVGRVJFTkNF
U19WRVJTSU9OKTsNCisgICAgYnVpbGRlci5hcHBlbmQoIj0gPyAiKTsNCisNCisgICAgaWYgKHdo
ZXJlICE9IG51bGwpDQorICAgIHsNCisgICAgICBidWlsZGVyLmFwcGVuZCh3aGVyZSk7DQorICAg
IH0NCisNCisgICAgYnVpbGRlci5hcHBlbmQoIiBPUkRFUiBCWSAiKTsNCisgICAgYnVpbGRlci5h
cHBlbmQoQ0RPREJTY2hlbWEuUkVGRVJFTkNFU19JRFgpOw0KKw0KKyAgICBTdHJpbmcgc3FsID0g
YnVpbGRlci50b1N0cmluZygpOw0KKw0KKyAgICBpZiAoVFJBQ0VSLmlzRW5hYmxlZCgpKQ0KKyAg
ICB7DQorICAgICAgVFJBQ0VSLnRyYWNlKHNxbCk7DQorICAgIH0NCisNCisgICAgUHJlcGFyZWRT
dGF0ZW1lbnQgcHN0bXQgPSBnZXRDb25uZWN0aW9uKCkucHJlcGFyZVN0YXRlbWVudChzcWwpOw0K
KyAgICBpbnQgaWR4ID0gMTsNCisNCisgICAgaWYgKGRiRmVhdHVyZUlEICE9IDApDQorICAgIHsN
CisgICAgICBwc3RtdC5zZXRJbnQoaWR4KyssIGRiRmVhdHVyZUlEKTsNCisgICAgfQ0KKw0KKyAg
ICBwc3RtdC5zZXRMb25nKGlkeCsrLCBzb3VyY2VJZCk7DQorICAgIHBzdG10LnNldEludChpZHgr
KywgdmVyc2lvbik7DQorICAgIHJldHVybiBwc3RtdC5leGVjdXRlUXVlcnkoKTsNCisgIH0NCisN
Cit9DQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>