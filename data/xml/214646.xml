<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>214646</bug_id>
          
          <creation_ts>2008-01-08 12:54:00 -0500</creation_ts>
          <short_desc>resolution failure case relating to class template instance implicit copy constructor</short_desc>
          <delta_ts>2014-01-29 20:48:11 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>4</classification_id>
          <classification>Tools</classification>
          <product>CDT</product>
          <component>cdt-core</component>
          <version>5.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>5.0</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Ferguson">andrew.ferguson</reporter>
          <assigned_to name="Andrew Ferguson">andrew.ferguson</assigned_to>
          <cc>dschaefer</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1127564</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Ferguson">andrew.ferguson</who>
    <bug_when>2008-01-08 12:54:55 -0500</bug_when>
    <thetext>if you have:

    class A {};

    template &lt;class T&gt; class C {
    public:
    	inline C(T&amp; aRef) {}
    	inline operator T&amp;() {}
    };

    void foo(A a) {}
    void bar(C&lt;const A&gt; ca) {}

    void main2() {
    	const A a= *new A();
    	const C&lt;const A&gt; ca= *new C&lt;const A&gt;(*new A());

    	foo(a); 
    	bar(ca); // bar is not resolved to the function above
    }

then bar is a ProblemBinding</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1128183</commentid>
    <comment_count>1</comment_count>
      <attachid>86477</attachid>
    <who name="Andrew Ferguson">andrew.ferguson</who>
    <bug_when>2008-01-09 10:50:29 -0500</bug_when>
    <thetext>Created attachment 86477
proposed fix

As part of the proposed fix, I&apos;ve split out some code common to CPPClassTemplate and CPPClassType.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1131413</commentid>
    <comment_count>2</comment_count>
    <who name="Andrew Ferguson">andrew.ferguson</who>
    <bug_when>2008-01-15 08:39:25 -0500</bug_when>
    <thetext>applied to HEAD

regression: AST2TemplateTests.testBug214646()

marking as FIXED</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>86477</attachid>
            <date>2008-01-09 10:50:00 -0500</date>
            <delta_ts>2014-01-29 20:48:11 -0500</delta_ts>
            <desc>proposed fix</desc>
            <filename>214646_Jan9_0.txt</filename>
            <type>text/plain</type>
            <size>104594</size>
            <attacher name="Andrew Ferguson">andrew.ferguson</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuY2R0LmNvcmUu
dGVzdHMNCkluZGV4OiBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2NvcmUvcGFyc2VyL3Rlc3RzL2Fz
dDIvQVNUMlRlbXBsYXRlVGVzdHMuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290
L3Rvb2xzL29yZy5lY2xpcHNlLmNkdC9hbGwvb3JnLmVjbGlwc2UuY2R0LmNvcmUudGVzdHMvcGFy
c2VyL29yZy9lY2xpcHNlL2NkdC9jb3JlL3BhcnNlci90ZXN0cy9hc3QyL0FTVDJUZW1wbGF0ZVRl
c3RzLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjQxDQpkaWZmIC11IC1yMS40MSBBU1Qy
VGVtcGxhdGVUZXN0cy5qYXZhDQotLS0gcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9jb3JlL3BhcnNl
ci90ZXN0cy9hc3QyL0FTVDJUZW1wbGF0ZVRlc3RzLmphdmEJNyBKYW4gMjAwOCAwNDowNDowNSAt
MDAwMAkxLjQxDQorKysgcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9jb3JlL3BhcnNlci90ZXN0cy9h
c3QyL0FTVDJUZW1wbGF0ZVRlc3RzLmphdmEJOSBKYW4gMjAwOCAxNTo0MjoxMiAtMDAwMA0KQEAg
LTksNiArOSw3IEBADQogICogSUJNIC0gSW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uDQog
ICogTWFya3VzIFNjaG9ybiAoV2luZCBSaXZlciBTeXN0ZW1zKQ0KICAqIEJyeWFuIFdpbGtpbnNv
biAoUU5YKQ0KKyAqIEFuZHJldyBGZXJndXNvbiAoU3ltYmlhbikNCiAgKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKi8NCiAvKg0KICAqIENyZWF0ZWQgb24gTWFyIDExLCAyMDA1DQpAQCAtNTIsNiArNTMs
NyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQTWV0aG9k
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQUGFyYW1ldGVy
Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQU3BlY2lhbGl6
YXRpb247DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBUZW1w
bGF0ZURlZmluaXRpb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3Bw
LklDUFBUZW1wbGF0ZUluc3RhbmNlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20u
YXN0LmNwcC5JQ1BQVGVtcGxhdGVOb25UeXBlUGFyYW1ldGVyOw0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQVGVtcGxhdGVQYXJhbWV0ZXI7DQpAQCAtMjE0Miw0
ICsyMTQ0LDQyIEBADQogICAgCQkJfQ0KIAkJfQ0KICAgICB9DQorICAgIA0KKwkvLyAgICBjbGFz
cyBBIHt9Ow0KKwkvLw0KKwkvLyAgICB0ZW1wbGF0ZSA8Y2xhc3MgVD4gY2xhc3MgQyB7DQorCS8v
ICAgIHB1YmxpYzoNCisJLy8gICAgCWlubGluZSBDKFQmIGFSZWYpIHt9DQorCS8vICAgIAlpbmxp
bmUgb3BlcmF0b3IgVCYoKSB7fQ0KKwkvLyAgICB9Ow0KKwkvLw0KKwkvLyAgICB2b2lkIGZvbyhB
IGEpIHt9DQorCS8vICAgIHZvaWQgYmFyKEM8Y29uc3QgQT4gY2EpIHt9DQorCS8vDQorCS8vICAg
IHZvaWQgbWFpbjIoKSB7DQorCS8vICAgIAljb25zdCBBIGE9ICpuZXcgQSgpOw0KKwkvLyAgICAJ
Y29uc3QgQzxjb25zdCBBPiBjYT0gKm5ldyBDPGNvbnN0IEE+KCpuZXcgQSgpKTsNCisJLy8NCisJ
Ly8gICAgCWZvbyhhKTsgDQorCS8vICAgIAliYXIoY2EpOw0KKwkvLyAgICB9DQorICAgIHB1Ymxp
YyB2b2lkIHRlc3RCdWcyMTQ2NDYoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCisgICAgCUJpbmRpbmdB
c3NlcnRpb25IZWxwZXIgYmg9IG5ldyBCaW5kaW5nQXNzZXJ0aW9uSGVscGVyKGdldENvbnRlbnRz
KDEpWzBdLnRvU3RyaW5nKCksIHRydWUpOw0KKyAgICAJDQorICAgIAlJQmluZGluZyBiMD0gYmgu
YXNzZXJ0Tm9uUHJvYmxlbSgiZm9vKGEpIiwgMyk7DQorICAgIAlJQmluZGluZyBiMT0gYmguYXNz
ZXJ0Tm9uUHJvYmxlbSgiYmFyKGNhKSIsIDMpOw0KKyAgICAJDQorICAgIAlhc3NlcnRJbnN0YW5j
ZShiMCwgSUNQUEZ1bmN0aW9uLmNsYXNzKTsNCisgICAgCWFzc2VydEluc3RhbmNlKGIxLCBJQ1BQ
RnVuY3Rpb24uY2xhc3MpOw0KKyAgICAJDQorICAgIAlJQ1BQRnVuY3Rpb24gZjA9IChJQ1BQRnVu
Y3Rpb24pIGIwLCBmMT0gKElDUFBGdW5jdGlvbikgYjE7DQorICAgIAlhc3NlcnRFcXVhbHMoMSwg
ZjAuZ2V0UGFyYW1ldGVycygpLmxlbmd0aCk7DQorICAgIAlhc3NlcnRFcXVhbHMoMSwgZjEuZ2V0
UGFyYW1ldGVycygpLmxlbmd0aCk7DQorICAgIAkNCisgICAgCWFzc2VydEluc3RhbmNlKGYwLmdl
dFBhcmFtZXRlcnMoKVswXS5nZXRUeXBlKCksIElDUFBDbGFzc1R5cGUuY2xhc3MpOw0KKyAgICAJ
YXNzZXJ0RmFsc2UoZjAgaW5zdGFuY2VvZiBJQ1BQVGVtcGxhdGVJbnN0YW5jZSk7DQorICAgIAlh
c3NlcnRGYWxzZShmMCBpbnN0YW5jZW9mIElDUFBUZW1wbGF0ZURlZmluaXRpb24pOw0KKyAgICAJ
YXNzZXJ0SW5zdGFuY2UoZjEuZ2V0UGFyYW1ldGVycygpWzBdLmdldFR5cGUoKSwgSUNQUENsYXNz
VHlwZS5jbGFzcyk7DQorICAgIAlhc3NlcnRJbnN0YW5jZShmMS5nZXRQYXJhbWV0ZXJzKClbMF0u
Z2V0VHlwZSgpLCBJQ1BQVGVtcGxhdGVJbnN0YW5jZS5jbGFzcyk7DQorICAgIH0NCiB9DQojUCBv
cmcuZWNsaXBzZS5jZHQuY29yZQ0KSW5kZXg6IHBhcnNlci9vcmcvZWNsaXBzZS9jZHQvaW50ZXJu
YWwvY29yZS9kb20vcGFyc2VyL2NwcC9DUFBDbGFzc1NwZWNpYWxpemF0aW9uU2NvcGUuamF2YQ0K
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L3Rvb2xzL29yZy5lY2xpcHNlLmNkdC9hbGwv
b3JnLmVjbGlwc2UuY2R0LmNvcmUvcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3Jl
L2RvbS9wYXJzZXIvY3BwL0NQUENsYXNzU3BlY2lhbGl6YXRpb25TY29wZS5qYXZhLHYNCnJldHJp
ZXZpbmcgcmV2aXNpb24gMS4zDQpkaWZmIC11IC1yMS4zIENQUENsYXNzU3BlY2lhbGl6YXRpb25T
Y29wZS5qYXZhDQotLS0gcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3JlL2RvbS9w
YXJzZXIvY3BwL0NQUENsYXNzU3BlY2lhbGl6YXRpb25TY29wZS5qYXZhCTMgTWF5IDIwMDcgMTQ6
NDQ6NTcgLTAwMDAJMS4zDQorKysgcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3Jl
L2RvbS9wYXJzZXIvY3BwL0NQUENsYXNzU3BlY2lhbGl6YXRpb25TY29wZS5qYXZhCTkgSmFuIDIw
MDggMTU6NDI6MTMgLTAwMDANCkBAIC0xMCw5ICsxMCw2IEBADQogICogTWFya3VzIFNjaG9ybiAo
V2luZCBSaXZlciBTeXN0ZW1zKQ0KICAqIEJyeWFuIFdpbGtpbnNvbiAoUU5YKQ0KICAqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqLw0KLS8qDQotICogQ3JlYXRlZCBvbiBNYXIgMjgsIDIwMDUNCi0gKi8N
CiBwYWNrYWdlIG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwOw0K
IA0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uSU5hbWU7DQpAQCAtMTQ1LDcgKzE0
Miw3IEBADQogCQlyZXR1cm4gKElDUFBDb25zdHJ1Y3RvcltdKSBBcnJheVV0aWwudHJpbShJQ1BQ
Q29uc3RydWN0b3IuY2xhc3MsIHNwZWNzKTsNCiAJfQ0KIAkNCi0JcHJvdGVjdGVkIElDUFBNZXRo
b2RbXSBnZXRDb252ZXJzaW9uT3BlcmF0b3JzKCkgew0KKwlwcm90ZWN0ZWQgSUNQUE1ldGhvZFtd
IGdldENvbnZlcnNpb25PcGVyYXRvcnMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCiAJCUlDUFBD
bGFzc1R5cGUgc3BlY2lhbGl6ZWQgPSAoSUNQUENsYXNzVHlwZSkgc3BlY2lhbGl6YXRpb24uZ2V0
U3BlY2lhbGl6ZWRCaW5kaW5nKCk7DQogCQkNCiAJCWlmICghKHNwZWNpYWxpemVkIGluc3RhbmNl
b2YgSUNQUEludGVybmFsQ2xhc3NUeXBlKSkgew0KSW5kZXg6IHBhcnNlci9vcmcvZWNsaXBzZS9j
ZHQvaW50ZXJuYWwvY29yZS9kb20vcGFyc2VyL2NwcC9DUFBDbGFzc1RlbXBsYXRlLmphdmENCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC90b29scy9vcmcuZWNsaXBzZS5jZHQvYWxsL29y
Zy5lY2xpcHNlLmNkdC5jb3JlL3BhcnNlci9vcmcvZWNsaXBzZS9jZHQvaW50ZXJuYWwvY29yZS9k
b20vcGFyc2VyL2NwcC9DUFBDbGFzc1RlbXBsYXRlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lv
biAxLjI4DQpkaWZmIC11IC1yMS4yOCBDUFBDbGFzc1RlbXBsYXRlLmphdmENCi0tLSBwYXJzZXIv
b3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ1BQQ2xhc3NUZW1w
bGF0ZS5qYXZhCTEyIEp1biAyMDA3IDE2OjE1OjE1IC0wMDAwCTEuMjgNCisrKyBwYXJzZXIvb3Jn
L2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ1BQQ2xhc3NUZW1wbGF0
ZS5qYXZhCTkgSmFuIDIwMDggMTU6NDI6MTMgLTAwMDANCkBAIC05LDIzICs5LDE5IEBADQogICog
SUJNIC0gSW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uDQogICogQnJ5YW4gV2lsa2luc29u
IChRTlgpDQogICogTWFya3VzIFNjaG9ybiAoV2luZCBSaXZlciBTeXN0ZW1zKQ0KKyAqIEFuZHJl
dyBGZXJndXNvbiAoU3ltYmlhbikNCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCi0vKg0KLSAq
IENyZWF0ZWQgb24gTWFyIDMxLCAyMDA1DQotICovDQogcGFja2FnZSBvcmcuZWNsaXBzZS5jZHQu
aW50ZXJuYWwuY29yZS5kb20ucGFyc2VyLmNwcDsNCiANCiBpbXBvcnQgb3JnLmVjbGlwc2UuY2R0
LmNvcmUuZG9tLmFzdC5ET01FeGNlcHRpb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3Jl
LmRvbS5hc3QuSUFTVERlY2xTcGVjaWZpZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3Jl
LmRvbS5hc3QuSUFTVERlY2xhcmF0aW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5k
b20uYXN0LklBU1REZWNsYXJhdG9yOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20u
YXN0LklBU1RGdW5jdGlvbkRlZmluaXRpb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3Jl
LmRvbS5hc3QuSUFTVE5hbWU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3Qu
SUFTVE5vZGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSUFTVFNpbXBs
ZURlY2xhcmF0aW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklCaW5k
aW5nOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklGaWVsZDsNCi1pbXBv
cnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JUHJvYmxlbUJpbmRpbmc7DQogaW1wb3J0
IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSVNjb3BlOw0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5jZHQuY29yZS5kb20uYXN0LklUeXBlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5k
b20uYXN0LklUeXBlZGVmOw0KQEAgLTM1LDkgKzMxLDcgQEANCiBpbXBvcnQgb3JnLmVjbGlwc2Uu
Y2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVFF1YWxpZmllZE5hbWU7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQVNUVGVtcGxhdGVJ
ZDsNCi1pbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVFVzaW5n
RGVjbGFyYXRpb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklD
UFBCYXNlOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQ2xh
c3NTY29wZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUENs
YXNzVGVtcGxhdGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklD
UFBDbGFzc1RlbXBsYXRlUGFydGlhbFNwZWNpYWxpemF0aW9uOw0KIGltcG9ydCBvcmcuZWNsaXBz
ZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQ2xhc3NUeXBlOw0KQEAgLTQ3LDY3ICs0MSw2MiBA
QA0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQTWV0aG9kOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQU3BlY2lhbGl6YXRp
b247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBUZW1wbGF0
ZVBhcmFtZXRlcjsNCi1pbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQ
UFVzaW5nRGVjbGFyYXRpb247DQotaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3Qu
Y3BwLklDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyLklDUFBBU1RCYXNlU3BlY2lmaWVyOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5wYXJzZXIudXRpbC5BcnJheVV0aWw7DQogaW1w
b3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLnBhcnNlci51dGlsLkNoYXJBcnJheVV0aWxzOw0KLWlt
cG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5wYXJzZXIudXRpbC5PYmplY3RTZXQ7DQotaW1wb3J0
IG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuQVNUSW50ZXJuYWw7DQot
aW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwLkNQUENs
YXNzVHlwZS5DUFBDbGFzc1R5cGVQcm9ibGVtOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuaW50
ZXJuYWwuY29yZS5pbmRleC5JSW5kZXhUeXBlOw0KIA0KIC8qKg0KKyAqIA0KICAqIEBhdXRob3Ig
YW5pZWZlcg0KICAqLw0KIHB1YmxpYyBjbGFzcyBDUFBDbGFzc1RlbXBsYXRlIGV4dGVuZHMgQ1BQ
VGVtcGxhdGVEZWZpbml0aW9uIGltcGxlbWVudHMNCi0JCUlDUFBDbGFzc1RlbXBsYXRlLCBJQ1BQ
Q2xhc3NUeXBlLCBJQ1BQSW50ZXJuYWxDbGFzc1R5cGUsIElDUFBJbnRlcm5hbENsYXNzVGVtcGxh
dGUgew0KLQkNCi0gICAgcHVibGljIHN0YXRpYyBjbGFzcyBDUFBDbGFzc1RlbXBsYXRlRGVsZWdh
dGUgZXh0ZW5kcyBDUFBDbGFzc1R5cGUuQ1BQQ2xhc3NUeXBlRGVsZWdhdGUgaW1wbGVtZW50cyBJ
Q1BQQ2xhc3NUZW1wbGF0ZSwgSUNQUEludGVybmFsQ2xhc3NUZW1wbGF0ZSB7DQotICAgICAgICBw
dWJsaWMgQ1BQQ2xhc3NUZW1wbGF0ZURlbGVnYXRlKCBJQVNUTmFtZSBuYW1lLCBJQ1BQQ2xhc3NU
eXBlIGNscyApIHsNCi0gICAgICAgICAgICBzdXBlciggbmFtZSwgY2xzICk7DQotICAgICAgICB9
DQotICAgICAgICBwdWJsaWMgSUNQUENsYXNzVGVtcGxhdGVQYXJ0aWFsU3BlY2lhbGl6YXRpb25b
XSBnZXRQYXJ0aWFsU3BlY2lhbGl6YXRpb25zKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQotICAg
ICAgICAgICAgcmV0dXJuICgoSUNQUENsYXNzVGVtcGxhdGUpZ2V0QmluZGluZygpKS5nZXRQYXJ0
aWFsU3BlY2lhbGl6YXRpb25zKCk7DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMgSUNQUFRl
bXBsYXRlUGFyYW1ldGVyW10gZ2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCkgdGhyb3dzIERPTUV4Y2Vw
dGlvbiB7DQotICAgICAgICAgICAgcmV0dXJuICgoSUNQUENsYXNzVGVtcGxhdGUpZ2V0QmluZGlu
ZygpKS5nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKTsNCi0gICAgICAgIH0NCi0gICAgICAgIHB1Ymxp
YyB2b2lkIGFkZFNwZWNpYWxpemF0aW9uKCBJVHlwZVtdIGFyZ3VtZW50cywgSUNQUFNwZWNpYWxp
emF0aW9uIHNwZWNpYWxpemF0aW9uICkgew0KLSAgICAgICAgICAgIGZpbmFsIElCaW5kaW5nIGJp
bmRpbmcgPSBnZXRCaW5kaW5nKCk7DQotICAgICAgICAgICAgaWYgKGJpbmRpbmcgaW5zdGFuY2Vv
ZiBJQ1BQSW50ZXJuYWxCaW5kaW5nKSB7DQotICAgICAgICAgICAgCSgoSUNQUEludGVybmFsVGVt
cGxhdGUpYmluZGluZykuYWRkU3BlY2lhbGl6YXRpb24oIGFyZ3VtZW50cywgc3BlY2lhbGl6YXRp
b24gKTsNCi0gICAgICAgICAgICB9DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMgSUJpbmRp
bmcgaW5zdGFudGlhdGUoIElUeXBlW10gYXJndW1lbnRzICkgew0KLSAgICAgICAgICAgIHJldHVy
biAoKElDUFBJbnRlcm5hbFRlbXBsYXRlSW5zdGFudGlhdG9yKWdldEJpbmRpbmcoKSkuaW5zdGFu
dGlhdGUoIGFyZ3VtZW50cyApOw0KLSAgICAgICAgfQ0KLSAgICAgICAgcHVibGljIElDUFBTcGVj
aWFsaXphdGlvbiBkZWZlcnJlZEluc3RhbmNlKCBJVHlwZVtdIGFyZ3VtZW50cyApIHsNCi0gICAg
ICAgICAgICByZXR1cm4gKChJQ1BQSW50ZXJuYWxUZW1wbGF0ZUluc3RhbnRpYXRvcilnZXRCaW5k
aW5nKCkpLmRlZmVycmVkSW5zdGFuY2UoIGFyZ3VtZW50cyApOw0KLSAgICAgICAgfQ0KLSAgICAg
ICAgcHVibGljIElDUFBTcGVjaWFsaXphdGlvbiBnZXRJbnN0YW5jZSggSVR5cGVbXSBhcmd1bWVu
dHMgKSB7DQotICAgICAgICAgICAgcmV0dXJuICgoSUNQUEludGVybmFsVGVtcGxhdGVJbnN0YW50
aWF0b3IpZ2V0QmluZGluZygpKS5nZXRJbnN0YW5jZSggYXJndW1lbnRzICk7DQotICAgICAgICB9
DQorSUNQUENsYXNzVGVtcGxhdGUsIElDUFBDbGFzc1R5cGUsIElDUFBJbnRlcm5hbENsYXNzVHlw
ZSwgSUNQUEludGVybmFsQ2xhc3NUZW1wbGF0ZSwgSUNQUEludGVybmFsQ2xhc3NUeXBlTWl4aW5I
b3N0IHsNCisNCisJcHVibGljIHN0YXRpYyBjbGFzcyBDUFBDbGFzc1RlbXBsYXRlRGVsZWdhdGUg
ZXh0ZW5kcyBDUFBDbGFzc1R5cGUuQ1BQQ2xhc3NUeXBlRGVsZWdhdGUgaW1wbGVtZW50cyBJQ1BQ
Q2xhc3NUZW1wbGF0ZSwgSUNQUEludGVybmFsQ2xhc3NUZW1wbGF0ZSB7DQorCQlwdWJsaWMgQ1BQ
Q2xhc3NUZW1wbGF0ZURlbGVnYXRlKCBJQVNUTmFtZSBuYW1lLCBJQ1BQQ2xhc3NUeXBlIGNscyAp
IHsNCisJCQlzdXBlciggbmFtZSwgY2xzICk7DQorCQl9DQorCQlwdWJsaWMgSUNQUENsYXNzVGVt
cGxhdGVQYXJ0aWFsU3BlY2lhbGl6YXRpb25bXSBnZXRQYXJ0aWFsU3BlY2lhbGl6YXRpb25zKCkg
dGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQkJcmV0dXJuICgoSUNQUENsYXNzVGVtcGxhdGUpZ2V0
QmluZGluZygpKS5nZXRQYXJ0aWFsU3BlY2lhbGl6YXRpb25zKCk7DQorCQl9DQorCQlwdWJsaWMg
SUNQUFRlbXBsYXRlUGFyYW1ldGVyW10gZ2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCkgdGhyb3dzIERP
TUV4Y2VwdGlvbiB7DQorCQkJcmV0dXJuICgoSUNQUENsYXNzVGVtcGxhdGUpZ2V0QmluZGluZygp
KS5nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKTsNCisJCX0NCisJCXB1YmxpYyB2b2lkIGFkZFNwZWNp
YWxpemF0aW9uKCBJVHlwZVtdIGFyZ3VtZW50cywgSUNQUFNwZWNpYWxpemF0aW9uIHNwZWNpYWxp
emF0aW9uICkgew0KKwkJCWZpbmFsIElCaW5kaW5nIGJpbmRpbmcgPSBnZXRCaW5kaW5nKCk7DQor
CQkJaWYgKGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQSW50ZXJuYWxCaW5kaW5nKSB7DQorCQkJCSgo
SUNQUEludGVybmFsVGVtcGxhdGUpYmluZGluZykuYWRkU3BlY2lhbGl6YXRpb24oIGFyZ3VtZW50
cywgc3BlY2lhbGl6YXRpb24gKTsNCisJCQl9DQorCQl9DQorCQlwdWJsaWMgSUJpbmRpbmcgaW5z
dGFudGlhdGUoIElUeXBlW10gYXJndW1lbnRzICkgew0KKwkJCXJldHVybiAoKElDUFBJbnRlcm5h
bFRlbXBsYXRlSW5zdGFudGlhdG9yKWdldEJpbmRpbmcoKSkuaW5zdGFudGlhdGUoIGFyZ3VtZW50
cyApOw0KKwkJfQ0KKwkJcHVibGljIElDUFBTcGVjaWFsaXphdGlvbiBkZWZlcnJlZEluc3RhbmNl
KCBJVHlwZVtdIGFyZ3VtZW50cyApIHsNCisJCQlyZXR1cm4gKChJQ1BQSW50ZXJuYWxUZW1wbGF0
ZUluc3RhbnRpYXRvcilnZXRCaW5kaW5nKCkpLmRlZmVycmVkSW5zdGFuY2UoIGFyZ3VtZW50cyAp
Ow0KKwkJfQ0KKwkJcHVibGljIElDUFBTcGVjaWFsaXphdGlvbiBnZXRJbnN0YW5jZSggSVR5cGVb
XSBhcmd1bWVudHMgKSB7DQorCQkJcmV0dXJuICgoSUNQUEludGVybmFsVGVtcGxhdGVJbnN0YW50
aWF0b3IpZ2V0QmluZGluZygpKS5nZXRJbnN0YW5jZSggYXJndW1lbnRzICk7DQorCQl9DQogCQlw
dWJsaWMgdm9pZCBhZGRQYXJ0aWFsU3BlY2lhbGl6YXRpb24oIElDUFBDbGFzc1RlbXBsYXRlUGFy
dGlhbFNwZWNpYWxpemF0aW9uIHNwZWMgKSB7DQotICAgICAgICAgICAgZmluYWwgSUJpbmRpbmcg
YmluZGluZyA9IGdldEJpbmRpbmcoKTsNCi0gICAgICAgICAgICBpZiAoYmluZGluZyBpbnN0YW5j
ZW9mIElDUFBJbnRlcm5hbENsYXNzVGVtcGxhdGUpIHsNCi0gICAgICAgICAgICAJKChJQ1BQSW50
ZXJuYWxDbGFzc1RlbXBsYXRlKWdldEJpbmRpbmcoKSkuYWRkUGFydGlhbFNwZWNpYWxpemF0aW9u
KCBzcGVjICk7DQotICAgICAgICAgICAgfQ0KKwkJCWZpbmFsIElCaW5kaW5nIGJpbmRpbmcgPSBn
ZXRCaW5kaW5nKCk7DQorCQkJaWYgKGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQSW50ZXJuYWxDbGFz
c1RlbXBsYXRlKSB7DQorCQkJCSgoSUNQUEludGVybmFsQ2xhc3NUZW1wbGF0ZSlnZXRCaW5kaW5n
KCkpLmFkZFBhcnRpYWxTcGVjaWFsaXphdGlvbiggc3BlYyApOw0KKwkJCX0NCiAJCX0NCi0gICAg
fQ0KLQlwcml2YXRlIElDUFBDbGFzc1RlbXBsYXRlUGFydGlhbFNwZWNpYWxpemF0aW9uIFtdIHBh
cnRpYWxTcGVjaWFsaXphdGlvbnMgPSBudWxsOw0KLQkNCisJfQ0KKw0KIAlwcml2YXRlIGNsYXNz
IEZpbmREZWZpbml0aW9uQWN0aW9uIGV4dGVuZHMgQ1BQQVNUVmlzaXRvciB7DQotCSAgICBwcml2
YXRlIGNoYXIgW10gbmFtZUFycmF5ID0gQ1BQQ2xhc3NUZW1wbGF0ZS50aGlzLmdldE5hbWVDaGFy
QXJyYXkoKTsNCi0JICAgIHB1YmxpYyBJQVNUTmFtZSByZXN1bHQgPSBudWxsOw0KLQkgICAgDQot
CSAgICB7DQotCSAgICAgICAgc2hvdWxkVmlzaXROYW1lcyAgICAgICAgICA9IHRydWU7DQorCQlw
cml2YXRlIGNoYXIgW10gbmFtZUFycmF5ID0gQ1BQQ2xhc3NUZW1wbGF0ZS50aGlzLmdldE5hbWVD
aGFyQXJyYXkoKTsNCisJCXB1YmxpYyBJQVNUTmFtZSByZXN1bHQgPSBudWxsOw0KKw0KKwkJew0K
KwkJCXNob3VsZFZpc2l0TmFtZXMgICAgICAgICAgPSB0cnVlOw0KIAkJCXNob3VsZFZpc2l0RGVj
bGFyYXRpb25zICAgPSB0cnVlOw0KIAkJCXNob3VsZFZpc2l0RGVjbFNwZWNpZmllcnMgPSB0cnVl
Ow0KIAkJCXNob3VsZFZpc2l0RGVjbGFyYXRvcnMgICAgPSB0cnVlOw0KLQkgICAgfQ0KLQkgICAg
DQotCSAgICBwdWJsaWMgaW50IHZpc2l0KCBJQVNUTmFtZSBuYW1lICl7DQorCQl9DQorDQorCQlw
dWJsaWMgaW50IHZpc2l0KCBJQVNUTmFtZSBuYW1lICl7DQogCQkJaWYoIG5hbWUgaW5zdGFuY2Vv
ZiBJQ1BQQVNUVGVtcGxhdGVJZCB8fCBuYW1lIGluc3RhbmNlb2YgSUNQUEFTVFF1YWxpZmllZE5h
bWUgKQ0KIAkJCQlyZXR1cm4gUFJPQ0VTU19DT05USU5VRTsNCiAJCQljaGFyIFtdIGMgPSBuYW1l
LnRvQ2hhckFycmF5KCk7DQpAQCAtMTE5LDM4ICsxMDgsNDAgQEANCiAJCQkJCXJldHVybiBQUk9D
RVNTX0NPTlRJTlVFOw0KIAkJCQluYW1lID0gKElBU1ROYW1lKSBuYW1lLmdldFBhcmVudCgpOw0K
IAkJCX0NCi0JCQkNCi0JICAgICAgICBpZiggbmFtZS5nZXRQYXJlbnQoKSBpbnN0YW5jZW9mIElD
UFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyICYmDQotCSAgICAgICAgICAgIENoYXJBcnJheVV0
aWxzLmVxdWFscyggYywgbmFtZUFycmF5ICkgKSANCi0JICAgICAgICB7DQotCSAgICAgICAgICAg
IElCaW5kaW5nIGJpbmRpbmcgPSBuYW1lLnJlc29sdmVCaW5kaW5nKCk7DQotCSAgICAgICAgICAg
IGlmKCBiaW5kaW5nID09IENQUENsYXNzVGVtcGxhdGUudGhpcyApew0KLQkgICAgICAgICAgICAJ
aWYoIG5hbWUgaW5zdGFuY2VvZiBJQ1BQQVNUUXVhbGlmaWVkTmFtZSApew0KLQkgICAgICAgICAg
ICAJCUlBU1ROYW1lIFtdIG5zID0gKChJQ1BQQVNUUXVhbGlmaWVkTmFtZSluYW1lKS5nZXROYW1l
cygpOw0KLQkgICAgICAgICAgICAJCW5hbWUgPSBuc1sgbnMubGVuZ3RoIC0gMSBdOw0KLQkgICAg
ICAgICAgICAJfQ0KLQkgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmFtZTsNCi0JICAgICAgICAg
ICAgICAgIHJldHVybiBQUk9DRVNTX0FCT1JUOw0KLQkgICAgICAgICAgICB9DQotCSAgICAgICAg
fQ0KLQkgICAgICAgIHJldHVybiBQUk9DRVNTX0NPTlRJTlVFOyANCi0JICAgIH0NCi0JICAgIA0K
Kw0KKwkJCWlmKCBuYW1lLmdldFBhcmVudCgpIGluc3RhbmNlb2YgSUNQUEFTVENvbXBvc2l0ZVR5
cGVTcGVjaWZpZXIgJiYNCisJCQkJCUNoYXJBcnJheVV0aWxzLmVxdWFscyggYywgbmFtZUFycmF5
ICkgKSANCisJCQl7DQorCQkJCUlCaW5kaW5nIGJpbmRpbmcgPSBuYW1lLnJlc29sdmVCaW5kaW5n
KCk7DQorCQkJCWlmKCBiaW5kaW5nID09IENQUENsYXNzVGVtcGxhdGUudGhpcyApew0KKwkJCQkJ
aWYoIG5hbWUgaW5zdGFuY2VvZiBJQ1BQQVNUUXVhbGlmaWVkTmFtZSApew0KKwkJCQkJCUlBU1RO
YW1lIFtdIG5zID0gKChJQ1BQQVNUUXVhbGlmaWVkTmFtZSluYW1lKS5nZXROYW1lcygpOw0KKwkJ
CQkJCW5hbWUgPSBuc1sgbnMubGVuZ3RoIC0gMSBdOw0KKwkJCQkJfQ0KKwkJCQkJcmVzdWx0ID0g
bmFtZTsNCisJCQkJCXJldHVybiBQUk9DRVNTX0FCT1JUOw0KKwkJCQl9DQorCQkJfQ0KKwkJCXJl
dHVybiBQUk9DRVNTX0NPTlRJTlVFOyANCisJCX0NCisNCiAJCXB1YmxpYyBpbnQgdmlzaXQoIElB
U1REZWNsYXJhdGlvbiBkZWNsYXJhdGlvbiApeyANCi0JCSAgICBpZihkZWNsYXJhdGlvbiBpbnN0
YW5jZW9mIElBU1RTaW1wbGVEZWNsYXJhdGlvbiB8fCBkZWNsYXJhdGlvbiBpbnN0YW5jZW9mIElD
UFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uICkNCisJCQlpZihkZWNsYXJhdGlvbiBpbnN0YW5jZW9m
IElBU1RTaW1wbGVEZWNsYXJhdGlvbiB8fCBkZWNsYXJhdGlvbiBpbnN0YW5jZW9mIElDUFBBU1RU
ZW1wbGF0ZURlY2xhcmF0aW9uKQ0KIAkJCQlyZXR1cm4gUFJPQ0VTU19DT05USU5VRTsNCiAJCQly
ZXR1cm4gUFJPQ0VTU19TS0lQOyANCiAJCX0NCiAJCXB1YmxpYyBpbnQgdmlzaXQoIElBU1REZWNs
U3BlY2lmaWVyIGRlY2xTcGVjICl7DQotCQkgICAgcmV0dXJuIChkZWNsU3BlYyBpbnN0YW5jZW9m
IElDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyICkgPyBQUk9DRVNTX0NPTlRJTlVFIDogUFJP
Q0VTU19TS0lQOyANCisJCQlyZXR1cm4gKGRlY2xTcGVjIGluc3RhbmNlb2YgSUNQUEFTVENvbXBv
c2l0ZVR5cGVTcGVjaWZpZXIgKSA/IFBST0NFU1NfQ09OVElOVUUgOiBQUk9DRVNTX1NLSVA7IA0K
IAkJfQ0KIAkJcHVibGljIGludCB2aXNpdCggSUFTVERlY2xhcmF0b3IgZGVjbGFyYXRvciApIAkJ
CXsgcmV0dXJuIFBST0NFU1NfU0tJUDsgfQ0KIAl9DQotCS8qKg0KLQkgKiBAcGFyYW0gZGVjbA0K
LQkgKi8NCi0JcHVibGljIENQUENsYXNzVGVtcGxhdGUoSUFTVE5hbWUgbmFtZSkgew0KKw0KKwlw
cml2YXRlIElDUFBDbGFzc1RlbXBsYXRlUGFydGlhbFNwZWNpYWxpemF0aW9uIFtdIHBhcnRpYWxT
cGVjaWFsaXphdGlvbnMgPSBudWxsOw0KKwlwcml2YXRlIENsYXNzVHlwZU1peGluIG1peGluOw0K
Kw0KKwkgcHVibGljIENQUENsYXNzVGVtcGxhdGUoSUFTVE5hbWUgbmFtZSkgew0KIAkJc3VwZXIo
bmFtZSk7DQorCQl0aGlzLm1peGluPSBuZXcgQ2xhc3NUeXBlTWl4aW4odGhpcyk7DQogCX0NCiAN
CiAJcHVibGljIElDUFBTcGVjaWFsaXphdGlvbiBkZWZlcnJlZEluc3RhbmNlKCBJVHlwZSBbXSBh
cmd1bWVudHMgKXsNCkBAIC0xNjEsMzEwICsxNTIsNDMgQEANCiAJCX0NCiAJCXJldHVybiBpbnN0
YW5jZTsNCiAJfQ0KLQkNCi0JcHJpdmF0ZSB2b2lkIGNoZWNrRm9yRGVmaW5pdGlvbigpew0KKw0K
KwlwdWJsaWMgdm9pZCBjaGVja0ZvckRlZmluaXRpb24oKXsNCiAJCUZpbmREZWZpbml0aW9uQWN0
aW9uIGFjdGlvbiA9IG5ldyBGaW5kRGVmaW5pdGlvbkFjdGlvbigpOw0KIAkJSUFTVE5vZGUgbm9k
ZSA9IENQUFZpc2l0b3IuZ2V0Q29udGFpbmluZ0Jsb2NrSXRlbSggZGVjbGFyYXRpb25zWzBdICku
Z2V0UGFyZW50KCk7DQogCQl3aGlsZSggbm9kZSBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZURl
Y2xhcmF0aW9uICkNCiAJCQlub2RlID0gbm9kZS5nZXRQYXJlbnQoKTsNCiAJCW5vZGUuYWNjZXB0
KCBhY3Rpb24gKTsNCi0JICAgIGRlZmluaXRpb24gPSBhY3Rpb24ucmVzdWx0Ow0KLQkJDQorCQlk
ZWZpbml0aW9uID0gYWN0aW9uLnJlc3VsdDsNCisNCiAJCWlmKCBkZWZpbml0aW9uID09IG51bGwg
KXsNCiAJCQlub2RlLmdldFRyYW5zbGF0aW9uVW5pdCgpLmFjY2VwdCggYWN0aW9uICk7DQotCQkg
ICAgZGVmaW5pdGlvbiA9IGFjdGlvbi5yZXN1bHQ7DQorCQkJZGVmaW5pdGlvbiA9IGFjdGlvbi5y
ZXN1bHQ7DQogCQl9DQotCQkNCisNCiAJCXJldHVybjsNCiAJfQ0KIAkNCiAJcHVibGljIHZvaWQg
YWRkUGFydGlhbFNwZWNpYWxpemF0aW9uKCBJQ1BQQ2xhc3NUZW1wbGF0ZVBhcnRpYWxTcGVjaWFs
aXphdGlvbiBzcGVjICl7DQogCQlwYXJ0aWFsU3BlY2lhbGl6YXRpb25zID0gKElDUFBDbGFzc1Rl
bXBsYXRlUGFydGlhbFNwZWNpYWxpemF0aW9uW10pIEFycmF5VXRpbC5hcHBlbmQoIElDUFBDbGFz
c1RlbXBsYXRlUGFydGlhbFNwZWNpYWxpemF0aW9uLmNsYXNzLCBwYXJ0aWFsU3BlY2lhbGl6YXRp
b25zLCBzcGVjICk7DQogCX0NCi0JDQotCXByaXZhdGUgSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVj
aWZpZXIgZ2V0Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpew0KLQkgICAgaWYoIGRlZmluaXRpb24g
IT0gbnVsbCApew0KLQkgICAgCUlBU1ROb2RlIG5vZGUgPSBkZWZpbml0aW9uLmdldFBhcmVudCgp
Ow0KLQkgICAgCWlmKCBub2RlIGluc3RhbmNlb2YgSUNQUEFTVFF1YWxpZmllZE5hbWUgKQ0KLQkg
ICAgCQlub2RlID0gbm9kZS5nZXRQYXJlbnQoKTsNCi0JICAgIAlpZiggbm9kZSBpbnN0YW5jZW9m
IElDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyICkNCi0JICAgIAkJcmV0dXJuIChJQ1BQQVNU
Q29tcG9zaXRlVHlwZVNwZWNpZmllcikgbm9kZTsNCi0JICAgIH0NCi0JICAgIHJldHVybiBudWxs
Ow0KLQl9DQotCS8qKg0KLQkgKiBAcGFyYW0gdGVtcGxhdGVQYXJhbWV0ZXINCi0JICogQHJldHVy
bg0KLQkgKi8NCi0JLyogKG5vbi1KYXZhZG9jKQ0KLQkgKiBAc2VlIG9yZy5lY2xpcHNlLmNkdC5j
b3JlLmRvbS5hc3QuY3BwLklDUFBDbGFzc1R5cGUjZ2V0QmFzZXMoKQ0KLQkgKi8NCi0JcHVibGlj
IElDUFBCYXNlIFtdIGdldEJhc2VzKCkgew0KLQkJaWYoIGRlZmluaXRpb24gPT0gbnVsbCApew0K
LSAgICAgICAgICAgIGNoZWNrRm9yRGVmaW5pdGlvbigpOw0KLSAgICAgICAgICAgIGlmKCBkZWZp
bml0aW9uID09IG51bGwgKXsNCi0gICAgICAgICAgICAgICAgSUFTVE5hbWUgbm9kZSA9IChkZWNs
YXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlv
bnNbMF0gOiBudWxsOw0KLSAgICAgICAgICAgICAgICByZXR1cm4gbmV3IElDUFBCYXNlIFtdIHsg
bmV3IENQUEJhc2VDbGF1c2UuQ1BQQmFzZVByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5T
RU1BTlRJQ19ERUZJTklUSU9OX05PVF9GT1VORCwgZ2V0TmFtZUNoYXJBcnJheSgpICkgfTsNCi0g
ICAgICAgICAgICB9DQotICAgICAgICB9DQotCQlJQ1BQQVNUQmFzZVNwZWNpZmllciBbXSBiYXNl
cyA9IGdldENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIoKS5nZXRCYXNlU3BlY2lmaWVycygpOw0KLQkJ
aWYoIGJhc2VzLmxlbmd0aCA9PSAwICkNCi0JCSAgICByZXR1cm4gSUNQUEJhc2UuRU1QVFlfQkFT
RV9BUlJBWTsNCi0JCQ0KLQkJSUNQUEJhc2UgW10gYmluZGluZ3MgPSBuZXcgSUNQUEJhc2VbIGJh
c2VzLmxlbmd0aCBdOw0KLQkJZm9yKCBpbnQgaSA9IDA7IGkgPCBiYXNlcy5sZW5ndGg7IGkrKyAp
ew0KLQkJICAgIGJpbmRpbmdzW2ldID0gbmV3IENQUEJhc2VDbGF1c2UoIGJhc2VzW2ldICk7DQot
CQl9DQotCQkNCi0JCXJldHVybiBiaW5kaW5nczsgDQotCX0NCi0NCi0JLyogKG5vbi1KYXZhZG9j
KQ0KLQkgKiBAc2VlIG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSUNvbXBvc2l0ZVR5cGUj
Z2V0RmllbGRzKCkNCi0JICovDQotCXB1YmxpYyBJRmllbGRbXSBnZXRGaWVsZHMoKSB0aHJvd3Mg
RE9NRXhjZXB0aW9uIHsNCi0JICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0JICAgICAg
ICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0JICAgICAgICBpZiggZGVmaW5pdGlvbiA9PSBudWxs
ICl7DQotCSAgICAgICAgICAgIElBU1ROb2RlIG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwg
JiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCi0J
ICAgICAgICAgICAgcmV0dXJuIG5ldyBJRmllbGQgW10geyBuZXcgQ1BQRmllbGQuQ1BQRmllbGRQ
cm9ibGVtKCBub2RlLCBJUHJvYmxlbUJpbmRpbmcuU0VNQU5USUNfREVGSU5JVElPTl9OT1RfRk9V
TkQsIGdldE5hbWVDaGFyQXJyYXkoKSApIH07DQotCSAgICAgICAgfQ0KLQkgICAgfQ0KLQ0KLQkJ
SUZpZWxkW10gZmllbGRzID0gZ2V0RGVjbGFyZWRGaWVsZHMoKTsNCi0JCUlDUFBCYXNlIFtdIGJh
c2VzID0gZ2V0QmFzZXMoKTsNCi0JCWZvciAoIGludCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsg
aSsrICkgew0KLQkJCUlCaW5kaW5nIGIgPSBiYXNlc1tpXS5nZXRCYXNlQ2xhc3MoKTsNCi0JCQlp
ZiggYiBpbnN0YW5jZW9mIElDUFBDbGFzc1R5cGUgKQ0KLQkJCQlmaWVsZHMgPSAoSUZpZWxkW10p
IEFycmF5VXRpbC5hZGRBbGwoIElGaWVsZC5jbGFzcywgZmllbGRzLCAoKElDUFBDbGFzc1R5cGUp
YikuZ2V0RmllbGRzKCkgKTsNCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUZpZWxkW10pIEFycmF5
VXRpbC50cmltKCBJRmllbGQuY2xhc3MsIGZpZWxkcyApOw0KLQl9DQotDQotCS8qIChub24tSmF2
YWRvYykNCi0JICogQHNlZSBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklDb21wb3NpdGVU
eXBlI2ZpbmRGaWVsZChqYXZhLmxhbmcuU3RyaW5nKQ0KLQkgKi8NCi0JcHVibGljIElGaWVsZCBm
aW5kRmllbGQoU3RyaW5nIG5hbWUpIHRocm93cyBET01FeGNlcHRpb24gew0KLQkJSUJpbmRpbmcg
W10gYmluZGluZ3MgPSBDUFBTZW1hbnRpY3MuZmluZEJpbmRpbmdzKCBnZXRDb21wb3NpdGVTY29w
ZSgpLCBuYW1lLCB0cnVlICk7DQotCQlJRmllbGQgZmllbGQgPSBudWxsOw0KLQkJZm9yICggaW50
IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKysgKSB7DQotICAgICAgICAgICAgaWYoIGJp
bmRpbmdzW2ldIGluc3RhbmNlb2YgSUZpZWxkICl7DQotICAgICAgICAgICAgICAgIGlmKCBmaWVs
ZCA9PSBudWxsICkNCi0gICAgICAgICAgICAgICAgICAgIGZpZWxkID0gKElGaWVsZCkgYmluZGlu
Z3NbaV07DQotICAgICAgICAgICAgICAgIGVsc2Ugew0KLSAgICAgICAgICAgICAgICAgICAgSUFT
VE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3Ro
ID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KLSAgICAgICAgICAgICAgICAgICAgcmV0
dXJuIG5ldyBDUFBGaWVsZC5DUFBGaWVsZFByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5T
RU1BTlRJQ19BTUJJR1VPVVNfTE9PS1VQLCBuYW1lLnRvQ2hhckFycmF5KCkgKTsNCi0gICAgICAg
ICAgICAgICAgfQ0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0JCXJldHVybiBmaWVsZDsN
Ci0JfQ0KLQ0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNv
cmUuZG9tLmFzdC5jcHAuSUNQUENsYXNzVHlwZSNnZXREZWNsYXJlZEZpZWxkcygpDQotCSAqLw0K
LQlwdWJsaWMgSUNQUEZpZWxkW10gZ2V0RGVjbGFyZWRGaWVsZHMoKSB0aHJvd3MgRE9NRXhjZXB0
aW9uIHsNCi0JICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0gICAgICAgICAgICBjaGVj
a0ZvckRlZmluaXRpb24oKTsNCi0gICAgICAgICAgICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7
DQotICAgICAgICAgICAgICAgIElBU1ROb2RlIG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwg
JiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCi0g
ICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJQ1BQRmllbGRbXSB7IG5ldyBDUFBGaWVsZC5DUFBG
aWVsZFByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05P
VF9GT1VORCwgZ2V0TmFtZUNoYXJBcnJheSgpICkgfTsNCi0gICAgICAgICAgICB9DQotICAgICAg
ICB9DQotCSAgICBJQmluZGluZyBiaW5kaW5nID0gbnVsbDsNCi0JICAgIElDUFBGaWVsZCBbXSBy
ZXN1bHQgPSBudWxsOw0KLQkgICAgDQotCSAgICBJQVNURGVjbGFyYXRpb24gW10gZGVjbHMgPSBn
ZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCkuZ2V0TWVtYmVycygpOw0KLQkgICAgZm9yICggaW50
IGkgPSAwOyBpIDwgZGVjbHMubGVuZ3RoOyBpKysgKSB7DQotICAgICAgICAgICAgaWYoIGRlY2xz
W2ldIGluc3RhbmNlb2YgSUFTVFNpbXBsZURlY2xhcmF0aW9uICl7DQotICAgICAgICAgICAgICAg
IElBU1REZWNsYXJhdG9yIFtdIGR0b3JzID0gKChJQVNUU2ltcGxlRGVjbGFyYXRpb24pZGVjbHNb
aV0pLmdldERlY2xhcmF0b3JzKCk7DQotICAgICAgICAgICAgICAgIGZvciAoIGludCBqID0gMDsg
aiA8IGR0b3JzLmxlbmd0aDsgaisrICkgew0KLSAgICAgICAgICAgICAgICAgICAgYmluZGluZyA9
IGR0b3JzW2pdLmdldE5hbWUoKS5yZXNvbHZlQmluZGluZygpOw0KLSAgICAgICAgICAgICAgICAg
ICAgaWYoIGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQRmllbGQgKQ0KLSAgICAgICAgICAgICAgICAg
ICAgICAgIHJlc3VsdCA9IChJQ1BQRmllbGRbXSkgQXJyYXlVdGlsLmFwcGVuZCggSUNQUEZpZWxk
LmNsYXNzLCByZXN1bHQsIGJpbmRpbmcgKTsNCi0gICAgICAgICAgICAgICAgfQ0KLSAgICAgICAg
ICAgIH0gZWxzZSBpZiggZGVjbHNbaV0gaW5zdGFuY2VvZiBJQ1BQQVNUVXNpbmdEZWNsYXJhdGlv
biApew0KLSAgICAgICAgICAgICAgICBJQVNUTmFtZSBuID0gKChJQ1BQQVNUVXNpbmdEZWNsYXJh
dGlvbilkZWNsc1tpXSkuZ2V0TmFtZSgpOw0KLSAgICAgICAgICAgICAgICBiaW5kaW5nID0gbi5y
ZXNvbHZlQmluZGluZygpOw0KLSAgICAgICAgICAgICAgICBpZiggYmluZGluZyBpbnN0YW5jZW9m
IElDUFBVc2luZ0RlY2xhcmF0aW9uICl7DQotICAgICAgICAgICAgICAgICAgICBJQmluZGluZyBb
XSBicyA9ICgoSUNQUFVzaW5nRGVjbGFyYXRpb24pYmluZGluZykuZ2V0RGVsZWdhdGVzKCk7DQot
ICAgICAgICAgICAgICAgICAgICBmb3IgKCBpbnQgaiA9IDA7IGogPCBicy5sZW5ndGg7IGorKyAp
IHsNCi0gICAgICAgICAgICAgICAgICAgICAgICBpZiggYnNbal0gaW5zdGFuY2VvZiBJQ1BQRmll
bGQgKQ0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoSUNQUEZpZWxkW10p
IEFycmF5VXRpbC5hcHBlbmQoIElDUFBGaWVsZC5jbGFzcywgcmVzdWx0LCBic1tqXSApOw0KLSAg
ICAgICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIGJpbmRpbmcg
aW5zdGFuY2VvZiBJQ1BQRmllbGQgKSB7DQotICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAo
SUNQUEZpZWxkW10pIEFycmF5VXRpbC5hcHBlbmQoIElDUFBGaWVsZC5jbGFzcywgcmVzdWx0LCBi
aW5kaW5nICk7DQotICAgICAgICAgICAgICAgIH0NCi0gICAgICAgICAgICB9DQotICAgICAgICB9
DQotCQlyZXR1cm4gKElDUFBGaWVsZFtdKSBBcnJheVV0aWwudHJpbSggSUNQUEZpZWxkLmNsYXNz
LCByZXN1bHQgKTsNCi0JfQ0KLQ0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVj
bGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUENsYXNzVHlwZSNnZXRNZXRob2RzKCkNCi0J
ICovDQotCXB1YmxpYyBJQ1BQTWV0aG9kW10gZ2V0TWV0aG9kcygpIHRocm93cyBET01FeGNlcHRp
b24gew0KLQkJT2JqZWN0U2V0IHNldCA9IG5ldyBPYmplY3RTZXQoNCk7DQotCQlzZXQuYWRkQWxs
KCBnZXREZWNsYXJlZE1ldGhvZHMoKSApOw0KLQkJSUNQUENsYXNzU2NvcGUgc2NvcGUgPSAoSUNQ
UENsYXNzU2NvcGUpIGdldENvbXBvc2l0ZVNjb3BlKCk7DQotCQlzZXQuYWRkQWxsKCBzY29wZS5n
ZXRJbXBsaWNpdE1ldGhvZHMoKSApOw0KLQkJSUNQUEJhc2UgW10gYmFzZXMgPSBnZXRCYXNlcygp
Ow0KLQkJZm9yICggaW50IGkgPSAwOyBpIDwgYmFzZXMubGVuZ3RoOyBpKysgKSB7DQotCQkJSUJp
bmRpbmcgYiA9IGJhc2VzW2ldLmdldEJhc2VDbGFzcygpOw0KLQkJCWlmKCBiIGluc3RhbmNlb2Yg
SUNQUENsYXNzVHlwZSApDQotCQkJCXNldC5hZGRBbGwoICgoSUNQUENsYXNzVHlwZSliKS5nZXRN
ZXRob2RzKCkgKTsNCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUNQUE1ldGhvZFtdKSBzZXQua2V5
QXJyYXkoIElDUFBNZXRob2QuY2xhc3MgKTsNCi0JfQ0KLQ0KLQkvKiAobm9uLUphdmFkb2MpDQot
CSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUENsYXNzVHlwZSNn
ZXRBbGxEZWNsYXJlZE1ldGhvZHMoKQ0KLQkgKi8NCi0JcHVibGljIElDUFBNZXRob2RbXSBnZXRB
bGxEZWNsYXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0JCWlmKCBkZWZpbml0
aW9uID09IG51bGwgKXsNCi0JICAgICAgICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0JICAgICAg
ICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotCSAgICAgICAgICAgIElBU1ROb2RlIG5vZGUg
PSAoZGVjbGFyYXRpb25zICE9IG51bGwgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVj
bGFyYXRpb25zWzBdIDogbnVsbDsNCi0JICAgICAgICAgICAgcmV0dXJuIG5ldyBJQ1BQTWV0aG9k
IFtdIHsgbmV3IENQUE1ldGhvZC5DUFBNZXRob2RQcm9ibGVtKCBub2RlLCBJUHJvYmxlbUJpbmRp
bmcuU0VNQU5USUNfREVGSU5JVElPTl9OT1RfRk9VTkQsIGdldE5hbWVDaGFyQXJyYXkoKSApIH07
DQotCSAgICAgICAgfQ0KLQkgICAgfQ0KLQ0KLQkJSUNQUE1ldGhvZFtdIG1ldGhvZHMgPSBnZXRE
ZWNsYXJlZE1ldGhvZHMoKTsNCi0JCUlDUFBCYXNlIFtdIGJhc2VzID0gZ2V0QmFzZXMoKTsNCi0J
CWZvciAoIGludCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICkgew0KLQkJCUlCaW5kaW5n
IGIgPSBiYXNlc1tpXS5nZXRCYXNlQ2xhc3MoKTsNCi0JCQlpZiggYiBpbnN0YW5jZW9mIElDUFBD
bGFzc1R5cGUgKQ0KLQkJCQltZXRob2RzID0gKElDUFBNZXRob2RbXSkgQXJyYXlVdGlsLmFkZEFs
bCggSUNQUE1ldGhvZC5jbGFzcywgbWV0aG9kcywgKChJQ1BQQ2xhc3NUeXBlKWIpLmdldEFsbERl
Y2xhcmVkTWV0aG9kcygpICk7DQotICAgICAgICB9DQotCQlyZXR1cm4gKElDUFBNZXRob2RbXSkg
QXJyYXlVdGlsLnRyaW0oIElDUFBNZXRob2QuY2xhc3MsIG1ldGhvZHMgKTsNCi0JfQ0KLQ0KLQkv
KiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5j
cHAuSUNQUENsYXNzVHlwZSNnZXREZWNsYXJlZE1ldGhvZHMoKQ0KLQkgKi8NCi0JcHVibGljIElD
UFBNZXRob2RbXSBnZXREZWNsYXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0J
ICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0gICAgICAgICAgICBjaGVja0ZvckRlZmlu
aXRpb24oKTsNCi0gICAgICAgICAgICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotICAgICAg
ICAgICAgICAgIElBU1ROb2RlIG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwgJiYgZGVjbGFy
YXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCi0gICAgICAgICAg
ICAgICAgcmV0dXJuIG5ldyBJQ1BQTWV0aG9kW10geyBuZXcgQ1BQTWV0aG9kLkNQUE1ldGhvZFBy
b2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05PVF9GT1VO
RCwgZ2V0TmFtZUNoYXJBcnJheSgpICkgfTsNCi0gICAgICAgICAgICB9DQotICAgICAgICB9DQot
CSAgICBJQmluZGluZyBiaW5kaW5nID0gbnVsbDsNCi0JICAgIElDUFBNZXRob2QgW10gcmVzdWx0
ID0gbnVsbDsNCi0JICAgIA0KLQkgICAgSUFTVERlY2xhcmF0aW9uIFtdIGRlY2xzID0gZ2V0Q29t
cG9zaXRlVHlwZVNwZWNpZmllcigpLmdldE1lbWJlcnMoKTsNCi0JICAgIGZvciAoIGludCBpID0g
MDsgaSA8IGRlY2xzLmxlbmd0aDsgaSsrICkgew0KLQkJCUlBU1REZWNsYXJhdGlvbiBkZWNsID0g
ZGVjbHNbaV07DQotCQkJd2hpbGUoIGRlY2wgaW5zdGFuY2VvZiBJQ1BQQVNUVGVtcGxhdGVEZWNs
YXJhdGlvbiApDQotCQkJCWRlY2wgPSAoKElDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uKWRlY2wp
LmdldERlY2xhcmF0aW9uKCk7DQotICAgICAgICAgICAgaWYoIGRlY2wgaW5zdGFuY2VvZiBJQVNU
U2ltcGxlRGVjbGFyYXRpb24gKXsNCi0gICAgICAgICAgICAgICAgSUFTVERlY2xhcmF0b3IgW10g
ZHRvcnMgPSAoKElBU1RTaW1wbGVEZWNsYXJhdGlvbilkZWNsKS5nZXREZWNsYXJhdG9ycygpOw0K
LSAgICAgICAgICAgICAgICBmb3IgKCBpbnQgaiA9IDA7IGogPCBkdG9ycy5sZW5ndGg7IGorKyAp
IHsNCi0gICAgICAgICAgICAgICAgICAgIGJpbmRpbmcgPSBkdG9yc1tqXS5nZXROYW1lKCkucmVz
b2x2ZUJpbmRpbmcoKTsNCi0gICAgICAgICAgICAgICAgICAgIGlmKCBiaW5kaW5nIGluc3RhbmNl
b2YgSUNQUE1ldGhvZCkNCi0gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoSUNQUE1l
dGhvZFtdKSBBcnJheVV0aWwuYXBwZW5kKCBJQ1BQTWV0aG9kLmNsYXNzLCByZXN1bHQsIGJpbmRp
bmcgKTsNCi0gICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgIH0gZWxzZSBpZiggZGVjbCBp
bnN0YW5jZW9mIElBU1RGdW5jdGlvbkRlZmluaXRpb24gKXsNCi0gICAgICAgICAgICAgICAgSUFT
VERlY2xhcmF0b3IgZHRvciA9ICgoSUFTVEZ1bmN0aW9uRGVmaW5pdGlvbilkZWNsKS5nZXREZWNs
YXJhdG9yKCk7DQotICAgICAgICAgICAgICAgIGR0b3IgPSBDUFBWaXNpdG9yLmdldE1vc3ROZXN0
ZWREZWNsYXJhdG9yKCBkdG9yICk7DQotICAgICAgICAgICAgICAgIGJpbmRpbmcgPSBkdG9yLmdl
dE5hbWUoKS5yZXNvbHZlQmluZGluZygpOw0KLSAgICAgICAgICAgICAgICBpZiggYmluZGluZyBp
bnN0YW5jZW9mIElDUFBNZXRob2QgKXsNCi0gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChJ
Q1BQTWV0aG9kW10pIEFycmF5VXRpbC5hcHBlbmQoIElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCwg
YmluZGluZyApOw0KLSAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgfSBlbHNlIGlmKCBk
ZWNsIGluc3RhbmNlb2YgSUNQUEFTVFVzaW5nRGVjbGFyYXRpb24gKXsNCi0gICAgICAgICAgICAg
ICAgSUFTVE5hbWUgbiA9ICgoSUNQUEFTVFVzaW5nRGVjbGFyYXRpb24pZGVjbCkuZ2V0TmFtZSgp
Ow0KLSAgICAgICAgICAgICAgICBiaW5kaW5nID0gbi5yZXNvbHZlQmluZGluZygpOw0KLSAgICAg
ICAgICAgICAgICBpZiggYmluZGluZyBpbnN0YW5jZW9mIElDUFBVc2luZ0RlY2xhcmF0aW9uICl7
DQotICAgICAgICAgICAgICAgICAgICBJQmluZGluZyBbXSBicyA9ICgoSUNQUFVzaW5nRGVjbGFy
YXRpb24pYmluZGluZykuZ2V0RGVsZWdhdGVzKCk7DQotICAgICAgICAgICAgICAgICAgICBmb3Ig
KCBpbnQgaiA9IDA7IGogPCBicy5sZW5ndGg7IGorKyApIHsNCi0gICAgICAgICAgICAgICAgICAg
ICAgICBpZiggYnNbal0gaW5zdGFuY2VvZiBJQ1BQTWV0aG9kICkNCi0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcmVzdWx0ID0gKElDUFBNZXRob2RbXSkgQXJyYXlVdGlsLmFwcGVuZCggSUNQ
UE1ldGhvZC5jbGFzcywgcmVzdWx0LCBic1tqXSApOw0KLSAgICAgICAgICAgICAgICAgICAgfQ0K
LSAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQTWV0aG9k
ICkgew0KLSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKElDUFBNZXRob2RbXSkgQXJyYXlV
dGlsLmFwcGVuZCggSUNQUE1ldGhvZC5jbGFzcywgcmVzdWx0LCBiaW5kaW5nICk7DQotICAgICAg
ICAgICAgICAgIH0NCi0gICAgICAgICAgICB9DQotICAgICAgICB9DQotCQlyZXR1cm4gKElDUFBN
ZXRob2RbXSkgQXJyYXlVdGlsLnRyaW0oIElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCApOw0KLQl9
DQotDQotCS8qIChub24tSmF2YWRvYykNCi0JICogQHNlZSBvcmcuZWNsaXBzZS5jZHQuY29yZS5k
b20uYXN0LmNwcC5JQ1BQQ2xhc3NUeXBlI2dldENvbnN0cnVjdG9ycygpDQotCSAqLw0KLQlwdWJs
aWMgSUNQUENvbnN0cnVjdG9yW10gZ2V0Q29uc3RydWN0b3JzKCkgdGhyb3dzIERPTUV4Y2VwdGlv
biB7DQotCQlpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotICAgICAgICAgICAgY2hlY2tGb3JE
ZWZpbml0aW9uKCk7DQotICAgICAgICAgICAgaWYoIGRlZmluaXRpb24gPT0gbnVsbCApew0KLSAg
ICAgICAgICAgICAgICBJQVNUTm9kZSBub2RlID0gKGRlY2xhcmF0aW9ucyAhPSBudWxsICYmIGRl
Y2xhcmF0aW9ucy5sZW5ndGggPiAwKSA/IGRlY2xhcmF0aW9uc1swXSA6IG51bGw7DQotICAgICAg
ICAgICAgICAgIHJldHVybiBuZXcgSUNQUENvbnN0cnVjdG9yIFtdIHsgbmV3IENQUENvbnN0cnVj
dG9yLkNQUENvbnN0cnVjdG9yUHJvYmxlbSggbm9kZSwgSVByb2JsZW1CaW5kaW5nLlNFTUFOVElD
X0RFRklOSVRJT05fTk9UX0ZPVU5ELCBnZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KLSAgICAgICAg
ICAgIH0NCi0gICAgICAgIH0NCi0gICAgICAgIA0KLSAgICAgICAgSUNQUENsYXNzU2NvcGUgc2Nv
cGUgPSAoSUNQUENsYXNzU2NvcGUpIGdldENvbXBvc2l0ZVNjb3BlKCk7DQotICAgICAgICBpZigg
QVNUSW50ZXJuYWwuaXNGdWxseUNhY2hlZChzY29wZSkpDQotICAgICAgICAJcmV0dXJuICgoQ1BQ
Q2xhc3NTY29wZSlzY29wZSkuZ2V0Q29uc3RydWN0b3JzKCB0cnVlICk7DQotICAgICAgICAJDQot
ICAgICAgICBJQVNURGVjbGFyYXRpb24gW10gbWVtYmVycyA9IGdldENvbXBvc2l0ZVR5cGVTcGVj
aWZpZXIoKS5nZXRNZW1iZXJzKCk7DQotICAgICAgICBmb3IoIGludCBpID0gMDsgaSA8IG1lbWJl
cnMubGVuZ3RoOyBpKysgKXsNCi0gICAgICAgIAlJQVNURGVjbGFyYXRpb24gZGVjbCA9IG1lbWJl
cnNbaV07DQotICAgICAgICAJaWYoIGRlY2wgaW5zdGFuY2VvZiBJQ1BQQVNUVGVtcGxhdGVEZWNs
YXJhdGlvbiApDQotICAgICAgICAJCWRlY2wgPSAoKElDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9u
KWRlY2wpLmdldERlY2xhcmF0aW9uKCk7DQotCQkJaWYoIGRlY2wgaW5zdGFuY2VvZiBJQVNUU2lt
cGxlRGVjbGFyYXRpb24gKXsNCi0JCQkgICAgSUFTVERlY2xhcmF0b3IgW10gZHRvcnMgPSAoKElB
U1RTaW1wbGVEZWNsYXJhdGlvbilkZWNsKS5nZXREZWNsYXJhdG9ycygpOw0KLQkJCSAgICBmb3Io
IGludCBqID0gMDsgaiA8IGR0b3JzLmxlbmd0aDsgaisrICl7DQotCQkJICAgICAgICBpZiggZHRv
cnNbal0gPT0gbnVsbCApIGJyZWFrOw0KLQkJICAgICAgICAgICAgQVNUSW50ZXJuYWwuYWRkTmFt
ZShzY29wZSwgIGR0b3JzW2pdLmdldE5hbWUoKSApOw0KLQkJCSAgICB9DQotCQkJfSBlbHNlIGlm
KCBkZWNsIGluc3RhbmNlb2YgSUFTVEZ1bmN0aW9uRGVmaW5pdGlvbiApew0KLQkJCSAgICBJQVNU
RGVjbGFyYXRvciBkdG9yID0gKChJQVNURnVuY3Rpb25EZWZpbml0aW9uKWRlY2wpLmdldERlY2xh
cmF0b3IoKTsNCi0JCQkgICAgQVNUSW50ZXJuYWwuYWRkTmFtZShzY29wZSwgIGR0b3IuZ2V0TmFt
ZSgpICk7DQotCQkJfQ0KLSAgICAgICAgfQ0KLSAgICAgICAgDQotICAgICAgICByZXR1cm4gKChD
UFBDbGFzc1Njb3BlKXNjb3BlKS5nZXRDb25zdHJ1Y3RvcnMoIHRydWUgKTsNCi0JfQ0KIA0KLQkv
KiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5j
cHAuSUNQUENsYXNzVHlwZSNnZXRGcmllbmRzKCkNCi0JICovDQotCXB1YmxpYyBJQmluZGluZ1td
IGdldEZyaWVuZHMoKSB7DQotCQkvL1RPRE8NCi0JCXJldHVybiBJQmluZGluZy5FTVBUWV9CSU5E
SU5HX0FSUkFZOw0KLQl9DQotDQotCS8qIChub24tSmF2YWRvYykNCi0JICogQHNlZSBvcmcuZWNs
aXBzZS5jZHQuY29yZS5kb20uYXN0LklDb21wb3NpdGVUeXBlI2dldEtleSgpDQotCSAqLw0KLQlw
dWJsaWMgaW50IGdldEtleSgpIHsNCi0JICAgIGlmKCBkZWZpbml0aW9uICE9IG51bGwgKSB7DQot
CSAgICAJSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgY3RzPSBnZXRDb21wb3NpdGVUeXBl
U3BlY2lmaWVyKCk7DQotCSAgICAJaWYgKGN0cyAhPSBudWxsKSB7DQotCSAgICAJCXJldHVybiBj
dHMuZ2V0S2V5KCk7DQotCSAgICAJfQ0KLQkgICAgCUlBU1ROb2RlIG49IGRlZmluaXRpb24uZ2V0
UGFyZW50KCk7DQotCSAgICAJaWYgKG4gaW5zdGFuY2VvZiBJQ1BQQVNURWxhYm9yYXRlZFR5cGVT
cGVjaWZpZXIpIHsNCi0JICAgIAkJcmV0dXJuICgoSUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lm
aWVyKW4pLmdldEtpbmQoKTsNCi0JICAgIAl9DQotCSAgICB9DQotCSAgICANCi0JICAgIGlmKCBk
ZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCApew0KLQkgICAg
ICAgIElBU1ROb2RlIG4gPSBkZWNsYXJhdGlvbnNbMF0uZ2V0UGFyZW50KCk7DQotCSAgICAgICAg
aWYoIG4gaW5zdGFuY2VvZiBJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIgKXsNCi0JICAg
ICAgICAgICAgcmV0dXJuICgoSUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lmaWVyKW4pLmdldEtp
bmQoKTsNCi0JICAgICAgICB9DQotCSAgICB9DQotCSAgICAgDQotCQlyZXR1cm4gSUNQUEFTVEVs
YWJvcmF0ZWRUeXBlU3BlY2lmaWVyLmtfY2xhc3M7DQorCXB1YmxpYyBJQ1BQQVNUQ29tcG9zaXRl
VHlwZVNwZWNpZmllciBnZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCl7DQorCQlpZiggZGVmaW5p
dGlvbiAhPSBudWxsICl7DQorCQkJSUFTVE5vZGUgbm9kZSA9IGRlZmluaXRpb24uZ2V0UGFyZW50
KCk7DQorCQkJaWYoIG5vZGUgaW5zdGFuY2VvZiBJQ1BQQVNUUXVhbGlmaWVkTmFtZSApDQorCQkJ
CW5vZGUgPSBub2RlLmdldFBhcmVudCgpOw0KKwkJCWlmKCBub2RlIGluc3RhbmNlb2YgSUNQUEFT
VENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgKQ0KKwkJCQlyZXR1cm4gKElDUFBBU1RDb21wb3NpdGVU
eXBlU3BlY2lmaWVyKSBub2RlOw0KKwkJfQ0KKwkJcmV0dXJuIG51bGw7DQogCX0NCiANCi0JLyog
KG5vbi1KYXZhZG9jKQ0KLQkgKiBAc2VlIG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSUNv
bXBvc2l0ZVR5cGUjZ2V0Q29tcG9zaXRlU2NvcGUoKQ0KLQkgKi8NCiAJcHVibGljIElTY29wZSBn
ZXRDb21wb3NpdGVTY29wZSgpIHsNCi0JICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKQ0KLQkg
ICAgICAgIGNoZWNrRm9yRGVmaW5pdGlvbigpOw0KLQkJaWYoIGRlZmluaXRpb24gIT0gbnVsbCAp
IHsNCisJCWlmIChkZWZpbml0aW9uID09IG51bGwpIHsNCisJCQljaGVja0ZvckRlZmluaXRpb24o
KTsNCisJCX0NCisJCWlmIChkZWZpbml0aW9uICE9IG51bGwpIHsNCiAJCQlJQVNUTm9kZSBwYXJl
bnQgPSBkZWZpbml0aW9uLmdldFBhcmVudCgpOw0KIAkJCXdoaWxlIChwYXJlbnQgaW5zdGFuY2Vv
ZiBJQVNUTmFtZSkNCiAJCQkJcGFyZW50ID0gcGFyZW50LmdldFBhcmVudCgpOw0KQEAgLTQ3Niw3
NiArMjAwLDk4IEBADQogCQlyZXR1cm4gbnVsbDsNCiAJfQ0KIA0KLQkvKiAobm9uLUphdmFkb2Mp
DQotCSAqIEBzZWUgamF2YS5sYW5nLk9iamVjdCNjbG9uZSgpDQotCSAqLw0KLQlwdWJsaWMgT2Jq
ZWN0IGNsb25lKCkgew0KLQkJdHJ5IHsNCi0JCQlyZXR1cm4gc3VwZXIuY2xvbmUoKTsNCi0JCX0g
Y2F0Y2ggKENsb25lTm90U3VwcG9ydGVkRXhjZXB0aW9uIGUpIHsNCisJcHVibGljIGludCBnZXRL
ZXkoKSB7DQorCQlpZiggZGVmaW5pdGlvbiAhPSBudWxsICkgew0KKwkJCUlDUFBBU1RDb21wb3Np
dGVUeXBlU3BlY2lmaWVyIGN0cz0gZ2V0Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpOw0KKwkJCWlm
IChjdHMgIT0gbnVsbCkgew0KKwkJCQlyZXR1cm4gY3RzLmdldEtleSgpOw0KKwkJCX0NCisJCQlJ
QVNUTm9kZSBuPSBkZWZpbml0aW9uLmdldFBhcmVudCgpOw0KKwkJCWlmIChuIGluc3RhbmNlb2Yg
SUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lmaWVyKSB7DQorCQkJCXJldHVybiAoKElDUFBBU1RF
bGFib3JhdGVkVHlwZVNwZWNpZmllciluKS5nZXRLaW5kKCk7DQorCQkJfQ0KIAkJfQ0KLQkJcmV0
dXJuIG51bGw7DQotCX0NCiANCi0JLyogKG5vbi1KYXZhZG9jKQ0KLQkgKiBAc2VlIG9yZy5lY2xp
cHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwLklDUFBJbnRlcm5hbENsYXNzVHlw
ZSNnZXRDb252ZXJzaW9uT3BlcmF0b3JzKCkNCi0JICovDQotCXB1YmxpYyBJQ1BQTWV0aG9kW10g
Z2V0Q29udmVyc2lvbk9wZXJhdG9ycygpIHsNCi0JCXJldHVybiBJQ1BQTWV0aG9kLkVNUFRZX0NQ
UE1FVEhPRF9BUlJBWTsNCi0JfQ0KLQ0KLSAgICAvKiAobm9uLUphdmFkb2MpDQotICAgICAqIEBz
ZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JVHlwZSNpc1NhbWVUeXBlKG9yZy5lY2xp
cHNlLmNkdC5jb3JlLmRvbS5hc3QuSVR5cGUpDQotICAgICAqLw0KLSAgICBwdWJsaWMgYm9vbGVh
biBpc1NhbWVUeXBlKCBJVHlwZSB0eXBlICkgew0KLSAgICAgICAgaWYoIHR5cGUgPT0gdGhpcyAp
DQotICAgICAgICAgICAgcmV0dXJuIHRydWU7DQotICAgICAgICBpZiggdHlwZSBpbnN0YW5jZW9m
IElUeXBlZGVmIHx8IHR5cGUgaW5zdGFuY2VvZiBJSW5kZXhUeXBlKQ0KLSAgICAgICAgICAgIHJl
dHVybiB0eXBlLmlzU2FtZVR5cGUoIHRoaXMgKTsNCi0gICAgICAgIHJldHVybiBmYWxzZTsNCi0g
ICAgfQ0KKwkJaWYoIGRlY2xhcmF0aW9ucyAhPSBudWxsICYmIGRlY2xhcmF0aW9ucy5sZW5ndGgg
PiAwICl7DQorCQkJSUFTVE5vZGUgbiA9IGRlY2xhcmF0aW9uc1swXS5nZXRQYXJlbnQoKTsNCisJ
CQlpZiggbiBpbnN0YW5jZW9mIElDUFBBU1RFbGFib3JhdGVkVHlwZVNwZWNpZmllciApew0KKwkJ
CQlyZXR1cm4gKChJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIpbikuZ2V0S2luZCgpOw0K
KwkJCX0NCisJCX0NCisNCisJCXJldHVybiBJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIu
a19jbGFzczsNCisJfQ0KKwkNCisJDQogDQogCXB1YmxpYyBJQ1BQQ2xhc3NUZW1wbGF0ZVBhcnRp
YWxTcGVjaWFsaXphdGlvbltdIGdldFBhcnRpYWxTcGVjaWFsaXphdGlvbnMoKSB7DQogCQlwYXJ0
aWFsU3BlY2lhbGl6YXRpb25zID0gKElDUFBDbGFzc1RlbXBsYXRlUGFydGlhbFNwZWNpYWxpemF0
aW9uW10pIEFycmF5VXRpbC50cmltKCBJQ1BQQ2xhc3NUZW1wbGF0ZVBhcnRpYWxTcGVjaWFsaXph
dGlvbi5jbGFzcywgcGFydGlhbFNwZWNpYWxpemF0aW9ucyApOw0KIAkJcmV0dXJuIHBhcnRpYWxT
cGVjaWFsaXphdGlvbnM7DQogCX0NCiANCi0gICAgLyogKG5vbi1KYXZhZG9jKQ0KLSAgICAgKiBA
c2VlIG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwLklDUFBJbnRl
cm5hbEJpbmRpbmcjY3JlYXRlRGVsZWdhdGUob3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5J
QVNUTmFtZSkNCi0gICAgICovDQotICAgIHB1YmxpYyBJQ1BQRGVsZWdhdGUgY3JlYXRlRGVsZWdh
dGUoIElBU1ROYW1lIG5hbWUgKSB7DQotICAgICAgICByZXR1cm4gbmV3IENQUENsYXNzVGVtcGxh
dGVEZWxlZ2F0ZSggbmFtZSwgdGhpcyApOw0KLSAgICB9DQorCXB1YmxpYyBJQ1BQRGVsZWdhdGUg
Y3JlYXRlRGVsZWdhdGUoIElBU1ROYW1lIG5hbWUgKSB7DQorCQlyZXR1cm4gbmV3IENQUENsYXNz
VGVtcGxhdGVEZWxlZ2F0ZSggbmFtZSwgdGhpcyApOw0KKwl9DQorCQ0KKwkvKiAgICovDQorCQ0K
KwlwdWJsaWMgYm9vbGVhbiBpc1NhbWVUeXBlKCBJVHlwZSB0eXBlICkgew0KKwkJaWYgKHR5cGUg
PT0gdGhpcykNCisJCQlyZXR1cm4gdHJ1ZTsNCisJCWlmICh0eXBlIGluc3RhbmNlb2YgSVR5cGVk
ZWYgfHwgdHlwZSBpbnN0YW5jZW9mIElJbmRleFR5cGUgfHwgdHlwZSBpbnN0YW5jZW9mIElDUFBE
ZWxlZ2F0ZSkNCisJCQlyZXR1cm4gdHlwZS5pc1NhbWVUeXBlKHRoaXMpOw0KKwkJcmV0dXJuIGZh
bHNlOw0KKwl9DQorCQ0KKwlwdWJsaWMgSUNQUEJhc2UgW10gZ2V0QmFzZXMoKSB7DQorCQlyZXR1
cm4gbWl4aW4uZ2V0QmFzZXMoKTsNCisJfQ0KKw0KKwlwdWJsaWMgSUZpZWxkW10gZ2V0RmllbGRz
KCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQlyZXR1cm4gbWl4aW4uZ2V0RmllbGRzKCk7DQor
CX0NCisNCisJcHVibGljIElDUFBGaWVsZFtdIGdldERlY2xhcmVkRmllbGRzKCkgdGhyb3dzIERP
TUV4Y2VwdGlvbiB7DQorCQlyZXR1cm4gbWl4aW4uZ2V0RGVjbGFyZWRGaWVsZHMoKTsNCisJfQ0K
Kw0KKwlwdWJsaWMgSUNQUE1ldGhvZFtdIGdldENvbnZlcnNpb25PcGVyYXRvcnMoKSB0aHJvd3Mg
RE9NRXhjZXB0aW9uIHsNCisJCXJldHVybiBtaXhpbi5nZXRDb252ZXJzaW9uT3BlcmF0b3JzKCk7
DQorCX0NCiANCisJcHVibGljIElDUFBNZXRob2RbXSBnZXRNZXRob2RzKCkgdGhyb3dzIERPTUV4
Y2VwdGlvbiB7DQorCQlyZXR1cm4gbWl4aW4uZ2V0TWV0aG9kcygpOw0KKwl9DQorDQorCXB1Ymxp
YyBJQ1BQTWV0aG9kW10gZ2V0QWxsRGVjbGFyZWRNZXRob2RzKCkgdGhyb3dzIERPTUV4Y2VwdGlv
biB7DQorCQlyZXR1cm4gbWl4aW4uZ2V0QWxsRGVjbGFyZWRNZXRob2RzKCk7DQorCX0NCisNCisJ
cHVibGljIElDUFBNZXRob2RbXSBnZXREZWNsYXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhjZXB0
aW9uIHsNCisJCXJldHVybiBtaXhpbi5nZXREZWNsYXJlZE1ldGhvZHMoKTsNCisJfQ0KKw0KKwlw
dWJsaWMgSUNQUENvbnN0cnVjdG9yW10gZ2V0Q29uc3RydWN0b3JzKCkgdGhyb3dzIERPTUV4Y2Vw
dGlvbiB7DQorCQlyZXR1cm4gbWl4aW4uZ2V0Q29uc3RydWN0b3JzKCk7DQorCX0NCisNCisJcHVi
bGljIElCaW5kaW5nW10gZ2V0RnJpZW5kcygpIHsNCisJCXJldHVybiBtaXhpbi5nZXRGcmllbmRz
KCk7DQorCX0NCisJDQogCXB1YmxpYyBJQ1BQQ2xhc3NUeXBlW10gZ2V0TmVzdGVkQ2xhc3Nlcygp
IHsNCi0JCWlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0gICAgICAgICAgICBjaGVja0ZvckRl
ZmluaXRpb24oKTsNCi0gICAgICAgICAgICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotICAg
ICAgICAgICAgICAgIElBU1ROb2RlIG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwgJiYgZGVj
bGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCi0gICAgICAg
ICAgICAgICAgcmV0dXJuIG5ldyBJQ1BQQ2xhc3NUeXBlW10geyBuZXcgQ1BQQ2xhc3NUeXBlUHJv
YmxlbSggbm9kZSwgSVByb2JsZW1CaW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5E
LCBnZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0J
ICAgIElCaW5kaW5nIGJpbmRpbmcgPSBudWxsOw0KLQkgICAgSUNQUENsYXNzVHlwZSBbXSByZXN1
bHQgPSBudWxsOw0KLQkgICAgDQotCSAgICBJQVNURGVjbGFyYXRpb24gW10gZGVjbHMgPSBnZXRD
b21wb3NpdGVUeXBlU3BlY2lmaWVyKCkuZ2V0TWVtYmVycygpOw0KLQkgICAgZm9yICggaW50IGkg
PSAwOyBpIDwgZGVjbHMubGVuZ3RoOyBpKysgKSB7DQotCQkJSUFTVERlY2xhcmF0aW9uIGRlY2wg
PSBkZWNsc1tpXTsNCi0JCQl3aGlsZSggZGVjbCBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZURl
Y2xhcmF0aW9uICkNCi0JCQkJZGVjbCA9ICgoSUNQUEFTVFRlbXBsYXRlRGVjbGFyYXRpb24pZGVj
bCkuZ2V0RGVjbGFyYXRpb24oKTsNCi0gICAgICAgICAgICBpZiggZGVjbCBpbnN0YW5jZW9mIElB
U1RTaW1wbGVEZWNsYXJhdGlvbiApew0KLQkJCQlJQVNURGVjbFNwZWNpZmllciBkZWNsU3BlYyA9
ICgoSUFTVFNpbXBsZURlY2xhcmF0aW9uKSBkZWNsKS5nZXREZWNsU3BlY2lmaWVyKCk7DQotCQkJ
CWlmKCBkZWNsU3BlYyBpbnN0YW5jZW9mIElDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyICl7
DQotCQkJCQliaW5kaW5nID0gKChJQ1BQQVNUQ29tcG9zaXRlVHlwZVNwZWNpZmllcilkZWNsU3Bl
YykuZ2V0TmFtZSgpLnJlc29sdmVCaW5kaW5nKCk7DQotCQkJCX0gZWxzZSBpZiggZGVjbFNwZWMg
aW5zdGFuY2VvZiBJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIgJiYNCi0JCQkJCQkgICAo
KElBU1RTaW1wbGVEZWNsYXJhdGlvbilkZWNsKS5nZXREZWNsYXJhdG9ycygpLmxlbmd0aCA9PSAw
ICkNCi0JCQkJew0KLQkJCQkJYmluZGluZyA9ICgoSUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lm
aWVyKWRlY2xTcGVjKS5nZXROYW1lKCkucmVzb2x2ZUJpbmRpbmcoKTsNCi0JCQkJfQ0KLQkJCQlp
ZiggYmluZGluZyBpbnN0YW5jZW9mIElDUFBDbGFzc1R5cGUgKQ0KLQkJCQkJcmVzdWx0ID0gKElD
UFBDbGFzc1R5cGVbXSlBcnJheVV0aWwuYXBwZW5kKCBJQ1BQQ2xhc3NUeXBlLmNsYXNzLCByZXN1
bHQsIGJpbmRpbmcgKTsNCi0gICAgICAgICAgICB9IA0KLSAgICAgICAgfQ0KLQkJcmV0dXJuIChJ
Q1BQQ2xhc3NUeXBlW10pIEFycmF5VXRpbC50cmltKCBJQ1BQQ2xhc3NUeXBlLmNsYXNzLCByZXN1
bHQgKTsNCisJCXJldHVybiBtaXhpbi5nZXROZXN0ZWRDbGFzc2VzKCk7DQorCX0NCisNCisJcHVi
bGljIElGaWVsZCBmaW5kRmllbGQoU3RyaW5nIG5hbWUpIHRocm93cyBET01FeGNlcHRpb24gew0K
KwkJcmV0dXJuIG1peGluLmZpbmRGaWVsZChuYW1lKTsNCisJfQ0KKwkNCisJcHVibGljIE9iamVj
dCBjbG9uZSgpIHsNCisJCXRyeSB7DQorCQkJcmV0dXJuIHN1cGVyLmNsb25lKCk7DQorCQl9IGNh
dGNoIChDbG9uZU5vdFN1cHBvcnRlZEV4Y2VwdGlvbiBlKSB7DQorCQl9DQorCQlyZXR1cm4gbnVs
bDsNCiAJfQ0KIH0NCkluZGV4OiBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUv
ZG9tL3BhcnNlci9jcHAvQ1BQQ2xhc3NTY29wZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTog
L2N2c3Jvb3QvdG9vbHMvb3JnLmVjbGlwc2UuY2R0L2FsbC9vcmcuZWNsaXBzZS5jZHQuY29yZS9w
YXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ1BQQ2xh
c3NTY29wZS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS40NQ0KZGlmZiAtdSAtcjEuNDUg
Q1BQQ2xhc3NTY29wZS5qYXZhDQotLS0gcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9j
b3JlL2RvbS9wYXJzZXIvY3BwL0NQUENsYXNzU2NvcGUuamF2YQkyMyBPY3QgMjAwNyAxNTozNzo0
OCAtMDAwMAkxLjQ1DQorKysgcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3JlL2Rv
bS9wYXJzZXIvY3BwL0NQUENsYXNzU2NvcGUuamF2YQk5IEphbiAyMDA4IDE1OjQyOjEzIC0wMDAw
DQpAQCAtNDA1LDcgKzQwNSw3IEBADQogCQkJSUNQUEFTVEZ1bmN0aW9uRGVjbGFyYXRvciBkY2x0
b3I9IGN0b3JzW2ldOw0KIAkJCUlBU1RQYXJhbWV0ZXJEZWNsYXJhdGlvbiBbXSBwcyA9IGRjbHRv
ci5nZXRQYXJhbWV0ZXJzKCk7DQogICAgICAgICAJaWYoIHBzLmxlbmd0aCA+PSAxICl7DQotICAg
ICAgICAJCWlmKHBhcmFtSGFzVHlwZVJlZmVyZW5jZVRvVGhlQXNzb2NpYXRlZENsYXNzVHlwZShw
c1swXSkpIHsNCisgICAgICAgIAkJaWYocGFyYW1IYXNUeXBlUmVmZXJlbmNlVG9UaGVBc3NvY2lh
dGVkQ2xhc3NUeXBlKHBzWzBdLCBjb21wU3BlYy5nZXROYW1lKCkuZ2V0UmF3U2lnbmF0dXJlKCkp
KSB7DQogICAgICAgICAgICAgCQkvLyBhbmQgYWxsIHJlbWFpbmluZyBhcmd1bWVudHMgaGF2ZSBp
bml0aWFsaXNlcnMNCiAgICAgICAgIAkJCWZvcihpbnQgaj0xOyBqPHBzLmxlbmd0aDsgaisrKSB7
DQogICAgICAgICAgICAgCQkJaWYoIHBzW2pdLmdldERlY2xhcmF0b3IoKS5nZXRJbml0aWFsaXpl
cigpID09IG51bGwgKSB7DQpAQCAtNDI5LDcgKzQyOSw3IEBADQogCX0NCiAJDQogCXByaXZhdGUg
c3RhdGljIElDUFBBU1RGdW5jdGlvbkRlY2xhcmF0b3JbXSBnZXRVc2VyRGVjbGFyZWRDdG9yT3JE
dG9yKCBJQ1BQQVNUQ29tcG9zaXRlVHlwZVNwZWNpZmllciBjb21wU3BlYywgYm9vbGVhbiBjb25z
dHJ1Y3RvciApIHsNCi0JCUxpc3QgcmVzdWx0PSBuZXcgQXJyYXlMaXN0KCk7DQorCQlMaXN0PElD
UFBBU1RGdW5jdGlvbkRlY2xhcmF0b3I+IHJlc3VsdD0gbmV3IEFycmF5TGlzdDxJQ1BQQVNURnVu
Y3Rpb25EZWNsYXJhdG9yPigpOw0KIAkJSUFTVERlY2xhcmF0aW9uIFtdIG1lbWJlcnMgPSBjb21w
U3BlYy5nZXRNZW1iZXJzKCk7DQogCQljaGFyIFtdIG5hbWUgPSBjb21wU3BlYy5nZXROYW1lKCku
dG9DaGFyQXJyYXkoKTsNCiAJCUlBU1REZWNsYXJhdG9yIGRjbHRvciA9IG51bGw7DQpAQCAtNDY2
LDEzICs0NjYsMTMgQEANCiAJCQlpZighbmFtZUVxdWFscykNCiAJCQkJY29udGludWU7DQogCQkJ
DQotCQkJcmVzdWx0LmFkZChkY2x0b3IpOw0KKwkJCXJlc3VsdC5hZGQoKElDUFBBU1RGdW5jdGlv
bkRlY2xhcmF0b3IpIGRjbHRvcik7DQogICAgICAgICB9DQotICAgICAgICByZXR1cm4gKElDUFBB
U1RGdW5jdGlvbkRlY2xhcmF0b3JbXSkgcmVzdWx0LnRvQXJyYXkobmV3IElDUFBBU1RGdW5jdGlv
bkRlY2xhcmF0b3JbcmVzdWx0LnNpemUoKV0pOw0KKyAgICAgICAgcmV0dXJuIHJlc3VsdC50b0Fy
cmF5KG5ldyBJQ1BQQVNURnVuY3Rpb25EZWNsYXJhdG9yW3Jlc3VsdC5zaXplKCldKTsNCiAJfQ0K
IAkNCiAJcHJpdmF0ZSBzdGF0aWMgSUNQUEFTVEZ1bmN0aW9uRGVjbGFyYXRvcltdIGdldFVzZXJE
ZWNsYXJlZENvcHlBc3NpZ25tZW50T3BlcmF0b3JzKCBJQ1BQQVNUQ29tcG9zaXRlVHlwZVNwZWNp
ZmllciBjb21wU3BlYyApIHsNCi0JCUxpc3QgcmVzdWx0PSBuZXcgQXJyYXlMaXN0KCk7DQorCQlM
aXN0PElDUFBBU1RGdW5jdGlvbkRlY2xhcmF0b3I+IHJlc3VsdD0gbmV3IEFycmF5TGlzdDxJQ1BQ
QVNURnVuY3Rpb25EZWNsYXJhdG9yPigpOw0KIAkJSUFTVERlY2xhcmF0aW9uIFtdIG1lbWJlcnMg
PSBjb21wU3BlYy5nZXRNZW1iZXJzKCk7DQogCQlJQVNURGVjbGFyYXRvciBkY2x0b3IgPSBudWxs
Ow0KICAgICAgICAgZm9yKCBpbnQgaSA9IDA7IGkgPCBtZW1iZXJzLmxlbmd0aDsgaSsrICl7DQpA
QCAtNDkxLDIwICs0OTEsMjkgQEANCiAJCQl9DQogCQkJDQogCQkJSUFTVFBhcmFtZXRlckRlY2xh
cmF0aW9uIFtdIHBzID0gKChJQ1BQQVNURnVuY3Rpb25EZWNsYXJhdG9yKWRjbHRvcikuZ2V0UGFy
YW1ldGVycygpOw0KLSAgICAgICAgCWlmKCBwcy5sZW5ndGggIT0gMSB8fCAhcGFyYW1IYXNUeXBl
UmVmZXJlbmNlVG9UaGVBc3NvY2lhdGVkQ2xhc3NUeXBlKHBzWzBdKSApDQorICAgICAgICAJaWYo
cHMubGVuZ3RoICE9IDEgfHwgIXBhcmFtSGFzVHlwZVJlZmVyZW5jZVRvVGhlQXNzb2NpYXRlZENs
YXNzVHlwZShwc1swXSwgbnVsbCkpDQogICAgICAgICAJCWNvbnRpbnVlOw0KICAgICAgICAgCQ0K
LQkJCXJlc3VsdC5hZGQoZGNsdG9yKTsNCisJCQlyZXN1bHQuYWRkKChJQ1BQQVNURnVuY3Rpb25E
ZWNsYXJhdG9yKWRjbHRvcik7DQogICAgICAgICB9DQotICAgICAgICByZXR1cm4gKElDUFBBU1RG
dW5jdGlvbkRlY2xhcmF0b3JbXSkgcmVzdWx0LnRvQXJyYXkobmV3IElDUFBBU1RGdW5jdGlvbkRl
Y2xhcmF0b3JbcmVzdWx0LnNpemUoKV0pOw0KKyAgICAgICAgcmV0dXJuIHJlc3VsdC50b0FycmF5
KG5ldyBJQ1BQQVNURnVuY3Rpb25EZWNsYXJhdG9yW3Jlc3VsdC5zaXplKCldKTsNCiAJfQ0KIAkN
Ci0JcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBwYXJhbUhhc1R5cGVSZWZlcmVuY2VUb1RoZUFzc29j
aWF0ZWRDbGFzc1R5cGUoSUFTVFBhcmFtZXRlckRlY2xhcmF0aW9uIGRlYykgew0KKwkvKioNCisJ
ICogQHBhcmFtIGNvbXBTcGVjIHRoZSBuYW1lIHRoZSBwYXJhbWV0ZXIgbXVzdCBoYXZlIGluIG9y
ZGVyIHRvIG1hdGNoLCBvciBudWxsIGZvciBhbnkgbmFtZQ0KKwkgKiBAcGFyYW0gZGVjDQorCSAq
IEByZXR1cm4gd2hldGhlciB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlciBpcyBhIHJlZmVyZW5jZSB0
byB0aGUgYXNzb2NpYXRlZCBjbGFzcyB0eXBlLCBhbmQNCisgICAgICogKG9wdGlvbmFsbHkpIGlm
IGl0IGhhcyB0aGUgc3BlY2lmaWVkIG5hbWUNCisJICovDQorCXByaXZhdGUgc3RhdGljIGJvb2xl
YW4gcGFyYW1IYXNUeXBlUmVmZXJlbmNlVG9UaGVBc3NvY2lhdGVkQ2xhc3NUeXBlKElBU1RQYXJh
bWV0ZXJEZWNsYXJhdGlvbiBkZWMsIFN0cmluZyBuYW1lKSB7DQogCQlib29sZWFuIHJlc3VsdD0g
ZmFsc2U7DQogCQlJQVNURGVjbGFyYXRvciBwZHRvcj0gZGVjLmdldERlY2xhcmF0b3IoKTsNCiAJ
CWlmKHBkdG9yLmdldFBvaW50ZXJPcGVyYXRvcnMoKS5sZW5ndGg9PTEgJiYgcGR0b3IuZ2V0UG9p
bnRlck9wZXJhdG9ycygpWzBdIGluc3RhbmNlb2YgSUNQUEFTVFJlZmVyZW5jZU9wZXJhdG9yKSB7
DQogCQkJaWYoZGVjLmdldERlY2xTcGVjaWZpZXIoKSBpbnN0YW5jZW9mIElDUFBBU1ROYW1lZFR5
cGVTcGVjaWZpZXIpIHsNCi0JCQkJcmVzdWx0PSB0cnVlOw0KKwkJCQlJQ1BQQVNUTmFtZWRUeXBl
U3BlY2lmaWVyIG50cz0gKElDUFBBU1ROYW1lZFR5cGVTcGVjaWZpZXIpIGRlYy5nZXREZWNsU3Bl
Y2lmaWVyKCk7DQorCQkJCWlmKG5hbWU9PW51bGwgfHwgbmFtZS5lcXVhbHMobnRzLmdldE5hbWUo
KS5nZXRSYXdTaWduYXR1cmUoKSkpIHsNCisJCQkJCXJlc3VsdD0gdHJ1ZTsNCisJCQkJfQ0KIAkJ
CX0NCiAJCX0NCiAJCXJldHVybiByZXN1bHQ7DQpJbmRleDogcGFyc2VyL29yZy9lY2xpcHNlL2Nk
dC9pbnRlcm5hbC9jb3JlL2RvbS9wYXJzZXIvY3BwL0NQUENsYXNzVHlwZS5qYXZhDQo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvdG9vbHMvb3JnLmVjbGlwc2UuY2R0L2FsbC9vcmcuZWNs
aXBzZS5jZHQuY29yZS9wYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3Bh
cnNlci9jcHAvQ1BQQ2xhc3NUeXBlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjQ4DQpk
aWZmIC11IC1yMS40OCBDUFBDbGFzc1R5cGUuamF2YQ0KLS0tIHBhcnNlci9vcmcvZWNsaXBzZS9j
ZHQvaW50ZXJuYWwvY29yZS9kb20vcGFyc2VyL2NwcC9DUFBDbGFzc1R5cGUuamF2YQk2IE5vdiAy
MDA3IDExOjEzOjQ4IC0wMDAwCTEuNDgNCisrKyBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVy
bmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ1BQQ2xhc3NUeXBlLmphdmEJOSBKYW4gMjAwOCAxNTo0
MjoxMyAtMDAwMA0KQEAgLTExLDkgKzExLDYgQEANCiAgKiAgICAgQnJ5YW4gV2lsa2luc29uIChR
TlgpDQogICogICAgIFNlcmdleSBQcmlnb2dpbiAoR29vZ2xlKQ0KICAqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqLw0KLS8qDQotICogQ3JlYXRlZCBvbiBOb3YgMjksIDIwMDQNCi0gKi8NCiBwYWNrYWdl
IG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwOw0KIA0KIGltcG9y
dCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uSUxpbmthZ2U7DQpAQCAtMjksMTkgKzI2LDE1IEBA
DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSUFTVFNpbXBsZURlY2xhcmF0
aW9uOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklCaW5kaW5nOw0KIGlt
cG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklGaWVsZDsNCi1pbXBvcnQgb3JnLmVj
bGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JUHJvYmxlbUJpbmRpbmc7DQogaW1wb3J0IG9yZy5lY2xp
cHNlLmNkdC5jb3JlLmRvbS5hc3QuSVNjb3BlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29y
ZS5kb20uYXN0LklUeXBlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklU
eXBlZGVmOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5DUFBBU1RW
aXNpdG9yOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQVNU
Q29tcG9zaXRlVHlwZVNwZWNpZmllcjsNCi1pbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9t
LmFzdC5jcHAuSUNQUEFTVENvbnZlcnNpb25OYW1lOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5jZHQu
Y29yZS5kb20uYXN0LmNwcC5JQ1BQQVNURGVjbFNwZWNpZmllcjsNCiBpbXBvcnQgb3JnLmVjbGlw
c2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lmaWVyOw0K
IGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQVNUUXVhbGlmaWVk
TmFtZTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVFRl
bXBsYXRlRGVjbGFyYXRpb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3Qu
Y3BwLklDUFBBU1RUZW1wbGF0ZUlkOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20u
YXN0LmNwcC5JQ1BQQVNUVXNpbmdEZWNsYXJhdGlvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY2R0
LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEJhc2U7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3Jl
LmRvbS5hc3QuY3BwLklDUFBCbG9ja1Njb3BlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29y
ZS5kb20uYXN0LmNwcC5JQ1BQQ2xhc3NTY29wZTsNCkBAIC01MSw4NSArNDQsODIgQEANCiBpbXBv
cnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEZpZWxkOw0KIGltcG9ydCBv
cmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQRnVuY3Rpb25TY29wZTsNCiBpbXBv
cnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUE1ldGhvZDsNCi1pbXBvcnQg
b3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUFVzaW5nRGVjbGFyYXRpb247DQot
aW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBBU1RDb21wb3NpdGVU
eXBlU3BlY2lmaWVyLklDUFBBU1RCYXNlU3BlY2lmaWVyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5j
ZHQuY29yZS5pbmRleC5JSW5kZXhCaW5kaW5nOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29y
ZS5wYXJzZXIudXRpbC5BcnJheVV0aWw7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLnBh
cnNlci51dGlsLkNoYXJBcnJheVV0aWxzOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5w
YXJzZXIudXRpbC5PYmplY3RTZXQ7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5j
b3JlLmRvbS5MaW5rYWdlOw0KLWltcG9ydCBvcmcuZWNsaXBzZS5jZHQuaW50ZXJuYWwuY29yZS5k
b20ucGFyc2VyLkFTVEludGVybmFsOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuaW50ZXJuYWwu
Y29yZS5kb20ucGFyc2VyLkFTVE5vZGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5h
bC5jb3JlLmRvbS5wYXJzZXIuUHJvYmxlbUJpbmRpbmc7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNk
dC5pbnRlcm5hbC5jb3JlLmluZGV4LklJbmRleFR5cGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNv
cmUucnVudGltZS5QbGF0Zm9ybU9iamVjdDsNCiANCiAvKioNCisgKiANCiAgKiBAYXV0aG9yIGFu
aWVmZXINCiAgKi8NCi1wdWJsaWMgY2xhc3MgQ1BQQ2xhc3NUeXBlIGV4dGVuZHMgUGxhdGZvcm1P
YmplY3QgaW1wbGVtZW50cyBJQ1BQQ2xhc3NUeXBlLCBJQ1BQSW50ZXJuYWxDbGFzc1R5cGUgew0K
LSAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENQUENsYXNzVHlwZURlbGVnYXRlIGV4dGVuZHMgQ1BQ
RGVsZWdhdGUgaW1wbGVtZW50cyBJQ1BQQ2xhc3NUeXBlLCBJQ1BQSW50ZXJuYWxDbGFzc1R5cGUg
ew0KLSAgICAgICAgcHVibGljIENQUENsYXNzVHlwZURlbGVnYXRlKCBJQVNUTmFtZSBuYW1lLCBJ
Q1BQQ2xhc3NUeXBlIGNscyApew0KLSAgICAgICAgICAgIHN1cGVyKCBuYW1lLCBjbHMgKTsNCi0g
ICAgICAgIH0NCi0gICAgICAgIHB1YmxpYyBJQ1BQQmFzZVtdIGdldEJhc2VzKCkgdGhyb3dzIERP
TUV4Y2VwdGlvbiB7DQotICAgICAgICAgICAgcmV0dXJuICgoSUNQUENsYXNzVHlwZSlnZXRCaW5k
aW5nKCkpLmdldEJhc2VzKCk7DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMgSUZpZWxkW10g
Z2V0RmllbGRzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQotICAgICAgICAgICAgcmV0dXJuICgo
SUNQUENsYXNzVHlwZSlnZXRCaW5kaW5nKCkpLmdldEZpZWxkcygpOw0KLSAgICAgICAgfQ0KLSAg
ICAgICAgcHVibGljIElGaWVsZCBmaW5kRmllbGQoIFN0cmluZyBuYW1lICkgdGhyb3dzIERPTUV4
Y2VwdGlvbiB7DQotICAgICAgICAgICAgcmV0dXJuICgoSUNQUENsYXNzVHlwZSlnZXRCaW5kaW5n
KCkpLmZpbmRGaWVsZCggbmFtZSApOw0KLSAgICAgICAgfQ0KLSAgICAgICAgcHVibGljIElDUFBG
aWVsZFtdIGdldERlY2xhcmVkRmllbGRzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQotICAgICAg
ICAgICAgcmV0dXJuICgoSUNQUENsYXNzVHlwZSlnZXRCaW5kaW5nKCkpLmdldERlY2xhcmVkRmll
bGRzKCk7DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMgSUNQUE1ldGhvZFtdIGdldE1ldGhv
ZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0gICAgICAgICAgICByZXR1cm4gKChJQ1BQQ2xh
c3NUeXBlKWdldEJpbmRpbmcoKSkuZ2V0TWV0aG9kcygpOw0KLSAgICAgICAgfQ0KLSAgICAgICAg
cHVibGljIElDUFBNZXRob2RbXSBnZXRBbGxEZWNsYXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhj
ZXB0aW9uIHsNCi0gICAgICAgICAgICByZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmco
KSkuZ2V0QWxsRGVjbGFyZWRNZXRob2RzKCk7DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMg
SUNQUE1ldGhvZFtdIGdldERlY2xhcmVkTWV0aG9kcygpIHRocm93cyBET01FeGNlcHRpb24gew0K
LSAgICAgICAgICAgIHJldHVybiAoKElDUFBDbGFzc1R5cGUpZ2V0QmluZGluZygpKS5nZXREZWNs
YXJlZE1ldGhvZHMoKTsNCi0gICAgICAgIH0NCi0gICAgICAgIHB1YmxpYyBJQ1BQQ29uc3RydWN0
b3JbXSBnZXRDb25zdHJ1Y3RvcnMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0gICAgICAgICAg
ICByZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuZ2V0Q29uc3RydWN0b3JzKCk7
DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMgSUJpbmRpbmdbXSBnZXRGcmllbmRzKCkgdGhy
b3dzIERPTUV4Y2VwdGlvbiB7DQotICAgICAgICAgICAgcmV0dXJuICgoSUNQUENsYXNzVHlwZSln
ZXRCaW5kaW5nKCkpLmdldEZyaWVuZHMoKTsNCi0gICAgICAgIH0NCi0gICAgICAgIHB1YmxpYyBp
bnQgZ2V0S2V5KCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQotICAgICAgICAgICAgcmV0dXJuICgo
SUNQUENsYXNzVHlwZSlnZXRCaW5kaW5nKCkpLmdldEtleSgpOw0KLSAgICAgICAgfQ0KLSAgICAg
ICAgcHVibGljIElTY29wZSBnZXRDb21wb3NpdGVTY29wZSgpIHRocm93cyBET01FeGNlcHRpb24g
ew0KLSAgICAgICAgICAgIHJldHVybiAoKElDUFBDbGFzc1R5cGUpZ2V0QmluZGluZygpKS5nZXRD
b21wb3NpdGVTY29wZSgpOw0KLSAgICAgICAgfQ0KLSAgICAgICAgcHVibGljIE9iamVjdCBjbG9u
ZSgpIHsNCi0gICAgICAgICAgICBDUFBDbGFzc1R5cGVEZWxlZ2F0ZSBkID0gbnVsbDsNCi0gICAg
ICAgICAgICB0cnkgew0KLSAgICAgICAgICAgICAgICBkID0gKENQUENsYXNzVHlwZURlbGVnYXRl
KSBzdXBlci5jbG9uZSgpOw0KLSAgICAgICAgICAgIH0gY2F0Y2ggKCBDbG9uZU5vdFN1cHBvcnRl
ZEV4Y2VwdGlvbiBlICkgew0KLSAgICAgICAgICAgIH0NCi0gICAgICAgICAgICByZXR1cm4gZDsN
Ci0gICAgICAgIH0NCi0JCXB1YmxpYyBJQ1BQTWV0aG9kW10gZ2V0Q29udmVyc2lvbk9wZXJhdG9y
cygpIHsNCitwdWJsaWMgY2xhc3MgQ1BQQ2xhc3NUeXBlIGV4dGVuZHMgUGxhdGZvcm1PYmplY3Qg
aW1wbGVtZW50cyBJQ1BQSW50ZXJuYWxDbGFzc1R5cGVNaXhpbkhvc3QsIElDUFBDbGFzc1R5cGUs
IElDUFBJbnRlcm5hbENsYXNzVHlwZSB7DQorCXB1YmxpYyBzdGF0aWMgY2xhc3MgQ1BQQ2xhc3NU
eXBlRGVsZWdhdGUgZXh0ZW5kcyBDUFBEZWxlZ2F0ZSBpbXBsZW1lbnRzIElDUFBDbGFzc1R5cGUs
IElDUFBJbnRlcm5hbENsYXNzVHlwZSB7DQorCQlwdWJsaWMgQ1BQQ2xhc3NUeXBlRGVsZWdhdGUo
IElBU1ROYW1lIG5hbWUsIElDUFBDbGFzc1R5cGUgY2xzICl7DQorCQkJc3VwZXIoIG5hbWUsIGNs
cyApOw0KKwkJfQ0KKwkJcHVibGljIElDUFBCYXNlW10gZ2V0QmFzZXMoKSB0aHJvd3MgRE9NRXhj
ZXB0aW9uIHsNCisJCQlyZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuZ2V0QmFz
ZXMoKTsNCisJCX0NCisJCXB1YmxpYyBJRmllbGRbXSBnZXRGaWVsZHMoKSB0aHJvd3MgRE9NRXhj
ZXB0aW9uIHsNCisJCQlyZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuZ2V0Rmll
bGRzKCk7DQorCQl9DQorCQlwdWJsaWMgSUZpZWxkIGZpbmRGaWVsZCggU3RyaW5nIG5hbWUgKSB0
aHJvd3MgRE9NRXhjZXB0aW9uIHsNCisJCQlyZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRp
bmcoKSkuZmluZEZpZWxkKCBuYW1lICk7DQorCQl9DQorCQlwdWJsaWMgSUNQUEZpZWxkW10gZ2V0
RGVjbGFyZWRGaWVsZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCisJCQlyZXR1cm4gKChJQ1BQ
Q2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuZ2V0RGVjbGFyZWRGaWVsZHMoKTsNCisJCX0NCisJCXB1
YmxpYyBJQ1BQTWV0aG9kW10gZ2V0TWV0aG9kcygpIHRocm93cyBET01FeGNlcHRpb24gew0KKwkJ
CXJldHVybiAoKElDUFBDbGFzc1R5cGUpZ2V0QmluZGluZygpKS5nZXRNZXRob2RzKCk7DQorCQl9
DQorCQlwdWJsaWMgSUNQUE1ldGhvZFtdIGdldEFsbERlY2xhcmVkTWV0aG9kcygpIHRocm93cyBE
T01FeGNlcHRpb24gew0KKwkJCXJldHVybiAoKElDUFBDbGFzc1R5cGUpZ2V0QmluZGluZygpKS5n
ZXRBbGxEZWNsYXJlZE1ldGhvZHMoKTsNCisJCX0NCisJCXB1YmxpYyBJQ1BQTWV0aG9kW10gZ2V0
RGVjbGFyZWRNZXRob2RzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQkJcmV0dXJuICgoSUNQ
UENsYXNzVHlwZSlnZXRCaW5kaW5nKCkpLmdldERlY2xhcmVkTWV0aG9kcygpOw0KKwkJfQ0KKwkJ
cHVibGljIElDUFBDb25zdHJ1Y3RvcltdIGdldENvbnN0cnVjdG9ycygpIHRocm93cyBET01FeGNl
cHRpb24gew0KKwkJCXJldHVybiAoKElDUFBDbGFzc1R5cGUpZ2V0QmluZGluZygpKS5nZXRDb25z
dHJ1Y3RvcnMoKTsNCisJCX0NCisJCXB1YmxpYyBJQmluZGluZ1tdIGdldEZyaWVuZHMoKSB0aHJv
d3MgRE9NRXhjZXB0aW9uIHsNCisJCQlyZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmco
KSkuZ2V0RnJpZW5kcygpOw0KKwkJfQ0KKwkJcHVibGljIGludCBnZXRLZXkoKSB0aHJvd3MgRE9N
RXhjZXB0aW9uIHsNCisJCQlyZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuZ2V0
S2V5KCk7DQorCQl9DQorCQlwdWJsaWMgSVNjb3BlIGdldENvbXBvc2l0ZVNjb3BlKCkgdGhyb3dz
IERPTUV4Y2VwdGlvbiB7DQorCQkJcmV0dXJuICgoSUNQUENsYXNzVHlwZSlnZXRCaW5kaW5nKCkp
LmdldENvbXBvc2l0ZVNjb3BlKCk7DQorCQl9DQorCQlwdWJsaWMgT2JqZWN0IGNsb25lKCkgew0K
KwkJCUNQUENsYXNzVHlwZURlbGVnYXRlIGQgPSBudWxsOw0KKwkJCXRyeSB7DQorCQkJCWQgPSAo
Q1BQQ2xhc3NUeXBlRGVsZWdhdGUpIHN1cGVyLmNsb25lKCk7DQorCQkJfSBjYXRjaCAoIENsb25l
Tm90U3VwcG9ydGVkRXhjZXB0aW9uIGUgKSB7DQorCQkJfQ0KKwkJCXJldHVybiBkOw0KKwkJfQ0K
KwkJcHVibGljIElDUFBNZXRob2RbXSBnZXRDb252ZXJzaW9uT3BlcmF0b3JzKCkgdGhyb3dzIERP
TUV4Y2VwdGlvbiB7DQogCQkJSUJpbmRpbmcgYmluZGluZyA9IGdldEJpbmRpbmcoKTsNCiAJCQlp
ZiggYmluZGluZyBpbnN0YW5jZW9mIElDUFBJbnRlcm5hbENsYXNzVHlwZSApDQogCQkJCXJldHVy
biAoKElDUFBJbnRlcm5hbENsYXNzVHlwZSliaW5kaW5nKS5nZXRDb252ZXJzaW9uT3BlcmF0b3Jz
KCk7DQogCQkJcmV0dXJuIElDUFBNZXRob2QuRU1QVFlfQ1BQTUVUSE9EX0FSUkFZOw0KIAkJfQ0K
LSAgICAgICAgcHVibGljIGJvb2xlYW4gaXNTYW1lVHlwZSggSVR5cGUgdHlwZSApIHsNCi0gICAg
ICAgICAgICByZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuaXNTYW1lVHlwZSgg
dHlwZSApOw0KLSAgICAgICAgfQ0KKwkJcHVibGljIGJvb2xlYW4gaXNTYW1lVHlwZSggSVR5cGUg
dHlwZSApIHsNCisJCQlyZXR1cm4gKChJQ1BQQ2xhc3NUeXBlKWdldEJpbmRpbmcoKSkuaXNTYW1l
VHlwZSggdHlwZSApOw0KKwkJfQ0KIAkJcHVibGljIElDUFBDbGFzc1R5cGVbXSBnZXROZXN0ZWRD
bGFzc2VzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQogCQkJcmV0dXJuICgoSUNQUENsYXNzVHlw
ZSlnZXRCaW5kaW5nKCkpLmdldE5lc3RlZENsYXNzZXMoKTsNCiAJCX0NCi0gICAgfQ0KKwl9DQog
CXB1YmxpYyBzdGF0aWMgY2xhc3MgQ1BQQ2xhc3NUeXBlUHJvYmxlbSBleHRlbmRzIFByb2JsZW1C
aW5kaW5nIGltcGxlbWVudHMgSUNQUENsYXNzVHlwZXsNCi0gICAgICAgIHB1YmxpYyBDUFBDbGFz
c1R5cGVQcm9ibGVtKCBJQVNUTm9kZSBub2RlLCBpbnQgaWQsIGNoYXJbXSBhcmcgKSB7DQotICAg
ICAgICAgICAgc3VwZXIoIG5vZGUsIGlkLCBhcmcgKTsNCi0gICAgICAgIH0NCisJCXB1YmxpYyBD
UFBDbGFzc1R5cGVQcm9ibGVtKCBJQVNUTm9kZSBub2RlLCBpbnQgaWQsIGNoYXJbXSBhcmcgKSB7
DQorCQkJc3VwZXIoIG5vZGUsIGlkLCBhcmcgKTsNCisJCX0NCiANCiAJCXB1YmxpYyBJQ1BQQmFz
ZVtdIGdldEJhc2VzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQogCQkJdGhyb3cgbmV3IERPTUV4
Y2VwdGlvbiggdGhpcyApOw0KQEAgLTE2Nyw3MiArMTU3LDM1IEBADQogCQlwdWJsaWMgSUJpbmRp
bmdbXSBmaW5kKFN0cmluZyBuYW1lKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCiAJCQl0aHJvdyBu
ZXcgRE9NRXhjZXB0aW9uKCB0aGlzICk7DQogCQl9DQotICAgICAgICBwdWJsaWMgSUJpbmRpbmdb
XSBnZXRGcmllbmRzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQlwdWJsaWMgSUJpbmRpbmdb
XSBnZXRGcmllbmRzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQogCQkJdGhyb3cgbmV3IERPTUV4
Y2VwdGlvbiggdGhpcyApOw0KLSAgICAgICAgfQ0KLSAgICAgICAgcHVibGljIFN0cmluZ1tdIGdl
dFF1YWxpZmllZE5hbWUoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0gICAgICAgICAgICB0aHJv
dyBuZXcgRE9NRXhjZXB0aW9uKCB0aGlzICk7DQotICAgICAgICB9DQotICAgICAgICBwdWJsaWMg
Y2hhcltdW10gZ2V0UXVhbGlmaWVkTmFtZUNoYXJBcnJheSgpIHRocm93cyBET01FeGNlcHRpb24g
ew0KLSAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oIHRoaXMgKTsNCi0gICAgICAg
IH0NCi0gICAgICAgIHB1YmxpYyBib29sZWFuIGlzR2xvYmFsbHlRdWFsaWZpZWQoKSB0aHJvd3Mg
RE9NRXhjZXB0aW9uIHsNCi0gICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCB0aGlz
ICk7DQotICAgICAgICB9DQotCQlwdWJsaWMgSUNQUENsYXNzVHlwZVtdIGdldE5lc3RlZENsYXNz
ZXMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCisJCX0NCisJCXB1YmxpYyBTdHJpbmdbXSBnZXRR
dWFsaWZpZWROYW1lKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQogCQkJdGhyb3cgbmV3IERPTUV4
Y2VwdGlvbiggdGhpcyApOw0KIAkJfQ0KLSAgICB9DQotCQ0KLQlwcml2YXRlIElBU1ROYW1lIGRl
ZmluaXRpb247DQotCXByaXZhdGUgSUFTVE5hbWUgW10gZGVjbGFyYXRpb25zOw0KLQlwcml2YXRl
IGJvb2xlYW4gY2hlY2tlZCA9IGZhbHNlOw0KLQlwcml2YXRlIElDUFBDbGFzc1R5cGUgdHlwZUlu
SW5kZXg7DQotCXB1YmxpYyBDUFBDbGFzc1R5cGUoIElBU1ROYW1lIG5hbWUsIElCaW5kaW5nIGlu
ZGV4QmluZGluZyApew0KLQkgICAgaWYoIG5hbWUgaW5zdGFuY2VvZiBJQ1BQQVNUUXVhbGlmaWVk
TmFtZSApew0KLQkgICAgICAgIElBU1ROYW1lIFtdIG5zID0gKChJQ1BQQVNUUXVhbGlmaWVkTmFt
ZSluYW1lKS5nZXROYW1lcygpOw0KLQkgICAgICAgIG5hbWUgPSBuc1sgbnMubGVuZ3RoIC0gMSBd
Ow0KLQkgICAgfQ0KLQkgICAgSUFTVE5vZGUgcGFyZW50ID0gbmFtZS5nZXRQYXJlbnQoKTsNCi0J
ICAgIHdoaWxlKCBwYXJlbnQgaW5zdGFuY2VvZiBJQVNUTmFtZSApDQotCSAgICAgICAgcGFyZW50
ID0gcGFyZW50LmdldFBhcmVudCgpOw0KLQkgICAgDQotCSAgICBpZiggcGFyZW50IGluc3RhbmNl
b2YgSUFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgKQ0KLQkJCWRlZmluaXRpb24gPSBuYW1lOw0K
LQkJZWxzZSANCi0JCQlkZWNsYXJhdGlvbnMgPSBuZXcgSUFTVE5hbWVbXSB7IG5hbWUgfTsNCi0J
CW5hbWUuc2V0QmluZGluZyggdGhpcyApOw0KLQkJaWYgKGluZGV4QmluZGluZyBpbnN0YW5jZW9m
IElDUFBDbGFzc1R5cGUgJiYgaW5kZXhCaW5kaW5nIGluc3RhbmNlb2YgSUluZGV4QmluZGluZykg
ew0KLQkJCXR5cGVJbkluZGV4PSAoSUNQUENsYXNzVHlwZSkgaW5kZXhCaW5kaW5nOw0KKwkJcHVi
bGljIGNoYXJbXVtdIGdldFF1YWxpZmllZE5hbWVDaGFyQXJyYXkoKSB0aHJvd3MgRE9NRXhjZXB0
aW9uIHsNCisJCQl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCB0aGlzICk7DQorCQl9DQorCQlwdWJs
aWMgYm9vbGVhbiBpc0dsb2JhbGx5UXVhbGlmaWVkKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQor
CQkJdGhyb3cgbmV3IERPTUV4Y2VwdGlvbiggdGhpcyApOw0KKwkJfQ0KKwkJcHVibGljIElDUFBD
bGFzc1R5cGVbXSBnZXROZXN0ZWRDbGFzc2VzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQkJ
dGhyb3cgbmV3IERPTUV4Y2VwdGlvbiggdGhpcyApOw0KIAkJfQ0KIAl9DQotCQ0KLSAgICAvKiAo
bm9uLUphdmFkb2MpDQotICAgICAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmludGVybmFsLmNvcmUu
ZG9tLnBhcnNlci5jcHAuSUNQUEJpbmRpbmcjZ2V0RGVjbGFyYXRpb25zKCkNCi0gICAgICovDQot
ICAgIHB1YmxpYyBJQVNUTm9kZVtdIGdldERlY2xhcmF0aW9ucygpIHsNCi0gICAgICAgIHJldHVy
biBkZWNsYXJhdGlvbnM7DQotICAgIH0NCi0NCi0gICAgLyogKG5vbi1KYXZhZG9jKQ0KLSAgICAg
KiBAc2VlIG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwLklDUFBC
aW5kaW5nI2dldERlZmluaXRpb24oKQ0KLSAgICAgKi8NCi0gICAgcHVibGljIElBU1ROb2RlIGdl
dERlZmluaXRpb24oKSB7DQotICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjsNCi0gICAgfQ0KLSAg
ICANCisNCiAJcHJpdmF0ZSBjbGFzcyBGaW5kRGVmaW5pdGlvbkFjdGlvbiBleHRlbmRzIENQUEFT
VFZpc2l0b3Igew0KLQkgICAgcHJpdmF0ZSBjaGFyIFtdIG5hbWVBcnJheSA9IENQUENsYXNzVHlw
ZS50aGlzLmdldE5hbWVDaGFyQXJyYXkoKTsNCi0JICAgIHB1YmxpYyBJQVNUTmFtZSByZXN1bHQg
PSBudWxsOw0KLQkgICAgDQotCSAgICB7DQotCSAgICAgICAgc2hvdWxkVmlzaXROYW1lcyAgICAg
ICAgICA9IHRydWU7DQorCQlwcml2YXRlIGNoYXIgW10gbmFtZUFycmF5ID0gQ1BQQ2xhc3NUeXBl
LnRoaXMuZ2V0TmFtZUNoYXJBcnJheSgpOw0KKwkJcHVibGljIElBU1ROYW1lIHJlc3VsdCA9IG51
bGw7DQorDQorCQl7DQorCQkJc2hvdWxkVmlzaXROYW1lcyAgICAgICAgICA9IHRydWU7DQogCQkJ
c2hvdWxkVmlzaXREZWNsYXJhdGlvbnMgICA9IHRydWU7DQogCQkJc2hvdWxkVmlzaXREZWNsU3Bl
Y2lmaWVycyA9IHRydWU7DQogCQkJc2hvdWxkVmlzaXREZWNsYXJhdG9ycyAgICA9IHRydWU7DQot
CSAgICB9DQotCSAgICANCi0JICAgIHB1YmxpYyBpbnQgdmlzaXQoIElBU1ROYW1lIG5hbWUgKXsN
CisJCX0NCisNCisJCXB1YmxpYyBpbnQgdmlzaXQoIElBU1ROYW1lIG5hbWUgKXsNCiAJCQlpZigg
bmFtZSBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZUlkICkNCiAJCQkJcmV0dXJuIFBST0NFU1Nf
U0tJUDsNCiAJCQlpZiggbmFtZSBpbnN0YW5jZW9mIElDUFBBU1RRdWFsaWZpZWROYW1lICkNCkBA
IC0yNDUsMTU3ICsxOTgsMTQwIEBADQogCQkJCQlyZXR1cm4gUFJPQ0VTU19DT05USU5VRTsNCiAJ
CQkJbmFtZSA9IChJQVNUTmFtZSkgbmFtZS5nZXRQYXJlbnQoKTsNCiAJCQl9DQotCQkJDQotCSAg
ICAgICAgaWYoIG5hbWUuZ2V0UGFyZW50KCkgaW5zdGFuY2VvZiBJQ1BQQVNUQ29tcG9zaXRlVHlw
ZVNwZWNpZmllciAmJg0KLQkgICAgICAgICAgICBDaGFyQXJyYXlVdGlscy5lcXVhbHMoIGMsIG5h
bWVBcnJheSApICkgDQotCSAgICAgICAgew0KLQkgICAgICAgICAgICBJQmluZGluZyBiaW5kaW5n
ID0gbmFtZS5yZXNvbHZlQmluZGluZygpOw0KLQkgICAgICAgICAgICBpZiggYmluZGluZyA9PSBD
UFBDbGFzc1R5cGUudGhpcyApew0KLQkgICAgICAgICAgICAJaWYoIG5hbWUgaW5zdGFuY2VvZiBJ
Q1BQQVNUUXVhbGlmaWVkTmFtZSApew0KLQkgICAgICAgICAgICAJCUlBU1ROYW1lIFtdIG5zID0g
KChJQ1BQQVNUUXVhbGlmaWVkTmFtZSluYW1lKS5nZXROYW1lcygpOw0KLQkgICAgICAgICAgICAJ
CW5hbWUgPSBuc1sgbnMubGVuZ3RoIC0gMSBdOw0KLQkgICAgICAgICAgICAJfQ0KLQkgICAgICAg
ICAgICAgICAgcmVzdWx0ID0gbmFtZTsNCi0JICAgICAgICAgICAgICAgIHJldHVybiBQUk9DRVNT
X0FCT1JUOw0KLQkgICAgICAgICAgICB9DQotCSAgICAgICAgfQ0KLQkgICAgICAgIHJldHVybiBQ
Uk9DRVNTX0NPTlRJTlVFOyANCi0JICAgIH0NCi0JICAgIA0KKw0KKwkJCWlmKCBuYW1lLmdldFBh
cmVudCgpIGluc3RhbmNlb2YgSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgJiYNCisJCQkJ
CUNoYXJBcnJheVV0aWxzLmVxdWFscyggYywgbmFtZUFycmF5ICkgKSANCisJCQl7DQorCQkJCUlC
aW5kaW5nIGJpbmRpbmcgPSBuYW1lLnJlc29sdmVCaW5kaW5nKCk7DQorCQkJCWlmKCBiaW5kaW5n
ID09IENQUENsYXNzVHlwZS50aGlzICl7DQorCQkJCQlpZiggbmFtZSBpbnN0YW5jZW9mIElDUFBB
U1RRdWFsaWZpZWROYW1lICl7DQorCQkJCQkJSUFTVE5hbWUgW10gbnMgPSAoKElDUFBBU1RRdWFs
aWZpZWROYW1lKW5hbWUpLmdldE5hbWVzKCk7DQorCQkJCQkJbmFtZSA9IG5zWyBucy5sZW5ndGgg
LSAxIF07DQorCQkJCQl9DQorCQkJCQlyZXN1bHQgPSBuYW1lOw0KKwkJCQkJcmV0dXJuIFBST0NF
U1NfQUJPUlQ7DQorCQkJCX0NCisJCQl9DQorCQkJcmV0dXJuIFBST0NFU1NfQ09OVElOVUU7IA0K
KwkJfQ0KKw0KIAkJcHVibGljIGludCB2aXNpdCggSUFTVERlY2xhcmF0aW9uIGRlY2xhcmF0aW9u
ICl7IA0KLQkJCWlmKCBkZWNsYXJhdGlvbiBpbnN0YW5jZW9mIElBU1RTaW1wbGVEZWNsYXJhdGlv
biB8fCBkZWNsYXJhdGlvbiBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uICkN
CisJCQlpZihkZWNsYXJhdGlvbiBpbnN0YW5jZW9mIElBU1RTaW1wbGVEZWNsYXJhdGlvbiB8fCBk
ZWNsYXJhdGlvbiBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uKQ0KIAkJCQly
ZXR1cm4gUFJPQ0VTU19DT05USU5VRTsNCiAJCQlyZXR1cm4gUFJPQ0VTU19TS0lQOyANCiAJCX0N
CiAJCXB1YmxpYyBpbnQgdmlzaXQoIElBU1REZWNsU3BlY2lmaWVyIGRlY2xTcGVjICl7DQotCQkg
ICAgcmV0dXJuIChkZWNsU3BlYyBpbnN0YW5jZW9mIElDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lm
aWVyICkgPyBQUk9DRVNTX0NPTlRJTlVFIDogUFJPQ0VTU19TS0lQOyANCisJCQlyZXR1cm4gKGRl
Y2xTcGVjIGluc3RhbmNlb2YgSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgKSA/IFBST0NF
U1NfQ09OVElOVUUgOiBQUk9DRVNTX1NLSVA7IA0KIAkJfQ0KIAkJcHVibGljIGludCB2aXNpdCgg
SUFTVERlY2xhcmF0b3IgZGVjbGFyYXRvciApIAkJCXsgcmV0dXJuIFBST0NFU1NfU0tJUDsgfQ0K
IAl9DQotCQ0KLQlwcml2YXRlIHZvaWQgY2hlY2tGb3JEZWZpbml0aW9uKCl7DQorDQorCXByaXZh
dGUgSUFTVE5hbWUgZGVmaW5pdGlvbjsNCisJcHJpdmF0ZSBJQVNUTmFtZSBbXSBkZWNsYXJhdGlv
bnM7DQorCXByaXZhdGUgYm9vbGVhbiBjaGVja2VkID0gZmFsc2U7DQorCXByaXZhdGUgSUNQUENs
YXNzVHlwZSB0eXBlSW5JbmRleDsNCisJcHJpdmF0ZSBDbGFzc1R5cGVNaXhpbiBtaXhpbjsNCisN
CisJcHVibGljIENQUENsYXNzVHlwZSggSUFTVE5hbWUgbmFtZSwgSUJpbmRpbmcgaW5kZXhCaW5k
aW5nICl7DQorCQlpZiggbmFtZSBpbnN0YW5jZW9mIElDUFBBU1RRdWFsaWZpZWROYW1lICl7DQor
CQkJSUFTVE5hbWUgW10gbnMgPSAoKElDUFBBU1RRdWFsaWZpZWROYW1lKW5hbWUpLmdldE5hbWVz
KCk7DQorCQkJbmFtZSA9IG5zWyBucy5sZW5ndGggLSAxIF07DQorCQl9DQorCQlJQVNUTm9kZSBw
YXJlbnQgPSBuYW1lLmdldFBhcmVudCgpOw0KKwkJd2hpbGUoIHBhcmVudCBpbnN0YW5jZW9mIElB
U1ROYW1lICkNCisJCQlwYXJlbnQgPSBwYXJlbnQuZ2V0UGFyZW50KCk7DQorDQorCQlpZiggcGFy
ZW50IGluc3RhbmNlb2YgSUFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgKQ0KKwkJCWRlZmluaXRp
b24gPSBuYW1lOw0KKwkJZWxzZSANCisJCQlkZWNsYXJhdGlvbnMgPSBuZXcgSUFTVE5hbWVbXSB7
IG5hbWUgfTsNCisJCW5hbWUuc2V0QmluZGluZyggdGhpcyApOw0KKwkJaWYgKGluZGV4QmluZGlu
ZyBpbnN0YW5jZW9mIElDUFBDbGFzc1R5cGUgJiYgaW5kZXhCaW5kaW5nIGluc3RhbmNlb2YgSUlu
ZGV4QmluZGluZykgew0KKwkJCXR5cGVJbkluZGV4PSAoSUNQUENsYXNzVHlwZSkgaW5kZXhCaW5k
aW5nOw0KKwkJfQ0KKwkJbWl4aW49IG5ldyBDbGFzc1R5cGVNaXhpbih0aGlzKTsNCisJfQ0KKw0K
KwlwdWJsaWMgSUFTVE5vZGVbXSBnZXREZWNsYXJhdGlvbnMoKSB7DQorCQlyZXR1cm4gZGVjbGFy
YXRpb25zOw0KKwl9DQorDQorCXB1YmxpYyBJQVNUTm9kZSBnZXREZWZpbml0aW9uKCkgew0KKwkJ
cmV0dXJuIGRlZmluaXRpb247DQorCX0NCisNCisJcHVibGljIHZvaWQgY2hlY2tGb3JEZWZpbml0
aW9uKCl7DQogCQlpZiggIWNoZWNrZWQgKSB7DQogCQkJRmluZERlZmluaXRpb25BY3Rpb24gYWN0
aW9uID0gbmV3IEZpbmREZWZpbml0aW9uQWN0aW9uKCk7DQogCQkJSUFTVE5vZGUgbm9kZSA9IENQ
UFZpc2l0b3IuZ2V0Q29udGFpbmluZ0Jsb2NrSXRlbSggZ2V0UGh5c2ljYWxOb2RlKCkgKS5nZXRQ
YXJlbnQoKTsNCi0JDQorDQogCQkJaWYoIG5vZGUgaW5zdGFuY2VvZiBJQ1BQQVNUQ29tcG9zaXRl
VHlwZVNwZWNpZmllciApDQogCQkJCW5vZGUgPSBDUFBWaXNpdG9yLmdldENvbnRhaW5pbmdCbG9j
a0l0ZW0oIG5vZGUuZ2V0UGFyZW50KCkgKTsNCiAJCQl3aGlsZSggbm9kZSBpbnN0YW5jZW9mIElD
UFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uICkNCiAJCQkJbm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7
DQogCQkJbm9kZS5hY2NlcHQoIGFjdGlvbiApOw0KLQkJICAgIGRlZmluaXRpb24gPSBhY3Rpb24u
cmVzdWx0Ow0KLQkJCQ0KKwkJCWRlZmluaXRpb24gPSBhY3Rpb24ucmVzdWx0Ow0KKw0KIAkJCWlm
KCBkZWZpbml0aW9uID09IG51bGwgKXsNCiAJCQkJbm9kZS5nZXRUcmFuc2xhdGlvblVuaXQoKS5h
Y2NlcHQoIGFjdGlvbiApOw0KLQkJCSAgICBkZWZpbml0aW9uID0gYWN0aW9uLnJlc3VsdDsNCisJ
CQkJZGVmaW5pdGlvbiA9IGFjdGlvbi5yZXN1bHQ7DQogCQkJfQ0KIAkJCWNoZWNrZWQgPSB0cnVl
Ow0KIAkJfQ0KIAkJcmV0dXJuOw0KIAl9DQotCQ0KLQlwcml2YXRlIElDUFBBU1RDb21wb3NpdGVU
eXBlU3BlY2lmaWVyIGdldENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIoKXsNCi0JICAgIGlmKCBkZWZp
bml0aW9uICE9IG51bGwgKXsNCi0JICAgICAgICBJQVNUTm9kZSBub2RlID0gZGVmaW5pdGlvbjsN
Ci0JICAgICAgICB3aGlsZSggbm9kZSBpbnN0YW5jZW9mIElBU1ROYW1lICkNCi0JICAgICAgICAg
ICAgbm9kZSA9IG5vZGUuZ2V0UGFyZW50KCk7DQotCSAgICAgICAgaWYoIG5vZGUgaW5zdGFuY2Vv
ZiBJQ1BQQVNUQ29tcG9zaXRlVHlwZVNwZWNpZmllciApDQotCSAgICAgICAgICAgIHJldHVybiAo
SUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIpbm9kZTsNCi0JICAgIH0NCi0JICAgIHJldHVy
biBudWxsOw0KKw0KKwlwdWJsaWMgSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgZ2V0Q29t
cG9zaXRlVHlwZVNwZWNpZmllcigpew0KKwkJaWYoIGRlZmluaXRpb24gIT0gbnVsbCApew0KKwkJ
CUlBU1ROb2RlIG5vZGUgPSBkZWZpbml0aW9uOw0KKwkJCXdoaWxlKCBub2RlIGluc3RhbmNlb2Yg
SUFTVE5hbWUgKQ0KKwkJCQlub2RlID0gbm9kZS5nZXRQYXJlbnQoKTsNCisJCQlpZiggbm9kZSBp
bnN0YW5jZW9mIElDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyICkNCisJCQkJcmV0dXJuIChJ
Q1BQQVNUQ29tcG9zaXRlVHlwZVNwZWNpZmllcilub2RlOw0KKwkJfQ0KKwkJcmV0dXJuIG51bGw7
DQogCX0NCisJDQogCXByaXZhdGUgSUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lmaWVyIGdldEVs
YWJvcmF0ZWRUeXBlU3BlY2lmaWVyKCkgew0KLQkgICAgaWYoIGRlY2xhcmF0aW9ucyAhPSBudWxs
ICl7DQotCSAgICAgICAgSUFTVE5vZGUgbm9kZSA9IGRlY2xhcmF0aW9uc1swXTsNCi0JICAgICAg
ICB3aGlsZSggbm9kZSBpbnN0YW5jZW9mIElBU1ROYW1lICkNCi0JICAgICAgICAgICAgbm9kZSA9
IG5vZGUuZ2V0UGFyZW50KCk7DQotCSAgICAgICAgaWYoIG5vZGUgaW5zdGFuY2VvZiBJQ1BQQVNU
RWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIgKQ0KLQkgICAgICAgICAgICByZXR1cm4gKElDUFBBU1RF
bGFib3JhdGVkVHlwZVNwZWNpZmllcilub2RlOw0KLQkgICAgfQ0KLQkgICAgcmV0dXJuIG51bGw7
DQotCX0NCi0JLyogKG5vbi1KYXZhZG9jKQ0KLQkgKiBAc2VlIG9yZy5lY2xpcHNlLmNkdC5jb3Jl
LmRvbS5hc3QuSUNvbXBvc2l0ZVR5cGUjZ2V0RmllbGRzKCkNCi0JICovDQotCXB1YmxpYyBJRmll
bGRbXSBnZXRGaWVsZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0JICAgIGlmKCBkZWZpbml0
aW9uID09IG51bGwgKXsNCi0JICAgICAgICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0JICAgICAg
ICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotCSAgICAgICAgICAgIElBU1ROb2RlIG5vZGUg
PSAoZGVjbGFyYXRpb25zICE9IG51bGwgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVj
bGFyYXRpb25zWzBdIDogbnVsbDsNCi0JICAgICAgICAgICAgcmV0dXJuIG5ldyBJRmllbGQgW10g
eyBuZXcgQ1BQRmllbGQuQ1BQRmllbGRQcm9ibGVtKCBub2RlLCBJUHJvYmxlbUJpbmRpbmcuU0VN
QU5USUNfREVGSU5JVElPTl9OT1RfRk9VTkQsIGdldE5hbWVDaGFyQXJyYXkoKSApIH07DQotCSAg
ICAgICAgfQ0KLQkgICAgfQ0KLQ0KLQkJSUZpZWxkW10gZmllbGRzID0gZ2V0RGVjbGFyZWRGaWVs
ZHMoKTsNCi0JCUlDUFBCYXNlIFtdIGJhc2VzID0gZ2V0QmFzZXMoKTsNCi0JCWZvciAoIGludCBp
ID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICkgew0KLQkJCUlCaW5kaW5nIGIgPSBiYXNlc1tp
XS5nZXRCYXNlQ2xhc3MoKTsNCi0JCQlpZiggYiBpbnN0YW5jZW9mIElDUFBDbGFzc1R5cGUgKQ0K
LQkJCQlmaWVsZHMgPSAoSUZpZWxkW10pIEFycmF5VXRpbC5hZGRBbGwoIElGaWVsZC5jbGFzcywg
ZmllbGRzLCAoKElDUFBDbGFzc1R5cGUpYikuZ2V0RmllbGRzKCkgKTsNCi0gICAgICAgIH0NCi0J
CXJldHVybiAoSUZpZWxkW10pIEFycmF5VXRpbC50cmltKCBJRmllbGQuY2xhc3MsIGZpZWxkcyAp
Ow0KLQl9DQotDQotCS8qIChub24tSmF2YWRvYykNCi0JICogQHNlZSBvcmcuZWNsaXBzZS5jZHQu
Y29yZS5kb20uYXN0LklDb21wb3NpdGVUeXBlI2ZpbmRGaWVsZChqYXZhLmxhbmcuU3RyaW5nKQ0K
LQkgKi8NCi0JcHVibGljIElGaWVsZCBmaW5kRmllbGQoU3RyaW5nIG5hbWUpIHRocm93cyBET01F
eGNlcHRpb24gew0KLQkJSUJpbmRpbmcgW10gYmluZGluZ3MgPSBDUFBTZW1hbnRpY3MuZmluZEJp
bmRpbmdzKCBnZXRDb21wb3NpdGVTY29wZSgpLCBuYW1lLCB0cnVlICk7DQotCQlJRmllbGQgZmll
bGQgPSBudWxsOw0KLQkJZm9yICggaW50IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKysg
KSB7DQotICAgICAgICAgICAgaWYoIGJpbmRpbmdzW2ldIGluc3RhbmNlb2YgSUZpZWxkICl7DQot
ICAgICAgICAgICAgICAgIGlmKCBmaWVsZCA9PSBudWxsICkNCi0gICAgICAgICAgICAgICAgICAg
IGZpZWxkID0gKElGaWVsZCkgYmluZGluZ3NbaV07DQotICAgICAgICAgICAgICAgIGVsc2Ugew0K
LSAgICAgICAgICAgICAgICAgICAgSUFTVE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVs
bCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0K
LSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDUFBGaWVsZC5DUFBGaWVsZFByb2JsZW0o
IG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19BTUJJR1VPVVNfTE9PS1VQLCBuYW1lLnRv
Q2hhckFycmF5KCkgKTsNCi0gICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgIH0NCi0gICAg
ICAgIH0NCi0JCXJldHVybiBmaWVsZDsNCi0JfQ0KLQ0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAq
IEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JQmluZGluZyNnZXROYW1lKCkNCi0J
ICovDQorCQlpZiggZGVjbGFyYXRpb25zICE9IG51bGwgKXsNCisJCQlJQVNUTm9kZSBub2RlID0g
ZGVjbGFyYXRpb25zWzBdOw0KKwkJCXdoaWxlKCBub2RlIGluc3RhbmNlb2YgSUFTVE5hbWUgKQ0K
KwkJCQlub2RlID0gbm9kZS5nZXRQYXJlbnQoKTsNCisJCQlpZiggbm9kZSBpbnN0YW5jZW9mIElD
UFBBU1RFbGFib3JhdGVkVHlwZVNwZWNpZmllciApDQorCQkJCXJldHVybiAoSUNQUEFTVEVsYWJv
cmF0ZWRUeXBlU3BlY2lmaWVyKW5vZGU7DQorCQl9DQorCQlyZXR1cm4gbnVsbDsNCisJfQ0KKw0K
IAlwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7DQogCQlyZXR1cm4gKCBkZWZpbml0aW9uICE9IG51
bGwgKSA/IGRlZmluaXRpb24udG9TdHJpbmcoKSA6IGRlY2xhcmF0aW9uc1swXS50b1N0cmluZygp
Ow0KIAl9DQogDQotCS8qIChub24tSmF2YWRvYykNCi0JICogQHNlZSBvcmcuZWNsaXBzZS5jZHQu
Y29yZS5kb20uYXN0LklCaW5kaW5nI2dldE5hbWVDaGFyQXJyYXkoKQ0KLQkgKi8NCiAJcHVibGlj
IGNoYXJbXSBnZXROYW1lQ2hhckFycmF5KCkgew0KIAkJcmV0dXJuICggZGVmaW5pdGlvbiAhPSBu
dWxsICkgPyBkZWZpbml0aW9uLnRvQ2hhckFycmF5KCkgOiBkZWNsYXJhdGlvbnNbMF0udG9DaGFy
QXJyYXkoKTsNCiAJfQ0KIA0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlw
c2UuY2R0LmNvcmUuZG9tLmFzdC5JQmluZGluZyNnZXRTY29wZSgpDQotCSAqLw0KIAlwdWJsaWMg
SVNjb3BlIGdldFNjb3BlKCkgew0KIAkJSUFTVE5hbWUgbmFtZSA9IGRlZmluaXRpb24gIT0gbnVs
bCA/IGRlZmluaXRpb24gOiBkZWNsYXJhdGlvbnNbMF07DQogDQogCQlJU2NvcGUgc2NvcGUgPSBD
UFBWaXNpdG9yLmdldENvbnRhaW5pbmdTY29wZSggbmFtZSApOw0KIAkJaWYoIGRlZmluaXRpb24g
PT0gbnVsbCAmJiBuYW1lLmdldFByb3BlcnR5SW5QYXJlbnQoKSAhPSBJQ1BQQVNUUXVhbGlmaWVk
TmFtZS5TRUdNRU5UX05BTUUgKXsNCi0JCSAgICBJQVNUTm9kZSBub2RlID0gZGVjbGFyYXRpb25z
WzBdLmdldFBhcmVudCgpLmdldFBhcmVudCgpOw0KLQkJICAgIGlmKCBub2RlIGluc3RhbmNlb2Yg
SUFTVEZ1bmN0aW9uRGVmaW5pdGlvbiB8fCBub2RlIGluc3RhbmNlb2YgSUFTVFBhcmFtZXRlckRl
Y2xhcmF0aW9uIHx8DQotCQkgICAgICAgICggbm9kZSBpbnN0YW5jZW9mIElBU1RTaW1wbGVEZWNs
YXJhdGlvbiAmJiANCi0JCSAgICAgICAgICAoICgoSUFTVFNpbXBsZURlY2xhcmF0aW9uKSBub2Rl
KS5nZXREZWNsYXJhdG9ycygpLmxlbmd0aCA+IDAgfHwgZ2V0RWxhYm9yYXRlZFR5cGVTcGVjaWZp
ZXIoKS5pc0ZyaWVuZCgpICkgKSApDQotCQkgICAgew0KLQkgICAgICAgICAgICB3aGlsZSggc2Nv
cGUgaW5zdGFuY2VvZiBJQ1BQQ2xhc3NTY29wZSB8fCBzY29wZSBpbnN0YW5jZW9mIElDUFBGdW5j
dGlvblNjb3BlICl7DQorCQkJSUFTVE5vZGUgbm9kZSA9IGRlY2xhcmF0aW9uc1swXS5nZXRQYXJl
bnQoKS5nZXRQYXJlbnQoKTsNCisJCQlpZiggbm9kZSBpbnN0YW5jZW9mIElBU1RGdW5jdGlvbkRl
ZmluaXRpb24gfHwgbm9kZSBpbnN0YW5jZW9mIElBU1RQYXJhbWV0ZXJEZWNsYXJhdGlvbiB8fA0K
KwkJCQkJKCBub2RlIGluc3RhbmNlb2YgSUFTVFNpbXBsZURlY2xhcmF0aW9uICYmIA0KKwkJCQkJ
CQkoICgoSUFTVFNpbXBsZURlY2xhcmF0aW9uKSBub2RlKS5nZXREZWNsYXJhdG9ycygpLmxlbmd0
aCA+IDAgfHwgZ2V0RWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIoKS5pc0ZyaWVuZCgpICkgKSApDQor
CQkJew0KKwkJCQl3aGlsZSggc2NvcGUgaW5zdGFuY2VvZiBJQ1BQQ2xhc3NTY29wZSB8fCBzY29w
ZSBpbnN0YW5jZW9mIElDUFBGdW5jdGlvblNjb3BlICl7DQogCQkJCQl0cnkgew0KIAkJCQkJCXNj
b3BlID0gc2NvcGUuZ2V0UGFyZW50KCk7DQogCQkJCQl9IGNhdGNoIChET01FeGNlcHRpb24gZTEp
IHsNCiAJCQkJCX0NCiAJCQkJfQ0KLQkJICAgIH0NCisJCQl9DQogCQl9DQogCQlyZXR1cm4gc2Nv
cGU7DQogCX0NCiANCi0JLyogKG5vbi1KYXZhZG9jKQ0KLQkgKiBAc2VlIG9yZy5lY2xpcHNlLmNk
dC5jb3JlLmRvbS5hc3QuSUNvbXBvc2l0ZVR5cGUjZ2V0Q29tcG9zaXRlU2NvcGUoKQ0KLQkgKi8N
CiAJcHVibGljIElTY29wZSBnZXRDb21wb3NpdGVTY29wZSgpIHsNCiAJCWlmIChkZWZpbml0aW9u
ID09IG51bGwpIHsNCiAJCQljaGVja0ZvckRlZmluaXRpb24oKTsNCkBAIC00MTMsMjEgKzM0OSwx
NSBAQA0KIAkJfQ0KIAkJcmV0dXJuIG51bGw7DQogCX0NCi0JDQotCS8qIChub24tSmF2YWRvYykN
Ci0JICogQHNlZSBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklCaW5kaW5nI2dldFBoeXNp
Y2FsTm9kZSgpDQotCSAqLw0KKw0KIAlwdWJsaWMgSUFTVE5vZGUgZ2V0UGh5c2ljYWxOb2RlKCkg
ew0KIAkJcmV0dXJuIChkZWZpbml0aW9uICE9IG51bGwgKSA/IChJQVNUTm9kZSkgZGVmaW5pdGlv
biA6IGRlY2xhcmF0aW9uc1swXTsNCiAJfQ0KIA0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAqIEBz
ZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JQ29tcG9zaXRlVHlwZSNnZXRLZXkoKQ0K
LQkgKi8NCiAJcHVibGljIGludCBnZXRLZXkoKSB7DQotCSAgICBpZiggZGVmaW5pdGlvbiAhPSBu
dWxsICkNCi0JICAgICAgICByZXR1cm4gZ2V0Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpLmdldEtl
eSgpOw0KLQkgICAgDQorCQlpZiggZGVmaW5pdGlvbiAhPSBudWxsICkNCisJCQlyZXR1cm4gZ2V0
Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpLmdldEtleSgpOw0KKw0KIAkJcmV0dXJuIGdldEVsYWJv
cmF0ZWRUeXBlU3BlY2lmaWVyKCkuZ2V0S2luZCgpOw0KIAl9DQogDQpAQCAtNDM1LDEwICszNjUs
MTEgQEANCiAJCWlmKCBub2RlIGluc3RhbmNlb2YgSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZp
ZXIgKQ0KIAkJCWRlZmluaXRpb24gPSAoKElDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyKW5v
ZGUpLmdldE5hbWUoKTsNCiAJfQ0KKwkNCiAJcHVibGljIHZvaWQgYWRkRGVjbGFyYXRpb24oIElB
U1ROb2RlIG5vZGUgKSB7DQogCQlpZiggIShub2RlIGluc3RhbmNlb2YgSUNQUEFTVEVsYWJvcmF0
ZWRUeXBlU3BlY2lmaWVyKSApDQogCQkJcmV0dXJuOw0KLQkJDQorDQogCQlJQVNUTmFtZSBuYW1l
ID0gKChJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIpIG5vZGUpLmdldE5hbWUoKTsNCiAN
CiAJCWlmKCBkZWNsYXJhdGlvbnMgPT0gbnVsbCApew0KQEAgLTQ1Myw3ICszODQsNyBAQA0KIAkJ
CWRlY2xhcmF0aW9ucyA9IChJQVNUTmFtZVtdKSBBcnJheVV0aWwuYXBwZW5kKCBJQVNUTmFtZS5j
bGFzcywgZGVjbGFyYXRpb25zLCBuYW1lICk7DQogCQl9DQogCX0NCi0JDQorDQogCXB1YmxpYyB2
b2lkIHJlbW92ZURlY2xhcmF0aW9uKElBU1ROb2RlIG5vZGUpIHsNCiAJCWlmKCBkZWZpbml0aW9u
ID09IG5vZGUgKXsNCiAJCQlkZWZpbml0aW9uID0gbnVsbDsNCkBAIC00NjIsMzgwICszOTMsOTIg
QEANCiAJCUFycmF5VXRpbC5yZW1vdmUoZGVjbGFyYXRpb25zLCBub2RlKTsNCiAJfQ0KIA0KLQkv
KiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5j
cHAuSUNQUENsYXNzVHlwZSNnZXRCYXNlcygpDQotCSAqLw0KKwlwdWJsaWMgU3RyaW5nW10gZ2V0
UXVhbGlmaWVkTmFtZSgpIHsNCisJCXJldHVybiBDUFBWaXNpdG9yLmdldFF1YWxpZmllZE5hbWUo
IHRoaXMgKTsNCisJfQ0KKw0KKwlwdWJsaWMgY2hhcltdW10gZ2V0UXVhbGlmaWVkTmFtZUNoYXJB
cnJheSgpIHsNCisJCXJldHVybiBDUFBWaXNpdG9yLmdldFF1YWxpZmllZE5hbWVDaGFyQXJyYXko
IHRoaXMgKTsNCisJfQ0KKw0KKwlwdWJsaWMgYm9vbGVhbiBpc0dsb2JhbGx5UXVhbGlmaWVkKCkg
dGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQlJU2NvcGUgc2NvcGUgPSBnZXRTY29wZSgpOw0KKwkJ
d2hpbGUoIHNjb3BlICE9IG51bGwgKXsNCisJCQlpZiggc2NvcGUgaW5zdGFuY2VvZiBJQ1BQQmxv
Y2tTY29wZSApDQorCQkJCXJldHVybiBmYWxzZTsNCisJCQlzY29wZSA9IHNjb3BlLmdldFBhcmVu
dCgpOw0KKwkJfQ0KKwkJcmV0dXJuIHRydWU7DQorCX0NCisNCisJcHVibGljIElDUFBEZWxlZ2F0
ZSBjcmVhdGVEZWxlZ2F0ZSggSUFTVE5hbWUgbmFtZSApIHsNCisJCXJldHVybiBuZXcgQ1BQQ2xh
c3NUeXBlRGVsZWdhdGUoIG5hbWUsIHRoaXMgKTsNCisJfQ0KKw0KKw0KKwlwdWJsaWMgSUxpbmth
Z2UgZ2V0TGlua2FnZSgpIHsNCisJCXJldHVybiBMaW5rYWdlLkNQUF9MSU5LQUdFOw0KKwl9DQor
CQ0KKwkvKiAgICovDQorCQ0KKwlwdWJsaWMgYm9vbGVhbiBpc1NhbWVUeXBlKCBJVHlwZSB0eXBl
ICkgew0KKwkJaWYgKHR5cGUgPT0gdGhpcykNCisJCQlyZXR1cm4gdHJ1ZTsNCisJCWlmICh0eXBl
IGluc3RhbmNlb2YgSVR5cGVkZWYgfHwgdHlwZSBpbnN0YW5jZW9mIElJbmRleFR5cGUgfHwgdHlw
ZSBpbnN0YW5jZW9mIElDUFBEZWxlZ2F0ZSkNCisJCQlyZXR1cm4gdHlwZS5pc1NhbWVUeXBlKHRo
aXMpOw0KKwkJcmV0dXJuIGZhbHNlOw0KKwl9DQorCQ0KIAlwdWJsaWMgSUNQUEJhc2UgW10gZ2V0
QmFzZXMoKSB7DQotCQlpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotICAgICAgICAgICAgY2hl
Y2tGb3JEZWZpbml0aW9uKCk7DQotICAgICAgICAgICAgaWYoIGRlZmluaXRpb24gPT0gbnVsbCAp
ew0KLSAgICAgICAgICAgICAgICBJQVNUTmFtZSBub2RlID0gKGRlY2xhcmF0aW9ucyAhPSBudWxs
ICYmIGRlY2xhcmF0aW9ucy5sZW5ndGggPiAwKSA/IGRlY2xhcmF0aW9uc1swXSA6IG51bGw7DQot
ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSUNQUEJhc2UgW10geyBuZXcgQ1BQQmFzZUNsYXVz
ZS5DUFBCYXNlUHJvYmxlbSggbm9kZSwgSVByb2JsZW1CaW5kaW5nLlNFTUFOVElDX0RFRklOSVRJ
T05fTk9UX0ZPVU5ELCBnZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KLSAgICAgICAgICAgIH0NCi0g
ICAgICAgIH0NCi0JCUlDUFBBU1RCYXNlU3BlY2lmaWVyIFtdIGJhc2VzID0gZ2V0Q29tcG9zaXRl
VHlwZVNwZWNpZmllcigpLmdldEJhc2VTcGVjaWZpZXJzKCk7DQotCQlpZiggYmFzZXMubGVuZ3Ro
ID09IDAgKQ0KLQkJICAgIHJldHVybiBJQ1BQQmFzZS5FTVBUWV9CQVNFX0FSUkFZOw0KLQkJDQot
CQlJQ1BQQmFzZSBbXSBiaW5kaW5ncyA9IG5ldyBJQ1BQQmFzZVsgYmFzZXMubGVuZ3RoIF07DQot
CQlmb3IoIGludCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICl7DQotCQkgICAgYmluZGlu
Z3NbaV0gPSBuZXcgQ1BQQmFzZUNsYXVzZSggYmFzZXNbaV0gKTsNCi0JCX0NCi0JCQ0KLQkJcmV0
dXJuIGJpbmRpbmdzOyANCi0JfQ0KLQ0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3Jn
LmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUENsYXNzVHlwZSNnZXREZWNsYXJlZEZp
ZWxkcygpDQotCSAqLw0KKwkJcmV0dXJuIG1peGluLmdldEJhc2VzKCk7DQorCX0NCisNCisJcHVi
bGljIElGaWVsZFtdIGdldEZpZWxkcygpIHRocm93cyBET01FeGNlcHRpb24gew0KKwkJcmV0dXJu
IG1peGluLmdldEZpZWxkcygpOw0KKwl9DQorDQogCXB1YmxpYyBJQ1BQRmllbGRbXSBnZXREZWNs
YXJlZEZpZWxkcygpIHRocm93cyBET01FeGNlcHRpb24gew0KLQkgICAgaWYoIGRlZmluaXRpb24g
PT0gbnVsbCApew0KLSAgICAgICAgICAgIGNoZWNrRm9yRGVmaW5pdGlvbigpOw0KLSAgICAgICAg
ICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0gICAgICAgICAgICAgICAgSUFTVE5vZGUg
bm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkg
PyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KLSAgICAgICAgICAgICAgICByZXR1cm4gbmV3IElD
UFBGaWVsZFtdIHsgbmV3IENQUEZpZWxkLkNQUEZpZWxkUHJvYmxlbSggbm9kZSwgSVByb2JsZW1C
aW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5ELCBnZXROYW1lQ2hhckFycmF5KCkg
KSB9Ow0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0JICAgIElCaW5kaW5nIGJpbmRpbmcg
PSBudWxsOw0KLQkgICAgSUNQUEZpZWxkIFtdIHJlc3VsdCA9IG51bGw7DQotCSAgICANCi0JICAg
IElBU1REZWNsYXJhdGlvbiBbXSBkZWNscyA9IGdldENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIoKS5n
ZXRNZW1iZXJzKCk7DQotCSAgICBmb3IgKCBpbnQgaSA9IDA7IGkgPCBkZWNscy5sZW5ndGg7IGkr
KyApIHsNCi0gICAgICAgICAgICBpZiggZGVjbHNbaV0gaW5zdGFuY2VvZiBJQVNUU2ltcGxlRGVj
bGFyYXRpb24gKXsNCi0gICAgICAgICAgICAgICAgSUFTVERlY2xhcmF0b3IgW10gZHRvcnMgPSAo
KElBU1RTaW1wbGVEZWNsYXJhdGlvbilkZWNsc1tpXSkuZ2V0RGVjbGFyYXRvcnMoKTsNCi0gICAg
ICAgICAgICAgICAgZm9yICggaW50IGogPSAwOyBqIDwgZHRvcnMubGVuZ3RoOyBqKysgKSB7DQot
ICAgICAgICAgICAgICAgICAgICBiaW5kaW5nID0gZHRvcnNbal0uZ2V0TmFtZSgpLnJlc29sdmVC
aW5kaW5nKCk7DQotICAgICAgICAgICAgICAgICAgICBpZiggYmluZGluZyBpbnN0YW5jZW9mIElD
UFBGaWVsZCApDQotICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKElDUFBGaWVsZFtd
KSBBcnJheVV0aWwuYXBwZW5kKCBJQ1BQRmllbGQuY2xhc3MsIHJlc3VsdCwgYmluZGluZyApOw0K
LSAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgfSBlbHNlIGlmKCBkZWNsc1tpXSBpbnN0
YW5jZW9mIElDUFBBU1RVc2luZ0RlY2xhcmF0aW9uICl7DQotICAgICAgICAgICAgICAgIElBU1RO
YW1lIG4gPSAoKElDUFBBU1RVc2luZ0RlY2xhcmF0aW9uKWRlY2xzW2ldKS5nZXROYW1lKCk7DQot
ICAgICAgICAgICAgICAgIGJpbmRpbmcgPSBuLnJlc29sdmVCaW5kaW5nKCk7DQotICAgICAgICAg
ICAgICAgIGlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQUFVzaW5nRGVjbGFyYXRpb24gKXsNCi0g
ICAgICAgICAgICAgICAgICAgIElCaW5kaW5nIFtdIGJzID0gKChJQ1BQVXNpbmdEZWNsYXJhdGlv
biliaW5kaW5nKS5nZXREZWxlZ2F0ZXMoKTsNCi0gICAgICAgICAgICAgICAgICAgIGZvciAoIGlu
dCBqID0gMDsgaiA8IGJzLmxlbmd0aDsgaisrICkgew0KLSAgICAgICAgICAgICAgICAgICAgICAg
IGlmKCBic1tqXSBpbnN0YW5jZW9mIElDUFBGaWVsZCApDQotICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHJlc3VsdCA9IChJQ1BQRmllbGRbXSkgQXJyYXlVdGlsLmFwcGVuZCggSUNQUEZpZWxk
LmNsYXNzLCByZXN1bHQsIGJzW2pdICk7DQotICAgICAgICAgICAgICAgICAgICB9DQotICAgICAg
ICAgICAgICAgIH0gZWxzZSBpZiggYmluZGluZyBpbnN0YW5jZW9mIElDUFBGaWVsZCApIHsNCi0g
ICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChJQ1BQRmllbGRbXSkgQXJyYXlVdGlsLmFwcGVu
ZCggSUNQUEZpZWxkLmNsYXNzLCByZXN1bHQsIGJpbmRpbmcgKTsNCi0gICAgICAgICAgICAgICAg
fQ0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUNQUEZpZWxkW10pIEFy
cmF5VXRpbC50cmltKCBJQ1BQRmllbGQuY2xhc3MsIHJlc3VsdCApOw0KKwkJcmV0dXJuIG1peGlu
LmdldERlY2xhcmVkRmllbGRzKCk7DQogCX0NCi0JDQotCXB1YmxpYyBJQ1BQTWV0aG9kW10gZ2V0
Q29udmVyc2lvbk9wZXJhdG9ycygpIHsNCi0JCWlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0g
ICAgICAgICAgICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0gICAgICAgICAgICBpZiggZGVmaW5p
dGlvbiA9PSBudWxsICl7DQotICAgICAgICAgICAgICAgIElBU1ROb2RlIG5vZGUgPSAoZGVjbGFy
YXRpb25zICE9IG51bGwgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRpb25z
WzBdIDogbnVsbDsNCi0gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJQ1BQTWV0aG9kW10geyBu
ZXcgQ1BQTWV0aG9kLkNQUE1ldGhvZFByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1B
TlRJQ19ERUZJTklUSU9OX05PVF9GT1VORCwgZ2V0TmFtZUNoYXJBcnJheSgpICkgfTsNCi0gICAg
ICAgICAgICB9DQotICAgICAgICB9DQotCSAgICBJQmluZGluZyBiaW5kaW5nID0gbnVsbDsNCi0J
ICAgIElDUFBNZXRob2QgW10gcmVzdWx0ID0gbnVsbDsNCi0JICAgIA0KLQkgICAgSUFTVERlY2xh
cmF0aW9uIFtdIGRlY2xzID0gZ2V0Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpLmdldE1lbWJlcnMo
KTsNCi0JICAgIElBU1ROYW1lIG5hbWUgPSBudWxsOw0KLQkgICAgZm9yICggaW50IGkgPSAwOyBp
IDwgZGVjbHMubGVuZ3RoOyBpKysgKSB7DQotICAgICAgICAgICAgaWYoIGRlY2xzW2ldIGluc3Rh
bmNlb2YgSUFTVFNpbXBsZURlY2xhcmF0aW9uICl7DQotICAgICAgICAgICAgICAgIElBU1REZWNs
YXJhdG9yIFtdIGR0b3JzID0gKChJQVNUU2ltcGxlRGVjbGFyYXRpb24pZGVjbHNbaV0pLmdldERl
Y2xhcmF0b3JzKCk7DQotICAgICAgICAgICAgICAgIGZvciAoIGludCBqID0gMDsgaiA8IGR0b3Jz
Lmxlbmd0aDsgaisrICkgew0KLSAgICAgICAgICAgICAgICAJbmFtZSA9IENQUFZpc2l0b3IuZ2V0
TW9zdE5lc3RlZERlY2xhcmF0b3IoIGR0b3JzW2pdICkuZ2V0TmFtZSgpOw0KLSAgICAgICAgICAg
ICAgICAJaWYoIG5hbWUgaW5zdGFuY2VvZiBJQ1BQQVNUQ29udmVyc2lvbk5hbWUgKXsNCi0gICAg
ICAgICAgICAgICAgCQliaW5kaW5nID0gbmFtZS5yZXNvbHZlQmluZGluZygpOw0KLSAgICAgICAg
ICAgICAgICAgICAgICAgIGlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQUE1ldGhvZCkNCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKElDUFBNZXRob2RbXSkgQXJyYXlVdGls
LmFwcGVuZCggSUNQUE1ldGhvZC5jbGFzcywgcmVzdWx0LCBiaW5kaW5nICk7CQ0KLSAgICAgICAg
ICAgICAgICAJfQ0KLSAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgfSBlbHNlIGlmKCBk
ZWNsc1tpXSBpbnN0YW5jZW9mIElBU1RGdW5jdGlvbkRlZmluaXRpb24gKXsNCi0gICAgICAgICAg
ICAgICAgSUFTVERlY2xhcmF0b3IgZHRvciA9ICgoSUFTVEZ1bmN0aW9uRGVmaW5pdGlvbilkZWNs
c1tpXSkuZ2V0RGVjbGFyYXRvcigpOw0KLSAgICAgICAgICAgICAgICBuYW1lID0gQ1BQVmlzaXRv
ci5nZXRNb3N0TmVzdGVkRGVjbGFyYXRvciggZHRvciApLmdldE5hbWUoKTsNCi0gICAgICAgICAg
ICAgICAgaWYoIG5hbWUgaW5zdGFuY2VvZiBJQ1BQQVNUQ29udmVyc2lvbk5hbWUgKXsNCi0gICAg
ICAgICAgICAgICAgCWJpbmRpbmcgPSBuYW1lLnJlc29sdmVCaW5kaW5nKCk7DQotICAgICAgICAg
ICAgICAgICAgICBpZiggYmluZGluZyBpbnN0YW5jZW9mIElDUFBNZXRob2QgKXsNCi0gICAgICAg
ICAgICAgICAgICAgICAgICByZXN1bHQgPSAoSUNQUE1ldGhvZFtdKSBBcnJheVV0aWwuYXBwZW5k
KCBJQ1BQTWV0aG9kLmNsYXNzLCByZXN1bHQsIGJpbmRpbmcgKTsNCi0gICAgICAgICAgICAgICAg
ICAgIH0NCi0gICAgICAgICAgICAgICAgfQ0KLSAgICAgICAgICAgIH0gDQotICAgICAgICB9DQot
CSAgICANCi0JICAgIElDUFBCYXNlIFtdIGJhc2VzID0gZ2V0QmFzZXMoKTsNCi0JCWZvciAoIGlu
dCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICkgew0KLQkJCUlDUFBDbGFzc1R5cGUgY2xz
ID0gbnVsbDsNCi0JCQl0cnkgew0KLQkJCQlJQmluZGluZyBiID0gYmFzZXNbaV0uZ2V0QmFzZUNs
YXNzKCk7DQotCQkJCWlmKCBiIGluc3RhbmNlb2YgSUNQUENsYXNzVHlwZSApDQotCQkJCQljbHMg
PSAoSUNQUENsYXNzVHlwZSkgYjsNCi0JCQl9IGNhdGNoIChET01FeGNlcHRpb24gZSkgew0KLQkJ
CQljb250aW51ZTsNCi0JCQl9DQotCQkJaWYoIGNscyBpbnN0YW5jZW9mIElDUFBJbnRlcm5hbENs
YXNzVHlwZSApDQotCQkJCXJlc3VsdCA9IChJQ1BQTWV0aG9kW10pIEFycmF5VXRpbC5hZGRBbGwo
IElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCwgKChJQ1BQSW50ZXJuYWxDbGFzc1R5cGUpY2xzKS5n
ZXRDb252ZXJzaW9uT3BlcmF0b3JzKCkgKTsNCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUNQUE1l
dGhvZFtdKSBBcnJheVV0aWwudHJpbSggSUNQUE1ldGhvZC5jbGFzcywgcmVzdWx0ICk7DQorDQor
CXB1YmxpYyBJQ1BQTWV0aG9kW10gZ2V0Q29udmVyc2lvbk9wZXJhdG9ycygpIHRocm93cyBET01F
eGNlcHRpb24gew0KKwkJcmV0dXJuIG1peGluLmdldENvbnZlcnNpb25PcGVyYXRvcnMoKTsNCiAJ
fQ0KIA0KLQkvKiAobm9uLUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUu
ZG9tLmFzdC5jcHAuSUNQUENsYXNzVHlwZSNnZXRNZXRob2RzKCkNCi0JICovDQogCXB1YmxpYyBJ
Q1BQTWV0aG9kW10gZ2V0TWV0aG9kcygpIHRocm93cyBET01FeGNlcHRpb24gew0KLQkJT2JqZWN0
U2V0IHNldCA9IG5ldyBPYmplY3RTZXQoNCk7DQotCQlJQ1BQTWV0aG9kIFtdIG1zID0gZ2V0RGVj
bGFyZWRNZXRob2RzKCk7DQotCQlzZXQuYWRkQWxsKCBtcyApOw0KLQkJSUNQUENsYXNzU2NvcGUg
c2NvcGUgPSAoSUNQUENsYXNzU2NvcGUpIGdldENvbXBvc2l0ZVNjb3BlKCk7DQotCQlzZXQuYWRk
QWxsKCBzY29wZS5nZXRJbXBsaWNpdE1ldGhvZHMoKSApOw0KLQkJSUNQUEJhc2UgW10gYmFzZXMg
PSBnZXRCYXNlcygpOw0KLQkJZm9yICggaW50IGkgPSAwOyBpIDwgYmFzZXMubGVuZ3RoOyBpKysg
KSB7DQotCQkJSUJpbmRpbmcgYiA9IGJhc2VzW2ldLmdldEJhc2VDbGFzcygpOw0KLQkJCWlmKCBi
IGluc3RhbmNlb2YgSUNQUENsYXNzVHlwZSApDQotCQkJCXNldC5hZGRBbGwoICgoSUNQUENsYXNz
VHlwZSliKS5nZXRNZXRob2RzKCkgKTsNCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUNQUE1ldGhv
ZFtdKSBzZXQua2V5QXJyYXkoIElDUFBNZXRob2QuY2xhc3MgKTsNCi0JfQ0KLQ0KLQkvKiAobm9u
LUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQ
UENsYXNzVHlwZSNnZXRBbGxEZWNsYXJlZE1ldGhvZHMoKQ0KLQkgKi8NCisJCXJldHVybiBtaXhp
bi5nZXRNZXRob2RzKCk7DQorCX0NCisNCiAJcHVibGljIElDUFBNZXRob2RbXSBnZXRBbGxEZWNs
YXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCi0JCWlmKCBkZWZpbml0aW9uID09
IG51bGwgKXsNCi0JICAgICAgICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0JICAgICAgICBpZigg
ZGVmaW5pdGlvbiA9PSBudWxsICl7DQotCSAgICAgICAgICAgIElBU1ROb2RlIG5vZGUgPSAoZGVj
bGFyYXRpb25zICE9IG51bGwgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRp
b25zWzBdIDogbnVsbDsNCi0JICAgICAgICAgICAgcmV0dXJuIG5ldyBJQ1BQTWV0aG9kIFtdIHsg
bmV3IENQUE1ldGhvZC5DUFBNZXRob2RQcm9ibGVtKCBub2RlLCBJUHJvYmxlbUJpbmRpbmcuU0VN
QU5USUNfREVGSU5JVElPTl9OT1RfRk9VTkQsIGdldE5hbWVDaGFyQXJyYXkoKSApIH07DQotCSAg
ICAgICAgfQ0KLQkgICAgfQ0KLQ0KLQkJSUNQUE1ldGhvZFtdIG1ldGhvZHMgPSBnZXREZWNsYXJl
ZE1ldGhvZHMoKTsNCi0JCUlDUFBCYXNlIFtdIGJhc2VzID0gZ2V0QmFzZXMoKTsNCi0JCWZvciAo
IGludCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICkgew0KLQkJCUlCaW5kaW5nIGIgPSBi
YXNlc1tpXS5nZXRCYXNlQ2xhc3MoKTsNCi0JCQlpZiggYiBpbnN0YW5jZW9mIElDUFBDbGFzc1R5
cGUgKQ0KLQkJCQltZXRob2RzID0gKElDUFBNZXRob2RbXSkgQXJyYXlVdGlsLmFkZEFsbCggSUNQ
UE1ldGhvZC5jbGFzcywgbWV0aG9kcywgKChJQ1BQQ2xhc3NUeXBlKWIpLmdldEFsbERlY2xhcmVk
TWV0aG9kcygpICk7DQotICAgICAgICB9DQotCQlyZXR1cm4gKElDUFBNZXRob2RbXSkgQXJyYXlV
dGlsLnRyaW0oIElDUFBNZXRob2QuY2xhc3MsIG1ldGhvZHMgKTsNCi0JfQ0KLQ0KLQkvKiAobm9u
LUphdmFkb2MpDQotCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQ
UENsYXNzVHlwZSNnZXREZWNsYXJlZE1ldGhvZHMoKQ0KLQkgKi8NCisJCXJldHVybiBtaXhpbi5n
ZXRBbGxEZWNsYXJlZE1ldGhvZHMoKTsNCisJfQ0KKw0KIAlwdWJsaWMgSUNQUE1ldGhvZFtdIGdl
dERlY2xhcmVkTWV0aG9kcygpIHRocm93cyBET01FeGNlcHRpb24gew0KLQkgICAgaWYoIGRlZmlu
aXRpb24gPT0gbnVsbCApew0KLSAgICAgICAgICAgIGNoZWNrRm9yRGVmaW5pdGlvbigpOw0KLSAg
ICAgICAgICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0gICAgICAgICAgICAgICAgSUFT
VE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3Ro
ID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KLSAgICAgICAgICAgICAgICByZXR1cm4g
bmV3IElDUFBNZXRob2RbXSB7IG5ldyBDUFBNZXRob2QuQ1BQTWV0aG9kUHJvYmxlbSggbm9kZSwg
SVByb2JsZW1CaW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5ELCBnZXROYW1lQ2hh
ckFycmF5KCkgKSB9Ow0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0JICAgIElCaW5kaW5n
IGJpbmRpbmcgPSBudWxsOw0KLQkgICAgSUNQUE1ldGhvZCBbXSByZXN1bHQgPSBudWxsOw0KLQkg
ICAgDQotCSAgICBJQVNURGVjbGFyYXRpb24gW10gZGVjbHMgPSBnZXRDb21wb3NpdGVUeXBlU3Bl
Y2lmaWVyKCkuZ2V0TWVtYmVycygpOw0KLQkgICAgZm9yICggaW50IGkgPSAwOyBpIDwgZGVjbHMu
bGVuZ3RoOyBpKysgKSB7DQotCQkJSUFTVERlY2xhcmF0aW9uIGRlY2wgPSBkZWNsc1tpXTsNCi0J
CQl3aGlsZSggZGVjbCBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uICkNCi0J
CQkJZGVjbCA9ICgoSUNQUEFTVFRlbXBsYXRlRGVjbGFyYXRpb24pZGVjbCkuZ2V0RGVjbGFyYXRp
b24oKTsNCi0gICAgICAgICAgICBpZiggZGVjbCBpbnN0YW5jZW9mIElBU1RTaW1wbGVEZWNsYXJh
dGlvbiApew0KLSAgICAgICAgICAgICAgICBJQVNURGVjbGFyYXRvciBbXSBkdG9ycyA9ICgoSUFT
VFNpbXBsZURlY2xhcmF0aW9uKWRlY2wpLmdldERlY2xhcmF0b3JzKCk7DQotICAgICAgICAgICAg
ICAgIGZvciAoIGludCBqID0gMDsgaiA8IGR0b3JzLmxlbmd0aDsgaisrICkgew0KLSAgICAgICAg
ICAgICAgICAgICAgYmluZGluZyA9IGR0b3JzW2pdLmdldE5hbWUoKS5yZXNvbHZlQmluZGluZygp
Ow0KLSAgICAgICAgICAgICAgICAgICAgaWYoIGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQTWV0aG9k
KQ0KLSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChJQ1BQTWV0aG9kW10pIEFycmF5
VXRpbC5hcHBlbmQoIElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCwgYmluZGluZyApOw0KLSAgICAg
ICAgICAgICAgICB9DQotICAgICAgICAgICAgfSBlbHNlIGlmKCBkZWNsIGluc3RhbmNlb2YgSUFT
VEZ1bmN0aW9uRGVmaW5pdGlvbiApew0KLSAgICAgICAgICAgICAgICBJQVNURGVjbGFyYXRvciBk
dG9yID0gKChJQVNURnVuY3Rpb25EZWZpbml0aW9uKWRlY2wpLmdldERlY2xhcmF0b3IoKTsNCi0g
ICAgICAgICAgICAgICAgZHRvciA9IENQUFZpc2l0b3IuZ2V0TW9zdE5lc3RlZERlY2xhcmF0b3Io
IGR0b3IgKTsNCi0gICAgICAgICAgICAgICAgYmluZGluZyA9IGR0b3IuZ2V0TmFtZSgpLnJlc29s
dmVCaW5kaW5nKCk7DQotICAgICAgICAgICAgICAgIGlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQ
UE1ldGhvZCApew0KLSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKElDUFBNZXRob2RbXSkg
QXJyYXlVdGlsLmFwcGVuZCggSUNQUE1ldGhvZC5jbGFzcywgcmVzdWx0LCBiaW5kaW5nICk7DQot
ICAgICAgICAgICAgICAgIH0NCi0gICAgICAgICAgICB9IGVsc2UgaWYoIGRlY2wgaW5zdGFuY2Vv
ZiBJQ1BQQVNUVXNpbmdEZWNsYXJhdGlvbiApew0KLSAgICAgICAgICAgICAgICBJQVNUTmFtZSBu
ID0gKChJQ1BQQVNUVXNpbmdEZWNsYXJhdGlvbilkZWNsKS5nZXROYW1lKCk7DQotICAgICAgICAg
ICAgICAgIGJpbmRpbmcgPSBuLnJlc29sdmVCaW5kaW5nKCk7DQotICAgICAgICAgICAgICAgIGlm
KCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQUFVzaW5nRGVjbGFyYXRpb24gKXsNCi0gICAgICAgICAg
ICAgICAgICAgIElCaW5kaW5nIFtdIGJzID0gKChJQ1BQVXNpbmdEZWNsYXJhdGlvbiliaW5kaW5n
KS5nZXREZWxlZ2F0ZXMoKTsNCi0gICAgICAgICAgICAgICAgICAgIGZvciAoIGludCBqID0gMDsg
aiA8IGJzLmxlbmd0aDsgaisrICkgew0KLSAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBic1tq
XSBpbnN0YW5jZW9mIElDUFBNZXRob2QgKQ0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBy
ZXN1bHQgPSAoSUNQUE1ldGhvZFtdKSBBcnJheVV0aWwuYXBwZW5kKCBJQ1BQTWV0aG9kLmNsYXNz
LCByZXN1bHQsIGJzW2pdICk7DQotICAgICAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAg
ICAgIH0gZWxzZSBpZiggYmluZGluZyBpbnN0YW5jZW9mIElDUFBNZXRob2QgKSB7DQotICAgICAg
ICAgICAgICAgICAgICByZXN1bHQgPSAoSUNQUE1ldGhvZFtdKSBBcnJheVV0aWwuYXBwZW5kKCBJ
Q1BQTWV0aG9kLmNsYXNzLCByZXN1bHQsIGJpbmRpbmcgKTsNCi0gICAgICAgICAgICAgICAgfQ0K
LSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUNQUE1ldGhvZFtdKSBBcnJh
eVV0aWwudHJpbSggSUNQUE1ldGhvZC5jbGFzcywgcmVzdWx0ICk7DQorCQlyZXR1cm4gbWl4aW4u
Z2V0RGVjbGFyZWRNZXRob2RzKCk7DQogCX0NCi0JDQotICAgIHB1YmxpYyBPYmplY3QgY2xvbmUo
KXsNCi0gICAgICAgIElUeXBlIHQgPSBudWxsOw0KLSAgIAkJdHJ5IHsNCi0gICAgICAgICAgICB0
ID0gKElUeXBlKSBzdXBlci5jbG9uZSgpOw0KLSAgICAgICAgfSBjYXRjaCAoIENsb25lTm90U3Vw
cG9ydGVkRXhjZXB0aW9uIGUgKSB7DQotICAgICAgICAgICAgLy9ub3QgZ29pbmcgdG8gaGFwcGVu
DQotICAgICAgICB9DQotICAgICAgICByZXR1cm4gdDsNCi0gICAgfQ0KLQ0KLSAgICAvKiAobm9u
LUphdmFkb2MpDQotICAgICAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAu
SUNQUENsYXNzVHlwZSNnZXRDb25zdHJ1Y3RvcnMoKQ0KLSAgICAgKi8NCi0gICAgcHVibGljIElD
UFBDb25zdHJ1Y3RvcltdIGdldENvbnN0cnVjdG9ycygpIHRocm93cyBET01FeGNlcHRpb24gew0K
LSAgICAgICAgaWYoIGRlZmluaXRpb24gPT0gbnVsbCApew0KLSAgICAgICAgICAgIGNoZWNrRm9y
RGVmaW5pdGlvbigpOw0KLSAgICAgICAgICAgIGlmKCBkZWZpbml0aW9uID09IG51bGwgKXsNCi0g
ICAgICAgICAgICAgICAgSUFTVE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBk
ZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KLSAgICAg
ICAgICAgICAgICByZXR1cm4gbmV3IElDUFBDb25zdHJ1Y3RvciBbXSB7IG5ldyBDUFBDb25zdHJ1
Y3Rvci5DUFBDb25zdHJ1Y3RvclByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJ
Q19ERUZJTklUSU9OX05PVF9GT1VORCwgZ2V0TmFtZUNoYXJBcnJheSgpICkgfTsNCi0gICAgICAg
ICAgICB9DQotICAgICAgICB9DQotICAgICAgICANCi0gICAgICAgIElDUFBDbGFzc1Njb3BlIHNj
b3BlID0gKElDUFBDbGFzc1Njb3BlKSBnZXRDb21wb3NpdGVTY29wZSgpOw0KLSAgICAgICAgaWYo
IEFTVEludGVybmFsLmlzRnVsbHlDYWNoZWQoc2NvcGUpICkNCi0gICAgICAgIAlyZXR1cm4gKChD
UFBDbGFzc1Njb3BlKXNjb3BlKS5nZXRDb25zdHJ1Y3RvcnMoIHRydWUgKTsNCi0gICAgICAgIAkN
Ci0gICAgICAgIElBU1REZWNsYXJhdGlvbiBbXSBtZW1iZXJzID0gZ2V0Q29tcG9zaXRlVHlwZVNw
ZWNpZmllcigpLmdldE1lbWJlcnMoKTsNCi0gICAgICAgIGZvciggaW50IGkgPSAwOyBpIDwgbWVt
YmVycy5sZW5ndGg7IGkrKyApew0KLSAgICAgICAgCUlBU1REZWNsYXJhdGlvbiBkZWNsID0gbWVt
YmVyc1tpXTsNCi0gICAgICAgIAlpZiggZGVjbCBpbnN0YW5jZW9mIElDUFBBU1RUZW1wbGF0ZURl
Y2xhcmF0aW9uICkNCi0gICAgICAgIAkJZGVjbCA9ICgoSUNQUEFTVFRlbXBsYXRlRGVjbGFyYXRp
b24pZGVjbCkuZ2V0RGVjbGFyYXRpb24oKTsNCi0JCQlpZiggZGVjbCBpbnN0YW5jZW9mIElBU1RT
aW1wbGVEZWNsYXJhdGlvbiApew0KLQkJCSAgICBJQVNURGVjbGFyYXRvciBbXSBkdG9ycyA9ICgo
SUFTVFNpbXBsZURlY2xhcmF0aW9uKWRlY2wpLmdldERlY2xhcmF0b3JzKCk7DQotCQkJICAgIGZv
ciggaW50IGogPSAwOyBqIDwgZHRvcnMubGVuZ3RoOyBqKysgKXsNCi0JCQkgICAgICAgIGlmKCBk
dG9yc1tqXSA9PSBudWxsICkgYnJlYWs7DQotCQkgICAgICAgICAgICBBU1RJbnRlcm5hbC5hZGRO
YW1lKHNjb3BlLCAgZHRvcnNbal0uZ2V0TmFtZSgpICk7DQotCQkJICAgIH0NCi0JCQl9IGVsc2Ug
aWYoIGRlY2wgaW5zdGFuY2VvZiBJQVNURnVuY3Rpb25EZWZpbml0aW9uICl7DQotCQkJICAgIElB
U1REZWNsYXJhdG9yIGR0b3IgPSAoKElBU1RGdW5jdGlvbkRlZmluaXRpb24pZGVjbCkuZ2V0RGVj
bGFyYXRvcigpOw0KLQkJCSAgICBBU1RJbnRlcm5hbC5hZGROYW1lKHNjb3BlLCAgZHRvci5nZXRO
YW1lKCkgKTsNCi0JCQl9DQotICAgICAgICB9DQotICAgICAgICANCi0gICAgICAgIHJldHVybiAo
KENQUENsYXNzU2NvcGUpc2NvcGUpLmdldENvbnN0cnVjdG9ycyggdHJ1ZSApOw0KLSAgICB9DQot
DQotICAgIC8qIChub24tSmF2YWRvYykNCi0gICAgICogQHNlZSBvcmcuZWNsaXBzZS5jZHQuY29y
ZS5kb20uYXN0LmNwcC5JQ1BQQ2xhc3NUeXBlI2dldEZyaWVuZHMoKQ0KLSAgICAgKi8NCi0gICAg
cHVibGljIElCaW5kaW5nW10gZ2V0RnJpZW5kcygpIHsNCi0gICAgICAgIGlmKCBkZWZpbml0aW9u
ID09IG51bGwgKXsNCi0gICAgICAgICAgICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0gICAgICAg
ICAgICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotICAgICAgICAgICAgICAgIElBU1ROb2Rl
IG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDAp
ID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCi0gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJ
QmluZGluZyBbXSB7IG5ldyBQcm9ibGVtQmluZGluZyggbm9kZSwgSVByb2JsZW1CaW5kaW5nLlNF
TUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5ELCBnZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KLSAg
ICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0gICAgICAgIE9iamVjdFNldCByZXN1bHRTZXQgPSBu
ZXcgT2JqZWN0U2V0KDIpOw0KLSAgICAgICAgSUFTVERlY2xhcmF0aW9uIFtdIG1lbWJlcnMgPSBn
ZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCkuZ2V0TWVtYmVycygpOw0KLSAgICAgICAgZm9yKCBp
bnQgaSA9IDA7IGkgPCBtZW1iZXJzLmxlbmd0aDsgaSsrICl7DQotCQkJSUFTVERlY2xhcmF0aW9u
IGRlY2wgPSBtZW1iZXJzW2ldOw0KLQkJCXdoaWxlKCBkZWNsIGluc3RhbmNlb2YgSUNQUEFTVFRl
bXBsYXRlRGVjbGFyYXRpb24gKQ0KLQkJCQlkZWNsID0gKChJQ1BQQVNUVGVtcGxhdGVEZWNsYXJh
dGlvbilkZWNsKS5nZXREZWNsYXJhdGlvbigpOw0KLQkJCQ0KLQkJCWlmKCBkZWNsIGluc3RhbmNl
b2YgSUFTVFNpbXBsZURlY2xhcmF0aW9uICl7DQotCQkJICAgIElDUFBBU1REZWNsU3BlY2lmaWVy
IGRlY2xTcGVjID0gKElDUFBBU1REZWNsU3BlY2lmaWVyKSAoKElBU1RTaW1wbGVEZWNsYXJhdGlv
bilkZWNsKS5nZXREZWNsU3BlY2lmaWVyKCk7DQotCQkJICAgIGlmKCBkZWNsU3BlYy5pc0ZyaWVu
ZCgpICl7DQotCQkJICAgICAgICBJQVNURGVjbGFyYXRvciBbXSBkdG9ycyA9ICgoSUFTVFNpbXBs
ZURlY2xhcmF0aW9uKWRlY2wpLmdldERlY2xhcmF0b3JzKCk7DQotCQkJICAgICAgICBpZiggZGVj
bFNwZWMgaW5zdGFuY2VvZiBJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIgJiYgZHRvcnMu
bGVuZ3RoID09IDAgKXsNCi0JCQkgICAgICAgIAlyZXN1bHRTZXQucHV0KCAoKElDUFBBU1RFbGFi
b3JhdGVkVHlwZVNwZWNpZmllcilkZWNsU3BlYykuZ2V0TmFtZSgpLnJlc29sdmVCaW5kaW5nKCkg
KTsNCi0JCQkgICAgICAgIH0gZWxzZSB7DQotCQkJCQkgICAgZm9yKCBpbnQgaiA9IDA7IGogPCBk
dG9ycy5sZW5ndGg7IGorKyApew0KLQkJCQkJICAgICAgICBpZiggZHRvcnNbal0gPT0gbnVsbCAp
IGJyZWFrOw0KLQkJCQkJICAgICAgICByZXN1bHRTZXQucHV0KCBkdG9yc1tqXS5nZXROYW1lKCku
cmVzb2x2ZUJpbmRpbmcoKSApOw0KLQkJCQkJICAgIH0gICAgDQotCQkJICAgICAgICB9DQotCQkJ
ICAgIH0NCi0JCQl9IGVsc2UgaWYoIGRlY2wgaW5zdGFuY2VvZiBJQVNURnVuY3Rpb25EZWZpbml0
aW9uICl7DQotCQkJICAgIElDUFBBU1REZWNsU3BlY2lmaWVyIGRlY2xTcGVjID0gKElDUFBBU1RE
ZWNsU3BlY2lmaWVyKSAoKElBU1RGdW5jdGlvbkRlZmluaXRpb24pZGVjbCkuZ2V0RGVjbFNwZWNp
ZmllcigpOw0KLQkJCSAgICBpZiggZGVjbFNwZWMuaXNGcmllbmQoKSApew0KLQkJCSAgICAgICAg
SUFTVERlY2xhcmF0b3IgZHRvciA9ICgoSUFTVEZ1bmN0aW9uRGVmaW5pdGlvbilkZWNsKS5nZXRE
ZWNsYXJhdG9yKCk7DQotCQkJICAgICAgICByZXN1bHRTZXQucHV0KCBkdG9yLmdldE5hbWUoKS5y
ZXNvbHZlQmluZGluZygpICk7DQotCQkJICAgIH0NCi0JCQkgICAgDQotCQkJfQ0KLSAgICAgICAg
fQ0KLSAgICAgICAgDQotICAgICAgICByZXR1cm4gKElCaW5kaW5nW10pIHJlc3VsdFNldC5rZXlB
cnJheSggSUJpbmRpbmcuY2xhc3MgKTsNCi0gICAgfQ0KLQ0KLSAgICAvKiAobm9uLUphdmFkb2Mp
DQotICAgICAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEJpbmRp
bmcjZ2V0UXVhbGlmaWVkTmFtZSgpDQotICAgICAqLw0KLSAgICBwdWJsaWMgU3RyaW5nW10gZ2V0
UXVhbGlmaWVkTmFtZSgpIHsNCi0gICAgICAgIHJldHVybiBDUFBWaXNpdG9yLmdldFF1YWxpZmll
ZE5hbWUoIHRoaXMgKTsNCi0gICAgfQ0KLQ0KLSAgICAvKiAobm9uLUphdmFkb2MpDQotICAgICAq
IEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEJpbmRpbmcjZ2V0UXVh
bGlmaWVkTmFtZUNoYXJBcnJheSgpDQotICAgICAqLw0KLSAgICBwdWJsaWMgY2hhcltdW10gZ2V0
UXVhbGlmaWVkTmFtZUNoYXJBcnJheSgpIHsNCi0gICAgICAgIHJldHVybiBDUFBWaXNpdG9yLmdl
dFF1YWxpZmllZE5hbWVDaGFyQXJyYXkoIHRoaXMgKTsNCi0gICAgfQ0KLQ0KLSAgICAvKiAobm9u
LUphdmFkb2MpDQotICAgICAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAu
SUNQUEJpbmRpbmcjaXNHbG9iYWxseVF1YWxpZmllZCgpDQotICAgICAqLw0KLSAgICBwdWJsaWMg
Ym9vbGVhbiBpc0dsb2JhbGx5UXVhbGlmaWVkKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQotICAg
ICAgICBJU2NvcGUgc2NvcGUgPSBnZXRTY29wZSgpOw0KLSAgICAgICAgd2hpbGUoIHNjb3BlICE9
IG51bGwgKXsNCi0gICAgICAgICAgICBpZiggc2NvcGUgaW5zdGFuY2VvZiBJQ1BQQmxvY2tTY29w
ZSApDQotICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCi0gICAgICAgICAgICBzY29wZSA9
IHNjb3BlLmdldFBhcmVudCgpOw0KLSAgICAgICAgfQ0KLSAgICAgICAgcmV0dXJuIHRydWU7DQot
ICAgIH0NCi0NCi0gICAgLyogKG5vbi1KYXZhZG9jKQ0KLSAgICAgKiBAc2VlIG9yZy5lY2xpcHNl
LmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwLklDUFBJbnRlcm5hbEJpbmRpbmcjY3Jl
YXRlRGVsZWdhdGUob3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JQVNUTmFtZSkNCi0gICAg
ICovDQotICAgIHB1YmxpYyBJQ1BQRGVsZWdhdGUgY3JlYXRlRGVsZWdhdGUoIElBU1ROYW1lIG5h
bWUgKSB7DQotICAgICAgICByZXR1cm4gbmV3IENQUENsYXNzVHlwZURlbGVnYXRlKCBuYW1lLCB0
aGlzICk7DQotICAgIH0NCi0NCi0gICAgLyogKG5vbi1KYXZhZG9jKQ0KLSAgICAgKiBAc2VlIG9y
Zy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSVR5cGUjaXNTYW1lVHlwZShvcmcuZWNsaXBzZS5j
ZHQuY29yZS5kb20uYXN0LklUeXBlKQ0KLSAgICAgKi8NCi0gICAgcHVibGljIGJvb2xlYW4gaXNT
YW1lVHlwZSggSVR5cGUgdHlwZSApIHsNCi0gICAgICAgIGlmICh0eXBlID09IHRoaXMpDQotICAg
ICAgICAgICAgcmV0dXJuIHRydWU7DQotICAgICAgICBpZiAodHlwZSBpbnN0YW5jZW9mIElUeXBl
ZGVmIHx8IHR5cGUgaW5zdGFuY2VvZiBJSW5kZXhUeXBlIHx8IHR5cGUgaW5zdGFuY2VvZiBJQ1BQ
RGVsZWdhdGUpDQotICAgICAgICAgICAgcmV0dXJuIHR5cGUuaXNTYW1lVHlwZSh0aGlzKTsNCi0g
ICAgICAgIHJldHVybiBmYWxzZTsNCi0gICAgfQ0KIA0KKwlwdWJsaWMgSUNQUENvbnN0cnVjdG9y
W10gZ2V0Q29uc3RydWN0b3JzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQlyZXR1cm4gbWl4
aW4uZ2V0Q29uc3RydWN0b3JzKCk7DQorCX0NCisNCisJcHVibGljIElCaW5kaW5nW10gZ2V0RnJp
ZW5kcygpIHsNCisJCXJldHVybiBtaXhpbi5nZXRGcmllbmRzKCk7DQorCX0NCisJDQogCXB1Ymxp
YyBJQ1BQQ2xhc3NUeXBlW10gZ2V0TmVzdGVkQ2xhc3NlcygpIHsNCi0JCWlmKCBkZWZpbml0aW9u
ID09IG51bGwgKXsNCi0gICAgICAgICAgICBjaGVja0ZvckRlZmluaXRpb24oKTsNCi0gICAgICAg
ICAgICBpZiggZGVmaW5pdGlvbiA9PSBudWxsICl7DQotICAgICAgICAgICAgICAgIElBU1ROb2Rl
IG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDAp
ID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCi0gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJ
Q1BQQ2xhc3NUeXBlW10geyBuZXcgQ1BQQ2xhc3NUeXBlUHJvYmxlbSggbm9kZSwgSVByb2JsZW1C
aW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5ELCBnZXROYW1lQ2hhckFycmF5KCkg
KSB9Ow0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0NCi0JCQ0KLQkgICAgSUNQUENsYXNzVHlw
ZSBbXSByZXN1bHQgPSBudWxsOw0KLQkgICAgDQotCSAgICBJQVNURGVjbGFyYXRpb24gW10gZGVj
bHMgPSBnZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCkuZ2V0TWVtYmVycygpOw0KLQkgICAgZm9y
ICggaW50IGkgPSAwOyBpIDwgZGVjbHMubGVuZ3RoOyBpKysgKSB7DQotCQkJSUFTVERlY2xhcmF0
aW9uIGRlY2wgPSBkZWNsc1tpXTsNCi0JCQl3aGlsZSggZGVjbCBpbnN0YW5jZW9mIElDUFBBU1RU
ZW1wbGF0ZURlY2xhcmF0aW9uICkNCi0JCQkJZGVjbCA9ICgoSUNQUEFTVFRlbXBsYXRlRGVjbGFy
YXRpb24pZGVjbCkuZ2V0RGVjbGFyYXRpb24oKTsNCi0gICAgICAgICAgICBpZiggZGVjbCBpbnN0
YW5jZW9mIElBU1RTaW1wbGVEZWNsYXJhdGlvbiApew0KLSAgICAgICAgICAgIAlJQmluZGluZyBi
aW5kaW5nID0gbnVsbDsNCi0JCQkJSUFTVERlY2xTcGVjaWZpZXIgZGVjbFNwZWMgPSAoKElBU1RT
aW1wbGVEZWNsYXJhdGlvbikgZGVjbCkuZ2V0RGVjbFNwZWNpZmllcigpOw0KLQkJCQlpZiggZGVj
bFNwZWMgaW5zdGFuY2VvZiBJQ1BQQVNUQ29tcG9zaXRlVHlwZVNwZWNpZmllciApew0KLQkJCQkJ
YmluZGluZyA9ICgoSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIpZGVjbFNwZWMpLmdldE5h
bWUoKS5yZXNvbHZlQmluZGluZygpOw0KLQkJCQl9IGVsc2UgaWYoIGRlY2xTcGVjIGluc3RhbmNl
b2YgSUNQUEFTVEVsYWJvcmF0ZWRUeXBlU3BlY2lmaWVyICYmDQotCQkJCQkJICAgKChJQVNUU2lt
cGxlRGVjbGFyYXRpb24pZGVjbCkuZ2V0RGVjbGFyYXRvcnMoKS5sZW5ndGggPT0gMCApDQotCQkJ
CXsNCi0JCQkJCWJpbmRpbmcgPSAoKElDUFBBU1RFbGFib3JhdGVkVHlwZVNwZWNpZmllcilkZWNs
U3BlYykuZ2V0TmFtZSgpLnJlc29sdmVCaW5kaW5nKCk7DQotCQkJCX0NCi0JCQkJaWYoIGJpbmRp
bmcgaW5zdGFuY2VvZiBJQ1BQQ2xhc3NUeXBlICkNCi0JCQkJCXJlc3VsdCA9IChJQ1BQQ2xhc3NU
eXBlW10pQXJyYXlVdGlsLmFwcGVuZCggSUNQUENsYXNzVHlwZS5jbGFzcywgcmVzdWx0LCBiaW5k
aW5nICk7DQotICAgICAgICAgICAgfSANCi0gICAgICAgIH0NCi0JCXJldHVybiAoSUNQUENsYXNz
VHlwZVtdKSBBcnJheVV0aWwudHJpbSggSUNQUENsYXNzVHlwZS5jbGFzcywgcmVzdWx0ICk7DQor
CQlyZXR1cm4gbWl4aW4uZ2V0TmVzdGVkQ2xhc3NlcygpOw0KKwl9DQorDQorCXB1YmxpYyBJRmll
bGQgZmluZEZpZWxkKFN0cmluZyBuYW1lKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCisJCXJldHVy
biBtaXhpbi5maW5kRmllbGQobmFtZSk7DQogCX0NCiAJDQotCXB1YmxpYyBJTGlua2FnZSBnZXRM
aW5rYWdlKCkgew0KLQkJcmV0dXJuIExpbmthZ2UuQ1BQX0xJTktBR0U7DQorCXB1YmxpYyBPYmpl
Y3QgY2xvbmUoKSB7DQorCQl0cnkgew0KKwkJCXJldHVybiBzdXBlci5jbG9uZSgpOw0KKwkJfSBj
YXRjaCAoQ2xvbmVOb3RTdXBwb3J0ZWRFeGNlcHRpb24gZSkgew0KKwkJfQ0KKwkJcmV0dXJuIG51
bGw7DQogCX0NCiB9DQpJbmRleDogcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3Jl
L2RvbS9wYXJzZXIvY3BwL0lDUFBJbnRlcm5hbENsYXNzVHlwZS5qYXZhDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvdG9vbHMvb3JnLmVjbGlwc2UuY2R0L2FsbC9vcmcuZWNsaXBzZS5j
ZHQuY29yZS9wYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9j
cHAvSUNQUEludGVybmFsQ2xhc3NUeXBlLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjIN
CmRpZmYgLXUgLXIxLjIgSUNQUEludGVybmFsQ2xhc3NUeXBlLmphdmENCi0tLSBwYXJzZXIvb3Jn
L2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvSUNQUEludGVybmFsQ2xh
c3NUeXBlLmphdmEJMjMgSnVuIDIwMDUgMTY6MDI6MTEgLTAwMDAJMS4yDQorKysgcGFyc2VyL29y
Zy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3JlL2RvbS9wYXJzZXIvY3BwL0lDUFBJbnRlcm5hbENs
YXNzVHlwZS5qYXZhCTkgSmFuIDIwMDggMTU6NDI6MTMgLTAwMDANCkBAIC0xMywxMSArMTMsMTIg
QEANCiAgKi8NCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmNkdC5pbnRlcm5hbC5jb3JlLmRvbS5wYXJz
ZXIuY3BwOw0KIA0KK2ltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LkRPTUV4Y2Vw
dGlvbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUE1ldGhv
ZDsNCiANCiAvKioNCiAgKiBAYXV0aG9yIGFuaWVmZXINCiAgKi8NCiBwdWJsaWMgaW50ZXJmYWNl
IElDUFBJbnRlcm5hbENsYXNzVHlwZSBleHRlbmRzIElDUFBJbnRlcm5hbEJpbmRpbmcgew0KLQlw
dWJsaWMgSUNQUE1ldGhvZCBbXSBnZXRDb252ZXJzaW9uT3BlcmF0b3JzKCk7DQorCXB1YmxpYyBJ
Q1BQTWV0aG9kIFtdIGdldENvbnZlcnNpb25PcGVyYXRvcnMoKSB0aHJvd3MgRE9NRXhjZXB0aW9u
Ow0KIH0NCkluZGV4OiBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3Bh
cnNlci9jcHAvQ1BQQ2xhc3NJbnN0YW5jZS5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2
c3Jvb3QvdG9vbHMvb3JnLmVjbGlwc2UuY2R0L2FsbC9vcmcuZWNsaXBzZS5jZHQuY29yZS9wYXJz
ZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ1BQQ2xhc3NJ
bnN0YW5jZS5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xOA0KZGlmZiAtdSAtcjEuMTgg
Q1BQQ2xhc3NJbnN0YW5jZS5qYXZhDQotLS0gcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5h
bC9jb3JlL2RvbS9wYXJzZXIvY3BwL0NQUENsYXNzSW5zdGFuY2UuamF2YQkyNiBBcHIgMjAwNyAw
MTozNDozNCAtMDAwMAkxLjE4DQorKysgcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9j
b3JlL2RvbS9wYXJzZXIvY3BwL0NQUENsYXNzSW5zdGFuY2UuamF2YQk5IEphbiAyMDA4IDE1OjQy
OjEzIC0wMDAwDQpAQCAtOCwxMCArOCw4IEBADQogICogQ29udHJpYnV0b3JzOg0KICAqIElCTSAt
IEluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbg0KICAqIEJyeWFuIFdpbGtpbnNvbiAoUU5Y
KQ0KKyAqIEFuZHJldyBGZXJndXNvbiAoU3ltYmlhbikNCiAgKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ki8NCi0vKg0KLSAqIENyZWF0ZWQgb24gTWFyIDI4LCAyMDA1DQotICovDQogcGFja2FnZSBvcmcu
ZWNsaXBzZS5jZHQuaW50ZXJuYWwuY29yZS5kb20ucGFyc2VyLmNwcDsNCiANCiBpbXBvcnQgb3Jn
LmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5ET01FeGNlcHRpb247DQpAQCAtMzIsMTQgKzMwLDE1
IEBADQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBUZW1wbGF0
ZUluc3RhbmNlOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5wYXJzZXIudXRpbC5BcnJh
eVV0aWw7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLnBhcnNlci51dGlsLk9iamVjdE1h
cDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmludGVybmFsLmNvcmUuZG9tLnBhcnNlci5BU1RJ
bnRlcm5hbDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmludGVybmFsLmNvcmUuaW5kZXguSUlu
ZGV4VHlwZTsNCiANCiAvKioNCiAgKiBAYXV0aG9yIGFuaWVmZXINCiAgKi8NCi1wdWJsaWMgY2xh
c3MgQ1BQQ2xhc3NJbnN0YW5jZSBleHRlbmRzIENQUEluc3RhbmNlIGltcGxlbWVudHMgSUNQUENs
YXNzVHlwZSwgSUNQUEludGVybmFsQmluZGluZyB7DQorcHVibGljIGNsYXNzIENQUENsYXNzSW5z
dGFuY2UgZXh0ZW5kcyBDUFBJbnN0YW5jZSBpbXBsZW1lbnRzIElDUFBDbGFzc1R5cGUsIElDUFBJ
bnRlcm5hbENsYXNzVHlwZSB7DQogCXByaXZhdGUgQ1BQQ2xhc3NTcGVjaWFsaXphdGlvblNjb3Bl
IGluc3RhbmNlU2NvcGU7DQotCQ0KKw0KIAkvKioNCiAJICogQHBhcmFtIGRlY2wNCiAJICogQHBh
cmFtIGFyZ3MNCkBAIC01OSwxNSArNTgsMTUgQEANCiAJCQlJQ1BQQmFzZSBbXSBiaW5kaW5ncyA9
IGNscy5nZXRCYXNlcygpOw0KIAkJCWZvciAoaW50IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3Ro
OyBpKyspIHsNCiAJCQkJSUNQUEJhc2Ugc3BlY0JpbmRpbmcgPSAoSUNQUEJhc2UpICgoSUNQUElu
dGVybmFsQmFzZSliaW5kaW5nc1tpXSkuY2xvbmUoKTsNCi0gICAgCQkgICAgSUJpbmRpbmcgYmFz
ZSA9IGJpbmRpbmdzW2ldLmdldEJhc2VDbGFzcygpOw0KLSAgICAJCSAgICBpZiAoYmFzZSBpbnN0
YW5jZW9mIElUeXBlKSB7DQotICAgIAkJICAgIAlJVHlwZSBzcGVjQmFzZSA9IENQUFRlbXBsYXRl
cy5pbnN0YW50aWF0ZVR5cGUoKElUeXBlKSBiYXNlLCBhcmd1bWVudE1hcCk7DQotICAgIAkJICAg
IAlzcGVjQmFzZSA9IENQUFNlbWFudGljcy5nZXRVbHRpbWF0ZVR5cGUoc3BlY0Jhc2UsIGZhbHNl
KTsNCi0gICAgCQkgICAgCWlmIChzcGVjQmFzZSBpbnN0YW5jZW9mIElCaW5kaW5nKSB7DQotICAg
IAkJICAgIAkJKChJQ1BQSW50ZXJuYWxCYXNlKXNwZWNCaW5kaW5nKS5zZXRCYXNlQ2xhc3MoKElC
aW5kaW5nKXNwZWNCYXNlKTsNCi0gICAgCQkgICAgCX0NCi0gICAgCQkgICAgCXJlc3VsdCA9IChJ
Q1BQQmFzZVtdKSBBcnJheVV0aWwuYXBwZW5kKElDUFBCYXNlLmNsYXNzLCByZXN1bHQsIHNwZWNC
aW5kaW5nKTsNCi0gICAgCQkgICAgfQ0KKwkJCQlJQmluZGluZyBiYXNlID0gYmluZGluZ3NbaV0u
Z2V0QmFzZUNsYXNzKCk7DQorCQkJCWlmIChiYXNlIGluc3RhbmNlb2YgSVR5cGUpIHsNCisJCQkJ
CUlUeXBlIHNwZWNCYXNlID0gQ1BQVGVtcGxhdGVzLmluc3RhbnRpYXRlVHlwZSgoSVR5cGUpIGJh
c2UsIGFyZ3VtZW50TWFwKTsNCisJCQkJCXNwZWNCYXNlID0gQ1BQU2VtYW50aWNzLmdldFVsdGlt
YXRlVHlwZShzcGVjQmFzZSwgZmFsc2UpOw0KKwkJCQkJaWYgKHNwZWNCYXNlIGluc3RhbmNlb2Yg
SUJpbmRpbmcpIHsNCisJCQkJCQkoKElDUFBJbnRlcm5hbEJhc2Upc3BlY0JpbmRpbmcpLnNldEJh
c2VDbGFzcygoSUJpbmRpbmcpc3BlY0Jhc2UpOw0KKwkJCQkJfQ0KKwkJCQkJcmVzdWx0ID0gKElD
UFBCYXNlW10pIEFycmF5VXRpbC5hcHBlbmQoSUNQUEJhc2UuY2xhc3MsIHJlc3VsdCwgc3BlY0Jp
bmRpbmcpOw0KKwkJCQl9DQogCQkJfQ0KIAkJCXJldHVybiAoSUNQUEJhc2VbXSkgQXJyYXlVdGls
LnRyaW0oSUNQUEJhc2UuY2xhc3MsIHJlc3VsdCk7DQogCQl9DQpAQCAtMTcyLDQyICsxNzEsNTEg
QEANCiAJCXJldHVybiBuZXcgQ1BQQ2xhc3NUeXBlLkNQUENsYXNzVHlwZURlbGVnYXRlKCBuYW1l
LCB0aGlzICk7DQogCX0NCiANCi0gICAgLyogKG5vbi1KYXZhZG9jKQ0KLSAgICAgKiBAc2VlIG9y
Zy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSVR5cGUjaXNTYW1lVHlwZShvcmcuZWNsaXBzZS5j
ZHQuY29yZS5kb20uYXN0LklUeXBlKQ0KLSAgICAgKi8NCi0gICAgcHVibGljIGJvb2xlYW4gaXNT
YW1lVHlwZSggSVR5cGUgdHlwZSApIHsNCi0gICAgICAgIGlmKCB0eXBlID09IHRoaXMgKQ0KLSAg
ICAgICAgICAgIHJldHVybiB0cnVlOw0KLSAgICAgICAgaWYoIHR5cGUgaW5zdGFuY2VvZiBJVHlw
ZWRlZiB8fCB0eXBlIGluc3RhbmNlb2YgSUluZGV4VHlwZSApDQotICAgICAgICAgICAgcmV0dXJu
IHR5cGUuaXNTYW1lVHlwZSggdGhpcyApOw0KLSAgICAgICAgaWYoIHR5cGUgaW5zdGFuY2VvZiBJ
Q1BQRGVmZXJyZWRUZW1wbGF0ZUluc3RhbmNlICYmIHR5cGUgaW5zdGFuY2VvZiBJQ1BQQ2xhc3NU
eXBlICkNCi0gICAgICAgIAlyZXR1cm4gdHlwZS5pc1NhbWVUeXBlKCB0aGlzICk7ICAvL3RoZSBD
UFBEZWZlcnJlZENsYXNzSW5zdGFuY2UgaGFzIHNvbWUgZnV6emluZXNzDQotICAgICAgICANCi0g
ICAgICAgIGlmKCB0eXBlIGluc3RhbmNlb2YgSUNQUFRlbXBsYXRlSW5zdGFuY2UgKXsNCi0gICAg
ICAgIAlJQ1BQQ2xhc3NUeXBlIGN0MT0gKElDUFBDbGFzc1R5cGUpIGdldFNwZWNpYWxpemVkQmlu
ZGluZygpOw0KLSAgICAgICAgCUlDUFBDbGFzc1R5cGUgY3QyPSAoSUNQUENsYXNzVHlwZSkgKChJ
Q1BQVGVtcGxhdGVJbnN0YW5jZSl0eXBlKS5nZXRUZW1wbGF0ZURlZmluaXRpb24oKTsNCi0gICAg
ICAgIAlpZighY3QxLmlzU2FtZVR5cGUoY3QyKSkNCi0gICAgICAgIAkJcmV0dXJuIGZhbHNlOw0K
LSAgICAgICAgCQ0KLSAgICAgICAgCU9iamVjdE1hcCBtMSA9IGdldEFyZ3VtZW50TWFwKCksIG0y
ID0gKChJQ1BQVGVtcGxhdGVJbnN0YW5jZSl0eXBlKS5nZXRBcmd1bWVudE1hcCgpOw0KLSAgICAg
ICAgCWlmKCBtMSA9PSBudWxsIHx8IG0yID09IG51bGwgfHwgbTEuc2l6ZSgpICE9IG0yLnNpemUo
KSkNCi0gICAgICAgIAkJcmV0dXJuIGZhbHNlOw0KLSAgICAgICAgCWZvciggaW50IGkgPSAwOyBp
IDwgbTEuc2l6ZSgpOyBpKysgKXsNCi0gICAgICAgIAkJSVR5cGUgdDEgPSAoSVR5cGUpIG0xLmdl
dEF0KCBpICk7DQotICAgICAgICAJCUlUeXBlIHQyID0gKElUeXBlKSBtMi5nZXRBdCggaSApOw0K
LSAgICAgICAgCQlpZiggdDEgPT0gbnVsbCB8fCAhIHQxLmlzU2FtZVR5cGUoIHQyICkgKQ0KLSAg
ICAgICAgCQkJcmV0dXJuIGZhbHNlOw0KLSAgICAgICAgCX0NCi0gICAgICAgIAlyZXR1cm4gdHJ1
ZTsNCi0gICAgICAgIH0NCisJLyogKG5vbi1KYXZhZG9jKQ0KKwkgKiBAc2VlIG9yZy5lY2xpcHNl
LmNkdC5jb3JlLmRvbS5hc3QuSVR5cGUjaXNTYW1lVHlwZShvcmcuZWNsaXBzZS5jZHQuY29yZS5k
b20uYXN0LklUeXBlKQ0KKwkgKi8NCisJcHVibGljIGJvb2xlYW4gaXNTYW1lVHlwZSggSVR5cGUg
dHlwZSApIHsNCisJCWlmKCB0eXBlID09IHRoaXMgKQ0KKwkJCXJldHVybiB0cnVlOw0KKwkJaWYo
IHR5cGUgaW5zdGFuY2VvZiBJVHlwZWRlZiB8fCB0eXBlIGluc3RhbmNlb2YgSUluZGV4VHlwZSAp
DQorCQkJcmV0dXJuIHR5cGUuaXNTYW1lVHlwZSggdGhpcyApOw0KKwkJaWYoIHR5cGUgaW5zdGFu
Y2VvZiBJQ1BQRGVmZXJyZWRUZW1wbGF0ZUluc3RhbmNlICYmIHR5cGUgaW5zdGFuY2VvZiBJQ1BQ
Q2xhc3NUeXBlICkNCisJCQlyZXR1cm4gdHlwZS5pc1NhbWVUeXBlKCB0aGlzICk7ICAvL3RoZSBD
UFBEZWZlcnJlZENsYXNzSW5zdGFuY2UgaGFzIHNvbWUgZnV6emluZXNzDQorDQorCQlpZiggdHlw
ZSBpbnN0YW5jZW9mIElDUFBUZW1wbGF0ZUluc3RhbmNlICl7DQorCQkJSUNQUENsYXNzVHlwZSBj
dDE9IChJQ1BQQ2xhc3NUeXBlKSBnZXRTcGVjaWFsaXplZEJpbmRpbmcoKTsNCisJCQlJQ1BQQ2xh
c3NUeXBlIGN0Mj0gKElDUFBDbGFzc1R5cGUpICgoSUNQUFRlbXBsYXRlSW5zdGFuY2UpdHlwZSku
Z2V0VGVtcGxhdGVEZWZpbml0aW9uKCk7DQorCQkJaWYoIWN0MS5pc1NhbWVUeXBlKGN0MikpDQor
CQkJCXJldHVybiBmYWxzZTsNCisNCisJCQlPYmplY3RNYXAgbTEgPSBnZXRBcmd1bWVudE1hcCgp
LCBtMiA9ICgoSUNQUFRlbXBsYXRlSW5zdGFuY2UpdHlwZSkuZ2V0QXJndW1lbnRNYXAoKTsNCisJ
CQlpZiggbTEgPT0gbnVsbCB8fCBtMiA9PSBudWxsIHx8IG0xLnNpemUoKSAhPSBtMi5zaXplKCkp
DQorCQkJCXJldHVybiBmYWxzZTsNCisJCQlmb3IoIGludCBpID0gMDsgaSA8IG0xLnNpemUoKTsg
aSsrICl7DQorCQkJCUlUeXBlIHQxID0gKElUeXBlKSBtMS5nZXRBdCggaSApOw0KKwkJCQlJVHlw
ZSB0MiA9IChJVHlwZSkgbTIuZ2V0QXQoIGkgKTsNCisJCQkJaWYoIHQxID09IG51bGwgfHwgISB0
MS5pc1NhbWVUeXBlKCB0MiApICkNCisJCQkJCXJldHVybiBmYWxzZTsNCisJCQl9DQorCQkJcmV0
dXJuIHRydWU7DQorCQl9DQogDQotICAgICAgICByZXR1cm4gZmFsc2U7DQotICAgIH0NCisJCXJl
dHVybiBmYWxzZTsNCisJfQ0KIA0KIAlwdWJsaWMgSUNQUENsYXNzVHlwZVtdIGdldE5lc3RlZENs
YXNzZXMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCiAJCXJldHVybiBJQ1BQQ2xhc3NUeXBlLkVN
UFRZX0NMQVNTX0FSUkFZOw0KIAl9DQotCQ0KKw0KKwlwdWJsaWMgSUNQUE1ldGhvZFtdIGdldENv
bnZlcnNpb25PcGVyYXRvcnMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCisJCUlTY29wZSBzY29w
ZSA9IGdldENvbXBvc2l0ZVNjb3BlKCk7DQorCQlpZiAoc2NvcGUgaW5zdGFuY2VvZiBDUFBDbGFz
c1NwZWNpYWxpemF0aW9uU2NvcGUpIHsNCisJCQlpZiAoQVNUSW50ZXJuYWwuaXNGdWxseUNhY2hl
ZChzY29wZSkpDQorCQkJCXJldHVybiAoKENQUENsYXNzU3BlY2lhbGl6YXRpb25TY29wZSlzY29w
ZSkuZ2V0Q29udmVyc2lvbk9wZXJhdG9ycygpOw0KKwkJfQ0KKwkJcmV0dXJuIElDUFBNZXRob2Qu
RU1QVFlfQ1BQTUVUSE9EX0FSUkFZOw0KKwl9DQorDQogCXB1YmxpYyBib29sZWFuIGVxdWFscyhP
YmplY3Qgb2JqKSB7DQogCQlyZXR1cm4gb2JqIGluc3RhbmNlb2YgSUNQUENsYXNzVHlwZSA/IGlz
U2FtZVR5cGUoKElDUFBDbGFzc1R5cGUpb2JqKSA6IGZhbHNlOw0KIAl9DQpJbmRleDogcGFyc2Vy
L29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3JlL2RvbS9wYXJzZXIvY3BwL0NsYXNzVHlwZU1p
eGluLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2lu
dGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ2xhc3NUeXBlTWl4aW4uamF2YQ0KZGlmZiAtTiBw
YXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2NvcmUvZG9tL3BhcnNlci9jcHAvQ2xhc3NU
eXBlTWl4aW4uamF2YQ0KLS0tIC9kZXYvbnVsbAkxIEphbiAxOTcwIDAwOjAwOjAwIC0wMDAwDQor
KysgcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3JlL2RvbS9wYXJzZXIvY3BwL0Ns
YXNzVHlwZU1peGluLmphdmEJMSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSw0
MDcgQEANCisvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KKyAqIENvcHlyaWdodCAoYykgMjAwNCwg
MjAwNyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4NCisgKiBBbGwgcmlnaHRzIHJlc2VydmVk
LiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzDQorICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wDQorICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBh
dmFpbGFibGUgYXQNCisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRt
bA0KKyAqDQorICogQ29udHJpYnV0b3JzOg0KKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0
aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24NCisgKiAgICAgTWFya3VzIFNjaG9ybiAoV2luZCBS
aXZlciBTeXN0ZW1zKQ0KKyAqICAgICBCcnlhbiBXaWxraW5zb24gKFFOWCkNCisgKiAgICAgU2Vy
Z2V5IFByaWdvZ2luIChHb29nbGUpDQorICogICAgIEFuZHJ3ZSBGZXJndXNvbiAoU3ltYmlhbikN
CisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKi8NCitwYWNrYWdlIG9yZy5lY2xpcHNlLmNkdC5pbnRl
cm5hbC5jb3JlLmRvbS5wYXJzZXIuY3BwOw0KKw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29y
ZS5kb20uYXN0LkRPTUV4Y2VwdGlvbjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9t
LmFzdC5JQVNURGVjbFNwZWNpZmllcjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9t
LmFzdC5JQVNURGVjbGFyYXRpb247DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5h
c3QuSUFTVERlY2xhcmF0b3I7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3Qu
SUFTVEZ1bmN0aW9uRGVmaW5pdGlvbjsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9t
LmFzdC5JQVNUTmFtZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JQVNU
Tm9kZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5JQVNUU2ltcGxlRGVj
bGFyYXRpb247DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSUJpbmRpbmc7
DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuSUZpZWxkOw0KK2ltcG9ydCBv
cmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LklQcm9ibGVtQmluZGluZzsNCitpbXBvcnQgb3Jn
LmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZp
ZXI7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBBU1RDb252
ZXJzaW9uTmFtZTsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQ
UEFTVERlY2xTcGVjaWZpZXI7DQoraW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3Qu
Y3BwLklDUFBBU1RFbGFib3JhdGVkVHlwZVNwZWNpZmllcjsNCitpbXBvcnQgb3JnLmVjbGlwc2Uu
Y2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVFRlbXBsYXRlRGVjbGFyYXRpb247DQoraW1wb3J0
IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBBU1RVc2luZ0RlY2xhcmF0aW9u
Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQmFzZTsNCitp
bXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUENsYXNzU2NvcGU7DQor
aW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBDbGFzc1R5cGU7DQor
aW1wb3J0IG9yZy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBDb25zdHJ1Y3RvcjsN
CitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEZpZWxkOw0KK2lt
cG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQTWV0aG9kOw0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQVXNpbmdEZWNsYXJhdGlvbjsN
CitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0LmNvcmUuZG9tLmFzdC5jcHAuSUNQUEFTVENvbXBvc2l0
ZVR5cGVTcGVjaWZpZXIuSUNQUEFTVEJhc2VTcGVjaWZpZXI7DQoraW1wb3J0IG9yZy5lY2xpcHNl
LmNkdC5jb3JlLnBhcnNlci51dGlsLkFycmF5VXRpbDsNCitpbXBvcnQgb3JnLmVjbGlwc2UuY2R0
LmNvcmUucGFyc2VyLnV0aWwuT2JqZWN0U2V0Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5jZHQuaW50
ZXJuYWwuY29yZS5kb20ucGFyc2VyLkFTVEludGVybmFsOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5j
ZHQuaW50ZXJuYWwuY29yZS5kb20ucGFyc2VyLlByb2JsZW1CaW5kaW5nOw0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5jZHQuaW50ZXJuYWwuY29yZS5kb20ucGFyc2VyLmNwcC5DUFBDbGFzc1R5cGUuQ1BQ
Q2xhc3NUeXBlUHJvYmxlbTsNCisNCisvKioNCisgKiBIb2xkcyBjb21tb24gaW1wbGVtZW50YXRp
b24gb2YgbWV0aG9kcyBmb3IgSUNQUENsYXNzVHlwZSBpbXBsZW1lbnRhdGlvbnMgdGhhdCBoYXZl
DQorICogYSBjb3JyZXNwb25kaW5nIHRleHR1YWwgZGVmaW5pdGlvbiBpbiB0aGUgc291cmNlIGNv
ZGUuIFdlIHNpbXVsYXRlIG11bHRpcGxlIGluaGVyaXRhbmNlDQorICogd2l0aCBhIGRlbGVnYXRl
Lg0KKyAqIA0KKyAqICBAc2VlIENQUENsYXNzVHlwZQ0KKyAqICBAc2VlIENQUENsYXNzVGVtcGxh
dGUNCisgKi8NCitjbGFzcyBDbGFzc1R5cGVNaXhpbiB7DQorCXByaXZhdGUgSUNQUEludGVybmFs
Q2xhc3NUeXBlTWl4aW5Ib3N0IGhvc3Q7DQorDQorCXB1YmxpYyBDbGFzc1R5cGVNaXhpbihJQ1BQ
SW50ZXJuYWxDbGFzc1R5cGVNaXhpbkhvc3QgaG9zdCkgew0KKwkJdGhpcy5ob3N0PSBob3N0Ow0K
Kwl9DQorCQ0KKwlwdWJsaWMgSUJpbmRpbmdbXSBnZXRGcmllbmRzKCkgew0KKwkJaWYoIGhvc3Qu
Z2V0RGVmaW5pdGlvbigpID09IG51bGwgKXsNCisJCQlob3N0LmNoZWNrRm9yRGVmaW5pdGlvbigp
Ow0KKwkJCWlmKCAgaG9zdC5nZXREZWZpbml0aW9uKCkgPT0gbnVsbCApew0KKwkJCQlJQVNUTm9k
ZVtdIGRlY2xhcmF0aW9ucz0gaG9zdC5nZXREZWNsYXJhdGlvbnMoKTsNCisJCQkJSUFTVE5vZGUg
bm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkg
PyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KKwkJCQlyZXR1cm4gbmV3IElCaW5kaW5nIFtdIHsg
bmV3IFByb2JsZW1CaW5kaW5nKCBub2RlLCBJUHJvYmxlbUJpbmRpbmcuU0VNQU5USUNfREVGSU5J
VElPTl9OT1RfRk9VTkQsIGhvc3QuZ2V0TmFtZUNoYXJBcnJheSgpICkgfTsNCisJCQl9DQorCQl9
DQorCQlPYmplY3RTZXQgcmVzdWx0U2V0ID0gbmV3IE9iamVjdFNldCgyKTsNCisJCUlBU1REZWNs
YXJhdGlvbiBbXSBtZW1iZXJzID0gaG9zdC5nZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCkuZ2V0
TWVtYmVycygpOw0KKwkJZm9yKCBpbnQgaSA9IDA7IGkgPCBtZW1iZXJzLmxlbmd0aDsgaSsrICl7
DQorCQkJSUFTVERlY2xhcmF0aW9uIGRlY2wgPSBtZW1iZXJzW2ldOw0KKwkJCXdoaWxlKCBkZWNs
IGluc3RhbmNlb2YgSUNQUEFTVFRlbXBsYXRlRGVjbGFyYXRpb24gKQ0KKwkJCQlkZWNsID0gKChJ
Q1BQQVNUVGVtcGxhdGVEZWNsYXJhdGlvbilkZWNsKS5nZXREZWNsYXJhdGlvbigpOw0KKw0KKwkJ
CWlmKCBkZWNsIGluc3RhbmNlb2YgSUFTVFNpbXBsZURlY2xhcmF0aW9uICl7DQorCQkJCUlDUFBB
U1REZWNsU3BlY2lmaWVyIGRlY2xTcGVjID0gKElDUFBBU1REZWNsU3BlY2lmaWVyKSAoKElBU1RT
aW1wbGVEZWNsYXJhdGlvbilkZWNsKS5nZXREZWNsU3BlY2lmaWVyKCk7DQorCQkJCWlmKCBkZWNs
U3BlYy5pc0ZyaWVuZCgpICl7DQorCQkJCQlJQVNURGVjbGFyYXRvciBbXSBkdG9ycyA9ICgoSUFT
VFNpbXBsZURlY2xhcmF0aW9uKWRlY2wpLmdldERlY2xhcmF0b3JzKCk7DQorCQkJCQlpZiggZGVj
bFNwZWMgaW5zdGFuY2VvZiBJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIgJiYgZHRvcnMu
bGVuZ3RoID09IDAgKXsNCisJCQkJCQlyZXN1bHRTZXQucHV0KCAoKElDUFBBU1RFbGFib3JhdGVk
VHlwZVNwZWNpZmllcilkZWNsU3BlYykuZ2V0TmFtZSgpLnJlc29sdmVCaW5kaW5nKCkgKTsNCisJ
CQkJCX0gZWxzZSB7DQorCQkJCQkJZm9yKCBpbnQgaiA9IDA7IGogPCBkdG9ycy5sZW5ndGg7IGor
KyApew0KKwkJCQkJCQlpZiggZHRvcnNbal0gPT0gbnVsbCApIGJyZWFrOw0KKwkJCQkJCQlyZXN1
bHRTZXQucHV0KCBkdG9yc1tqXS5nZXROYW1lKCkucmVzb2x2ZUJpbmRpbmcoKSApOw0KKwkJCQkJ
CX0gICAgDQorCQkJCQl9DQorCQkJCX0NCisJCQl9IGVsc2UgaWYoIGRlY2wgaW5zdGFuY2VvZiBJ
QVNURnVuY3Rpb25EZWZpbml0aW9uICl7DQorCQkJCUlDUFBBU1REZWNsU3BlY2lmaWVyIGRlY2xT
cGVjID0gKElDUFBBU1REZWNsU3BlY2lmaWVyKSAoKElBU1RGdW5jdGlvbkRlZmluaXRpb24pZGVj
bCkuZ2V0RGVjbFNwZWNpZmllcigpOw0KKwkJCQlpZiggZGVjbFNwZWMuaXNGcmllbmQoKSApew0K
KwkJCQkJSUFTVERlY2xhcmF0b3IgZHRvciA9ICgoSUFTVEZ1bmN0aW9uRGVmaW5pdGlvbilkZWNs
KS5nZXREZWNsYXJhdG9yKCk7DQorCQkJCQlyZXN1bHRTZXQucHV0KCBkdG9yLmdldE5hbWUoKS5y
ZXNvbHZlQmluZGluZygpICk7DQorCQkJCX0NCisNCisJCQl9DQorCQl9DQorDQorCQlyZXR1cm4g
KElCaW5kaW5nW10pIHJlc3VsdFNldC5rZXlBcnJheSggSUJpbmRpbmcuY2xhc3MgKTsNCisJfQ0K
Kw0KKwlwdWJsaWMgSUNQUE1ldGhvZFtdIGdldENvbnZlcnNpb25PcGVyYXRvcnMoKSB0aHJvd3Mg
RE9NRXhjZXB0aW9uIHsNCisJCWlmKCBob3N0LmdldERlZmluaXRpb24oKSA9PSBudWxsICl7DQor
CQkJaG9zdC5jaGVja0ZvckRlZmluaXRpb24oKTsNCisJCQlpZiggIGhvc3QuZ2V0RGVmaW5pdGlv
bigpID09IG51bGwgKXsNCisJCQkJSUFTVE5vZGVbXSBkZWNsYXJhdGlvbnM9IGhvc3QuZ2V0RGVj
bGFyYXRpb25zKCk7DQorCQkJCUlBU1ROb2RlIG5vZGUgPSAoZGVjbGFyYXRpb25zICE9IG51bGwg
JiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApID8gZGVjbGFyYXRpb25zWzBdIDogbnVsbDsNCisJ
CQkJcmV0dXJuIG5ldyBJQ1BQTWV0aG9kW10geyBuZXcgQ1BQTWV0aG9kLkNQUE1ldGhvZFByb2Js
ZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05PVF9GT1VORCwg
aG9zdC5nZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KKwkJCX0NCisJCX0NCisJCUlCaW5kaW5nIGJp
bmRpbmcgPSBudWxsOw0KKwkJSUNQUE1ldGhvZCBbXSByZXN1bHQgPSBudWxsOw0KKw0KKwkJSUFT
VERlY2xhcmF0aW9uIFtdIGRlY2xzID0gaG9zdC5nZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCku
Z2V0TWVtYmVycygpOw0KKwkJSUFTVE5hbWUgbmFtZSA9IG51bGw7DQorCQlmb3IgKCBpbnQgaSA9
IDA7IGkgPCBkZWNscy5sZW5ndGg7IGkrKyApIHsNCisJCQlpZiggZGVjbHNbaV0gaW5zdGFuY2Vv
ZiBJQVNUU2ltcGxlRGVjbGFyYXRpb24gKXsNCisJCQkJSUFTVERlY2xhcmF0b3IgW10gZHRvcnMg
PSAoKElBU1RTaW1wbGVEZWNsYXJhdGlvbilkZWNsc1tpXSkuZ2V0RGVjbGFyYXRvcnMoKTsNCisJ
CQkJZm9yICggaW50IGogPSAwOyBqIDwgZHRvcnMubGVuZ3RoOyBqKysgKSB7DQorCQkJCQluYW1l
ID0gQ1BQVmlzaXRvci5nZXRNb3N0TmVzdGVkRGVjbGFyYXRvciggZHRvcnNbal0gKS5nZXROYW1l
KCk7DQorCQkJCQlpZiggbmFtZSBpbnN0YW5jZW9mIElDUFBBU1RDb252ZXJzaW9uTmFtZSApew0K
KwkJCQkJCWJpbmRpbmcgPSBuYW1lLnJlc29sdmVCaW5kaW5nKCk7DQorCQkJCQkJaWYoIGJpbmRp
bmcgaW5zdGFuY2VvZiBJQ1BQTWV0aG9kKQ0KKwkJCQkJCQlyZXN1bHQgPSAoSUNQUE1ldGhvZFtd
KSBBcnJheVV0aWwuYXBwZW5kKCBJQ1BQTWV0aG9kLmNsYXNzLCByZXN1bHQsIGJpbmRpbmcgKTsJ
DQorCQkJCQl9DQorCQkJCX0NCisJCQl9IGVsc2UgaWYoIGRlY2xzW2ldIGluc3RhbmNlb2YgSUFT
VEZ1bmN0aW9uRGVmaW5pdGlvbiApew0KKwkJCQlJQVNURGVjbGFyYXRvciBkdG9yID0gKChJQVNU
RnVuY3Rpb25EZWZpbml0aW9uKWRlY2xzW2ldKS5nZXREZWNsYXJhdG9yKCk7DQorCQkJCW5hbWUg
PSBDUFBWaXNpdG9yLmdldE1vc3ROZXN0ZWREZWNsYXJhdG9yKCBkdG9yICkuZ2V0TmFtZSgpOw0K
KwkJCQlpZiggbmFtZSBpbnN0YW5jZW9mIElDUFBBU1RDb252ZXJzaW9uTmFtZSApew0KKwkJCQkJ
YmluZGluZyA9IG5hbWUucmVzb2x2ZUJpbmRpbmcoKTsNCisJCQkJCWlmKCBiaW5kaW5nIGluc3Rh
bmNlb2YgSUNQUE1ldGhvZCApew0KKwkJCQkJCXJlc3VsdCA9IChJQ1BQTWV0aG9kW10pIEFycmF5
VXRpbC5hcHBlbmQoIElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCwgYmluZGluZyApOw0KKwkJCQkJ
fQ0KKwkJCQl9DQorCQkJfSANCisJCX0NCisNCisJCUlDUFBCYXNlIFtdIGJhc2VzID0gZ2V0QmFz
ZXMoKTsNCisJCWZvciAoIGludCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICkgew0KKwkJ
CUlDUFBDbGFzc1R5cGUgY2xzID0gbnVsbDsNCisJCQl0cnkgew0KKwkJCQlJQmluZGluZyBiID0g
YmFzZXNbaV0uZ2V0QmFzZUNsYXNzKCk7DQorCQkJCWlmKCBiIGluc3RhbmNlb2YgSUNQUENsYXNz
VHlwZSApDQorCQkJCQljbHMgPSAoSUNQUENsYXNzVHlwZSkgYjsNCisJCQl9IGNhdGNoIChET01F
eGNlcHRpb24gZSkgew0KKwkJCQljb250aW51ZTsNCisJCQl9DQorCQkJaWYoIGNscyBpbnN0YW5j
ZW9mIElDUFBJbnRlcm5hbENsYXNzVHlwZSApDQorCQkJCXJlc3VsdCA9IChJQ1BQTWV0aG9kW10p
IEFycmF5VXRpbC5hZGRBbGwoIElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCwgKChJQ1BQSW50ZXJu
YWxDbGFzc1R5cGUpY2xzKS5nZXRDb252ZXJzaW9uT3BlcmF0b3JzKCkgKTsNCisJCX0NCisJCXJl
dHVybiAoSUNQUE1ldGhvZFtdKSBBcnJheVV0aWwudHJpbSggSUNQUE1ldGhvZC5jbGFzcywgcmVz
dWx0ICk7DQorCX0NCisNCisJcHVibGljIElDUFBCYXNlIFtdIGdldEJhc2VzKCkgew0KKwkJaWYo
IGhvc3QuZ2V0RGVmaW5pdGlvbigpID09IG51bGwgKXsNCisJCQlob3N0LmNoZWNrRm9yRGVmaW5p
dGlvbigpOw0KKwkJCWlmKCAgaG9zdC5nZXREZWZpbml0aW9uKCkgPT0gbnVsbCApew0KKwkJCQlJ
QVNUTm9kZVtdIGRlY2xhcmF0aW9ucz0gaG9zdC5nZXREZWNsYXJhdGlvbnMoKTsNCisJCQkJSUFT
VE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3Ro
ID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KKwkJCQlyZXR1cm4gbmV3IElDUFBCYXNl
IFtdIHsgbmV3IENQUEJhc2VDbGF1c2UuQ1BQQmFzZVByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmlu
ZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05PVF9GT1VORCwgaG9zdC5nZXROYW1lQ2hhckFycmF5
KCkgKSB9Ow0KKwkJCX0NCisJCX0NCisJCUlDUFBBU1RCYXNlU3BlY2lmaWVyIFtdIGJhc2VzID0g
aG9zdC5nZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCkuZ2V0QmFzZVNwZWNpZmllcnMoKTsNCisJ
CWlmKCBiYXNlcy5sZW5ndGggPT0gMCApDQorCQkJcmV0dXJuIElDUFBCYXNlLkVNUFRZX0JBU0Vf
QVJSQVk7DQorDQorCQlJQ1BQQmFzZSBbXSBiaW5kaW5ncyA9IG5ldyBJQ1BQQmFzZVsgYmFzZXMu
bGVuZ3RoIF07DQorCQlmb3IoIGludCBpID0gMDsgaSA8IGJhc2VzLmxlbmd0aDsgaSsrICl7DQor
CQkJYmluZGluZ3NbaV0gPSBuZXcgQ1BQQmFzZUNsYXVzZSggYmFzZXNbaV0gKTsNCisJCX0NCisN
CisJCXJldHVybiBiaW5kaW5nczsgDQorCX0NCisNCisJcHVibGljIElDUFBNZXRob2RbXSBnZXRN
ZXRob2RzKCkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQlPYmplY3RTZXQgc2V0ID0gbmV3IE9i
amVjdFNldCg0KTsNCisJCXNldC5hZGRBbGwoZ2V0RGVjbGFyZWRNZXRob2RzKCkpOw0KKwkJSUNQ
UENsYXNzU2NvcGUgc2NvcGUgPSAoSUNQUENsYXNzU2NvcGUpIGhvc3QuZ2V0Q29tcG9zaXRlU2Nv
cGUoKTsNCisJCXNldC5hZGRBbGwoIHNjb3BlLmdldEltcGxpY2l0TWV0aG9kcygpICk7DQorCQlJ
Q1BQQmFzZSBbXSBiYXNlcyA9IGdldEJhc2VzKCk7DQorCQlmb3IgKCBpbnQgaSA9IDA7IGkgPCBi
YXNlcy5sZW5ndGg7IGkrKyApIHsNCisJCQlJQmluZGluZyBiID0gYmFzZXNbaV0uZ2V0QmFzZUNs
YXNzKCk7DQorCQkJaWYoIGIgaW5zdGFuY2VvZiBJQ1BQQ2xhc3NUeXBlICkNCisJCQkJc2V0LmFk
ZEFsbCggKChJQ1BQQ2xhc3NUeXBlKWIpLmdldE1ldGhvZHMoKSApOw0KKwkJfQ0KKwkJcmV0dXJu
IChJQ1BQTWV0aG9kW10pIHNldC5rZXlBcnJheSggSUNQUE1ldGhvZC5jbGFzcyApOw0KKwl9DQor
DQorDQorCXB1YmxpYyBJQ1BQRmllbGRbXSBnZXREZWNsYXJlZEZpZWxkcygpIHRocm93cyBET01F
eGNlcHRpb24gew0KKwkJaWYoIGhvc3QuZ2V0RGVmaW5pdGlvbigpID09IG51bGwgKXsNCisJCQlo
b3N0LmNoZWNrRm9yRGVmaW5pdGlvbigpOw0KKwkJCWlmKCAgaG9zdC5nZXREZWZpbml0aW9uKCkg
PT0gbnVsbCApew0KKwkJCQlJQVNUTm9kZVtdIGRlY2xhcmF0aW9ucz0gaG9zdC5nZXREZWNsYXJh
dGlvbnMoKTsNCisJCQkJSUFTVE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBk
ZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KKwkJCQly
ZXR1cm4gbmV3IElDUFBGaWVsZFtdIHsgbmV3IENQUEZpZWxkLkNQUEZpZWxkUHJvYmxlbSggbm9k
ZSwgSVByb2JsZW1CaW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5ELCBob3N0Lmdl
dE5hbWVDaGFyQXJyYXkoKSApIH07DQorCQkJfQ0KKwkJfQ0KKwkJSUJpbmRpbmcgYmluZGluZyA9
IG51bGw7DQorCQlJQ1BQRmllbGQgW10gcmVzdWx0ID0gbnVsbDsNCisNCisJCUlBU1REZWNsYXJh
dGlvbiBbXSBkZWNscyA9IGhvc3QuZ2V0Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpLmdldE1lbWJl
cnMoKTsNCisJCWZvciAoIGludCBpID0gMDsgaSA8IGRlY2xzLmxlbmd0aDsgaSsrICkgew0KKwkJ
CWlmKCBkZWNsc1tpXSBpbnN0YW5jZW9mIElBU1RTaW1wbGVEZWNsYXJhdGlvbiApew0KKwkJCQlJ
QVNURGVjbGFyYXRvciBbXSBkdG9ycyA9ICgoSUFTVFNpbXBsZURlY2xhcmF0aW9uKWRlY2xzW2ld
KS5nZXREZWNsYXJhdG9ycygpOw0KKwkJCQlmb3IgKCBpbnQgaiA9IDA7IGogPCBkdG9ycy5sZW5n
dGg7IGorKyApIHsNCisJCQkJCWJpbmRpbmcgPSBkdG9yc1tqXS5nZXROYW1lKCkucmVzb2x2ZUJp
bmRpbmcoKTsNCisJCQkJCWlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQUEZpZWxkICkNCisJCQkJ
CQlyZXN1bHQgPSAoSUNQUEZpZWxkW10pIEFycmF5VXRpbC5hcHBlbmQoIElDUFBGaWVsZC5jbGFz
cywgcmVzdWx0LCBiaW5kaW5nICk7DQorCQkJCX0NCisJCQl9IGVsc2UgaWYoIGRlY2xzW2ldIGlu
c3RhbmNlb2YgSUNQUEFTVFVzaW5nRGVjbGFyYXRpb24gKXsNCisJCQkJSUFTVE5hbWUgbiA9ICgo
SUNQUEFTVFVzaW5nRGVjbGFyYXRpb24pZGVjbHNbaV0pLmdldE5hbWUoKTsNCisJCQkJYmluZGlu
ZyA9IG4ucmVzb2x2ZUJpbmRpbmcoKTsNCisJCQkJaWYoIGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQ
VXNpbmdEZWNsYXJhdGlvbiApew0KKwkJCQkJSUJpbmRpbmcgW10gYnMgPSAoKElDUFBVc2luZ0Rl
Y2xhcmF0aW9uKWJpbmRpbmcpLmdldERlbGVnYXRlcygpOw0KKwkJCQkJZm9yICggaW50IGogPSAw
OyBqIDwgYnMubGVuZ3RoOyBqKysgKSB7DQorCQkJCQkJaWYoIGJzW2pdIGluc3RhbmNlb2YgSUNQ
UEZpZWxkICkNCisJCQkJCQkJcmVzdWx0ID0gKElDUFBGaWVsZFtdKSBBcnJheVV0aWwuYXBwZW5k
KCBJQ1BQRmllbGQuY2xhc3MsIHJlc3VsdCwgYnNbal0gKTsNCisJCQkJCX0NCisJCQkJfSBlbHNl
IGlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQUEZpZWxkICkgew0KKwkJCQkJcmVzdWx0ID0gKElD
UFBGaWVsZFtdKSBBcnJheVV0aWwuYXBwZW5kKCBJQ1BQRmllbGQuY2xhc3MsIHJlc3VsdCwgYmlu
ZGluZyApOw0KKwkJCQl9DQorCQkJfQ0KKwkJfQ0KKwkJcmV0dXJuIChJQ1BQRmllbGRbXSkgQXJy
YXlVdGlsLnRyaW0oIElDUFBGaWVsZC5jbGFzcywgcmVzdWx0ICk7DQorCX0NCisNCisJcHVibGlj
IElDUFBNZXRob2RbXSBnZXRBbGxEZWNsYXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9u
IHsNCisJCWlmKCBob3N0LmdldERlZmluaXRpb24oKSA9PSBudWxsICl7DQorCQkJaG9zdC5jaGVj
a0ZvckRlZmluaXRpb24oKTsNCisJCQlpZiggaG9zdC5nZXREZWZpbml0aW9uKCkgPT0gbnVsbCAp
ew0KKwkJCQlJQVNUTm9kZVtdIGRlY2xhcmF0aW9ucz0gaG9zdC5nZXREZWNsYXJhdGlvbnMoKTsN
CisJCQkJSUFTVE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlv
bnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KKwkJCQlyZXR1cm4gbmV3
IElDUFBNZXRob2QgW10geyBuZXcgQ1BQTWV0aG9kLkNQUE1ldGhvZFByb2JsZW0oIG5vZGUsIElQ
cm9ibGVtQmluZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05PVF9GT1VORCwgaG9zdC5nZXROYW1l
Q2hhckFycmF5KCkgKSB9Ow0KKwkJCX0NCisJCX0NCisNCisJCUlDUFBNZXRob2RbXSBtZXRob2Rz
ID0gZ2V0RGVjbGFyZWRNZXRob2RzKCk7DQorCQlJQ1BQQmFzZSBbXSBiYXNlcyA9IGdldEJhc2Vz
KCk7DQorCQlmb3IgKCBpbnQgaSA9IDA7IGkgPCBiYXNlcy5sZW5ndGg7IGkrKyApIHsNCisJCQlJ
QmluZGluZyBiID0gYmFzZXNbaV0uZ2V0QmFzZUNsYXNzKCk7DQorCQkJaWYoIGIgaW5zdGFuY2Vv
ZiBJQ1BQQ2xhc3NUeXBlICkNCisJCQkJbWV0aG9kcyA9IChJQ1BQTWV0aG9kW10pIEFycmF5VXRp
bC5hZGRBbGwoIElDUFBNZXRob2QuY2xhc3MsIG1ldGhvZHMsICgoSUNQUENsYXNzVHlwZSliKS5n
ZXRBbGxEZWNsYXJlZE1ldGhvZHMoKSApOw0KKwkJfQ0KKwkJcmV0dXJuIChJQ1BQTWV0aG9kW10p
IEFycmF5VXRpbC50cmltKCBJQ1BQTWV0aG9kLmNsYXNzLCBtZXRob2RzICk7DQorCX0NCisNCisJ
cHVibGljIElDUFBNZXRob2RbXSBnZXREZWNsYXJlZE1ldGhvZHMoKSB0aHJvd3MgRE9NRXhjZXB0
aW9uIHsNCisJCWlmKCBob3N0LmdldERlZmluaXRpb24oKSA9PSBudWxsICl7DQorCQkJaG9zdC5j
aGVja0ZvckRlZmluaXRpb24oKTsNCisJCQlpZiggaG9zdC5nZXREZWZpbml0aW9uKCkgPT0gbnVs
bCApew0KKwkJCQlJQVNUTm9kZVtdIGRlY2xhcmF0aW9ucz0gaG9zdC5nZXREZWNsYXJhdGlvbnMo
KTsNCisJCQkJSUFTVE5vZGUgbm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJh
dGlvbnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KKwkJCQlyZXR1cm4g
bmV3IElDUFBNZXRob2RbXSB7IG5ldyBDUFBNZXRob2QuQ1BQTWV0aG9kUHJvYmxlbSggbm9kZSwg
SVByb2JsZW1CaW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9UX0ZPVU5ELCBob3N0LmdldE5h
bWVDaGFyQXJyYXkoKSApIH07DQorCQkJfQ0KKwkJfQ0KKwkJSUJpbmRpbmcgYmluZGluZyA9IG51
bGw7DQorCQlJQ1BQTWV0aG9kIFtdIHJlc3VsdCA9IG51bGw7DQorDQorCQlJQVNURGVjbGFyYXRp
b24gW10gZGVjbHMgPSBob3N0LmdldENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIoKS5nZXRNZW1iZXJz
KCk7DQorCQlmb3IgKCBpbnQgaSA9IDA7IGkgPCBkZWNscy5sZW5ndGg7IGkrKyApIHsNCisJCQlJ
QVNURGVjbGFyYXRpb24gZGVjbCA9IGRlY2xzW2ldOw0KKwkJCXdoaWxlKCBkZWNsIGluc3RhbmNl
b2YgSUNQUEFTVFRlbXBsYXRlRGVjbGFyYXRpb24gKQ0KKwkJCQlkZWNsID0gKChJQ1BQQVNUVGVt
cGxhdGVEZWNsYXJhdGlvbilkZWNsKS5nZXREZWNsYXJhdGlvbigpOw0KKwkJCWlmKCBkZWNsIGlu
c3RhbmNlb2YgSUFTVFNpbXBsZURlY2xhcmF0aW9uICl7DQorCQkJCUlBU1REZWNsYXJhdG9yIFtd
IGR0b3JzID0gKChJQVNUU2ltcGxlRGVjbGFyYXRpb24pZGVjbCkuZ2V0RGVjbGFyYXRvcnMoKTsN
CisJCQkJZm9yICggaW50IGogPSAwOyBqIDwgZHRvcnMubGVuZ3RoOyBqKysgKSB7DQorCQkJCQli
aW5kaW5nID0gZHRvcnNbal0uZ2V0TmFtZSgpLnJlc29sdmVCaW5kaW5nKCk7DQorCQkJCQlpZigg
YmluZGluZyBpbnN0YW5jZW9mIElDUFBNZXRob2QpDQorCQkJCQkJcmVzdWx0ID0gKElDUFBNZXRo
b2RbXSkgQXJyYXlVdGlsLmFwcGVuZCggSUNQUE1ldGhvZC5jbGFzcywgcmVzdWx0LCBiaW5kaW5n
ICk7DQorCQkJCX0NCisJCQl9IGVsc2UgaWYoIGRlY2wgaW5zdGFuY2VvZiBJQVNURnVuY3Rpb25E
ZWZpbml0aW9uICl7DQorCQkJCUlBU1REZWNsYXJhdG9yIGR0b3IgPSAoKElBU1RGdW5jdGlvbkRl
ZmluaXRpb24pZGVjbCkuZ2V0RGVjbGFyYXRvcigpOw0KKwkJCQlkdG9yID0gQ1BQVmlzaXRvci5n
ZXRNb3N0TmVzdGVkRGVjbGFyYXRvciggZHRvciApOw0KKwkJCQliaW5kaW5nID0gZHRvci5nZXRO
YW1lKCkucmVzb2x2ZUJpbmRpbmcoKTsNCisJCQkJaWYoIGJpbmRpbmcgaW5zdGFuY2VvZiBJQ1BQ
TWV0aG9kICl7DQorCQkJCQlyZXN1bHQgPSAoSUNQUE1ldGhvZFtdKSBBcnJheVV0aWwuYXBwZW5k
KCBJQ1BQTWV0aG9kLmNsYXNzLCByZXN1bHQsIGJpbmRpbmcgKTsNCisJCQkJfQ0KKwkJCX0gZWxz
ZSBpZiggZGVjbCBpbnN0YW5jZW9mIElDUFBBU1RVc2luZ0RlY2xhcmF0aW9uICl7DQorCQkJCUlB
U1ROYW1lIG4gPSAoKElDUFBBU1RVc2luZ0RlY2xhcmF0aW9uKWRlY2wpLmdldE5hbWUoKTsNCisJ
CQkJYmluZGluZyA9IG4ucmVzb2x2ZUJpbmRpbmcoKTsNCisJCQkJaWYoIGJpbmRpbmcgaW5zdGFu
Y2VvZiBJQ1BQVXNpbmdEZWNsYXJhdGlvbiApew0KKwkJCQkJSUJpbmRpbmcgW10gYnMgPSAoKElD
UFBVc2luZ0RlY2xhcmF0aW9uKWJpbmRpbmcpLmdldERlbGVnYXRlcygpOw0KKwkJCQkJZm9yICgg
aW50IGogPSAwOyBqIDwgYnMubGVuZ3RoOyBqKysgKSB7DQorCQkJCQkJaWYoIGJzW2pdIGluc3Rh
bmNlb2YgSUNQUE1ldGhvZCApDQorCQkJCQkJCXJlc3VsdCA9IChJQ1BQTWV0aG9kW10pIEFycmF5
VXRpbC5hcHBlbmQoIElDUFBNZXRob2QuY2xhc3MsIHJlc3VsdCwgYnNbal0gKTsNCisJCQkJCX0N
CisJCQkJfSBlbHNlIGlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQUE1ldGhvZCApIHsNCisJCQkJ
CXJlc3VsdCA9IChJQ1BQTWV0aG9kW10pIEFycmF5VXRpbC5hcHBlbmQoIElDUFBNZXRob2QuY2xh
c3MsIHJlc3VsdCwgYmluZGluZyApOw0KKwkJCQl9DQorCQkJfQ0KKwkJfQ0KKwkJcmV0dXJuIChJ
Q1BQTWV0aG9kW10pIEFycmF5VXRpbC50cmltKCBJQ1BQTWV0aG9kLmNsYXNzLCByZXN1bHQgKTsN
CisJfQ0KKw0KKwkvKiAobm9uLUphdmFkb2MpDQorCSAqIEBzZWUgb3JnLmVjbGlwc2UuY2R0LmNv
cmUuZG9tLmFzdC5jcHAuSUNQUENsYXNzVHlwZSNnZXRDb25zdHJ1Y3RvcnMoKQ0KKwkgKi8NCisJ
cHVibGljIElDUFBDb25zdHJ1Y3RvcltdIGdldENvbnN0cnVjdG9ycygpIHRocm93cyBET01FeGNl
cHRpb24gew0KKwkJaWYoIGhvc3QuZ2V0RGVmaW5pdGlvbigpID09IG51bGwgKXsNCisJCQlob3N0
LmNoZWNrRm9yRGVmaW5pdGlvbigpOw0KKwkJCWlmKCBob3N0LmdldERlZmluaXRpb24oKSA9PSBu
dWxsICl7DQorCQkJCUlBU1ROb2RlW10gZGVjbGFyYXRpb25zPSBob3N0LmdldERlY2xhcmF0aW9u
cygpOw0KKwkJCQlJQVNUTm9kZSBub2RlID0gKGRlY2xhcmF0aW9ucyAhPSBudWxsICYmIGRlY2xh
cmF0aW9ucy5sZW5ndGggPiAwKSA/IGRlY2xhcmF0aW9uc1swXSA6IG51bGw7DQorCQkJCXJldHVy
biBuZXcgSUNQUENvbnN0cnVjdG9yIFtdIHsgbmV3IENQUENvbnN0cnVjdG9yLkNQUENvbnN0cnVj
dG9yUHJvYmxlbSggbm9kZSwgSVByb2JsZW1CaW5kaW5nLlNFTUFOVElDX0RFRklOSVRJT05fTk9U
X0ZPVU5ELCBob3N0LmdldE5hbWVDaGFyQXJyYXkoKSApIH07DQorCQkJfQ0KKwkJfQ0KKw0KKwkJ
SUNQUENsYXNzU2NvcGUgc2NvcGUgPSAoSUNQUENsYXNzU2NvcGUpIGhvc3QuZ2V0Q29tcG9zaXRl
U2NvcGUoKTsNCisJCWlmKEFTVEludGVybmFsLmlzRnVsbHlDYWNoZWQoc2NvcGUpKQ0KKwkJCXJl
dHVybiAoKENQUENsYXNzU2NvcGUpc2NvcGUpLmdldENvbnN0cnVjdG9ycyggdHJ1ZSApOw0KKw0K
KwkJSUFTVERlY2xhcmF0aW9uIFtdIG1lbWJlcnMgPSBob3N0LmdldENvbXBvc2l0ZVR5cGVTcGVj
aWZpZXIoKS5nZXRNZW1iZXJzKCk7DQorCQlmb3IoIGludCBpID0gMDsgaSA8IG1lbWJlcnMubGVu
Z3RoOyBpKysgKXsNCisJCQlJQVNURGVjbGFyYXRpb24gZGVjbCA9IG1lbWJlcnNbaV07DQorCQkJ
aWYoIGRlY2wgaW5zdGFuY2VvZiBJQ1BQQVNUVGVtcGxhdGVEZWNsYXJhdGlvbiApDQorCQkJCWRl
Y2wgPSAoKElDUFBBU1RUZW1wbGF0ZURlY2xhcmF0aW9uKWRlY2wpLmdldERlY2xhcmF0aW9uKCk7
DQorCQkJaWYoIGRlY2wgaW5zdGFuY2VvZiBJQVNUU2ltcGxlRGVjbGFyYXRpb24gKXsNCisJCQkJ
SUFTVERlY2xhcmF0b3IgW10gZHRvcnMgPSAoKElBU1RTaW1wbGVEZWNsYXJhdGlvbilkZWNsKS5n
ZXREZWNsYXJhdG9ycygpOw0KKwkJCQlmb3IoIGludCBqID0gMDsgaiA8IGR0b3JzLmxlbmd0aDsg
aisrICl7DQorCQkJCQlpZiggZHRvcnNbal0gPT0gbnVsbCApIGJyZWFrOw0KKwkJCQkJQVNUSW50
ZXJuYWwuYWRkTmFtZShzY29wZSwgIGR0b3JzW2pdLmdldE5hbWUoKSApOw0KKwkJCQl9DQorCQkJ
fSBlbHNlIGlmKCBkZWNsIGluc3RhbmNlb2YgSUFTVEZ1bmN0aW9uRGVmaW5pdGlvbiApew0KKwkJ
CQlJQVNURGVjbGFyYXRvciBkdG9yID0gKChJQVNURnVuY3Rpb25EZWZpbml0aW9uKWRlY2wpLmdl
dERlY2xhcmF0b3IoKTsNCisJCQkJQVNUSW50ZXJuYWwuYWRkTmFtZShzY29wZSwgIGR0b3IuZ2V0
TmFtZSgpICk7DQorCQkJfQ0KKwkJfQ0KKw0KKwkJcmV0dXJuICgoQ1BQQ2xhc3NTY29wZSlzY29w
ZSkuZ2V0Q29uc3RydWN0b3JzKCB0cnVlICk7DQorCX0NCisNCisJcHVibGljIElDUFBDbGFzc1R5
cGVbXSBnZXROZXN0ZWRDbGFzc2VzKCkgew0KKwkJaWYoIGhvc3QuZ2V0RGVmaW5pdGlvbigpID09
IG51bGwgKXsNCisJCQlob3N0LmNoZWNrRm9yRGVmaW5pdGlvbigpOw0KKwkJCWlmKCBob3N0Lmdl
dERlZmluaXRpb24oKSA9PSBudWxsICl7DQorCQkJCUlBU1ROb2RlW10gZGVjbGFyYXRpb25zPSBo
b3N0LmdldERlY2xhcmF0aW9ucygpOw0KKwkJCQlJQVNUTm9kZSBub2RlID0gKGRlY2xhcmF0aW9u
cyAhPSBudWxsICYmIGRlY2xhcmF0aW9ucy5sZW5ndGggPiAwKSA/IGRlY2xhcmF0aW9uc1swXSA6
IG51bGw7DQorCQkJCXJldHVybiBuZXcgSUNQUENsYXNzVHlwZVtdIHsgbmV3IENQUENsYXNzVHlw
ZVByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05PVF9G
T1VORCwgaG9zdC5nZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KKwkJCX0NCisJCX0NCisNCisJCUlD
UFBDbGFzc1R5cGUgW10gcmVzdWx0ID0gbnVsbDsNCisNCisJCUlBU1REZWNsYXJhdGlvbiBbXSBk
ZWNscyA9IGhvc3QuZ2V0Q29tcG9zaXRlVHlwZVNwZWNpZmllcigpLmdldE1lbWJlcnMoKTsNCisJ
CWZvciAoIGludCBpID0gMDsgaSA8IGRlY2xzLmxlbmd0aDsgaSsrICkgew0KKwkJCUlBU1REZWNs
YXJhdGlvbiBkZWNsID0gZGVjbHNbaV07DQorCQkJd2hpbGUoIGRlY2wgaW5zdGFuY2VvZiBJQ1BQ
QVNUVGVtcGxhdGVEZWNsYXJhdGlvbiApDQorCQkJCWRlY2wgPSAoKElDUFBBU1RUZW1wbGF0ZURl
Y2xhcmF0aW9uKWRlY2wpLmdldERlY2xhcmF0aW9uKCk7DQorCQkJaWYoIGRlY2wgaW5zdGFuY2Vv
ZiBJQVNUU2ltcGxlRGVjbGFyYXRpb24gKXsNCisJCQkJSUJpbmRpbmcgYmluZGluZyA9IG51bGw7
DQorCQkJCUlBU1REZWNsU3BlY2lmaWVyIGRlY2xTcGVjID0gKChJQVNUU2ltcGxlRGVjbGFyYXRp
b24pIGRlY2wpLmdldERlY2xTcGVjaWZpZXIoKTsNCisJCQkJaWYoIGRlY2xTcGVjIGluc3RhbmNl
b2YgSUNQUEFTVENvbXBvc2l0ZVR5cGVTcGVjaWZpZXIgKXsNCisJCQkJCWJpbmRpbmcgPSAoKElD
UFBBU1RDb21wb3NpdGVUeXBlU3BlY2lmaWVyKWRlY2xTcGVjKS5nZXROYW1lKCkucmVzb2x2ZUJp
bmRpbmcoKTsNCisJCQkJfSBlbHNlIGlmKCBkZWNsU3BlYyBpbnN0YW5jZW9mIElDUFBBU1RFbGFi
b3JhdGVkVHlwZVNwZWNpZmllciAmJg0KKwkJCQkJCSgoSUFTVFNpbXBsZURlY2xhcmF0aW9uKWRl
Y2wpLmdldERlY2xhcmF0b3JzKCkubGVuZ3RoID09IDAgKQ0KKwkJCQl7DQorCQkJCQliaW5kaW5n
ID0gKChJQ1BQQVNURWxhYm9yYXRlZFR5cGVTcGVjaWZpZXIpZGVjbFNwZWMpLmdldE5hbWUoKS5y
ZXNvbHZlQmluZGluZygpOw0KKwkJCQl9DQorCQkJCWlmKCBiaW5kaW5nIGluc3RhbmNlb2YgSUNQ
UENsYXNzVHlwZSApDQorCQkJCQlyZXN1bHQgPSAoSUNQUENsYXNzVHlwZVtdKUFycmF5VXRpbC5h
cHBlbmQoIElDUFBDbGFzc1R5cGUuY2xhc3MsIHJlc3VsdCwgYmluZGluZyApOw0KKwkJCX0gDQor
CQl9DQorCQlyZXR1cm4gKElDUFBDbGFzc1R5cGVbXSkgQXJyYXlVdGlsLnRyaW0oIElDUFBDbGFz
c1R5cGUuY2xhc3MsIHJlc3VsdCApOw0KKwl9DQorDQorCXB1YmxpYyBJRmllbGRbXSBnZXRGaWVs
ZHMoKSB0aHJvd3MgRE9NRXhjZXB0aW9uIHsNCisJCWlmKCBob3N0LmdldERlZmluaXRpb24oKSA9
PSBudWxsICl7DQorCQkJaG9zdC5jaGVja0ZvckRlZmluaXRpb24oKTsNCisJCQlpZiggaG9zdC5n
ZXREZWZpbml0aW9uKCkgPT0gbnVsbCApew0KKwkJCQlJQVNUTm9kZVtdIGRlY2xhcmF0aW9ucz0g
aG9zdC5nZXREZWNsYXJhdGlvbnMoKTsNCisJCQkJSUFTVE5vZGUgbm9kZSA9IChkZWNsYXJhdGlv
bnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkgPyBkZWNsYXJhdGlvbnNbMF0g
OiBudWxsOw0KKwkJCQlyZXR1cm4gbmV3IElGaWVsZCBbXSB7IG5ldyBDUFBGaWVsZC5DUFBGaWVs
ZFByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19ERUZJTklUSU9OX05PVF9G
T1VORCwgaG9zdC5nZXROYW1lQ2hhckFycmF5KCkgKSB9Ow0KKwkJCX0NCisJCX0NCisNCisJCUlG
aWVsZFtdIGZpZWxkcyA9IGdldERlY2xhcmVkRmllbGRzKCk7DQorCQlJQ1BQQmFzZSBbXSBiYXNl
cyA9IGdldEJhc2VzKCk7DQorCQlmb3IgKCBpbnQgaSA9IDA7IGkgPCBiYXNlcy5sZW5ndGg7IGkr
KyApIHsNCisJCQlJQmluZGluZyBiID0gYmFzZXNbaV0uZ2V0QmFzZUNsYXNzKCk7DQorCQkJaWYo
IGIgaW5zdGFuY2VvZiBJQ1BQQ2xhc3NUeXBlICkNCisJCQkJZmllbGRzID0gKElGaWVsZFtdKSBB
cnJheVV0aWwuYWRkQWxsKCBJRmllbGQuY2xhc3MsIGZpZWxkcywgKChJQ1BQQ2xhc3NUeXBlKWIp
LmdldEZpZWxkcygpICk7DQorCQl9DQorCQlyZXR1cm4gKElGaWVsZFtdKSBBcnJheVV0aWwudHJp
bSggSUZpZWxkLmNsYXNzLCBmaWVsZHMgKTsNCisJfQ0KKw0KKwlwdWJsaWMgSUZpZWxkIGZpbmRG
aWVsZChTdHJpbmcgbmFtZSkgdGhyb3dzIERPTUV4Y2VwdGlvbiB7DQorCQlJQmluZGluZyBbXSBi
aW5kaW5ncyA9IENQUFNlbWFudGljcy5maW5kQmluZGluZ3MoIGhvc3QuZ2V0Q29tcG9zaXRlU2Nv
cGUoKSwgbmFtZSwgdHJ1ZSApOw0KKwkJSUZpZWxkIGZpZWxkID0gbnVsbDsNCisJCWZvciAoIGlu
dCBpID0gMDsgaSA8IGJpbmRpbmdzLmxlbmd0aDsgaSsrICkgew0KKwkJCWlmKCBiaW5kaW5nc1tp
XSBpbnN0YW5jZW9mIElGaWVsZCApew0KKwkJCQlpZiggZmllbGQgPT0gbnVsbCApDQorCQkJCQlm
aWVsZCA9IChJRmllbGQpIGJpbmRpbmdzW2ldOw0KKwkJCQllbHNlIHsNCisJCQkJCUlBU1ROb2Rl
W10gZGVjbGFyYXRpb25zPSBob3N0LmdldERlY2xhcmF0aW9ucygpOw0KKwkJCQkJSUFTVE5vZGUg
bm9kZSA9IChkZWNsYXJhdGlvbnMgIT0gbnVsbCAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkg
PyBkZWNsYXJhdGlvbnNbMF0gOiBudWxsOw0KKwkJCQkJcmV0dXJuIG5ldyBDUFBGaWVsZC5DUFBG
aWVsZFByb2JsZW0oIG5vZGUsIElQcm9ibGVtQmluZGluZy5TRU1BTlRJQ19BTUJJR1VPVVNfTE9P
S1VQLCBuYW1lLnRvQ2hhckFycmF5KCkgKTsNCisJCQkJfQ0KKwkJCX0NCisJCX0NCisJCXJldHVy
biBmaWVsZDsNCisJfQ0KK30NCkluZGV4OiBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFs
L2NvcmUvZG9tL3BhcnNlci9jcHAvSUNQUEludGVybmFsQ2xhc3NUeXBlTWl4aW5Ib3N0LmphdmEN
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0NClJDUyBmaWxlOiBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFsL2Nv
cmUvZG9tL3BhcnNlci9jcHAvSUNQUEludGVybmFsQ2xhc3NUeXBlTWl4aW5Ib3N0LmphdmENCmRp
ZmYgLU4gcGFyc2VyL29yZy9lY2xpcHNlL2NkdC9pbnRlcm5hbC9jb3JlL2RvbS9wYXJzZXIvY3Bw
L0lDUFBJbnRlcm5hbENsYXNzVHlwZU1peGluSG9zdC5qYXZhDQotLS0gL2Rldi9udWxsCTEgSmFu
IDE5NzAgMDA6MDA6MDAgLTAwMDANCisrKyBwYXJzZXIvb3JnL2VjbGlwc2UvY2R0L2ludGVybmFs
L2NvcmUvZG9tL3BhcnNlci9jcHAvSUNQUEludGVybmFsQ2xhc3NUeXBlTWl4aW5Ib3N0LmphdmEJ
MSBKYW4gMTk3MCAwMDowMDowMCAtMDAwMA0KQEAgLTAsMCArMSwyMCBAQA0KK3BhY2thZ2Ugb3Jn
LmVjbGlwc2UuY2R0LmludGVybmFsLmNvcmUuZG9tLnBhcnNlci5jcHA7DQorDQoraW1wb3J0IG9y
Zy5lY2xpcHNlLmNkdC5jb3JlLmRvbS5hc3QuY3BwLklDUFBBU1RDb21wb3NpdGVUeXBlU3BlY2lm
aWVyOw0KK2ltcG9ydCBvcmcuZWNsaXBzZS5jZHQuY29yZS5kb20uYXN0LmNwcC5JQ1BQQ2xhc3NU
eXBlOw0KKw0KKy8qKg0KKyAqIEludGVybmFsIGludGVyZmFjZSBmb3IgZXhwb3NpbmcgaW50ZXJu
YWwgbWV0aG9kcyB0byBDbGFzc1R5cGVNaXhpbg0KKyAqLw0KK3B1YmxpYyBpbnRlcmZhY2UgSUNQ
UEludGVybmFsQ2xhc3NUeXBlTWl4aW5Ib3N0IGV4dGVuZHMgSUNQUEludGVybmFsQ2xhc3NUeXBl
LCBJQ1BQQ2xhc3NUeXBlIHsNCisJLyoqDQorCSAqIEByZXR1cm4gdGhlIGNvbXBvc2l0ZSB0eXBl
IHNwZWNpZmllciBmb3IgdGhlIGNsYXNzIHR5cGUNCisJICovDQorCSBJQ1BQQVNUQ29tcG9zaXRl
VHlwZVNwZWNpZmllciBnZXRDb21wb3NpdGVUeXBlU3BlY2lmaWVyKCk7DQorCSANCisJIC8qKg0K
KwkgICogRW5zdXJlcyB0aGUgSUNQUEludGVybmFsQmluZGluZyBkZWZpbml0aW9uIGlzIHNldCwg
aWYgdGhpcyBpcyBwb3NzaWJsZS4NCisJICAqIEBzZWUgSUNQUEludGVybmFsQmluZGluZyNnZXRE
ZWZpbml0aW9uKCkNCisJICAqLw0KKwkgdm9pZCBjaGVja0ZvckRlZmluaXRpb24oKTsNCit9DQo=
</data>
<flag name="iplog"
          id="60967"
          type_id="7"
          status="-"
          setter="dschaefer"
    />
          </attachment>
      

    </bug>

</bugzilla>