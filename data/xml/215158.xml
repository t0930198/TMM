<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.1"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>215158</bug_id>
          
          <creation_ts>2008-01-13 17:00:00 -0500</creation_ts>
          <short_desc>java.util.ConcurrentModificationException during RunAndRenderTask.run</short_desc>
          <delta_ts>2008-03-26 22:46:55 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>3</classification_id>
          <classification>BIRT</classification>
          <product>BIRT</product>
          <component>Chart</component>
          <version>2.2.1</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>211976</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P1</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>2.3.0 M6</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jarkko Lietolahti">jappe</reporter>
          <assigned_to name="Xingsheng Zhu">xzhu</assigned_to>
          <cc>mikko.talvitie</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1130329</commentid>
    <comment_count>0</comment_count>
    <who name="Jarkko Lietolahti">jappe</who>
    <bug_when>2008-01-13 17:00:39 -0500</bug_when>
    <thetext>Build ID: BIRT 2.2.1

Steps To Reproduce:
1. Login into the application
2. Keep accessing graphs generated by Birt


More information:
We&apos;ve an application that uses custom servlet to generate reports from BIRT rptdesign files. Now we&apos;re seeing HTTP 500 errors (caused by our error handling process). There 500 errors are being caused by java.util.ConcurrentModificationException which is thrown from inside RunAndRenderTask.run.



2008-01-13 23:49:58,754 ERROR [STDERR] javax.servlet.ServletException: org.eclipse.birt.report.engine.api.EngineException: Error happened while ru
nning the report
2008-01-13 23:49:58,755 ERROR [STDERR]  at fi.tc.birt.SeamReport.doGet(SeamReport.java:303)
2008-01-13 23:49:58,755 ERROR [STDERR]  at sun.reflect.GeneratedMethodAccessor927.invoke(Unknown Source)
2008-01-13 23:49:58,755 ERROR [STDERR]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
2008-01-13 23:49:58,755 ERROR [STDERR]  at java.lang.reflect.Method.invoke(Method.java:597)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.util.Reflections.invoke(Reflections.java:20)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:31)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:57)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.interceptors.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:34)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.interceptors.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:47)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.interceptors.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:27)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:103)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:151)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:87)
2008-01-13 23:49:58,755 ERROR [STDERR]  at fi.tc.birt.SeamReport_$$_javassist_130.doGet(SeamReport_$$_javassist_130.java)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.ui.download.ReportResource.getResource(ReportResource.java:69)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.servlet.ResourceServlet.doGet(ResourceServlet.java:68)
2008-01-13 23:49:58,755 ERROR [STDERR]  at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
2008-01-13 23:49:58,755 ERROR [STDERR]  at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.web.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:63)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.debug.hot.HotDeployFilter.doFilter(HotDeployFilter.java:60)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.web.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:49)
2008-01-13 23:49:58,755 ERROR [STDERR]  at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:57)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.seam.web.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:49)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.seam.web.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:49)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:79)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.seam.web.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:49)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.seam.web.SeamFilter.doFilter(SeamFilter.java:84)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
2008-01-13 23:49:58,756 ERROR [STDERR]  at java.lang.Thread.run(Thread.java:619)
2008-01-13 23:49:58,756 ERROR [STDERR] Caused by: org.eclipse.birt.report.engine.api.EngineException: Error happened while running the report
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:155)
2008-01-13 23:49:58,756 ERROR [STDERR]  at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:68)
2008-01-13 23:49:58,756 ERROR [STDERR]  at fi.tc.birt.SeamReport.doGet(SeamReport.java:290)
2008-01-13 23:49:58,756 ERROR [STDERR]  ... 51 more
2008-01-13 23:49:58,757 ERROR [STDERR] Caused by: java.util.ConcurrentModificationException
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.common.util.BasicEList$EIterator.checkModCount(BasicEList.java:1327)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.common.util.BasicEList$EIterator.next(BasicEList.java:1275)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyAll(EcoreUtil.java:426)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyContainment(EcoreUtil.java:534)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:455)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyAll(EcoreUtil.java:426)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyContainment(EcoreUtil.java:534)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:455)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyAll(EcoreUtil.java:426)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyContainment(EcoreUtil.java:534)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:455)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyAll(EcoreUtil.java:426)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyContainment(EcoreUtil.java:534)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:455)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.emf.ecore.util.EcoreUtil.copy(EcoreUtil.java:355)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.chart.factory.Generator.prepare(Generator.java:627)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.chart.reportitem.ChartReportItemGenerationImpl.onRowSets(ChartReportItemGenerationImpl
.java:142)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.executor.ExtendedGenerateExecutor.generateContent(ExtendedGenerateExecut
or.java:113)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.executor.ExtendedGenerateExecutor.execute(ExtendedGenerateExecutor.java:
72)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.executor.ExtendedItemExecutor.execute(ExtendedItemExecutor.java:60)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.internal.executor.dup.SuppressDuplicateItemExecutor.execute(SuppressDupl
icateItemExecutor.java:42)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportItemExecutor.execute(WrappedReportIt
emExecutor.java:45)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute(LocalizedRepo
rtItemExecutor.java:33)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:63)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:85)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:10
6)
2008-01-13 23:49:58,757 ERROR [STDERR]  at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:140)
2008-01-13 23:49:58,757 ERROR [STDERR]  ... 53 more</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1147038</commentid>
    <comment_count>1</comment_count>
    <who name="Xingsheng Zhu">xzhu</who>
    <bug_when>2008-01-31 21:41:35 -0500</bug_when>
    <thetext>This is the same as bug#211976. But we can&apos;t reproduce it.  So can you reproduce it recently?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1185625</commentid>
    <comment_count>2</comment_count>
    <who name="Yulin Wang">yulin.wang</who>
    <bug_when>2008-03-26 22:46:55 -0400</bug_when>
    <thetext>Duplicate to Bug 211976.

*** This bug has been marked as a duplicate of bug 211976 ***</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>